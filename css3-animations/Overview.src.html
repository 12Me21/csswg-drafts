<!DOCTYPE html>
<html lang="en">
<head>
	<title>CSS Animations</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="stylesheet" type="text/css" href="../default.css">
	<link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED.css">
	<style type="text/css">
		div.prod { margin: 1em 2em; }
	</style>
</head>

<body>

<div class="head">
<!--logo-->

<h1>CSS Animations</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
	<dt>This version:
		<dd><a href="[VERSION]">http://dev.w3.org/csswg/css3-animations/</a>
		<!--http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]/-->
	<dt>Latest version:
		<dd><a
			href="http://www.w3.org/TR/css3-animations/">[LATEST]</a>
	<dt>Editor's draft:
		<dd><a href="http://dev.w3.org/csswg/[SHORTNAME]/">http://dev.w3.org/csswg/[SHORTNAME]/</a>

	<dt>Previous version:
		<dd><a href="http://www.w3.org/TR/2012/WD-css3-animations-20120403/">
			http://www.w3.org/TR/2012/WD-css3-animations-20120403/</a>
	<dt id="editors-list">Editors:
		<dd><a href="mailto:dino@apple.com">Dean Jackson</a> (<a
			href="http://www.apple.com/">Apple Inc</a>)
		<dd><a href="mailto:hyatt@apple.com">David Hyatt</a> (<a
			href="http://www.apple.com/">Apple Inc</a>)
		<dd><a href="mailto:cmarrin@apple.com">Chris Marrin</a> (<a
			href="http://www.apple.com/">Apple Inc</a>)
		<dd><a href="mailto:sylvaing@microsoft.com">Sylvain Galineau</a>
			(<a class=org href="http://www.microsoft.com/">Microsoft</a>)
		<dd class=vcard><a class=fn href="http://dbaron.org/">L. David Baron</a>
			(<a class=org href="http://www.mozilla.org/">Mozilla</a>)

	<dt>Issues list:
		<dd><a href="https://www.w3.org/Bugs/Public/buglist.cgi?query_format=advanced&amp;product=CSS&amp;component=Animations&amp;resolution=---&amp;cmdtype=doit">in Bugzilla</a>

	<dt>Discussion:
		<dd><a href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a> with subject line &ldquo;<kbd>[[SHORTNAME]] <var>&hellip; message topic &hellip;</var></kbd>&rdquo;

	<dt>Test suite:
		<dd>none yet
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">
Abstract</h2>

	<p>
		This CSS module describes a way for authors to animate the values of CSS properties over time, 
		using keyframes. 
		The behavior of these keyframe animations can be controlled by specifying their duration, 
		number of repeats, 
		and repeating behavior.


<h2 class="no-num no-toc" id="status">
Status of this document</h2>
<!--status-->


<h2 class="no-num no-toc" id="contents">
Table of contents</h2>
<!--toc-->


<h2 id="introduction">
Introduction</h2>

	<p><em>This section is not normative.</em>

	<p>
		CSS Transitions [[CSS3-TRANSITIONS]] 
		provide a way to interpolate CSS property values 
		when they change as a result of underlying property changes. 
		This provides an easy way to do simple animation, 
		but the start and end states of the animation are controlled by the existing property values, 
		and transitions provide little control to the author on how the animation progresses.
	
	<p>
		This proposal introduces <dfn>defined animations</dfn>, 
		in which the author can specify the changes in CSS properties over time as a set of keyframes. 
		Animations are similar to transitions 
		in that they change the presentational value of CSS properties over time. 
		The principal difference is that 
		while transitions trigger <em>implicitly</em> when property values change, 
		animations are <em>explicitly</em> executed when the animation properties are applied. 
		Because of this, 
		animations require explicit values for the properties being animated. 
		These values are specified using animation keyframes, described below.
	
	<p>
		Many aspects of the animation can be controlled, 
		including how many times the animation iterates, 
		whether or not it alternates between the begin and end values, 
		and whether or not the animation should be running or paused. 
		An animation can also delay its start time.


<h2 id="animations">
Animations</h2>

	<p>
		CSS Animations affect computed property values. 
		During the execution of an animation, 
		the computed value for a property is controlled by the animation. 
		This overrides the value specified in the normal styling system.
	

	<p>
		If at one point in time there are multiple animations specifying behavior for the same property, 
		the animation whose name occurs last in the value of 'animation-name' 
		will override the other animations at that point.
	

	<p>
		An animation does not affect the computed value before the application of the animation, 
		before the animation delay has expired, 
		and after the end of the animation.
	

	<div class="figure">
		<img src="sandwich.png" alt="">
	
		<p class="caption">
			Computation of animated property values
	</div>	

	<p>
		The diagram above shows how property values are computed. 
		The intrinsic style is shown at the top of the diagram. 
		The computed value is derived from intrinsic style 
		at the times when an animation is not running 
		and also when an animation is delayed 
		(see below for specification of animation delay). 
		During an animation, 
		the computed style is derived from the animated value.
	

	<p>
		The start time of an animation is the latter of two moments: 
		the time at which the style is resolved that specifies the animation, 
		or the time the document's load event is fired. 
		Therefore, an animation specified in the document style sheet 
		will begin at the document load. 
		An animation specified on an element by modifying the style after the document has loaded 
		will start when the style is resolved. 
		That may be immediately in the case of a pseudo style rule such as hover, 
		or may be when the scripting engine returns control to the browser 
		(in the case of style applied by script).
	

	<p>
		An animation applies to an element 
		if the element has a value for 'animation-name' that references a valid keyframes rule. 
		Once an animation has started 
		it continues until it ends 
		or the 'animation-name' is removed. 
		The values used for the keyframes and animation properties are snapshotted at the time the animation starts. 
		Changing them during the execution of the animation has no effect. 
		Note also that changing the value of 'animation-name' does not necessarily restart an animation 
		(e.g., if a list of animations are applied and one is removed from the list, 
		only that animation will stop; 
		The other animations will continue). 
		In order to restart an animation, 
		it must be removed then reapplied.
	

	<p>
		The end of the animation is defined by the combination of the
		'animation-duration',
		'animation-iteration-count' and
		'animation-fill-mode' properties.
		
		
	<div class="example">
		<pre>
div {
  animation-name: diagonal-slide;
  animation-duration: 5s;
  animation-iteration-count: 10;
}

@keyframes diagonal-slide {

  from {
    left: 0;
    top: 0;
  }

  to {
    left: 100px;
    top: 100px;
  }

}</pre>

		<p>
			This will produce an animation 
			that moves an element from (0, 0) to (100px, 100px) 
			over five seconds 
			and repeats itself nine times 
			(for a total of ten iterations).
	</div>

<h2 id="keyframes">
Keyframes</h2>
	<p>
		Keyframes are used to specify the values for the animating properties 
		at various points during the animation. 
		The keyframes specify the behavior of one cycle of the animation; 
		the animation may iterate one or more times.
	
	<p>
		Keyframes are specified using a specialized CSS at-rule. 
		A @keyframes rule consists of the keyword "@keyframes", 
		followed by an identifier giving a name for the animation 
		(which will be referenced using 'animation-name'), 
		followed by a set of style rules 
		(delimited by curly braces).
	
	<p>
		The <dfn>keyframe selector</dfn> for a keyframe style rule 
		consists of a comma-separated list of percentage values 
		or the keywords 'from' or 'to'. 
		The selector is used to specify the percentage along the duration of the animation that the keyframe represents. 
		The keyframe itself is specified by the block of property values declared on the selector. 
		The keyword 'from' is equivalent to the value ''0%''. 
		The keyword 'to' is equivalent to the value ''100%''. 
		<span class='note'>Note that the percentage unit specifier must be used on percentage values. 
			Therefore, ''0'' is an invalid keyframe selector.</span>
	
	<p>
		If a ''0%'' or ''from'' keyframe is not specified, 
		then the user agent constructs a ''0%'' keyframe 
		using the computed values of the properties being animated. 
		If a ''100%'' or ''to'' keyframe is not specified, 
		then the user agent constructs a ''100%'' keyframe 
		using the computed values of the properties being animated. 
		If a keyframe selector specifies 
		negative percentage values or
		values higher than 100%,
		then the keyframe will be ignored.
	
	<p>
		The <dfn>keyframe declaration block</dfn> for a keyframe rule 
		consists of properties and values. 
		Properties that are unable to be animated are ignored in these rules, 
		with the exception of 'animation-timing-function', 
		the behavior of which is described below. In addition, keyframe rule declarations qualified with !important are ignored. 
	
	<p class="issue">
		Need to describe what happens if a property is not present in all keyframes.
	
	<p>
		The @keyframes rule that is used by an animation 
		will be the last one encountered in sorted rules order 
		that matches the name of the animation specified by the 'animation-name' property. 
		@keyframes rules do not cascade; 
		therefore, an animation will never derive keyframes from more than one @keyframes rule.
			
	<p>
		To determine the set of keyframes, 
		all of the values in the selectors are sorted in increasing order by time. 
		If there are any duplicates, 
		then the last keyframe specified inside the @keyframes rule 
		will be used to provide the keyframe information for that time. 
		There is no cascading within a @keyframes rule if multiple keyframes specify the same keyframe selector values.

	<p>
		If a property is not specified for a keyframe, 
		or is specified but invalid, 
		the animation of that property proceeds as if that keyframe did not exist. 
		Conceptually, 
		it is as if a set of keyframes is constructed for each property that is present in any of the keyframes, 
		and an animation is run independently for each property.
	
	<div class="example">				
		<pre>
@keyframes wobble {
  0% {
    left: 100px;
  }

  40% {
    left: 150px;
  }

  60% {
    left: 75px;
  }

  100% {
    left: 100px;
  }
}</pre>

		<p>
			Four keyframes are specified for the animation named "wobble". 
			In the first keyframe, 
			shown at the beginning of the animation cycle, 
			the value of the 'left' property being animated is ''100px''. 
			By 40% of the animation duration, 
			'left' has animated to ''150px''. 
			At 60% of the animation duration, 
			'left' has animated back to ''75px''. 
			At the end of the animation cycle, 
			the value of 'left' has returned to ''100px''. 
			The diagram below shows the state of the animation if it were given a duration of ''10s''.
		
		<div class="figure">
			<img src="animation1.png" alt="">
		
			<p class="caption">
				Animations states specified by keyframes
		</div>
	</div>

	<p>
		The following is the grammar for the keyframes rule.
			
	<pre>
keyframes_rule: KEYFRAMES_SYM S+ IDENT S* '{' S* keyframes_blocks '}' S*;

keyframes_blocks: [ keyframe_selector '{' S* declaration? [ ';' S* declaration? ]* '}' S* ]* ;

keyframe_selector: [ FROM_SYM | TO_SYM | PERCENTAGE ] S* [ ',' S* [ FROM_SYM | TO_SYM | PERCENTAGE ] S* ]*;

@{K}{E}{Y}{F}{R}{A}{M}{E}{S}   {return KEYFRAMES_SYM;}
{F}{R}{O}{M}                   {return FROM_SYM;}
{T}{O}                         {return TO_SYM;}</pre>


<h3 id="timing-functions">
Timing functions for keyframes</h3>

	<p>
		A keyframe style rule may also declare the timing function that is to be used 
		as the animation moves to the next keyframe.
			
	<div class="example">
		<pre>
@keyframes bounce {

  from {
    top: 100px;
    animation-timing-function: ease-out;
  }

  25% {
    top: 50px;
    animation-timing-function: ease-in;
  }

  50% {
    top: 100px;
    animation-timing-function: ease-out;
  }

  75% {
    top: 75px;
    animation-timing-function: ease-in;
  }

  to {
    top: 100px;
  }

}</pre>

		<p>
			Five keyframes are specified for the animation named "bounce". 
			Between the first and second keyframe 
			(i.e., between 0% and 25%) 
			an ''ease-out'' timing function is used. 
			Between the second and third keyframe 
			(i.e., between 25% and 50%) 
			an ''ease-in'' timing function is used. 
			And so on. 
			The effect will appear as an element that moves up the page ''50px'', 
			slowing down as it reaches its highest point 
			then speeding up as it falls back to ''100px''. 
			The second half of the animation behaves in a similar manner, 
			but only moves the element ''25px'' up the page.
	</div>
		
	<p>
		A timing function specified on the "to" or 100% keyframe is ignored.

	<p>
		See the 'animation-timing-function' property for more information.


<h3 id="animation-name-property">
The 'animation-name' Property</h3>

	<p>
		The 'animation-name' property defines a list of animations that apply. 
		Each name is used to select the keyframe at-rule 
		that provides the property values for the animation. 
		If the name does not match any keyframe at-rule, 
		there are no properties to be animated 
		and the animation will not execute. 
		Furthermore, 
		if the animation name is ''none'' 
		then there will be no animation. 
		This can be used to override any animations coming from the cascade. 
		If multiple animations are attempting to modify the same property, 
		then the animation closest to the end of the list of names wins.
	
	<p id="list-matching">
		Each animation listed by name 
		should have a corresponding value for the other animation properties listed below. 
		If the lists of values for the other animation properties do not have the same length, 
		the length of the 'animation-name' list 
		determines the number of items in each list examined when starting transitions.  
		The lists are matched up from the first value: 
		excess values at the end are not used.  
		If one of the other properties doesn't have enough comma-separated values to match the number of values of 'animation-name', 
		the UA must calculate its used value by repeating the list of values until there are enough.  
		This truncation or repetition does not affect the computed value.
		<span class="note">Note: This is analogous to the behavior of the 'background-*'properties, 
			with 'background-image' analogous to 'animation-name'.</span>
			

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-name</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-name&gt; [ ',' &lt;single-animation-name&gt; ]*
		<tr>
			<th>Initial:
			<td>''none''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>As specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-name&gt;</dfn> = none | &lt;IDENT&gt;
	</div>

			<!--
			<p>
				It is possible for elements to have multiple animations running that change the same property or properties. In this case the animations combine in a manner defined by the property. For example, animations on 'opacity' will add together and animations on 'transform' will have their transformation matrices multiplied.
			
			<div class="example">
				<p style="display:none">
					Example(s):
				
				<pre>
				@keyframes 'border-bloat' {
					from {
						border-width: 0;
					}
					to {
						border-width: 10px;
					}
				}

				@keyframes 'border-diet' {
					from {
						border-width: 4px;
					}
					to {
						border-width: 2px;
					}
				}

				div {
					animation-name: 'border-bloat', 'border-diet';
					animation-duration: 10s, 4s;
				}
			</pre>
			<p>
			The above example has two animations executing on the same property, 'border-width'. The animations are additive. That is, the 
			resulting value for the property will be the addition of the values from the
			two animations.
			
			<p>
				At time '0s' the element's border will be 4px wide (0px from 'border-bloat' plus 4px from 'border-diet'). 
				At time '4s' the element's border will be 6px wide (4px from 'border-bloat' plus 2px from 'border-diet').
				At time '10s' the element's border will be 10px wide (10px from 'border-bloat' and no addition from
				'border-diet' as it is no longer executing).
			
		</div>
	-->


<h3 id="animation-duration-property">
The 'animation-duration' Property</h3>

	<p>
		The 'animation-duration' property defines the length of time that an animation takes to complete one cycle.


	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-duration</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td> &lt;time&gt; [, &lt;time&gt;]*
		<tr>
			<th>Initial:
			<td>''0s''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<p>
		The initial value is ''0s'', 
		meaning that the animation takes no time. 		
		When the duration is ''0s'' 'animation-fill-mode' still applies, 
		so an animation that fills backwards 
		will show the value of the 0% keyframe during any delay period, 
		and an animation that fills forwards will retain the value specified at the 100% keyframe, 
		even if the animation was instantaneous. 
		Also, animation events are still fired.
		A negative 'animation-duration' value renders the declaration invalid. 
			

<h3 id="animation-timing-function-property">
The 'animation-timing-function' Property</h3>

	<p>
		The 'animation-timing-function' property describes how the animation will progress over one cycle of its duration. 
		See the 'transition-timing-function' property [[!CSS3-TRANSITIONS]] for a complete description of timing function calculation.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-timing-function</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-timing-function&gt; [ ',' &lt;single-animation-timing-function&gt; ]*
		<tr>
			<th>Initial:
			<td>''ease''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-timing-function&gt;</dfn> =
						ease | linear | ease-in | ease-out | ease-in-out |
						step-start | step-end | 
						steps(&lt;number&gt; [, [ start | end ] ]?) |
						cubic-bezier(&lt;number&gt;, &lt;number&gt;, &lt;number&gt;,
						&lt;number&gt;) 
	</div>

	<p>
		For a keyframed animation, 
		the 'animation-timing-function' applies between keyframes, 
		not over the entire animation. 
		For example, 
		in the case of an ''ease-in-out'' timing function, 
		an animation will ease in at the start of the keyframe 
		and ease out at the end of the keyframe. 
		An 'animation-timing-function' defined within a keyframe block applies to that keyframe, 
		otherwise the timing function specified for the animation is used.


<h3 id="animation-iteration-count-property">
The 'animation-iteration-count' Property</h3>

	<p>
		The 'animation-iteration-count' property specifies the number of times an animation cycle is played. 
		The initial value is ''1'', 
		meaning the animation will play from beginning to end once. 
		A value of ''infinite'' will cause the animation to repeat forever. 
		Non-integer numbers will cause the animation to end part-way through a cycle. 
		Negative values of 'animation-iteration-count' are invalid. 
		This property is often used in conjunction an 'animation-direction' value of ''alternate'', 
		which will cause the animation to play in reverse on alternate cycles.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-iteration-count</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-iteration-count&gt; [ ',' &lt;single-animation-iteration-count&gt; ]*
		<tr>
			<th>Initial:
			<td>''1''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-iteration-count&gt;</dfn> =
				infinite | &lt;number&gt;
	</div>

<h3 id="animation-direction-property">
The 'animation-direction' Property</h3>

	<p>
		The 'animation-direction' property defines whether or not the animation should play in reverse on some or all cycles.  
		When an animation is played in reverse the timing functions are also reversed. 
		For example, when played in reverse an ease-in animation would appear to be an ease-out animation.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-direction</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-direction&gt; [ ',' &lt;single-animation-direction&gt; ]*
		<tr>
			<th>Initial:
			<td>''normal''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-direction&gt;</dfn> =
				normal | reverse | alternate | alternate-reverse
	</div>

	<dl>
		<dt><dfn>normal</dfn>
		<dd>
			All iterations of the animation are played as specified.

		<dt><dfn>reverse</dfn>
		<dd>
			All iterations of the animation are played in the reverse direction from the way they were specified.

		<dt><dfn>alternate</dfn>
		<dd>
			The animation cycle iterations that are odd counts are played in the normal direction, 
			and the animation cycle iterations that are even counts are played in a reverse direction.

		<dt><dfn>alternate-reverse</dfn>
		<dd>
			The animation cycle iterations that are odd counts are played in the reverse direction, 
			and the animation cycle iterations that are even counts are played in a normal direction.
	</dl>

	<p class='note'>
		Note that for the purpose of determining whether an iteration is even or odd,
		iterations start counting from 1.


<h3 id="animation-play-state-property">
The 'animation-play-state' Property</h3>

	<p>
		The 'animation-play-state' property defines whether the animation is running or paused. 
		A running animation can be paused by setting this property to ''paused''. 
		To continue running a paused animation this property can be set to ''running''. 
		A paused animation will continue to display the current value of the animation in a static state, 
		as if the time of the animation is constant. 
		When a paused animation is resumed, 
		it restarts from the current value, 
		not necessarily from the beginning of the animation.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-play-state</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-play-state&gt; [ ',' &lt;single-animation-play-state&gt; ]*
		<tr>
			<th>Initial:
			<td>''running''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-play-state&gt;</dfn> =
				running | paused
	</div>

<h3 id="animation-delay-property">
The 'animation-delay' Property</h3>

	<p>
		The 'animation-delay' property defines when the animation will start. 
		It allows an animation to begin execution some time after it is applied. 
		An 'animation-delay' value of ''0s'' means the animation will execute as soon as it is applied. 
		Otherwise, the value specifies an offset from the moment the animation is applied, 
		and the animation will delay execution by that offset.
			
	<p>
		If the value for 'animation-delay' is a negative time offset 
		then the animation will execute the moment it is applied, 
		but will appear to have begun execution at the specified offset. 
		That is, the animation will appear to begin part-way through its play cycle. 
		In the case where an animation has implied starting values and a negative 'animation-delay', 
		the starting values are taken from the moment the animation is applied.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-delay</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td> &lt;time&gt; [, &lt;time&gt;]*
		<tr>
			<th>Initial:
			<td>''0s''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>


<h3 id="animation-fill-mode-property">
The 'animation-fill-mode' Property</h3>

	<p>
		The 'animation-fill-mode' property defines what values are applied by the animation outside the time it is executing. 
		By default, an animation will not affect property values 
		between the time it is applied 
		(the 'animation-name' property is set on an element) 
		and the time it begins execution 
		(which is determined by the 'animation-delay' property). 
		Also, by default an animation does not affect property values after the animation ends 
		(determined by the 'animation-duration' property). 
		The 'animation-fill-mode' property can override this behavior.
			
	<p>
		If the value for 'animation-fill-mode' is ''backwards'', 
		then the animation will apply
		the property values defined in the keyframe
		that will start the first iteration of the animation,
		during the period defined by 'animation-delay'.
		These are either the values of the ''from'' keyframe
		(when 'animation-direction' is ''normal'' or ''alternate'')
		or those of the ''to'' keyframe
		(when 'animation-direction' is ''reverse'' or ''alternate-reverse'').
			
	<p>
		If the value for 'animation-fill-mode' is ''forwards'', 
		then after the animation ends
		(as determined by its 'animation-iteration-count'),
		the animation will apply
		the property values for the time the animation ended.
		When 'animation-iteration-count' is an integer greater than zero,
		the values applied will be
		those for the end of the last completed iteration of the animation
		(rather than the values for
		the start of the iteration that would be next).
		When 'animation-iteration-count' is zero,
		the values applied will be those that would start the first iteration
		(just as when 'animation-fill-mode' is ''backwards'').
			
	<p>
		If the value for 'animation-fill-mode' is ''both'', 
		then the animation will follow the rules for both 'forwards' and 'backwards'. 
		That is, it will extend the animation properties in both directions.

	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation-fill-mode</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation-fill-mode&gt; [ ',' &lt;single-animation-fill-mode&gt; ]*
		<tr>
			<th>Initial:
			<td>''none''
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>as specified
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation-fill-mode&gt;</dfn> =
				none | forwards | backwards | both
	</div>

<h3 id="animation-shorthand-property">
The 'animation' Shorthand Property

	<p>
		The 'animation' shorthand property combines seven of the animation properties into a single property.
			
	<table class=propdef>
		<tr>
			<th>Name:</th>
			<td><dfn>animation</dfn>
		<tr>
			<th><a href="#values">Value</a>:
			<td>&lt;single-animation&gt; [ ',' &lt;single-animation&gt; ]*
		<tr>
			<th>Initial:
			<td>see individual properties
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>see individual properties
		<tr>
			<th>Animatable:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>see individual properties
		<tr>
			<th>Canonical Order:
			<td><abbr title="follows order of property value definition">per grammar</abbr>
	</table>

	<div class="prod">
		<dfn>&lt;single-animation&gt;</dfn> =
				&lt;single-animation-name&gt; ||
				&lt;time&gt; ||
				&lt;single-animation-timing-function&gt; ||
				&lt;time&gt; ||
				&lt;single-animation-iteration-count&gt; ||
				&lt;single-animation-direction&gt; ||
				&lt;single-animation-fill-mode&gt;
	</div>

	<p>
		Note that order is important within the items in this property:
		the first value that can be parsed as a <var>&lt;time&gt;</var> is assigned to the
		transition-duration,
		and the second value that can be parsed as a <var>&lt;time&gt;</var> is assigned to
		transition-delay.
	</p>

	<p class="issue">
		An alternative proposal is to accept the font shorthand approach 
		of using a "/" character between the values of the same type. 
		e.g. 2s/4s would mean a duration of 2 seconds and a delay of 4 seconds.

	<p class="issue">
		Need to also explain how order is important in terms of animation-name
		versus keywords, and probably also adjust the canonical order to
		match.

<h2 id="animation-events">
Animation Events</h2>
	
	<p>
		Several animation related events are available through the <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html">DOM Event system</a>. 
		The start and end of an animation, 
		and the end of each iteration of an animation, 
		all generate DOM events. 
		An element can have multiple properties being animated simultaneously. 
		This can occur either with a single 'animation-name' value 
		with keyframes containing multiple properties, 
		or with multiple 'animation-name' values. 
		For the purposes of events, 
		each 'animation-name' specifies a single animation. 
		Therefore an event will be generated for each 'animation-name' value 
		and not necessarily for each property being animated.
			
	<p>
		The time the animation has been running is sent with each event generated. 
		This allows the event handler to determine the current iteration of a looping animation 
		or the current position of an alternating animation. 
		This time does not include any time the animation was in the ''paused'' play state.
			

<h3 id='AnimationEvent-interface'>
Interface <code>AnimationEvent</code>
	
	<p>
		The <dfn>AnimationEvent</dfn> interface provides specific contextual information associated with Animation events.


<h4 id='AnimationEvent-IDL'>
IDL Definition</h4>
	
	<pre class='idl'>
interface AnimationEvent : Event {
  readonly attribute DOMString          animationName;
  readonly attribute float              elapsedTime;
  void               initAnimationEvent(in DOMString typeArg, 
                                        in boolean canBubbleArg, 
                                        in boolean cancelableArg, 
                                        in DOMString animationNameArg,
                                        in float elapsedTimeArg);
};</pre>


<h4 id='AnimationEvent-attributes'>
Attributes</h4>

	<dl>
		<dt><code><dfn id='AnimationEvent-animationName'>animationName</dfn></code> of type <code>DOMString</code>, readonly
		<dd>
			The value of the 'animation-name' property of the animation that fired the event.
				
		<dt><code><dfn id='AnimationEvent-elapsedTime'>elapsedTime</dfn></code> of type <code>float</code>, readonly
		<dd>
			The amount of time the animation has been running, 
			in seconds, 
			when this event fired, 
			excluding any time the animation was paused. 
			For an "animationstart" event, 
			the elapsedTime is zero unless there was a negative value for 'animation-delay', 
			in which case the event will be fired with an <code>elapsedTime</code> of (-1 * delay).
	</dl>

						
<h4 id='AnimationEvent-initAnimationMethod'>
The <code>initAnimationEvent</code> method</h4>
	
	<p>
		The <dfn>initAnimationEvent</dfn> method is used to initialize the value of an <code>AnimationEvent</code> 
		created through the <a href='http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-DocumentEvent'><code>DocumentEvent</code></a> interface. 
		This method may only be called before the <code>AnimationEvent</code> has been dispatched 
		via the <code>dispatchEvent</code> method, 
		though it may be called multiple times during that phase if necessary. 
		If called multiple times, 
		the final invocation takes precedence.

	<p>
		Parameters:

	<dl>
		<dt><code>typeArg</code> of type <code>DOMString</code>
		<dd>
			Specifies the event type.
		
		<dt><code>canBubbleArg</code> of type <code>boolean</code>
		<dd>
			Specifies whether or not the event can bubble.<br>
		
		<dt><code>cancelableArg</code> of type <code>boolean</code>
		<dd>
			Specifies whether or not the event's default action can be prevented.
		
		<dt><code>animationNameArg</code> of type <code>DOMString</code>
		<dd>
			Specifies the <a href='http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event'><code>Event</code></a>'s animation name.<br>
		
		<dt><code>elapsedTimeArg</code> of type <code>float</code>
		<dd>
			Specifies the amount of time, 
			in seconds, 
			the animation has been running at the time of initialization.
	</dl>

	<p>
		No Return Value

	<p>
		No Exceptions

<h3 id='AnimationEvent-types'>
Types of <code>AnimationEvent</code></h3>
				
	<p>
		The different types of Animation events that can occur are:
	
	<dl>
		<dt><dfn>animationstart</dfn>
		<dd>
			The <code>animationstart</code> event occurs at the start of the animation. 
			If there is an 'animation-delay' 
			then this event will fire once the delay period has expired. 
			A negative delay will cause the event to fire with an <code>elapsedTime</code> equal to the absolute value of the delay.
			
			<ul>
				<li>Bubbles: Yes
				<li>Cancelable: No
				<li>Context Info: animationName
			</ul>
		
		<dt><dfn>animationend</dfn>
		<dd>
			The <code>animationend</code> event occurs when the animation finishes.

			<ul>
				<li>Bubbles: Yes
				<li>Cancelable: No
				<li>Context Info: animationName, elapsedTime
			</ul>
		
		<dt><dfn>animationiteration</dfn>
		<dd>
			The <code>animationiteration</code> event occurs at the end of each iteration of an animation, 
			except when an <code>animationend</code> event would fire at the same time.  
			This means that this event does not occur for animations with an iteration count of one or less.

			<ul>
				<li>Bubbles: Yes
				<li>Cancelable: No
				<li>Context Info: animationName, elapsedTime
			</ul>
	</dl>


<h2 id="dom-interfaces">
DOM Interfaces</h2>

	<p>
		CSS animation is exposed to the CSSOM through a pair of new interfaces describing the keyframes.


<h3 id='CSSRule-interface'>
Interface <code>CSSRule</code></h3>

	<p>
		The following 2 rule types are added to the <dfn>CSSRule</dfn> interface. 
		They provide identification for the new keyframe and keyframes rules.
						

<h4 id='CSSRule-IDL'>
IDL Definition</h4>

	<pre class='idl'>
interface CSSRule {
  ...
  const unsigned short KEYFRAMES_RULE = 7;
  const unsigned short KEYFRAME_RULE = 8;
  ...
};</pre>


<h3 id='CSSKeyframeRule-interface'>
Interface <code>CSSKeyframeRule</code></3h>
	<p>
		The <dfn>CSSKeyframeRule</dfn> interface represents the style rule for a single key.


<h4 id='CSSKeyframeRule-IDL'>
IDL Definition</h4>

	<pre class='idl'>
interface CSSKeyframeRule : CSSRule {
           attribute DOMString           keyText;
  readonly attribute CSSStyleDeclaration style;
};</pre>


<h4 id='CSSKeyframeRule-attributes'>
Attributes</h4>

	<dl>
		<dt><code><dfn id='CSSKeyframeRule-keyText'>keyText</dfn></code> of type <code>DOMString</code>
		<dd>
			This attribute represents the key 
			as the string representation of a floating point number between 0 and 1. 
			If the value in the CSS style is ''from''
			this value will be 0, 
			and if the value in the CSS style is ''to'' 
			this value will be 1.

		<dt><code><dfn id='CSSKeyframeRule-style'>style</dfn></code> of type <code>CSSStyleDeclaration</code>
		<dd>
			This attribute represents the style associated with this keyframe.
	</dl>


<h3 id='CSSKeyframesRule-interface'>
Interface <code>CSSKeyframesRule</code></h3>

	<p>
		The <dfn>CSSKeyframesRule</dfn> interface represents a complete set of keyframes for a single animation.


<h4 id='CSSKeyframesRule-IDL'>
IDL Definition</h4>

	<pre class='idl'>
interface CSSKeyframesRule : CSSRule {
           attribute DOMString   name;
  readonly attribute CSSRuleList cssRules;

  void            appendRule(in DOMString rule);
  void            deleteRule(in DOMString key);
  CSSKeyframeRule findRule(in DOMString key);
};</pre>


<h4 id='CSSKeyframesRule-attributes'>
Attributes</h4>

	<dl>
		<dt><code><dfn id='CSSKeyframesRule-name'>name</dfn></code> of type <code>DOMString</code>
		<dd>
			This attribute is the name of the keyframes, used by the 'animation-name' property.<br>
		
		<dt><code><dfn id='CSSKeyframesRules-cssRules'>cssRules</dfn></code> of type <code>CSSRuleList</code>
		<dd>
			This attribute gives access to the keyframes in the list.


<h4 id='CSSKeyframesRule-appendRule'>
The <code>appendRule</code> method</h4>

	<p>
		The <dfn>appendRule</dfn> method appends the passed CSSKeyframeRule into the list at the passed key.

	<p>
		Parameters:

	<dl>
		<dt><code>rule</code> of type <code>DOMString</code>
		
		<dd>
			The rule to be appended, 
			expressed in the same syntax as one entry in the ''@keyframes'' rule.
	</dl>

	<p>
		No Return Value

	<p>
		No Exceptions


<h4 id='CSSKeyframesRules-deleteRule'>
The <code>deleteRule</code> method</h4>

	<p>
		The <dfn>deleteRule</dfn> method deletes the CSSKeyframeRule with the passed key. 
		If a rule with this key does not exist, 
		the method does nothing.

	<p>
		Parameters:

	<dl>
		<dt><code>key</code> of type <code>DOMString</code>
		<dd>
			The key which describes the rule to be deleted. 
			The key must resolve to a number between 0 and 1, 
			or the rule is ignored.
	</dl>

	<p>
		No Return Value

	<p>
		No Exceptions


<h4 id='CSSKeyframesRule-findRule'>
The <code>findRule</code> method</h4>

	<p>
		The <code>findRule</code> method returns the rule with a key matching the passed key. 
		If no such rule exists, 
		a null value is returned.

	<p>
		Parameters:

	<dl>
		<dt><code>key</code> of type <code>DOMString</code>
		<dd>
			The key which described the rule to find. 
			The key must resolve to a number between 0 and 1, 
			or the rule is ignored.
	</dl>

	<p>
		Return Value:

	<dl>
		<dt><code>CSSKeyframeRule</code>
		<dd>
			The found rule.
	</dl>

	<p>
		No Exceptions
		

<h2 id="acknowledgments">Acknowledgments</h2>

<p>Thanks especially to the feedback from
Tab Atkins,
Carine Bournez,
Estelle Weyl,
and all the rest of the
<a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a> community.

<h2>References</h2>

<h3 class="no-num">Normative references</h3>
<!--normative-->

<h3 class="no-num">Other references</h3>
<!--informative-->



<h2 class="no-num">Property index</h2>
<!-- properties -->



<h2 class="no-num" id="index">Index</h2>
<!--index-->

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
