<!DOCTYPE html>

<html lang=en>
 <head><meta content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Flexible Box Layout Module</title>
  <link href="http://dev.w3.org/csswg/default.css" rel=stylesheet
  type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">

  <style>
	code.one-line { white-space: pre; }
	.code-and-figure {
		display: table;
		margin: 0 auto;
		border-spacing: 1em;
	}
	.code-and-figure > div {
		display: table-cell;
		vertical-align: middle;
	}
    :not(code) var { font-style: normal; color: #005A9C; }
	</style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1 id=head-box-flexible>CSS Flexible Box Layout Module</h1>

   <h2 class="no-num no-toc" id=w3c-working>Editor's Draft, 30 April 2012</h2>

   <dl>
    <dt>This version:
     <!--<dd><a href="http://www.w3.org/TR/2012/ED-css3-flexbox-20120430/">http://www.w3.org/TR/2012/WD-css3-flexbox-20120430/</a>-->
     

    <dd><a
     href="http://dev.w3.org/csswg/css3-flexbox/">http://dev.w3.org/csswg/css3-flexbox/</a>
     

    <dt>Latest version:
     <!--<dd><a href="http://www.w3.org/TR/css3-flexbox/">http://www.w3.org/TR/css3-flexbox/</a>-->
     

    <dd><a
     href="http://www.w3.org/TR/css3-flexbox/">http://www.w3.org/TR/css3-flexbox/</a>
     

    <dt>Editor's Draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-flexbox/">http://dev.w3.org/csswg/css3-flexbox/</a>
     

    <dt>Previous versions:

    <dd><a
     href="http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/">http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/</a>
     

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-flexbox-20111129/">http://www.w3.org/TR/2011/WD-css3-flexbox-20111129/</a>
     

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/">http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/</a>
     

    <dd><a
     href="http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/">http://www.w3.org/TR/2009/WD-css3-flexbox-20090723/</a>
     

    <dt>Issues List:

    <dd><a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?product=CSS&amp;component=Flexbox&amp;resolution=---">Bugzilla
     Bugs for Flexbox</a>

    <dt>Discussion:

    <dd><a
     href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a>
     with subject line "<code>[css3-flexbox] …message topic…</code>"

    <dt>Editors:

    <dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a>, Google
     Inc.

    <dd>Alex Mogilevsky, Microsoft Corporation, <a
     href="mailto:alexmog@microsoft.com">alexmog@microsoft.com</a>

    <dd>L. David Baron, Mozilla Corporation, <a
     href="mailto:dbaron@dbaron.org">dbaron@dbaron.org</a>

    <dt>Authors and former editors:

    <dd>Neil Deakin, Mozilla Corporation, <a
     href="mailto:enndeakin@gmail.com">enndeakin@gmail.com</a>

    <dd>Ian Hickson, formerly of Opera Software, <a
     href="mailto:ian@hixie.ch">ian@hixie.ch</a>

    <dd>David Hyatt, formerly of Netscape Corporation, <a
     href="mailto:hyatt@apple.com">hyatt@apple.com</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2012 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract> Abstract</h2>

  <p>The specification describes a CSS box model optimized for user interface
   design. In the flexbox layout model, the children of a flexbox can be laid
   out in any direction, and can "flex" their sizes, either growing to fill
   unused space or shrinking to avoid overflowing the parent. Both horizontal
   and vertical alignment of the children can be easily manipulated. Nesting
   of these boxes (horizontal inside vertical, or vertical inside horizontal)
   can be used to build layouts in two dimensions.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-flexbox%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-flexbox&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-flexbox<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p> The following features are at-risk:

  <ul>
   <li>Flexbox pagination rules
  </ul>

  <h2 class="no-num no-toc" id=table>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span> Introduction</a>
    <ul class=toc>
     <li><a href="#placement"><span class=secno>1.1. </span> Module
      interactions</a>

     <li><a href="#values"><span class=secno>1.2. </span> Values</a>
    </ul>

   <li><a href="#box-model"><span class=secno>2. </span> The Flexbox Box
    Model</a>

   <li><a href="#display-flexbox"><span class=secno>3. </span> Flexboxes: the
    &lsquo;<code class=css>flexbox</code>&rsquo; and &lsquo;<code
    class=css>inline-flexbox</code>&rsquo; &lsquo;<code
    class=property>display</code>&rsquo; values</a>

   <li><a href="#flex-items"><span class=secno>4. </span> Flexbox Items</a>
    <ul class=toc>
     <li><a href="#abspos-flexbox-items"><span class=secno>4.1. </span>
      Absolutely Positioned Flexbox Children</a>
    </ul>

   <li><a href="#multi-line"><span class=secno>5. </span> Multi-line
    Flexbox</a>

   <li><a href="#ordering-and-orientation"><span class=secno>6. </span>
    Ordering and Orientation</a>
    <ul class=toc>
     <li><a href="#flex-direction"><span class=secno>6.1. </span> Flexbox
      Flow Direction: the &lsquo;<code
      class=property>flex-direction</code>&rsquo; property</a>

     <li><a href="#flex-wrap"><span class=secno>6.2. </span> Flexbox
      Wrapping: the &lsquo;<code class=property>flex-wrap</code>&rsquo;
      property</a>

     <li><a href="#flex-flow"><span class=secno>6.3. </span> Flex Direction
      and Wrap: the &lsquo;<code class=property>flex-flow</code>&rsquo;
      shorthand</a>

     <li><a href="#flex-order"><span class=secno>6.4. </span> Display Order:
      the &lsquo;<code class=property>flex-order</code>&rsquo; property</a>
    </ul>

   <li><a href="#flexibility"><span class=secno>7. </span> Flexibility: the
    &lsquo;<code class=property>flex</code>&rsquo; property</a>

   <li><a href="#alignment"><span class=secno>8. </span> Alignment</a>
    <ul class=toc>
     <li><a href="#flex-pack"><span class=secno>8.1. </span> Axis Alignment:
      the &lsquo;<code class=property>flex-pack</code>&rsquo; property</a>

     <li><a href="#flex-align"><span class=secno>8.2. </span> Cross-axis
      Alignment: the &lsquo;<code class=property>flex-align</code>&rsquo; and
      &lsquo;<code class=property>flex-item-align</code>&rsquo;
      properties</a>

     <li><a href="#auto-margins"><span class=secno>8.3. </span> Resolving
      &lsquo;<code class=css>auto</code>&rsquo; margins</a>

     <li><a href="#flex-line-pack"><span class=secno>8.4. </span>
      &lsquo;<code class=property>flex-line-pack</code>&rsquo; property</a>
    </ul>

   <li><a href="#layout-algorithm"><span class=secno>9. </span> Flexbox
    Layout Algorithm</a>
    <ul class=toc>
     <li><a href="#resolve-flexible-lengths"><span class=secno>9.1. </span>
      Resolving Flexible Lengths</a>
    </ul>

   <li><a href="#pagination"><span class=secno>10. </span> Page breaks in
    flexbox</a>

   <li><a href="#cssom"><span class=secno>11. </span>CSSOM</a>

   <li><a href="#conformance"><span class=secno>12. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conventions"><span class=secno>12.1. </span> Document
      conventions</a>

     <li><a href="#conformance-classes"><span class=secno>12.2. </span>
      Conformance classes</a>

     <li><a href="#partial"><span class=secno>12.3. </span> Partial
      implementations</a>

     <li><a href="#experimental"><span class=secno>12.4. </span> Experimental
      implementations</a>

     <li><a href="#testing"><span class=secno>12.5. </span> Non-experimental
      implementations</a>

     <li><a href="#cr-exit-criteria"><span class=secno>12.6. </span> CR exit
      criteria</a>
    </ul>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative">Normative references</a>

     <li class=no-num><a href="#informative">Other references</a>
    </ul>

   <li class=no-num><a href="#property">Property index</a>

   <li class=no-num><a href="#index">Index</a>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p><em>This section is not normative.</em>

  <p>CSS 2.1 defined four layout modes &mdash; algorithms which determine the
   size and position of boxes based on their relationships with their sibling
   and ancestor boxes: block layout, designed for laying out documents;
   inline layout, designed for laying out text; table layout, designed for
   laying out information in a tabular format; and positioned layout,
   designed for very explicit positioning without much regard for other
   elements in the document. This module introduces a new layout mode,
   flexbox layout, which is designed for laying out more complex applications
   and webpages.

  <p>Flexbox layout is superficially similar to block layout. It lacks many
   of the more complex text or document-formatting properties that can be
   used in block layout, such as &lsquo;<code
   class=property>float</code>&rsquo; and &lsquo;<code
   class=property>columns</code>&rsquo;, but in return it gains more simple
   and powerful tools for aligning its contents in ways that webapps and
   complex web pages often need.

  <p>The contents of a flexbox can be laid out in any direction (left, right,
   down, or even up!), can have their order swapped around dynamically (i.e.,
   display order is independent of source order), and can "flex" their sizes
   and positions to respond to the available space. If a flexbox is <a
   href="#multi-line0"><i>multi-line</i></a>, the flexbox items flow in two
   dimensions, wrapping into separate lines in a fashion similar to how text
   is wrapped into multiple lines.

  <div class=example>
   <p>For example, the following HTML snippet uses flexbox to create a
    toolbar with icons. The flexbox is horizontal, and the children's widths
    don't fill the flexbox's width, so the additional space is distributed
    around and between the children. As the flexbox grows (perhaps because
    the user is viewing the page on a wider screen), the children spread out
    evenly and automatically:

   <pre>
&lt;ul>
  &lt;li>&lt;button>&lt;img src='new.svg' alt="New">&lt;/button>&lt;/li>
  &lt;li>&lt;button>&lt;img src='upload.svg' alt="Upload">&lt;/button>&lt;/li>
  &lt;li>&lt;button>&lt;img src='save.svg' alt="Save">&lt;/button>&lt;/li>
  &lt;li>&lt;button>&lt;img src='trash.svg' alt="trash">&lt;/button>&lt;/li>
&lt;/ul>
&lt;style>
ul { display: flexbox; flex-pack: distribute; }
/* Irrelevant styling for this example removed. */
&lt;/style></pre>

   <div class=figure> <img alt height=140 src="images/toolbar-example.svg"
    width=400>
    <p class=caption>Example rendering of the above code snippet, at two
     different flexbox widths.
   </div>
  </div>

  <h3 id=placement><span class=secno>1.1. </span> Module interactions</h3>

  <p>This module extends the definition of the &lsquo;<code
   class=property>display</code>&rsquo; property.

  <h3 id=values><span class=secno>1.2. </span> Values</h3>

  <p>This specification follows the <a
   href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
   definition conventions</a> from <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Value types not defined in
   this specification are defined in CSS Level 2 Revision 1 <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Other CSS
   modules may expand the definitions of these value types: for example
   [[CSS3VALUES]], when combined with this module, expands the definition of
   the &lt;length&gt; value type as used in this specification.

  <p>In addition to the property-specific values listed in their definitions,
   all properties defined in this specification also accept the <a
   href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">&lsquo;<code
   class=css>inherit</code>&rsquo;</a> keyword as their property value. For
   readability it has not been repeated explicitly.

  <h2 id=box-model><span class=secno>2. </span> The Flexbox Box Model</h2>

  <p>An element with &lsquo;<code class=css>display:flexbox</code>&rsquo; or
   &lsquo;<code class=css>display:inline-flexbox</code>&rsquo; is a <dfn
   id=flexbox>flexbox</dfn>. Children of a flexbox are called <a
   href="#flexbox-item"><i>flexbox items</i></a> and are laid out using the
   flexbox box model.

  <p>Unlike block layout, which is normally biased towards laying things out
   vertically, and inline layout, which is normally biased toward laying
   things out horizontally, the flexbox layout algorithm is agnostic as to
   the direction the flexbox happens to be laid out in. To make it easier to
   talk about flexbox layout in a general way, we will define several
   direction-agnostic terms here to make the rest of the spec easier to read
   and understand.

  <div class=figure> <img alt height=300
   src="images/flex-direction-terms.svg" width=510>
   <p class=caption>An illustration of the various directions and sizing
    terms used in this specification, respectively for &lsquo;<code
    class=css>row</code>&rsquo; and &lsquo;<code
    class=css>column</code>&rsquo; flexboxes.
  </div>

  <p> The <dfn id=main-axis>main axis</dfn> of a flexbox is the axis along
   which <a href="#flexbox-item"><i>flexbox items</i></a> are laid out. The
   <a href="#flexbox-item"><i>flexbox items</i></a> are ordered such that
   they start on the <dfn id=main-start>main-start</dfn> side of the flexbox,
   and go toward the <dfn id=main-end>main-end</dfn> side. A <a
   href="#flexbox-item"><i>flexbox item's</i></a> width or height, whichever
   is in the <i>main dimension</i>, is the item's <dfn id=main-size>main
   size</dfn>. The <a href="#flexbox-item"><i>flexbox item's</i></a> <dfn
   id=main-size-property>main size property</dfn> is either the &lsquo;<code
   class=property>width</code>&rsquo; or &lsquo;<code
   class=property>height</code>&rsquo; property, whichever is in the <i>main
   dimension</i>.

  <p> The axis perpendicular to the <a href="#main-axis"><i>main axis</i></a>
   is called the <dfn id=cross-axis>cross axis</dfn>, and similarly has <dfn
   id=cross-start>cross-start</dfn> and <dfn id=cross-end>cross-end</dfn>
   directions and sides defined. The width or height of a <a
   href="#flexbox-item"><i>flexbox item</i></a>, whichever is in the <i>cross
   dimension</i>, is the item's <dfn id=cross-size>cross size</dfn>, and
   similarly the <dfn id=cross-size-property>cross size property</dfn> is
   whichever of &lsquo;<code class=property>width</code>&rsquo; or
   &lsquo;<code class=property>height</code>&rsquo; that is in the <i>cross
   dimension</i>.

  <p> The contents of a flexbox can be easily and powerfully manipulated with
   a handful of properties. Most significantly, <a
   href="#flexbox-item"><i>flexbox items</i></a> can "flex" their <a
   href="#main-size"><i>main size</i></a> by using the &lsquo;<a
   href="#flex"><code class=property>flex</code></a>&rsquo; property. This
   "flexing" allows the items to get bigger or smaller based on the available
   space in the page. If there is leftover space in the flexbox after all of
   the <a href="#flexbox-item"><i>flexbox items</i></a> have finished
   flexing, the items can be aligned, centered, or distributed with the
   &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; property. <a
   href="#flexbox-item"><i>Flexbox items</i></a> can also be completely
   rearranged within the flexbox with the &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; property.

  <p> In the <a href="#cross-axis"><i>cross axis</i></a>, <a
   href="#flexbox-item"><i>flexbox items</i></a> can either "stretch" to fill
   the available space or be aligned within the space with the &lsquo;<a
   href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
   property. If a flexbox is <a href="#multi-line0"><i>multi-line</i></a>,
   new lines are added in the <a href="#cross-end"><i>cross-end</i></a>
   direction, and can similarly be aligned, centered, or distributed within
   the flexbox with the &lsquo;<a href="#flex-line-pack0"><code
   class=property>flex-line-pack</code></a>&rsquo; property.

  <h2 id=display-flexbox><span class=secno>3. </span> Flexboxes: the
   &lsquo;<a href="#display-flexbox"><code
   class=css>flexbox</code></a>&rsquo; and &lsquo;<a
   href="#display-inline-flexbox"><code
   class=css>inline-flexbox</code></a>&rsquo; &lsquo;<code
   class=property>display</code>&rsquo; values</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td>display

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">New value</a>:

     <td><dfn id=display-flexbox>flexbox</dfn> | <dfn
      id=display-inline-flexbox>inline-flexbox</dfn>
  </table>

  <p> An element whose computed &lsquo;<code
   class=property>display</code>&rsquo; is either &lsquo;<a
   href="#display-flexbox"><code class=css>flexbox</code></a>&rsquo; or
   &lsquo;<a href="#display-inline-flexbox"><code
   class=css>inline-flexbox</code></a>&rsquo; is a flexbox, and establishes a
   new <dfn id=flexbox-formatting-context>flexbox formatting context</dfn>
   for its contents. This is similar to a block formatting context root:
   floats do not intrude into the flexbox, and the flexbox's margins do not
   collapse with the margins of its contents. Additionally, each of the <a
   href="#flexbox-item"><i>flexbox items</i></a> establishes a new formatting
   context for its contents.

  <p> The &lsquo;<a href="#display-flexbox"><code
   class=css>flexbox</code></a>&rsquo; value makes the flexbox a block-level
   element. The &lsquo;<a href="#display-inline-flexbox"><code
   class=css>inline-flexbox</code></a>&rsquo; value makes the flexbox an
   atomic inline-level element.

  <p> Flexboxes are not block containers, and so some properties that were
   designed with the assumption of block layout don't apply in a flexbox
   context. In particular:

  <ul>
   <li> all of the &lsquo;<code class=css>column-*</code>&rsquo; properties
    in the Multicol module have no effect on a flexbox.

   <li> &lsquo;<code class=property>float</code>&rsquo; and &lsquo;<code
    class=property>clear</code>&rsquo; have no effect on a flexbox item.
    Using &lsquo;<code class=property>float</code>&rsquo; on an element still
    causes that element's &lsquo;<code class=property>display</code>&rsquo;
    property to compute to &lsquo;<code class=css>block</code>&rsquo;, and
    thus &lsquo;<code class=property>float</code>&rsquo; may affect whether
    an element becomes a flexbox item or is wrapped in one. (See <a
    href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo">CSS 2.1 Chapter
    9.7</a>.)

   <li> &lsquo;<code class=property>vertical-align</code>&rsquo; has no
    effect on the alignment of a flexbox item in the flexbox
  </ul>

  <p> If an element's specified value for &lsquo;<code
   class=property>display</code>&rsquo; is &lsquo;<a
   href="#display-inline-flexbox"><code
   class=css>inline-flexbox</code></a>&rsquo; and the element is floated or
   absolutely positioned, the computed value of &lsquo;<code
   class=property>display</code>&rsquo; is &lsquo;<a
   href="#display-flexbox"><code class=css>flexbox</code></a>&rsquo;. The
   table in <a href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo">CSS
   2.1 Chapter 9.7</a> is thus amended to contain an additional row, with
   &lsquo;<a href="#display-inline-flexbox"><code
   class=css>inline-flexbox</code></a>&rsquo; in the "Specified Value" column
   and &lsquo;<a href="#display-flexbox"><code
   class=css>flexbox</code></a>&rsquo; in the "Computed Value" column.

  <p> The baseline of a flexbox is:

  <ul>
   <li> If any of the <a href="#flexbox-item"><i>flexbox items</i></a> on the
    flexbox's first line (after reordering with &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;)
    have a computed value of &lsquo;<code class=css>baseline</code>&rsquo;
    for &lsquo;<a href="#flex-item-align"><code
    class=property>flex-item-align</code></a>&rsquo;, the flexbox's baseline
    is the baseline of those <a href="#flexbox-item"><i>flexbox
    items</i></a>.

   <li> Otherwise, if the flexbox has at least one <a
    href="#flexbox-item"><i>flexbox item</i></a>, and the baseline of its
    first <a href="#flexbox-item"><i>flexbox item</i></a> (after reordering
    with &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo;) is parallel to the flexbox's
    <i>main-axis</i>, the flexbox's baseline is the baseline of its first <a
    href="#flexbox-item"><i>flexbox item</i></a>.

   <li> Otherwise, the flexbox's baseline is the "after" edge of its content
    box.
  </ul>

  <h2 id=flex-items><span class=secno>4. </span> Flexbox Items</h2>

  <p> The flexbox layout algorithm operates on boxes generated by <dfn
   id=flexbox-item title="flexbox item|flexbox items|flexbox item's">flexbox
   items</dfn>. A <a href="#flexbox-item"><i>flexbox item</i></a> is:

  <ol>
   <li> A block-level child of a flexbox element

   <li> An atomic inline-level child of a flexbox element

   <li> An anonymous block element wrapped around a contiguous run of
    non-replaced inline child elements. However, if the contents of the
    anonymous block would be solely an anonymous inline containing only
    whitespace, the box is not generated, as if it had &lsquo;<code
    class=css>display:none</code>&rsquo;.
  </ol>

  <p> Some values of &lsquo;<code class=property>display</code>&rsquo;
   trigger the generation of anonymous boxes. For example, a &lsquo;<code
   class=css>table-cell</code>&rsquo; child of a block container is fixed up
   by generating &lsquo;<code class=css>table</code>&rsquo; and &lsquo;<code
   class=css>table-row</code>&rsquo; elements around it. This fixup must
   occur <em>before</em> a flexbox's contents are checked to see if it's
   necessary to generate anonymous flexbox items.

  <p class=note> In the future, other kinds of fixup such as &lsquo;<code
   class=css>display:run-in</code>&rsquo; or &lsquo;<code
   class=css>display:ruby</code>&rsquo; should also run before flexbox fixup.
   

  <div class=example>
   <p>Examples of flexbox items:

   <pre>
&lt;div style="display:flexbox">

    &lt;!-- flexbox item: block-level child -->
    &lt;div id="item1">block&lt;/div>

    &lt;!-- not a flexbox item, because it's out-of-flow -->
    &lt;!-- however, an anonymous flexbox item is wrapped around
         the placeholder it leaves behind-->
    &lt;div id="not-an-item2" style="position: absolute;">block&lt;/div>
    
    &lt;!-- flexbox item: block-level child -->
    &lt;div id="item3" style="display:table">table&lt;/div>
    
    &lt;!-- flexbox item: anonymous table wrapped around table-cell -->
    &lt;div id="item4" style="display:table-cell">table-cell&lt;/div> 

    &lt;!-- flexbox item: anonymous block box around inline content -->
    anonymous item 5

    &lt;!-- flexbox item: block-level child -->
    &lt;div id="item6">block&lt;/div>

    &lt;!-- flexbox item: anonymous block around inline content -->
    anonymous item 7.1
    &lt;span id="item7.1">
        text 7.2
        &lt;div id="not-an-item7.3">block&lt;/div>
        text 7.4
    &lt;/span>

    &lt;!-- flexbox item: block-level replaced element -->
    &lt;iframe id="item8" style="display:block;">&lt;/iframe>

    &lt;!-- flexbox item: inline-level replaced element -->
    &lt;img id="item9">

    &lt;!-- flexbox item: atomic inline-level element -->
    &lt;button id="item10">button&lt;/button>

    &lt;!-- flexbox item: inline-table -->
    &lt;div id="item11" style="display:inline-table">table&lt;/div>

    &lt;!-- flexbox item: floated inline, which changes to a block -->
    &lt;span id="item12" style="float: left;">span&lt;/span>
&lt;/div></pre>

   <p> Notice that block element "not-an-item7.3" is not a separate flexbox
    item, because it is contained inside an inline element which is being
    wrapped into an anonymous flexbox item. Similarly, the block element
    "not-an-item2" is not a flexbox item, because it's absolutely positioned
    and thus out of flow.
  </div>

  <p> The computed value for &lsquo;<code
   class=property>display</code>&rsquo; for elements that are <a
   href="#flexbox-item"><i>flexbox items</i></a> must be determined by
   applying the table in <a
   href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo">CSS 2.1 Chapter
   9.7</a>.

  <h3 id=abspos-flexbox-items><span class=secno>4.1. </span> Absolutely
   Positioned Flexbox Children</h3>

  <p> Absolutely positioned children of a flexbox are not <a
   href="#flexbox-item"><i>flexbox items</i></a>, but they leave behind
   "placeholders" in their normal position in the box tree. These
   placeholders are anonymous inline boxes with a width and height of
   &lsquo;<code class=css>0px</code>&rsquo;, and they interact normally with
   the flexbox layout algorithm. In particular, they'll trigger the creation
   an anonymous flexbox item wrapper boxes, or join neighboring inline
   elements in <em>their</em> anonymous flexbox item wrapper boxes.

  <p> The "static position" of an absolutely positioned child of a flexbox
   (the position when the &lsquo;<code
   class=property>top</code>&rsquo;/&lsquo;<code
   class=property>right</code>&rsquo;/&lsquo;<code
   class=property>bottom</code>&rsquo;/&lsquo;<code
   class=property>left</code>&rsquo; properties are &lsquo;<code
   class=css>auto</code>&rsquo;), then, is the final position of its
   corresponding placeholder, after flexbox layout has been performed.

  <p class=note> Note: In most cases, this means that absolutely positioned
   items will have no effect on flexbox layout, even if they force the
   generation of an anonymous flexbox item wrapper, because those wrapper
   items will also collapse to zero size and have no effect. The only
   exceptions are when the flexbox has &lsquo;<code
   class=css>flex-pack:justify</code>&rsquo; or &lsquo;<code
   class=css>flex-pack:distribute</code>&rsquo;, in which case the anonymous
   flexbox item will cause there to be two packing spaces where there would
   otherwise be only one, resulting in a double-size space between two "real"
   items.

  <h2 id=multi-line><span class=secno>5. </span> Multi-line Flexbox</h2>

  <p> A flexbox can be either <a href="#single-line"><i>single-line</i></a>
   or <a href="#multi-line0"><i>multi-line</i></a>, depending on the
   &lsquo;<a href="#flex-wrap0"><code
   class=property>flex-wrap</code></a>&rsquo; property. A <dfn
   id=single-line>single-line</dfn> flexbox lays out all of its children in a
   single line, even if that would cause the flexbox to overflow its bounds.
   A <dfn id=multi-line0>multi-line</dfn> flexbox breaks its <a
   href="#flexbox-item"><i>flexbox items</i></a> across multiple lines to
   avoid overflowing, similar to how text is broken onto a new line when it
   gets too wide to fit on the existing line. Every line contains at least
   one <a href="#flexbox-item"><i>flexbox item</i></a>, unless the flexbox
   itself is completely empty.

  <p> When additional lines are created, they are stacked in the flexbox
   along the <a href="#cross-axis"><i>cross axis</i></a>. Once content is
   broken into lines, each line is laid out independently; flexible lengths
   and the &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; and &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo; properties only consider
   the items on a single line at a time.

  <p> The <a href="#main-size"><i>main size</i></a> of a line is the same as
   the <a href="#main-size"><i>main size</i></a> of the flexbox's content
   box. the <a href="#cross-size"><i>cross size</i></a> of a line is the
   minimum size necessary to contain the <a href="#flexbox-item"><i>flexbox
   items</i></a> on the line, after aligment due to &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo;. The lines themselves are
   then aligned within the flexbox with the &lsquo;<a
   href="#flex-line-pack0"><code
   class=property>flex-line-pack</code></a>&rsquo; property.

  <div class=example>
   <p> This example shows four buttons that do not fit horizontally.

   <pre>&lt;style>
#div1 {
	display: flexbox;
	flex-flow: row wrap;
	width: 300px;
}
button {
	flex:80px 1;
}
&lt;style>

&lt;div id="div1">
	&lt;button id="button1">Elephant&lt;/button>
	&lt;button id="button2">Tiger&lt;/button>
	&lt;button id="button3">Antelope&lt;/button>
	&lt;button id="button4">Wildebeest&lt;/button>
&lt;/div></pre>

   <p> The buttons are first set to their preferred widths, in this case 80
    pixels. This will allow the first three buttons to fit in 240 pixels with
    60 pixels left over of remaining space. Because the &lsquo;<a
    href="#flex-flow0"><code class=property>flex-flow</code></a>&rsquo;
    property specifies a multi-line flexbox (due to the &lsquo;<code
    class=css>wrap</code>&rsquo; keyword appearing in its value), the flexbox
    will create an additional line to contain the last button.

   <p> Flexibility is applied to each element, separately for each line. The
    first line has 60 pixels of remaining space and all of the buttons have
    the same flexibility, so each of the three buttons on that line will
    receive 20 pixels of extra width, ending up 100px wide. The remaining
    button is on a line of its own and will stretch to the entire width of
    the line, or 300 pixels.

   <div style="width:300px; border:medium solid green; overflow: hidden;">
    <button style="width:100px; float: left;">Elephant</button> <button
    style="width:100px; float: left;">Tiger</button> <button
    style="width:100px; float: left;">Antelope</button> <button
    style="width:300px; float: left;">Wildebeest</button></div>

   <p> If the box was resized, the buttons may rearrange onto different lines
    as necessary.

   <p> If the style rules in the example above were changed to the following:
    

   <pre>
#div1 {
	display: flexbox;
	flex-flow: row wrap;
	flex-pack: center;
	width: 300px;
}
button {
	flex:80px 1;
	max-width: 90px;
}</pre>

   <p> Similar to the previous example, the first three buttons will fit on
    the first line, and the last button will wrap onto a new line. However,
    when the buttons attempt to flex they can only grow to 90px each, due to
    their &lsquo;<code class=property>max-width</code>&rsquo; property. This
    leaves 30px of free space on the first line and 210px of free space on
    the second line. Because &lsquo;<a href="#flex-pack0"><code
    class=property>flex-pack</code></a>&rsquo; is set to &lsquo;<code
    class=css>center</code>&rsquo;, the buttons will be centered on each
    line, with the free space split equally on either side.

   <div style="width:300px; border:medium solid green; text-align:center;">
    <button
    style="width:90px; float: left; margin-left: 15px;">Elephant</button>
    <button style="width:90px; float: left;">Tiger</button> <button
    style="width:90px; float: left;">Antelope</button> <button
    style="width:90px">Wildebeest</button></div>
  </div>

  <h2 id=ordering-and-orientation><span class=secno>6. </span> Ordering and
   Orientation</h2>

  <p> The first level of flexbox functionality is the ability to lay out a
   flexbox's contents in any direction and in any order. This allows an
   author to trivially achieve effects that would previously have required
   complex or fragile methods, such as hacks using the &lsquo;<code
   class=property>float</code>&rsquo; and &lsquo;<code
   class=property>clear</code>&rsquo; properties. This functionality is
   exposed through the &lsquo;<a href="#flex-direction0"><code
   class=property>flex-direction</code></a>&rsquo;, &lsquo;<a
   href="#flex-wrap0"><code class=property>flex-wrap</code></a>&rsquo;, and
   &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; properties.

  <h3 id=flex-direction><span class=secno>6.1. </span> Flexbox Flow
   Direction: the &lsquo;<a href="#flex-direction0"><code
   class=property>flex-direction</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-direction0>flex-direction</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>row | row-reverse | column | column-reverse

    <tr>
     <th>Initial:

     <td>row

    <tr>
     <th>Applies To:

     <td>flexboxes

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p> The &lsquo;<a href="#flex-direction0"><code
   class=property>flex-direction</code></a>&rsquo; property specifies how <a
   href="#flexbox-item"><i>flexbox items</i></a> are placed in the flexbox,
   by setting the direction of the flexbox's <a href="#main-axis"><i>main
   axis</i></a>. This determines the direction that flexbox items are laid
   out in.

  <dl>
   <dt><dfn id=flex-flow-row>&lsquo;<code class=css>row</code>&rsquo;</dfn>

   <dd> The flexbox's <a href="#main-axis"><i>main axis</i></a> has the same
    orientation as the inline axis of the current <a
    href="http://www.w3.org/TR/css3-writing-modes/#writing-mode">writing
    mode</a> (the primary direction that text is laid out in). The <a
    href="#main-start"><i>main-start</i></a> and <a
    href="#main-end"><i>main-end</i></a> directions are equivalent to the <a
    href="http://www.w3.org/TR/css3-writing-modes/#start">start</a> and <a
    href="http://www.w3.org/TR/css3-writing-modes/#end">end</a> directions,
    respectively, of the current <a
    href="http://www.w3.org/TR/css3-writing-modes/#writing-mode">writing
    mode</a>.

   <dt><dfn id=flex-flow-row-reverse>&lsquo;<code
    class=css>row-reverse</code>&rsquo;</dfn>

   <dd> Same as &lsquo;<code class=css>row</code>&rsquo;, except the <a
    href="#main-start"><i>main-start</i></a> and <a
    href="#main-end"><i>main-end</i></a> directions are swapped.

   <dt><dfn id=flex-flow-column>&lsquo;<code
    class=css>column</code>&rsquo;</dfn>

   <dd> The flexbox's <a href="#main-axis"><i>main axis</i></a> has the same
    orientation as the block axis of the current <a
    href="http://www.w3.org/TR/css3-writing-modes/#writing-mode">writing
    mode</a> (the primary direction that blocks are laid out in). The <a
    href="#main-start"><i>main-start</i></a> and <a
    href="#main-end"><i>main-end</i></a> directions are equivalent to the <a
    href="http://www.w3.org/TR/css3-writing-modes/#before">before</a> and <a
    href="http://www.w3.org/TR/css3-writing-modes/#after">after</a>
    directions, respectively, of the current <a
    href="http://www.w3.org/TR/css3-writing-modes/#writing-mode">writing
    mode</a>.

   <dt><dfn id=flex-flow-column-reverse>&lsquo;<code
    class=css>column-reverse</code>&rsquo;</dfn>

   <dd> Same as &lsquo;<code class=css>column</code>&rsquo;, except the <a
    href="#main-start"><i>main-start</i></a> and <a
    href="#main-end"><i>main-end</i></a> directions are swapped.
  </dl>

  <h3 id=flex-wrap><span class=secno>6.2. </span> Flexbox Wrapping: the
   &lsquo;<a href="#flex-wrap0"><code
   class=property>flex-wrap</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-wrap0>flex-wrap</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>nowrap | wrap | wrap-reverse

    <tr>
     <th>Initial:

     <td>nowrap

    <tr>
     <th>Applies To:

     <td>flexboxes

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p> The &lsquo;<a href="#flex-wrap0"><code
   class=property>flex-wrap</code></a>&rsquo; property controls whether the
   flexbox is <a href="#single-line"><i>single-line</i></a> or <a
   href="#multi-line0"><i>multi-line</i></a>, and the direction of the
   <i>cross-axis</i>, which determines the direction new lines are stacked
   in.

  <dl>
   <dt><dfn id=flex-flow-nowrap>&lsquo;<code
    class=css>nowrap</code>&rsquo;</dfn>

   <dd> The flexbox is <a href="#single-line"><i>single-line</i></a>. The <a
    href="#cross-start"><i>cross-start</i></a> direction is equivalent to
    either the <a
    href="http://www.w3.org/TR/css3-writing-modes/#start">start</a> or <a
    href="http://www.w3.org/TR/css3-writing-modes/#before">before</a>
    direction of the current <a
    href="http://dev.w3.org/csswg/css3-writing-modes/#writing-mode">writing
    mode</a>, whichever is in the <a href="#cross-axis"><i>cross
    axis</i></a>, and the <a href="#cross-end"><i>cross-end</i></a> direction
    is the opposite direction of <a
    href="#cross-start"><i>cross-start</i></a>.

   <dt><dfn id=flex-flow-wrap>&lsquo;<code class=css>wrap</code>&rsquo;</dfn>
    

   <dd> The flexbox is <a href="#multi-line0"><i>multi-line</i></a>. The <a
    href="#cross-start"><i>cross-start</i></a> direction is equivalent to
    either the <a
    href="http://www.w3.org/TR/css3-writing-modes/#start">start</a> or <a
    href="http://www.w3.org/TR/css3-writing-modes/#before">before</a>
    direction of the current <a
    href="http://dev.w3.org/csswg/css3-writing-modes/#writing-mode">writing
    mode</a>, whichever is in the <a href="#cross-axis"><i>cross
    axis</i></a>, and the <a href="#cross-end"><i>cross-end</i></a> direction
    is the opposite direction of <a
    href="#cross-start"><i>cross-start</i></a>.

   <dt><dfn id=flex-flow-wrap-reverse>&lsquo;<code
    class=css>wrap-reverse</code>&rsquo;</dfn>

   <dd> Same as &lsquo;<code class=css>wrap</code>&rsquo;, except the <a
    href="#cross-start"><i>cross-start</i></a> and <a
    href="#cross-end"><i>cross-end</i></a> directions are swapped.
  </dl>

  <h3 id=flex-flow><span class=secno>6.3. </span> Flex Direction and Wrap:
   the &lsquo;<a href="#flex-flow0"><code
   class=property>flex-flow</code></a>&rsquo; shorthand</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-flow0>flex-flow</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>&lt;&apos;flex-direction&apos;> || &lt;&apos;flex-wrap&apos;>

    <tr>
     <th>Initial:

     <td>see individual properties

    <tr>
     <th>Applies To:

     <td>flexboxes

    <tr>
     <th>Inherited:

     <td>see individual properties

    <tr>
     <th>Computed Value:

     <td>see individual properties

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p>The &lsquo;<a href="#flex-flow0"><code
   class=property>flex-flow</code></a>&rsquo; property is a shorthand for
   setting the &lsquo;<a href="#flex-direction0"><code
   class=property>flex-direction</code></a>&rsquo; and &lsquo;<a
   href="#flex-wrap0"><code class=property>flex-wrap</code></a>&rsquo;
   properties together.

  <div class=example>
   <p>Some examples of valid flows:

   <table
    style="margin: 0 auto; vertical-align: middle; border-spacing: 2em 1em;">
    <tbody>
     <tr>
      <td>
       <pre>
div { flex-flow: row; }
/* Initial value. Main-axis is 
   inline, no wrap. */</pre>

      <td><img alt height=80 src="images/flex-flow1.svg" width=240>

     <tr>
      <td>
       <pre>
div { flex-flow: column wrap; }
/* Main-axis is block-direction and lines
   wrap in the inline direction.  For an 
   English page, the main-axis is top-to-bottom
   and lines wrap to the right. */</pre>

      <td><img alt height=200 src="images/flex-flow2.svg" width=170>

     <tr>
      <td>
       <pre>
div { writing-mode: vertical-rl;
      flex-flow: column wrap-reverse; }
/* Main-axis is block direction (right to 
   left). New lines wrap upwards. */</pre>

      <td><img alt height=170 src="images/flex-flow3.svg" width=200>
   </table>
  </div>

  <h3 id=flex-order><span class=secno>6.4. </span> Display Order: the
   &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; property</h3>

  <p><a href="#flexbox-item"><i>Flexbox items</i></a> are, by default,
   displayed and laid out in the same order as they appear in the source
   document. The &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; property may be used to change
   this ordering.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-order0>flex-order</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>&lt;number>

    <tr>
     <th>Initial:

     <td>0

    <tr>
     <th>Applies to:

     <td><a href="#flexbox-item"><i>flexbox items</i></a>

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p>The &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; property assigns <a
   href="#flexbox-item"><i>flexbox items</i></a> to ordinal groups.

  <p>Ordinal groups control the order in which <a
   href="#flexbox-item"><i>flexbox items</i></a> appear. A flexbox will lay
   out its content starting from the lowest numbered ordinal group and going
   up. Items with the same ordinal group are laid out in the order they
   appear in the source document. &lsquo;<a href="#flex-order0"><code
   class=property>flex-order</code></a>&rsquo; has no effect on
   stacking/layering; elements must still be drawn over/under each other
   based on document order, &lsquo;<code
   class=property>z-index</code>&rsquo;, and other relevant means.

  <div class=example>
   <p>The following figure shows a simple tabbed interface, where the tab for
    the active pane is always in front:

   <div class=figure><img alt src="images/flex-order-example.png"></div>

   <p>This could be implemented with the following CSS (showing only the
    flexbox-relevant code):

   <pre>
.tabs {
	display: flexbox;
}
.tabs > .current {
	flex-order: -1; /* Lower than the default of 0 */
}</pre>
  </div>

  <div class=example>
   <p>Many web pages have a similar shape in the markup, with a header on
    top, a footer on bottom, and then a content area and one or two
    additional columns in the middle. Generally, it's desirable that the
    content come first in the page's source code, before the additional
    columns. However, this makes many common designs, such as simply having
    the additional columns on the left and the content area on the right,
    difficult to achieve. This has been addressed in many ways over the
    years, often going by the name "Holy Grail Layout" when there are two
    additional columns. &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo; makes this trivial. For
    example, take the following sketch of a page's code and desired layout:

   <div class=code-and-figure>
    <div>
     <pre>
&lt;!DOCTYPE html>
&lt;header>...&lt;/header>
&lt;div id='main'>
   &lt;article>...&lt;/article>
   &lt;nav>...&lt;/nav>
   &lt;aside>...&lt;/aside>
&lt;/div>
&lt;footer>...&lt;/footer></pre>
    </div>

    <div><img
     alt="In this page the header is at the top and the footer at the bottom, but the article is in the center, flanked by the nav on the right and the aside on the left."
     height=360 src="images/flex-order-page.svg" width=400></div>
   </div>

   <p>This layout can be easily achieved with Flexbox:

   <pre>
#main { display: flexbox; }
#main > article { flex:1;         flex-order: 2; }
#main > nav     { width: 200px;   flex-order: 1; }
#main > aside   { width: 200px;   flex-order: 3; }</pre>

   <p>As an added bonus, the columns will all be equal-height by default, and
    the main content will be as wide as necessary to fill the screen.
    Additionally, this can then be combined with media queries to switch to
    an all-vertical layout on narrow screens:

   <pre>
@media all and (max-width: 600px) {
	/* Too narrow to support three columns */
	#main { flex-flow: column; }
	#main > article, #main > nav, #main > aside {
		/* Return them to document order */
		flex-order: 0; width: auto;
	}
}</pre>

   <p><small>(Further use of multiline flexboxes to achieve even more
    intelligent wrapping left as an exercise for the reader.)</small>
  </div>

  <h2 id=flexibility><span class=secno>7. </span> Flexibility: the &lsquo;<a
   href="#flex"><code class=property>flex</code></a>&rsquo; property</h2>

  <p>The defining aspect of flexbox layout is the ability to make the <a
   href="#flexbox-item"><i>flexbox items</i></a> "flex", altering their width
   or height to fill the available space. This is done by using a &lsquo;<a
   href="#flex"><code class=property>flex</code></a>&rsquo; property. A
   flexbox distributes free space to its items proportional to their positive
   flexibility, or shrinks them to prevent overflow proportional to their
   negative flexibility.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex>flex</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>none | [ &lt;number>{1,2} || &lt;&apos;width&apos;> ]

    <tr>
     <th>Initial:

     <td>&lsquo;<code class=css>none</code>&rsquo;

    <tr>
     <th>Applies to:

     <td>flexbox items

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>Two integers for positive and negative flex, and a preferred size
      given either as an absolute length or a keyword.

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>yes, as &lt;number> and &lt;length> or &lt;percentage>, but see
      prose

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p> The &lsquo;<a href="#flex"><code class=property>flex</code></a>&rsquo;
   property specifies the parameters of a <dfn id=flexible-length
   title="flexible length|flexible lengths|flexible length's">flexible
   length</dfn>: the <dfn id=positive-flexibility
   title="positive flexibility">positive</dfn> and <dfn
   id=negative-flexibility>negative flexibility</dfn>, and the <dfn
   id=preferred-size>preferred size</dfn>. When the element containing
   &lsquo;<a href="#flex"><code class=property>flex</code></a>&rsquo; is a <a
   href="#flexbox-item"><i>flexbox item</i></a>, &lsquo;<a href="#flex"><code
   class=property>flex</code></a>&rsquo; is consulted <em>instead of</em> the
   <a href="#main-size-property"><i>main size property</i></a> to determine
   the <a href="#main-size"><i>main size</i></a> of the element. If an
   element is not a <a href="#flexbox-item"><i>flexbox item</i></a>,
   &lsquo;<a href="#flex"><code class=property>flex</code></a>&rsquo; has no
   effect.

  <p> The two <var>&lt;number></var>s represent the flexibility. Negative
   values for either are invalid. The first <var>&lt;number></var> sets the
   <a href="#positive-flexibility"><i>positive flexibility</i></a>, and the
   second <var>&lt;number></var>, if specified, sets the <a
   href="#negative-flexibility"><i>negative flexibility</i></a>. The <a
   href="#negative-flexibility"><i>negative flexibility</i></a> defaults to
   &lsquo;<code class=css>0</code>&rsquo;; the <a
   href="#positive-flexibility"><i>positive flexibility</i></a> defaults to
   &lsquo;<code class=css>1</code>&rsquo;.

  <p> The <var>&lt;&apos;width&apos;></var> component sets the preferred
   size. If omitted, the preferred size defaults to &lsquo;<code
   class=css>0px</code>&rsquo;. If the <var>&lt;&apos;width&apos;></var>
   component is &lsquo;<code class=css>auto</code>&rsquo; on a child of a <a
   href="#display-flexbox"><i>flexbox</i></a>, the <a
   href="#preferred-size"><i>preferred size</i></a> is the computed value of
   the <a href="#main-size-property"><i>main size property</i></a>.

  <p> If the <var>&lt;&apos;width&apos;></var> is zero, it
   <strong>must</strong> be specified with a unit (like &lsquo;<code
   class=css>0px</code>&rsquo;) or omitted to avoid ambiguity; unitless zero
   will either be interpreted as as one of the flexibilities, or will make
   the declaration invalid.

  <p> The keyword &lsquo;<code class=property>none</code>&rsquo; computes to
   &lsquo;<code class=css>0 0 auto</code>&rsquo;.

  <p> The &lsquo;<a href="#flex"><code class=property>flex</code></a>&rsquo;
   property is animatable by animating the <a
   href="#positive-flexibility"><i>positive flexibility</i></a>, <a
   href="#negative-flexibility"><i>negative flexibility</i></a>, and <a
   href="#preferred-size"><i>preferred size</i></a> independently.

  <p class=issue> Can you animate between zero and non-zero flex? It has bad
   effects right now, and should possibly be disallowed until we know how to
   fix it.

  <div class=example>
   <p> Flexibility allows elements to respond directly to the available
    space, optionally taking into account size of content:

   <pre>
&lt;!DOCTYPE html>
&lt;style>
	div { display:flexbox; outline:1px solid silver; }
	p { flex:1 auto; margin:1em; background:gold; }
&lt;/style&gt;
&lt;div&gt;
	&lt;p&gt;&quot;flexing&quot;&lt;/p&gt;
	&lt;p&gt;allows the items to get bigger&lt;/p&gt;
	&lt;p&gt;or&lt;/p&gt;
	&lt;p&gt;smaller&lt;/p&gt;
&lt;/div&gt;
</pre>

   <p> Here, all four paragraphs have a <a
    href="#preferred-size"><i>preferred size</i></a> equal to the length of
    their text. The leftover space (after subtracting their preferred sizes
    and margins from the width of the flexbox) is distributed evenly to the
    four paragraphs. This shows how elements with the same flexibility may
    still end up different sizes, if their preferred sizes are different.
    <img alt="" src="images/wp7zxxyu.gif">
  </div>

  <h2 id=alignment><span class=secno>8. </span> Alignment</h2>

  <p>After a flexbox's contents have finished their flexing and dimensions of
   margin boxes of all flexbox items are finalized, they can be aligned in
   both the <i>main-axis</i> with &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; and the <i>cross-axis</i> with
   &lsquo;<a href="#flex-align0"><code
   class=property>flex-align</code></a>&rsquo; and &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo;. These properties make
   many common types of alignment trivial, including some things that were
   very difficult in CSS 2.1, like horizontal and vertical centering.

  <h3 id=flex-pack><span class=secno>8.1. </span> Axis Alignment: the
   &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-pack0>flex-pack</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>start | end | center | justify | distribute

    <tr>
     <th>Initial:

     <td>start

    <tr>
     <th>Applies to:

     <td>flexboxes

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p>The &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; property aligns <a
   href="#flexbox-item"><i>flexbox items</i></a> in the <i>main-axis</i> of
   the current line of the flexbox. This is done <em title="">after</em> any
   flexible lengths and any auto margins have been resolved. Typically it
   helps distribute extra free space leftover when either all the <a
   href="#flexbox-item"><i>flexbox items</i></a> on a line are inflexible, or
   are flexible but have reach their maximum size, but it also exerts some
   control over the alignment of items when they overflow the line.

  <dl>
   <dt><dfn id=flex-pack-start>&lsquo;<code
    class=css>start</code>&rsquo;</dfn>

   <dd><a href="#flexbox-item"><i>Flexbox items</i></a> are packed toward the
    start of the line. The <a href="#main-start"><i>main-start</i></a> margin
    edge of the first <a href="#flexbox-item"><i>flexbox item</i></a> on the
    line is placed flush with the <a href="#main-start"><i>main-start</i></a>
    edge of the line, and each subsequent <a href="#flexbox-item"><i>flexbox
    item</i></a> is placed flush with the preceding item.

   <dt><dfn id=flex-pack-end>&lsquo;<code class=css>end</code>&rsquo;</dfn>

   <dd><a href="#flexbox-item"><i>Flexbox items</i></a> are packed toward the
    end of the line. The <a href="#main-end"><i>main-end</i></a> margin edge
    of the last <a href="#flexbox-item"><i>flexbox item</i></a> is placed
    flush with the <a href="#main-end"><i>main-end</i></a> edge of the line,
    and each preceding <a href="#flexbox-item"><i>flexbox item</i></a> is
    placed flush with the subsequent item.

   <dt><dfn id=flex-pack-center>&lsquo;<code
    class=css>center</code>&rsquo;</dfn>

   <dd><a href="#flexbox-item"><i>Flexbox items</i></a> are packed toward the
    center of the line. The <a href="#flexbox-item"><i>flexbox items</i></a>
    on the line are placed flush with each other and aligned in the center of
    the line, with equal amounts of empty space between the <a
    href="#main-start"><i>main-start</i></a> edge of the line and the first
    item on the line and between the <a href="#main-end"><i>main-end</i></a>
    edge of the line and the last item on the line. (If the leftover
    free-space is negative, the <a href="#flexbox-item"><i>flexbox
    items</i></a> will overflow equally in both directions.)

   <dt><dfn id=flex-pack-justify>&lsquo;<code
    class=css>justify</code>&rsquo;</dfn>

   <dd><a href="#flexbox-item"><i>Flexbox items</i></a> are evenly
    distributed in the line. If the leftover free-space is negative or there
    is only a single <a href="#flexbox-item"><i>flexbox item</i></a> on the
    line, this value is identical to &lsquo;<code
    class=css>start</code>&rsquo;. Otherwise, the <a
    href="#main-start"><i>main-start</i></a> margin edge of the first <a
    href="#flexbox-item"><i>flexbox item</i></a> on the line is placed flush
    with the <a href="#main-start"><i>main-start</i></a> edge of the line,
    the <a href="#main-end"><i>main-end</i></a> margin edge of the last <a
    href="#flexbox-item"><i>flexbox item</i></a> on the line is placed flush
    with the <a href="#main-end"><i>main-end</i></a> edge of the line, and
    the remaining <a href="#flexbox-item"><i>flexbox items</i></a> on the
    line are distributed so that the empty space between any two adjacent
    items is the same.

   <dt><dfn id=flex-pack-distribute>&lsquo;<code
    class=css>distribute</code>&rsquo;</dfn>

   <dd><a href="#flexbox-item"><i>Flexbox items</i></a> are evenly
    distributed in the line, with half-size spaces on either end. If the
    leftover free-space is negative or there is only a single <a
    href="#flexbox-item"><i>flexbox item</i></a> on the line, this value is
    identical to &lsquo;<code class=css>center</code>&rsquo;. Otherwise, the
    <a href="#flexbox-item"><i>flexbox items</i></a> on the line are
    distributed such that the empty space between any two adjacent <a
    href="#flexbox-item"><i>flexbox items</i></a> on the line is the same,
    and the empty space before the first and after the last <a
    href="#flexbox-item"><i>flexbox items</i></a> on the line are half the
    size of the other empty spaces.
  </dl>

  <div class=figure> <img alt height=270 src="images/flex-pack.svg"
   width=504>
   <p class=caption>An illustration of the five &lsquo;<a
    href="#flex-pack0"><code class=property>flex-pack</code></a>&rsquo;
    keywords and their effects on a flexbox with three colored items.
  </div>

  <h3 id=flex-align><span class=secno>8.2. </span> Cross-axis Alignment: the
   &lsquo;<a href="#flex-align0"><code
   class=property>flex-align</code></a>&rsquo; and &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo; properties</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-align0>flex-align</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>start | end | center | baseline | stretch

    <tr>
     <th>Initial:

     <td>stretch

    <tr>
     <th>Applies to:

     <td>flexboxes

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-item-align>flex-item-align</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>auto | start | end | center | baseline | stretch

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td><a href="#flexbox-item"><i>flexbox items</i></a>

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>&lsquo;<code class=css>auto</code>&rsquo; computes to parent's
      &lsquo;<a href="#flex-align0"><code
      class=property>flex-align</code></a>&rsquo;; otherwise as specified

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p><a href="#flexbox-item"><i>Flexbox items</i></a> can be aligned in the
   <i>cross-axis</i> of the current line of the flexbox, similar to &lsquo;<a
   href="#flex-pack0"><code class=property>flex-pack</code></a>&rsquo; but in
   the perpendicular direction. &lsquo;<a href="#flex-align0"><code
   class=property>flex-align</code></a>&rsquo; sets the default alignment for
   all of the flexbox's <a href="#flexbox-item"><i
   title="flexbox items">items</i></a>, including anonymous <a
   href="#flexbox-item"><i>flexbox items</i></a>. &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo; allows this default
   alignment to be overridden for individual <a
   href="#flexbox-item"><i>flexbox items</i></a> (for anonymous flexbox
   items, &lsquo;<a href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo; always matches the value
   of &lsquo;<a href="#flex-align0"><code
   class=property>flex-align</code></a>&rsquo; on their associated flexbox).

  <p>A value of <dfn id=flex-item-align-auto>&lsquo;<code
   class=css>auto</code>&rsquo;</dfn> for &lsquo;<a
   href="#flex-item-align"><code
   class=property>flex-item-align</code></a>&rsquo; computes to the value of
   &lsquo;<a href="#flex-align0"><code
   class=property>flex-align</code></a>&rsquo; on the <a
   href="#flexbox-item"><i>flexbox item's</i></a> flexbox. The alignments are
   defined as:

  <dl>
   <dt><dfn id=flex-align-start>&lsquo;<code
    class=css>start</code>&rsquo;</dfn>

   <dd>The <a href="#cross-start"><i>cross-start</i></a> margin edge of the
    <a href="#flexbox-item"><i>flexbox item</i></a> is placed flush with the
    <a href="#cross-start"><i>cross-start</i></a> edge of the line.

   <dt><dfn id=flex-align-end>&lsquo;<code class=css>end</code>&rsquo;</dfn>

   <dd>The <a href="#cross-end"><i>cross-end</i></a> margin edge of the <a
    href="#flexbox-item"><i>flexbox item</i></a> is placed flush with the <a
    href="#cross-end"><i>cross-end</i></a> edge of the line.

   <dt><dfn id=flex-align-center>&lsquo;<code
    class=css>center</code>&rsquo;</dfn>

   <dd>The <a href="#flexbox-item"><i>flexbox item's</i></a> margin box is
    centered in the <i>cross-axis</i> within the line. (If the <a
    href="#cross-size"><i>cross size</i></a> of the flexbox is less than that
    of the <a href="#flexbox-item"><i>flexbox item</i></a>, it will overflow
    equally in both directions.)

   <dt><dfn id=flex-align-baseline>&lsquo;<code
    class=css>baseline</code>&rsquo;</dfn>

   <dd>
    <p>If the <a href="#flexbox-item"><i>flexbox item's</i></a> inline-axis
     is the same as the <i>cross-axis</i>, this value is identical to
     &lsquo;<code class=css>start</code>&rsquo;.

    <p>Otherwise, all <a href="#flexbox-item"><i>flexbox items</i></a> on the
     line with an alignment of &lsquo;<code class=css>baseline</code>&rsquo;
     that don't run afoul of the previous paragraph are aligned such that
     their baselines align, and the item with the largest distance between
     its baseline and its <a href="#cross-start"><i>cross-start</i></a>
     margin edge is placed flush against the <a
     href="#cross-start"><i>cross-start</i></a> edge of the line.

   <dt><dfn id=flex-align-stretch>&lsquo;<code
    class=css>stretch</code>&rsquo;</dfn>

   <dd>
    <p>If the <a href="#cross-size-property"><i>cross size property</i></a>
     of the <a href="#flexbox-item"><i>flexbox item</i></a> is &lsquo;<code
     class=css>auto</code>&rsquo;, it resolves to the length necessary to
     make the <a href="#cross-size"><i>cross size</i></a> of the item's
     margin box the same size as the line, while still respecting
     &lsquo;<code class=css>min/max-width/height</code>&rsquo; constraints as
     normal.

    <p>The <a href="#cross-start"><i>cross-start</i></a> margin edge of the
     <a href="#flexbox-item"><i>flexbox item</i></a> is placed flush with the
     <a href="#cross-start"><i>cross-start</i></a> edge of the line.
  </dl>

  <div class=figure> <img alt height=377 src="images/flex-align.svg"
   width=508>
   <p class=caption>An illustration of the five &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    keywords and their effects on a flexbox with four colored items.
  </div>

  <div class=example>
   <p>By using a vertical flexbox and &lsquo;<a href="#flex-align0"><code
    class=property>flex-align</code></a>&rsquo;, we can achieve behavior very
    close to HTML's <code>&lt;center></code> element:

   <div class=code-and-figure>
    <div>
     <pre>
&lt;div>
  &lt;p>foo foo foo foo&lt;/p>
  &lt;p>bar bar&lt;br>bar bar&lt;/p>
  &lt;p>foo foo foo foo foo foo foo
     foo foo foo foo foo&lt;/p>
&lt;/div>
&lt;style>
  div {
    display: flexbox;
    flex-flow: column;
    flex-align: center;
    width: 200px;
  }
&lt;/style></pre>
    </div>

    <div>
     <p><img alt="" src="images/basic-vertical-flexbox.png">
    </div>
   </div>
  </div>

  <h3 id=auto-margins><span class=secno>8.3. </span> Resolving &lsquo;<code
   class=css>auto</code>&rsquo; margins</h3>

  <p>Margins on flexbox items can be set to &lsquo;<code
   class=css>auto</code>&rsquo;, with effect very similar to auto margins in
   normal flow.

  <ul>
   <li>Through calculations of preferred sizes and flexible lengths, auto
    margins are considered to be zero.

   <li>Immediately <em>before</em> pack and align steps, if there are any
    auto margins on items in the direction of alignment and there is positive
    free space, the free space is distributed equally to the auto margins.

   <li>If free space was distributed to auto margins, the following pack or
    align step has no effect.
  </ul>

  <div class=example>
   <p>Auto margins can be used for simple alignment or for fine control.

   <p>Note that auto margins work consistently in both dimensions, so a
    simple markup like this

   <pre>
div { 	display:flexbox;
	width:4em; height:4em; background:silver;
}
p { margin:auto; }
&lt;div&gt;&lt;p&gt;OK&lt;/p&gt;&lt;/div&gt;</pre>

   <p>will center the single child: <img alt="image of square OK button"
    height=82 src="images/OK.png" width=82>

   <p>And this

   <pre>
div {	display:flexbox;
	width:calc(100% - 4em); height:calc(100% - 4em);
	border: 1em solid blue; border-radius:50%;
	margin:auto;
}
div#demo { width:9em; height:9em; }

&lt;div id="demo">&lt;div>&lt;div>&lt;/div>&lt;/div>&lt;/div></pre>

   <p> will produce nested centered boxes: <img alt="concentric blue circles"
    height=191 src="images/target.png" width=210>
  </div>

  <h3 id=flex-line-pack><span class=secno>8.4. </span> &lsquo;<a
   href="#flex-line-pack0"><code
   class=property>flex-line-pack</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flex-line-pack0>flex-line-pack</dfn>

    <tr>
     <th><a href="http://dev.w3.org/csswg/css-module/#values">Value</a>:

     <td>start | end | center | justify | distribute | stretch

    <tr>
     <th>Initial:

     <td>stretch

    <tr>
     <th>Applies to:

     <td><a href="#multi-line0"><i>multi-line</i></a> flexboxes

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Computed Value:

     <td>specified value

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Canonical Order:

     <td>as specified
  </table>

  <p>The &lsquo;<a href="#flex-line-pack0"><code
   class=property>flex-line-pack</code></a>&rsquo; property aligns a
   flexbox's lines within the flexbox when there is extra space in the
   <i>cross-axis</i>, similar to how &lsquo;<a href="#flex-pack0"><code
   class=property>flex-pack</code></a>&rsquo; aligns individual items within
   the <i>main-axis</i>:

  <dl>
   <dt><dfn id=flex-line-pack-start>&lsquo;<code
    class=css>start</code>&rsquo;</dfn>

   <dd>Lines are packed toward the start of the flexbox. The <a
    href="#cross-start"><i>cross-start</i></a> edge of the first line in the
    flexbox is placed flush with the <a
    href="#cross-start"><i>cross-start</i></a> edge of the flexbox, and each
    subsequent line is placed flush with the preceding line.

   <dt><dfn id=flex-line-pack-end>&lsquo;<code
    class=css>end</code>&rsquo;</dfn>

   <dd>Lines are packed toward the end of the flexbox. The <a
    href="#cross-end"><i>cross-end</i></a> edge of the last line is placed
    flush with the <a href="#cross-end"><i>cross-end</i></a> edge of the
    flexbox, and each preceding line is placed flush with the subsequent
    line.

   <dt><dfn id=flex-line-pack-center>&lsquo;<code
    class=css>center</code>&rsquo;</dfn>

   <dd>Lines are packed toward the center of the flexbox. The lines in the
    flexbox are placed flush with each other and aligned in the center of the
    flexbox, with equal amounts of empty space between the <a
    href="#cross-start"><i>cross-start</i></a> content edge of the flexbox
    and the first line in the flexbox and between the <a
    href="#cross-end"><i>cross-end</i></a> content edge of the flexbox and
    the last line in the flexbox. (If the leftover free-space is negative,
    the lines will overflow equally in both directions.)

   <dt><dfn id=flex-line-pack-justify>&lsquo;<code
    class=css>justify</code>&rsquo;</dfn>

   <dd>Lines are evenly distributed in the flexbox. If the leftover
    free-space is negative or there is only a single line in the flexbox,
    this value is identical to &lsquo;<code class=css>start</code>&rsquo;.
    Otherwise, the <a href="#cross-start"><i>cross-start</i></a> edge of the
    first line in the flexbox is placed flush with the <a
    href="#cross-start"><i>cross-start</i></a> content edge of the flexbox,
    the <a href="#cross-end"><i>cross-end</i></a> edge of the last line in
    the flexbox is placed flush with the <a
    href="#cross-end"><i>cross-end</i></a> content edge of the flexbox, and
    the remaining lines in the flexbox are distributed so that the empty
    space between any two adjacent lines is the same.

   <dt><dfn id=flex-line-pack-distribute>&lsquo;<code
    class=css>distribute</code>&rsquo;</dfn>

   <dd>Lines are evenly distributed in the flexbox, with half-size spaces on
    either end. If the leftover free-space is negative or there is only a
    single line in the flexbox, this value is identical to &lsquo;<code
    class=css>center</code>&rsquo;. Otherwise, the lines in the flexbox are
    distributed such that the empty space between any two adjacent lines is
    the same, and the empty space before the first and after the last lines
    in the flexbox are half the size of the other empty spaces.

   <dt><dfn id=flex-line-pack-stretch>&lsquo;<code
    class=css>stretch</code>&rsquo;</dfn>

   <dd>Lines stretch to take up the remaining space. If the leftover
    free-space is negative, this value is identical to &lsquo;<code
    class=css>start</code>&rsquo;. Otherwise, the free-space is split equally
    between all of the lines, increasing their cross size.
  </dl>

  <p class=note>Note: Only <a href="#multi-line0"><i>multi-line</i></a>
   flexboxes ever have free space in the <i>cross-axis</i> for lines to be
   aligned in, because in a <a href="#single-line"><i>single-line</i></a>
   flexbox the sole line automatically stretches to fill the space.

  <div class=figure> <img alt height=514
   src="images/flex-line-pack-example.png" width=585>
   <p class=caption>An illustration of the &lsquo;<a
    href="#flex-line-pack0"><code
    class=property>flex-line-pack</code></a>&rsquo; keywords and their
    effects on a multi-line flexbox.
  </div>

  <h2 id=layout-algorithm><span class=secno>9. </span> Flexbox Layout
   Algorithm</h2>

  <p>This section contains normative algorithms detailing the exact layout
   behavior of a flexbox and its contents. The algorithms here were designed
   to optimize readability and theoretical simplicity, and may not
   necessarily be the most efficient. Implementations may use whatever actual
   algorithms they wish, but must produce the same results as the algorithms
   described here.

  <p class=note> This section is mainly intended for implementors. Authors
   writing web pages should generally be served well by the individual
   property descriptions, and do not need to read this section unless they
   have a deep-seated urge to understand arcane details of CSS layout. <!--
<dfn>min size</dfn>
* each layout mode defines this for both dimensions:
	* for inline:
		* min-measure is largest word length or size of atomic inline in the inline-axis
		* min-extent is the extent after layout
	* for block containers:
		* min-measure is largest min size contribution of its children boxes
		* min-extent is the extent after layout
	* for tables:
		* ?
	* min-extent is always the extent after layout

<dfn>min-size contribution</dfn>
* each layout mode defines this for both dimensions:
	* for inline:
		* min-measure is largest word length or size of atomic inline in the inline-axis + margin/border/padding (attached to first/last words)
	* for block containers:
		* if measure is ''min-content'' or ''max-content'' or definite size, that value.
		* Otherwise, your min measure + margin/border/padding
	* for tables:
		* ?
	* min-extent is always the extent after layout

<dfn>max size</dfn>
* each layout mode defines this for both dimensions:
	* for inline:
		* max-measure is the largest line length when only forced breaks are taken
	* for block containers
		* max-measure is the largest max size contribution of its children boxes
	* for tables
		* ?
	* max-extent is always the extent after layout

<dfn>max-size contribution</dfn>
* each layout mode defines this for both dimensions:
	* for inline:
		* max-measure is largest line length when only forced breaks are taken + margin/border/padding (attached to first/last words)
	* for block containers:
		* if measure is ''min-content'' or ''max-content'' or definite size, that value.
		* Otherwise, your max measure + margin/border/padding
	* for tables:
		* ?
	* min-extent is always the extent after layout
	-->
   

  <p> A size is <dfn id=definite title="definite|indefinite">definite</dfn>
   if it is a <var>&lt;length></var>, or it is a <var>&lt;percentage></var>
   that is resolved against a definite size.

  <p> To lay out a flexbox and its contents, follow these steps:

  <ol>
   <li value=0> <strong>Generate anonymous flexbox items</strong> around runs
    of contiguous inline content in the flexbox, as described in the <a
    href="#flex-items">Flexbox Items</a> section.

   <li> <strong>Re-order the flexbox items according to their &lsquo;<a
    href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo;.</strong> The items with the
    lowest (most negative) &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo; values are first in the
    ordering. If multiple items share a &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo; value, they're ordered by
    document order. This affects the order in which the flexbox items
    generate boxes in the box-tree, and how the rest of this algorithm deals
    with the items.

   <li> <strong>Determine the available main and cross space for the flexbox
    items.</strong> For each dimension, if that dimension of the flexbox is a
    <i>definite size</i>, use that; otherwise, subtract the flexbox's margin,
    border, and padding from the space available to the flexbox in that
    dimension and use that value. <span class=note>This might result in an
    infinite value.</span>

   <li> <strong>Determine the hypothetical main size of each item:</strong>
    <ul>
     <li> If the item has a <a href="#definite"><i>definite</i></a> preferred
      size, that's the hypothetical size.

     <li> Otherwise, if the flexbox's main-axis is parallel to the item's
      inline-axis, lay out the item using its preferred size and the
      available space, treating &lsquo;<code class=css>auto</code>&rsquo; as
      &lsquo;<code class=css>fit-content</code>&rsquo; unless the item's
      writing mode is perpendicular to the flexbox's writing mode (in which
      case <a
      href="http://www.w3.org/TR/css3-writing-modes/#orthogonal-flows">the
      rules for a box in an orthogonal flow</a> <a href="#CSS3-WRITING-MODES"
      rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>
      are in effect). If the preferred size is &lsquo;<code
      class=css>fill-available</code>&rsquo;, or &lsquo;<code
      class=css>fit-content</code>&rsquo;, and the flexbox is being sized
      under a min-content or max-content main-size constraint, size the item
      under that constraint instead. The hypothetical size is the item's
      resulting measure.

     <li> Otherwise, lay out the item using the available space, treating
      &lsquo;<code class=css>auto</code>&rsquo; as &lsquo;<code
      class=css>fit-content</code>&rsquo; unless the item's writing mode is
      perpendicular to the flexbox's writing mode (in which case <a
      href="http://www.w3.org/TR/css3-writing-modes/#orthogonal-flows">the
      rules for a box in an orthogonal flow</a> <a href="#CSS3-WRITING-MODES"
      rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>
      are in effect). If the preferred size is &lsquo;<code
      class=css>auto</code>&rsquo;, &lsquo;<code
      class=css>fill-available</code>&rsquo;, or &lsquo;<code
      class=css>fit-content</code>&rsquo;, and the flexbox is being sized
      under a min-content or max-content cross-size constraint, size the item
      under that constraint instead. The hypothetical size is the item's
      resulting max-content extent.
    </ul>

    <p> <em>Do not apply min/max-width/height constraints to the preferred
     size of flexible lengths &mdash; those constraints are handled elsewhere
     in this algorithm, and doing so will produce incorrect results.</em>

   <li> <strong>Determine the main size of the flexbox</strong> using its <a
    href="#main-size-property"><i>main size property</i></a>. In this
    calculation, the <i>min content main size</i> of the flexbox is the
    maximum of the flexbox's items' <i>min-content size contributions</i>,
    and the <i>max content main size</i> of the flexbox is the sum of the
    flexbox's items' <i>max-content size contributions</i>. For these
    computations, &lsquo;<code class=css>auto</code>&rsquo; margins are
    treated as &lsquo;<code class=css>0</code>&rsquo;, and for flexbox items
    the preferred size is used in place of the <a
    href="#main-size-property"><i>main size property</i></a>.

   <li> <strong>Collect flexbox items into flexbox lines:</strong>
    <ul>
     <li> If the flexbox is single-line, collect all the flexbox items into a
      single flexbox line.

     <li> Otherwise, starting from the first uncollected item, collect as
      many consecutive flexbox items as will fit (but collect at least one)
      into the flexbox's inner main size into a flexbox line. For this step,
      the size of a flexbox item is its hypothetical outer main size, clamped
      according to its min and max main size properties. Repeat until all
      flexbox items have been collected into flexbox lines.
    </ul>

   <li>
    <p class=issue> Are flexboxes fill-available or fit-content by default?
     Or are they really shrink-wrap, such that we need to adjust the main
     size here, now that we know the length of the longest line?

   <li> <strong><a href="#resolve-flexible-lengths">Resolve the flexible
    lengths</a></strong> of all the flexbox items to find their used main
    size, and <strong>determine their hypothetical cross size</strong> from
    this main size.

   <li> <strong>Distribute any remaining free space.</strong> For each
    flexbox line:
    <ol>
     <li> If the remaining free space is positive and at least one main-axis
      margin on this line is &lsquo;<code class=css>auto</code>&rsquo;,
      distribute the free space equally among these margins. Otherwise, set
      all &lsquo;<code class=css>auto</code>&rsquo; margins to zero.

     <li> Align the items along the main-axis per &lsquo;<a
      href="#flex-pack0"><code class=property>flex-pack</code></a>&rsquo;.
    </ol>

   <li> <strong>Calculate the cross size of each flexbox line.</strong> For
    each flexbox line:
    <ol>
     <li> Collect all the flexbox items whose inline-axis is parallel to the
      main-axis and whose &lsquo;<a href="#flex-item-align"><code
      class=property>flex-item-align</code></a>&rsquo; is &lsquo;<code
      class=css>baseline</code>&rsquo;. Find the largest of the distances
      between each item's baseline and its hypothetical outer cross-start
      edge, and the largest of the distances between each item's baseline and
      its hypothetical outer cross-end edge, and sum these two values.

     <li> Among all the items not collected by the previous step, find the
      largest hypothetical outer cross-size.

     <li> The cross-size of the flexbox line is the larger of the numbers
      found in the previous two steps.
    </ol>

    <p> If the flexbox has a <a href="#definite"><i>definite</i></a> cross
     size, &lsquo;<a href="#flex-line-pack0"><code
     class=property>flex-line-pack</code></a>&rsquo; is &lsquo;<code
     class=css>stretch</code>&rsquo;, and the sum of the flexbox lines' cross
     sizes is less than the flexbox's inner cross size, increase the cross
     size of each flexbox line by equal amounts such that the sum of their
     cross sizes exactly equals the flexbox's inner cross size.

   <li> <strong>Resolve cross-axis &lsquo;<code class=css>auto</code>&rsquo;
    margins.</strong> If a flexbox item has &lsquo;<code
    class=css>auto</code>&rsquo; cross-axis margins, and its outer cross size
    (treating those &lsquo;<code class=css>auto</code>&rsquo; margins as
    zero) is less than the cross size of its flexbox line, distribute the
    difference in those sizes equally to the &lsquo;<code
    class=css>auto</code>&rsquo; margins.

   <li> <strong>Determine the used cross size of each flexbox item.</strong>
    If a flexbox item has &lsquo;<code class=css>flex-item-align:
    stretch</code>&rsquo; and its cross size property is &lsquo;<code
    class=css>auto</code>&rsquo;, the used outer cross size is the cross size
    of its flexbox line, clamped according to its min and max cross size
    properties. Otherwise, the used cross size is the item's hypothetical
    cross size.

   <li> <strong>Align all flexbox items along the cross-axis</strong> per
    &lsquo;<a href="#flex-item-align"><code
    class=property>flex-item-align</code></a>&rsquo;.

   <li> <strong>Determine the flexbox's used cross size:</strong>
    <ul>
     <li> If the cross size property is a <a
      href="#definite"><i>definite</i></a> size, use that.

     <li> Otherwise, use the sum of the flexbox lines' cross sizes.
    </ul>

   <li> <strong>Align all flexbox lines</strong> per &lsquo;<a
    href="#flex-line-pack0"><code
    class=property>flex-line-pack</code></a>&rsquo;.
  </ol>

  <h3 id=resolve-flexible-lengths><span class=secno>9.1. </span> Resolving
   Flexible Lengths</h3>

  <p> To resolve the flexible lengths of the items within a flexbox line:

  <ol>
   <li> <strong>Determine the used flexibility.</strong> Sum the hypothetical
    outer main sizes of all items on the line, clamped according to their min
    and max main size properties. If the sum is greater than the flexbox's
    inner main size, use positive flexibility for the rest of this algorithm;
    otherwise, use negative flexibility.

   <li> <strong>Check that you can distribute any space.</strong> If all the
    flexbox items on the line are either frozen or have a flexibility of
    zero, exit the algorithm.

   <li> <strong>Calculate free space.</strong> Sum the hypothetical outer
    main sizes of all items on the line (not clamping this time), and
    subtract this from the flexbox's inner main size. This is the free space.
    

   <li> <strong>Distribute free space proportional to flexibility.</strong>
    If the sign of the free space matches the sign of the flexibility,
    distribute the free space to each flexible item's main size in proportion
    to the item's flexibility.

   <li> <strong>Fix min/max violations.</strong> Clamp each item's main size
    by its min and max main size properties. If the item's main size was made
    smaller by this, it's a max violation. If the item's main size was made
    larger by this, it's a min violation.

   <li> The total violation is the sum of the adjustments from the previous
    step (<code><var>clamped size</var> - <var>unclamped size</var></code>).
    If the total violation is:
    <dl>
     <dt>Zero

     <dd> Exit the algorithm.

     <dt>Positive

     <dd> Freeze all the items with min violations, reset all other items to
      their size upon entering this algorithm, and return to step 2 of this
      algorithm.

     <dt>Negative

     <dd> Freeze all the items with max violations, reset all other items to
      their size upon entering this algorithm, and return to step 2 of this
      algorithm.
    </dl>
  </ol>

  <h2 id=pagination><span class=secno>10. </span> Page breaks in flexbox</h2>

  <p>Flexboxes can break across pages between items, between lines of items
   (in multi-line mode) and inside items, as long as &lsquo;<code
   class=property>break-</code>&rsquo; property allow that. All &lsquo;<code
   class=property>break-</code>&rsquo; properties are supported on flexbox,
   on flexbox items and inside flexbox items.

  <p>The following breaking rules refer to fragmentation container as
   “page”. The same rules apply to any other fragmenters. Change
   “page” to the appropriate fragmenter type as needed.

  <p>Breaks in and around flexbox are determined as follows:

  <ol>
   <li> Break-before, break-after, break-inside properties on flexbox itself
    have effect as normal. If breaks inside flexbox are allowed, break points
    are determined using following rules.

   <li>When flexbox is continued after a break, flexbox’s available space
    in block direction is reduced by space consumed in previous pages.
    Consumed space before page break is:
    <ol>
     <li>If flexbox starts on that page: the distance between start of
      content box of the flexbox and the end of available space

     <li>If flexbox continues from previous page: the size of available
      space.
    </ol>

    <p>If as a result of this adjustment block-direction size of flexbox
     becomes negative, it is set to zero.

   <li> <dfn id=forced-breaks-on-flexbox-items>Forced breaks on flexbox
    items</dfn>
    <ol>
     <li>In a row-direction single-line flexbox, breaks before and after
      items apply to the flexbox

     <li>In column-direction single-line flexbox and all multi-line
      flexboxes:
      <ol>
       <li>Forced break before the first item is applied to the flexbox

       <li>Forced break after the last item is applied to the flexbox

       <li>Forced break before or after any other item terminates the set of
        items to be laid out on this page
      </ol>
    </ol>

   <li>When necessary, a <dfn
    id=break-inside-a-flexbox-item-is-considere>break inside a flexbox item
    is considered</dfn> as follows:
    <ol>
     <li>If the item has “break-inside:avoid”, it is pushed to the next
      page

     <li>Otherwise, it may be broken, according to breaking rules and
      algorithms applicable to its display type.

     <li>Forced breaks inside flexbox item content are handled normally, but
      in row-direction flexbox they don't affect layout of sibling flexbox
      items (e.g. a forced break inside an item doesn't prevent its next
      sibling from appearing on the same page)
    </ol>

   <li> <b>Column-direction flexbox: single-line</b>
    <ol>
     <li>
      <p>If flexbox main-axis size is definite, flexbox algorithm must be run
       first, without constraints of available space on page and using all
       content of the flexbox. Otherwise flexbox items use the preferred
       size, adjusted for min/max.

      <p>If page size varies and flexbox size depends on page size, this step
       has to be repeated on each page, again with the whole content of the
       flexbox.

     <li>Set of items that will fit on current page is determined by adding
      main-axis margin-box sizes of flexbox items until total size exceeds
      available space or a forced break is encountered.

     <li>If border box of an item doesn’t fit in available space, a break
      inside the item is considered

     <li>
      <p>Items that fit on a page completely or partially are aligned
       according to ‘flex-pack’ property, independently from the rest of
       flexbox content.

      <p>Note that flexible lengths are not recalculated on each page, even
       if there is additional free space.
    </ol>

    <p class=note>It is the intent of this spec that column-direction
     single-line flexbox paginates very similarly to block flow. As a test of
     the intent, a flexbox with "flex-pack:start" and no flexible items
     should paginate identically to a block with non-floating children with
     same content, same used size and same used margins. This rule is
     simplified and not normative, but if there is any difference it should
     be noted here.

   <li> <b>Column-direction flexbox: multi-line</b>
    <ol>
     <li>Items are collected in lines and laid out as usual, but in available
      space on current page.

     <li>If border box of an item doesn’t fit on main-axis and it is the
      only item in its line:
      <ol>
       <li>If the flexbox is not at the top of the page, it is moved to the
        next page.

       <li>If the flexbox is already at the top of the page, the item may
        produce overflow. If &lsquo;<code
        class=property>overflow</code>&rsquo; property of the flexbox is set
        to &lsquo;<code class=property>visible</code>&rsquo;, it is paginated
        using same rules as visible overflow of blocks in normal flow.
        <p class=note>After the break, continuation of overflow items may
         overlap with other items and/or content after the flexbox. It is
         undesirable but there is no good resolution for this spacial
         conflict and this outcome is similar to effect of "overflow:visible"
         elsewhere.
      </ol>

     <li>Breaks inside items (forced or unforced) are not allowed
    </ol>

   <li> <b>Row-direction flexbox: single-line</b>
    <ol>
     <li>
      <p>Main-axis space distribution in each line is done based on complete
       content of the flexbox and without space constraint in block
       direction.

      <p>If page size varies and flexbox size depends on page size, this step
       needs to be repeated on each page.

     <li>Flexbox items are sized and positioned as usual, but in
      block-direction available space of min(remaining available space in
      flexbox, remaining space on the page).

     <li>Any items with baseline alignment must be aligned before considering
      breaks inside items.

     <li>If border box of an item doesn’t fit in current page, a break
      inside the item is considered

     <li>Items that have fit completely on a previous page and items that are
      pushed to next page don’t have any rendering, leaving empty space as
      needed.

     <li>Items that fit completely or partially on current page are aligned
      on cross-axis:
      <ol>
       <li>For the purposes of cross-axis alignment, minimum of remaining
        available space in flexbox and available space at current page is
        used.

       <li>If an item is broken in the previous step and its alignment is not
        baseline, its cross-axis margin-box size is set to available space.
        If item alignment is baseline, its cross-axis size is adjusted so
        that it extends to exactly the end of available space.
      </ol>
    </ol>

   <li> <b>Row-direction flexbox: multi-line</b>
    <ol>
     <li>Collect items into lines and determine line heights:
      <ol>
       <li>
        <p>If &lsquo;<a href="#flex-line-pack0"><code
         class=property>flex-line-pack</code></a>&rsquo; is &lsquo;<code
         class=property>stretch</code>&rsquo; and flexbox size in block
         direction is definite, layout of the complete flexbox has to be done
         first to determine line heights. Layout is done as usual for
         non-paginated case, but accounting for forced breaks.

        <p>If page size varies, this step may have to be redone, again with
         complete content; special consideration should be to be given to
         line breaks to ensure that item at the start of current page is also
         at the start of a line in this hypothetical layout. This
         specification currently doesn't define how exactly to achieve that.

       <li>Otherwise, items are collected into lines and each line is laid
        out as a single-line flexbox to determine block-direction size of
        each line.
      </ol>

     <li>Lines are added one at a time, until out of available space or a
      forced break is encountered

     <li>Breaks inside items (forced or unforced) are not allowed.

     <li>If the first flexbox line on a page doesn't fit in cross-axis,
      <ol>
       <li>If the flexbox is not at the top of the page, it is moved to the
        next page.

       <li>If the flexbox is already at the top of the page, the item may
        produce overflow. If &lsquo;<code
        class=property>overflow</code>&rsquo; property of the flexbox is set
        to &lsquo;<code class=property>visible</code>&rsquo;, it is paginated
        using same rules as visible overflow of blocks in normal flow.
      </ol>

     <li>If size of flexbox in inline direction is not definite, multi-line
      layout algorithm is run using the set of items that have fit on the
      current page.

     <li>Line packing is done on each page, with content on the page
    </ol>
  </ol>

  <h2 id=cssom><span class=secno>11. </span>CSSOM</h2>

  <div class=issue>
   <p>&lsquo;<a href="#flex"><code class=property>Flex</code></a>&rsquo;
    property is currently defined as shorthand only, combining three values.
    When queried&nbsp; from OM, it is seen as a string with up to three
    values, which can be very complicated to deal with properly.

   <p>There should be separate properties to access flexibility components in
    OM, such as:

   <pre class=idl>
[Supplemental] interface "<a
    href="http://www.w3.org/TR/cssom/#cssstyledeclaration">CSSStyleDeclaration</a> {
	attribute DOMString? flexPositive;
	attribute DOMString? flexNegative;
	attribute DOMString? flexPreferredSize;
};               
</pre>
   See <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16145">Bug-16145</a></div>

  <h2 id=conformance><span class=secno>12. </span> Conformance</h2>

  <h3 id=conventions><span class=secno>12.1. </span> Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 id=conformance-classes><span class=secno>12.2. </span> Conformance
   classes</h3>

  <p>Conformance to CSS Flexbox Layout Module is defined for three
   conformance classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to CSS Flexbox Layout Module if all of its
   statements that use syntax defined in this module are valid according to
   the generic CSS grammar and the individual grammars of each feature
   defined in this module.

  <p>A renderer is conformant to CSS Flexbox Layout Module if, in addition to
   interpreting the style sheet as defined by the appropriate specifications,
   it supports all the features defined by CSS Flexbox Layout Module by
   parsing them correctly and rendering the document accordingly. However,
   the inability of a UA to correctly render a document due to limitations of
   the device does not make the UA non-conformant. (For example, a UA is not
   required to render color on a monochrome monitor.)

  <p>An authoring tool is conformant to CSS Flexbox Layout Module if it
   writes style sheets that are syntactically correct according to the
   generic CSS grammar and the individual grammars of each feature in this
   module, and meet all other conformance requirements of style sheets as
   described in this module.

  <h3 id=partial><span class=secno>12.3. </span> Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
   assign fallback values, CSS renderers <strong>must</strong> treat as
   invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 id=experimental><span class=secno>12.4. </span> Experimental
   implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
   reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage in
   the W3C process, all implementations of a CSS feature are considered
   experimental. The CSS Working Group recommends that implementations use a
   vendor-prefixed syntax for such features, including those in W3C Working
   Drafts. This avoids incompatibilities with future changes in the draft.

  <h3 id=testing><span class=secno>12.5. </span> Non-experimental
   implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
   non-experimental implementations are possible, and implementers should
   release an unprefixed implementation of any CR-level feature they can
   demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
   implementations, the CSS Working Group requests that non-experimental CSS
   renderers submit an implementation report (and, if necessary, the
   testcases used for that implementation report) to the W3C before releasing
   an unprefixed implementation of any CSS features. Testcases submitted to
   W3C are subject to review and correction by the CSS Working Group.

  <p>Further information on submitting testcases and implementation reports
   can be found from on the CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
   Questions should be directed to the <a
   href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
   mailing list.

  <h3 id=cr-exit-criteria><span class=secno>12.6. </span> CR exit criteria</h3>

  <p> For this specification to be advanced to Proposed Recommendation, there
   must be at least two independent, interoperable implementations of each
   feature. Each feature may be implemented by a different set of products,
   there is no requirement that all features be implemented by a single
   product. For the purposes of this criterion, we define the following
   terms:

  <dl>
   <dt>independent

   <dd>each implementation must be developed by a different party and cannot
    share, reuse, or derive from code used by another qualifying
    implementation. Sections of code that have no bearing on the
    implementation of this specification are exempt from this requirement.

   <dt>interoperable

   <dd>passing the respective test case(s) in the official CSS test suite,
    or, if the implementation is not a Web browser, an equivalent test. Every
    relevant test in the test suite should have an equivalent test created if
    such a user agent (UA) is to be used to claim interoperability. In
    addition if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those equivalent
    tests in the same way for the purpose of interoperability. The equivalent
    tests must be made publicly available for the purposes of peer review.

   <dt>implementation

   <dd>a user agent which:
    <ol class=inline>
     <li>implements the specification.

     <li>is available to the general public. The implementation may be a
      shipping product or other publicly available version (i.e., beta
      version, preview release, or “nightly build”). Non-shipping product
      releases must have implemented the feature(s) for a period of at least
      one month in order to demonstrate stability.

     <li>is not experimental (i.e., a version specifically designed to pass
      the test suite and is not intended for normal usage going forward).
    </ol>
  </dl>

  <p>The specification will remain Candidate Recommendation for at least six
   months.

  <hr title="Separator from footer">

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>Thanks for feedback and contributions to Andrew Fedoniouk, Arron
   Eicholz, James Elmore, Ben Horst, Boris Zbarsky, Brad Kemper, Brian
   Heuston, Christian Stockwell, Christoph Päper, Daniel Holbert, Erik
   Anderson, Eugene Veselov, Fantasai, John Jansen, Markus Mielke, Ning
   Rogers, Ojan Vafai, Peter Salas, Phil Cupp, Robert O'Callahan, Rossen
   Atanassov, Shinichiro Hamaji, Tony Chang.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3-WRITING-MODES>[CSS3-WRITING-MODES]

   <dd>Elika J. Etemad; Koji Ishii; Shinyu Murakami. <a
    href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/"><cite>CSS
    Writing Modes Module Level 3.</cite></a> 1 September 2011. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/">http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/</a>
    </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=informative>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=property>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><span class=property>display</span>

     <td>flexbox | inline-flexbox

    <tr>
     <th><a class=property href="#flex">flex</a>

     <td>none | [ &lt;number>{1,2} || &lt;&apos;width&apos;> ]

     <td>&lsquo;none&rsquo;

     <td>flexbox items

     <td>no

     <td>Two integers for positive and negative flex, and a preferred size
      given either as an absolute length or a keyword.

     <td>visual

    <tr>
     <th><a class=property href="#flex-align0">flex-align</a>

     <td>start | end | center | baseline | stretch

     <td>stretch

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual

    <tr>
     <th><a class=property href="#flex-direction0">flex-direction</a>

     <td>row | row-reverse | column | column-reverse

     <td>row

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual

    <tr>
     <th><a class=property href="#flex-flow0">flex-flow</a>

     <td>&lt;&apos;flex-direction&apos;> || &lt;&apos;flex-wrap&apos;>

     <td>see individual properties

     <td>flexboxes

     <td>see individual properties

     <td>see individual properties

     <td>visual

    <tr>
     <th><a class=property href="#flex-item-align">flex-item-align</a>

     <td>auto | start | end | center | baseline | stretch

     <td>auto

     <td>flexbox items

     <td>no

     <td>&lsquo;auto&rsquo; computes to parent's &lsquo;flex-align&rsquo;;
      otherwise as specified

     <td>visual

    <tr>
     <th><a class=property href="#flex-line-pack0">flex-line-pack</a>

     <td>start | end | center | justify | distribute | stretch

     <td>stretch

     <td>multi-line flexboxes

     <td>no

     <td>specified value

     <td>visual

    <tr>
     <th><a class=property href="#flex-order0">flex-order</a>

     <td>&lt;number>

     <td>0

     <td>flexbox items

     <td>no

     <td>specified value

     <td>visual

    <tr>
     <th><a class=property href="#flex-pack0">flex-pack</a>

     <td>start | end | center | justify | distribute

     <td>start

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual

    <tr>
     <th><a class=property href="#flex-wrap0">flex-wrap</a>

     <td>nowrap | wrap | wrap-reverse

     <td>nowrap

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual
  </table>
  <!--end-properties-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>authoring tool, <a href="#authoring-tool"
    title="authoring tool"><strong>12.2.</strong></a>

   <li>&lsquo;<code class=css>auto</code>&rsquo;, <a
    href="#flex-item-align-auto" title="''auto''"><strong>8.2.</strong></a>

   <li>&lsquo;<code class=css>baseline</code>&rsquo;, <a
    href="#flex-align-baseline"
    title="''baseline''"><strong>8.2.</strong></a>

   <li>break inside a flexbox item is considered, <a
    href="#break-inside-a-flexbox-item-is-considere"
    title="break inside a flexbox item is considered"><strong>10.</strong></a>
    

   <li>&lsquo;<code class=css>center</code>&rsquo;, <a
    href="#flex-align-center" title="''center''"><strong>8.2.</strong></a>,
    <a href="#flex-line-pack-center"
    title="''center''"><strong>8.4.</strong></a>, <a href="#flex-pack-center"
    title="''center''"><strong>8.1.</strong></a>

   <li>&lsquo;<code class=css>column</code>&rsquo;, <a
    href="#flex-flow-column" title="''column''"><strong>6.1.</strong></a>

   <li>&lsquo;<code class=css>column-reverse</code>&rsquo;, <a
    href="#flex-flow-column-reverse"
    title="''column-reverse''"><strong>6.1.</strong></a>

   <li>cross axis, <a href="#cross-axis"
    title="cross axis"><strong>2.</strong></a>

   <li>cross-end, <a href="#cross-end"
    title=cross-end><strong>2.</strong></a>

   <li>cross size, <a href="#cross-size"
    title="cross size"><strong>2.</strong></a>

   <li>cross size property, <a href="#cross-size-property"
    title="cross size property"><strong>2.</strong></a>

   <li>cross-start, <a href="#cross-start"
    title=cross-start><strong>2.</strong></a>

   <li>definite, <a href="#definite" title=definite><strong>9.</strong></a>

   <li>&lsquo;<code class=css>distribute</code>&rsquo;, <a
    href="#flex-line-pack-distribute"
    title="''distribute''"><strong>8.4.</strong></a>, <a
    href="#flex-pack-distribute"
    title="''distribute''"><strong>8.1.</strong></a>

   <li>&lsquo;<code class=css>end</code>&rsquo;, <a href="#flex-align-end"
    title="''end''"><strong>8.2.</strong></a>, <a href="#flex-line-pack-end"
    title="''end''"><strong>8.4.</strong></a>, <a href="#flex-pack-end"
    title="''end''"><strong>8.1.</strong></a>

   <li>flex, <a href="#flex" title=flex><strong>7.</strong></a>

   <li>flex-align, <a href="#flex-align0"
    title=flex-align><strong>8.2.</strong></a>

   <li>flexbox, <a href="#display-flexbox"
    title=flexbox><strong>3.</strong></a>, <a href="#flexbox"
    title=flexbox><strong>2.</strong></a>

   <li>flexbox formatting context, <a href="#flexbox-formatting-context"
    title="flexbox formatting context"><strong>3.</strong></a>

   <li>flexbox item, <a href="#flexbox-item"
    title="flexbox item"><strong>4.</strong></a>

   <li>flexbox items, <a href="#flexbox-item"
    title="flexbox items"><strong>4.</strong></a>

   <li>flexbox item's, <a href="#flexbox-item"
    title="flexbox item's"><strong>4.</strong></a>

   <li>flex-direction, <a href="#flex-direction0"
    title=flex-direction><strong>6.1.</strong></a>

   <li>flex-flow, <a href="#flex-flow0"
    title=flex-flow><strong>6.3.</strong></a>

   <li>flexible length, <a href="#flexible-length"
    title="flexible length"><strong>7.</strong></a>

   <li>flexible lengths, <a href="#flexible-length"
    title="flexible lengths"><strong>7.</strong></a>

   <li>flexible length's, <a href="#flexible-length"
    title="flexible length's"><strong>7.</strong></a>

   <li>flex-item-align, <a href="#flex-item-align"
    title=flex-item-align><strong>8.2.</strong></a>

   <li>flex-line-pack, <a href="#flex-line-pack0"
    title=flex-line-pack><strong>8.4.</strong></a>

   <li>flex-order, <a href="#flex-order0"
    title=flex-order><strong>6.4.</strong></a>

   <li>flex-pack, <a href="#flex-pack0"
    title=flex-pack><strong>8.1.</strong></a>

   <li>flex-wrap, <a href="#flex-wrap0"
    title=flex-wrap><strong>6.2.</strong></a>

   <li>Forced breaks on flexbox items, <a
    href="#forced-breaks-on-flexbox-items"
    title="Forced breaks on flexbox items"><strong>10.</strong></a>

   <li>indefinite, <a href="#definite"
    title=indefinite><strong>9.</strong></a>

   <li>inline-flexbox, <a href="#display-inline-flexbox"
    title=inline-flexbox><strong>3.</strong></a>

   <li>&lsquo;<code class=css>justify</code>&rsquo;, <a
    href="#flex-line-pack-justify"
    title="''justify''"><strong>8.4.</strong></a>, <a
    href="#flex-pack-justify" title="''justify''"><strong>8.1.</strong></a>

   <li>main axis, <a href="#main-axis"
    title="main axis"><strong>2.</strong></a>

   <li>main-end, <a href="#main-end" title=main-end><strong>2.</strong></a>

   <li>main size, <a href="#main-size"
    title="main size"><strong>2.</strong></a>

   <li>main size property, <a href="#main-size-property"
    title="main size property"><strong>2.</strong></a>

   <li>main-start, <a href="#main-start"
    title=main-start><strong>2.</strong></a>

   <li>multi-line, <a href="#multi-line0"
    title=multi-line><strong>5.</strong></a>

   <li>negative flexibility, <a href="#negative-flexibility"
    title="negative flexibility"><strong>7.</strong></a>

   <li>&lsquo;<code class=css>nowrap</code>&rsquo;, <a
    href="#flex-flow-nowrap" title="''nowrap''"><strong>6.2.</strong></a>

   <li>positive flexibility, <a href="#positive-flexibility"
    title="positive flexibility"><strong>7.</strong></a>

   <li>preferred size, <a href="#preferred-size"
    title="preferred size"><strong>7.</strong></a>

   <li>renderer, <a href="#renderer"
    title=renderer><strong>12.2.</strong></a>

   <li>&lsquo;<code class=css>row</code>&rsquo;, <a href="#flex-flow-row"
    title="''row''"><strong>6.1.</strong></a>

   <li>&lsquo;<code class=css>row-reverse</code>&rsquo;, <a
    href="#flex-flow-row-reverse"
    title="''row-reverse''"><strong>6.1.</strong></a>

   <li>single-line, <a href="#single-line"
    title=single-line><strong>5.</strong></a>

   <li>&lsquo;<code class=css>start</code>&rsquo;, <a
    href="#flex-align-start" title="''start''"><strong>8.2.</strong></a>, <a
    href="#flex-line-pack-start" title="''start''"><strong>8.4.</strong></a>,
    <a href="#flex-pack-start" title="''start''"><strong>8.1.</strong></a>

   <li>&lsquo;<code class=css>stretch</code>&rsquo;, <a
    href="#flex-align-stretch" title="''stretch''"><strong>8.2.</strong></a>,
    <a href="#flex-line-pack-stretch"
    title="''stretch''"><strong>8.4.</strong></a>

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="style sheet, as conformance class"><strong>12.2.</strong></a>
    </ul>

   <li>&lsquo;<code class=css>wrap</code>&rsquo;, <a href="#flex-flow-wrap"
    title="''wrap''"><strong>6.2.</strong></a>

   <li>&lsquo;<code class=css>wrap-reverse</code>&rsquo;, <a
    href="#flex-flow-wrap-reverse"
    title="''wrap-reverse''"><strong>6.2.</strong></a>
  </ul>
  <!--end-index-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
