<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <title>CSS Object Model (CSSOM)</title>
  <link rel="stylesheet" href="cssom.css"/>
  <link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS]"/>
 </head>
 <body class="draft">
  <div class="head">
   <!--logo-->

   <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
   <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

   <h1 id="cssom">CSS Object Model (CSSOM)</h1>

   <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

   <h2 class="no-num no-toc" id="w3c-doctype">[LONGSTATUS] [DATE: 3 August 2002]</h2>

   <dl>

    <dt>This Version:</dt>
    <dd class="dontpublish"><a href="http://dvcs.w3.org/hg/csswg/raw-file/tip/cssom/Overview.html">http://dvcs.w3.org/hg/csswg/raw-file/tip/cssom/Overview.html</a></dd>
    <dd class="publish"><a href="[VERSION]">[VERSION]</a></dd>

    <dt class="dontpublish">Participate:</dt>
    <dd class="dontpublish"><a href="mailto:www-style@w3.org?subject==%5Bcssom%5D%20">www-style@w3.org</a> (<a href="http://lists.w3.org/Archives/Public/www-style/">archives</a>)</dd>
    <dd class="dontpublish"><a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=CSS&amp;component=CSSOM">File a bug</a></dd>
    <dd class="dontpublish"><a href="http://wiki.whatwg.org/wiki/IRC">IRC: #css on Freenode</a></dd>

    <dt class="publish">Latest Version:</dt>
    <dd class="publish"><a href="[LATEST]">[LATEST]</a></dd>

    <dt class="publish">Latest Editor's draft:</dt>
    <dd class="publish"><a href="http://dvcs.w3.org/hg/csswg/raw-file/tip/cssom/Overview.html">http://dvcs.w3.org/hg/csswg/raw-file/tip/cssom/Overview.html</a></dd>

    <dt class="dontpublish">Previous Version:</dt>
    <dd class="dontpublish"><a href="http://www.w3.org/TR/2011/WD-cssom-20110712/">http://www.w3.org/TR/2011/WD-cssom-20110712/</a></dd>
    <dd class="dontpublish"><a href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/">http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/</a></dd>

    <dt>Editors:</dt>
    <dd><a href="http://www.w3.org/wiki/User:Gadams">Glenn Adams</a>
    (<a href="http://www.cox.com/">Cox Communications, Inc.</a>)
    &lt;<a href="mailto:glenn.adams@cox.com">glenn.adams@cox.com</a>&gt;</dd>
    <dd><a>Shane Stephens</a>
    (<a href="http://www.google.com/">Google, Inc.</a>)
    &lt;<a href="mailto:shans@google.com">shans@google.com</a>&gt;</dd>

    <dt>Previous Editor:</dt>
    <dd><a href="http://annevankesteren.nl/">Anne van Kesteren</a>
    (<a href="http://www.opera.com/">Opera Software ASA</a>)
    &lt;<a href="mailto:annevk@opera.com">annevk@opera.com</a>&gt;</dd>
   </dl>

   <p class="dontpublish copyright"><a rel="license" href="http://creativecommons.org/publicdomain/zero/1.0/"><img src="http://i.creativecommons.org/p/zero/1.0/80x15.png" alt="CC0"/></a>
   To the extent possible under law, the editors have waived all copyright and
   related or neighboring rights to this work. In addition, as of
   [DATE: 01 Jan 1901], the editors have made this specification available
   under the <a rel="license" href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0">Open
   Web Foundation Agreement, Version 1.0</a>.</p>
   <div class="publish"><!--copyright--></div>

  </div>

  <hr class="top"/>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>CSSOM defines APIs (including generic parsing and serialization rules)
  for Media Queries, Selectors, and of course CSS itself.</p>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 class="no-num no-toc" id="sotd">Status of this Document</h2>

  <p><em>This section describes the status of this document at the time of
  its publication. Other documents may supersede this document. A list of
  current W3C publications and the latest revision of this technical report
  can be found in the
  <a href="http://www.w3.org/TR/">W3C technical reports index at http://www.w3.org/TR/.</a></em>

  </p><p class="dontpublish">This is the [DATE: 3 August 2002] [LONGSTATUS] of CSSOM. Please send comments to
  <a href="mailto:www-style@w3.org?subject=%5Bcssom%5D%20">www-style@w3.org</a>
  (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>)
  with <samp>[cssom]</samp> at the start of the subject line.

  </p><p class="publish">This is the [DATE] First Public Working Draft of CSSOM, produced by the
  <a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part
  of the <a href="http://www.w3.org/Style/">Style Activity</a>).
  <!--XXX remove "First Public" after initial publication -->

  </p><p>This document was produced by a group operating under the
  <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
  W3C maintains a
  <a href="http://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures</a>
  made in connection with the deliverables of the group; that page also
  includes instructions for disclosing a patent. An individual who has
  actual knowledge of a patent which the individual believes contains
  <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>
  must disclose the information in accordance with
  <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.</p>

  <p>Publication as a Working Draft does not imply endorsement by the W3C
  Membership. This is a draft document and may be updated, replaced or
  obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress.</p>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 class="no-num no-toc" id="toc">Table of Contents</h2>

  <!--toc-->

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 id="introduction">Introduction</h2>

  <p class="XXX">...</p>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3 id="history">History</h3>

  <p>Several interfaces from DOM Level 2 Style
  <a href="http://lists.w3.org/Archives/Public/www-style/2003Oct/0347.html" title="[CSSOM] CSSValue and related interfaces (message from the CSS WG)">have
  been obsoleted</a> because they were thought to be too awkward for
  frequent use. This specification no longer contains those features.
  <code>DOMImplementationCSS</code> and <code>CSSCharsetRule</code> have
  been removed as well as they were not deemed necessary.</p>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>Conformance</h2>

  <p>All diagrams, examples, and notes in this specification are
  non-normative, as are all sections explicitly marked non-normative.
  Everything else in this specification is normative.

  </p><p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
  NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
  "OPTIONAL" in the normative parts of this document are to be
  interpreted as described in RFC2119. For readability, these words do
  not appear in all uppercase letters in this specification.
  <span data-anolis-ref>RFC2119</span>

  </p><p>Requirements phrased in the imperative as part of algorithms
  (such as "strip any leading space characters" or "return false and
  terminate these steps") are to be interpreted with the meaning of the
  key word ("must", "should", "may", etc) used in introducing the
  algorithm.

  </p><p>Conformance requirements phrased as algorithms or specific steps
  may be implemented in any manner, so long as the end result is
  equivalent. (In particular, the algorithms defined in this
  specification are intended to be easy to follow, and not intended to
  be performant.)

  </p><p id="hardwareLimitations">User agents may impose
  implementation-specific limits on otherwise unconstrained inputs,
  e.g. to prevent denial of service attacks, to guard against running
  out of memory, or to work around platform-specific limitations.

  </p><p>When a method or an attribute is said to call another method or attribute, the user agent must invoke its internal API for that attribute or method so that e.g. the author can't change the behavior by overriding attributes or methods with custom properties or functions in ECMAScript.

  </p><p>Unless otherwise stated, string comparisons are done in a
  <span data-anolis-spec="dom">case-sensitive</span> manner.

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  </p><h2 id="terminology">Terminology</h2>

  <p>Terminology used in this specification is from
  <cite>DOM4</cite>,
  <cite>HTML</cite>,
  <cite>Associating Style Sheets with XML documents</cite>
  and
  <cite>XML</cite>
  <span data-anolis-ref>DOM</span>
  <span data-anolis-ref>HTML</span>
  <span data-anolis-ref>XMLSS</span>
  <span data-anolis-ref>XML</span>

  </p><p class="XXX"><dfn>supported styling language</dfn>

  </p><p>When this specification talks about object
  <code><var>A</var></code> where <code><var>A</var></code> is actually an interface, it generally means an object implementing interface
  <code><var>A</var></code>.</p>

  <p>The term <dfn id="whitespace">whitespace</dfn> is used as defined in CSS.
  <!--XXX <a href="#ref-css">[CSS]</a>--></p>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Common Serializing Idioms</h3>

  <p>To <dfn>serialize a character</dfn> means to create a string of
  "<code>\</code>" (U+005C), followed by the character.</p>

  <p>To <dfn>serialize a character as code point</dfn> means to create a
  string of "<code>\</code>" (U+005C), followed by the Unicode code point as
  the smallest possible number of hexadecimal digits in the range 0-9 a-f
  (U+0030 to U+0039 and U+0061 to U+0066) to represent the code point in
  base 16, followed by a space (U+0020).</p>

  <p>To <dfn>serialize an identifier</dfn> means to create a string represented
  by the concatenation of, for each character of the identifier:</p>

  <ul>
   <li>If the character is in the range U+0000 to U+001F or U+007F to
   U+009F, the character
   <span title="serialize a character as code point">escaped as code point</span>.</li>
   <li>If the character is the first character and is in the range 0-9
   (U+0030 to U+0039), the character
   <span title="serialize a character as code point">escaped as code point</span>.</li>
   <li>If the character is the second character and is in the range 0-9
   (U+0030 to U+0039) and the first character is a "<code>-</code>"
   (U+002D), the character
   <span title="serialize a character as code point">escaped as code point</span>.</li>
   <li>If the character is the second character and is "<code>-</code>"
   (U+002D) and the first character is "<code>-</code>" too, the
   <span title="serialize a character">escaped</span> character.</li>
   <li>If the character is not handled by one of the above rules and is
   greater than or equal to U+0080, is "<code>-</code>" (U+002D) or
   "<code>_</code>" (U+005F), or is in one of the ranges 0-9 (U+0030 to
   U+0039), A-Z (U+0041 to U+005A), or a-z (U+0061 to U+007A), the character
   itself.</li>
   <li>Otherwise, the <span title="serialize a character">escaped</span>
   character.</li>
  </ul>

  <p>To <dfn>serialize a string</dfn> means to create a string represented
  by '<code>"</code>' (U+0022), followed by the result of applying the rules
  below to each character of the given string, followed by
  '<code>"</code>' (U+0022):</p>

  <ul>
   <li>If the character is in the range U+0000 to U+001F or U+007F to
   U+009F, the character
   <span title="serialize a character as code point">escaped as code point</span>.</li>
   <li>If the character is '<code>"</code>' (U+0022) or '<code>\</code>'
   (U+005C), the <span title="serialize a character">escaped</span> character.</li>
   <li>Otherwise, the character itself.</li>
  </ul>

  <p class="note">"<code>'</code>" (U+0027) is not escaped because strings
  are always serialized with '<code>"</code>' (U+0022).</p>

  <p>To <dfn>serialize a URL</dfn> means to create a string represented by
  "<code>url(</code>", followed by the
  <span title="serialize a string">string escaped</span> value of the given
  string, followed by "<code>)</code>".</p>

  <p>To <dfn>serialize a comma-separated list</dfn> concatenate all items of
  the list in list order while separating them by "<code>,</code>" (U+002C),
  followed by a space (U+0020).</p>

  <p>To <dfn>serialize a whitespace-separated list</dfn> concatenate all
  items of the list in list order while separating them a space (U+0020).</p>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>Media Queries</h2>

  <p>Media queries are defined by the Media Queries specification. This
  section defines various concepts around media queries, including their API
  and serialization form.</p>

  <!-- XXX ref -->

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Parsing Media Queries</h3>

  <p>To
  <dfn id="parse-a-media-query-list">parse a media query list</dfn> for a
  given string <var>s</var> into a media query list is defined in
  the Media Queries specification. Return the list of one or more media
  queries that the algorithm defined there gives.</p> <!-- XXX ref -->

  <p class="note">A media query that ends up being "ignored" will turn
  into "<code>not all</code>".</p>

  <p>To
  <dfn id="parse-a-media-query">parse a media query</dfn> for a given string
  <var>s</var> means to follow the
  <span>parse a media query list</span> steps and return null if more
  than one media query is returned or a media query if a
  single media query is returned.</p>

  <p class="note">Again, a media query that ends up being "ignored" will
  turn into "<code>not all</code>".</p>

  <!-- ........................................................................................................................ -->

  <h3>Serializing Media Queries</h3>

  <p>To
  <dfn id="serialize-a-media-query-list">serialize a media query list</dfn>
  run these steps:</p>

  <ol>
   <li><p>If the media query list is empty return the empty string and
   terminate these steps.</p></li>

   <li><p><span title="serialize a media query">Serialize</span> each
   media query in the list of media queries, sort them in lexicographical
   order, and then
   <span title="serialize a comma-separated list">serialize</span> the
   list.</p></li>
  </ol>

  <p>To
  <dfn id="serialize-a-media-query">serialize a media query</dfn> let
  <var>s</var> be the empty string, run the steps below, and
  finally return <var>s</var>:</p>

  <ol>
   <li><p>If the media query is negated append "<code>not</code>", followed
   by a space (U+0020), to <var>s</var>.</p></li>

   <li><p>Let <var>type</var> be the media type of the media query,
   <span title="serialize an identifier">escaped</span> and
   <span data-anolis-spec="dom">converted to ASCII lowercase</span>.</p></li>

   <li><p>If the media query does not contain media features append
   <var>type</var>, to <var>s</var>,
   then return <var>s</var> and terminate this algorithm.</p></li>

   <li><p>If <var>type</var> is not "<code>all</code>" or if the
   media query is negated append <var>type</var>, followed by a
   space (U+0020), followed by "<code>and</code>", followed by a space
   (U+0020), to <var>s</var>.</p></li>

   <li><p>Sort the media features in lexicographical order.</p></li>

   <li>
    <p>Then, for each media feature:</p>

    <ol>
     <li>Append a "<code>(</code>" (U+0028), followed by the media feature
     name, <span data-anolis-spec="dom">converted to ASCII lowercase</span>,
     to <var>s</var>.<p></p></li>

     <li><p>If a value is given append a "<code>:</code>" (U+003A), followed
     by a space (U+0020), followed by the
     <span title="serialize a media feature value">serialized media feature value</span>,
     to <var>s</var>.</p></li>

     <li><p>Append a "<code>)</code>" (U+0029) to
     <var>s</var>.</p></li>

     <li><p>If this is not the last media feature append a space (U+0020),
     followed by "<code>and</code>", followed by a space (U+0020), to
     <var>s</var>.</p></li>
    </ol>
   </li>
  </ol>

  <div class="example">
   <p>Here are some examples of input (first column) and output (second
   column):</p>

   <table>
    <thead>
     <tr><th>Input</th><th>Output
    </th></tr></thead><tbody>
     <tr>
      <td><code>not screen and (min-WIDTH:5px) AND (max-width:40px  )</code>
      </td><td><code>not screen and (max-width: 40px) and (min-width: 5px)</code>
     </td></tr><tr>
      <td><code>all and (color) and (color)</code>
      </td><td><code>(color)</code>
   </td></tr></tbody></table>
  </div>


  <!-- ........................................................................................................................ -->

  <h4>Serializing Media Feature Values</h4>

  <p class="XXX">This should probably be done in terms of mapping it to
  serializing CSS values as media features are defined in terms of CSS
  values after all.</p>

  <p>To <dfn id="serialize-a-media-feature-value">serialize a media feature value</dfn>
  named <var>v</var> locate <var>v</var> in the first
  column of the table below and use the serialization format described in
  the second column:</p>

  <table>
   <tbody><tr>
    <th>Media Feature
    </th><th>Serialization
   </th></tr><tr>
    <td><code>width</code>
    </td><td>...
   </td></tr><tr>
    <td><code>height</code>
    </td><td>...
   </td></tr><tr>
    <td><code>device-width</code>
    </td><td>...
   </td></tr><tr>
    <td><code>device-height</code>
    </td><td>...
   </td></tr><tr>
    <td><code>orientation</code>
    </td><td>
     <p>If the value is `<code>portrait</code>`: "<code>portrait</code>".</p>
     <p>If the value is `<code>landscape</code>`: "<code>landscape</code>".</p>
   </td></tr><tr>
    <td><code>aspect-ratio</code>
    </td><td>...
   </td></tr><tr>
    <td><code>device-aspect-ratio</code>
    </td><td>...
   </td></tr><tr>
    <td><code>color</code>
    </td><td>...
   </td></tr><tr>
    <td><code>color-index</code>
    </td><td>...
   </td></tr><tr>
    <td><code>monochrome</code>
    </td><td>...
   </td></tr><tr>
    <td><code>resolution</code>
    </td><td>...
   </td></tr><tr>
    <td><code>scan</code>
    </td><td>
     <p>If the value is `<code>progressive</code>`: "<code>progressive</code>".</p>
     <p>If the value is `<code>interlace</code>`: "<code>interlace</code>".</p>
   </td></tr><tr>
    <td><code>grid</code>
    </td><td>...
  </td></tr></tbody></table>

  <p>Other specifications can extend this table and vendor-prefixed media
  features can have custom serialization formats as well.</p>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Comparing Media Queries</h3>

  <p>To
  <dfn id="compare-media-queries">compare media queries</dfn>
  <var>m1</var> and <var>m2</var> means to
  <span title="serialize a media query">serialize</span> them both and
  return true if they are a
  <span data-anolis-spec="dom">case-sensitive</span> match and false if they
  are not.</p>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>The <code>MediaList</code> Interface</h3>

  <p>An object that implements the <a class="idlType" href="#widl-def-MediaList"><code>MediaList</code></a> interface has an associated <dfn>collection of media queries</dfn>.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-MediaList">interface <span class="idlInterfaceID">MediaList</span> {
<span class="idlAttribute">    stringifier attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-MediaList-mediaText">mediaText</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-MediaList-length">length</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-MediaList-item-DOMString-unsigned-long-index">item</a></span> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-MediaList-appendMedium-void-DOMString-medium">appendMedium</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">medium</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-MediaList-deleteMedium-void-DOMString-medium">deleteMedium</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">medium</span></span>);</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-MediaList-mediaText">
<code>mediaText</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>mediaText</code> attribute must return a <span title='serialize a media query list'>serialization</span>   of the <span>collection of media queries</span>.</p>   <p>Setting the <code>mediaText</code> attribute must run these steps:   <ol>    <li><p>Empty the <span>collection of media queries</span>.</p></li>    <li><p>If the given value is the empty string terminate these steps.</p></li>    <li><p>Append all the media queries as a result of <span title='parse a media query list'>parsing</span> the given    value to the <span>collection of media queries</span>.</p></li>   </ol></dd>
<dt class="attribute" id="widl-MediaList-length">
<code>length</code> of type <span class="idlAttrType"><a>unsigned long</a></span>, readonly</dt>
<dd>
<p>The <code>length</code> attribute must return the number of media queries in the <span>collection of media queries</span>.</p></dd>
</dl>
<dl class="methods">
<dt class="method" id="widl-MediaList-item-DOMString-unsigned-long-index">
<code>item</code> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>item</code> method must return the media query in the <span>collection of media queries</span> given by   <var>index</var>, or null, if <var>index</var> is greater than or equal to the number of media queries in the   <span>collection of media queries</span>.</p></dd>
<dt class="method" id="widl-MediaList-appendMedium-void-DOMString-medium">
<code>appendMedium</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>appendMedium</code> method must run these steps:</p>   <ol>    <li><p>Let <var>m</var> be the result of <span title='parse a media query'>parsing</span> the given value.</p></li>    <li><p>If <var>m</var> is null terminate these steps.</p></li>    <li><p>If <span title='compare media queries'>comparing</span> <var>m</var> with any of the media queries in the    <span>collection of media queries</span> returns true terminate these steps.</p></li>    <li><p>Append <var>m</var> to the <span>collection of media queries</span>.</p></li>   </ol></dd>
<dt class="method" id="widl-MediaList-deleteMedium-void-DOMString-medium">
<code>deleteMedium</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>deleteMedium</code> method must run these steps:</p>   <ol>    <li><p>Let <var>m</var> be the result of <span title='parse a media query'>parsing</span> the given value.</p></li>    <li><p>If <var>m</var> is null terminate these steps.</p></li>    <li><p>Remove any media query from the <span>collection of media queries</span> for which    <span title='compare media queries'>comparing</span> the media query with <var>m</var> returns true.</p></li>   </ol></dd>
</dl>
<p>To <dfn id='create-a-medialist-object'>create a <code>MediaList</code> object</dfn> from a string <var>s</var>, run these steps:</p>   <ol>    <li><p>Create a new {@name} object.</p></li>    <li><p>Set its <span title='dom-MediaList-mediaText'>mediaText</span> attribute to <var>s</var>.</p></li>    <li><p>Return the newly created <code>{@name}</code> object.</p></li>   </ol>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>Selectors</h2>

  <p>Selectors are defined in the Selectors specification. This section
  mainly defines how to serialize them.</p> <!-- XXX ref -->

  <!-- XXX ref universal selector etc? some are in <span> some not -->

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Parsing Selectors</h3>

  <p>To
  <dfn id="parse-a-group-of-selectors">parse a group of selectors</dfn>
  means to parse the value using the <code>selectors_group</code>
  production defined in the Selectors specification and return either a
  group of selectors if parsing did not fail or null if parsing did
  fail.</p> <!-- XXX ref -->

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Serializing Selectors</h3>
  <!-- http://dump.testsuite.org/2009/cssom/serializing-selectors.htm -->

  <p>To
  <dfn id="serialize-a-group-of-selectors">serialize a group of selectors</dfn>
  <span title="serialize a selector">serialize</span> each selector in the
  group of selectors and then
  <span title="serialize a comma-separated list">serialize</span> the
  group.</p>

  <p>To <dfn id="serialize-a-selector">serialize a selector</dfn> let
  <var>s</var> be the empty string, run the steps below for each
  part of the chain of the selector, and finally return
  <var>s</var>:</p>

  <ol>
   <li><p>If there is only one <span>simple selector</span> in the
   <span>sequence of simple selectors</span> which is a
   <span>universal selector</span>, append the result of
   <span title="serialize a simple selector">serializing</span> the
   <span>universal selector</span> to <var>s</var>.</p></li>

   <li><p>Otherwise, for each <span>simple selector</span> in the
   <span>sequence of simple selectors</span> that is not a
   universal selector of which the <span>namespace prefix</span> maps to
   the null namespace (not in a namespace) or of which the
   <span>namespace prefix</span> maps to a namespace that is not the
   <span>default namespace</span>
   <span title="serialize a simple selector">serialize</span> the
   <span>simple selector</span> and append the result to
   <var>s</var>.</p></li>

   <li><p>If this is not the last part of the chain of the selector append a
   space (U+0020), followed by the combinator
   "<code>&gt;</code>",
   "<code>+</code>", or
   "<code>~</code>"
   as appropriate, followed by another space (U+0020) if the combinator was
   not whitespace, to <var>s</var>.</p></li>

   <li><p>If this is the last part of the chain of the selector and there is
   a pseudo-element, append "<code>::</code>" followed by the name of the
   pseudo-class, to <var>s</var>.</p></li>
  </ol>


  <p>To
  <dfn id="serialize-a-simple-selector">serialize a simple selector</dfn>
  let <var>s</var> be the empty string, run the steps below, and
  finally return <var>s</var>:</p>

  <dl class="switch">
   <dt>type selector</dt>
   <dt>universal selector</dt>
   <dd>
    <ol>
     <li><p>If the <span>namespace prefix</span> maps to a namespace that is
     not the <span>default namespace</span> and is not the
     null namespace (not in a namespace) append the
     <span title="serialize an identifier">escaped</span>
     <span>namespace prefix</span>, followed by a "<code>|</code>" (U+007C)
     to <var>s</var>.</p></li>

     <li><p>If the <span>namespace prefix</span> maps to a namespace that is
     the null namespace (not in a namespace) append
     "<code>|</code>" (U+007C) to <var>s</var>.</p></li>
     <!-- This includes |* -->

     <li><p>If this is a type selector append the
     <span title="serialize an identifier">escaped</span> element name to
     <var>s</var>.</p></li>

     <li><p>If this is a universal selector append "<code>*</code>" (U+002A)
     to <var>s</var>.</p></li>
    </ol>
   </dd>

   <dt>attribute selector</dt>
   <dd>
    <ol>
     <li><p>Append "<code>[</code>" (U+005B) to
     <var>s</var>.</p></li>

     <li><p>If the <span>namespace prefix</span> maps to a namespace that is
     not the null namespace (not in a namespace) append the
     <span title="serialize an identifier">escaped</span>
     <span>namespace prefix</span>, followed by a "<code>|</code>" (U+007C)
     to <var>s</var>.</p></li>

     <li><p>If the <span>namespace prefix</span> maps to a namespace that is
     the null namespace (not in a namespace) append
     "<code>|</code>" (U+007C) to <var>s</var>.</p></li>
     <!-- This includes |* -->

     <li><p>Append the <span title="serialize an identifier">escaped</span>
     attribute name to <var>s</var>.</p></li>

     <li><p>If there is an attribute value specified, append
     "<code>=</code>",
     "<code>~=</code>",
     "<code>|=</code>",
     "<code>^=</code>",
     "<code>$=</code>", or
     "<code>*=</code>"
     as appropriate (depending on the type of attribute selector), followed
     by the <span title="serialize a string">string escaped</span>
     attribute value, to <var>s</var>.</p></li>

     <li><p>Append "<code>]</code>" (U+005D) to
     <var>s</var>.</p></li>
    </ol>
   </dd>

   <dt>class selector</dt>
   <dd><p>Append a "<code>.</code>" (U+002E), followed by the
   <span title="serialize an identifier">escaped</span> class name to
   <var>s</var>.</p></dd>

   <dt>ID selector</dt>
   <dd><p>Append a "<code>#</code>" (U+0023), followed by the
   <span title="serialize an identifier">escaped</span> ID to
   <var>s</var>.</p></dd>

   <dt>pseudo-class</dt>
   <dd>
    <p>If the pseudo-class does not accept arguments append
    "<code>:</code>" (U+003A), followed by the name of the pseudo-class, to
    <var>s</var>.</p>

    <p>Otherwise, append "<code>:</code>" (U+003A), followed by the name of
    the pseudo-class, followed by "<code>(</code>" (U+0028), followed by the
    value of the pseudo-class argument determined as per below, followed by
    "<code>)</code>" (U+0029), to <var>s</var>.</p>

    <dl class="switch">
     <dt><code>:lang()</code></dt>
     <dd><p>The <span title="serialize an identifier">escaped</span>
     value.</p></dd>

     <dt><code>:nth-child()</code></dt>
     <dt><code>:nth-last-child()</code></dt>
     <dt><code>:nth-of-type()</code></dt>
     <dt><code>:nth-last-of-type()</code></dt>
     <dd>
      <ol>
       <li><p>If the value is odd let the value be
       "<code>2n+1</code>".</p></li>

       <li><p>If the value is even let the value be
       "<code>2n</code>".</p></li>

       <li><p>If <var>a</var> is zero let the value be
       <var>b</var>
       <span title="serialize a CSS component value">serialized</span> as &lt;integer&gt;.</p></li>

       <li><p>If <var>a</var> is one or minus one and
       <var>b</var> is zero let the value be
       "<code>n</code>" (U+006E).</p></li>

       <li><p>If <var>a</var> is one or minus one let the value be
       "<code>n</code>" (U+006E), followed by
       "<code>+</code>" (U+002B) if <var>b</var> is positive,
       followed by <var>b</var>
       <span title="serialize a CSS component value">serialized</span> as &lt;integer&gt;.</p></li>

       <li><p>If <var>b</var> is zero let the value be
       <var>a</var>
       <span title="serialize a CSS component value">serialized</span> as &lt;integer&gt;,
       followed by "<code>n</code>" (U+006E).</p></li>

       <li><p>Otherwise let the value be
       <var>a</var>
       <span title="serialize a CSS component value">serialized</span> as &lt;integer&gt;,
       followed by "<code>n</code>" (U+006E), followed by
       "<code>+</code>" (U+002B) if <var>b</var> is positive,
       followed by <var>b</var>
       <span title="serialize a CSS component value">serialized</span> as &lt;integer&gt;.</p></li>
      </ol>
     </dd>

     <dt><code>:not()</code></dt>
     <dd><p>The result of serializing the value using the rules for
     <span title="serialize a group of selectors">serializing a group of selectors</span>.</p></dd>
    </dl>
   </dd>
  </dl>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>CSS</h2>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Style Sheet</h3>

  <!-- XXX
   element inserted into the DOM, style sheet created, element removed from
   the DOM, what happens to StyleSheet?
  -->

  <p>A <dfn id="style-sheet">style sheet</dfn> is an abstract concept that
  represents a style sheet as defined by the CSS specification. In the DOM a
  <span>style sheet</span> is a <code>CSSStyleSheet</code> object. A
  <span>style sheet</span> has a number of associated properties:</p>

  <dl>
   <dt><dfn id="style-sheet-type">style sheet type</dfn></dt>
   <dd><p>The literal string "<code>text/css</code>".</p></dd>

   <dt><dfn id="style-sheet-location">style sheet location</dfn></dt>
   <dd><p>The <span data-anolis-spec="html">URL</span> of the
   <span>style sheet</span> or null if the <span>style sheet</span> was
   embedded.</p></dd>

   <dt><dfn id="style-sheet-parent">style sheet parent</dfn></dt>
   <dd><p>The <span>style sheet</span> that is the parent of the
   <span>style sheet</span>.</p></dd>

   <dt><dfn id="style-sheet-owner-node">style sheet owner node</dfn></dt>
   <dd><p>The DOM node associated with the <span>style sheet</span> or
   null if there is no associated DOM node.</p></dd>

   <dt><dfn id="style-sheet-owner-css-rule">style sheet owner CSS rule</dfn></dt>
   <dd><p>The <span>CSS rule</span> in the <span>style sheet parent</span>
   that caused the inclusion of the <span>style sheet</span> or null if
   there is no such <span>CSS rule</span>.</p></dd>

   <dt><dfn id="style-sheet-media">style sheet media</dfn></dt>
   <dd>
    <p>The <code>MediaList</code> object associated with the
    <span>style sheet</span>.</p>

    <p>If this property is set to a string run the
    <span>create a <code>MediaList</code> object</span> steps for that
    string and associate the returned object with the
    <span>style sheet</span>.</p>
   </dd>

   <dt><dfn id="style-sheet-title">style sheet title</dfn></dt>
   <dd>
    <p>The title of the <span>style sheet</span>. It is said to be empty
    if the title is the empty string.</p>

    <div class="example">
     <p>In these examples the <span>style sheet title</span> ends up being
     empty:</p>

     <pre>&lt;style&gt; body { background:papayawhip } &lt;/style&gt;</pre>

     <pre>&lt;style&gt; body { background:orange } &lt;/style&gt;</pre>
    </div>
   </dd>

   <dt><dfn id="style-sheet-alternate-flag">style sheet alternate flag</dfn></dt>
   <dd>
    <p>Either set or unset. Unset by default.</p>

    <div class="example">
     <p>The following <span title="style sheet">style sheets</span> have
     their <span>style sheet alternate flag</span> set:</p>

     <pre><code>&lt;?xml-stylesheet alternate="yes" title="x" href="data:text/css,…"?&gt;</code></pre>

     <pre><code>&lt;link rel="alternate stylesheet" title="x" href="data:text/css,…"&gt;</code></pre>
    </div>
   </dd>

   <dt><dfn id="style-sheet-disabled-flag">style sheet disabled flag</dfn></dt>
   <dd>
    <p>Either set or unset. Unset by default.</p>

    <p class="note">Even when unset it does not necessarily mean that the
    <span>style sheet</span> is actually used for rendering.</p>
   </dd>


   <dt><dfn id="style-sheet-css-rules">style sheet CSS rules</dfn></dt>
   <dd><p>The <span title="CSS rule">CSS rules</span> associated with the
   <span>style sheet</span>.</p></dd>
  </dl>

  <p>When you are to <span>create a style sheet</span> the above properties,
  with the exception of <span>style sheet type</span> and
  <span>style sheet CSS rules</span>, are to be set to
  their proper values.</p>

  <!-- same-origin restrictions -->

  <!-- ........................................................................................................................ -->

  <h4>The <code>StyleSheet</code> Interface</h4>

  <p>The <code>StyleSheet</code> interface represents an abstract, base style sheet.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-StyleSheet">interface <span class="idlInterfaceID">StyleSheet</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-type">type</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-href">href</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>Node</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-ownerNode">ownerNode</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>StyleSheet</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-parentStyleSheet">parentStyleSheet</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-title">title</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>MediaList</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-media">media</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>boolean</a></span> <span class="idlAttrName"><a href="#widl-StyleSheet-disabled">disabled</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-StyleSheet-type">
<code>type</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>type</code> attribute must return the <span>style sheet type</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-href">
<code>href</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>href</code> attribute must return the <span>style sheet location</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-ownerNode">
<code>ownerNode</code> of type <span class="idlAttrType"><a>Node</a></span>, readonly</dt>
<dd>
<p>The <code>ownerNode</code> attribute must return the <span>style sheet owner node</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-parentStyleSheet">
<code>parentStyleSheet</code> of type <span class="idlAttrType"><a>StyleSheet</a></span>, readonly</dt>
<dd>
<p>The <code>parentStyleSheet</code> attribute must return the <span>style sheet parent</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-title">
<code>title</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>title</code> attribute must return the <span>style sheet title</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-media">
<code>media</code> of type <span class="idlAttrType"><a>MediaList</a></span>, readonly</dt>
<dd>
<p>The <code>media</code> attribute must return the <span>style sheet media</span>.</p></dd>
<dt class="attribute" id="widl-StyleSheet-disabled">
<code>disabled</code> of type <span class="idlAttrType"><a>boolean</a></span></dt>
<dd>
<p>The <code>disabled</code> attribute must return true if the <span>style sheet disabled flag</span>    is set, or false otherwise.</p>    <p>Setting the <code>disabled</code> attribute must set the <span>style sheet disabled flag</span>    if the new value is true, or unset the <span>style sheet disabled flag</span> otherwise.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSStyleSheet</code> Interface</h4>

  <p>The <code>CSSStyleSheet</code> interface represents a CSS <span>style sheet</span> rule.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSStyleSheet">interface <span class="idlInterfaceID">CSSStyleSheet</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSRule</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleSheet-ownerRule">ownerRule</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSRuleList</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleSheet-cssRules">cssRules</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>unsigned long</a></span> <span class="idlMethName"><a href="#widl-CSSStyleSheet-insertRule-unsigned-long-DOMString-rule-unsigned-long-index">insertRule</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">rule</span></span>, <span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-CSSStyleSheet-deleteRule-void-unsigned-long-index">deleteRule</a></span> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSStyleSheet-ownerRule">
<code>ownerRule</code> of type <span class="idlAttrType"><a>CSSRule</a></span>, readonly</dt>
<dd>
<p>The <code>ownerRule</code> attribute must return the <span>style sheet owner CSS rule</span>.</p></dd>
<dt class="attribute" id="widl-CSSStyleSheet-cssRules">
<code>cssRules</code> of type <span class="idlAttrType"><a>CSSRuleList</a></span>, readonly</dt>
<dd>
<p>The <code>cssRules</code> attribute must return a <code>CSSRuleList</code> object representing the <span>style    sheet CSS rules</span>.</p>    <p class='note'>CSS rules that were dropped during parsing can not be    found using APIs described by this specification.</p></dd>
</dl>
<dl class="methods">
<dt class="method" id="widl-CSSStyleSheet-insertRule-unsigned-long-DOMString-rule-unsigned-long-index">
<code>insertRule</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>, <span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>unsigned long</a></span></dt>
<dd>
<p>The <code>insertRule</code> operation must <span>insert a CSS rule</span> <var>rule</var> the in CSS rule    list returned by <code title='dom-CSSStyleSheet-cssRules'>cssRules</code> at    <var>index</var>.</p></dd>
<dt class="method" id="widl-CSSStyleSheet-deleteRule-void-unsigned-long-index">
<code>deleteRule</code> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>deleteRule</code> operation must <span>remove a CSS rule</span> from the CSS rule list returned by    <code title='dom-CSSStyleSheet-cssRules'>cssRules</code> at <var>index</var>.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Style Sheet Collections</h3>

  <p>Below various new concepts are defined that are associated with each
  <code data-anolis-spec="dom">Document</code> object.</p>

  <p>Each <code data-anolis-spec="dom">Document</code> has an associated list of zero or more
  <span title="style sheet">style sheets</span>, named the
  <dfn id="document-style-sheets">document style sheets</dfn>. This is
  an ordered list that contains all
  <span title="style sheet">style sheets</span> associated with the
  <code data-anolis-spec="dom">Document</code>, in
  <span data-anolis-spec="dom" title="concept-tree-order">tree order</span>, with
  <span title="style sheet">style sheets</span> created from HTTP
  <code title="http-link">Link</code> headers first, if any, in header
  order.</p>

  <p>To <dfn id="create-a-style-sheet">create a style sheet</dfn>, run these
  steps:</p>

  <ol>
   <li><p>Create a new <span>style sheet</span> object and set its
   properties as specified.</p></li>

   <li><p>Then run the <span>add a style sheet</span> steps for the newly
   created <span>style sheet</span>.</p></li>
  </ol>

  <p>To <dfn id="add-a-style-sheet">add a style sheet</dfn>, run these
  steps:</p>

  <ol>
   <li><p>Add the <span>style sheet</span> to the list of
   <span>document style sheets</span> at the appropriate location. The
   remainder of these steps deal with the
   <span>style sheet disabled flag</span>.</p></li>

   <li><p>If the <span>style sheet disabled flag</span> is set, terminate
   these steps.</p></li>

   <li><p>If the <span>style sheet title</span> is non-empty, the
   <span>style sheet alternate flag</span> is unset, and
   <span>preferred style sheet set name</span> is the empty string
   <span>change the preferred style sheet set name</span> to the
   <span>style sheet title</span>.</p></li>

   <li>
    <p>If any of the following is true unset the
    <span>style sheet disabled flag</span> and terminate these steps:

    </p><ul>
     <li><p>The <span>style sheet title</span> is empty.</p></li>
     <li><p>The <span>last style sheet set name</span> is null and the
     <span>style sheet title</span> is a
     <span data-anolis-spec="dom">case-sensitive</span> match
     for the <span>preferred style sheet set name</span>.</p></li>
     <li><p>The <span>style sheet title</span> is a
     <span data-anolis-spec="dom">case-sensitive</span> match for the
     <span>last style sheet set name</span>.</p></li>
    </ul>
   </li>

   <li><p>Set the <span>style sheet disabled flag</span>.</p></li>
  </ol>

  <p>A <dfn id="persistent-style-sheet">persistent style sheet</dfn> is a
  <span>style sheet</span> from the <span>document style sheets</span>
  whose <span>style sheet title</span> is the empty string and whose
  <span>style sheet alternate flag</span> is unset.</p>

  <p>A <dfn id="style-sheet-set">style sheet set</dfn> is an ordered
  collection of one or more <span title="style sheet">style sheets</span>
  from the <span>document style sheets</span> which have an identical
  <span>style sheet title</span> that is not the empty string.</p>

  <p>A <dfn id="style-sheet-set-name">style sheet set name</dfn> is the
  <span>style sheet title</span> the <span>style sheet set</span> has in
  common.</p>

  <p>An <dfn id="enabled-style-sheet-set">enabled style sheet set</dfn> is a
  <span>style sheet set</span> of which each <span>style sheet</span> has
  its <span>style sheet disabled flag</span> unset.</p>

  <p>To <dfn id="enable-a-style-sheet-set">enable a style sheet set</dfn>
  with name <var>name</var>, run these steps:</p>

  <ol>
   <li><p>If <var>name</var> is the empty string, set the
   <span>style sheet disabled flag</span> for each <span>style sheet</span>
   that is in a <span>style sheet set</span> and terminate these steps.</p></li>

   <li><p>Unset the <span>style sheet disabled flag</span> for each
   <span>style sheet</span> in a <span>style sheet set</span> whose
   <span>style sheet set name</span> is a
   <span data-anolis-spec="dom">case-sensitive</span> match for
   <var>name</var> and set it for all other
   <span title="style sheet">style sheets</span> in a
   <span>style sheet set</span>.</p></li>
  </ol>

  <p>To <dfn id="select-a-style-sheet-set">select a style sheet set</dfn>
  with name <var>name</var>, run these steps:</p>

  <ol>
   <li><p><span>Enable a style sheet set</span> with name
   <var>name</var>.</p></li>

   <li><p>Set <span>last style sheet set name</span> to
   <var>name</var>.</p></li>
  </ol>

  <p>A <dfn id="last-style-sheet-set-name">last style sheet set name</dfn>
  is a concept to determine what <span>style sheet set</span> was last
  <span title="select a style sheet set">selected</span>. Initially its
  value is null.</p>

  <p>A
  <dfn id="preferred-style-sheet-set-name">preferred style sheet set name</dfn>
  is a concept to determine which
  <span title="style sheet">style sheets</span> need to have their
  <span>style sheet disabled flag</span> unset. Initially its value
  is the empty string.

  </p><p>To
  <dfn id="change-the-preferred-style-sheet-set-name">change the preferred style sheet set name</dfn>
  with name <var>name</var>, run these steps:</p>

  <ol>
   <li><p>Let the <span>preferred style sheet set name</span> be
   <var>current</var>.</p></li>

   <li><p>Set <span>preferred style sheet set name</span> to
   <var>name</var>.</p></li>

   <li><p>If <var>name</var> is not a
   <span data-anolis-spec="dom">case-sensitive</span> match for
   <var>current</var> and
   <span>last style sheet set name</span> is null
   <span>enable a style sheet set</span> with name
   <var>new</var>.</p></li>
  </ol>

  <!-- XXX ought to define "applied"

  thoughts:
    depends on disabled flag, alternate flag, media queries, sheesh
   -->

  <!-- ........................................................................................................................ -->

  <h4>The HTTP <code>Default-Style</code> Header</h4>

  <p>The HTTP <code title="http-default-style">Default-Style</code> header
  can be used to set the <span>preferred style sheet set name</span>
  influencing which <span>style sheet set</span> is (initially) the
  <span>enabled style sheet set</span>.</p>

  <p>For each HTTP <code title="http-default-style">Default-Style</code>
  header, in header order, the user agent must
  <span>change the preferred style sheet set name</span> with name being the
  value of the header.</p>

  <!-- ........................................................................................................................ -->

  <h4>The <code>StyleSheetList</code> Sequence</h4>

  <p>The <code>StyleSheetList</code> sequence represents an ordered collection of <span title='style sheets'>style sheets</span>.</p>
<pre class="idl">[[TBD - TYPEDEF]]
</pre>


  <!-- ........................................................................................................................ -->

  <h4>Extensions to the <code>Document</code> Interface</h4>

  
<pre class="idl"><span class="idlInterface" id="widl-def-Document">partial interface <span class="idlInterfaceID">Document</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>StyleSheetList</a></span> <span class="idlAttrName"><a href="#widl-Document-styleSheets">styleSheets</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-Document-selectedStyleSheetSet">selectedStyleSheetSet</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-Document-lastStyleSheetSet">lastStyleSheetSet</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-Document-preferredStyleSheetSet">preferredStyleSheetSet</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMStringList</a></span> <span class="idlAttrName"><a href="#widl-Document-styleSheetSets">styleSheetSets</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-Document-enableStyleSheetsForSet-void-DOMString-name">enableStyleSheetsForSet</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a>?</span> <span class="idlParamName">name</span></span>);</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-Document-styleSheets">
<code>styleSheets</code> of type <span class="idlAttrType"><a>StyleSheetList</a></span>, readonly</dt>
<dd>
<p>The <code>styleSheets</code> attribute must return a <code>StyleSheetList</code> sequence representing    the <span>document style sheets</span>.</p>    <p class='note'>Because of historical IDL limitations the <code>styleSheets</code> attribute    used to be on a separate interface, <code>DocumentStyle</code>.</p></dd>
<dt class="attribute" id="widl-Document-selectedStyleSheetSet">
<code>selectedStyleSheetSet</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>selectedStyleSheetSet</code> attribute must, on getting, must run these steps:</p>    <ol>      <li><p>If there is a single <span>enabled style sheet set</span> and no      other <span>document style sheets</span> with a non-empty      <span>style sheet title</span> have the      <span>style sheet disabled flag</span> unset, return the      <span>style sheet set name</span> of the      <span>enabled style sheet set</span> and terminate these steps.</li>            <li><p>Otherwise, if <span title='style sheet'>style sheets</span> from      different <span title='style sheet set'>style sheet sets</span> have      their <span>style sheet disabled flag</span> unset, return      null and terminate these steps.</li>            <li>       <p>Otherwise, return the empty string.</p>             <p class='note'>At this point either all       <span title='style sheet'>style sheets</span> with a non-empty       <span>style sheet title</span> have the       <span>style sheet disabled flag</span> set, or there are no such       <span title='style sheet'>style sheets</span>.</p>      </li>     </ol>        <p>On setting the    <code title='dom-Document-selectedStyleSheetSet'>selectedStyleSheetSet</code>    attribute these steps must be run:</p>        <ol>      <li><p>If the value is null terminate this set of steps.</p></li>      <li><p>Otherwise, <span>select a style sheet set</span> with as name the      value passed.</p></li>    </ol>        <p>From the DOM's perspective, all views have the same    <code title='dom-Document-selectedStyleSheetSet'>selectedStyleSheetSet</code>.    If a user agent supports multiple views with different selected    alternative style sheets, then this attribute (and the    <code>StyleSheet</code> interface's    <code title='dom-StyleSheet-disabled'>disabled</code> attribute)    must return and set the value for the default    view.</p></dd>
<dt class="attribute" id="widl-Document-lastStyleSheetSet">
<code>lastStyleSheetSet</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>lastStyleSheetSet</code> attribute must  return the <span>last style sheet set name</span>.</p>    <p class='note'>This attribute is initially null.</p></dd>
<dt class="attribute" id="widl-Document-preferredStyleSheetSet">
<code>preferredStyleSheetSet</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>preferredStyleSheetSet</code> attribute must  return the <span>preferred style sheet set name</span>.</p>    <p class='note'>Unlike <code title='dom-Document-lastStyleSheetSet'>lastStyleSheetSet</code>,    this attribute is initially the empty string.</p></dd>
<dt class="attribute" id="widl-Document-styleSheetSets">
<code>styleSheetSets</code> of type <span class="idlAttrType"><a>DOMStringList</a></span>, readonly</dt>
<dd>
<p>The <code>styleSheetSets</code> attribute must  return a list of the <span title='style sheet set name'>style    sheet set names</span> of the <span title='style sheet set'>style sheet sets</span>, in order    of the <span>document style sheets</span>.</p></dd>
</dl>
<dl class="methods">
<dt class="method" id="widl-Document-enableStyleSheetsForSet-void-DOMString-name">
<code>enableStyleSheetsForSet</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a>?</span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>enableStyleSheetsForSet</code> operation must, when invoked, run these steps:</p>    <ol>      <li><p>If <var>name</var> is null terminate these steps.</p></li>      <li><p><span>Enable a style sheet set</span> with name <var>name</var>.</p></li>    </ol>    <p class='note'><span title='Style sheet'>Style sheets</span> with an    empty <span>style sheet title</span> are never affected by this method.    This method does not change the values of the    <code title='dom-Document-lastStyleSheetSet'>lastStyleSheetSet</code> or    <code title='dom-Document-preferredStyleSheetSet'>preferredStyleSheetSet</code> attributes.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>Interaction with the User Interface</h4>

  <p>The user interface of Web browsers that support style sheets
  should list the style sheet titles given in the
  <code title="dom-Document-styleSheetSets">styleSheetSets</code> list,
  showing the
  <code title="dom-Document-selectedStyleSheetSet">selectedStyleSheetSet</code>
  as the selected style sheet set, leaving none selected if it is
  null or the empty string, and selecting an extra option
  "Basic Page Style" (or similar) if it is the empty string and the
  <code title="dom-Document-preferredStyleSheetSet">preferredStyleSheetSet</code>
  is the empty string as well.</p>

  <p>Selecting a style sheet from this list should
  use the <span>select a style sheet set</span> set of steps. This
  (by definition) affects the
  <code title="dom-Document-lastStyleSheetSet">lastStyleSheetSet</code>
  attribute.</p>

  <h5>Persisting the selected style sheet set</h5>

  <p>If a user agent persist the selected style sheet set, they should use
  the value of the
  <code title="dom-Document-selectedStyleSheetSet">selectedStyleSheetSet</code>
  attribute, or if that is null, the
  <code title="dom-Document-lastStyleSheetSet">lastStyleSheetSet</code>
  attribute, when leaving the page (or at some other time) to determine the
  set name to store. If that is null then the style sheet set should not be
  persisted.</p>

  <p>When re-setting the style sheet set to the persisted value (which can
  happen at any time, typically at the first time the style sheets are
  needed for styling the document, after the <code>&lt;head&gt;</code> of
  the document has been parsed, after any scripts that are not dependent on
  computed style have executed), the style sheet set
  should be set by using the
  <span>select a style sheet set</span> set of steps as if the user had
  selected the set manually.</p>

  <p class="note">This specification does not give any suggestions on
  how user agents should decide to persist the style sheet set or whether or
  how to persist the selected set across pages.</p>

  <!-- XXX this UI section suggests we may want to introduce a few more
       idioms -->

  <!-- ........................................................................................................................ -->

  <h4>Examples</h4>

  <div class="example">
   <p>Thus, in the following HTML snippet:</p>

   <pre>&lt;link rel="alternate stylesheet" title="foo" href="a"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="b"&gt;
&lt;script&gt;

  document.selectedStyleSheetSet = 'foo';
  document.styleSheets[1].disabled = false;
&lt;/script&gt;
&lt;link rel="alternate stylesheet" title="foo" href="c"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="d"&gt;</pre>

   <p>...the style sheets that end up enabled are style sheets "a", "b",
   and "c", the
   <code title="dom-Document-selectedStyleSheetSet">selectedStyleSheetSet</code>
   attribute would return null,
   <code title="dom-Document-lastStyleSheetSet">lastStyleSheetSet</code>
   would return "foo", and
   <code title="dom-Document-preferredStyleSheetSet">preferredStyleSheetSet</code>
   would return the empty string.</p>

   <p>Similarly, in the following HTML snippet:</p>

   <pre>&lt;link rel="alternate stylesheet" title="foo" href="a"&gt;
&lt;link rel="alternate stylesheet" title="bar" href="b"&gt;
&lt;script&gt;
  var before = document.preferredStyleSheetSet;
  document.styleSheets[1].disabled = false;
&lt;/script&gt;
&lt;link rel="stylesheet" title="foo" href="c"&gt;

&lt;link rel="alternate stylesheet" title="bar" href="d"&gt;
&lt;script&gt;
  var after = document.preferredStyleSheetSet;
&lt;/script&gt;</pre>

   <p>...the "before" variable will be equal to the empty string, the
   "after" variable will be equal to "foo", and style sheets "a" and "c"
   will be enabled. This is the case even though the first script block
   sets style sheet "b" to be enabled, because upon parsing the
   following <code>&lt;link&gt;</code> element, the
   <code title="dom-Document-preferredStyleSheetSet">preferredStyleSheetSet</code>
   is set and the
   <code title="dom-Document-enableStyleSheetsForSet">enableStyleSheetsForSet()</code>
   method is called (since
   <code title="dom-Document-selectedStyleSheetSet">selectedStyleSheetSet</code>
   was never set
   explicitly, leaving
   <code title="dom-Document-lastStyleSheetSet">lastStyleSheetSet</code> at
   null throughout), which changes which style sheets are enabled and which
   are not.</p>
  </div>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Style Sheet Association</h3>

  <p>This section defines the interface a
  <span>style sheet owner node</span> of a <span>style sheet</span> has to
  implement and defines the requirements for
  <span data-anolis-spec="xmlss" title="xml-stylesheet processing instruction">xml-stylesheet processing instructions</span>
  and HTTP <code title="http-link">Link</code> headers when the link
  relation type is an
  <span data-anolis-spec="dom">ASCII case-insensitive</span> match for
  "<code>stylesheet</code>" since nobody else was interested in
  defining this.</p>

  <p class="note">The editor is in good hope that HTML and SVG will define the
  appropriate processing in their respective specifications, in terms of
  this specification, in due course.</p>


  <!-- ........................................................................................................................ -->

  <h4>The <code>LinkStyle</code> Interface</h4>

  <p>The <dfn id='associated-style-sheet'>associated style sheet</dfn> of a node is the <span>style sheet</span> in the list of  <span>document style sheets</span> of which the <span>style sheet owner node</span> implements the <code>LinkStyle</code> interface.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-LinkStyle">interface <span class="idlInterfaceID">LinkStyle</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>StyleSheet</a></span> <span class="idlAttrName"><a href="#widl-LinkStyle-sheet">sheet</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-LinkStyle-sheet">
<code>sheet</code> of type <span class="idlAttrType"><a>StyleSheet</a></span>, readonly</dt>
<dd>
<p>The <code>sheet</code> attribute must return the <span>associated style sheet</span> for the node, or null,    if there is no <span>associated style sheet</span>.</p></dd>
</dl>


  <div class="example">
   <p>In the following HTML snippet the first HTML <code>style</code>
   element has a <code>sheet</code> attribute that returns a
   <code>StyleSheet</code> object representing the style sheet, but for
   the second <code>style</code> attribute it returns null.
   (Assuming the user agent supports CSS (<code>text/css</code>) and does
   not support ExampleSheets (<code>text/example-sheets</code>).</p>

   <pre>&lt;style type=text/css&gt; body { background:lime } &lt;/style&gt;
&lt;style type=text/example-sheets&gt; $(body).background := lime &lt;/style&gt;</pre>
  </div>

  <p class="note">Whether or not the node refers to a style sheet is defined
  by the specification that defines the semantics of said node.</p>

  <!-- ........................................................................................................................ -->

  <h4>Requirements on specifications</h4>

  <p>Specifications introducing new ways of associating style sheets through
  the DOM should define which nodes implement the
  <code>LinkStyle</code> interface. When doing so, they
  must also define when a <span>style sheet</span> is
  <span title="create a style sheet">created</span>.</p>




  <!-- ........................................................................................................................ -->

  <h4>Requirements on User Agents Implementing the
  <span><code>xml-stylesheet</code> processing instruction</span></h4>

  <!-- XXX load/error events, reparse -->

  
<pre class="idl">[[TBD - IMPLEMENTS]]
</pre>


  <!--
  <pre class="idl"><span data-anolis-spec=dom>ProcessingInstruction</span> implements <span>LinkStyle</span>;</pre>
  -->

  <p>For each
  <span data-anolis-spec="xmlss"><code>xml-stylesheet</code> processing instruction</span>
  that is not part of the
  <span data-anolis-spec="xml">document type declaration</span> and has an
  <code>href</code>
  <span data-anolis-spec="xmlss">pseudo-attribute</span> these steps must
  (unless otherwise stated) be run:</p>

  <ol>
   <li><p>Let <var>title</var> be the value of the
   <code>title</code> <span data-anolis-spec="xmlss">pseudo-attribute</span> or the empty string if the
   <code>title</code> <span data-anolis-spec="xmlss">pseudo-attribute</span> is not specified.</p></li>

   <li><p>If there is an <code>alternate</code> <span data-anolis-spec="xmlss">pseudo-attribute</span>
   whose value is a <span data-anolis-spec="dom">case-sensitive</span> match
   for "<code>yes</code>" and <var>title</var> is the
   empty string terminate these steps.</p></li>

   <li><p>If there is a <code>type</code> <span data-anolis-spec="xmlss">pseudo-attribute</span> whose
   value is not a <span>supported styling language</span> the user agent
   may terminate these steps.</p></li>

   <li><p><span data-anolis-spec="html" title="Resolve a URL">Resolve</span>
   the <span data-anolis-spec="html">URL</span> specified by the
   <code>href</code> <span data-anolis-spec="xmlss">pseudo-attribute</span> and then
   <span data-anolis-spec="html">fetch</span> it.</p></li>

   <li>
    <p>When the resource is available, the document is in
    <span data-anolis-spec="dom" title="concept-quirks-mode">quirks mode</span>
    and the
    <span data-anolis-spec="html">Content-Type metadata</span> of
    the resource is not a <span>supported styling language</span> change the
    <span data-anolis-spec="html">Content-Type metadata</span> of the resource
    to <code>text/css</code>.</p>

    <p class="note">This step might never actually happen, but is included
    here in case other specifications change, to keep things consistent.</p>
   </li>

   <li><p>If the resource is not in a
   <span>supported styling language</span> terminate these steps.</p></li>

   <li>
    <p><span>Create a style sheet</span> with the following properties:</p>

    <dl>
     <dt><span>style sheet location</span></dt>
     <dd><p>The <span data-anolis-spec="html">absolute URL</span> of the
     resource.</p></dd>

     <dt><span>style sheet parent</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet owner node</span></dt>
     <dd><p>The node.</p></dd>

     <dt><span>style sheet owner CSS rule</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet media</span></dt>
     <dd><p>The value of the <code>media</code> <span data-anolis-spec="xmlss">pseudo-attribute</span>
     if any, or the empty string otherwise.</p></dd>

     <dt><span>style sheet title</span></dt>
     <dd><p><var>title</var></p></dd>

     <dt><span>style sheet alternate flag</span></dt>
     <dd><p>Set if the <code>alternate</code> <span data-anolis-spec="xmlss">pseudo-attribute</span>
     value is a <span data-anolis-spec="dom">case-sensitive</span> match for
     "<code>yes</code>", or unset otherwise.
    </p></dd></dl>
   </li>
  </ol>



  <!-- ........................................................................................................................ -->

  <h4>Requirements on User Agents Implementing the HTTP
  <code>Link</code> Header</h4>

  <!-- XXX ref, one day -->

  <!-- XXX deal with media param -->

  <p>For each HTTP <code title="http-link">Link</code> header of which one
  of the link relation types is an
  <span data-anolis-spec="dom">ASCII case-insensitive</span> match
  for "<code>stylesheet</code>" these steps
  must be run:</p>

  <ol>
   <li><p>Let <var>title</var> be the value of the first of all the
   <code>title</code> and <code>title*</code> parameters.
   If there are no such parameters it is the empty string.</p></li>

   <li><p>If one of the (other) link relation types is an
   <span data-anolis-spec="dom">ASCII case-insensitive</span> match for
   "<code>alternate</code>" and <var>title</var> is the
   empty string terminate these steps.</p></li>

   <li><p><span data-anolis-spec="html" title="Resolve a URL">Resolve</span>
   the specified <span data-anolis-spec="html">URL</span> and
   <span data-anolis-spec="html">fetch</span> it.</p></li>

   <li><p>When the resource is available, the document is in
   <span data-anolis-spec="dom" title="concept-quirks-mode">quirks mode</span>
   and the <span data-anolis-spec="html">Content-Type metadata</span> of
   the resource is not a <span>supported styling language</span> change the
   <span data-anolis-spec="html">Content-Type metadata</span> of the resource
   to <code>text/css</code>.</p></li>

   <li><p>If the resource is not in a
   <span>supported styling language</span> terminate these steps.</p></li>

   <li>
    <p><span>Create a style sheet</span> with the following properties:</p>

    <dl>
     <dt><span>style sheet location</span></dt>
     <dd><p>The <span data-anolis-spec="html">absolute URL</span> of the
     resource.</p></dd>

     <dt><span>style sheet owner node</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet parent</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet owner node</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet owner CSS rule</span></dt>
     <dd><p>null</p></dd>

     <dt><span>style sheet media</span></dt>
     <dd><p>The value of the first <code>media</code> parameter.</p></dd>
     <!-- XXX register media parameter? bah -->

     <dt><span>style sheet title</span></dt>
     <dd><p><var>title</var></p></dd>

     <dt><span>style sheet alternate flag</span></dt>
     <dd><p>Set if one of the specified link relation type for this HTTP
     <code title="http-link">Link</code> header is an
     <span data-anolis-spec="dom">ASCII case-insensitive</span> match for
     "<code>alternate</code>", or false otherwise.
    </p></dd></dl>
   </li>
  </ol>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>CSS Rules</h3>

  <p>To <dfn>parse a CSS rule</dfn> ...</p>

  <p>To <dfn>serialize a CSS rule</dfn> depends on the type of CSS rule, as
  follows:</p>

  <dl class="switch">
   <dt><code>CSSStyleRule</code></dt>
   <dd class="XXX">...</dd>

   <dt><code>CSSImportRule</code></dt>
   <dd>
    <p>The result of concatenating these strings:</p>
    <ol>
     <li>The literal string "<code>@import</code>", followed by a space
     (U+0020), followed by the <span title="serialize a URL">URL escaped</span>
     value of the <code title="dom-CSSImportRule-href">href</code>
     attribute.</li>
     <li>If the associated <code>MediaList</code> object is not empty, a
     space (U+0020), followed by the value of the
     <code title="dom-MediaList-mediaText">mediaText</code> attribute of the
     associated <code>MediaList</code> object.</li>
     <li>A "<code>;</code>" (U+003B).</li>
    </ol>
   </dd>

   <dt><code>CSSMediaRule</code></dt>
   <dd class="XXX">...</dd>

   <dt><code>CSSFontFaceRule</code></dt>
   <dd class="XXX">...</dd>

   <dt><code>CSSPageRule</code></dt>
   <dd class="XXX">...</dd>

   <dt><code>CSSNamespaceRule</code></dt>
   <dd><p>The literal string "<code>@namespace</code>", followed by a space
   (U+0020), followed by the
   <span title="serialize an identifier">identifier escaped</span> value of the
   <code title="dom-CSSNamespaceRule-prefix">prefix</code> attribute (if
   any), followed by a space (U+0020) if there is a prefix, followed by the
   <span title="serialize a URL">URL escaped</span> value of the
   <code title="dom-CSSNamespaceRule-namespaceURI">namespaceURI</code>
   attribute, followed the character "<code>;</code>" (U+003B).</p></dd>
  </dl>

  <p>To <dfn>insert a CSS rule</dfn> <var>rule</var> into a
  CSS rule list <var>list</var> at location
  <var>index</var> follow these steps:</p>

  <ol>
   <li><p>If <var>index</var> is negative or greater than the
   length of the <var>list</var>,
   <span data-anolis-spec="dom" title="concept-throw">throw</span> an
   "<code data-anolis-spec="dom">IndexSizeError</code>" exception and
   terminate these steps.</p></li>

   <li><p><span title="Parse a CSS rule">Parse</span>
   <var>rule</var>.</p></li>

   <li><p>If parsing failed terminate these steps.</p></li>

   <li><p>If the new object can not be inserted within the
   <var>list</var> at the given <var>index</var> due to
   limitations of the CSS specification,
   <span data-anolis-spec="dom" title="concept-throw">throw</span> an
   "<code data-anolis-spec="dom">HierarchyRequestError</code>" exception and
   terminate these steps.</p></li>

   <li><p>Insert the new object at the given <var>index</var>
   within the <var>list</var>.</p></li>
  </ol>

  <p>To <dfn>remove a CSS rule</dfn> from CSS rule list
  <var>list</var> at location <var>index</var> follow
  these steps:</p>

  <ol>
   <li><p>If <var>index</var> is negative or greater than the
   length of the <var>list</var>
   <span data-anolis-spec="dom" title="concept-throw">throw</span> an
   "<code data-anolis-spec="dom">IndexSizeError</code>" exception and terminate these steps.</p></li>

   <li><p>Remove the object at <var>index</var> from
   <var>list</var>.</p></li>
  </ol>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSRuleList</code> Sequence</h4>

  <p>The <code>CSSRuleList</code> sequence represents an ordered collection of CSS style rules.</p>
<pre class="idl">[[TBD - TYPEDEF]]
</pre>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSRule</code> Interface</h4>

  <p>The <code>CSSRule</code> interface represents an abstract, base CSS style rule. Each  distinct CSS style rule type is represented by a distinct interface that  inherits from this interface.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSRule">interface <span class="idlInterfaceID">CSSRule</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-STYLE_RULE">STYLE_RULE</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-IMPORT_RULE">IMPORT_RULE</a></span> = <span class="idlConstValue">3</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-MEDIA_RULE">MEDIA_RULE</a></span> = <span class="idlConstValue">4</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-FONT_FACE_RULE">FONT_FACE_RULE</a></span> = <span class="idlConstValue">5</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-PAGE_RULE">PAGE_RULE</a></span> = <span class="idlConstValue">6</span>;</span>
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-CSSRule-NAMESPACE_RULE">NAMESPACE_RULE</a></span> = <span class="idlConstValue">10</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-CSSRule-type">type</a></span>;</span>
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSRule-cssText">cssText</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSRule</a></span> <span class="idlAttrName"><a href="#widl-CSSRule-parentRule">parentRule</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleSheet</a></span> <span class="idlAttrName"><a href="#widl-CSSRule-parentStyleSheet">parentStyleSheet</a></span>;</span>
};</span></pre>
<dl class="constants">
<dt class="constant" id="widl-CSSRule-STYLE_RULE">
<code>STYLE_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 1</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>STYLE_RULE</code>, then the object that implements    this interface must implement the <code>CSSStyleRule</code> interface.</p></dd>
<dt class="constant" id="widl-CSSRule-IMPORT_RULE">
<code>IMPORT_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 3</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>IMPORT_RULE</code>, then the object that implements    this interface must implement the <code>CSSImportRule</code> interface.</p></dd>
<dt class="constant" id="widl-CSSRule-MEDIA_RULE">
<code>MEDIA_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 4</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>MEDIA_RULE</code>, then the object that implements    this interface must implement the <code>CSSMediaRule</code> interface.</p></dd>
<dt class="constant" id="widl-CSSRule-FONT_FACE_RULE">
<code>FONT_FACE_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 5</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>FONT_FACE_RULE</code>, then the object that implements    this interface must implement the <code>CSSFontFaceRule</code> interface.</p></dd>
<dt class="constant" id="widl-CSSRule-PAGE_RULE">
<code>PAGE_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 6</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>PAGE_RULE</code>, then the object that implements    this interface must implement the <code>CSSPageRule</code> interface.</p></dd>
<dt class="constant" id="widl-CSSRule-NAMESPACE_RULE">
<code>NAMESPACE_RULE</code> of type <span class="idlConstType"><a>unsigned short</a></span>, with value 10</dt>
<dd>
<p>When the value of the <code>type</code> attribute is <code>NAMESPACE_RULE</code>, then the object that implements    this interface must implement the <code>CSSNamespaceRule</code> interface.</p></dd>
</dl>
<dl class="attributes">
<dt class="attribute" id="widl-CSSRule-type">
<code>type</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt>
<dd>
<p>The <code>type</code> attribute must return one of the following values:     <code>STYLE_RULE</code>,     <code>IMPORT_RULE</code>,     <code>MEDIA_RULE</code>,     <code>FONT_FACE_RULE</code>,     <code>PAGE_RULE</code>,     <code>NAMESPACE_RULE</code>,     or a registered extension value.    </p>    <p>The values 0 and 2, formerly known as <code>UNKNOWN_RULE</code> and <code>CHARSET_RULE</code>, respectively, are made     obsolete by this specification. These values will not be re-allocated in the future and shall remain reserved.</p>    <p class='note'>Constants for new and proprietary rule types are coordinated     on the <a href='http://wiki.csswg.org/spec/cssom-constants'>CSSOM Constants</a> wiki page.</p></dd>
<dt class="attribute" id="widl-CSSRule-cssText">
<code>cssText</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>cssText</code> attribute must return a <span title='serialize a CSS rule'>serialization</span> of the    <span>CSS rule</span>.</p>    <p>On setting the <code>cssText</code> attribute these steps must be run:</p>    <ol>     <li><p><span title='Parse a CSS rule'>Parse</span> the value.</p></li>     <li><p>If parsing failed terminate this algorithm.</p></li>     <li><p>If the <code title='dom-CSSRule-type'>type</code> of the new     object does not match the <code title='dom-CSSRule-type'>type</code> of     the current object     <span data-anolis-spec=dom title=concept-throw>throw</span> an     '<code data-anolis-spec=dom>InvalidModificationError</code>' exception.</li>     <li><p>Replace the current object with the new object.</p></li>    </ol></dd>
<dt class="attribute" id="widl-CSSRule-parentRule">
<code>parentRule</code> of type <span class="idlAttrType"><a>CSSRule</a></span>, readonly</dt>
<dd>
<p>The <code>parentRule</code> attribute must return the nearest enclosing rule of the current rule or null, if    there is no enclosing rule.</p>    <p class='note'>For example, <code>@media</code> can enclose a rule.</p></dd>
<dt class="attribute" id="widl-CSSRule-parentStyleSheet">
<code>parentStyleSheet</code> of type <span class="idlAttrType"><a>CSSStyleSheet</a></span>, readonly</dt>
<dd>
<p>The <code>parentStyleSheet</code> attribute must return the <code>CSSStyleSheet</code> object that contains the the    current rule.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSStyleRule</code> Interface</h4>

  <p>The <code>CSSStyleRule</code> interface represents a rule set.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSStyleRule">interface <span class="idlInterfaceID">CSSStyleRule</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleRule-selectorText">selectorText</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleDeclaration</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleRule-style">style</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSStyleRule-selectorText">
<code>selectorText</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>selectorText</code> attribute, on getting, must return the result of <span title='serialize a group of selectors'>serializing</span> the associated    <span>group of selectors</span>.</p>    <p>On setting the <code>selectorText</code> attribute these steps must be run:</p>    <ol>      <li><p>Run the <span>parse a group of selectors</span> algorithm on the given value.</p></li>      <li><p>If the algorithm returns a non-null value replace the associated <span>group of selectors</span> with the returned value.</p></li>      <li><p>Otherwise, if the algorithm returns a null value, do nothing.</p></li>    </ol></dd>
<dt class="attribute" id="widl-CSSStyleRule-style">
<code>style</code> of type <span class="idlAttrType"><a>CSSStyleDeclaration</a></span>, readonly</dt>
<dd>
<p>The <code>style</code> attribute must return a <code>CSSStyleDeclaration</code> object for the rule set.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSImportRule</code> Interface</h4>

  <p>The <code>CSSImportRule</code> interface represents an <code>@import</code> rule.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSImportRule">interface <span class="idlInterfaceID">CSSImportRule</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSImportRule-href">href</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>MediaList</a></span> <span class="idlAttrName"><a href="#widl-CSSImportRule-media">media</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleSheet</a></span> <span class="idlAttrName"><a href="#widl-CSSImportRule-styleSheet">styleSheet</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSImportRule-href">
<code>href</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>href</code> attribute must return the <span>URL</span> specified by the <code>@import</code> rule.</p>    <p class='note'>To get the resolved <span>URL</span> use the <code title='dom-StyleSheet-href'>href</code>    attribute of the associated <span>style sheet</span>.</p></dd>
<dt class="attribute" id="widl-CSSImportRule-media">
<code>media</code> of type <span class="idlAttrType"><a>MediaList</a></span>, readonly</dt>
<dd>
<p>The <code>media</code> attribute must return the value of the <code title='dom-StyleSheet-media'>media</code>    attribute of the associated <span>style sheet</span>.</p></dd>
<dt class="attribute" id="widl-CSSImportRule-styleSheet">
<code>styleSheet</code> of type <span class="idlAttrType"><a>CSSStyleSheet</a></span>, readonly</dt>
<dd>
<p>The <code>styleSheet</code> attribute must return the associated <span>style sheet</span>.</p>    <p class='note'>If loading of the style sheet fails its <code title='dom-CSSStyleSheet-cssRules'>cssRules</code>    list is simply empty, i.e., an <code>@import</code> rule always has an associated <span>style sheet</span>.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSMediaRule</code> Interface</h4>

  <p>The <code>CSSMediaRule</code> interface represents a <code>@media</code> rule.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSMediaRule">interface <span class="idlInterfaceID">CSSMediaRule</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>MediaList</a></span> <span class="idlAttrName"><a href="#widl-CSSMediaRule-media">media</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSRuleList</a></span> <span class="idlAttrName"><a href="#widl-CSSMediaRule-cssRules">cssRules</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>unsigned long</a></span> <span class="idlMethName"><a href="#widl-CSSMediaRule-insertRule-unsigned-long-DOMString-rule-unsigned-long-index">insertRule</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">rule</span></span>, <span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-CSSMediaRule-deleteRule-void-unsigned-long-index">deleteRule</a></span> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSMediaRule-media">
<code>media</code> of type <span class="idlAttrType"><a>MediaList</a></span>, readonly</dt>
<dd>
<p>The <code>media</code> attribute must return a <code>MediaList</code> object for the list of media queries specified    with the <code>@media</code> rule.</p></dd>
<dt class="attribute" id="widl-CSSMediaRule-cssRules">
<code>cssRules</code> of type <span class="idlAttrType"><a>CSSRuleList</a></span>, readonly</dt>
<dd>
<p>The <code>cssRules</code> attribute must return a <code>CSSRuleList</code> object for the list of CSS rules specified    with the <code>@media</code> rule.</p></dd>
</dl>
<dl class="methods">
<dt class="method" id="widl-CSSMediaRule-insertRule-unsigned-long-DOMString-rule-unsigned-long-index">
<code>insertRule</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>, <span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>unsigned long</a></span></dt>
<dd>
<p>The <code>insertRule</code> operation must <span>insert a CSS rule</span> <var>rule</var> into the CSS rule list    returned by <code title='dom-CSSMediaRule-cssRules'>cssRules</code> at <var>index</var>.</p></dd>
<dt class="method" id="widl-CSSMediaRule-deleteRule-void-unsigned-long-index">
<code>deleteRule</code> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>deleteRule</code> operation must <span>remove a CSS rule</span> from the CSS rule list returned by    <code title='dom-CSSMediaRule-cssRules'>cssRules</code> at <var>index</var>.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSFontFaceRule</code> Interface</h4>

  <p>The <code>CSSFontFaceRule</code> interface represents a <code>@font-face</code> rule.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSFontFaceRule">interface <span class="idlInterfaceID">CSSFontFaceRule</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleDeclaration</a></span> <span class="idlAttrName"><a href="#widl-CSSFontFaceRule-style">style</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSFontFaceRule-style">
<code>style</code> of type <span class="idlAttrType"><a>CSSStyleDeclaration</a></span>, readonly</dt>
<dd>
<p>The <code>style</code> attribute must return a <code>CSSStyleDeclaration</code> block that contains the property    declarations specified within the <code>@font-face</code> rule.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSPageRule</code> Interface</h4>
 
  <p>The <code>CSSPageRule</code> interface represents a <code>@page</code> rule.</p>  <p class='note'>Need to define the rules for  <dfn id='parse-a-css-page-selector'>parse a CSS page selector</dfn> and  <dfn id='serialize-a-css-page-selector'>serialize a CSS page selector</dfn>.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSPageRule">interface <span class="idlInterfaceID">CSSPageRule</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSPageRule-selectorText">selectorText</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleDeclaration</a></span> <span class="idlAttrName"><a href="#widl-CSSPageRule-style">style</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSPageRule-selectorText">
<code>selectorText</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>selectorText</code> attribute, on getting, must return the result of <span title='serialize a CSS page selector'>serializing</span>    the associated <span>CSS page selector</span>.</p>    <p>On setting the <code>selectorText</code> attribute these steps must be run:</p>    <ol>    <li><p>Run the <span>parse a CSS page selector</span> algorithm on the given value.</p></li>    <li><p>If the algorithm returns a non-null value replace the associated <span>CSS page selector</span> with the returned value.</p></li>    <li><p>Otherwise, if the algorithm returns a null value, do nothing.</p></li>    </ol></dd>
<dt class="attribute" id="widl-CSSPageRule-style">
<code>style</code> of type <span class="idlAttrType"><a>CSSStyleDeclaration</a></span>, readonly</dt>
<dd>
<p>The <code>style</code> attribute must return a <code>CSSStyleDeclaration</code> for the <code>@page</code> rule.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSNamespaceRule</code> Interface</h4>

  <p>The <code>CSSNamespaceRule</code> interface represents a <code>@namespace</code> rule.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSNamespaceRule">interface <span class="idlInterfaceID">CSSNamespaceRule</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSNamespaceRule-namespaceURI">namespaceURI</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-CSSNamespaceRule-prefix">prefix</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSNamespaceRule-namespaceURI">
<code>namespaceURI</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>namespaceURI</code> attribute must return the namespace of the <code>@namespace</code> rule.</p></dd>
<dt class="attribute" id="widl-CSSNamespaceRule-prefix">
<code>prefix</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly</dt>
<dd>
<p>The <code>prefix</code> attribute must return the prefix of the <code>@namespace</code> rule or the    empty string if there is no prefix.</p></dd>
</dl>


  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>CSS Declaration Blocks</h3>

  <p>A <dfn>CSS declaration block</dfn> is an ordered collection of CSS
  properties with their associated values, also named CSS declarations. In
  the DOM a <span>CSS declaration block</span> is a
  <code>CSSStyleDeclaration</code> object. A
  <span>CSS declaration block</span> has two associated properties:</p>

  <dl>
   <dt><dfn>CSS declaration block readonly flag</dfn></dt>
   <dd><p>Unset if the object can be manipulated. Set if it can not be
   manipulated. Unless otherwise stated it is unset.</p></dd>

   <dt><dfn>CSS declaration block declarations</dfn></dt>
   <dd><p>The CSS declarations associated with the object.</p></dd>
  </dl>

  <p class="note">The <span>CSS declaration block declarations</span> are
  ordered. This matters for the
  <code title="dom-CSSStyleDeclaration-item">item()</code> method.</p>


  <p class="XXX">To
  <dfn id="parse-a-css-declaration-block">parse a CSS declaration block</dfn>
  ...</p>

  <p class="XXX">To
  <dfn id="serialize-a-css-declaration-block">serialize a CSS declaration block</dfn>
  ...</p>



  <!-- ........................................................................................................................ -->

  <h4>The <code>CSSStyleDeclaration</code> Interface</h4>

  <p>The <code>CSSStyleDeclaration</code> interface represents a <span>CSS declaration block</span>, including its underlying state, where this    underlying state depends upon the source of the <code>CSSStyleDeclaration</code> instance.</p>
<pre class="idl"><span class="idlInterface" id="widl-def-CSSStyleDeclaration">interface <span class="idlInterfaceID">CSSStyleDeclaration</span> {
<span class="idlAttribute">    attribute <span class="idlAttrType"><a>DOMString</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleDeclaration-cssText">cssText</a></span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned long</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleDeclaration-length">length</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-CSSStyleDeclaration-item-DOMString-unsigned-long-index">item</a></span> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span> <span class="idlParamName">index</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-CSSStyleDeclaration-getPropertyValue-DOMString-DOMString-property">getPropertyValue</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">property</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-CSSStyleDeclaration-getPropertyPriority-DOMString-DOMString-property">getPropertyPriority</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">property</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-CSSStyleDeclaration-setProperty-void-DOMString-property-DOMString-value-DOMString-priority">setProperty</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">property</span></span>, <span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">value</span></span>, <span class="idlParam">optional <span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">priority</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-CSSStyleDeclaration-removeProperty-DOMString-DOMString-property">removeProperty</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">property</span></span>);</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSRule</a></span> <span class="idlAttrName"><a href="#widl-CSSStyleDeclaration-parentRule">parentRule</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-CSSStyleDeclaration-cssText">
<code>cssText</code> of type <span class="idlAttrType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>cssText</code> attribute must return the result of <span title='serialize a CSS declaration block'>serializing</span> the    <span>CSS declaration block declarations</span>.</p>    <p>Setting the <code>cssText</code> attribute must run these steps:    <ol>      <li><p>If the <span>CSS declaration block readonly flag</span> is set, <span data-anolis-spec=dom title=concept-throw>throw</span> a        <code data-anolis-spec=dom>NoModificationAllowedError</code> exception and terminate these steps.</li>      <li><p>Empty the <span>CSS declaration block declarations</span>.</li>      <li><p><span title='Parse a CSS declaration block'>Parse</span> the given value and, if the return value is not null, insert it into the        <span>CSS declaration block declarations</span>.</p></li>    </ol></dd>
<dt class="attribute" id="widl-CSSStyleDeclaration-length">
<code>length</code> of type <span class="idlAttrType"><a>unsigned long</a></span>, readonly</dt>
<dd>
<p>The <code>length</code> attribute must return the number of declarations in the <span>collection of CSS declarations</span>.</p></dd>
<dt class="attribute" id="widl-CSSStyleDeclaration-parentRule">
<code>parentRule</code> of type <span class="idlAttrType"><a>CSSRule</a></span>, readonly</dt>
<dd>
<p>The <code>parentRule</code> attribute must return the <code>CSSrule</code> object the <code>CSSStyleDeclaration</code> is object is associated with    or null if it is not associated with a <code>CSSrule</code> object.</p></dd>
</dl>
<dl class="methods">
<dt class="method" id="widl-CSSStyleDeclaration-item-DOMString-unsigned-long-index">
<code>item</code> (<span class="idlParam"><span class="idlParamType"><a>unsigned long</a></span></span>), returns <span class="idlMethType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>item</code> operation must return the property at position <var>index</var>.</p></dd>
<dt class="method" id="widl-CSSStyleDeclaration-getPropertyValue-DOMString-DOMString-property">
<code>getPropertyValue</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>getPropertyValue</code> operation must ...</p></dd>
<dt class="method" id="widl-CSSStyleDeclaration-getPropertyPriority-DOMString-DOMString-property">
<code>getPropertyPriority</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>getPropertyPriority</code> operation, when invoked, if <var>property</var> is an <span data-anolis-spec=dom>ASCII case-insensitive</span>    match for a property that has a priority user agents must return the canonical priority of that property as given in the    syntax definition. Otherwise, the empty string must be returned.</p>    <p class='example'>E.g. for <code>background-color:lime !IMPORTANT</code> the return value would be '<code>important</code>'.</p></dd>
<dt class="method" id="widl-CSSStyleDeclaration-setProperty-void-DOMString-property-DOMString-value-DOMString-priority">
<code>setProperty</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>, <span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>, <span class="idlParam">optional <span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>void</a></span></dt>
<dd>
<p>The <code>setProperty</code> operation must run these steps:</p>    <ol>      <li><p>If the <span>CSS declaration block readonly flag</span> is set, <span data-anolis-spec=dom title=concept-throw>throw</span>        an '<code data-anolis-spec=dom>NoModificationAllowedError</code>' and terminate these steps.</li>      <li><p>If <var>property</var> is not an <span data-anolis-spec=dom>ASCII case-insensitive</span> match for a supported property,        terminate this algorithm.</p></li>      <li><p>If <var>value</var> is the empty string, invoke <code title='dom-CSSStyleDeclaration-removeProperty'>removeProperty()</code>        with <var>property</var> as argument and terminate this algorithm.</p></li>      <li><p>If the <var>priority</var> argument has been omitted let <var>priority</var> be the empty string.</p></li>      <li><p>If <var>priority</var> is neither a valid priority nor the empty string terminate this algorithm.</p></li>      <li>        <p>If <span title='parse a CSS value'>parsing the <var>value</var></span> returns null terminate this algorithm.        <p class='note'><var>value</var> can not include '<code>!important</code>'.</p>      </li>      <li><p>Finally, set <var>property</var> to <var>value</var> with priority <var>priority</var> when <var>priority</var>        is not the empty string. Otherwise set <var>property</var> to <var>value</var>.</p></li>    </ol></dd>
<dt class="method" id="widl-CSSStyleDeclaration-removeProperty-DOMString-DOMString-property">
<code>removeProperty</code> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>DOMString</a></span></dt>
<dd>
<p>The <code>removeProperty</code> operation must run these steps:</p>    <ol>     <li><p>If the <span>CSS declaration block readonly flag</span> is set, <span data-anolis-spec=dom title=concept-throw>throw</span> a       '<code data-anolis-spec=dom>NoModificationAllowedError</code>' and terminate these steps.</li>     <li><p>If <var>property</var> is an <span data-anolis-spec=dom>ASCII case-insensitive</span> match for a property of a declaration in the       <span>collection of CSS declarations</span> remove the declaration.</p></li>    </ol></dd>
</dl>


  <hr/>

  <p>For the table below, the IDL attribute in the first column
  must return the result of invoking
  <code title="dom-CSSStyleDeclaration-getPropertyValue">getPropertyValue()</code>
  with as argument the CSS property given in the second column on the same
  row.</p>

  <p>Similarly for the table below, setting the IDL attribute in the
  first column must invoke
  <code title="dom-CSSStyleDeclaration-setProperty">setProperty()</code>
  with as first argument the CSS property given in the second column on the
  same row, as second argument the given value, and no third argument. Any
  exceptions thrown must be re-thrown.</p>

  <table>
   <thead>
    <tr>
     <th>IDL attribute
     </th><th>CSS property
   </th></tr></thead><tbody>
<!--CSSOM-DECLARATIONTABLE-->
  </tbody></table>

<!--
  <h4>CSS Properties</h4>

  <p>The DOM attribute name of a CSS property can be found by using the
  following algorithm:</p>

  <ol>
   <li>Let <var>r</var> be the CSS property to be
   converted.</li>

   <li>Uppercase the first character after every U+002D (<code>-</code>) in
   <var>r</var>.</li>

   <li>Remove every U+002D (<code>-</code>) in <var>r</var>.</li>

   <li>Return <var>r</var>.</li>
  </ol>

  <p class="note">This means that
  <code>-<var>vendor</var>-<var>property</var></code>
  becomes
  <code><var><strong>V</strong>endor</var><var><strong>P</strong>roperty</var></code>
  for instance.</p>
-->

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>CSS Values</h3>

  <!-- ........................................................................................................................ -->

  <h4>Parsing CSS Values</h4>

  <p>To <dfn id="parse-a-css-value">parse a CSS value</dfn> for a given
  <var>property</var> means to a parse the given value according to
  the definition of the property that is an
  <span data-anolis-spec="dom">ASCII case-insensitive</span> match for
  <var>property</var> in the CSS specification. If the given value
  is <span>ignored</span> return null. Otherwise return the CSS value for
  the given <var>property</var>.</p>

  <p class="note">"<code>!important</code>" declarations are not
  part of the property value space and will therefore cause
  <span>parse a CSS value</span> to return null.</p>


  <!-- ........................................................................................................................ -->

  <h4>Serializing CSS Values</h4>

  <!-- based on http://damowmow.com/playground/canon.txt -->

  <p>To <dfn id="serialize-a-css-value">serialize a CSS value</dfn> follow
  these rules:</p>

  <ul>
   <li><p><span title="Serialize a CSS component value">Serialize</span> any
   CSS component values in the value.</p></li>

   <li><p>Where multiple CSS component values can appear in any order
   without changing the meaning of the value (typically represented by a
   double bar <code>||</code> in the value syntax), use the order as given
   in the syntax.</p></li>
   <!-- <code>&lt;border-width> &lt;border-style> &lt;color></code>
   for <code>border</code> -->

   <li>
    <p>Where CSS component values of the value can be omitted without
    changing the meaning of the value (e.g. initial values in shorthand
    properties), omit them. If this would remove all the values, then
    include the first allowed value.</p>

    <p class="example">E.g. <code>margin: 20px 20px</code> becomes
    <code>margin: 20px</code>.</p>

    <p class="example">E.g. the value <code>0</code> for the
    '<code>border</code>' property.</p>
   </li>

   <li><p>If the value of a shorthand property is requested and it cannot be
   computed because the properties associated with the shorthand have values
   that cannot be represented by the shorthand the serialization is the
   empty string.</p></li>

   <li><p>If a value has a <span>whitespace</span>-separated list of
   CSS component values,
   <span title="serialize a whitespace-separated list">serialize</span> the
   value as a whitespace-separated list.</p></li>

   <li><p>If a value has a comma-separated list of
   CSS component values,
   <span title="serialize a comma-separated list">serialize</span> the
   value as a comma-separated list.</p></li>
  </ul>


  <p>To
  <dfn id="serialize-a-css-value-component">serialize a CSS component value</dfn>
  depends on the component, as follows:</p>

  <dl class="switch">
   <dt>keyword</dt>
   <dd><p>The keyword
   <span data-anolis-spec="dom">converted to ASCII lowercase</span>.</p></dd>

   <dt>&lt;angle&gt;</dt>
   <dd><p>The number of degrees serialized as per &lt;number&gt; followed by
   the literal string "<code>deg</code>".</p></dd>

   <dt>&lt;color&gt;</dt>
   <dd><p class="XXX">preserve system colors, maybe color keywords...</p></dd>
   <!--
     <dt>It is a system color</dt>

     <dd>See below (you use the representation given in the specification that
     defines the keyword).</dd>

     <dt>Alpha component is equal to 1.0</dt>

     <dd>The color is an uppercase six-digit hexadecimal value, prefixed with a
     <code>#</code> character (U+0023 NUMBER SIGN), with the first two digits
     representing the red component, the next two digits representing the green
     component, and the last two digits representing the blue component, the
     digits being in the range 0-9 A-F (U+0030 to U+0039 and U+0041 to
     U+0046).</dd>

     <dt>Alpha component is less than 1.0</dt>

     <dd>The color is in the CSS <code>rgba()</code> functional-notation format:
     the literal string <code>rgba</code> (U+0072 U+0067 U+0062 U+0061) followed
     by a U+0028 LEFT PARENTHESIS, a <span>color component integer</span>
     representing the red component, a <span>color component separator</span>, a
     <span>color component integer</span> for the green component, a <span>color
     component separator</span>, a <span>color component integer</span> for the
     blue component, another <span>color component separator</span> a U+0030
     DIGIT ZERO, a U+002E FULL STOP (representing the decimal point), one or
     more digits in the range 0-9 (U+0030 to U+0039) representing the fractional
     part of the alpha value, and finally a U+0029 RIGHT PARENTHESIS.</dd>

     <dt>The keyword <code>transparent</code> is used</dt>

     <dd>The color is <code>rgba(0, 0, 0, 0)</code>.</dd>
   -->

   <dt>&lt;counter&gt;</dt>
   <dd>
    <p>The concatenation of:</p>
    <ol>
     <li><p>If &lt;counter&gt; has three CSS component values the string
     "<code>counters(</code>".</p></li>
     <li><p>If &lt;counter&gt; has two CSS component values the string
     "<code>counter(</code>".</p></li>
     <li><p>The result of
     <span title="serialize a comma-separated list">serializing</span> the
     <span title="serialize a CSS component value">serialized</span>
     CSS component values belonging to &lt;counter&gt; as list while omitting
     the last CSS component value if it is 'decimal'.</p></li>
     <li><p>"<code>)</code>" (U+0029).</p></li>
    </ol>
   </dd>

   <dt>&lt;frequency&gt;</dt>
   <dd><p>The frequency in hertz serialized as per &lt;number&gt; followed by
   the literal string "<code>hz</code>".</p></dd>

   <dt>&lt;identifier&gt;</dt>
   <dd><p>The identifier
   <span title="serialize an identifier">escaped</span>.</p></dd>

   <dt>&lt;integer&gt;</dt>
   <dd><p>A base-ten integer using digits 0-9 (U+0030 to U+0039) in the
   shortest form possible, preceded by "<code>-</code>" (U+002D) if it is
   negative.</p></dd>

   <dt>&lt;length&gt;</dt>
   <dd>
    <p>A length of zero is represented by the literal string
    "<code>0px</code>".</p>

    <p>Absolute lengths: the number of millimeters serialized as per
    &lt;number&gt; followed by the literal string "<code>mm</code>".
    <span class="XXX">Rumor has it absolute lengths will become relative
    lengths. Centimeters would be compatible with &lt;resolution&gt;...</span></p>

    <p>Relative lengths: the &lt;number&gt; component serialized as per
    &lt;number&gt; followed by the unit in its canonical form as defined in its
    respective specification.</p>
   </dd>

   <dt>&lt;number&gt;</dt>
   <dd><p class="XXX">Browsers seem to use ToString(), but that might give a
   significand which according to some is teh evil (and also currently does
   not parse correctly).</p></dd>

   <dt>&lt;percentage&gt;</dt>
   <dd><p>The &lt;number&gt; component serialized as per &lt;number&gt; followed
   by the literal string "<code>%</code>" (U+0025).</p></dd>

   <dt>&lt;resolution&gt;</dt>
   <dd><p>The resolution in dots per centimeter serialized as per
   &lt;number&gt; followed by the literal string "<code>dpcm</code>".</p></dd>

   <dt>&lt;shape&gt;</dt>
   <dd><p>The string "<code>rect(</code>", followed by the result
   of <span title="serialize a comma-separated list">serializing</span> the
   <span title="serialize a CSS component value">serialized</span>
   CSS component values belonging to &lt;shape&gt; as list, followed by
   "<code>)</code>" (U+0029).</p></dd>

   <dt>&lt;string&gt;</dt>
   <dt>&lt;family-name&gt;</dt>
   <dt>&lt;specific-voice&gt;</dt>
   <dd><p>The string
   <span title="serialize a string">string escaped</span>.</p></dd>

   <dt>&lt;time&gt;</dt>
   <dd><p>The time in seconds serialized as per &lt;number&gt; followed by
   the literal string "<code>s</code>".</p></dd>

   <dt>&lt;uri&gt;</dt>
   <dd><p>The <span data-anolis-spec="html">absolute URL</span>
   <span title="serialize a URL">URL escaped</span>.</p></dd>
  </dl>

  <p>
   &lt;absolute-size&gt;,
   &lt;border-width&gt;,
   &lt;border-style&gt;,
   &lt;bottom&gt;,
   &lt;generic-family&gt;,
   &lt;generic-voice&gt;,
   &lt;left&gt;,
   &lt;margin-width&gt;,
   &lt;padding-width&gt;,
   &lt;relative-size&gt;,
   &lt;right&gt;, and
   &lt;top&gt;,
   are considered macros by this specification. They all represent instances
   of components outlined above.</p>

  <p class="XXX">One idea is that we can remove this section somewhere in
  the CSS3/CSS4 timeline by moving the above definitions to the drafts that
  define the CSS components.</p>


  <h5>Examples</h5>

  <p>Here are some examples of before and after results on specified values.
  The before column could be what the author wrote in a style sheet, while
  the after column shows what querying the DOM would return.</p>

  <div class="example">
   <table>
    <thead>
     <tr><th>Before</th><th>After
    </th></tr></thead><tbody>
     <tr><td><code>background: none</code></td><td><code>background: rgba(0, 0, 0, 0)</code>
     </td></tr><tr><td><code>outline: none</code></td><td><code>outline: invert</code>
     </td></tr><tr><td><code>border: none</code></td><td><code>border: medium</code>
     </td></tr><tr><td><code>list-style: none</code></td><td><code>list-style: disc</code>
     </td></tr><tr><td><code>margin: 0 1px 1px 1px</code></td><td><code>margin: 0px 1px 1px</code>
     </td></tr><tr><td><code>azimuth: behind left</code></td><td><code>azimuth: 220deg</code>
     </td></tr><tr><td><code>font-family: a, 'b"', serif</code></td><td><code>font-family: "a", "b\"", serif</code>
     </td></tr><tr><td><code>content: url('h)i') '\[\]'</code></td><td><code>content: url("h)i") "[]"</code>
     </td></tr><tr><td><code>azimuth: leftwards</code></td><td><code>azimuth: leftwards</code>
     </td></tr><tr><td><code>color: rgb(18, 52, 86)</code></td><td><code>color: #123456</code>
     </td></tr><tr><td><code>color: rgba(000001, 0, 0, 1)</code></td><td><code>color: #000000</code>
   </td></tr></tbody></table>

   <p class="XXX">Some of these need to be updated per the new rules.</p>
  </div>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>DOM Access to CSS Declaration Blocks</h2>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>The <code>ElementCSSInlineStyle</code> Interface</h3>

  The <code>ElementCSSInlineStyle</code> interface is implemented by <code>Element</code> objects in order to provide access to inline style properties.
<pre class="idl"><span class="idlInterface" id="widl-def-ElementCSSInlineStyle">interface <span class="idlInterfaceID">ElementCSSInlineStyle</span> {
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>CSSStyleDeclaration</a></span> <span class="idlAttrName"><a href="#widl-ElementCSSInlineStyle-style">style</a></span>;</span>
};</span></pre>
<dl class="attributes">
<dt class="attribute" id="widl-ElementCSSInlineStyle-style">
<code>style</code> of type <span class="idlAttrType"><a>CSSStyleDeclaration</a></span>, readonly</dt>
<dd>
The <code>style</code> attribute must return a mutable <code>CSSStyleDeclaration</code> object    that represents the inline style properties of the associated <code>Element</code> instance.</dd>
</dl>


  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3>Extensions to the <code>Window</code> Interface</h3>

  
<pre class="idl"><span class="idlInterface" id="widl-def-Window">partial interface <span class="idlInterfaceID">Window</span> {
<span class="idlMethod">    <span class="idlMethType"><a>CSSStyleDeclaration</a></span> <span class="idlMethName"><a href="#widl-Window-getComputedStyle-CSSStyleDeclaration-Element-elt">getComputedStyle</a></span> (<span class="idlParam"><span class="idlParamType"><a>Element</a></span> <span class="idlParamName">elt</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>CSSStyleDeclaration</a></span> <span class="idlMethName"><a href="#widl-Window-getComputedStyle-CSSStyleDeclaration-Element-elt-DOMString-pseudoElt">getComputedStyle</a></span> (<span class="idlParam"><span class="idlParamType"><a>Element</a></span> <span class="idlParamName">elt</span></span>, <span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">pseudoElt</span></span>);</span>
};</span></pre>
<dl class="methods">
<dt class="method" id="widl-Window-getComputedStyle-CSSStyleDeclaration-Element-elt">
<code>getComputedStyle</code> (<span class="idlParam"><span class="idlParamType"><a>Element</a></span></span>), returns <span class="idlMethType"><a>CSSStyleDeclaration</a></span></dt>
<dt class="method" id="widl-Window-getComputedStyle-CSSStyleDeclaration-Element-elt-DOMString-pseudoElt">
<code>getComputedStyle</code> (<span class="idlParam"><span class="idlParamType"><a>Element</a></span></span>, <span class="idlParam"><span class="idlParamType"><a>DOMString</a></span></span>), returns <span class="idlMethType"><a>CSSStyleDeclaration</a></span></dt>
<dd>
<p>The <code>getComputedStyle</code> operation must run these steps:</p>    <ol>      <li><p>Let <var>doc</var> be the      <code data-anolis-spec=dom>Document</code>      associated with the <code data-anolis-spec=html>Window</code> object on      which the method was invoked.</p></li>      <li><p>Let <var>obj</var> be <var>elt</var>.</p></li>      <li><p>If <var>pseudoElt</var> is as an      <span data-anolis-spec=dom>ASCII case-insensitive</span> match for      either '<code>:before</code>' or '<code>::before</code>' let      <var>obj</var> be the '::before' pseudo-element of      <var>elt</var>.</p></li>      <li><p>If <var>pseudoElt</var> is as an      <span data-anolis-spec=dom>ASCII case-insensitive</span> match for      either '<code>:after</code>' or '<code>::after</code>' let      <var>obj</var> be the '::after' pseudo-element of      <var>elt</var>.</p></li>      <li>       <p>Return a <span>CSS declaration block</span> with the       <span>CSS declaration block readonly flag</span> set and the       <span>CSS declaration block declarations</span> set to all properties       the user agent supports with as value the <span>resolved value</span>       computed for <var>obj</var> using the style rules associated       with <var>doc</var>.</p>       <p class='note'>This means that even if <var>obj</var> is in a       different document (e.g. one fetched via <code>XMLHttpRequest</code>) it       will still use the style rules associated with the document that is       associated with the global object on which       <code title='dom-Window-getComputedStyle'>getComputedStyle()</code> was       invoked to compute the <span>CSS declaration block</span>.</p>      </li>    </ol>    <p class='note'>Because of historical IDL limitations the <code>getComputedStyle</code> operation used to be on    a separate interface, <code>ViewCSS</code>.</p></dd>
</dl>


  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2>Resolved Values</h2>

  <p><code title="dom-Window-getComputedStyle">getComputedStyle()</code> was
  historically defined to return the "computed value" of an element or
  pseudo-element. However, the concept of "computed value" changed between
  revisions of CSS while the implementation of
  <code title="dom-Window-getComputedStyle">getComputedStyle()</code> had to
  remain the same for compatibility with deployed scripts. To address this
  issue this specification introduces the concept of a
  <dfn>resolved value</dfn>.</p>

  <p>The <span>resolved value</span> for a given property can be determined
  as follows:</p>

  <dl class="switch">
   <!--
   We want to treat shorthand properties like any other value basically.

   <dt>'<code>background</code>'
   <dt>'<code>border</code>'
   <dt>'<code>border-collapse</code>'
   <dt>'<code>border-color</code>'
   <dt>'<code>border-spacing</code>'
   <dt>'<code>border-style</code>'
   <dt>'<code>border-top</code>'
   <dt>'<code>border-right</code>'
   <dt>'<code>border-bottom</code>'
   <dt>'<code>border-left</code>'
   <dt>'<code>border-width</code>'
   <dt>'<code>font</code>'
   <dt>'<code>list-style</code>'
   <dt>'<code>margin</code>'
   <dt>'<code>outline</code>'
   <!- - overflow is not - ->
   <dt>'<code>padding</code>'
   <dt>'<code>pause</code>'
   <dd>
    <p>There is no <span>resolved value</span>.</p>
   </dd>
   -->

   <dt>'<code>line-height</code>'</dt>
   <dd><p>The <span>resolved value</span> is the used value.</p></dd>

   <dt>'<code>height</code>'</dt>
   <dt>'<code>margin</code>'</dt>
   <dt>'<code>margin-bottom</code>'</dt>
   <dt>'<code>margin-left</code>'</dt>
   <dt>'<code>margin-right</code>'</dt>
   <dt>'<code>margin-top</code>'</dt>
   <dt>'<code>padding</code>'</dt>
   <dt>'<code>padding-bottom</code>'</dt>
   <dt>'<code>padding-left</code>'</dt>
   <dt>'<code>padding-right</code>'</dt>
   <dt>'<code>padding-top</code>'</dt>
   <dt>'<code>width</code>'</dt>
   <dd><p>If the property applies to the element or pseudo-element and the
   <span>resolved value</span> of the '<code>display</code>' property is not
   <code>none</code>, the <span>resolved value</span> is the
   <span>used value</span>. Otherwise the <span>resolved value</span> is the
   computed value.</p></dd>

   <dt>'<code>bottom</code>'</dt>
   <dt>'<code>left</code>'</dt>
   <dt>'<code>right</code>'</dt>
   <dt>'<code>top</code>'</dt>
   <dd><p>If the property applies to a positioned element and the
   <span>resolved value</span> of the '<code>display</code>' property is not
   <code>none</code>, the <span>resolved value</span> is the
   <span>used value</span>. Otherwise the <span>resolved value</span> is the
   computed value.</p></dd>

   <dt>Any other property</dt>
   <dd><p>The <span>resolved value</span> is the computed value.</p></dd>
  </dl>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 id="iana-considerations">IANA Considerations</h2>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3><dfn title="http-default-style"><code>Default-Style</code></dfn></h3>

  <p>This section describes a header field for registration in the Permanent
  Message Header Field Registry.
  <!--<a href="XXX">[RFC3864]</a>--></p>

  <dl>
   <dt>Header field name</dt>
   <dd>Default-Style</dd>
   <dt>Applicable protocol</dt>
   <dd>http</dd>
   <dt>Status</dt>
   <dd>standard</dd>
   <dt>Author/Change controller</dt>
   <dd>W3C</dd>
   <dt>Specification document(s)</dt>
   <dd>This document is the relevant specification.</dd>
   <dt>Related information</dt>
   <dd>None.</dd>
  </dl>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 class="no-num">References</h2>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3 class="no-num">Normative references</h3>
  <div id="anolis-references-normative"></div>

  <!-- ........................................................................................................................ -->
  <!-- ........................................................................................................................ -->

  <h3 class="no-num">Informative references</h3>
  <div id="anolis-references-informative"></div>

  <!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

  <h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

  <p>The editors would like to thank

  Alexey Feldgendler,
  Björn Höhrmann,
  Brian Kardell,
  Christian Krebs,
  Daniel Glazman,
  David Baron,
  <i>fantasai</i>,
  Hallvord R. M. Steen,
  Ian Hickson,
  John Daggett,
  Lachlan Hunt,
  Morten Stenshorne,
  Philip Taylor,
  Robert O'Callahan,
  Sjoerd Visscher,
  Simon Pieters,
  Sylvain Galineau,
  Tarquin Wilton-Jones, and
  Zack Weinberg

  for contributing to this specification.</p>

  <p>Additional thanks to Ian Hickson for writing the
  initial version of the alternative style sheets API and canonicalization
  (now serialization) rules for CSS values.</p>

  <!-- XXX NOTES

  <style type=text/css;charset=utf-8> does create a StyleSheet in Firefox
  and Opera, but does not create a StyleSheet in IE. I prefer IE.

  <style type=TEXT/CSS> sets the style sheet type to text/css in Firefox and
  TEXT/CSS in Opera and IE. I prefer Firefox.

  <style> sets the style sheet location to the document location Firefox,
  the empty string in IE, and null in Opera. I prefer Opera

  <style media="x"> invokes .sheet.media.mediaText = "x"

  <style> does not "have" a title

  .cascadedStyle that returns less keywords than currentStyle, no inherit,
  etc.

  Markup style: http://krijnhoetmer.nl/irc-logs/whatwg/20100204#l-529
  -->
 


</body>
</html>
