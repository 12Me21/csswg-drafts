<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head profile="http://www.w3.org/2006/03/hcard"><meta
  content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Regions Module Level 3</title>
  <link href="../default.css" rel=stylesheet type="text/css">

  <style type="text/css">
  
  /* Alternate stylesheet fonts are here because in some browsers (Opera 11.5) */
  /* The fonts are not applied if only loaded from the alternate stylesheet    */
  
  /* License font the following two fonts: fonts/Droid-Serif-fontfacekit/Google Android License.txt */
  @import url(fonts/Droid-Serif-fontfacekit/stylesheet.css);
  @import url(fonts/Droid-Sans-Mono-fontfacekit/stylesheet.css);

         a.toggle {
             position: fixed;
             top: 0.5em;
             right: 0.5em;
         	font-size: smaller;
         	color: gray;
         	opacity: 0.2;
         }

         a.toggle:hover {
             opacity: 1;
             color: #46A4E9;
         }
         
         .issue.resolved, .issue.stale, .issue.moved {
             display: none;
         }
         
         
         #region-style-example p, #region-style-example pre {
         	clear: both;
         }

         #region_styling_illustration {
         	margin: 0px auto;
         	width: 70ex;
         }
         
         .big.note {
             font-size: 1.2em;
             line-height: 1.3em;
             color: #2f2f2f;
         }
         
         #mobile-logo {
             display: none;
         }
         
         @media screen and (min-width: 68em){    
             
                  .issue-marker {
                      position: absolute;
                      width: 20ex;
                      margin-left: -22ex;
                      text-align: right;
                      margin-bottom: 1em;
                  }
                  
                  div.issue-marker .issue-marker {
                      position: static;
                      width: auto;
                      margin-left: 0;
                      text-align: right;
                  }  
                  
                  div.issue-marker {
                      position: absolute;
                      width: 20ex;
                      margin-left: -22ex;
                  }
         }

         @media screen and (max-width: 68em){
                  .issue-marker {
                      margin-bottom: 1em;
                  }
                  
                  .issue-marker a:link {
                      padding-left: 0.5em;
                  }
         } 
         
         #issue-manager form{
             background: #eee;
             padding:10px 1em;
         }
         
         /* hide all non-"updated" issues */
         #issue-manager[data-view_state="updated"] #issue-list>div:not([data-issue_state="updated"]){
             display:none;
         }
            
         /* hide all non-"new" issues */
         #issue-manager[data-view_state="new"] #issue-list>div:not([data-issue_state="new"]){
             display:none;
         }
                  
          #issue-manager .issue-marker{ 
              background: none;
              position: relative;  
              margin:0; 
              width:auto;
              text-align:left; 
              padding:0.5em 0;
          }
          
          #issue-manager .issue-marker a:link{
              padding:0.5em;
          }
          
          #issue-list div[data-issue_state="new"]{
              background:#C1FFC1;
          }  

          #issue-list div[data-issue_state="resolved"]{
              background:white;
              color: #a0a0a0;
          }  

          #issue-list div[data-issue_state="updated"]{
              background:papayawhip;
          }     
          
          #issue-list{
              margin-top:20px;
          }

          #issue-list pre{
              padding:1em;
              margin:0;
          }   
          
          #issue-list>div{
              position:relative;
          }
          
          #issue-list a.issue-markup-trigger{  
              font-size: 0.8em;
              padding: 0.2em 0.5em;
              background: #eee;      
              text-decoration: none;    
              color: #444;
              position: absolute;
              right: 10px;
              top: 10px;  
              z-index: 1;
          }  
          
           #issue-list a.issue-markup-trigger:hover{
               background: #ddd;
               color: #000;
           }                        
          
          #issue-list .showMarkup pre{
              display: block;
          }                           
          
          #issue-list .showMarkup .issue-marker,
          #issue-list pre{
              display: none;
          }
      
         .issue-marker {
              background:#eee;  
              border:1px solid #ddd; 
              font-size: 1em;
          }
          
          .issue-marker.wrapper {
              background: none;
              border: none;
          }

         .issue-marker a:link {
              color: #c00;
              background: none;
              font-weight: normal;
              padding-right: 0.5em;
          }
         
         .issue-details {  
              padding:0.5em;
              font-size: 0.8em;
              line-height: 1.5;
          }

         .issue-details p{
              padding:0;
              margin:0; 
          }           

         .issue-details .status{
              background:#333;   
              color:white;
              float:left;    
              padding:0.15em 0.8em;    
              font-size:0.8em;
              margin-right:0.8em;
              text-transform:uppercase;      
          }
       </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
  type="text/css">
  <link href="../alternate-spec-style.css" id=st rel=stylesheet
  title="alternate spec style" type="text/css">

 <body>
  <div class=head id=div-head>
   <p><a href="http://www.w3.org/"><img alt=W3C height=53 id=mobile-logo
    src="http://www.w3.org/2008/site/images/logo-w3c-mobile-lg" width=90></a>
    <!--begin-logo-->

   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo--></p>

   <h1 id=css-regions-module>CSS Regions Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 12 April 2012</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2012/ED-css3-regions-20120412/">http://www.w3.org/csswg/css3-regions</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-regions/">http://www.w3.org/TR/css3-regions/</a>

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-regions-20111129/">http://www.w3.org/TR/2011/WD-css3-regions-20111129/</a>

    <dt>Editors:

    <dd class=vcard><span class=fn>Vincent Hardy</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>vhardy@adobe.com</span>

    <dd class=vcard><span class=fn>Alex Mogilevsky</span>, <span
     class=org>Microsoft</span>, <span
     class=email>alexmog@microsoft.com</span>

    <dt>Issues List:

    <dd><a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?product=CSS&component=Regions&resolution=---">Bugzilla
     Bugs for CSS regions</a>

    <dt>Discussion:

    <dd><a
     href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a>
     with subject line "<code>[css3-regions] message topic</code>"
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2012 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>The CSS regions module allows content to flow across multiple areas
   called regions. The regions are not necessarily contiguous in the document
   order. The CSS regions module provides an advanced content flow mechanism,
   which can be combined with positioning schemes as defined by other CSS
   modules such as the Multi-Column Module <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a> or the Grid Layout Module
   <a href="#CSS3-GRID-LAYOUT"
   rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a> to
   position the regions where content flows.

  <h2 class="no-num no-toc" id=status-of-this-document>Status of this
   document</h2>

  <p class="big note"><span class=note-prefix>Note </span>This document uses
   an experimental style sheet. We welcome your feedback on the styles at <a
   href="mailto:site-comments@w3.org">site-comments@w3.org</a>.</p>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-regions%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-regions&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-regions<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>This draft is related to the drafts about Multi-column Layout <a
   href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>, Grid
   Layout <a href="#CSS3GRID"
   rel=biblioentry>[CSS3GRID]<!--{{CSS3GRID}}--></a>, Flexible Box Layout <a
   href="#CSS3-FLEXBOX"
   rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>, and Template
   Layout <a href="#CSS3LAYOUT"
   rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>.

  <h2 class="no-num no-toc" id=table-of-contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>
    <ul class=toc>
     <li><a href="#named-flows-and-regions"><span class=secno>1.1.
      </span>Named flows and region chains</a>

     <li><a href="#region-styling"><span class=secno>1.2. </span>CSS Region
      names and styling</a>
    </ul>

   <li><a href="#css-regions-concepts"><span class=secno>2. </span>CSS
    regions concepts</a>
    <ul class=toc>
     <li><a href="#regions"><span class=secno>2.1. </span>Regions</a>

     <li><a href="#named-flow"><span class=secno>2.2. </span>Named flows</a>

     <li><a href="#regions-flow-breaking-rules"><span class=secno>2.3.
      </span>Regions flow breaking rules</a>
    </ul>

   <li><a href="#properties-and-rules"><span class=secno>3. </span>Properties
    and rules</a>
    <ul class=toc>
     <li><a href="#the-flow-into-property"><span class=secno>3.1. </span>The
      &lsquo;<code class=property>flow-into</code>&rsquo; property</a>

     <li><a href="#the-flow-from-property"><span class=secno>3.2. </span>The
      &lsquo;<code class=property>flow-from</code>&rsquo; property</a>

     <li><a href="#region-flow-break"><span class=secno>3.3. </span>Region
      flow break properties: &lsquo;<code
      class=property>break-before</code>&rsquo;, &lsquo;<code
      class=property>break-after</code>&rsquo;, &lsquo;<code
      class=property>break-inside</code>&rsquo;</a>

     <li><a href="#the-region-overflow-property"><span class=secno>3.4.
      </span>The region-overflow property</a>

     <li><a href="#the-at-region-style-rule"><span class=secno>3.5.
      </span>The @region rule</a>
    </ul>

   <li><a href="#multi-column-regions"><span class=secno>4.
    </span>Multi-column regions</a>

   <li><a href="#pseudo_elements"><span class=secno>5.
    </span>Pseudo-elements</a>
    <ul class=toc>
     <li><a href="#processing-model"><span class=secno>5.1. </span>Processing
      model</a>
    </ul>

   <li><a href="#cssom_view_and_css_regions"><span class=secno>6.
    </span>CSSOM view and CSS regions</a>
    <ul class=toc>
     <li><a href="#the-namedflow-interface"><span class=secno>6.1. </span>The
      NamedFlow interface</a>

     <li><a href="#the-region-interface"><span class=secno>6.2. </span>The
      Region interface</a>

     <li><a href="#region-flow-layout-events"><span class=secno>6.3.
      </span>Region flow layout events</a>

     <li><a href="#cssomview-and-regions"><span class=secno>6.4. </span>CSS
      OM View and CSS Regions</a>
      <ul class=toc>
       <li><a
        href="#cssomview-getclientrects-and-getboundingclientrect"><span
        class=secno>6.4.1. </span><code class=idl>getClientRects()</code> and
        <code>getBoundingClientRects()</code></a>

       <li><a href="#cssomview-offset-attributes"><span class=secno>6.4.2.
        </span><code class=idl>offsetTop</code>, <code
        class=idl>offsetLeft</code>, <code class=idl>offsetWidth</code> and
        <code class=idl>offsetWidth</code></a>
      </ul>
    </ul>

   <li><a href="#regions-visual-formatting-details"><span class=secno>7.
    </span>Regions visual formatting details</a>
    <ul class=toc>
     <li><a href="#regions-flow-content-box"><span class=secno>7.1.
      </span>The Region Flow Content Box (RFBC)</a>
      <ul class=toc>
       <li><a href="#rfbc-width-resolution"><span class=secno>7.1.1.
        </span>RFCB &lsquo;<code class=property>width</code>&rsquo;
        resolution</a>
      </ul>

     <li><a href="#regions-visual-formatting-steps"><span class=secno>7.2.
      </span>Regions visual formatting steps</a>
      <ul class=toc>
       <li><a href="#rfcb-flow-fragment-height-resolution"><span
        class=secno>7.2.1. </span>Step 1: RFCB flow fragment height
        resolution</a>
        <ul class=toc>
         <li><a href="#rfcb-flow-fragment-height-resolution-phase-1"><span
          class=secno>7.2.1.1. </span>RFCB flow fragment height resolution,
          Phase 1</a>

         <li><a href="#rfcb-flow-fragment-height-resolution-phase-2"><span
          class=secno>7.2.1.2. </span>RFCB flow fragment height resolution,
          Phase 2</a>
        </ul>

       <li><a href="#regions-boxes-layout"><span class=secno>7.2.2.
        </span>Step 2: regions boxes layout</a>

       <li><a href="#named-flows-layout"><span class=secno>7.2.3. </span>Step
        3: named flows layout</a>
      </ul>

     <li><a href="#regions-visual-formatting-implementation-note"><span
      class=secno>7.3. </span>Regions visual formatting: implementation
      note</a>

     <li><a href="#regions-visual-formatting-examples"><span class=secno>7.4.
      </span>Regions visual formatting example</a>
      <ul class=toc>
       <li><a href="#step-1--phase-1-laying-out-rfcbs-with-us"><span
        class=secno>7.4.1. </span>Step 1 - Phase 1: Laying out RFCBs with
        used height of zero</a>

       <li><a href="#step-1--phase-2-layout-flow-to-compute-t"><span
        class=secno>7.4.2. </span>Step 1 - Phase 2: Layout flow to compute
        the RFCBs' flow fragments heights</a>

       <li><a href="#step-2-layout-document-and-regions-witho"><span
        class=secno>7.4.3. </span>Step 2: Layout document and regions without
        named flows</a>

       <li><a href="#step-3-named-flows-layout"><span class=secno>7.4.4.
        </span>Step 3: named flows layout</a>
      </ul>
    </ul>

   <li><a href="#relation-to-document-events"><span class=secno>8.
    </span>Relation to document events</a>

   <li><a href="#relation-to-other-specifications"><span class=secno>9.
    </span>Relation to other specifications</a>

   <li><a href="#usecases"><span class=secno>10. </span>Use Cases</a>

   <li><a href="#conformance"><span class=secno>11. </span>Conformance</a>

   <li><a href="#changes"><span class=secno>12. </span>Changes</a>
    <ul class=toc>
     <li><a href="#changes_from_June_09_2011"><span class=secno>12.1.
      </span>Changes from November 29<sup>th</sup> 2011 version</a>

     <li><a href="#changes_from_June_09_2011"><span class=secno>12.2.
      </span>Changes from June 09<sup>th</sup> 2011 version</a>
    </ul>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#intro-example-code">Appendix A. Example Code
    for Introduction</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>

   <li><a href="#issue-manager0"><span class=secno>13. </span>Issue
    manager</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p><em>This section is non-normative.</em>

  <p>Displaying the complex layouts of a typical magazine, newspaper, or
   textbook on the web requires capabilities beyond those available in
   existing CSS modules. Dynamic magazine layout in particular requires
   flexibility in placement of boxes for content flows. This is the purpose
   of the CSS regions module.

  <div class=issue-marker data-bug_id=15733 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15733">Bug-15733</a>
   <div class=issue-details>
    <p class=short-desc>Should the region specification define a mechanism to
     create blocks that can be regions with CSS syntax?</p>
   </div>
  </div>

  <p>For more complex layouts, content needs to flow from one area of the
   page to the next without limitation on the areas' sizes and positions.
   These arbitrary areas are the target of specific content flows which this
   document calls <a href="#named-flow0">named flows</a>. Each <a
   href="#named-flow0">named flow</a> can be associated with a set of CSS
   Regions called a region chain. CSS Regions are based on the rectangular
   geometry of the CSS box model. Elements in a <a href="#named-flow0">named
   flow</a> are taken out of the normal visual formatting and rendered in a
   chain of CSS Regions.

  <h3 id=named-flows-and-regions><span class=secno>1.1. </span>Named flows
   and region chains</h3>

  <p>Consider the layout illustrated in figure 1.

  <div class=figure> <img
   alt="multiple chained regions which should receive content from a flow"
   src="images/intro-example-layout.svg" width=400>
   <p class=caption>Layout requiring sophisticated content flow</p>
  </div>

  <p>The designer's intent is to position an image in box &lsquo;<code
   class=property>A</code>&rsquo; and to flow an article's content from box
   &lsquo;<code class=css>1</code>&rsquo; through boxes &lsquo;<code
   class=css>2</code>&rsquo;, &lsquo;<code class=css>3</code>&rsquo; and
   &lsquo;<code class=css>4</code>&rsquo;. Note that the second box should
   have two columns, and the image is not contained in the article. Box
   &lsquo;<code class=css>4</code>&rsquo; should auto-size to render the
   remainder of the article content that did not fit in the earlier boxes.

  <p>Figure 2 shows an example of the intended visual rendering of the
   content.

  <div class=figure> <img
   alt="Sample rendering showing a single thread of text flowing through a chain of regions"
   src="images/regions-intro-rendering.png" width=450>
   <p class=caption>Sample rendering for desired layout</p>
  </div>

  <p>There is no existing mechanism in CSS to associate the content with
   these boxes arranged in this manner so that content flows as intended. The
   CSS regions module properties provide that mechanism.

  <p>The following example illustrates how the content of an
   <code>article</code> element becomes a <a href="#named-flow0">named
   flow</a> and how boxes marked with &lsquo;<code
   class=css>region1</code>&rsquo;, &lsquo;<code
   class=css>region2</code>&rsquo;, &lsquo;<code
   class=css>region3</code>&rsquo; and &lsquo;<code
   class=css>region4</code>&rsquo; IDs become CSS Regions that consume the
   &lsquo;<code class=css>article_flow</code>&rsquo; content.

  <div class=example>
   <pre>
&lt;style&gt;
  article {
    <strong>flow-into: article_flow;</strong>
  }

  #region1, #region2, #region3, #region4 {
    <strong>flow-from: article_flow;</strong>
  }
&lt;/style&gt;
      </pre>
  </div>

  <p>The &lsquo;<code class=css>article_flow</code>&rsquo; value on the
   &lsquo;<a href="#flow-into"><code
   class=property>flow-into</code></a>&rsquo; property directs the
   <code>article</code> element to the &lsquo;<code
   class=css>article_flow</code>&rsquo; <a href="#named-flow0">named
   flow</a>. Setting the &lsquo;<a href="#flow-from"><code
   class=property>flow-from</code></a>&rsquo; property on stylable boxes to
   &lsquo;<code class=css>article_flow</code>&rsquo; makes them CSS Regions
   and associates the resulting region chain with the <a
   href="#named-flow0">named flow</a>: the flow is &lsquo;<code
   class=css>poured</code>&rsquo; into the region chain.

  <p>See <a href="#intro-example-code">Appendix A</a> for sample code using
   grid layout that implements this example

  <div class=note><span class=note-prefix>Note </span>
   <p><strong>CSS Regions are independent from layout</strong></p>

   <p>Any of the CSS layout facilities can be used to create, position and
    size boxes that can become CSS Regions. Using a grid layout <a
    href="#CSS3-GRID-LAYOUT"
    rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a> is just
    an example. The example could use a flexible box layout <a
    href="#CSS3-FLEXBOX"
    rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a> instead.</p>

   <p>The CSS regions specification does not define a layout mechanism and is
    meant to integrate with existing and future CSS layout facilities.</p>

   <p><strong>CSS Regions do not have to be elements</strong></p>

   <p>The CSS regions module is independent of the layout of boxes and the
    mechanism used to create them. For simplicity, our example code in <a
    href="#intro-example-code">Appendix A</a> uses elements to define the
    boxes.</p>

   <p>While the example uses elements for CSS Regions (since <a
    href="#CSS3-GRID-LAYOUT"
    rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a>
    requires elements to create grid items) it is important to note that this
    is not required. CSS Regions can be pseudo-elements, such as &lsquo;<code
    class=css>::before</code>&rsquo; and &lsquo;<code
    class=css>::after</code>&rsquo;. The only requirement for an element or
    pseudo-element to become a CSS Region is that it needs to be subject to
    CSS styling to receive the &lsquo;<a href="#flow-from"><code
    class=property>flow-from</code></a>&rsquo; property. The CSS page
    template module (see <a href="#CSS3-PAGE-TEMPLATE"
    rel=biblioentry>[CSS3-PAGE-TEMPLATE]<!--{{CSS3-PAGE-TEMPLATE}}--></a>)
    proposes another mechanism to create stylable boxes that can become CSS
    Regions with the <code class=css>@slot</code> syntax.</p>
  </div>

  <h3 id=region-styling><span class=secno>1.2. </span>CSS Region names and
   styling</h3>

  <p>Content can be styled depending on the CSS Region it flows into. It is
   an extension of pseudo-element styling such as <a
   href="http://www.w3.org/TR/css3-selectors/#first-line"> <code
   class=css>::first-line</code> </a> which applies a particular style to a
   fragment of content. With CSS Region styling, additional selectors may
   apply depending on the CSS Region into which content flows.

  <p>In our example, the designer wants to make text flowing into #region1
   dark blue and bold.

  <p>This design can be expressed as shown below.

  <div class=example>
   <pre>
&lt;style&gt;
  #region1 {
    region-name: region1;
  }
 
  p::in-region(region1) {
    color: #0C3D5F;
    font-weight: bold;
  }
&lt;/style&gt;

TODO: This section is out of sync with section 3.5, 
which needs to be updated.
        </pre>
  </div>

  <p>The ::in-region(region1) pseudo-element limits its selectors to content
   flowing into #region1. The following figure shows how the rendering
   changes if we apply styling specific to #region1. Note how less text fits
   into this box now that the &lsquo;<code
   class=property>font-weight</code>&rsquo; is bold instead of normal.

  <div class=figure> <img
   alt="Illustrate how changing region styling affects the flow of content."
   src="images/region-styling.png" width=450>
   <p class=caption>Different rendering with a different region styling</p>
  </div>

  <h2 id=css-regions-concepts><span class=secno>2. </span>CSS regions
   concepts</h2>

  <h3 id=regions><span class=secno>2.1. </span>Regions</h3>

  <div class="issue-marker wrapper">
   <div class=issue-marker data-bug_id=15186 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15186">Bug-15186</a>
    
    <div class=issue-details>
     <p class=short-desc>Is a mechanism to auto-generate regions necessary in
      order to support reusable style sheets?</p>
    </div>
   </div>

   <div class=issue-marker data-bug_id=15187 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15187">Bug-15187</a>
    
    <div class=issue-details>
     <p class=short-desc>Explain how regions and pages interact. How can
      regions be placed onto certain pages, and how can they be positiond
      wrt. pages.</p>
    </div>
   </div>
  </div>

  <p class=index id=region title=region> A CSS Region is a stylable box that
   generates a <a
   href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes">block container
   box</a> and has an associated <a href="#named-flow0"><em><span>named
   flow</span></em></a> (see the &lsquo;<a href="#flow-from"><code
   class=property>flow-from</code></a>&rsquo; property). The <a
   href="http://dev.w3.org/csswg/css3-multicol/#column-box">column boxes</a>
   of multi-column elements which have an associated <a
   href="#named-flow0"><em><span>named flow</span></em></a> are also regions
   (see the <a href="#multi-column-regions">section on multi-column
   regions</a>).

  <h3 id=named-flow><span class=secno>2.2. </span>Named flows</h3>

  <p>A <dfn id=named-flow0>named flow</dfn> is the ordered sequence of
   elements associated with a flow with a given identifier. Elements in a <a
   href="#named-flow0">named flow</a> are ordered according to the document
   order.

  <p>Elements are placed into a <a href="#named-flow0">named flow</a> with
   the &lsquo;<a href="#flow-into"><code
   class=property>flow-into</code></a>&rsquo; property. The elements in a <a
   href="#named-flow0">named flow</a> are laid out in the <span
   title=region-chain>region chain</span> that is associated with this <a
   href="#named-flow0">named flow</a>. <span title=region>CSS Regions</span>
   are organized into a <span title=region-chain>region chain</span>
   according to the document order.

  <p>Content from a <a href="#named-flow0">named flow</a> is broken up
   between regions according to the regions flow breaking rules.

  <h3 id=regions-flow-breaking-rules><span class=secno>2.3. </span>Regions
   flow breaking rules</h3>

  <p>Breaking a <a href="#named-flow0">named flow</a> across a region chain
   is similar to breaking a document's content across pages (see <a
   href="#CSS3PAGE" rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a>) or a
   multi-column element's content across column boxes (see <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>). One difference is that
   page boxes are generated based on the available content whereas a region
   chain is a set of recipient boxes for the <a href="#named-flow0">named
   flow</a> content whose dynamic generation is not in the scope of this
   specification.

  <p>Each CSS Region in turn consumes content from its associated <a
   href="#named-flow0">named flow</a>. The <a href="#named-flow0">named
   flow</a> content is positioned in the <dfn id=current-region
   title=current-region>current region</dfn> until a natural or forced region
   break occurs, at which point the next region in the <span
   title=region-chain>region chain</span> becomes the <a
   href="#current-region" title=current-region>current region</a>. If there
   are no more <span>region</span>s in the region chain and there is still
   content in the flow, the positioning of the remaining content is
   controlled by the &lsquo;<a href="#region-overflow"><code
   class=property>region-overflow</code></a>&rsquo; property on the last
   <span>region</span> in the chain.

  <p>The CSS regions module follows the fragmentation rules defined in the
   CSS Fragmentation Module Level 3 (see <a href="#CSS3-BREAK"
   rel=biblioentry>[CSS3-BREAK]<!--{{!CSS3-BREAK}}--></a>).

  <h2 id=properties-and-rules><span class=secno>3. </span>Properties and
   rules</h2>

  <h3 id=the-flow-into-property><span class=secno>3.1. </span>The &lsquo;<a
   href="#flow-into"><code class=property>flow-into</code></a>&rsquo;
   property</h3>

  <div class=issue-marker data-bug_id=15811 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15811">Bug-15811</a>
   <div class=issue-details>
    <p class=short-desc>Creating a named flow from external resource</p>
   </div>
  </div>

  <p>The ‘flow-into’ property can place an element into a <a
   href="#named-flow0">named flow</a>. Elements that belong to the same flow
   are laid out in the region chain associated with that flow.

  <table class=propdef summary="flow property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flow-into>flow-into</dfn>

    <tr>
     <th>Value:

     <td>&lt;ident&gt; | none | inherit

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>any element.
      <p>The &lsquo;<a href="#flow-into"><code
       class=property>flow-into</code></a>&rsquo; property does not apply to
       any <a
       href="http://www.w3.org/TR/selectors/#pseudo-elements">pseudo-element</a>
       such as <code class=css>::first-line</code>, <code
       class=css>::first-letter</code>, <code class=css>::before</code> or
       <code class=css>::after</code>.

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>as specified
  </table>

  <dl>
   <dt>none

   <dd>The element is not moved to a <a href="#named-flow0">named flow</a>
    and normal CSS processing takes place.

   <dt><a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident&gt;</a>

   <dd>The element is taken out of its parent's flow and placed into the flow
    with the name &lsquo;<code class=css>&lt;ident&gt;</code>&rsquo;. The
    element is said to have a <dfn id=specified-flow>specified flow</dfn>.
    The values &lsquo;<code class=property>none</code>&rsquo;, &lsquo;<code
    class=property>inherit</code>&rsquo;, &lsquo;<code
    class=property>default</code>&rsquo;, &lsquo;<code
    class=property>auto</code>&rsquo; and &lsquo;<code
    class=property>initial</code>&rsquo; are invalid flow names.
  </dl>

  <p>A <a href="#named-flow0">named flow</a> needs to be associated with a
   region chain (one or more CSS regions) for its elements to be visually
   formatted. If no region chain is associated with a given <a
   href="#named-flow0">named flow</a>, the elements in the <a
   href="#named-flow0">named flow</a> are not rendered: they do not generate
   boxes and are not displayed.

  <p>The children of an element with a specified flow may themselves have a
   specified flow.

  <p>If an element has the same specified flow as one of its ancestors, it
   becomes a sibling of its ancestor for the purpose of layout in the region
   chain laying out content from that flow.

  <p>The &lsquo;<a href="#flow-into"><code
   class=property>flow-into</code></a>&rsquo; property does not affect the
   CSS cascade and inheritance for the elements on which it is specified. The
   &lsquo;<a href="#flow-into"><code
   class=property>flow-into</code></a>&rsquo; property affects the visual
   formatting of elements placed into a <a href="#named-flow0">named flow</a>
   and of the region chain laying out content from a <a
   href="#named-flow0">named flow</a>.

  <div class="issue-marker wrapper">
   <div class=issue-marker data-bug_id=15870 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15870">Bug-15870</a>
    
    <div class=issue-details>
     <p class=short-desc>Describe how containing blocks are used for element
      fragments</p>
    </div>
   </div>
  </div>

  <p>The edges of the first region in a region chain associated with a <a
   href="#named-flow0">named flow</a> establish the rectangle that is the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">containing
   block</a> used for absolutely positioned elements in the <a
   href="#named-flow0">named flow</a> which do not have an ancestor with a
   &lsquo;<code class=property>position</code>&rsquo; of &lsquo;<code
   class=property>absolute</code>&rsquo;, &lsquo;<code
   class=property>relative</code>&rsquo; or &lsquo;<code
   class=property>fixed</code>&rsquo; (see <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>). That first region rectangle
   is used as the containing block instead of the initial containing block.

  <p>The first region defines the <a
   href="http://www.w3.org/TR/css3-writing-modes/#writing-mode">writing
   mode</a> for the entire flow. The writing mode on subsequent regions is
   ignored.

  <p>Elements in a <a href="#named-flow0">named flow</a> are sequenced in
   document order.

  <div class=note><span class=note-prefix>Note </span>
   <p>The &lsquo;<a href="#flow-into"><code
    class=property>flow-into</code></a>&rsquo; property moves an element into
    the flow and the interplay with selectors should be considered carefully.</p>

   <p>For example,</p>

   <pre>table {flow-into: table-content}</pre>

   <p>will move all tables in the &lsquo;<code
    class=property>table-content</code>&rsquo; <a href="#named-flow0">named
    flow</a>. However, the</p>

   <pre>table &gt; * {flow-into: table-content} ...</pre>

   <p>selector will move all immediate children of all table elements into
    the ‘table-content’ <a href="#named-flow0">named flow</a> (which may
    be useful as it will usually result, if the immediate children are rows,
    in merging rows of multiple tables), but the</p>

   <pre>table * {flow-into: table-content}</pre>

   <p>selector will move all descendants of table elements into the
    ‘table-content’ <a href="#named-flow0">named flow</a>, transforming
    the element tree into a flat list in order of opening tags (which is
    probably not intentional). This will make all the descendants of table
    elements siblings in the <a href="#named-flow0">named flow</a>. Having
    the descendants become siblings in the <a href="#named-flow0">named
    flow</a> results in a different processing (see <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/tables.html#anonymous-boxes">CSS
    2.1&lsquo;<code class=css>s anonymous table objects</code></a>). This
    note illustrates how authors must exercise caution when choosing a
    particular selector for setting the &rsquo;flow-into' property to avoid
    unintended results.</p>
  </div>

  <h3 id=the-flow-from-property><span class=secno>3.2. </span>The &lsquo;<a
   href="#flow-from"><code class=property>flow-from</code></a>&rsquo;
   property</h3>

  <p>The &lsquo;<a href="#flow-from"><code
   class=property>flow-from</code></a>&rsquo; property makes an element a
   region and associates it with a <a href="#named-flow0">named flow</a>.

  <div class=issue-marker data-bug_id=15191 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15191">Bug-15191</a>
   <div class=issue-details>
    <p class=short-desc>Should we allow multi-column elements to be regions?</p>
   </div>
  </div>

  <table class=propdef summary="flow-from property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flow-from>flow-from</dfn>

    <tr>
     <th>Value:

     <td>&lt;ident&gt; | none | inherit

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>Elements that generate a <a
      href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes">block
      container box</a>. <br>
      This might be expanded in future versions of the specification to allow
      other types of containers to receive flow content.

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>as specified
  </table>

  <dl>
   <dt><strong>none</strong>

   <dd>The element is not a <span title=region>region</span>.

   <dt><strong>&lt;ident&gt;</strong>

   <dd> If the &lsquo;<code class=property>content</code>&rsquo; property
    computes to something else than &lsquo;<code
    class=property>normal</code>&rsquo;, the element does not become a
    <span>CSS Region</span>. If the &lsquo;<code
    class=property>content</code>&rsquo; property computes to &lsquo;<code
    class=property>normal</code>&rsquo;, then the element becomes a <span>CSS
    Region</span> and is ordered in a <span>region chain</span> according to
    its document order. The content from the flow with the <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#value-def-identifier">&lt;ident&gt;</a>
    name will be <a href="#region-flow-break">broken into fragments</a> and
    visually formatted in the <a
    href="http://www.w3.org/TR/CSS21/visuren.html#principal-box">principal
    boxes</a> of the <span>regions</span> in the <span>region chain</span>.
    <br>
    If there is no flow with name &lt;ident&gt;, then the element does not
    format any content visually. <br>
    Likewise, if the element is part of the flow with name &lt;ident&gt;,
    then the element does not format any content visually.
  </dl>

  <p>A <span>CSS Region</span>&lsquo;<code class=css>s document children are
   not visually formatted unless they are directed to a <a
   href="#named-flow0">named flow</a> with an associated <span>region
   chain</span>.</code>

  <div class=note><span class=note-prefix>Note </span>
   <p>An element becomes a <span>CSS Region</span> when its &rsquo;flow-from'
    property is set to a valid &lt;ident&gt; value, even if there is no
    content contributing to the referenced flow. For example:</p>

   <pre>
&lt;style&gt;
  .article{
    flow-into: thread;
  }
  .region{
    flow-from: thread;
  }
&lt;/style&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;div class=region&gt;div content&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
        </pre>
   There is no element matching the <code>.article</code> selector and
   therefore no content in the <code>thread</code> flow. However, the element
   matching the <code>.region</code> selector is still associated with that
   empty <a href="#named-flow0">named flow</a> and, consequently, its
   children are not formatted visually.</div>

  <div class="issue-marker wrapper">
   <div class=issue-marker data-bug_id=15189 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15189">Bug-15189</a>
    
    <div class=issue-details>
     <p class=short-desc>Should regions be non-breakable?</p>
    </div>
   </div>

   <div class=issue-marker data-bug_id=15824 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15824">Bug-15824</a>
    
    <div class=issue-details>
     <p class=short-desc>Should regions not create a new stacking context?</p>
    </div>
   </div>

   <div class=issue-marker data-bug_id=15827 data-bug_status=NEW> <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15824">Bug-15827</a>
    
    <div class=issue-details>
     <p class=short-desc>Specify behavior of stacking contexts that are split
      between regions</p>
    </div>
   </div>
  </div>

  <p><span title=region>CSS Regions</span> create a new <a
   href="http://www.w3.org/TR/CSS2/visuren.html#z-index">stacking
   context</a>. <span title=region>CSS Regions</span> establish a new <a
   href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting">block
   formatting Context</a>.

  <div class=note><span class=note-prefix>Note </span>
   <p>With <span>region chains</span>, an element may be split across
    multiple boxes and these boxes may overlap (for example if they are
    absolutely positioned). So fragments of the same element can overlap each
    other. Since each element has a single z-index, it would be required to
    find another mechanism to decide in which order the fragments are
    rendered. Since each <span>CSS Region</span> creates a new stacking
    context, it is clear that each fragment is rendered separately and their
    rendering order follows the regular CSS rendering model.</p>
  </div>

  <p>Floats or other exclusions (see <a href="#CSS3-EXCLUSIONS"
   rel=biblioentry>[CSS3-EXCLUSIONS]<!--{{CSS3-EXCLUSIONS}}--></a>)
   potentially impact the content laid out in region chains, just as for
   non-regions.

  <p>See the <a href="#regions-visual-formatting-details">regions visual
   formatting details</a> section for a description of how &lsquo;<code
   class=property>width</code>&rsquo; and &lsquo;<code
   class=property>height</code>&rsquo; values are resolved for <span>CSS
   Region</span> boxes.

  <h3 id=region-flow-break><span class=secno>3.3. </span>Region flow break
   properties: &lsquo;<a href="#break-before"><code
   class=property>break-before</code></a>&rsquo;, &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo;,
   &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo;</h3>

  <p>User agents laying out content in multiple regions must determine where
   content breaks occur. The problem of breaking content into fragments
   fitting in regions is similar to breaking content into pages or columns.

  <p>Each break ends layout in the current region and causes remaining pieces
   of content from the <a href="#named-flow0">named flow</a> to be visually
   formatted in the following region in the region chain, if there is one.

  <p>The following extends the &lsquo;<a href="#break-before"><code
   class=property>break-before</code></a>&rsquo;, &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo; and
   &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo; properties from the <a
   href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>
   specification to account for regions. The additional values are described
   below.

  <table class=propdef summary="break-before property definition">
   <tbody>
    <tr>
     <td><a href="#dom-named-flow-name"><em>Name:</em></a>

     <td><dfn id=break-before>break-before</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="break-after property definition">
   <tbody>
    <tr>
     <td><a href="#dom-named-flow-name"><em>Name:</em></a>

     <td><dfn id=break-after>break-after</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="break-inside property definition">
   <tbody>
    <tr>
     <td><a href="#dom-named-flow-name"><em>Name:</em></a>

     <td><dfn id=break-inside>break-inside</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | avoid | avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <p>These properties describe page, column and region break behavior
   before/after/inside the generated box. These values are normatively
   defined in <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>:

  <p>This specification adds the following new values:

  <dl>
   <dt>region

   <dd>Always force a region break before (after) the generated box.

   <dt>avoid-region

   <dd>Avoid a region break before (after, inside) the generated box.
  </dl>

  <p>The behavior of region breaks with regards to regions is identical to
   the behavior of page breaks with regards to pages, as defined in the <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

  <h3 id=the-region-overflow-property><span class=secno>3.4. </span>The
   region-overflow property</h3>

  <div class=issue-marker data-bug_id=15878 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15878">Bug-15878</a>
   <div class=issue-details>
    <p class=short-desc>region-overflow:nobreak</p>
   </div>
  </div>

  <table class=propdef summary="break-after property definition">
   <tbody>
    <tr>
     <td><a href="#dom-named-flow-name"><em>Name:</em></a>

     <td><dfn id=region-overflow>region-overflow</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | break

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td><em title="region element">region elements</em>

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <div class=issue-marker data-bug_id=15832 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15832">Bug-15832</a>
   <div class=issue-details>
    <p class=short-desc>Should we have region-overflow:nobreak and have
     &lsquo;<a href="#region-overflow"><code
     class=property>region-overflow</code></a>&rsquo; apply to all regions,
     not just the last?</p>
   </div>
  </div>

  <p>The &lsquo;<a href="#region-overflow"><code
   class=property>region-overflow</code></a>&rsquo; property controls the
   behavior of the <em id=last-region>last region</em> associated with a <a
   href="#named-flow0">named flow</a>.

  <dl>
   <dt>auto

   <dd>Content flows as it would in a regular content element. If the content
    exceeds the container box, it is subject to the <a
    href="http://www.w3.org/TR/CSS21/visufx.html#propdef-overflow">overflow</a>
    property's computed value on the region element. Region breaks must be
    ignored on the last region.

   <dt>break

   <dd>
    <p>If the content fits within the <em>region element</em>, then this
     property has no effect. If the content does not fit within the
     <em>region element</em>, the content breaks as if flow was going to
     continue in a subsequent region. See the <a
     href="#regions-flow-breaking-rules">breaking rules</a> section. A forced
     region break takes precedence over a natural break point.</p>

    <p>Flow content that follows the last break in the last region, if any is
     not rendered.</p>
  </dl>

  <p>The &lsquo;<a href="#region-overflow"><code
   class=property>region-overflow</code></a>&rsquo; property does not
   influence the size of the region it applies to.

  <p>The following code sample illustrates the usage of the &lsquo;<a
   href="#region-overflow"><code
   class=property>region-overflow</code></a>&rsquo; property.

  <div class=example>
   <pre>
&lt;style&gt;
#article {
  flow-into: "article";
}

#region_1, #region_2 {
  flow-from: article;
  <strong>region-overflow: break;</strong> /* or none */
  <strong>overflow: visible;</strong> /* or hidden */
}

&lt;/style&gt;

&lt;div id="article"&gt;...&lt;/div&gt;

&lt;div id="region_1"&gt;&lt;/div&gt;
&lt;div id="region_2"&gt;&lt;/div&gt;
        
      </pre>
  </div>

  <div class=figure>
   <table style="border: 1px solid gray;width: 100%;"
    summary="Different values for the region-overflow property - Illustration.">
    <tbody>
     <tr>
      <td>&lsquo;<code class=css>flow-into: "article"</code>&rsquo;

      <td><code class=html>region_1</code> and <code
       class=html>region_2</code>

      <td>&lsquo;<code class=css>region-overflow: auto</code>&rsquo;<br>
       &lsquo;<code class=css>overflow:visible</code>&rsquo;

     <tr>
      <td rowspan=3 style="vertical-align: top;"><img
       alt="regions receiving the flow content"
       src="images/region-overflow-flow.png">

      <td><img alt="result if region-overflow is set to 'break'"
       src="images/region-overflow-regions.png">

      <td><img alt="regions receiving the flow content"
       src="images/region-overflow-auto-overflow-visible.png">

     <tr>
      <td>&lsquo;<code class=css>region-overflow: break</code>&rsquo;

      <td>&lsquo;<code class=css>region-overflow: auto</code>&rsquo;<br>
       &lsquo;<code class=css>overflow:hidden</code>&rsquo;

     <tr>
      <td><img alt="result if region-overflow is set to 'break'"
       src="images/region-overflow-break.png">

      <td><img alt="regions receiving the flow content"
       src="images/region-overflow-auto-overflow-hidden.png">
   </table>

   <p class=caption>Different values for the region-overflow property</p>
  </div>

  <div class=note><span class=note-prefix>Note </span>
   <p>The &lsquo;<code class=property>overflow</code>&rsquo; property is
    honored on a region: if region content overflows, such as the borders of
    elements on the last line, the &lsquo;<code
    class=property>overflow</code>&rsquo; property controls the visibility of
    the overflowing content. See the &lsquo;<code
    class=property>overflow</code>&rsquo; property definition (<a
    href="#CSS21" rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>).</p>
  </div>

  <h3 id=the-at-region-style-rule><span class=secno>3.5. </span>The @region
   rule</h3>

  <div class=issue-marker data-bug_id=15116 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15116">Bug-15116</a>
   <div class=issue-details>
    <p class=short-desc>Add CSS OM Interface for @region style rules</p>
   </div>
  </div>

  <p>An &lsquo;<code class=css>@region</code>&rsquo; rule contains style
   declarations specific to particular regions.

  <pre>
@region &lt;selector&gt; {
    ... CSS styling rules ...
}         
    </pre>

  <p>The &lsquo;<code class=css>@region</code>&rsquo; rule consists of the
   keyword &lsquo;<code class=css>@region</code>&rsquo; followed by a <a
   href="http://www.w3.org/TR/css3-selectors/#selector-syntax">selector</a>
   and a block of style rules. The &lsquo;<code
   class=css>@region</code>&rsquo; rule and the selector constitute the
   region's &lsquo;<code class=css>flow fragment</code>&rsquo; selector. The
   region's flow fragment selector specifies which range of elements in the
   flow are subject to the style rules in the following block: it applies to
   the range (see <a href="#DOM" rel=biblioentry>[DOM]<!--{{!DOM}}--></a>)
   from the region's flow that flows in the selected region(s).

  <div class=issue-marker data-bug_id=15713 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15713">Bug-15713</a>
   <div class=issue-details>
    <p class=short-desc>Model for styling element fragments</p>
   </div>
  </div>

  <p>Elements that are fully or partially in the &lsquo;<code class=css>flow
   fragment</code>&rsquo; may match any of the selectors found in the style
   rule. However, the style rules only apply to the portion of the element
   that falls into the corresponding region.

  <p>Only a limited list of properties can be set in a region style rule:

  <div class=issue-marker data-bug_id=15190 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15190">Bug-15190</a>
   <div class=issue-details>
    <p class=short-desc>List of region style properties</p>
   </div>
  </div>

  <ol>
   <li><a href="http://www.w3.org/TR/CSS2/fonts.html">font properties</a>

   <li><a href="http://www.w3.org/TR/CSS2/colors.html">color property</a>

   <li><a href="http://www.w3.org/TR/css3-color/#transparency">opacity
    property</a>

   <li><a href="http://www.w3.org/TR/css3-background/#backgrounds">background
    property</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/text.html#propdef-word-spacing">&lsquo;<code
    class=property>word-spacing</code>&rsquo;</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/text.html#propdef-letter-spacing">&lsquo;<code
    class=property>letter-spacing</code>&rsquo;</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/text.html#propdef-text-decoration">&lsquo;<code
    class=property>text-decoration</code>&rsquo;</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/text.html#propdef-text-transform">&lsquo;<code
    class=property>text-transform</code>&rsquo;</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height">&lsquo;<code
    class=property>line-height</code>&rsquo;</a>

   <li><a href="http://www.w3.org/TR/css3-background/#borders">border
    properties</a>

   <li><a href="http://www.w3.org/TR/css3-background/#corners">rounded corner
    properties</a>

   <li><a href="http://www.w3.org/TR/css3-background/#border-images">border
    images properties</a>

   <li><a href="http://www.w3.org/TR/CSS2/box.html#margin-properties">margin
    properties</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/box.html#padding-properties">padding
    properties</a>

   <li><a href="http://www.w3.org/TR/css3-text/#text-shadow">&lsquo;<code
    class=property>text-shadow</code>&rsquo; property</a>

   <li><a
    href="http://www.w3.org/TR/css3-background/#the-box-shadow">&lsquo;<code
    class=property>box-shadow</code>&rsquo; property</a>

   <li><a
    href="http://www.w3.org/TR/css3-background/#the-box-decoration-break">&lsquo;<code
    class=property>box-decoration-break</code>&rsquo; property</a>

   <li><a
    href="http://www.w3.org/TR/CSS2/visudet.html#the-width-property">&lsquo;<code
    class=property>width</code>&rsquo; property</a>
  </ol>

  <div class=example id=region-style-example>
   <p>In the following example, the <a href="#named-flow0">named flow</a>
    &lsquo;<code class=css>article_flow</code>&rsquo; flows through
    &lsquo;<code class=css>region_1</code>&rsquo; and &lsquo;<code
    class=css>region_2</code>&rsquo;.</p>

   <pre>
&lt;style&gt;
    #div_1 {
        <strong>flow-into: article_flow;</strong>
    }
    
    #region1, #region2 {
        <strong>flow-from: article_flow;</strong>
    }

    /* region style "RSA" */
    <strong>@region #region1, #region2</strong> {
        div {...}
        p {...}
    }
    
    /* region style "RSB" */
    <strong>@region #region1</strong> {
        p {...}
    }
        
&lt;/style&gt;

&lt;div id="div_1"&gt;
    &lt;p id="p_1"&gt;...&lt;/p&gt;
    &lt;p id="p_2"&gt;...&lt;/p&gt;
&lt;/div&gt;

&lt;div id="region1"&gt;&lt;/div&gt;
&lt;div id="region2"&gt;&lt;/div&gt;
        
</pre>

   <div id="region_styling_illustration"> <img
    alt="Illustration showing how a named flow content fits into regions to illustrate the @region styling."
    id="region_styling_img_2" name="region_styling_img_2"
    src="images/region-styling-2.png">
    <ul class=swatch-list>
     <li><span class=swatch style="background:#1C75BC">&nbsp;</span>div div_1

     <li><span class=swatch style="background:crimson">&nbsp;</span>paragraph
      p_1

     <li><span class=swatch style="background:white">&nbsp;</span>paragraph
      p_2

     <li><span class=swatch style="background:#E6E7E8">&nbsp;</span>range of
      flow that fits into region_1

     <li><span class=swatch style="background:#BCBEC0">&nbsp;</span>range of
      flow that fits into region_2
    </ul>
   </div>

   <p>The region style &lsquo;<code class=css>RSA</code>&rsquo; applies to
    flow content that is laid out in either &lsquo;<code
    class=css>region_1</code>&rsquo; or &lsquo;<code
    class=css>region_2</code>&rsquo;.</p>

   <p>The first rule set &lsquo;<code class=css>div {...}</code>&rsquo;
    applies to all <code class=html>&lt;div&gt;</code> elements that fit
    partially or fully into &lsquo;<code class=css>region_1</code>&rsquo; or
    &lsquo;<code class=css>region_2</code>&rsquo;. <code
    class=html>div_1</code> is split between &lsquo;<code
    class=css>region_1</code>&rsquo; and &lsquo;<code
    class=css>region_2</code>&rsquo; and gets the style from this style rule.</p>

   <p>The second rule set &lsquo;<code class=css>p {...}</code>&rsquo;
    applies to all <code class=html>&lt;p&gt;</code> elements that fit into
    &lsquo;<code class=css>region_1</code>&rsquo; or &lsquo;<code
    class=css>region_2</code>&rsquo;. In our example, both <code
    class=html>p_1</code> and <code class=html>p_2</code> are selected.</p>

   <p>The region style &lsquo;<code class=css>RSB</code>&rsquo; applies to
    flow content that fits in &lsquo;<code class=css>region_1</code>&rsquo;.</p>

   <p>The first rule set &lsquo;<code class=css>p {...}</code>&rsquo; matches
    <code class=html>p_1</code> and <code class=html>p_2</code> because these
    paragraphs flow into &lsquo;<code class=css>region_1</code>&rsquo;. Only
    the fragment of <code class=html>p_2</code> that flows into <code
    class=html>region_1</code> is styled with this rule.</p>
  </div>

  <div class=issue-marker data-bug_id=15734 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15734">Bug-15734</a>
   <div class=issue-details>
    <p class=short-desc>@region and specificity</p>
   </div>
  </div>

  <p>The specificity of the selectors in a &lsquo;<code
   class=css>@region</code>&rsquo; rule is calculated as <a
   href="http://www.w3.org/TR/css3-selectors/#specificity">defined</a> in the
   CSS Selectors module (see <a href="#SELECT"
   rel=biblioentry>[SELECT]<!--{{SELECT}}--></a>). In other words, the
   &lsquo;<code class=css>@region</code>&rsquo; rule adds an extra condition
   to the selector's matching, but does not change the selector's
   specificity. This is the same behavior as selectors appearing in
   &lsquo;<code class=css>@media</code>&rsquo; rules declaration blocks (see
   <a href="#MEDIAQ" rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a>), where
   the rule does not influence the selectors' specificity.

  <p>Consequently, selectors that match a given element (as describe above),
   participate in the <a
   href="http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascading-order">CSS
   Cascading order</a> as defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

  <div> Region styling does not apply to nested regions. For example, if a
   region &lsquo;<code class=property>A</code>&rsquo; receives content from a
   flow that contains region &lsquo;<code class=property>B</code>&rsquo;, the
   content that flows into &lsquo;<code class=property>B</code>&rsquo; does
   not receive the region styling specified for region &lsquo;<code
   class=property>A</code>&rsquo;.</div>

  <h2 id=multi-column-regions><span class=secno>4. </span>Multi-column
   regions</h2>

  <p>Column boxes of a <a
   href="http://dev.w3.org/csswg/css3-multicol/#multi-column-element">multi-column</a>
   element that has an assigned <a href="#named-flow0"><em><span>named
   flow</span></em></a> are regions. This means that a multi-column element
   can be used as a convenient short-hand to create multiple column-box
   regions into which content flows.

  <p>The fragment of content that flows into column-box regions is laid out
   according to the multi-column specification. In particular, when <a
   href="#flow-fragment-height-resolution">computing the flow fragment
   height</a> of a multi-column element that is associated with a <a
   href="#named-flow0"><em><span>named flow</span></em></a>, the &lsquo;<code
   class=property>column-fill</code>&rsquo; property is honored to balance
   the fragments of content that would flow across the column-box regions.

  <div class=example>
   <p>The following example:</p>

   <pre>
&lt;style&gt;    
   #multi-col {
       column-count: 2;
       flow-from: article;
       height: 6em;
       column-gap: 1em; 
   }
   
   #remainder {
       flow-from: article;
       height: auto;
   }
&lt;/style&gt;

&lt;div id="article"&gt;...&lt;div&gt;
&lt;div id="multicol"&gt&lt;/div&gt;
&lt;div id="remainder"&gt;&lt;/div&gt;</pre>

   <p>is equivalent but simpler than, for example:</p>

   <pre>
&lt;style&gt;    
   #flex {
       display: flex;
       flex-pack: justify;
   }
   #flex > div {
       flow-from: article;
       width: calc(50% - 0.5em);
   }

   #remainder {
       flow-from: article;
       height: auto;
   }
&lt;/style&gt;

&lt;div id="article"&gt;...&lt;div&gt;
&lt;div id="flex"&gt;
   &lt;div /&gt;
   &lt;div /&gt;
&lt;/div&gt;
&lt;div id="remainder"&gt;&lt;/div&gt;</pre>
  </div>

  <p>Overflow of column-box regions is mostly handled according to the same
   rules as other regions. If the content does not fit in the region, then
   the rest of the content flows into regions that follow in the region
   chain. However, if a column-box region is the last region in a
   <span>region chain, then the multi-column element must generate additional
   column-box regions if its flow fragment overflows as it would with normal
   content).</span>

  <h2 id="pseudo_elements"><span class=secno>5. </span>Pseudo-elements</h2>

  <div class=issue-marker data-bug_id=15188 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15188">Bug-15188</a>
   <div class=issue-details>
    <p class=short-desc>add functionality for having textual description like
     "continued here" or "continued on page x" to regions.</p>
   </div>
  </div>

  <p>It can be useful to visually mark the content to highlight that a
   content thread is flowing from region to region. For example, a marker
   such as <em>&lsquo;<code class=css>continues on page 3</code>&rsquo;</em>
   clearly indicates, at the end of a region, that there is more content in
   the flow which can be found on &lsquo;<code class=css>page 3</code>&rsquo;
   (in this example, the notion of page is application specific).

  <p>The &lsquo;<code class=css>::before</code>&rsquo; and &lsquo;<code
   class=css>::after</code>&rsquo; pseudo-elements (see <a href="#SELECT"
   rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a>) let content authors mark
   the beginning and end of a region with such markers.

  <p>If ::before or ::after pseudo-elements are used on a <a
   href="http://dev.w3.org/csswg/css3-multicol/#multi-column-element">multi-column</a>
   element that has an assigned <a href="#named-flow0"><em><span>named
   flow</span></em></a> then the ::before pseudo-element is only applied to
   the first column-box region, and the ::after pseudo-element is only
   applied to the last column-box region in that multi-column element.

  <h3 id=processing-model><span class=secno>5.1. </span>Processing model</h3>

  <p>The &lsquo;<code class=css>::before</code>&rsquo; content is laid out in
   the region prior to any other content coming from the flow. Note that it
   is possible to set the &lsquo;<code class=css>::before</code>&rsquo;
   pseudo-element's &lsquo;<code class=property>display</code>&rsquo;
   property to &lsquo;<code class=property>run-in</code>&rsquo; to align it
   with the content's inline boxes.

  <p>The &lsquo;<code class=css>::after</code>&rsquo; content is laid out in
   the region after laying out the flow content. Then, flow content is
   removed from the region to accommodate for the &lsquo;<code
   class=css>::after</code>&rsquo; content. Accommodating means that the
   &lsquo;<code class=css>::after</code>&rsquo; content is laid out without
   overflowing the region. If there is still not enough room to accommodate
   for the &lsquo;<code class=css>::after</code>&rsquo; content after
   removing all flow content, then the &lsquo;<code
   class=css>::after</code>&rsquo; content overflows. The &lsquo;<code
   class=property>display</code>&rsquo; property of the &lsquo;<code
   class=css>::after</code>&rsquo; content can be set to &lsquo;<code
   class=property>run-in</code>&rsquo; to align with the region's content's
   inline boxes. In that case, the &lsquo;<code
   class=css>::after</code>&rsquo; content becomes the last inline box of the
   previous element in the flow that has some visual rendering in the region
   and can accommodate for the &lsquo;<code class=css>::after</code>&rsquo;
   box.

  <h2 id="cssom_view_and_css_regions"><span class=secno>6. </span>CSSOM view
   and CSS regions</h2>

  <div class=issue-marker data-bug_id=15679 data-bug_status=NEW> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15679">Bug-15679</a>
   <div class=issue-details>
    <p class=short-desc>elementFromPoint and CSS regions</p>
   </div>
  </div>

  <p>Since content may flow into multiple regions, authors need a way to
   determine if there are enough regions to flow all the content from a named
   flow. This is especially important considering that the size of regions or
   the size of the content may change depending on the display context. For
   example, flowing the same content on a mobile phone with a small screen
   may require more regions than on a large desktop display. Another example
   is the user changing the font size of text flowing through regions.
   Depending on the change, new regions may be needed to accommodate for the
   additional space required to fit the larger text or some regions may need
   to be removed for smaller text.

  <h3 id=the-namedflow-interface><span class=secno>6.1. </span>The NamedFlow
   interface</h3>

  <p>A <a href="#named-flow0">named flow</a> is created when it becomes
   referenced by the &lsquo;<a href="#flow-into"><code
   class=property>flow-into</code></a>&rsquo; and/or &lsquo;<a
   href="#flow-from"><code class=property>flow-from</code></a>&rsquo;
   computed values. The following APIs allow scripts to reference a <a
   href="#dom-named-flow"><code class=idl>NamedFlow</code></a> object
   representation of a <a href="#named-flow0">named flow</a>.

  <p>The possible states for a <a href="#named-flow0">named flow</a> are
   described in the following figure. These states are referenced in
   subsequent text.

  <div class=figure> <img alt="NamedFlow states"
   src="images/named-flow-states.svg" width=600px>
   <p class=caption><a href="#named-flow0">named flow</a> states and
    transitions</p>
  </div>

  <p>An addition method and attribute on the <a
   href="http://www.w3.org/TR/dom/#interface-document"><code
   class=idl>Document</code></a> interface provide access to <a
   href="#named-flow0">named flows</a>.

  <pre class=idl>
partial interface <a
   href="http://www.w3.org/TR/dom/#interface-document">Document</a> {
  readonly attribute <a
   href="#dom-named-flow-collection">NamedFlowCollection</a> <a
   href="#document-namedflows">namedFlows</a>;
  <a
   href="#dom-named-flow">NamedFlow?</a> <a
   href="#document-getflowbyname">getFlowByName(DOMString name)</a>;
};               
</pre>

  <p>The <dfn id=document-namedflows><code class=idl>namedFlows</code></dfn>
   attribute on the <a
   href="http://www.w3.org/TR/dom/#interface-document"><code
   class=idl>Document</code></a> interface returns the live list of all the
   current <a href="#named-flow0">named flows</a> in the document.

  <p>The <a href="#document-namedflows"><code class=idl>namedFlows</code></a>
   collection must include all <a href="#named-flow0">named flows</a> that
   are currently in the <code>CREATED</code> and
   <code>CREATED-REFERENCED</code> states. The list may include <a
   href="#named-flow0">named flows</a> that are in the
   <code>REFERENCED</code> state. The list may also include <a
   href="#named-flow0">named flows</a>that are in the STALE state.

  <p>The <dfn id=document-getflowbyname><code
   class=idl>getFlowByName</code></dfn> method on the <a
   href="http://www.w3.org/TR/dom/#interface-document"><code
   class=idl>Document</code></a> interface provides access to the document's
   <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a> instances.
   The return value depends on the <a href="#named-flow0">named flow</a>
   state:

  <ul>
   <li><code class=idl>NULL</code>: the user agent must return
    <code>null</code>.

   <li><code class=idl>STALE</code>: the user agent may return null or a
    valid <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>
    instance. If the user agent returns a valid instance, subsequent calls to
    the <a href="#document-getflowbyname"><code
    class=idl>getFlowByName</code></a> method for the same name argument must
    return the same object instance, no matter what the state of the <a
    href="#named-flow0">named flow</a> is.

   <li><code class=idl>CREATED</code> or <code
    class=idl>CREATED-REFERENCED</code>: the user agent must return a valid
    <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a> instance.

   <li><code class=idl>REFERENCED</code>: the user agent may return
    <code>null</code> or it may return a valid <a
    href="#dom-named-flow"><code class=idl>NamedFlow</code></a> instance. If
    the user agent returns a valid object, subsequent calls to the <a
    href="#document-getflowbyname"><code class=idl>getFlowByName</code></a>
    method with the same name argument must return the same object instance,
    no matter what the state of the <a href="#named-flow0">named flow</a> is.
  </ul>

  <p>The <dfn id=dom-named-flow-collection><code
   class=idl>NamedFlowCollection</code></dfn> interface provides a list of
   current <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>
   instances in the document. The collection is live and methods operate on
   the underlying data, not a snapshot of the data.

  <pre class=idl>
interface NamedFlowCollection {
  readonly attribute unsigned long <a
   href="#dom-named-flow-collection-length">length</a>;
  getter <a
   href="#dom-named-flow">NamedFlow?</a> <a
   href="#named-flow-collection-item">item (unsigned long index)</a>;
};</pre>

  <p>The <dfn id=dom-named-flow-collection-length><code
   class=idl>length</code></dfn> attribute returns the number of items in the
   collection.

  <p>The <dfn id=dom-named-flow-collection-item><code
   class=idl>item(index)</code></dfn> method returns the item at index
   <em>index</em> in the collection or <code class=idl>null</code> if
   <em>index</em> is out of range. An object <code>collection</code>
   implementing <a
   href="#dom-named-flow-collection"><code>NamedFlowCollection</code></a>
   supports indices in the range <code>0 ≤ index <
   collection.length</code>.

  <p>The <dfn id=dom-named-flow><code class=idl>NamedFlow</code></dfn>
   interface offers a representation of the <a href="#named-flow0">named
   flow</a>. A <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>
   object is live meaning that it always represents the <a
   href="#named-flow0">named flow</a> with the corresponding name, even if
   that <a href="#named-flow0">named flow</a> has transitioned to the
   <code>REFERENCED</code> or the <code>STALE</code> states.

  <pre class=idl>
interface <a
   href="#dom-named-flow">NamedFlow</a> implements <a
   href="http://www.w3.org/TR/dom/#interface-eventtarget">EventTarget</a> {
  readonly attribute DOMString <a
   href="#dom-named-flow-name">name</a>;
  readonly attribute boolean <a
   href="#dom-named-flow-overset">overset</a>;
  sequence&lt;<a
   href="#region-interface">Region</a>&gt; <a
   href="#dom-named-flow-get-regions">getRegions()</a>;
  readonly attribute integer <a
   href="#dom-named-flow-first-empty-region-index">firstEmptyRegionIndex</a>;
  <a
   href="http://www.w3.org/TR/dom/#interface-nodelist">NodeList</a> <a
   href="#dom-named-flow-get-content">getContent()</a>;
  sequence&lt;<a
   href="#region-interface">Region</a>&gt; <a
   href="#dom-named-flow-get-regions-by-content">getRegionsByContent</a>(<a
   href="http://www.w3.org/TR/dom/#interface-node">Node</a> node);
};</pre>

  <p>The <dfn id=dom-named-flow-name><code class=idl>name</code></dfn>
   attribute returns the name of the <a href="#dom-named-flow"><code
   class=idl>NamedFlow</code></a> instance.

  <p>The <dfn id=dom-named-flow-overset><code class=idl>overset</code></dfn>
   attribute returns true if the <a href="#named-flow0">named flow</a> does
   not fully fit in the associated regions. Otherwise, it returns false.

  <p>The <dfn id=dom-named-flow-get-regions><code
   class=idl>getRegions()</code></dfn> method returns the sequence of regions
   in the <span>region chain</span> associated with the <a
   href="#named-flow0">named flow</a>. Note that the returned values is a
   static sequence.

  <p>The <dfn
   id=dom-named-flow-first-empty-region-index>firstEmptyRegionIndex</dfn> is
   the index of the first region in the region chain with the <a
   href="#dom-region-regionoverset"><code>regionOverset</code></a> attribute
   set to <code>empty</code>. If all regions have the <a
   href="#dom-region-regionoverset"><code>regionOverset</code></a> attribute
   set to <code>fit</code> or <a
   href="#dom-named-flow-overset"><code>overset</code></a>, the value for <a
   href="#dom-named-flow-first-empty-region-index"><code>firstEmptyRegionIndex</code></a>
   is <code>-1</code>. If there are no regions in the <span>region
   chain</span>, the value is <code>-1</code> as well.

  <p>The <dfn id=dom-named-flow-get-content>getContent()</dfn> methods
   returns an ordered collection of nodes that constitute the <a
   href="#named-flow0">named flow</a>. The returned list is a static snapshot
   of the <a href="#named-flow0">named flow</a> content at the time the
   method is invoked. This list contains the elements that were moved to the
   <a href="#named-flow0">named flow</a> but not their descendants (unless
   the descendants are themselves moved to the <a href="#named-flow0">named
   flow</a>).

  <p>The <dfn
   id=dom-named-flow-get-regions-by-content>getRegionsByContent()</dfn>
   method returns the sequence of regions that contain at least part of the
   target content node. Note that the returned values is a static sequence.

  <p>The <a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>
   interface can be used for different purposes. For example, the <a
   href="#dom-named-flow-get-regions-by-content"><code>getRegionsByContent()</code></a>
   method can help navigate by bookmark: a script can find the
   <span>region</span>s that display a particular anchor and bring them to
   view.

  <p>Likewise, the interface allows authors to check if all content has been
   fitted into existing regions. If it has, the <a
   href="#dom-named-flow-overset"><code>overset</code></a> attribute would be
   false.

  <h3 id=the-region-interface><span class=secno>6.2. </span>The Region
   interface</h3>

  <p>The <dfn id=region-interface><code class=idl>Region</code>
   interface</dfn> provides an abstraction for <a
   href="http://www.w3.org/TR/dom/#interface-element"><code
   class=idl>Element</code>s</a>, pseudo-elements or other CSS constructs
   (such as <a
   href="http://dev.w3.org/csswg/css3-page-template/#templates-and-slots">slots</a>
   <a href="#CSS3-PAGE-TEMPLATE"
   rel=biblioentry>[CSS3-PAGE-TEMPLATE]<!--{{!CSS3-PAGE-TEMPLATE}}--></a>)
   which can be regions.

  <pre class=idl>
interface Region {
  readonly attribute DOMString <a
   href="#dom-region-regionoverset">regionOverset</a>;
  readonly attribute DOMString <a
   href="#dom-region-flowfrom">flowFrom</a>;
  sequence&lt;<a
   href="#">Range</a>&gt;? <a
   href="#dom-region-getregionflowranges">getRegionFlowRanges()</a>;
};</pre>

  <p>The <dfn id=dom-region-regionoverset><code
   class=idl>regionOverset</code></dfn> attribute returns one of the
   following values:

  <dl>
   <dt>&lsquo;<a href="#dom-named-flow-overset"><code
    class=property>overset</code></a>&rsquo;

   <dd>The region is the last one in the <span title=region-chain>region
    chain</span> and not able to fit the remaining content from the <a
    href="#named-flow0">named flow</a>. Note that the region's <a
    href="http://www.w3.org/TR/CSS21/visufx.html#overflow"><code
    class=idl>overflow</code></a> property value can be used to control the
    visibility of the overflowing content and the &lsquo;<a
    href="#region-overflow"><code
    class=property>region-overflow</code></a>&rsquo; property controls
    whether or not fragmentation happens on the content that overflows the
    last region.

   <dt>&lsquo;<code class=property>fit</code>&rsquo;

   <dd>The region's flow fragment content fits into the region's <a
    href="http://www.w3.org/TR/CSS21/box.html#box-dimensions">content
    box</a>. If the region is the last one in the <span
    title=region-chain>region chain</span>, it means that the content fits
    without overflowing. If the region is not the last one in the region
    chain, that means the <a href="#named-flow0">named flow</a> content is
    further fitted in subsequent regions. In this last case, note that the <a
    href="#named-flow0">named flow</a> fragment may be empty (for example if
    the region is too small to accommodate any content).

   <dt>&lsquo;<code class=property>empty</code>&rsquo;

   <dd>All content from the <a href="#named-flow0">named flow</a> was fitted
    in prior regions.
  </dl>

  <p>Note that if there is no content in the <a href="#named-flow0">named
   flow</a>, all regions associated with that <a href="#named-flow0">named
   flow</a> should have their <a href="#dom-region-regionoverset"><code
   class=idl>regionOverset</code></a> attribute return &lsquo;<code
   class=property>empty</code>&rsquo;. If there is content in the flow but
   that content does not generate any box for visual formatting, the
   &lsquo;<a href="#dom-named-flow-overset"><code
   class=property>overset</code></a>&rsquo; attribute on the first region in
   the region chain associated with the flow will return &lsquo;<code
   class=property>fit</code>&rsquo;.

  <p>The <dfn id=dom-region-flowfrom>flowFrom</dfn> attribute returns the
   name of the <a href="#named-flow0">named flow</a> this region is
   associated with.

  <p>The <dfn id=dom-region-getregionflowranges>getRegionFlowRanges</dfn>
   method returns an array of <a
   href="http://www.w3.org/TR/dom/#interface-range"> Range</a> instances
   corresponding to fragment from the <a href="#named-flow0">named flow</a>
   that is laid out in the region. If the region does not received any
   fragment because it is too small to accommodate any, the method returns a
   single <code class=idl>Range</code> where the <code>startContainer</code>
   and <code>startOffset</code> have the same values as the
   <code>endContainer</code> and <code>endOffset</code>. In that situation,
   if the region is the first in the <span>region chain</span>, the
   <code>startContainer</code> is the first <code>Node</code> in the <a
   href="#named-flow0">named flow</a> and the <code>startOffset</code> is
   zero. If the region is the last region in the region chain (but not the
   first and only one), the <code>startContainer</code> and
   <code>startOffset</code> are the same values as the
   <code>endContainer</code> and <code>endOffset</code> on the previous
   region in the <span>region chain</span>. The method returns null if the
   <span>region</span> object is not (or no longer) a region.

  <div class=note>
   <p>A <code class=idl>Region</code> instance may represent and object that
    is no longer a <span>region</span>. This may happen, for example if the
    &lsquo;<a href="#flow-from"><code
    class=property>flow-from</code></a>&rsquo; property on the corresponding
    pseudo-element, element or other construct becomes &lsquo;<code
    class=property>none</code>&rsquo; but a script is still holding a
    reference to the <code class=idl>Region</code> object.</p>
  </div>

  <p>If a <code class=idl>Region</code> instance is no longer a
   <span>region</span>, accessing its attributes (<a
   href="#dom-region-regionoverset"><code class=idl>regionOverset</code></a>
   and <a href="#dom-region-flowfrom"><code class=idl>flowFrom</code></a>) or
   invoking its <a href="#dom-region-getregionflowranges"><code
   class=idl><span
   title="#document-element-getregionflowranges">getRegionFlowRanges</span></code></a>
   method throws a <a
   href="http://www.w3.org/TR/dom/#interface-domexception"><code
   class=idl>DOMException</code></a> with the <a
   href="http://www.w3.org/TR/dom/#dom-domexception-invalid_access_err"><code
   class=idl>INVALID_ACCESS_ERR</code></a> error code.

  <h3 id=region-flow-layout-events><span class=secno>6.3. </span>Region flow
   layout events</h3>

  <p><a href="#dom-named-flow"><code class=idl>NamedFlow</code></a> objects
   are <a href="">Event Targets</a> which dispatch <code
   class=idl>regionLayoutUpdate</code> events when there is a possible layout
   change of their <a href="#named-flow0">named flow</a> fragment. Note that
   the event is asynchronous.

  <table border=0 cellpadding=2 cellspacing=0 class=event-desc
   summary="This table contains information about the semantics of the given event type">
   <tbody>
    <tr class="assert must">
     <th>Type

     <td class=eventname><strong><code>regionLayoutUpdate</code></strong>

    <tr class="assert must">
     <th>Interface

     <td><code><a
      href="http://www.w3.org/TR/DOM-Level-3-Events/#webidl-events-UIEvent">UIEvent</a></code>
      (see <a href="#DOM-LEVEL-3-EVENTS"
      rel=biblioentry>[DOM-LEVEL-3-EVENTS]<!--{{!DOM-LEVEL-3-EVENTS}}--></a>)

    <tr class="assert must">
     <th>Sync / Async

     <td>Async

    <tr class="assert must">
     <th>Bubbles

     <td>Yes

    <tr class="assert must">
     <th>Target

     <td><a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>

    <tr class="assert must">
     <th>Cancelable

     <td>Yes

    <tr class="assert must">
     <th>Default action

     <td>none

    <tr class="assert must">
     <th>Context info

     <td>
      <ul>
       <li><code class=attribute-name>Event.target</code>: <a
        href="#dom-named-flow"><code class=idl>NamedFlow</code></a> whose
        layout may have changed
      </ul>
  </table>

  <h3 id=cssomview-and-regions><span class=secno>6.4. </span>CSS OM View and
   CSS Regions</h3>

  <h4 id=cssomview-getclientrects-and-getboundingclientrect><span
   class=secno>6.4.1. </span><code class=idl>getClientRects()</code> and
   <code>getBoundingClientRects()</code></h4>

  <p>The <a href="http://www.w3.org/TR/cssom-view/">CSSOM View Module</a>
   defines how user agents compute the bounding client rectangle for an
   element (<code class=idl>getBoundingClientRect()</code>) and its generated
   boxes (<code class=idl>getClientRects()</code>).

  <p>This definition applies to CSS regions and the multiple boxes generated
   for an element flowing through multiple regions. The <code
   class=idl>getClientRects()</code> method returns the list of boxes
   generated for each of the element fragment laid out different regions. The
   <code>getBoundingClientRect()</code> method operates as specified in the
   <a href="http://www.w3.org/TR/cssom-view/">CSSOM View Module</a> as well
   and is computed from the set of rectangles returned by <code
   class=idl>getClientRects()</code>.

  <h4 id=cssomview-offset-attributes><span class=secno>6.4.2. </span><code
   class=idl>offsetTop</code>, <code class=idl>offsetLeft</code>, <code
   class=idl>offsetWidth</code> and <code class=idl>offsetWidth</code></h4>

  <p>The computation of the <a
   href="http://dev.w3.org/csswg/cssom-view/#offset-attributes">offset
   attributes</a> for elements laid out in a <span>named flow follow the <a
   href="http://dev.w3.org/csswg/cssom-view/#offset-attribute">specification</a>.
   For the purpose of the algorithm, the <em>first CSS layout box</em>
   associated with an element laid out in a <a href="#named-flow0">named
   flow</a> is the box generated for the first region the element is laid out
   into.</span>

  <h2 id=regions-visual-formatting-details><span class=secno>7.
   </span>Regions visual formatting details</h2>

  <p>Regions are laid out by CSS and take part in the normal box model and
   other layout models offered by CSS modules such as flexible boxes (<a
   href="#CSS3-FLEXBOX"
   rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>). However,
   <span>regions</span> lay out a fragment of their <a
   href="#named-flow0">named flow</a> instead of laying out descendant
   content as happens with other boxes.

  <p>This section describes the model for laying out <span>regions</span> and
   for laying out <a href="#named-flow0">named flow</a> content into regions.
   The descriptions in this section are biased towards a horizontal writing
   mode, using <span>width</span> for logical width (or measure) and
   <span>height</span> for logical height (or extent) as <a
   href="http://www.w3.org/TR/css3-writing-modes/#abstract-dimensions">defined</a>
   in the CSS Writing Modes Module <a href="#CSS3-WRITING-MODES"
   rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>).
   To use this model in a vertical writing mode apply the principles <a
   href="http://www.w3.org/TR/css3-writing-modes/#vertical-layout">described</a>
   in that specification.

  <h3 id=regions-flow-content-box><span class=secno>7.1. </span>The Region
   Flow Content Box (RFBC)</h3>

  <p>A region box lays out the following boxes:

  <ul>
   <li>The boxes generated by its <code class=css>::before</code> and <code
    class=css>::after</code> pseudo-elements, if any.

   <li>The anonymous <def>region flow content box (called <def>RFCB</def> in
    this document) which contains the fragment of the <a
    href="#named-flow0">named flow</a> that the region receives.</def>
  </ul>

  <div class=figure> <img src="images/RFCB.svg" width=600px>
   <p class=caption>The Region Flow Content Box (RFCB)</p>
  </div>

  <p>Laying out a <span>region</span> box follows the same processing rules
   as for any other <a
   href="http://www.w3.org/TR/CSS2/visuren.html#block-boxes">block container
   box</a>.

  <p>The <span>RFCB</span> is a <a
   href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes">block container
   box</a> with a <a href="">computed</a> &lsquo;<code
   class=property>width</code>&rsquo; of &lsquo;<code
   class=property>auto</code>&rsquo; and a whose <a href="">used</a>
   &lsquo;<code class=property>height</code>&rsquo; is resolved as detailed
   below.

  <h4 id=rfbc-width-resolution><span class=secno>7.1.1. </span>RFCB
   &lsquo;<code class=property>width</code>&rsquo; resolution</h4>

  <p>At various points in the visual formatting of documents containing
   regions, the used &lsquo;<code class=property>width</code>&rsquo; of RFCBs
   and regions need to be resolved. In all cases, the resolution is done
   following the rules for <a
   href="http://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins">calculating
   widths and margins</a> (see <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>). Sometimes, resolving the
   used &lsquo;<code class=property>width</code>&rsquo; value requires
   measuring the content's <code class=css>min-content</code> and <code
   class=css>max-content</code> values (as <a
   href="http://www.w3.org/TR/css3-writing-modes/#intrinsic-sizing">defined</a>
   in the CSS Writing Modes Module <a href="#CSS3-WRITING-MODES"
   rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>).
   For an RFCB, <strong>these measures are made on the <em>entire</em>
   associated <a href="#named-flow0">named flow</a> content</strong>.

  <p>As a consequence, all <span>RFCBs</span> of <span>regions</span>
   associated with a given <a href="#named-flow0">named flow</a> share the
   same <code class=css>min-content</code> and <code
   class=css>max-content</code> measures.

  <p>This approach is consistent with the <a
   href="http://www.w3.org/TR/css3-break/#varying-size-boxes">box model for
   breaking</a> (<a href="#CSS3-BREAK"
   rel=biblioentry>[CSS3-BREAK]<!--{{!CSS3-BREAK}}--></a>).

  <h3 id=regions-visual-formatting-steps><span class=secno>7.2.
   </span>Regions visual formatting steps</h3>

  <p>Formatting documents that contain <a href="#named-flow0">named flows</a>
   laid out in regions is a three-step process:

  <ul>
   <li><em>Step 1: RFCB <def>flow fragment height</def> resolution</em>. In
    this step, the heights of fragments fitting in the regions' RFCBs are
    resolved.

   <li><em>Step 2: document and regions layout</em>. In this step, the
    document content and regions are laid out. However, <a
    href="#named-flow0">named flow</a> content is not laid out in regions
    yet.

   <li><em>Step 3: <a href="#named-flow0">named flow</a> layout</em>. In this
    step, the content of <a href="#named-flow0">named flows</a> is laid out
    in their respective <span>region chains</span>.
  </ul>

  <div class=figure> <img src="images/regions-layout-three-steps.svg"
   width=600px>
   <p class=caption>Regions visual formatting steps</p>
  </div>

  <h4 id=rfcb-flow-fragment-height-resolution><span class=secno>7.2.1.
   </span>Step 1: RFCB flow fragment height resolution</h4>

  <p>Conceptually, resolving the flow fragment height is a two phase process.

  <h5 id=rfcb-flow-fragment-height-resolution-phase-1><span
   class=secno>7.2.1.1. </span>RFCB flow fragment height resolution, Phase 1</h5>

  <p>The document is laid out with a <a
   href="http://www.w3.org/TR/CSS2/cascade.html#used-value">used</a> height
   of zero for all <span>RFCB</span>s. In this phase, the content of <a
   href="#named-flow0">named flows</a> is not laid out in
   <span>regions</span>. This phase yields resolved position and sizes for
   all regions and their RFCBs in the document.

  <h5 id=rfcb-flow-fragment-height-resolution-phase-2><span
   class=secno>7.2.1.2. </span>RFCB flow fragment height resolution, Phase 2</h5>

  <p><a href="#named-flow0">Named flows</a> are laid out in
   <span>regions</span>. The user agent resolves the <em><span>flow fragment
   height</span></em> for the <span>RFCB</span>s using the remainder of the
   flow and accounting for <a
   href="http://www.w3.org/TR/css3-break/">fragmentation rules</a>. This
   process accounts for constraints such as the &lsquo;<code
   class=property>height</code>&rsquo; or &lsquo;<code
   class=property>max-height</code>&rsquo; values, as described in the CSS
   2.1 section on <a
   href="http://www.w3.org/TR/CSS2/visudet.html#Computing_heights_and_margins">calculating
   heights and margins</a> (see the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#normal-block">Block-level
   non-replaced elements in normal flow when &lsquo;<code
   class=property>overflow</code>&rsquo; computes to &lsquo;<code
   class=property>visible</code>&rsquo;</a> section and the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#block-root-margin">complicated
   cases</a> section). During this phase, generated content is laid out
   according to the <a href="#processing-model">rules</a> described earlier
   in this document.

  <h4 id=regions-boxes-layout><span class=secno>7.2.2. </span>Step 2: regions
   boxes layout</h4>

  <p>In this step, the document is laid out according to the normal CSS
   layout rules.

  <p>If a measure of the content is required to resolve the used &lsquo;<code
   class=property>width</code>&rsquo; of the region box, the value is
   resolved as described in the <a href="#rfbc-width-resolution">RFCB width
   resolution</a> section.

  <p>If a measure of the content is required to resolve the used height of
   the RFCB (for example if the region box is absolutely positioned), the
   <span>flow fragment height</span> resolved in Step 1 is used for the
   vertical content measure of the RFCB.

  <p>At the end of this step, regions are laid out and ready to receive
   content from their associated <a href="#named-flow0">named flows</a>.

  <h4 id=named-flows-layout><span class=secno>7.2.3. </span>Step 3: named
   flows layout</h4>

  <p>In this final step, the content of <a href="#named-flow0">named
   flows</a> is laid out in the <span>regions</span>&lsquo;<code class=css>
   RFCBs along with the generated content boxes.</code>

  <p>The used &rsquo;width' for RFCBs is resolved <a
   href="#rfbc-width-resolution">as described before</a>.

  <p>The used &lsquo;<code class=property>height</code>&rsquo; of RFCBs is
   resolved such that none of the boxes in the region box's normal flow
   overflow the region's box. In other words, the RFCB boxes are stretched
   vertically to accommodate as much of the flow as possible without
   overflowing the region box and accounting for <a
   href="http://www.w3.org/TR/css3-break/">fragmentation rules</a> and
   generated content boxes.

  <p>During this phase, generated content is laid out according to the <a
   href="#processing-model">rules</a> described earlier in this document.

  <div class=note>
   <p>The model for resolving auto sized regions will cause, under certain
    circumstances, the flow content to be overset or underset. In other
    words, it will not fit tightly. The model prevents having circular
    dependencies in the layout model. Implementations may decide to apply
    further layout steps to ensure that the whole flow content is displayed
    to the user, even in edge cases.</p>
  </div>

  <h3 id=regions-visual-formatting-implementation-note><span class=secno>7.3.
   </span>Regions visual formatting: implementation note</h3>

  <p>The process for resolving an RFCB's &lsquo;<code
   class=property>height</code>&rsquo; and the three-step process used to lay
   out documents containing regions and <a href="#named-flow0">named
   flows</a> are <em>conceptual</em> descriptions of what the layout should
   yield and implementations should optimize to reduce the number of steps
   and phases necessary wherever possible.

  <h3 id=regions-visual-formatting-examples><span class=secno>7.4.
   </span>Regions visual formatting example</h3>

  <p>This section is non-normative.

  <p>This example considers a document where content flows between three
   regions, and region boxes are intermixed with the normal document content.

  <div class=example>
   <pre>
&lt;style&gt;
#article {
    flow-into: article;
}

#rA, #rB, #rC {
    flow-from: article;
    height: auto;
    margin: 1em 1em 0em 1em;
    padding: 1em;
    border: 3px solid #46A4E9;
}

#rA {
    width: auto;
    height: auto;
}

#rB {
    float: left;
    width: 15em;
    height: auto;
    max-height: 150px;
}

#rC {
    float: right;
    width: 12em;
    height: auto;
}

#main-flow {
    padding: 0em 1em 0em 1em;
}

&lt;/style&gt;       
&lt;body&gt;
    &lt;div id="article"&gt;
        &lt;p style="region-break-after:always;"&gt;I am not a ... &lt;/p&gt;
        &lt;p&gt;...&lt;/p&gt;
    &lt;/div&gt;
    &lt;div id="rA"&gt;&lt;/div&gt;
    &lt;div id="rB"&gt;&lt;/div&gt;
    &lt;div id="rC"&gt;&lt;/div&gt;

    &lt;div id="main-flow"&gt;
        &lt;p&gt;Lorem ipsum dolor ...&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;            
        </pre>
  </div>

  <p>The following sections and figures illustrate the intermediate results
   for the visual formatting process. In the following, we call RFCB-A,
   RFCB-B and RFCB-C the <span>RFCBs</span> for regions rA, rB and rC
   respectively.

  <h4 id=step-1--phase-1-laying-out-rfcbs-with-us><span class=secno>7.4.1.
   </span>Step 1 - Phase 1: Laying out RFCBs with used height of zero</h4>

  <p>Applying the rules for Step 1, Phase 1, the computed &lsquo;<code
   class=property>auto</code>&rsquo; &lsquo;<code
   class=property>width</code>&rsquo; values for the RFCBs are resolved to
   used values according to the normal <a
   href="http://www.w3.org/TR/CSS2/visudet.html#Computing_widths_and_margins">CSS
   layout rules</a> meaning they stretch to the width of their containing
   block's content box.

  <ol>
   <li>RFCB-A: stretches to fit the rA content box.
  </ol>

  <p> Since rA also has an &lsquo;<code class=property>auto</code>&rsquo;
   &lsquo;<code class=property>width</code>&rsquo;, its own used &lsquo;<code
   class=property>width</code>&rsquo; is stretched to fit the
   <code>&lt;body&gt;</code> content box.

  <ul>
   <li>RFCB-B: stretches to fit the <code>rB</code> content box.

   <li>RFCB-C: stretches to fit the <code>rC</code> content box.
  </ul>

  <p>Also applying the rules for Step 1, Phase 1, the used values for the
   RFCBs &lsquo;<code class=property>height</code>&rsquo; properties are all
   zero.

  <p>Conceptually, this produces the layout illustrated below.

  <div class=figure> <img
   alt="Step 1 - Phase 1: Layout RFBCs with used heights of 0"
   src="images/flow-fragment-height-phase-1.png" width=500px>
   <p class=caption>Step 1 - Phase 1: Layout RFBCs with used heights of 0</p>
  </div>

  <h4 id=step-1--phase-2-layout-flow-to-compute-t><span class=secno>7.4.2.
   </span>Step 1 - Phase 2: Layout flow to compute the RFCBs' flow fragments
   heights</h4>

  <p>In this second phase of Step 1, the named flow is laid out in
   <span>regions</span> and the height of each fragment falling in each RFCB
   is computed.

  <p>The user agent lays out as much of the flow into an area with RFCB-A's
   used &lsquo;<code class=property>width</code>&rsquo;. rA's &lsquo;<code
   class=property>height</code>&rsquo; computes to &lsquo;<code
   class=property>auto</code>&rsquo; and there is no vertical maximum height
   for RFCA's &lsquo;<code class=property>height</code>&rsquo;. However,
   because there is a break after the first paragraph in the &lsquo;<code
   class=property>article</code>&rsquo; <a href="#named-flow0"><code>named
   flow</code></a>, only this first paragraph is laid out in RFCB-A and FH-A
   (the flow fragment height for RFCB-A) is resolved by laying out this first
   paragraph in the used &lsquo;<code class=property>width</code>&rsquo;.

  <p>At this point, the user agent lays out as much of the remaining flow as
   possible in RFCB-B. Because rB's &lsquo;<code
   class=property>max-height</code>&rsquo; computed value is &lsquo;<code
   class=css>150px</code>&rsquo;, the user agent only lays out the
   &lsquo;<code class=property>article</code>&rsquo; named flow using
   RFCB-B's used &lsquo;<code class=property>width</code>&rsquo; until the
   point where laying out additional content would cause RFCB-B to overflow
   rB's box. The fragment height for RFCB-B is resolved: FH-B (<code
   class=css>150px</code>).

  <p>Finally, the user agent lays out the remainder of the flow in RFCB-C.
   Because rC has no other constraints and no region breaks, the remaining
   content is laid out in RFCB-C's used &lsquo;<code
   class=property>width</code>&rsquo;. This results in a resolved flow
   fragment height: FH-C.

  <div class=figure> <img
   alt="Step 1 - Phase 2: Measure flow fragments heights"
   src="images/flow-fragment-height-phase-2.png" width=370px>
   <p class=caption>Step 1 - Phase 2: Measure flow fragments heights</p>
  </div>

  <h4 id=step-2-layout-document-and-regions-witho><span class=secno>7.4.3.
   </span>Step 2: Layout document and regions without named flows</h4>

  <p>The used &lsquo;<code class=property>width</code>&rsquo; of RFCB-A,
   RFCB-B and RFCB-C are resolved as in the previous step. However, the
   &lsquo;<code class=property>height</code>&rsquo; is resolved differently.

  <p>Resolving the &lsquo;<code class=property>height</code>&rsquo; of rA <a
   href="http://www.w3.org/TR/CSS2/visudet.html#normal-block">requires a
   content measure</a> which is FH-A (the flow fragment height for RFCB-A).

  <p>The &lsquo;<code class=property>height</code>&rsquo; of rB results from
   first computing its <a
   href="http://www.w3.org/TR/CSS2/visudet.html#block-root-margin">content
   measure</a> and then applying the <a
   href="http://www.w3.org/TR/CSS2/visudet.html#min-max-heights">rules for
   &lsquo;<code class=property>max-height</code>&rsquo;</a>. Here, the
   vertical content measure evaluates to FH-B. After applying the rules for
   &lsquo;<code class=property>max-height</code>&rsquo; and accounting for
   margins, padding and borders, the used &lsquo;<code
   class=property>height</code>&rsquo; of rB is resolved to LH-B (<code
   class=css>150px</code>)..

  <p>The &lsquo;<code class=property>height</code>&rsquo; of rC's box results
   from <a
   href="http://www.w3.org/TR/CSS2/visudet.html#block-root-margin">calculating
   its content measure</a>: FH-C becomes rC's used &lsquo;<code
   class=property>height</code>&rsquo;.

  <div class=figure> <img
   alt="Step 2: Layout document and regions without named flows"
   src="images/regions-visual-formatting-step-2.png" width=370px>
   <p class=caption>Step 2: Layout document and regions without <a
    href="#named-flow0">named flows</a></p>
  </div>

  <h4 id=step-3-named-flows-layout><span class=secno>7.4.4. </span>Step 3:
   named flows layout</h4>

  <p>In this final step, the <code class=css>article</code> <a
   href="#named-flow0">named flow</a> is laid out in its <span>region
   chain</span>. The used &lsquo;<code class=property>width</code>&rsquo; for
   each of the RFCB is resolved as in step 1 above.

  <p>The used &lsquo;<code class=property>height</code>&rsquo; for the RFCB
   is a result of laying out the as much of the content in the
   <span>region</span> without overflowing its content box and following the
   <a href="http://www.w3.org/TR/css3-break/">fragmentation rules</a>.

  <p>Because the computed &lsquo;<code class=property>width</code>&rsquo; of
   the RFCB has not changed and the fragmentation rules applied are the same
   as in Phase 1, Step 2, the used &lsquo;<code
   class=property>height</code>&rsquo; for RFCB-A, RFCB-B and RFCB-C are
   LH-A, LH-B and LH-C, respectively.

  <p>There may be situations where the used &lsquo;<code
   class=property>height</code>&rsquo; of RFCBs resolved in Step 3 are
   different from the <span>flow fragment height</span> computed in Step 1
   Phase 2.

  <div class=figure> <img
   alt="Step 3: Final result after laying out named flows in regions"
   src="images/regions-visual-formatting-step-3.png" width=370px>
   <p class=caption>Step 3: Final result after laying out named flows in
    regions</p>
  </div>

  <h2 id=relation-to-document-events><span class=secno>8. </span>Relation to
   document events</h2>

  <p>The CSS regions module does not alter the normal processing of events in
   the document tree. In particular, if an event occurs on an element that is
   part of a <a href="#named-flow0">named flow</a>, the <a
   href="http://www.w3.org/TR/dom/#events">event's bubble and capture
   phases</a> happen following the document tree order.

  <h2 id=relation-to-other-specifications><span class=secno>9.
   </span>Relation to other specifications</h2>

  <p>This specification is related to other specifications as described in
   the <a href="#references">references</a> section. In addition, it is
   related to the following specifications:

  <ol>
   <li>CSS Fragmentation Module Level 3 <a href="#CSS3-BREAK"
    rel=biblioentry>[CSS3-BREAK]<!--{{CSS3-BREAK}}--></a>. This module
    defines the rules for fragmenting content over multiple containers and
    applies to CSS regions in addition to applying to multi-column and paged
    media.

   <li>CSS Pagination Templates Module Level 3 <a href="#CSS3-PAGE-TEMPLATE"
    rel=biblioentry>[CSS3-PAGE-TEMPLATE]<!--{{CSS3-PAGE-TEMPLATE}}--></a>.
    This module defines a syntax to define layout templates which can be used
    when paginating content. The page templates use regions.

   <li>CSS Exclusions Module <a href="#CSS3-EXCLUSIONS"
    rel=biblioentry>[CSS3-EXCLUSIONS]<!--{{CSS3-EXCLUSIONS}}--></a>. This
    module defines a generic way to define arbitrarily shaped exclusions into
    which content can flow or around which content can flow. This can be seen
    as an extension to the way CSS floats provide rectangular areas into
    which content flows and around which content flows. In advanced layout
    designs, it is expected that the CSS Exclusions module will be commonly
    combined with the CSS regions module.

   <li>CSS Line Grid Module <a href="#CSS3-LINE-GRID"
    rel=biblioentry>[CSS3-LINE-GRID]<!--{{CSS3-LINE-GRID}}--></a>. This
    module defines a concept of line grid to align the position of lines in
    different elements. The line grid functionality is related and needed for
    aligning content flowing in separate regions.
  </ol>

  <h2 id=usecases><span class=secno>10. </span>Use Cases</h2>

  <p>Use cases are described on <a
   href="http://wiki.csswg.org/spec/css3-regions/regions-use-cases">this
   page</a>.

  <h2 id=conformance><span class=secno>11. </span>Conformance</h2>

  <h2 id=changes><span class=secno>12. </span>Changes</h2>

  <h3 id="changes_from_June_09_2011"><span class=secno>12.1. </span>Changes
   from <a
   href="http://www.w3.org/TR/2011/WD-css3-regions-20111129/">November
   29<sup>th</sup> 2011</a> version</h3>

  <ul>
   <li>Modified region styling examples to use element selector instead of of
    pseudo-code selectors (this had been omitted in the previous pass at
    removing pseudo-code from the examples).

   <li>Removed divs with class set to "issue moved", "issue stale" and "issue
    resolved" since these divs where not displayed.

   <li>Minor updates to the alternate stylesheet.

   <li>Removed "This section is normative" paragraphs since in CSS
    specifications, sections are normative unless otherwise specified.

   <li>Removed "This section is informative" paragraphs since in CSS
    specifications notes are always informative.

   <li>Reworded the text about flow-into: &lt;ident&gt; and removed obsolete
    text about the interaction with the &lsquo;<code
    class=property>content</code>&rsquo; property.

   <li>Removed "this section is non-normative" from the "Regions Concepts"
    section.

   <li>In the section on region breaks, removed descriptions of break values
    normatively defined in external specifications. Removed the section about
    split boxes and replaced with paragraph referencing the page breaking
    behavior. Removed the discussion about how the &lsquo;<code
    class=property>overflow</code>&rsquo; property applies to content flown
    in regions from the break section, since this is covered in the section
    on &lsquo;<a href="#region-overflow"><code
    class=property>region-overflow</code></a>&rsquo; already. See <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Dec/0477.html">mailing
    list feedback.</a>

   <li>Clarified that @region style rules only apply to the &lsquo;<code
    class=property>portion</code>&rsquo; of an element that falls into the
    corresponding region and added an issue that the model for &lsquo;<code
    class=property>partial</code>&rsquo; styling needs to be defined. See <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Dec/0480.html">mailing
    list feedback</a>.

   <li>Clarified that the <code>NodeList</code> returned by
    <code>getRegionsByContentNode</code> is live.

   <li>Added a name property to the <a
    href="#dom-named-flow"><code>NamedFlow</code></a> interface. Added a <a
    href="#dom-named-flow-collection"><code>NamedFlowCollection</code></a>
    interface and added a <code>getNamedFlows</code> method on the
    <code>Document</code> interface, as per <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15828">Bug
    15828</a>.

   <li>Modified wording about containing block resolution for absolutely
    positioned elements in a named flow.

   <li>Modified initial examples as per <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15131">Bug 15131</a>

   <li>Multiple editorial changes following <a
    href="http://lists.w3.org/Archives/Public/www-style/2012Feb/0001.html">mailing
    list review comments</a>

   <li>Fixed DOM references to now point to the DOM TR

   <li>Fixed Web IDL issues as reported in <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15931">Issue
    15931</a>

   <li>Added text to explain support for multi-column elements as required by
    <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15191">Issue
    15191</a> and <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/375">Action 375</a>.

   <li>Renamed &lsquo;<code class=property>regionOverflow</code>&rsquo; to
    &lsquo;<a href="#dom-region-regionoverset"><code
    class=property>regionOverset</code></a>&rsquo; to avoid confusion between
    fitting a flow in regions and the concept of visual overflow that the
    word &lsquo;<code class=property>overflow</code>&rsquo; (and the
    property) carry.

   <li>Reworked the partial document interface following the <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=14948">Issue
    14948</a> on <a
    href="#document-getflowbyname"><code>getFlowByName</code></a>.

   <li>Updated the object model section as proposed on the <a
    href="http://wiki.csswg.org/spec/css3-regions/css-om">wiki</a> and in
    particular:
    <ul>
     <li>introduced a <code>Region</code> interface to replace the
      supplemental Element interface

     <li>Added a &lsquo;<a href="#dom-region-flowfrom"><code
      class=property>flowFrom</code></a>&rsquo; attribute on the Region
      interface

     <li>NamedFlow.getRegions() was added

     <li>Renamed getContentNode to getContent and getRegionsByContentNode to
      getRegionsByContent as per <a
      href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15879">Isseu
      15879</a>

     <li>NamedFlow now returns static lists (see <a
      href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=16286">Issue
      16286</a>)
    </ul>

   <li>Modified region layout event to be dispatched on <a
    href="#dom-named-flow"><code>NamedFlow</code></a> instead of region as
    before. Was requested by <a
    href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=15938">Issue
    15938</a> and required in the general effort to have the DOM APIs work
    with non-element regions.

   <li>Changed paragraph on pseudo-elements to disallow &lsquo;<a
    href="#flow-into"><code class=property>flow-into</code></a>&rsquo; on all
    pseudo-elements because moving a &lsquo;<code
    class=css>::before</code>&rsquo; element (for a example) to a named flow
    does not seem useful and causes specification and implementation
    complexity.

   <li>Added section about getClientRects(), getBoundingClientRect(),
    offsetWidth, offsetHeight, offsetTop and offsetLeft.

   <li>Added &lsquo;<code class=css>Regions visual formatting
    details</code>&rsquo; section to better describe the model for resolving
    auto sizing on regions.

   <li>Reworked the initial specification example.

   <li>Changed break and region-overflow properties to apply to visual media
    instead of paged.

   <li>Added opacity to region styling.
  </ul>

  <h3 id="changes_from_June_09_2011"><span class=secno>12.2. </span>Changes
   from <a href="http://www.w3.org/TR/2011/WD-css3-regions-20110609/">June
   09<sup>th</sup> 2011</a> version</h3>

  <ul>
   <li>Editorial changes (typos, rephrasings).

   <li>Made &lsquo;<code class=property>content-order</code>&rsquo; a
    &lt;integer&gt; and not a &lt;float&gt; following a working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0329.html">resolution</a>

   <li>Added Alex Mogilevsky as an editor

   <li>Flow names became &lt;ident&gt; instead of &lt;string&gt; following a
    working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0413.html">resolution</a>

   <li>Removed issue about possibly altering the DOM Events model for region
    events following a working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0413.html">resolution</a>

   <li>Made the "relation to document events" section informative following a
    working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0413.html">resolution</a>

   <li>Removed issue in section "The NamedFlow interface" following the
    working group's <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0413.html">resolution</a>
    to have both NamedFlow and the Element interface extension

   <li>Following a working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0413.html">resolution</a>:
    
    <ul>
     <li>Turned the first issue in the "Extensions to the Element interface"
      into a note explaining that the NamedFlow interface can be used when
      regions are pseudo-elements.

     <li>Added NamedFlowUpdate
    </ul>

   <li>Excluded &lsquo;<code class=property>none</code>&rsquo;, &lsquo;<code
    class=property>inherit</code>&rsquo; and &lsquo;<code
    class=property>initial</code>&rsquo; from the possible identifier names
    on the flow property following <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jun/0583.html">discussion</a>
    on the mailing list.

   <li>Simplified integration discussion on multi-column layout and just
    state that since column boxes are not addressable by selectors, they
    cannot be regions.

   <li>Added specification of how the &lsquo;<a href="#flow-into"><code
    class=property>flow-into</code></a>&rsquo; property interacts with
    object, embed and iframe elements.

   <li>Excluded &lsquo;<code class=property>default</code>&rsquo; from the
    possible identifier names on the flow property because it <a
    href="http://www.w3.org/TR/2006/WD-css3-values-20060919/#keywords">may
    get reserved</a>.

   <li>Added to the definition of &lsquo;<code
    class=property>auto</code>&rsquo; on &lsquo;<a
    href="#region-overflow"><code
    class=property>region-overflow</code></a>&rsquo; specifying that region
    breaks must be ignored.

   <li>Renamed &lsquo;<code class=css>Document.flowWithName</code>&rsquo; to
    &lsquo;<code class=css>Document.getFlowByName</code>&rsquo; since it is
    not a property.

   <li>Added a note that a &lsquo;<a href="#dom-named-flow"><code
    class=property>NamedFlow</code></a>&rsquo; instance is live.

   <li>Added an &lsquo;<code class=property>undefined</code>&rsquo; string
    value to the regionOverflow property on the Element interface extension.

   <li>Renamed NamedFlowEvent to regionLayoutUpdate to avoid having
    &lsquo;<code class=property>Event</code>&rsquo; in the event name.

   <li>Added description for special behavior of iframe/object/embed as flow
    source

   <li>Removed issue on copying content to a named flow instead of moving
    elements to named flow following working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>.

   <li>Removed issue on content:flow-from v.s., flow-from property following
    working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>.

   <li>Renamed &lsquo;<code class=property>flow</code>&rsquo; to &lsquo;<a
    href="#flow-into"><code class=property>flow-into</code></a>&rsquo;
    following working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>.

   <li>Updated the css3-grid-align example following working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>
    that it should use &lt;div&gt; instead of grid-cell pseudo elements that
    were removed from the CSS Grid Layout specification.

   <li>Renamed &lsquo;<code class=property>from-flow</code>&rsquo; to
    &lsquo;<a href="#flow-from"><code
    class=property>flow-from</code></a>&rsquo; following a working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>.

   <li>Limited the applicability of &lsquo;<code class=css>content:
    flow-from()</code>&rsquo; to block container box and added a note that
    this might be expanded in the future, following a working group <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0069.html">resolution</a>.

   <li>Removed issue about API to find which region displays an element in a
    named flow since <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/350">ACTION-350</a> was
    created to add this API.

   <li>In the &lsquo;<code class=property>flow</code>&rsquo; property
    description, removed the required wrapper anonymous block as agreed on <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0161.html">mailing
    list discussion</a>.

   <li>Reworded the paragraph on how regions create a new stacking context,
    as per the <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0025.html">mailing
    list discussion</a>.

   <li>Reworked the "CSS regions Model" section to now be "CSS regions
    Layout". Moved the definition of a region as the first sub-section.

   <li>Removed the "Visual Formatting Model and Flows" section to match the
    new Regions Model (now CSS regions Layout) section.

   <li>Moved the sections on allowed region breaks, forced region breaks and
    "best" regions breaks to follow the property definitions to follow the
    formatting of the paged media section in CSS 2.1.

   <li>Added note about why regions create a new stacking context following
    the discussion on the <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jul/0158.html">mailing
    list</a>.

   <li>Removed sentence about content:none making elements disconnected
    following the discussion on the <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jul/0158.html">mailing
    list</a>.

   <li>Removed sentence about content:none making elements disconnected
    following the discussion on the <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jul/0158.html">mailing
    list</a>.

   <li>Added the ::region-before and a ::region-after pseudo-elements.

   <li>Added note of caution when using selectors and the &lsquo;<a
    href="#flow-into"><code class=property>flow-into</code></a>&rsquo;
    property following a <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Jul/0191.html">mailing
    list discussion</a>.

   <li>Removed sections about allowed, forced and best region breaks to align
    with the multi-column specification approach and until the group agrees
    on where and how the general issue of breaks (regions/pages/columns)
    should be addressed.

   <li>Removed the section on Integration with other specifications since
    specifications that was superfluous especially since there is no specific
    integration with multi column, grid or template layout.

   <li>Added a note that regions establish a new block formatting context.

   <li>Renamed content-order to region-order.

   <li>Added a note about overflowing content in regions (e.g., for content
    with borders).

   <li>Added a note that a region cannot layout content it is part of (to
    avoid creating a circular dependency) in the flow-from description,
    specifying that if flow-from references the flow an element is part of,
    then the element does not format anything visually.

   <li>Replaced &lsquo;<code
    class=css>content:flow-from(&lt;ident&gt;)</code>&rsquo; with
    &lsquo;<code class=css>flow-from: &lt;ident&gt;</code>&rsquo; following a
    <a href="http://krijnhoetmer.nl/irc-logs/css/20110824">working group
    resolution</a>.

   <li>Added more specific wording about auto width and auto height,
    following <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/351">ACTION 351</a>.

   <li>Reworked section on region markers to now use &lsquo;<code
    class=css>::before</code>&rsquo; and &lsquo;<code
    class=css>::after</code>&rsquo; and explain how &lsquo;<code
    class=css>display:run-in</code>&rsquo; works with regions.

   <li>Modified the @region style rule to remove the ::region-lines
    pseudo-selector.

   <li>Removed the &lsquo;<code class=property>region-order</code>&rsquo;
    property following implementation feedback.

   <li>Specified that region-overflow does not influence a region's size.

   <li>Specified that the flow's writing mode is defined by the first
    region's writing mode following <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Aug/0306.html">mailing
    list discussion</a>.

   <li>Made iframe, object and embed support of flow-into optional following
    <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Sep/0073.html">mailing
    list discussion</a>.

   <li>Clarified that flow content following the last break in the last
    region is not rendered, following <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Oct/0167.html">mailing
    list discussions.</a>

   <li>Modified the rule for computing the width and height of a region when
    they are set to auto, following <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Oct/0216.html">a
    mailing list discussion.</a>

   <li>Added &lsquo;<code class=property>auto</code>&rsquo; to the list of
    invalid flow identifiers.

   <li>Made &lsquo;<code class=property>none</code>&rsquo; the initial value
    for &lsquo;<a href="#flow-into"><code
    class=property>flow-into</code></a>&rsquo; and aligned with &lsquo;<a
    href="#flow-from"><code class=property>flow-from</code></a>&rsquo;, as
    explained in this <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Oct/0576.html">email</a>.
    Also allowed the &lsquo;<code class=property>inherit</code>&rsquo; value
    on &lsquo;<a href="#flow-from"><code
    class=property>flow-from</code></a>&rsquo; and &lsquo;<a
    href="#flow-into"><code class=property>flow-into</code></a>&rsquo; (same
    email).

   <li>Added note about nested region styling following <a
    href="http://lists.w3.org/Archives/Public/www-style/2011Oct/0650.html">a
    mailing list discussion</a>.

   <li>Added additional DOM interface following <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/350">Action 350</a>.

   <li>Clarified that a region becomes a region only if its &lsquo;<code
    class=property>content</code>&rsquo; property computes to normal,
    following the resolution of <a
    href="http://wiki.csswg.org/spec/css3-regions#issue-22content-vs-flow-from-precedence">Issue
    22</a>.

   <li>Removed text about special iframe behavior as a result of <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/376">ACTION 376</a>.

   <li>Made the selectors explicit in the initial section code examples,
    following discussion in <a
    href="http://krijnhoetmer.nl/irc-logs/css/20111030">San Jose, October
    2011</a> face to face meeting.

   <li>Added section on use cases following <a
    href="http://www.w3.org/Style/CSS/Tracker/actions/377">ACTION-377</a>.
  </ul>

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>The editors are grateful to the CSS working group for their feedback and
   help with the genesis of this specification.

  <p>In addition, the editors would like to thank the following individuals
   for their contributions, either during the conception of CSS regions or
   during its development and specification review process:

  <ul>
   <li>Rossen Atanassov

   <li>Tab Atkins

   <li>Andrei Bucur

   <li>Alexandru Chiculita

   <li>Phil Cupp

   <li>Arron Eicholz

   <li>John Jansen

   <li>Daniel Glazman

   <li>Arno Gourdol

   <li>David Hyatt

   <li>Brian Heuston

   <li>Ian Hickson

   <li>Jonathan Hoersch

   <li>Michael Jolson

   <li>Brad Kemper

   <li>Håkon Wium Lie

   <li>Markus Mielke

   <li>Robert O'Callahan

   <li>Edward O'Connor

   <li>Mihnea Ovidenie

   <li>Virgil Palanciuc

   <li>Olga Popiv

   <li>Christoph Päper

   <li>Anton Prowse

   <li>Peter Sorotokin

   <li>Alan Stearns

   <li>Christian Stockwell

   <li>Eugene Veselov

   <li>Boris Zbarsky

   <li>Stephen Zilles
  </ul>

  <h2 class=no-num id=intro-example-code>Appendix A. Example Code for
   Introduction</h2>

  <p>The following is one possible way to code the example from the <a
   href="#introduction">introduction</a>. This code uses grid cells to
   define, size and position the region areas but table layout, absolute
   positioning, or any other CSS layout facility could be used.

  <p>The following code snippet shows the content to flow through the region
   chain.

  <pre>
&lt;div <em>id="article"</em>&gt;
  &lt;h1&gt;Introduction&lt;/h1&gt;
  &lt;p&gt;This is an example ...&lt;/p&gt;
    
  &lt;h2&gt;More Details&lt;/h2&gt;
  &lt;p&gt;This illustrates ...&lt;/p&gt;
  &lt;p&gt;Then, the example ...&lt;/p&gt;
  &lt;p&gt;Finally, this ...&lt;/p&gt;
&lt;/div&gt;
    </pre>

  <p>And the following snippet shows an example using grid cells to define,
   size and position boxes:

  <pre>
&lt;style&gt;
  #grid {
    width: 80vw;
    height: 60vw;
    grid-template: "aaa.d"
                   "....d"
                   "bbb.d"
                   "....d"
                   "ccc.d";
    grid-rows: 52% 4% 20% 4% 20%;
    grid-columns: 30% 5% 30% 5% 30%;
  }
  #region1 { grid-cell: a; }
  #region2 { grid-cell: b; }
  #boxA    { grid-cell: c; }
  #region3 { grid-cell: d; }
  
  #region4 {
    width: 80vw;
  }
  
  #region2 {
    column-count: 2;
  }
&lt;/style&gt;

&lt;div id="grid"&gt;
  &lt;div id="region1"&gt;&lt;/div&gt;
  &lt;div id="region2"&gt;&lt;/div&gt;
  &lt;div id="boxA"&gt;&lt;/div&gt;
  &lt;div id="region3"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="region4"&gt;&lt;/div&gt;
    </pre>

  <p>Then finally this snippet (from the introduction) creates the named flow
   and associates it with the intended boxes, which creates a region chain
   for the named flow.

  <pre>
&lt;style&gt;
  
#article {
  <strong>flow-into: article_flow;</strong>
}

#region1, #region2, #region3, #region4 {
  <strong>flow-from: article_flow;</strong>
}
&lt;/style&gt;
    </pre>

  <div class=note><span class=note-prefix>Note </span>
   <p> Note that a multi-column element is used for #region2, which is a bit
    gratuitous here (because grid cells could be used). The reason to use a
    multi-column element is to illustrate that regions can be multi-column.</p>
  </div>

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3-BREAK>[CSS3-BREAK]

   <dd>Rossen Atanassov; Elika J. Etemad. <a
    href="http://www.w3.org/TR/2012/WD-css3-break-20120228/"><cite>CSS
    Fragmentation Module Level 3.</cite></a> 28 February 2012. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-break-20120228/">http://www.w3.org/TR/2012/WD-css3-break-20120228/</a>
    </dd>
   <!---->

   <dt id=CSS3-PAGE-TEMPLATE>[CSS3-PAGE-TEMPLATE]

   <dd>Alan Stearns. <a
    href="http://dev.w3.org/csswg/css3-page-template/"><cite>CSS Pagination
    Templates Module Level 3.</cite></a> Proposal for a CSS module.
    (Retrieved 4 April 2012) URL: <a
    href="http://dev.w3.org/csswg/css3-page-template/">http://dev.w3.org/csswg/css3-page-template/</a>
    </dd>
   <!---->

   <dt id=CSS3-WRITING-MODES>[CSS3-WRITING-MODES]

   <dd>Elika J. Etemad; Koji Ishii; Shinyu Murakami. <a
    href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/"><cite>CSS
    Writing Modes Module Level 3.</cite></a> 1 September 2011. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/">http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/</a>
    </dd>
   <!---->

   <dt id=CSS3COL>[CSS3COL]

   <dd>H&#229;kon Wium Lie. <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412"><cite>CSS
    Multi-column Layout Module.</cite></a> 12 April 2011. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412">http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a>
    </dd>
   <!---->

   <dt id=DOM>[DOM]

   <dd>Anne van Kesteren; Aryeh Gregor; Ms2ger. <a
    href="http://www.w3.org/TR/2012/WD-dom-20120105/"><cite>DOM4.</cite></a>
    5 January 2012. W3C Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-dom-20120105/">http://www.w3.org/TR/2012/WD-dom-20120105/</a>
    </dd>
   <!---->

   <dt id=DOM-LEVEL-3-EVENTS>[DOM-LEVEL-3-EVENTS]

   <dd>Doug Schepers; et al. <a
    href="http://www.w3.org/TR/2011/WD-DOM-Level-3-Events-20110531"><cite>Document
    Object Model (DOM) Level 3 Events Specification.</cite></a> 31 May 2011.
    W3C Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-DOM-Level-3-Events-20110531">http://www.w3.org/TR/2011/WD-DOM-Level-3-Events-20110531</a>
    </dd>
   <!---->

   <dt id=SELECT>[SELECT]

   <dd>Tantek &#199;elik; et al. <a
    href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/"><cite>Selectors
    Level 3.</cite></a> 29 September 2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/">http://www.w3.org/TR/2011/REC-css3-selectors-20110929/</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS3-EXCLUSIONS>[CSS3-EXCLUSIONS]

   <dd>Vincent Hardy; Rossen Atanassov. <a
    href="http://www.w3.org/TR/2011/WD-css3-exclusions-20111213/"><cite>CSS
    Exclusions and Shapes Module Level 3.</cite></a> 13 December 2011. W3C
    Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-exclusions-20111213/">http://www.w3.org/TR/2011/WD-css3-exclusions-20111213/</a>
    </dd>
   <!---->

   <dt id=CSS3-FLEXBOX>[CSS3-FLEXBOX]

   <dd>Tab Atkins Jr.; Alex Mogilevsky; L. David Baron. <a
    href="http://www.w3.org/TR/2011/WD-css3-flexbox-20111129/"><cite>CSS
    Flexible Box Layout Module.</cite></a> 29 November 2011. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-flexbox-20111129/">http://www.w3.org/TR/2011/WD-css3-flexbox-20111129/</a>
    </dd>
   <!---->

   <dt id=CSS3-GRID-LAYOUT>[CSS3-GRID-LAYOUT]

   <dd>Alex Mogilevsky; et al. <a
    href="http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407"><cite>Grid
    Layout.</cite></a> 7 April 2011. W3C Working Draft. (Work in progress.)
    URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407">http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407</a>
    </dd>
   <!---->

   <dt id=CSS3-LINE-GRID>[CSS3-LINE-GRID]

   <dd>Koji Ishii. <a href="http://dev.w3.org/csswg/css-line-grid/"><cite>CSS
    Line Grid Module.</cite></a> Proposal for a CSS module. (Retrieved 26
    October 2011) URL: <a
    href="http://dev.w3.org/csswg/css-line-grid/">http://dev.w3.org/csswg/css-line-grid/</a>
    </dd>
   <!---->

   <dt id=CSS3GRID>[CSS3GRID]

   <dd>Alex Mogilevsky; Markus Mielke. <a
    href="http://www.w3.org/TR/2007/WD-css3-grid-20070905"><cite>CSS Grid
    Positioning Module Level&#160;3.</cite></a> 5 September 2007. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2007/WD-css3-grid-20070905">http://www.w3.org/TR/2007/WD-css3-grid-20070905</a>
    </dd>
   <!---->

   <dt id=CSS3LAYOUT>[CSS3LAYOUT]

   <dd>Bert Bos; C&#233;sar Acebal. <a
    href="http://www.w3.org/TR/2010/WD-css3-layout-20100429"><cite>CSS
    Template Layout Module.</cite></a> 29 April 2010. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2010/WD-css3-layout-20100429">http://www.w3.org/TR/2010/WD-css3-layout-20100429</a>
    </dd>
   <!---->

   <dt id=CSS3PAGE>[CSS3PAGE]

   <dd>H&#229;kon Wium Lie; Melinda Grant. <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010"><cite>CSS3 Module:
    Paged Media.</cite></a> 10 October 2006. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010">http://www.w3.org/TR/2006/WD-css3-page-20061010</a>
    </dd>
   <!---->

   <dt id=MEDIAQ>[MEDIAQ]

   <dd>H&#229;kon Wium Lie; et al. <a
    href="http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/"><cite>Media
    Queries.</cite></a> 27 July 2010. W3C Candidate Recommendation. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/">http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>break-after, <a href="#break-after"
    title=break-after><strong>3.3.</strong></a>

   <li>break-before, <a href="#break-before"
    title=break-before><strong>3.3.</strong></a>

   <li>break-inside, <a href="#break-inside"
    title=break-inside><strong>3.3.</strong></a>

   <li>current-region, <a href="#current-region"
    title=current-region><strong>2.3.</strong></a>

   <li>firstEmptyRegionIndex, <a
    href="#dom-named-flow-first-empty-region-index"
    title=firstEmptyRegionIndex><strong>6.1.</strong></a>

   <li>flowFrom, <a href="#dom-region-flowfrom"
    title=flowFrom><strong>6.2.</strong></a>

   <li>flow-from, <a href="#flow-from"
    title=flow-from><strong>3.2.</strong></a>

   <li>flow-into, <a href="#flow-into"
    title=flow-into><strong>3.1.</strong></a>

   <li>getContent(), <a href="#dom-named-flow-get-content"
    title="getContent()"><strong>6.1.</strong></a>

   <li><a href="#document-getflowbyname"><code
    class=idl>getFlowByName</code></a>, <a href="#document-getflowbyname"
    title=getFlowByName><strong>6.1.</strong></a>

   <li>getRegionFlowRanges, <a href="#dom-region-getregionflowranges"
    title=getRegionFlowRanges><strong>6.2.</strong></a>

   <li><a href="#dom-named-flow-get-regions"><code
    class=idl>getRegions()</code></a>, <a href="#dom-named-flow-get-regions"
    title="getRegions()"><strong>6.1.</strong></a>

   <li>getRegionsByContent(), <a
    href="#dom-named-flow-get-regions-by-content"
    title="getRegionsByContent()"><strong>6.1.</strong></a>

   <li><a href="#dom-named-flow-collection-item"><code
    class=idl>item(index)</code></a>, <a
    href="#dom-named-flow-collection-item"
    title="item(index)"><strong>6.1.</strong></a>

   <li><a href="#dom-named-flow-collection-length"><code
    class=idl>length</code></a>, <a href="#dom-named-flow-collection-length"
    title=length><strong>6.1.</strong></a>

   <li><a href="#dom-named-flow-name"><code class=idl>name</code></a>, <a
    href="#dom-named-flow-name" title=name><strong>6.1.</strong></a>

   <li><a href="#dom-named-flow"><code class=idl>NamedFlow</code></a>, <a
    href="#dom-named-flow" title=NamedFlow><strong>6.1.</strong></a>

   <li>named flow, <a href="#named-flow0"
    title="named flow"><strong>2.2.</strong></a>

   <li><a href="#dom-named-flow-collection"><code
    class=idl>NamedFlowCollection</code></a>, <a
    href="#dom-named-flow-collection"
    title=NamedFlowCollection><strong>6.1.</strong></a>

   <li><a href="#document-namedflows"><code class=idl>namedFlows</code></a>,
    <a href="#document-namedflows" title=namedFlows><strong>6.1.</strong></a>
    

   <li><a href="#dom-named-flow-overset"><code class=idl>overset</code></a>,
    <a href="#dom-named-flow-overset" title=overset><strong>6.1.</strong></a>
    

   <li>region, <a href="#region" title=region>2.1.</a>

   <li><code class=idl>Region</code> interface, <a href="#region-interface"
    title="Region interface"><strong>6.2.</strong></a>

   <li>region-overflow, <a href="#region-overflow"
    title=region-overflow><strong>3.4.</strong></a>

   <li><a href="#dom-region-regionoverset"><code
    class=idl>regionOverset</code></a>, <a href="#dom-region-regionoverset"
    title=regionOverset><strong>6.2.</strong></a>

   <li>specified flow, <a href="#specified-flow"
    title="specified flow"><strong>3.1.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!-- template markup for issues pulled from Bugzilla -->
  <script id=issue-template type="text/template">
</script>

  <div class=issue-marker data-bug_id="{{bug_id}}"
   data-bug_status="{{bug_status}}" style="display:none"> <a
   href="https://www.w3.org/Bugs/Public/show_bug.cgi?id={{bug_id}}">Bug-{{bug_id}}</a>
   
   <div class=issue-details>
    <p class=short-desc>{{short_desc}}</p>
   </div>
  </div>
  <script src=BugzillaTracker.js type="text/javascript"></script>
  <script src=BugzillaTrackerCSSRegions.js type="text/javascript"></script>

  <div id=issue-manager>
   <h2 id=issue-manager0><span class=secno>13. </span>Issue manager</h2>

   <form action="#"></form>
   <label> <input checked name=issue-filter type=radio value=all> All issues
   </label> <label> <input name=issue-filter type=radio value=updated>
   Updated issues </label> <label> <input name=issue-filter type=radio
   value=new> New issues </label>
   <!-- all the bugs are dumped the #issue-list after being retreived and matched to the ones in the page -->
   
   <div id=issue-list></div>
  </div>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
