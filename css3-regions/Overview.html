<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html dir=ltr lang=en>
 <head profile="http://www.w3.org/2006/03/hcard"><meta content="IE=edge"
  http-equiv=X-UA-Compatible>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Regions Module</title>
  <link href="http://dev.w3.org/csswg/default.css" rel=stylesheet
  type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=Stylesheet
  type="text/css">
  <link href=alternate-spec-style.css id=st rel=stylesheet title="additional
  spec styles" type="text/css">
  <script src=style-toggle.js type="text/javascript">
</script>

 <body>
  <div class=head id=div-head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo--></p>

   <h1>CSS Regions Module</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 9 May 2011</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2011/ED-css3-regions-20110509/">http://www.w3.org/csswg/css3-regions</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-regions">http://www.w3.org/csswg/css3-regions</a>

    <dt>Previous version:

    <dd>none

    <dt>Editors:

    <dd class=vcard><span class=fn>Vincent Hardy</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>vhardy@adobe.com</span>

    <dt>Authors and Former Editors:

    <dd class=vcard><span class=fn>Stephen Zilles</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>szilles@adobe.com</span>

    <dd class=vcard><span class=fn>Alexandru Chiculita</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>achicu@adobe.com</span>

    <dd class=vcard><span class=fn>Andrei Bucur</span>, <span class=org>Adobe
     Systems, Inc.</span>, <span class=email>abucur@adobe.com</span>

    <dd class=vcard><span class=fn>Mihnea Ovidenie</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>mihnea@adobe.com</span>

    <dd class=vcard><span class=fn>Peter Sorotokin</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>psorotok@adobe.com</span>

    <dd class=vcard><span class=fn>Virgil Palanciuc</span>, <span
     class=org>Adobe Systems, Inc.</span>, <span
     class=email>virgilp@adobe.com</span>

    <dd class=vcard><span class=fn>Arno Gourdol</span>, <span class=org>Adobe
     Systems, Inc.</span>, <span class=email>agourdol@adobe.com</span>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>The CSS Regions module allows content to flow across multiple areas
   called regions. The regions do not necessarily follow the document order.
   The CSS Regions module provides an advanced content flow mechanism, which
   can be combined with positioning schemes as defined by other CSS modules
   such as the Multi-Column Module <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a> or the Grid Layout Module
   <a href="#CSS3-GRID-LAYOUT"
   rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a> to
   position the regions where content flows.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-regions%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-regions&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-regions<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>
    <ul class=toc>
     <li><a href="#named-flows-and-regions"><span class=secno>1.1.
      </span>Named flows and regions</a>

     <li><a href="#region-styling"><span class=secno>1.2. </span>Regions
      Styling</a>
    </ul>

   <li><a href="#css-regions-model"><span class=secno>2. </span>CSS Regions
    Model</a>
    <ul class=toc>
     <li><a href="#named-flows"><span class=secno>2.1. </span>Named flows</a>
      

     <li><a href="#regions"><span class=secno>2.2. </span>Regions</a>

     <li><a href="#flow-breaking-rules"><span class=secno>2.3. </span>Flow
      breaking rules</a>

     <li><a href="#formatting-model-considerations"><span class=secno>2.4.
      </span>The Visual Formatting Model and Flows</a>
      <ul class=toc>
       <li><a href="#normal-flow"><span class=secno>2.4.1. </span>Normal
        flow</a>

       <li><a href="#positioned-flow"><span class=secno>2.4.2.
        </span>Positioned flow</a>

       <li><a href="#column-flow"><span class=secno>2.4.3. </span>Column
        flow</a>

       <li><a href="#generated-flow"><span class=secno>2.4.4.
        </span>Generated flow</a>
      </ul>

     <li><a href="#relation-to-document-events"><span class=secno>2.5.
      </span>Relation to document events</a>
    </ul>

   <li><a href="#regions-properties"><span class=secno>3. </span>Properties
    and Rules</a>
    <ul class=toc>
     <li><a href="#the-flow-property"><span class=secno>3.1. </span>The
      &lsquo;<code class=property>flow</code>&rsquo; property</a>

     <li><a href="#the-content-property"><span class=secno>3.2. </span>The
      &lsquo;<code class=property>content</code>&rsquo; property</a>

     <li><a href="#the-content-order-property"><span class=secno>3.3.
      </span>The &lsquo;<code class=property>content-order</code>&rsquo;
      property</a>

     <li><a href="#region-flow-break-properties-break-befor"><span
      class=secno>3.4. </span>Region flow break properties: &lsquo;<code
      class=property>break-before</code>&rsquo;, &lsquo;<code
      class=property>break-after</code>&rsquo;, &lsquo;<code
      class=property>break-inside</code>&rsquo;</a>

     <li><a href="#the-region-style-rule"><span class=secno>3.5. </span>The
      region-style rule</a>
    </ul>

   <li><a href="#om_regions"><span class=secno>4. </span>CSSOM View and CSS
    Regions</a>

   <li><a href="#integration"><span class=secno>5. </span>Integration with
    other specifications</a>
    <ul class=toc>
     <li><a href="#region-requirements"><span class=secno>5.1. </span>Region
      requirements</a>

     <li><a href="#integration-examples"><span class=secno>5.2.
      </span>Integration Examples</a>
      <ul class=toc>
       <li><a href="#css-grid-layout"><span class=secno>5.2.1. </span>CSS
        Grid Layout</a>

       <li><a href="#css-multi-column-layout"><span class=secno>5.2.2.
        </span>CSS Multi-Column Layout</a>

       <li><a href="#css-flexible-box-layout-module"><span class=secno>5.2.3.
        </span>CSS Flexible Box Layout Module</a>

       <li><a href="#css-visual-formatting"><span class=secno>5.2.4.
        </span>CSS Visual Formatting</a>
      </ul>
    </ul>

   <li><a href="#relation-to-other-specs"><span class=secno>6.
    </span>Relation to other specifications</a>

   <li><a href="#conformance"><span class=secno>7. </span>Conformance</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p>Capturing the complex layouts of a typical magazine, newspaper, or
   textbook requires capabilities beyond those available in existing CSS
   modules. This is the purpose of the CSS Regions module.

  <p>&nbsp;

  <p>The CSS Regions module can be seen as an extension of the concept of
   multi-column elements. With CSS Multi-column layout <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>, columns share the same
   dimensions and define column boxes organized in rows. Content flows from
   one column to the next.

  <p>&nbsp;

  <p>The multi-column model is an example of flowing content from one area to
   another, where the areas are the multi-column element's column boxes and
   the flow is made of the multi-column element's children.

  <p>&nbsp;

  <p>However, for more complex layouts, content needs to flow from one area
   of the page to the next without limitation of the areas' sizes and
   positions. These arbitrary areas are the target of specific content flows.
   In this document these areas are called regions, and the content flows are
   called named flows. Regions are based on the rectangular geometry of the
   CSS box model. Elements in a named flow are taken out of the normal visual
   formatting and rendered in a chain of regions.

  <h3 id=named-flows-and-regions><span class=secno>1.1. </span>Named flows
   and regions</h3>

  <p>Consider the layout illustrated in figure 1.

  <div class=figure> <img alt="multiple chained regions which should receive
   content from a flow" src="images/regions-intro.svg" width=400>
   <p class=caption>Layout requiring sophisticated content flow</p>
  </div>

  <p>The designer's intent is to position an image in region &lsquo;<code
   class=property>A</code>&rsquo; and to flow an article's text from region
   &lsquo;<code class=css>1</code>&rsquo;, to region &lsquo;<code
   class=css>2</code>&rsquo;, &lsquo;<code class=css>3</code>&rsquo; and
   &lsquo;<code class=css>4</code>&rsquo;.

  <p>The following code snippet shows the content to flow between the regions
   1, 2, 3 and 4.

  <pre>
&lt;div <em>id="article"</em>&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
    &lt;p&gt;This is an example ...&lt;/p&gt;
    
&lt;h1&gt;More Details&lt;/h1&gt;
    &lt;p&gt;This illustrates ...&lt;/p&gt;
    &lt;p&gt;Then, the example ...&lt;/p&gt;
    &lt;p&gt;Finally, this ...&lt;/p&gt;
&lt;/div&gt;
        
</pre>

  <p>CSS layout facilities can position and size regions as needed. However,
   there is no existing mechanism to associate the content with the regions
   so that content flows as intended. Figure 2 shows an example of the
   intended visual rendering of the content.

  <div class=figure> <img alt="Sample rendering showing a single thread of
   text flowing through a chain of regions"
   src="images/regions-intro-rendering.png" width=450>
   <p class=caption>Sample rendering for desired layout</p>
  </div>

  <p>Since the CSS Regions module is independent of the layout of regions and
   the mechanism used to create them, the following assumes there is a CSS
   selector for the regions and, for the purpose of the example, the
   selectors for regions 1, 2, 3 and 4 are showing as
   &lt;<code>region1_sel</code>&gt;, &lt;<code>region2_sel</code>&gt;,
   &lt;<code>region3_sel</code>&gt; and &lt;<code>region4_sel</code>&gt;
   respectively. Such a selector could be an id selector (e.g.,
   <code>#region_1</code>) or a grid cell selector (e.g.,
   <code>#myGrid::grid-cell([cell-name])</code>) if using the CSS Grid Layout
   module, for example.

  <div class=example>
   <pre>
&lt;style&gt;

#article {
    <strong>flow: article_flow;</strong>
}

&lt;region1_sel&gt;, &lt;region2_sel&gt;, 
&lt;region3_sel&gt;, &lt;region4_sel&gt; {
    <strong>content: from(article_flow);</strong>
}
&lt;/style&gt;
</pre>
  </div>

  <p>The above stylesheet directs the <code>#article</code> element to a
   named flow called &lsquo;<code class=css>article_flow</code>&rsquo; by
   setting the &lsquo;<a href="#flow2"><code
   class=property>flow</code></a>&rsquo; property. Then, content is "poured"
   from that named flow into the desired regions by setting the regions'
   &lsquo;<a href="#content-from"><code
   class=property>content</code></a>&rsquo; property to
   <code>from(article_flow)</code>.

  <h3 id=region-styling><span class=secno>1.2. </span>Regions Styling</h3>

  <p>Region styling allows content to be styled depending on the region it
   flows into. It is a form of context-based styling, similar to <a
   href="#CSSMEDIAQUERIES">Media Queries</a> <a href="#MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a> which enable or disable
   selectors depending on the rendering context. With region styling,
   additional selectors may apply depending on the region into which content
   flows.

  <p>In our example, the designer wants to make text that falls into region 1
   larger, bold and dark blue. In addition, &lt;h1&gt; headers should be
   run-ins and crimson.

  <p>This design can be expressed with region styling as shown below.

  <div class=example>
   <pre>
&lt;style&gt;
/*
 * Default article styling.
 */
#article {
    color:#777;
    text-align: justify;
}

#article h1 {
    border-left: 1px solid #777;
    padding-left: 2ex;
}

/*
 * Additional styling to apply to content when it falls into 
 * region_1
 */
<strong>@region_style &lt;region1_sel&gt; {</strong>
    #article {
        font-weight: bold;
        color: #0C3D5F;
        font-size: larger;
    }

    #article h1 {
        color: crimson;
        display: run-in;
        border: none;
        padding: 0px;
    }
<strong>}</strong>
&lt;/style&gt;
</pre>
  </div>

  <p>The &lsquo;<code class=css>@region_style</code>&rsquo; rule for region 1
   limits its selectors to content flowing into region 1. The following
   figure shows how the rendering changes if we do not increase the font size
   nor make it bold for content flowing into region 1. As more content can be
   fitted, more content is subject to the contextual selectors, resulting in
   more dark blue text into region 1.

  <div class=figure> <img alt="Illustrate how changing region styling affects
   the flow of content." src="images/region-styling.png" width=450>
   <p class=caption>Different rendering with a different region styling</p>
  </div>

  <h2 id=css-regions-model><span class=secno>2. </span>CSS Regions Model</h2>

  <h3 id=named-flows><span class=secno>2.1. </span>Named flows</h3>

  <p>In the <a href="http://www.w3.org/TR/CSS21/visuren.html">CSS formatting
   model</a>, elements can be in the <a href="#normal-flow-def"><em>normal
   flow</em></a> or out of the <a href="#normal-flow-def"><em>(normal)
   flow</em></a>. Boxes generated by elements in the normal flow are subject
   to their container box's normal layout scheme. Boxes generated by elements
   out of the normal flow are subject to a different layout scheme. For
   example, absolutely positioned elements are subject to absolute
   positioning into their <a
   href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">containing
   block</a>. This can be described by saying that the absolutely positioned
   elements are part of a special flow (called &lsquo;<a
   href="#positioned-flow-def"><code class=css>positioned
   flow</code></a>&rsquo;) which is subject to a special layout by its
   container box (i.e., its container box positions it into the containing
   block's box).

  <p>&nbsp;

  <p>In both cases, there is a notion of flow containing a sequence of
   elements and there is a notion of <a
   href="http://www.w3.org/Style/Group/css2-src/visuren.html#block-boxes">(block)
   container box</a> into which the elements flow.

  <p>&nbsp;

  <p>The CSS Regions module generalizes the concept of flow by adding the
   concept of a <em>named flow</em>. This module lets authors explicitly
   place elements into a <em>named flow</em>.

  <p>&nbsp;

  <p>With this model, all elements are moved to a flow as part of the visual
   formatting. That flow may be the normal flow, a named flow or a positioned
   flow, for example. A flow gets formatted visually when associated with one
   or several elements' container box(es). When an flow is associated with
   container boxes, the boxes generated by the flow's elements are laid out
   according to the container box's layout scheme and the flow is subject to
   the <a href="#flow-breaking-rules">&lsquo;<code class=css>flow breaking
   rules</code>&rsquo;</a> described below.

  <p>A container's layout scheme is the strategy used by a container to
   position the boxes generated by its children and itself. Examples are the
   normal layout (block and inline formatting) (<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>), table layout (<a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>), the
   multi-column layout (<a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>) or the grid layout (<a
   href="#CSS3-GRID-LAYOUT"
   rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a>).

  <h3 id=regions><span class=secno>2.2. </span>Regions</h3>

  <p class=index id=region title=region>A region is an element that generates
   a <a href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes">block
   container box</a> and has an associated <em>named flow</em> (see the
   &lsquo;<a href="#content-from"><code
   class=property>content</code></a>&rsquo; property).

  <div class=issue> Should it be possible to allow inline elements to also be
   regions?</div>

  <h3 id=flow-breaking-rules><span class=secno>2.3. </span>Flow breaking
   rules</h3>

  <p>This section describes how container boxes consume content from a flow.
   The previous sections described how a flow may be referenced by one or
   more regions. The regions are the flow consumers and are ordered in a
   chain (see the &lsquo;<a href="#content-order"><code
   class=property>content-order</code></a>&rsquo; property). The current flow
   consumer is initially the first one in the chain.

  <p>&nbsp;

  <p><strong>Positioning recursion</strong> -- while there are remaining
   boxes in the flow, the current flow consumer is allowed to take more boxes
   from the flow and position them. If the consumer is unable to position
   additional boxes without overflowing, then one of two things happen:

  <ol>
   <li>If the flow consumer is the last in the chain, then it should proceed
    to the end of the flow and position all remaining generated boxes, even
    if they overflow.

   <li>Otherwise, the next flow consumer becomes the current one and a new
    iteration of the positioning recursion starts.
  </ol>

  <div class=issue> The above describes the simple case. It should explain
   how breaks influence this recursion. It should also discuss how boxes are
   split in general.</div>

  <div class=issue> Should the model provide a way to <a
   href="http://www.w3.org/TR/css3-multicol/#column-fill">balance</a>
   regions, as in the <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a> module?</div>

  <div class=issue> Is there a way to allow regions to be generated when
   content that does not fit into the last region remains. This would be
   analogous to the way the additional columns are generated when a
   multi-column box <a
   href="http://www.w3.org/TR/css3-multicol/#pagination-and-overflow-outside-multicol">
   overflows</a> (see <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>).</div>

  <h3 id=formatting-model-considerations><span class=secno>2.4. </span>The
   Visual Formatting Model and Flows</h3>

  <p>This section describes the flows to whichi elements formatted according
   to the CSS <a href="http://www.w3.org/TR/CSS21/visuren.html">Visual
   Formatting Model</a> and other layout modules (such as Multi-Column Layout
   <a href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>) belong
   to.

  <p>In particular, this section describes the &lsquo;<a
   href="#generated-flow-def"><code class=css>generated
   flow</code></a>&rsquo; where generated content of pseudo-elements is
   placed and several <dfn id=auto-flow title="auto flows">&lsquo;<code
   class=css>auto flows</code>&rsquo;</dfn> where children of content
   elements are automatically placed.

  <h4 id=normal-flow><span class=secno>2.4.1. </span>Normal flow</h4>

  <p>In the CSS formatting model, elements are by default placed in the <dfn
   id=normal-flow-def>normal flow</dfn> of their container. Also by default,
   a container element gets its content from its <a
   href="#normal-flow-def"><em>normal flow</em></a>. This means that by
   default, a container element will visually format its children elements
   and will be the only container associated with its normal flow.

  <p>Note that floats and relatively positioned elements, in this model, are
   part of the same flow of content and flow into the same container but are
   positioned in different ways.

  <p>The <a href="#normal-flow-def"><em>normal flow</em></a> is one of the <a
   href="#auto-flow"><em>auto flows</em></a>.

  <h4 id=positioned-flow><span class=secno>2.4.2. </span>Positioned flow</h4>

  <p>An absolutely positioned element is placed into the <dfn
   id=positioned-flow-def>positioned flow</dfn> of its container. The
   container positions this element into its <em>containing block</em>.

  <p>If a container has children in the <a href="#normal-flow-def"><em>normal
   flow</em></a> and in the <a href="#positioned-flow-def"><em>positioned
   flow</em></a>, it applies different positioning schemes to each flow.

  <p>The <a href="#positioned-flow-def"><em>positioned flow</em></a> is one
   of the <a href="#auto-flow"><em>auto flows</em></a>.

  <h4 id=column-flow><span class=secno>2.4.3. </span>Column flow</h4>

  <p>Children of the multi-column element are placed in the element's <dfn
   id=column-flow-def>column flow</dfn>. The column boxes are then implicitly
   associated with the element's &lsquo;<a href="#column-flow-def"><code
   class=css>column flow</code></a>&rsquo;. In this model, multiple regions
   (column boxes) get their content from a single flow (the element's
   &lsquo;<a href="#column-flow-def"><code class=css>column
   flow</code></a>&rsquo;, which is the content of the element).

  <p>The <a href="#column-flow-def"><em>column flow</em></a> is one of the <a
   href="#auto-flow"><em>auto flows</em></a>.

  <div class=issue> Need to add a <dfn id=grid-cell-flow>grid cell flow</dfn>
   section.</div>

  <h4 id=generated-flow><span class=secno>2.4.4. </span>Generated flow</h4>

  <p>In the CSS formatting model, when the <code>::before</code> or
   <code>::after</code> pseudo-elements have their content property set to
   one of <code>&lt;string&gt;</code>, <code>&lt;uri&gt;</code>,
   <code>&lt;counter&gt;</code>, <code>attr(&lt;identifier&gt;)</code>,
   <code>open-quote</code>, <code>close-quote</code>,
   <code>no-open-quote</code> or <code>no-close-quote</code>, they create a
   <dfn id=generated-flow-def>generated flow</dfn> which they format
   visually.

  <h3 id=relation-to-document-events><span class=secno>2.5. </span>Relation
   to document events</h3>

  <p>The CSS Region module does not alter in any way the normal processing of
   events in the document tree. In particular, if an event occurs on an
   element that is part of a named flow, the <a
   href="http://www.w3.org/TR/DOM-Level-3-Events/#dom-event-architecture">event's
   bubble and capture phases</a> happen following the document tree order.

  <h2 id=regions-properties><span class=secno>3. </span>Properties and Rules</h2>

  <p>The main CSS Regions module properties are the ‘flow’ and &lsquo;<a
   href="#content-from"><code class=property>content</code></a>&rsquo;
   properties. The ‘flow’ property is places an element into a specific
   named flow or lets the <a href=auto-flows>automatic flow assignment</a>
   take place. The ‘content’ property binds a region with a flow. When
   multiple regions are bound to the same flow, the &lsquo;<a
   href="#content-order"><code class=property>content-order</code></a>&rsquo;
   property determines the order in which content flows into the sequence of
   regions. This sequences of regions is called a <dfn
   id=chain-of-regions>chain of regions</dfn>.

  <p>&nbsp;

  <p>The way in which the content is broken into segments that fit in a
   region can be controlled by the “break” properties. Finally, styling
   that is unique to the region can be specified by ‘region-style’ rules.

  <h3 id=the-flow-property><span class=secno>3.1. </span>The &lsquo;<a
   href="#flow2"><code class=property>flow</code></a>&rsquo; property</h3>

  <p>The ‘flow’ property places an element into a named flow or
   automatically places it in the appropriate flow (see the <a
   href="#formatting-model-considerations">Visual Formatting Model and
   Flows</a> section). Elements that belong to the same flow are laid out in
   the regions associated with that flow.

  <table class=propdef summary="flow property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=flow2>flow</dfn>

    <tr>
     <th>Value:

     <td>&lt;name&gt;

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>any element

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>as specified
  </table>

  <dl>
   <dt>auto

   <dd>The element is automatically moved to the appropriate flow according
    to the <a href="#formatting_model_considerations">Visual Formatting Model
    and Flows</a> definitions.

   <dt>&lt;name&gt;

   <dd>The element is placed (appended) to the flow with that name. The
    element is said to have a <dfn id=specified-flow>specified flow</dfn>.
  </dl>

  <p>A named flow needs to be associated with one or more regions for its
   elements to be visually formatted. If no region is associated with a given
   named flow, the elements in the named flow are not rendered: they do not
   generate boxes and are not displayed.

  <p>The children of an element with a specified flow may themselves have a
   specified flow.

  <p>If an element has a the same specified flow value as one of its
   ancestors, it is moved out of its parent's normal flow and becomes a
   sibling of it's ancestor for the purpose of layout in the regions taking
   content from this flow.

  <p>The &lsquo;<a href="#flow2"><code class=property>flow</code></a>&rsquo;
   property does not affect the CSS cascade and inheritance for the elements
   on which it is specified. The flow property affects the visual formatting
   of elements associated to a named flow and of regions getting their
   content from a named flow.

  <p>The containing block for absolutely positioned descendants of an element
   with a specified flow is the region into which the element is rendered.

  <p>All the elements participating inside a named flow are rendered as
   children of an anonymous block that spans across all the regions
   associated with the specified named flow. The elements flowed inside the
   same named flow are taken in document order.

  <h3 id=the-content-property><span class=secno>3.2. </span>The &lsquo;<a
   href="#content-from"><code class=property>content</code></a>&rsquo;
   property</h3>

  <p>This specification extends the definition of the &lsquo;<a
   href="#content-from"><code class=property>content</code></a>&rsquo;
   property and makes it applicable to all block elements and
   pseudo-elements.

  <table class=propdef summary="content property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=content-from>content</dfn>

    <tr>
     <th>Value:

     <td>normal | none | from(&lt;name&gt;)| [ &lt;string&gt; | &lt;uri&gt; |
      &lt;counter&gt; | attr(&lt;identifier&gt;) | open-quote | close-quote |
      no-open-quote | no-close-quote ]+ | inherit

    <tr>
     <th>Initial:

     <td>normal

    <tr>
     <th>Applies to:

     <td>any block element

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>as specified
  </table>

  <dl>
   <dt><a id=x9 name=x9><span class=index-inst id=none
    title=none><strong>none</strong></span></a>

   <dd>For <code>::before</code> and <code>::after</code> pseudo-elements,
    the pseudo-element is not generated. For other elements, the element will
    not get any content for its visual formatting. If the children of the
    element are not directed to a flow referenced by another region, then
    they are not visually formatted. An element with its value set to
    &lsquo;<code class=property>none</code>&rsquo; is said to be <dfn
    id=disconnected>disconnected</dfn>

   <dt><strong>normal</strong>

   <dd>Computes to &lsquo;<code class=property>none</code>&rsquo; for the
    <code>::before</code> and <code>::after</code> pseudo-elements. For other
    elements, the element uses the flow assigned to its children following
    the <a href=auto-flows>automatic flow assignment for the Visual
    Formatting Model..</a>

   <dt><strong>&lt;string&gt;</strong>

   <dd>Text content (see the section on <a
    href="syndata.html#strings">strings</a>).

   <dt><strong>&lt;uri&gt;</strong>

   <dd>The value is a URI that designates an external resource (such as an
    image). If the user agent cannot display the resource it must either
    leave it out as if it were not specified or display some indication that
    the resource cannot be displayed.

   <dt><strong>&lt;counter&gt;</strong>

   <dd><a href="syndata.html#counter">Counters</a> may be specified with two
    different functions: &lsquo;<code class=css>counter()</code>&rsquo; or
    &lsquo;<code class=css>counters()</code>&rsquo;. The former has two
    forms: &lsquo;<code class=css>counter(<var>name</var>)</code>&rsquo; or
    &lsquo;<code class=css>counter(<var>name</var>,
    <var>style</var>)</code>&rsquo;. The generated text is the value of the
    innermost counter of the given name in scope at this pseudo-element; it
    is formatted in the indicated <a href="#counter-styles">style</a>
    (&lsquo;<code class=property>decimal</code>&rsquo; by default). The
    latter function also has two forms: &lsquo;<code
    class=css>counters(<var>name</var>, <var>string</var>)</code>&rsquo; or
    &lsquo;<code class=css>counters(<var>name</var>, <var>string</var>,
    <var>style</var>)</code>&rsquo;. The generated text is the value of all
    counters with the given name in scope at this pseudo-element, from
    outermost to innermost separated by the specified string. The counters
    are rendered in the indicated <a href="#counter-styles">style</a>
    (&lsquo;<code class=property>decimal</code>&rsquo; by default). See the
    section on <a href="#counters">automatic counters and numbering</a> for
    more information. The name must not be &lsquo;<code
    class=property>none</code>&rsquo;, &lsquo;<code
    class=property>inherit</code>&rsquo; or &lsquo;<code
    class=property>initial</code>&rsquo;. Such a name causes the declaration
    to be ignored.

   <dt><strong>open-quote</strong> and <strong>close-quote</strong>

   <dd>These values are replaced by the appropriate string from the <a
    class=noxref
    href="http://www.w3.org/TR/CSS21/generate.html#propdef-quotes"><span
    class=propinst-quotes><strong>&lsquo;<code
    class=property>quotes</code>&rsquo;</strong></span></a> property.

   <dt><strong>no-open-quote</strong> and <strong>no-close-quote</strong>

   <dd>Introduces no content, but increments (decrements) the level of
    nesting for quotes.

   <dt><strong>attr(X)</strong>

   <dd>This function returns as a string the value of attribute X for the
    subject of the selector. The string is not parsed by the CSS processor.
    If the subject of the selector does not have an attribute X, an empty
    string is returned. The case-sensitivity of attribute names depends on
    the document language.

   <dt><dfn id=from-name>from(&lt;name&gt;)</dfn>

   <dd>The element will visually format the available elements in the named
    flow with name &lt;name&gt;. If there is no flow with name &lt;name&gt;,
    then the element is disconnected and does not format any children
    visually. Multiple elements may be associated with the same named flow.
    See the &lsquo;<a href="#content-order"><code
    class=property>content-order</code></a>&rsquo; property discussion to
    understand how content segments are associated with different regions.
  </dl>

  <div class=issue>
   <p>Should we consider adding the ability to do the following:</p>

   <ul>
    <li>Support repeatable content. For example, have a repeatable heading at
     the start of each region where content flows.

    <li>Support flow breaking marks. It might be very useful to support a
     <em>mark</em> (such as <code>...</code>) at the region breaking points
     to indicate that content has been broken out and is continuing on a
     different region.
   </ul>
  </div>

  <div class=issue> Should the &lsquo;<a href="#content-from"><code
   class=property>content</code></a>&rsquo; property be limited to block
   elements or should it be allowed on all elements?</div>

  <h3 id=the-content-order-property><span class=secno>3.3. </span>The
   &lsquo;<a href="#content-order"><code
   class=property>content-order</code></a>&rsquo; property</h3>

  <p>Defines the ordering of the chain of regions into which content flows.
   If region A and region B are in the same chain of regions and the
   ‘content-order’ of region A is lower than that of region B, then
   region A will precede region B in that chain: content will flow into
   region A before it flows into region B.

  <table class=propdef summary="content-order property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=content-order>content-order</dfn>

    <tr>
     <th>Value:

     <td>&lt;float&gt;

    <tr>
     <th>Initial:

     <td>0

    <tr>
     <th>Applies to:

     <td>any block container

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>as specified
  </table>

  <dl>
   <dt>&lt;float&gt;

   <dd>Specifies the region's priority in the chain it belongs to, i.e.., the
    chain of regions associated with the same content flow. Negative values
    are allowed.
  </dl>

  <p>If two or more regions with the same &lsquo;<code class=css>from(
   &lt;name&gt;)</code>&rsquo; value for their &lsquo;<a
   href="#content-from"><code class=property>content</code></a>&rsquo;
   property, they are first sorted according to their &lsquo;<a
   href="#content-order"><code class=property>content-order</code></a>&rsquo;
   value. If multiple regions in have the same &lsquo;<a
   href="#content-order"><code class=property>content-order</code></a>&rsquo;
   value, they are sorted according to the document order.

  <div class=issue> CSS Modules should define the document order for pseudo
   elements. For example, the [CSSGRID] specification should define the
   document order for the &lsquo;<code class=css>::grid-cell</code>&rsquo;
   pseudo elements (e.g., row-major sorting or column major sorting of
   cells).</div>

  <h3 id=region-flow-break-properties-break-befor><span class=secno>3.4.
   </span>Region flow break properties: &lsquo;<a href="#break-before"><code
   class=property>break-before</code></a>&rsquo;, &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo;,
   &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo;</h3>

  <p>When content is laid out in multiple regions, the user agent must
   determine where content breaks occur. The problem of breaking content into
   segments fitting in regions is similar to breaking content into pages or
   columns.

  <p>Each break ends layout in the current region and causes remaining pieces
   of content from the named flow to be visually formatted in the following
   region, in the order defined by the &lsquo;<a href="#content-order"><code
   class=property>content-order</code></a>&rsquo; computed values. Note that
   there is no region break in the last region associated to a named flow.

  <p>The following extends the &lsquo;<a href="#break-before"><code
   class=property>break-before</code></a>&rsquo;, &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo; and
   &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo; properties from the <a
   href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>
   specification to account for regions. The additional values are described
   below.

  <table class=propdef summary="break-before property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-before>break-before</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="break-after property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-after>break-after</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="break-inside property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-inside>break-inside</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | avoid | avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <p>These properties describe page, column and region break behavior
   before/after/inside the generated box. These values are normatively
   defined in <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>:

  <dl>
   <dt>auto

   <dd>Neither force nor forbid a page/column break before (after, inside)
    the generated box.

   <dt>always

   <dd>Always force a page break before (after) the generated box.

   <dt>avoid

   <dd>Avoid a page/column break before (after, inside) the generated box.

   <dt>left

   <dd>Force one or two page breaks before (after) the generated box so that
    the next page is formatted as a left page.

   <dt>right

   <dd>Force one or two page breaks before (after) the generated box so that
    the next page is formatted as a right page.

   <dt>page

   <dd>Always force a page break before (after) the generated box.

   <dt>column

   <dd>Always force a column break before (after) the generated box.

   <dt>avoid-page

   <dd>Avoid a page break before (after, inside) the generated box.

   <dt>avoid-column

   <dd>Avoid a column break before (after, inside) the generated box.
  </dl>

  <p>This specification adds the following new values:

  <dl>
   <dt>region

   <dd>Always force a region break before (after) the generated box.

   <dt>avoid-region

   <dd>Avoid a region break before (after, inside) the generated box.
  </dl>

  <p>When a break splits a box, the box's margins, borders, and padding have
   no visual effect where the split occurs. However, the margin immediately
   after a forced page/column/region break will be preserved. A forced
   page/column/region break is a break that does not occur naturally.

  <p><strong>Note:</strong> When the &lsquo;<code
   class=property>avoid</code>&rsquo; value is used, regions may overflow. In
   that case the &lsquo;<code class=property>overflow</code>&rsquo; property
   specified on the region element should be used to determine how to render
   the overflow.

  <div class=issue> There are elements, such as tables, where it is desirable
   to use <a href="#break-inside"><code>break-inside</code></a> to
   <code>avoid</code> so that the end user experience reading the page is not
   deteriorated. It such cases, it might be useful to provide some
   flexibility in the order in which content is pulled from the flow. For
   example, it might be good to allow a non breakable table to be moved to
   the next region where it fits and show more of the content that follows
   that table in the flow in the previous region. This could be achieved with
   a <code>flow-priority: flexible</code> setting, for example.</div>

  <h3 id=the-region-style-rule><span class=secno>3.5. </span>The region-style
   rule</h3>

  <p>Authors define style declarations specific to a regions within an
   &lsquo;<code class=css>@region-style</code>&rsquo; rule. An &lsquo;<code
   class=css>@region-style</code>&rsquo; rule consists of the keyword
   &lsquo;<code class=css>@region-style</code>&rsquo; followed by a <a
   href="http://www.w3.org/TR/css3-selectors/#selector-syntax">selector</a>
   and a declarations block. The &lsquo;<code
   class=css>@region-style</code>&rsquo; rule and the selector constitute the
   region's &lsquo;<code class=css>flow segment</code>&rsquo; selector. The
   region's flow segment selector specifies which range in the flow is
   subject to the following declaration blocks: it applies to the range (see
   <a href="#DOM-LEVEL-2-TRAVERSAL-RANGE"
   rel=biblioentry>[DOM-LEVEL-2-TRAVERSAL-RANGE]<!--{{DOM-LEVEL-2-TRAVERSAL-RANGE}}--></a>)
   from the region's flow that flow in the selected region(s).

  <pre class=lexical>
@region-style &lt;selector&gt; {
    ... CSS styling rules ...
}         
          
</pre>

  <div class=example>
   <p>In the following example, the named flow &lsquo;<code
    class=css>article_flow</code>&rsquo; flows through &lsquo;<code
    class=css>region1</code>&rsquo; and &lsquo;<code
    class=css>region2</code>&rsquo;. If the flow contains an &lt;h1&gt;
    element that falls into any of these two regions, it will be displayed as
    a &lsquo;<code class=property>run-in</code>&rsquo;. Likewise, if a
    &lt;p&gt; element falls into any of these two regions, its &lsquo;<code
    class=property>color</code>&rsquo; will be &lsquo;<code
    class=property>cornflowerblue</code>&rsquo;. However, if an &lt;h1&gt;
    header falls into region1, its text will be transformed to uppercase, but
    not if it falls in region2.</p>

   <pre>
&lt;style&gt;

&lt;region1_sel&gt;, &lt;region2_sel&gt; {
    content: from(article_flow);
}

@region_style &lt;region1_sel&gt;, &lt;region2_sel&gt; {
    p {
        color: cornflowerblue;
    }
    
    h1 {
        display: run-in;
    }
}

@region_style &lt;region1_sel&gt; {
    h1 {
         text-transform: uppercase;
    }
}
&lt;/style&gt;
</pre>
  </div>

  <div>
   <p>The properties allowed in &lsquo;<code
    class=css>@region-style</code>&rsquo; declarations is limited to the same
    set as those available on the &lsquo;<code
    class=property>first-line</code>&rsquo; pseudo-element:</p>

   <ul>
    <li>font properties

    <li>color properties

    <li>background properties

    <li>word-spacing

    <li>letter-spacing

    <li>text-decoration

    <li>vertical-align

    <li>text-transform

    <li>line-height

    <li>clear
   </ul>
  </div>

  <div class=issue> This list of properties may be too limiting. For example,
   it prohibits the use of <code>display: run-in</code> as in the examples
   given earlier in this draft.</div>

  <p>The selectors for style declarations in a &lsquo;<code
   class=css>@region-style</code>&rsquo; rule only match an element if the
   element flows into one of the regions in the rule selector.

  <p>&nbsp;

  <p>The specificity of the selectors in a &lsquo;<code
   class=css>@region-style</code>&rsquo; rule is calculated as <a
   href="http://www.w3.org/TR/css3-selectors/#specificity">defined</a> in the
   CSS Selectors module (see <a href="#SELECT"
   rel=biblioentry>[SELECT]<!--{{SELECT}}--></a>). In other words, the
   &lsquo;<code class=css>@region-style</code>&rsquo; rule adds an extra
   condition to the selector's matching, but does not change the selector's
   specificity. This is the same behavior as selectors appearing in
   &lsquo;<code class=css>@media</code>&rsquo; rules declaration blocks (see
   <a href="#MEDIAQ" rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a>), where
   the rule does not influence the selectors' specificity.

  <p>&nbsp;

  <p>Consequently, selectors that match a given element (as describe above),
   participate in the <a href="CSS2.1%20section%206.4.1">CSS Cascading
   order</a> as defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

  <div class=issue>
   <p>The above text defines that the @region-style &lt;selector&gt; matches
    a <em>range</em> in the flow because elements may be split across
    regions. For example, a paragraph element may start in region A and end
    in region B. Let's assume there are @region-style rules that apply to
    region A and region B content that would select the paragraph, for
    example to get red text in region A and blue text in region B. The
    intention is to have the red text styling applied to the range that flows
    into region A and the blue text styling applied to the range that flows
    into region B. This means that the selector really matches segments of
    elements, so to speak.</p>
  </div>

  <h2 id="om_regions"><span class=secno>4. </span>CSSOM View and CSS Regions</h2>

  <p>Since content may flow into multiple regions, authors need a way to
   determine if there are enough regions to flow all the content in a named
   flow. This is especially important considering that the size of regions
   may change depending on the display context. For example, flowing the same
   content on a mobile phone with a small screen may require more regions
   than on a large desktop display. Another example where creating more
   regions might be needed is if the user may change the font size of text
   flowing through regions: it might be required to add new regions to
   accommodate for the additional space required to fit the larger text or
   reduce the number of regions for smaller text.

  <p>The CSS OM View (<a href="#CSSOM-VIEW"
   rel=biblioentry>[CSSOM-VIEW]<!--{{CSSOM-VIEW}}--></a>) specification
   defines extensions to the <code>Element</code> interface that would let an
   author find out if the last region overflows its content boundaries (by
   comparing its &lsquo;<code class=property>scrollHeight</code>&rsquo; with
   its &lsquo;<code class=property>contentHeight</code>&rsquo;). However,
   this assumes the region is a document element, which may not always be the
   case. For example, as described in a later section, a grid cell (see <a
   href="#CSS3-GRID-LAYOUT"
   rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a>) may be
   a region, but it is a pseudo-element, not an document element. Therefore,
   it is not possible to access its &lsquo;<code
   class=property>scrollHeight</code>&rsquo; or &lsquo;<code
   class=property>contentHeight</code>&rsquo;.

  <div class=issue>
   <p>Since an element may be split into multiple regions, there should be a
    way to get the client rectangles for the region. Note that this issue
    exists for elements children of a multi-column container.</p>
  </div>

  <div class=issue>
   <p>Should we use the <code>Range</code> interface and definition to
    interface with the flow segments, to represent how the flow gets broken
    into segments, and to represent what matches the
    <code>@region-style</code> selectors?</p>
  </div>

  <p>&nbsp;

  <p>To address this need, this specification proposes to add a method to the
   <code>Document</code> interface to access an element's flow.

  <pre class=idl>
[Supplemental] interface Document {
  ContentFlow flowWithName(string name);
};          
          
</pre>

  <pre class=idl>
interface ContentFlow {
  readonly attribute boolean overflows;
};
          
</pre>

  <p>With the <code>ContentFlow</code> interface, authors can easily check if
   all content has been fitted into existing regions. If it has, the overflow
   property would be true.

  <h2 id=integration><span class=secno>5. </span>Integration with other
   specifications</h2>

  <p>This specification does not specify how regions are created or laid out.
   This section illustrates how regions can be crated and laid out with other
   specifications. It first defines the requirements for integrating CSS
   Regions. Then it provides examples for different existing solutions.

  <h3 id=region-requirements><span class=secno>5.1. </span>Region
   requirements</h3>

  <p>For a container element (or pseudo-element) to become a region, it must
   be selectable with a CSS selector and accept the content property as
   defined in this specification.

  <h3 id=integration-examples><span class=secno>5.2. </span>Integration
   Examples</h3>

  <p>Authors can use different methods to layout regions in CSS. Some
   solutions can be expressed with CSS only and not require document changes,
   some solutions leverage the document tree. The following examples
   illustrate these different options.

  <h4 id=css-grid-layout><span class=secno>5.2.1. </span>CSS Grid Layout</h4>

  <p>The CSS Grid Layout specification (see <a href="#CSS3-GRID-LAYOUT"
   rel=biblioentry>[CSS3-GRID-LAYOUT]<!--{{CSS3-GRID-LAYOUT}}--></a>) defines
   a <a
   href="http://www.w3.org/TR/css3-grid-layout/#grid-cell-pseudo-element-selector">grid-cell
   pseudo-element</a> selector for grid cells. Consequently, grid cells can
   be a region.

  <p>The following example shows how CSS Grid Layout could be use to create
   regions and position them to create the example given in the introduction.

  <div class=issue> There is a pending issue in the CSS Grid Layout module
   draft (section 7.2) about whether or not grid cells should generate a box
   and have an associated &lsquo;<code class=property>display</code>&rsquo;
   property. To completely allow the use-case presented in the introduction,
   <code>::grid-cell</code> pseudo elements should allow box sizing
   properties and behave as block level elements.</div>

  <div class=example>
   <pre>
&lt;style&gt;
body:before {
    display: grid;
    grid-template: "aae"
                   "bbe"
                   "cde";
}

body:before::grid-cell(a) {
    content: url('illustration.png');
}

body:before::grid-cell(b),
body:before::grid-cell(c),
body:before::grid-cell(d),
body:before::grid-cell(e) {
    content: from('article_flow');
}
&lt;/style&gt;
</pre>
  </div>

  <h4 id=css-multi-column-layout><span class=secno>5.2.2. </span>CSS
   Multi-Column Layout</h4>

  <p>The CSS Multi-Column Layout (see <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a>) does not specify a
   selector for column regions.

  <p>&nbsp;

  <p>The CSS Multi-Column specification could offer a pseudo-element selector
   (e.g., called <code>nth-column</code>) for its column boxes. This would
   enable different content to flow through different columns. The following
   example illustrates how two different content flows could be threaded on
   alternate columns.

  <div class=example>
   <pre>
&lt;style&gt;
body:before {
    columns: 4;
}

body:before::nth-column(even) {
    content: from('article_1_flow');
}

body:before::nth-column(odd) {
    content: from('article_2_flow');
}
&lt;/style&gt;

&lt;body&gt;
    &lt;div id="article_1"&gt;...&lt;/div&gt;
    &lt;div id="article_2"&gt;...&lt;/div&gt;
&lt;/body&gt;
</pre>
  </div>

  <p>Note that if a column box becomes associated with a flow by its content
   property, it is no longer associated to the &lsquo;<a
   href="#column-flow-def"><code class=css>column flow</code></a>&rsquo;, as
   discussed <a href=column-flow>before</a>. For example, if the second
   column in a multi column element was associated with the &lsquo;<code
   class=property>illustration</code>&rsquo; named flow, the regular
   &lsquo;<code class=property>column-flow</code>&rsquo; would thread through
   the first and third column while column two would flow content from the
   &lsquo;<code class=property>illustration</code>&rsquo; named flow.

  <h4 id=css-flexible-box-layout-module><span class=secno>5.2.3. </span>CSS
   Flexible Box Layout Module</h4>

  <p>The CSS Flexible Box Layout Module (see <a href="#CSS3-FLEXBOX"
   rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>) aranges
   elements vertically or horizontally depending on various properties.

  <p>The following example shows how CSS Flexible Box Layout could be use to
   create regions and position them to create the example given in the
   introduction.

  <div class=example>
   <pre>
&lt;style&gt;
#article {
    flow: article_flow;
}

#region_1, #region_2, #region_3, #region_4 {
    content: from(article_flow);
}

#top_flex {
    display: flexbox;
    flex-direction: lr;
}

#left_col {
     display: flexbox;
     flex-direction: tb;
}

#bottom_row {
     display: flexbox;
     flex-direction: lr;
}
&lt;/style&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;div id="article"&gt;...&lt;/div&gt;
        &lt;div id="top_flex"&gt; 
            &lt;div id="left_col"&gt; 
                &lt;div id="region_A"&gt;&lt;/div&gt; 
                &lt;div id="region_1"&gt;&lt;/div&gt;
                &lt;div id="bottom-row"&gt;
                    &lt;div id="region_2"&gt;&lt;/div&gt;
                    &lt;div id="region_3"&gt;&lt;/div&gt;
                &lt;/div&gt; 
            &lt;/div&gt;
            &lt;div id="region_4"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
  
</pre>
  </div>

  <h4 id=css-visual-formatting><span class=secno>5.2.4. </span>CSS Visual
   Formatting</h4>

  <p>CSS (see <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>)
   offers a way to visually format content with different layout schemes:
   inline and block formatting, float, absolute positioning, relative
   positioning or table layout.

  <p>Elements laid out using these schemes can be regions, as illustrated
   below, using absolutely positioned elements for simplicity.

  <div class=example>
   <pre>
&lt;style&gt;
#article {
    flow: article_flow;
}

#region_1, #region_2, #region_3, #region_4 {
    content: from(article_flow);
}

#region_1 {
    /* positioning properties */
}

/* ... positioning of other regions ... */

&lt;/style&gt;
&lt;html&gt;
    &lt;body&gt;
        &lt;div id="article"&gt;...&lt;/div&gt;
        &lt;div id="region_A"&gt;&lt;/div&gt;
        &lt;div id="region_1"&gt;&lt;/div&gt;
        &lt;div id="region_2"&gt;&lt;/div&gt;
        &lt;div id="region_3"&gt;&lt;/div&gt;
        &lt;div id="region_4"&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
  
</pre>
  </div>

  <h2 id=relation-to-other-specs><span class=secno>6. </span>Relation to
   other specifications</h2>

  <p>This specification is related to other specifications as described in
   the <a href="#references">references</a> section. In addition, it is
   related to the following specifications:

  <ol>
   <li>CSS Exclusions Module [[CSS3EXCLUSIONS]]. This module defines a
    generic way to define arbitrarily shaped exclusions into which content
    can flow or around which content can flow. This can be seen as an
    extension to the way CSS floats provide rectangular areas into which
    content flows and around which content flows. In advanced layout designs,
    it is expected that the CSS Exclusions module will be commonly combined
    with the CSS Regions module.

   <li>CSS Line Grid Module [[CSS3LINEGRID]]. This module defines a concept
    of line grid to align the position of lines in different elements. The
    line grid functionality is related and needed for aligning content
    flowing in separate regions.
  </ol>

  <h2 id=conformance><span class=secno>7. </span>Conformance</h2>

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 23
    April 2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423">http://www.w3.org/TR/2009/CR-CSS2-20090423</a>
    </dd>
   <!---->

   <dt id=CSS3COL>[CSS3COL]

   <dd>H&#229;kon Wium Lie. <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412"><cite>CSS
    Multi-column Layout Module.</cite></a> 12 April 2011. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412">http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 23
    April 2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423">http://www.w3.org/TR/2009/CR-CSS2-20090423</a>
    </dd>
   <!---->

   <dt id=CSS3-FLEXBOX>[CSS3-FLEXBOX]

   <dd>Tab Atkins Jr.; Alex Mogilevsky; L. David Baron. <a
    href="http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/"><cite>Flexible
    Box Layout Module.</cite></a> 22 March 2011. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/">http://www.w3.org/TR/2011/WD-css3-flexbox-20110322/</a>
    </dd>
   <!---->

   <dt id=CSS3-GRID-LAYOUT>[CSS3-GRID-LAYOUT]

   <dd>Alex Mogilevsky; et al. <a
    href="http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407"><cite>Grid
    Layout.</cite></a> 7 April 2011. W3C Working Draft. (Work in progress.)
    URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407">http://www.w3.org/TR/2011/WD-css3-grid-layout-20110407</a>
    </dd>
   <!---->

   <dt id=CSS3COL>[CSS3COL]

   <dd>H&#229;kon Wium Lie. <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412"><cite>CSS
    Multi-column Layout Module.</cite></a> 12 April 2011. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412">http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a>
    </dd>
   <!---->

   <dt id=CSSOM-VIEW>[CSSOM-VIEW]

   <dd>Anne van Kesteren. <a
    href="http://www.w3.org/TR/2009/WD-cssom-view-20090804/"><cite>CSSOM View
    Module.</cite></a> 4 August 2009. W3C Working Draft. (Work in progress.)
    URL: <a
    href="http://www.w3.org/TR/2009/WD-cssom-view-20090804/">http://www.w3.org/TR/2009/WD-cssom-view-20090804/</a>
    </dd>
   <!---->

   <dt id=DOM-LEVEL-2-TRAVERSAL-RANGE>[DOM-LEVEL-2-TRAVERSAL-RANGE]

   <dd>Joe Kesselman; et al. <a
    href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113"><cite>Document
    Object Model (DOM) Level 2 Traversal and Range Specification.</cite></a>
    13 November 2000. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113">http://www.w3.org/TR/2000/REC-DOM-Level-2-Traversal-Range-20001113</a>
    </dd>
   <!---->

   <dt id=MEDIAQ>[MEDIAQ]

   <dd>H&#229;kon Wium Lie; et al. <a
    href="http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/"><cite>Media
    Queries.</cite></a> 27 July 2010. W3C Candidate Recommendation. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/">http://www.w3.org/TR/2010/CR-css3-mediaqueries-20100727/</a>
    </dd>
   <!---->

   <dt id=SELECT>[SELECT]

   <dd>Tantek &#199;elik; et al. <a
    href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215"><cite>Selectors
    Level 3.</cite></a> 15 December 2009. W3C Proposed Recommendation. (Work
    in progress.) URL: <a
    href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215">http://www.w3.org/TR/2009/PR-css3-selectors-20091215</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>auto flows, <a href="#auto-flow" title="auto
    flows"><strong>2.4.</strong></a>

   <li>break-after, <a href="#break-after"
    title=break-after><strong>3.4.</strong></a>

   <li>break-before, <a href="#break-before"
    title=break-before><strong>3.4.</strong></a>

   <li>break-inside, <a href="#break-inside"
    title=break-inside><strong>3.4.</strong></a>

   <li>chain of regions, <a href="#chain-of-regions" title="chain of
    regions"><strong>3.</strong></a>

   <li>column flow, <a href="#column-flow-def" title="column
    flow"><strong>2.4.3.</strong></a>

   <li>content, <a href="#content-from"
    title=content><strong>3.2.</strong></a>

   <li>content-order, <a href="#content-order"
    title=content-order><strong>3.3.</strong></a>

   <li>disconnected, <a href="#disconnected"
    title=disconnected><strong>3.2.</strong></a>

   <li>flow, <a href="#flow2" title=flow><strong>3.1.</strong></a>

   <li>from(&lt;name&gt;), <a href="#from-name"
    title="from(&lt;name&gt;)"><strong>3.2.</strong></a>

   <li>generated flow, <a href="#generated-flow-def" title="generated
    flow"><strong>2.4.4.</strong></a>

   <li>grid cell flow, <a href="#grid-cell-flow" title="grid cell
    flow"><strong>2.4.3.</strong></a>

   <li>none, <a href="#none" title=none>3.2.</a>

   <li>normal flow, <a href="#normal-flow-def" title="normal
    flow"><strong>2.4.1.</strong></a>

   <li>positioned flow, <a href="#positioned-flow-def" title="positioned
    flow"><strong>2.4.2.</strong></a>

   <li>region, <a href="#region" title=region>2.2.</a>

   <li>specified flow, <a href="#specified-flow" title="specified
    flow"><strong>3.1.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><a class=property href="#break-after">break-after</a>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements

     <td>no

     <td>N/A

     <td>paged

    <tr valign=baseline>
     <td><a class=property href="#break-before">break-before</a>

     <td>auto | always | avoid | left | right | page | column | region |
      avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements

     <td>no

     <td>N/A

     <td>paged

    <tr valign=baseline>
     <td><a class=property href="#break-inside">break-inside</a>

     <td>auto | avoid | avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements

     <td>no

     <td>N/A

     <td>paged

    <tr valign=baseline>
     <td><a class=property href="#content-from">content</a>

     <td>normal | none | from(&lt;name&gt;)| [ &lt;string&gt; | &lt;uri&gt; |
      &lt;counter&gt; | attr(&lt;identifier&gt;) | open-quote | close-quote |
      no-open-quote | no-close-quote ]+ | inherit

     <td>normal

     <td>any block element

     <td>no

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#content-order">content-order</a>

     <td>&lt;float&gt;

     <td>0

     <td>any block container

     <td>no

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flow2">flow</a>

     <td>&lt;name&gt;

     <td>auto

     <td>any element

     <td>no

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
  <!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
