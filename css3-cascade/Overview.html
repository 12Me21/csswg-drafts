<!DOCTYPE html>

<html lang=en>
 <head>
  <meta content="text/html" http-equiv=Content-Type>
  <title>CSS Cascading and Inheritance Level 3</title>
  <!--
  <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
  -->

  <meta content="CSS Cascading and Inheritance Level 3" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2012-12-03 name=dcterms.issued>
  <meta content="http://dev.w3.org/csswg/css3-cascade/" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://www.w3.org/TR/2012/ED-css3-cascade-20121203/"
   name=dcterms.identifier>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
   type="text/css">

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Cascading and Inheritance Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 3 December
    2012</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2012/ED-css3-cascade-20121203/">http://www.w3.org/TR/2012/ED-css3-cascade-20121203/</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-cascade">http://www.w3.org/TR/css3-cascade</a>

    <dt>Editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-cascade/">http://dev.w3.org/csswg/css3-cascade/</a>

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2005/WD-css3-cascade-20051215">http://www.w3.org/TR/2005/WD-css3-cascade-20051215</a>

    <dt>Editors:

    <dd class=vcard> <a class="email fn"
     href="mailto:howcome@opera.com">Håkon Wium Lie</a> (<span
     class=org>Opera Software</span>)

    <dd class=vcard> <a class="url fn"
     href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a> (<span
     class=org>Mozilla</span>)

    <dd class=vcard> <a class="url fn"
     href="http://www.xanthir.com/contact/">Tab Atkins Jr.</a> (<span
     class=org>Google</span>)
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2012 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p> This CSS3 module describes how to collate style rules and assign values
   to all properties on all elements. Values either come from style sheets or
   the property's initial value. By way of cascading and inheritance, values
   are propagated to all properties on all elements.

  <h2 class="no-num no-toc" id=status-of-this-document> Status of this
   document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-cascade%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css3-cascade” in the subject, preferably like this:
   “[<!---->css3-cascade<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=table-of-contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>

   <li><a href="#at-import"><span class=secno>2. </span> Importing style
    sheets: the ‘<code class=css>@import</code>’ rule</a>

   <li><a href="#shorthand"><span class=secno>3. </span> Shorthand
    Properties</a>
    <ul class=toc>
     <li><a href="#all-shorthand"><span class=secno>3.1. </span> Resetting
      All Properties: the ‘<code class=css>all</code>’ property</a>
    </ul>

   <li><a href="#cascade-and-inheritance"><span class=secno>4. </span>
    Cascading and Inheritance</a>
    <ul class=toc>
     <li><a href="#filter-declarations"><span class=secno>4.1. </span>
      Filtering Declarations</a>

     <li><a href="#cascade"><span class=secno>4.2. </span> Cascading
      Declarations</a>
      <ul class=toc>
       <li><a href="#cascading-origins"><span class=secno>4.2.1. </span>
        Cascading Origins</a>

       <li><a href="#important-rules"><span class=secno>4.2.2. </span>
        ‘<code class=css>!important</code>’ rules</a>

       <li><a href="#preshint"><span class=secno>4.2.3. </span> Precedence of
        Non-CSS Presentational Hints</a>

       <li><a href="#cascaded-value"><span class=secno>4.2.4. </span> The
        Cascaded Value</a>
      </ul>

     <li><a href="#defaulting"><span class=secno>4.3. </span> Inheritance and
      Defaulting</a>
      <ul class=toc>
       <li><a href="#initial"><span class=secno>4.3.1. </span> Initial value:
        the ‘<code class=css>initial</code>’ keyword </a>

       <li><a href="#inheritance"><span class=secno>4.3.2. </span>
        Inheritance: the ‘<code class=css>inherit</code>’ keyword </a>

       <li><a href="#default-keyword"><span class=secno>4.3.3. </span>
        Rolling back the cascade: the ‘<code class=css>default</code>’
        keyword</a>
      </ul>
    </ul>

   <li><a href="#value-stages"><span class=secno>5. </span> Stages of Value
    Computation</a>
    <ul class=toc>
     <li><a href="#specified"><span class=secno>5.1. </span> Finding the
      specified value</a>

     <li><a href="#computed"><span class=secno>5.2. </span> Finding the
      computed value</a>

     <li><a href="#used"><span class=secno>5.3. </span> Finding the used
      value</a>

     <li><a href="#actual"><span class=secno>5.4. </span> Finding the actual
      value</a>

     <li><a href="#stages-examples"><span class=secno>5.5. </span>
      Examples</a>
    </ul>

   <li><a href="#conformance"><span class=secno>6. </span>Conformance</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <hr>

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p> One of the fundamental design principles of CSS is <em>cascading</em>,
   which allows several style sheets to influence the presentation of a
   document. When different declarations try to set a value for the same
   element/property combination, the conflicts must somehow be resolved.

  <p> The opposite problem arises when no declarations try to set a the value
   for an element/property combination. In this case, a value must be found
   by way of <em>inheritance</em> or by looking at the property's <a
   href="#initial-value"><em>initial value</em></a>.

  <p> The rules for finding the specified value for all properties on all
   elements are described in this specification. The rules for finding the
   specified values in the page context and the margin boxes are described in
   <a href="#CSS3PAGE" rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a>.

  <h2 id=at-import><span class=secno>2. </span> Importing style sheets: the
   ‘<a href="#atimport"><code class=css>@import</code></a>’ rule</h2>

  <p> The <dfn id=atimport>‘<code class=css>@import</code>’</dfn> rule
   allows users to import style rules from other style sheets. Any ‘<a
   href="#atimport"><code class=css>@import</code></a>’ rules must follow
   all ‘<code class=css>@charset</code>’ rules and precede all other
   at-rules and rule sets in a style sheet. The ‘<a href="#atimport"><code
   class=css>@import</code></a>’ keyword must be followed by the URI of the
   style sheet to include. A string is also allowed; it will be interpreted
   as if it had url(…) around it.

  <div class=example>
   <p> The following lines are equivalent in meaning and illustrate both
    ‘<a href="#atimport"><code class=css>@import</code></a>’ syntaxes
    (one with ‘<code class=css>url()</code>’ and one with a bare string):

   <pre><!--
		-->@import "mystyle.css";
<!--
		-->@import url("mystyle.css");</pre>
  </div>

  <p> So that user agents can avoid retrieving resources for unsupported
   media types, authors may specify media-dependent ‘<a
   href="#atimport"><code class=css>@import</code></a>’ rules. These <dfn
   id=conditional-imports
   title="conditional import|media-dependent import">conditional
   imports</dfn> specify comma-separated “media queries” after the URI.

  <div class=example>
   <p> The following rules illustrate how ‘<a href="#atimport"><code
    class=css>@import</code></a>’ rules can be made media-dependent:

   <pre><!--
		-->@import url("fineprint.css") print;
<!--
		-->@import url("bluish.css") projection, tv;
<!--
		-->@import url("narrow.css") handheld and (max-width: 400px);</pre>
  </div>

  <p> The full syntax of the expressions after the URL is defined by the
   Media Queries specification <a href="#MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{!MEDIAQ}}--></a>.

  <p> In the absence of any media queries, the import is unconditional.
   Specifying ‘<a href="#all"><code class=css>all</code></a>’ for the
   medium has the same effect.

  <h2 id=shorthand><span class=secno>3. </span> Shorthand Properties</h2>

  <p> Some properties are <dfn id=shorthand-properties>shorthand
   properties</dfn>, meaning that they allow authors to specify the values of
   several properties with a single property. A shorthand property sets all
   of its longhand sub-properties, exactly as if expanded in place.

  <div class=example>
   <p> For example, the CSS 2.1 ‘<code class=property>font</code>’
    property is a shorthand property for setting ‘<code
    class=property>font-style</code>’, ‘<code
    class=property>font-variant</code>’, ‘<code
    class=property>font-weight</code>’, ‘<code
    class=property>font-size</code>’, ‘<code
    class=property>line-height</code>’, and ‘<code
    class=property>font-family</code>’ all at once. The multiple style
    rules of this example:

   <pre>
h1 { 
	font-weight: bold; 
	font-size: 12pt;
	line-height: 14pt; 
	font-family: Helvetica; 
	font-variant: normal;
	font-style: normal;
}</pre>

   <p>can therefore be rewritten as

   <pre>h1 { font: bold 12pt/14pt Helvetica }</pre>
  </div>

  <p> When values are omitted from a shorthand form, unless otherwise
   defined, each "missing" sub-property is assigned its <a
   href="#initial-value"><i>initial value</i></a>.

  <p class=note> This means that a shorthand property declaration always sets
   <em title="">all</em> of its subproperties, even those that are not
   explicitly set. Carelessly used, this might result in inadvertently
   resetting some sub-properties. Carefully used, a shorthand can guarantee a
   "blank slate" by resetting sub-properties inadvertently cascaded from
   other sources. For example, writing ‘<code class=css>background:
   green</code>’ rather than ‘<code class=css>background-color:
   green</code>’ ensures that the background color overrides any earlier
   declarations that might have set the background to an image.

  <p> In some cases, a shorthand might have different syntax or special
   keywords that don't directly correspond to values of its sub-properties.
   (In such cases, the shorthand will explicitly define the expansion of its
   values.)

  <p> If a shorthand is specified as one of the <a
   href="http://www.w3.org/TR/css3-values/#common-keywords">CSS-wide
   keywords</a>, it sets all of its sub-properties to that keyword. (Note
   that these keywords cannot be combined with other values in a single
   declaration, not even in a shorthand.)

  <p> Declaring a shorthand property to be ‘<code
   class=css>!important</code>’ is equivalent to declaring all of its
   sub-properties to be "!important".

  <h3 id=all-shorthand><span class=secno>3.1. </span> Resetting All
   Properties: the ‘<a href="#all"><code class=css>all</code></a>’
   property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=all>all</dfn>

    <tr>
     <th>Value:

     <td>initial | inherit | default

    <tr>
     <th>Initial:

     <td>See individual properties

    <tr>
     <th>Applies to:

     <td>See individual properties

    <tr>
     <th>Inherited:

     <td>See individual properties

    <tr>
     <th>Percentages:

     <td>See individual properties

    <tr>
     <th>Media:

     <td>See individual properties

    <tr>
     <th>Computed value:

     <td>See individual properties

    <tr>
     <th>Animatable:

     <td>See individual properties
  </table>

  <p> The ‘<a href="#all"><code class=css>all</code></a>’ property is a
   shorthand that resets <em title="">all</em> CSS properties. It only
   accepts the <a
   href="http://www.w3.org/TR/css3-values/#common-keywords">CSS-wide
   keywords</a>.

  <div class=example>
   <p> For example, if an author specifies ‘<code class=css>all:
    default</code>’ on an element it will block all inheritance and reset
    all properties, as if no rules appeared in the author level of the
    cascade.

   <p> This can be useful for the root element of a "widget" included in a
    page, which does not wish to inherit the styles of the outer page.
  </div>

  <h2 id=cascade-and-inheritance><span class=secno>4. </span> Cascading and
   Inheritance</h2>

  <p> The cascading and inheritance process takes a set of declarations as
   input, and outputs a specified value for each property on each element.

  <h3 id=filter-declarations><span class=secno>4.1. </span> Filtering
   Declarations</h3>

  <p> In order to find the specified values, implementations must first
   identify all declarations that apply to each element. A declaration
   applies to an element if:

  <ul>
   <li> It belongs to a stylesheet that currently applies to this document.

   <li> It is not qualified by a conditional rule <a href="#CSS3-CONDITIONAL"
    rel=biblioentry>[CSS3-CONDITIONAL]<!--{{!CSS3-CONDITIONAL}}--></a> with a
    false condition.

   <li> It belongs to a ruleset whose selector matches the element. <a
    href="#SELECT" rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a> (Taking <a
    href="http://www.w3.org/TR/selectors4/#scoping">scoping</a> into account,
    if necessary.)
  </ul>

  <p> The remaining declarations form, for each property on each element, an
   unordered list of values. The next section, the cascade process, orders
   these lists.

  <h3 id=cascade><span class=secno>4.2. </span> Cascading Declarations</h3>

  <p> The cascade algorithm takes an unordered list of declarations for a
   given property on an element and sorts it by precedence as determined
   below.

  <p> User agents must sort declarations according to the following criteria,
   in descending order of importance:

  <dl>
   <dt>Origin

   <dd> The origin of a declaration is based on where it comes from and
    whether or not it is declared ‘<code class=css>!important</code>’
    (see below). The precedence of the various origins is, in descending
    order:
    <ol>
     <li>Transition declarations <a href="#CSS3-TRANSITIONS"
      rel=biblioentry>[CSS3-TRANSITIONS]<!--{{!CSS3-TRANSITIONS}}--></a>

     <li>Important user agent declarations

     <li>Important user declarations

     <li>Important override declarations <a href="#DOM-LEVEL-2-STYLE"
      rel=biblioentry>[DOM-LEVEL-2-STYLE]<!--{{!DOM-LEVEL-2-STYLE}}--></a>

     <li>Important author declarations

     <li>Animation declarations <a href="#CSS3-ANIMATIONS"
      rel=biblioentry>[CSS3-ANIMATIONS]<!--{{!CSS3-ANIMATIONS}}--></a>

     <li>Normal override declarations <a href="#DOM-LEVEL-2-STYLE"
      rel=biblioentry>[DOM-LEVEL-2-STYLE]<!--{{!DOM-LEVEL-2-STYLE}}--></a>

     <li>Inline style attributes <a href="#CSSSTYLEATTR"
      rel=biblioentry>[CSSSTYLEATTR]<!--{{!CSSSTYLEATTR}}--></a>

     <li>Normal author declarations

     <li>Normal user declarations

     <li>Normal user agent declarations
    </ol>

    <p> Declarations from origins earlier in this list win over declarations
     from later origins.

   <dt>Scope

   <dd> If a declaration belongs to a ruleset with a <a
    href="http://www.w3.org/TR/selectors4/#scoping">scoped selector</a>, the
    element it is scoped to can affect the cascade. For the purpose of this
    step, all other declarations are considered to be scoped to the root
    element.
    <p> If the <a
     href="http://www.w3.org/TR/selectors4/#scoping-element">scoping
     elements</a> of two declarations have an ancestor/descendant
     relationship, the declaration whose scoping element is the descendant
     wins.

   <dt>Specificity

   <dd> The <a href="http://www.w3.org/TR/selectors/#specificity">Selectors
    module</a> <a href="#SELECT"
    rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a> describes how to compute
    the specificity of a selector. For the purpose of this step, a ruleset
    without a selector (such as the contents of a style attribute) is
    considered to have a selector with specificity 0. The declaration
    belonging to a ruleset whose selector has the highest specificity wins.

   <dt>Order of appearance.

   <dd> Rules from imported style sheets are treated as if their stylesheets
    were substituted in place of the ‘<a href="#atimport"><code
    class=css>@import</code></a>’ rule. Stylesheets independently linked by
    the originating document are treated as if they were concatenated in
    linking order, as determined by the host document language. Style
    attributes are treated as if their rulesets were concatenated in document
    order, after any stylesheets. The last declaration wins.
  </dl>

  <p> The <dfn id=output-of-the-cascade>output of the cascade</dfn> is a
   (potentially empty) sorted list of declarations for each property on each
   element.

  <h4 id=cascading-origins><span class=secno>4.2.1. </span> Cascading Origins</h4>

  <p> Each style rule has an origin, which determines where it enters the
   cascade. CSS defines three core origins:

  <dl>
   <dt>Author

   <dd> The author specifies style sheets for a source document according to
    the conventions of the document language. For instance, in HTML, style
    sheets may be included in the document or linked externally.

   <dt>User

   <dd> The user may be able to specify style information for a particular
    document. For example, the user may specify a file that contains a style
    sheet or the user agent may provide an interface that generates a user
    style sheet (or behaves as if it did).

   <dt>User agent

   <dd> Conforming user agents must apply a default style sheet (or behave as
    if they did). A user agent's default style sheet should present the
    elements of the document language in ways that satisfy general
    presentation expectations for the document language (e.g., for visual
    browsers, the EM element in HTML is presented using an italic font). See
    e.g. the <a
    href="http://www.whatwg.org/specs/web-apps/current-work/multipage/rendering.html#the-css-user-agent-style-sheet-and-presentational-hints">HTML
    user agent style sheet</a>.
  </dl>

  <p> Extensions to CSS define the following additional origins:

  <dl>
   <dt>Override

   <dd> <a>DOM Level 2 Style</a> <a href="#DOM-LEVEL-2-STYLE"
    rel=biblioentry>[DOM-LEVEL-2-STYLE]<!--{{!DOM-LEVEL-2-STYLE}}--></a>
    defines an interface for "override" styles, which enter the cascade at a
    higher level than other author rules.

   <dt>Animation

   <dd> CSS Animations <a href="#CSS3-ANIMATIONS"
    rel=biblioentry>[CSS3-ANIMATIONS]<!--{{CSS3-ANIMATIONS}}--></a> generate
    "virtual" rules representing their effects when running.

   <dt>Transition

   <dd> Like CSS Animations, CSS Transitions <a href="#CSS3-TRANSITIONS"
    rel=biblioentry>[CSS3-TRANSITIONS]<!--{{CSS3-TRANSITIONS}}--></a>
    generate "virtual" rules representing their effects when running.
  </dl>

  <h4 id=important-rules><span class=secno>4.2.2. </span> ‘<code
   class=css>!important</code>’ rules</h4>

  <p> CSS attempts to create a balance of power between author and user style
   sheets. By default, rules in an author's style sheet override those in a
   user's style sheet.

  <p> However, for balance, an "!important" declaration takes precedence over
   a normal declaration. Author and user style sheets may contain
   "!important" declarations, with user "!important" rules overriding author
   "!important" rules. This CSS feature improves accessibility of documents
   by giving users with special requirements (large fonts, color
   combinations, etc.) control over presentation.

  <p> A declaration is "!important" if the last two tokens in its value are
   the delimiter token ‘<code class=css>!</code>’ followed by the
   identifier token ‘<code class=css>important</code>’. Declaring a
   shorthand property (e.g., ‘<code class=property>background</code>’) to
   be "!important" is equivalent to declaring all of its sub-properties to be
   "!important".

  <p> User agent stylesheets may also contain "!important" rules. These
   override all author and user rules.

  <div class=example>
   <p> The first rule in the user's style sheet in the following example
    contains an "!important" declaration, which overrides the corresponding
    declaration in the author's style sheet. The second declaration will also
    win due to being marked "!important". However, the third rule in the
    user's style sheet is not "!important" and will therefore lose to the
    second rule in the author's style sheet (which happens to set style on a
    shorthand property). Also, the third author rule will lose to the second
    author rule since the second rule is "!important". This shows that
    "!important" declarations have a function also within author style
    sheets.

   <pre>
/* From the user's style sheet */
p { text-indent: 1em !important }
p { font-style: italic !important }
p { font-size: 18pt }

/* From the author's style sheet */
p { text-indent: 1.5em !important }
p { font: normal 12pt sans-serif !important }
p { font-size: 24pt }</pre>
  </div>

  <h4 id=preshint><span class=secno>4.2.3. </span> Precedence of Non-CSS
   Presentational Hints</h4>

  <p> The UA may choose to honor presentational hints in a source document's
   markup, for example the <code>bgcolor</code> attribute or
   <code>&lt;s></code> element in [[HTML]]. All document language-based
   styling must be translated to corresponding CSS rules and either enter the
   cascade at the user agent level or be treated as author level rules with a
   specificity of zero placed at the start of the author style sheet. A
   document language may define whether a presentational hint enters at the
   UA or author level of the cascade; if so, the UA must behave accordingly.
   For example, <a href="#SVG11" rel=biblioentry>[SVG11]<!--{{SVG11}}--></a>
   maps its presentation attributes into the author level.

  <p class=note> Presentational hints entering the cascade at the UA level
   can be overridden by user styles. Presentational hints entering the
   cascade at the author level can be overridden by the author's use of the
   ‘<code class=css>default</code>’ keyword. Host languages should choose
   the appropriate level for presentational hints with these considerations
   in mind.

  <h4 id=cascaded-value><span class=secno>4.2.4. </span> The Cascaded Value</h4>

  <p> The <dfn id=cascaded-value0>cascaded value</dfn> represents the result
   of the cascade. It is the value of the highest declaration in the <a
   href="#output-of-the-cascade"><i>output of the cascade</i></a> (after any
   rollback steps have been performed, see below). If the <a
   href="#output-of-the-cascade"><i>output of the cascade</i></a> is an empty
   list, the <a href="#cascaded-value0"><i>cascaded value</i></a> is the
   ‘<code class=css>inherit</code>’ keyword if the property is an <a
   href="#inherited-properties"><i>inherited property</i></a> (as defined by
   its property definition table) or the ‘<code class=css>initial</code>’
   keyword otherwise.

  <h3 id=defaulting><span class=secno>4.3. </span> Inheritance and Defaulting</h3>

  <p> In most cases, the <a href="#specified-value"><i>specified
   value</i></a> is the <a href="#cascaded-value0"><i>cascaded value</i></a>.
   However, the ‘<code class=css>initial</code>’, ‘<code
   class=css>inherit</code>’, and ‘<code class=css>default</code>’
   values are handled specially when they are the <a
   href="#cascaded-value0"><i>cascaded value</i></a> of a property.

  <h4 id=initial><span class=secno>4.3.1. </span> Initial value: the ‘<code
   class=css>initial</code>’ keyword</h4>

  <p> Each property has an <dfn id=initial-value>initial value</dfn>, defined
   in the property's definition table. If the <a
   href="#cascaded-value0"><i>cascaded value</i></a> is the ‘<code
   class=css>initial</code>’ keyword, the property's <a
   href="#initial-value"><i>initial value</i></a> becomes its <a
   href="#specified-value"><i>specified value</i></a>.

  <h4 id=inheritance><span class=secno>4.3.2. </span> Inheritance: the
   ‘<code class=css>inherit</code>’ keyword</h4>

  <p> Some properties are <dfn id=inherited-properties
   title="inherited property|inherited properties">inherited
   properties</dfn>, as defined in their property definition table. This
   means that, unless the cascade results in a value, the value will be
   determined by inheritance.

  <p> Inheritance propagates property values from parent elements to their
   children. The <dfn id=inherited-value>inherited value</dfn> of a property
   on an element is the <a href="#computed-value"><i>computed value</i></a>
   of the property on the element's parent element. For the root element,
   which has no parent element, the <a href="#inherited-value"><i>inherited
   value</i></a> is the <a href="#initial-value"><i>initial value</i></a> of
   the property.

  <p> Pseudo-elements inherit according to a fictional tag sequence described
   for each pseudo-element <a href="#SELECT"
   rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a>.

  <p class=note> Note that inheritance follows the document tree and is not
   intercepted by <a
   href="http://www.w3.org/TR/CSS21/visuren.html#box-gen">anonymous
   boxes</a>, or otherwise affected by manipulations of the box tree.

  <p> If the <a href="#cascaded-value0"><i>cascaded value</i></a> of a
   property is the ‘<code class=css>inherit</code>’ keyword, the <a
   href="#inherited-value"><i>inherited value</i></a> becomes the property's
   <i>specified</i> and <a href="#computed-value"><i>computed values</i></a>.

  <h4 id=default-keyword><span class=secno>4.3.3. </span> Rolling back the
   cascade: the ‘<code class=css>default</code>’ keyword</h4>

  <p> CSS Cascading and Inheritance Level 3 introduces the ‘<code
   class=css>default</code>’ keyword as a <a
   href="http://www.w3.org/TR/css3-values/#common-keywords">CSS-wide
   keyword</a> accepted by all properties.

  <p> If the <a href="#cascaded-value0"><i>cascaded value</i></a> is the
   ‘<code class=css>default</code>’ keyword, then the origin level to
   which it belongs is discarded from the cascade, resulting in a new <a
   href="#cascaded-value0"><i>cascaded value</i></a>. This continues until
   the <a href="#cascaded-value0"><i>cascaded value</i></a> is not ‘<code
   class=css>default</code>’ or until the <a
   href="#output-of-the-cascade"><i>output of the cascade</i></a> is empty.

  <h2 id=value-stages><span class=secno>5. </span> Stages of Value
   Computation</h2>

  <p> Once a user agent has parsed a document and constructed a document
   tree, it must assign, for every element in the tree, a value to every
   property that applies to the target media type.

  <p> The final value of a CSS3 property for a given element is the result of
   a four-step calculation:

  <ul>
   <li> First, cascading and inheritance yields the <a
    href="#specified-value"><i>specified value</i></a>.

   <li> Second, relative values are computed into absolute values as far as
    possible without formatting the document, thereby yielding the <a
    href="#computed-value"><i>computed value</i></a>.

   <li> The computed value is transformed into the <a
    href="#used-value"><i>used value</i></a> in the formatting process.

   <li> Finally, the computed value is transformed to the <a
    href="#actual-value"><i>actual value</i></a> based on constraints of
    local environment.
  </ul>

  <h3 id=specified><span class=secno>5.1. </span> Finding the specified value</h3>

  <p> The <dfn id=specified-value>specified value</dfn> is the output of the
   <a href="#cascade-and-inheritance">cascading and inheritance process</a>.

  <p> The cascading and inheritance process guarantees that a <a
   href="#specified-value"><i>specified value</i></a> exists for every
   property on every element.

  <h3 id=computed><span class=secno>5.2. </span> Finding the computed value</h3>

  <p> A <a href="#specified-value"><i>specified value</i></a> can be either
   absolute (i.e., not relative to another value, as in ‘<code
   class=property>red</code>’ or ‘<code class=css>2mm</code>’) or
   relative (i.e., relative to another value, as in ‘<code
   class=property>auto</code>’, ‘<code class=css>2em</code>’).

  <p> For absolute values, no extra processing is needed to find the computed
   value. For relative values, on the other hand, computation is necessary to
   find the computed value: percentages must be multiplied by a reference
   value (each property defines which value that is), values with relative
   units (em, ex, vh, vw) must be made absolute by multiplying with the
   appropriate reference size, certain keywords (e.g., ‘<code
   class=property>smaller</code>’, ‘<code
   class=property>bolder</code>’) must be replaced according to their
   definitions, and valid relative URLs must be resolved to become absolute.
   See examples (f), (g) and (h) in the <a href="#stages-examples">table
   below</a>.

  <p> The <dfn id=computed-value>computed value</dfn> is the result of
   resolving the <a href="#specified-value"><i>specified value</i></a> as
   defined in the "Computed Value" line of the property definition table.
   Generally, this means resolving the <a
   href="#specified-value"><i>specified value</i></a> insofar as possible
   without formatting the document.

  <p class=note> The <a href="#computed-value"><i>computed value</i></a> is
   the value that is transferred from parent to child during
   <i>inheritance</i>.

  <p> The <a href="#computed-value"><i>computed value</i></a> exists even
   when the property does not apply (as defined by the "Applies To" line).
   However, some properties may define the <a
   href="#computed-value"><i>computed value</i></a> of a property for an
   element to depend on whether the property applies to that element.

  <h3 id=used><span class=secno>5.3. </span> Finding the used value</h3>

  <p> <a href="#computed-value"><i>Computed values</i></a> are processed as
   far as possible without formatting the document. Some values, however, can
   only be determined when the document is being laid out. For example, if
   the width of an element is set to be a certain percentage of its
   containing block, the width cannot be determined until the width of the
   containing block has been determined. The <dfn id=used-value>used
   value</dfn> is the result of taking the <a
   href="#computed-value"><i>computed value</i></a> and resolving any
   remaining dependencies into an absolute value.

  <h3 id=actual><span class=secno>5.4. </span> Finding the actual value</h3>

  <p> A <a href="#used-value"><i>used value</i></a> is in principle ready to
   be used, but a user agent may not be able to make use of the value in a
   given environment. For example, a user agent may only be able to render
   borders with integer pixel widths and may therefore have to approximate
   the computed width. Also, the font size of an element may need adjustment
   based on the availability of fonts or the value of the ‘<code
   class=property>font-size-adjust</code>’ property. The <dfn
   id=actual-value>actual value</dfn> is the used value after any such
   approximations have been made.

  <p class=note> By probing the actual values of elements, much can be
   learned about how the document is laid out. However, not all information
   is recorded in the actual values. For example, the actual value of the
   ‘<code class=property>page-break-after</code>’ property does not
   reflect whether there is a page break or not after the element. Similarly,
   the actual value of ‘<code class=property>orphans</code>’ does not
   reflect how many orphan lines there is in a certain element. See examples
   (j) and (k) in the <a href="#stages-examples">table below</a>.

  <h3 id=stages-examples><span class=secno>5.5. </span> Examples</h3>

  <table class=data>
   <thead>
    <tr>
     <th>

     <th>Property

     <th>Winning declaration <!--	<th>Cascaded value	-->

     <th>Specified value

     <th>Computed value

     <th>Used value

     <th>Actual value

   <tbody>
    <tr>
     <td>(a)

     <th>‘<code class=property>text-align</code>’

     <td><code class=declaration>text-align: left</code> <!--	<td>''left''-->

     <td>‘<code class=css>left</code>’

     <td>‘<code class=css>left</code>’

     <td>‘<code class=css>left</code>’

     <td>‘<code class=css>left</code>’

    <tr>
     <td>(b)

     <th>‘<code class=property>border-top-width</code>’, ‘<code
      class=property>border-right-width</code>’, ‘<code
      class=property>border-bottom-width</code>’, ‘<code
      class=property>border-left-width</code>’

     <td><code class=declaration>border-width: inherit</code>
      <!--	<td>''inherit'' -->

     <td class=say>‘<code class=css>4.2px</code>’

     <td>‘<code class=css>4.2px</code>’

     <td>‘<code class=css>4.2px</code>’

     <td>‘<code class=css>4px</code>’

    <tr>
     <td>(c)

     <th>‘<code class=property>width</code>’

     <td><small>(none)</small> <!--	<td><small>(none)</small>-->

     <td>‘<code class=css>auto</code>’ <small>(initial value)</small>

     <td>‘<code class=css>auto</code>’

     <td>‘<code class=css>120px</code>’

     <td>‘<code class=css>120px</code>’

    <tr>
     <td>(d)

     <th>‘<code class=property>list-style-position</code>’

     <td><code class=declaration>list-style-position: inherit</code>
      <!--	<td>''inherit'' -->

     <td class=say>‘<code class=css>inside</code>’

     <td>‘<code class=css>inside</code>’

     <td>‘<code class=css>inside</code>’

     <td>‘<code class=css>inside</code>’

    <tr>
     <td>(e)

     <th>‘<code class=property>list-style-position</code>’

     <td><code class=declaration>list-style-position: initial</code>
      <!--	<td>''initial''-->

     <td>‘<code class=css>outside</code>’ <small>(initial value)</small>

     <td>‘<code class=css>outside</code>’

     <td>‘<code class=css>outside</code>’

     <td>‘<code class=css>outside</code>’

    <tr>
     <td>(f)

     <th>‘<code class=property>font-size</code>’

     <td><code class=declaration>font-size: 1.2em</code>
      <!--	<td>''1.2em''-->

     <td>‘<code class=css>1.2em</code>’

     <td class=say>‘<code class=css>14.1px</code>’

     <td>‘<code class=css>14.1px</code>’

     <td>‘<code class=css>14px</code>’

    <tr>
     <td>(g)

     <th>‘<code class=property>width</code>’

     <td><code class=declaration>width: 80%</code> <!--	<td>''80%''-->

     <td>‘<code class=css>80%</code>’

     <td>‘<code class=css>80%</code>’

     <td class=say>‘<code class=css>354.2px</code>’

     <td>‘<code class=css>354px</code>’

    <tr>
     <td>(h)

     <th>‘<code class=property>width</code>’

     <td><code class=declaration>width: auto</code> <!--	<td>''auto''-->

     <td>‘<code class=css>auto</code>’

     <td>‘<code class=css>auto</code>’

     <td class=say>‘<code class=css>134px</code>’

     <td>‘<code class=css>134px</code>’

    <tr>
     <td>(i)

     <th>‘<code class=property>height</code>’

     <td><code class=declaration>height: auto</code> <!--	<td>''auto''-->

     <td>‘<code class=css>auto</code>’

     <td>‘<code class=css>auto</code>’

     <td class=say>‘<code class=css>176px</code>’

     <td>‘<code class=css>176px</code>’

    <tr>
     <td>(j)

     <th>‘<code class=property>page-break-after</code>’

     <td><small>(none)</small> <!--	<td><small>(none)</small>-->

     <td>‘<code class=css>auto</code>’ <small>(initial value)</small>

     <td>‘<code class=css>auto</code>’

     <td>‘<code class=css>auto</code>’

     <td>‘<code class=css>auto</code>’

    <tr>
     <td>(k)

     <th>‘<code class=property>orphans</code>’

     <td><code class=declaration>orphans: 3</code> <!--	<td>''3''-->

     <td>‘<code class=css>3</code>’

     <td>‘<code class=css>3</code>’

     <td>‘<code class=css>3</code>’

     <td>‘<code class=css>3</code>’
  </table>

  <h2 id=conformance><span class=secno>6. </span>Conformance</h2>

  <p>[TBD]

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>David Baron contributed to this specification.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS3-ANIMATIONS>[CSS3-ANIMATIONS]

   <dd>Dean Jackson; et al. <a
    href="http://www.w3.org/TR/2012/WD-css3-animations-20120403/"><cite>CSS
    Animations.</cite></a> 3 April 2012. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-animations-20120403/">http://www.w3.org/TR/2012/WD-css3-animations-20120403/</a>
   </dd>
   <!---->

   <dt id=CSS3-CONDITIONAL>[CSS3-CONDITIONAL]

   <dd>L. David Baron. <a
    href="http://www.w3.org/TR/2012/WD-css3-conditional-20120911/"><cite>CSS
    Conditional Rules Module Level 3.</cite></a> 11 September 2012. W3C
    Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-conditional-20120911/">http://www.w3.org/TR/2012/WD-css3-conditional-20120911/</a>
   </dd>
   <!---->

   <dt id=CSS3-TRANSITIONS>[CSS3-TRANSITIONS]

   <dd>Dean Jackson; et al. <a
    href="http://www.w3.org/TR/2012/WD-css3-transitions-20120403/"><cite>CSS
    Transitions.</cite></a> 3 April 2012. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-transitions-20120403/">http://www.w3.org/TR/2012/WD-css3-transitions-20120403/</a>
   </dd>
   <!---->

   <dt id=CSSSTYLEATTR>[CSSSTYLEATTR]

   <dd>Tantek Çelik; Elika J. Etemad. <a
    href="http://www.w3.org/TR/2010/CR-css-style-attr-20101012/"><cite>CSS
    Style Attributes.</cite></a> 12 October 2010. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2010/CR-css-style-attr-20101012/">http://www.w3.org/TR/2010/CR-css-style-attr-20101012/</a>
   </dd>
   <!---->

   <dt id=DOM-LEVEL-2-STYLE>[DOM-LEVEL-2-STYLE]

   <dd>Chris Wilson; Philippe Le Hégaret; Vidur Apparao. <a
    href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113"><cite>Document
    Object Model (DOM) Level 2 Style Specification.</cite></a> 13 November
    2000. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113">http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113</a>
   </dd>
   <!---->

   <dt id=MEDIAQ>[MEDIAQ]

   <dd>Florian Rivoal. <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/"><cite>Media
    Queries.</cite></a> 19 June 2012. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/">http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/</a>
   </dd>
   <!---->

   <dt id=SELECT>[SELECT]

   <dd>Tantek Çelik; et al. <a
    href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/"><cite>Selectors
    Level 3.</cite></a> 29 September 2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/">http://www.w3.org/TR/2011/REC-css3-selectors-20110929/</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS3PAGE>[CSS3PAGE]

   <dd>Håkon Wium Lie; Melinda Grant. <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010"><cite>CSS3 Module:
    Paged Media.</cite></a> 10 October 2006. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010">http://www.w3.org/TR/2006/WD-css3-page-20061010</a>
   </dd>
   <!---->

   <dt id=SVG11>[SVG11]

   <dd>Erik Dahlström; et al. <a
    href="http://www.w3.org/TR/2011/REC-SVG11-20110816/"><cite>Scalable
    Vector Graphics (SVG) 1.1 (Second Edition).</cite></a> 16 August 2011.
    W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-SVG11-20110816/">http://www.w3.org/TR/2011/REC-SVG11-20110816/</a>
   </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>actual value, <a href="#actual-value"
    title="section 5.4."><strong>5.4.</strong></a>

   <li>all, <a href="#all" title="section 3.1."><strong>3.1.</strong></a>

   <li>cascaded value, <a href="#cascaded-value0"
    title="section 4.2.4."><strong>4.2.4.</strong></a>

   <li>computed value, <a href="#computed-value"
    title="section 5.2."><strong>5.2.</strong></a>

   <li>conditional import, <a href="#conditional-imports"
    title="section 2."><strong>2.</strong></a>

   <li>‘<a href="#atimport"><code class=css>@import</code></a>’, <a
    href="#atimport" title="section 2."><strong>2.</strong></a>

   <li>inherited properties, <a href="#inherited-properties"
    title="section 4.3.2."><strong>4.3.2.</strong></a>

   <li>inherited property, <a href="#inherited-properties"
    title="section 4.3.2."><strong>4.3.2.</strong></a>

   <li>inherited value, <a href="#inherited-value"
    title="section 4.3.2."><strong>4.3.2.</strong></a>

   <li>initial value, <a href="#initial-value"
    title="section 4.3.1."><strong>4.3.1.</strong></a>

   <li>media-dependent import, <a href="#conditional-imports"
    title="section 2."><strong>2.</strong></a>

   <li>output of the cascade, <a href="#output-of-the-cascade"
    title="section 4.2."><strong>4.2.</strong></a>

   <li>shorthand properties, <a href="#shorthand-properties"
    title="section 3."><strong>3.</strong></a>

   <li>specified value, <a href="#specified-value"
    title="section 5.1."><strong>5.1.</strong></a>

   <li>used value, <a href="#used-value"
    title="section 5.3."><strong>5.3.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><a class=property href="#all">all</a>

     <td>

     <td>See individual properties

     <td>See individual properties

     <td>See individual properties

     <td>See individual properties

     <td>See individual properties
  </table>
  <!--end-properties-->
