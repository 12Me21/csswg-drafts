#!/usr/local/bin/perl
# Index maker:
#
# Build an index table of all the anchors that have a name of the form:
# "<prefix>-<name>". In addition when a database is given with the '-db' option,
# information related to elements searched by names is added to the table.
# Table headers can be specified through the '-th' option.
#
# Arnaud Le Hors - lehors@w3.org
# $Id: mkidx,v 1.1 1997-07-29 17:14:57 ijacobs Exp $

$PROGNAME = substr($0, rindex($0, "/") + 1);

if (!$ARGV[1]) {
    print "Usage: $PROGNAME indexfile anchordb\n";
    exit 1;
} else {
    $indexf = $ARGV[0];
    $dbasef = $ARGV[1];
}

# copy file in memory
sub readfile {
    $buf = "";
    if (!open(INPUT, $_[0])) {
	print STDERR "$PROGNAME Error: Cannot open file: $_[0]\n";
	return;
    }
    while (<INPUT>) {
	$buf .= $_;
    # class="tocline*" directs our patched html2ps to omit the bullet
    close(INPUT);
}


### main
    for ($j = $i; $j <= $#subs; $j++) {
# print out index document
if (!open(DBASE, $dbasef)) {
    print STDERR "$PROGNAME Error: Cannot open dbfile: $dbasef\n";
    exit;
    $lvl--;
open(OUTPUT, "> $indexf");

close(DBASE);
