#!/usr/local/bin/perl
# Check for lack of space after an end tag!
#
# Ian Jacobs
# $Id: chkspaces,v 1.1 1997-12-30 14:34:56 ijacobs Exp $

$PROGNAME = substr($0, rindex($0, "/") + 1);

# copy file in memory
sub readfile {
    $buf = "";
    if (!open(INPUT, $_[0])) {
	print STDERR "$PROGNAME Error: Cannot open file: $_[0]\n";
	return;
    }
    while (<INPUT>) {
	$buf .= $_;
    }
    close(INPUT);
}

# read reference database
$pattern = "(<\\/[^>]+>\\w+)";

foreach $file (@ARGV) {
    print STDOUT "Checking $file\n";
    if (readfile($file)) {
	$_ = $buf;
	while (/$pattern/sio) {
	    $continue = $';
	    print STDERR "\t$1\n";
	    $_ = $continue;
	}
    }
}

