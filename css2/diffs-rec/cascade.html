<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">

<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>Assigning property values, Cascading, and Inheritance</TITLE>
<link rel="stylesheet" href="style/default.css" type="text/css">
<link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-WD.css" type="text/css">
<link rel="prev" href="selector.html">
<link rel="next" href="media.html">
<link rel="contents" href="cover.html#minitoc">
<link rel="CSS-properties" href="propidx.html" title="properties">
<link rel="index" href="indexlist.html" title="index">
<link rel="first" href="cover.html">
</HEAD>
<BODY>
<div class="navbar">
<p><a href="selector.html">previous</a> &nbsp;
<a href="media.html">next</a> &nbsp;
<a href="cover.html#minitoc">contents</a> &nbsp;
<a href="propidx.html">properties</a> &nbsp;
<a href="indexlist.html">index</a> &nbsp;
</div>
<hr class="navbar">


<h1><a name="q0">6 Assigning property values, Cascading, and Inheritance</a></h1>
<div class="subtoc">
<p><strong>Contents</strong>
  <ul class="toc">
    <li class="tocline2"><a href="cascade.html#q1" class="tocxref">6.1 Specified, computed, and actual values</a>
    <ul class="toc">
      <li class="tocline3"><a href="cascade.html#specified-value" class="tocxref">6.1.1 <span class="index-def" title="specified value"> Specified values</span></a>
      <li class="tocline3"><a href="cascade.html#computed-value" class="tocxref">6.1.2 <span class="index-def" title="computed value"> Computed values</span></a>
      <li class="tocline3"><a href="cascade.html#used-value" class="tocxref">6.1.3 <span class="index-def" title="used value"> <ins>Used</ins> <ins>values</ins></span></a>
      <li class="tocline3"><a href="cascade.html#actual-value" class="tocxref"><ins>6.1.4</ins> <span class="index-def" title="actual value"> Actual values</span></a>
    </ul>
    <li class="tocline2"><a href="cascade.html#inheritance" class="tocxref">6.2 Inheritance</a>
    <ul class="toc">
      <li class="tocline3"><a href="cascade.html#value-def-inherit" class="tocxref">6.2.1 The <span class="index-def" title="inherit, definition of">'inherit'</span> value</a>
    </ul>
    <li class="tocline2"><a href="cascade.html#at-import" class="tocxref">6.3 The @import rule</a>
    <li class="tocline2"><a href="cascade.html#cascade" class="tocxref">6.4 The cascade</a>
    <ul class="toc">
      <li class="tocline3"><a href="cascade.html#cascading-order" class="tocxref">6.4.1 Cascading order</a>
      <li class="tocline3"><a href="cascade.html#important-rules" class="tocxref">6.4.2 !important rules</a>
      <li class="tocline3"><a href="cascade.html#specificity" class="tocxref">6.4.3 Calculating a selector's specificity</a>
      <li class="tocline3"><a href="cascade.html#q13" class="tocxref">6.4.4 Precedence of non-CSS presentational hints</a>
    </ul>
  </ul>
</div>

<h2><a name="q1">6.1 Specified, computed, and actual values</a></h2>

<p>Once a user agent has parsed a document and constructed a <a
href="conform.html#doctree">document tree</a>, it must assign, for
every element in the tree, a value to every property that applies to the
target <a href="media.html">media type</a>. 

<p>The final value of a property is the result of a  <del>three-step</del><ins>four-step</ins>
calculation: the value is determined through specification (the
"specified value"), then resolved into <ins>a</ins> <ins>value</ins> <ins>that</ins> <ins>is</ins> <ins>used</ins> <ins>for</ins>
<ins>inheritance</ins> <ins>(the</ins> <ins>"computed</ins> <ins>value"),</ins> <ins>then</ins> <ins>converted</ins> <ins>into</ins> an absolute
value if necessary (the  <del>"computed</del><ins>"used</ins> value"), and finally transformed
according to the limitations of the local environment (the "actual
value").

<h3>6.1.1 <span class="index-def" title="specified value">
<a name="specified-value">Specified values</a></span></h3>

<p>User agents must first assign a specified value to  <del>a</del><ins>each</ins> property based
on the following mechanisms (in order of precedence):</p>

<ol>
<li>If the <a href="#cascade">cascade</a> results in a value, use it.
<li>Otherwise, if the property is <a href="#inheritance">inherited</a> <ins>and</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>not</ins> <ins>the</ins> <ins>root</ins> <ins>of</ins> <ins>the</ins> <a><ins>document</ins> <ins>tree</ins></a>, use the <ins>computed</ins> value of the parent  <del>element,</del> <del>generally</del> <del>the</del> <del>computed</del> <del>value.</del><ins>element.</ins>
<li>Otherwise use the property's <a name="x1"><span class="index-def" title="initial value">initial value</span></a>. The initial value of each property is indicated in the property's definition. 
</ol>


<h3> <del>Since</del> <del>it</del> <del>has</del> <del>no</del> <del>parent,</del> <del>the</del> <del>root</del> <del>of</del> <del>the</del> <del>document</del> <del>tree</del> <del>cannot</del> <del>use</del> <del>values</del> <del>from</del> <del>the</del> <del>parent</del> <del>element;</del> <del>in</del> <del>this</del> <del>case,</del> <del>the</del> <del>initial</del> <del>value</del> <del>is</del> <del>used</del> <del>if</del> <del>necessary.</del>6.1.2 <span class="index-def" title="computed value">
<a name="computed-value">Computed values</a></span></h3>

<p>Specified values  <del>may</del> <del>be</del> <del>absolute</del> <del>(i.e.,</del> <del>they</del>are  <del>not</del> <del>specified</del> <del>relative</del><ins>resolved</ins> to  <del>another</del> <del>value,</del> <del>as</del> <del>in</del> <del>'red'</del> <del>or</del> <del>'2mm')</del> <del>or</del> <del>relative</del> <del>(i.e.,</del> <del>they</del><ins>computed</ins> <ins>values</ins> <ins>during</ins> <ins>the</ins> <ins>cascade;</ins>
<ins>for</ins> <ins>example</ins> <ins>URIs</ins> are  <del>specified</del> <del>relative</del> <del>to</del> <del>another</del> <del>value,</del> <del>as</del> <del>in</del> <del>'auto',</del> <del>'2em',</del><ins>made</ins> <ins>absolute</ins> and  <del>'12%').</del> <del>For</del><ins>'em'</ins> <ins>and</ins> <ins>'ex'</ins>
<ins>units</ins> <ins>are</ins> <ins>computed</ins> <ins>to</ins> <ins>pixel</ins> <ins>or</ins> absolute  <del>values,</del> <del>no</del> <del>computation</del> <del>is</del> <del>needed</del><ins>lengths.</ins> <ins>Computing</ins> <ins>a</ins> <ins>value</ins>
<ins>never</ins> <ins>requires</ins> <ins>the</ins> <ins>user</ins> <ins>agent</ins> to  <del>find</del><ins>render</ins> the  <del>computed</del> <del>value.</del> <del>Relative</del> <del>values,</del> <del>on</del><ins>document.</ins>

<p>The  <del>other</del> <del>hand,</del> <del>must</del> <del>be</del> <del>transformed</del> <del>into</del>computed  <del>values:</del> <del>percentages</del> <del>must</del> <del>be</del> <del>multiplied</del> <del>by</del> <del>a</del> <del>reference</del> <del>value</del> <del>(each</del> <del>property</del> <del>defines</del> <del>which</del>value <ins>of</ins> <ins>URIs</ins> that  <del>is),</del> <del>values</del> <del>with</del> <del>relative</del> <del>units</del> <del>(em,</del> <del>ex,</del> <del>px)</del> <del>must</del> <del>be</del> <del>made</del> <del>absolute</del> <del>by</del> <del>multiplying</del> <del>with</del> <del>the</del> <del>appropriate</del> <del>font</del> <del>or</del> <del>pixel</del> <del>size,</del> <del>'auto'</del> <del>values</del> <del>must</del> <del>be</del> <del>computed</del> <del>by</del>the  <del>formulas</del> <del>given</del> <del>with</del> <del>each</del> <del>property,</del> <del>certain</del> <del>keywords</del> <del>('smaller',</del> <del>'bolder',</del> <del>'inherit')</del> <del>must</del> <del>be</del> <del>replaced</del> <del>according</del><ins>UA</ins> <ins>cannot</ins> <ins>resolve</ins> to  <del>their</del> <del>definitions.</del> <del>In</del> <del>most</del> <del>cases,</del> <del>elements</del> <del>inherit</del> <del>computed</del> <del>values.</del> <del>However,</del> <del>there</del> <del>are</del> <del>some</del> <del>properties</del> <del>whose</del><ins>absolute</ins>
<ins>URIs</ins> <ins>is</ins> <ins>the</ins> specified  <del>value</del> <del>may</del> <del>be</del> <del>inherited</del> <del>(e.g.,</del><ins>value.</ins>

<p><ins>When</ins> the  <del>number</del><ins>specified</ins> value  <del>for</del> <del>the</del> <del>'line-height'</del> <del>property).</del> <del>In</del> <del>the</del> <del>cases</del> <del>where</del> <del>child</del> <del>elements</del> <del>do</del><ins>is</ins> not  <del>inherit</del><ins>'inherit',</ins> the computed  <del>value,</del> <del>this</del><ins>value</ins> <ins>of</ins> <ins>a</ins>
<ins>property</ins> is  <del>described</del> <del>in</del><ins>determined</ins> <ins>as</ins> <ins>specified</ins> <ins>by</ins> the  <del>property</del> <del>definition.</del> <del>6.1.3</del> <del>Actual</del> <del>values</del> <del>A</del>Computed Value  <del>is</del><ins>line</ins> in  <del>principle</del> <del>ready</del> <del>to</del> <del>be</del> <del>used,</del> <del>but</del> <del>a</del> <del>user</del> <del>agent</del> <del>may</del> <del>not</del> <del>be</del> <del>able</del> <del>to</del> <del>make</del> <del>use</del><ins>the</ins>
<ins>definition</ins> of the
 <del>value</del> <del>in</del> <del>a</del> <del>given</del> <del>environment.</del><ins>property.</ins> <ins>See</ins> <ins>the</ins> <ins>section</ins> <ins>on</ins> <a href="#inheritance"><ins>inheritance</ins></a>
for  <del>example,</del> <del>a</del> <del>user</del> <del>agent</del> <del>may</del> <del>only</del> <del>be</del> <del>able</del> <del>to</del> <del>render</del> <del>borders</del> <del>with</del> <del>integer</del> <del>pixel</del> <del>widths</del> <del>and</del> <del>may</del> <del>therefore</del> <del>have</del> <del>to</del> <del>approximate</del>the <ins>definition</ins> <ins>of</ins> computed  <del>width.</del><ins>values</ins> <ins>when</ins> the  <del>actual</del><ins>specified</ins> value is
<ins>'inherit'.</ins>

<p>The computed value  <del>after</del> <del>any</del> <del>approximations</del> <del>have</del> <del>been</del> <del>applied.</del> <del>6.2</del> <del>Inheritance</del> <del>Some</del><ins>exists</ins> <ins>even</ins> <ins>when</ins> <ins>the</ins> <ins>property</ins> <ins>doesn't</ins> <ins>apply,</ins> <ins>as</ins>
<ins>defined</ins> <ins>by</ins> <ins>the</ins> <a href="about.html#applies-to"><ins>'Applies</ins> <ins>To'</ins></a> <ins>line.</ins>
<ins>However,</ins> <ins>some</ins>
<ins>properties</ins> <ins>may</ins> <ins>define</ins> <ins>the</ins> <ins>computed</ins> <ins>value</ins> <ins>of</ins> <ins>a</ins> <ins>property</ins> <ins>for</ins> <ins>an</ins> <ins>element</ins>
<ins>to</ins> <ins>depend</ins> <ins>on</ins> <ins>whether</ins> <ins>the</ins> <ins>property</ins> <ins>applies</ins> <ins>to</ins> <ins>that</ins> <ins>element.</ins>


<h3><ins>6.1.3</ins> <span class="index-def" title="used value">
<a name="used-value"><ins>Used</ins> <ins>values</ins></a></span></h3>

<p><ins>Computed</ins> <ins>values</ins> <ins>are</ins> <ins>processed</ins> <ins>as</ins> <ins>far</ins> <ins>as</ins> <ins>possible</ins> <ins>without</ins> <ins>formatting</ins>
<ins>the</ins> <ins>document.</ins> <ins>Some</ins> <ins>values,</ins> <ins>however,</ins> <ins>can</ins> <ins>only</ins> <ins>be</ins> <ins>determined</ins> <ins>when</ins> <ins>the</ins>
<ins>document</ins> <ins>is</ins> <ins>being</ins> <ins>laid</ins> <ins>out.</ins> <ins>For</ins> <ins>example,</ins> <ins>if</ins> <ins>the</ins> <ins>width</ins> <ins>of</ins> <ins>an</ins> <ins>element</ins> <ins>is</ins>
<ins>set</ins> <ins>to</ins> <ins>be</ins> <ins>a</ins> <ins>certain</ins> <ins>percentage</ins> <ins>of</ins> <ins>its</ins> <ins>containing</ins> <ins>block,</ins> <ins>the</ins> <ins>width</ins>
<ins>cannot</ins> <ins>be</ins> <ins>determined</ins> <ins>until</ins> <ins>the</ins> <ins>width</ins> <ins>of</ins> <ins>the</ins> <ins>containing</ins> <ins>block</ins> <ins>has</ins> <ins>been</ins>
<ins>determined.</ins> <ins>The</ins> <dfn id="usedValue"><ins>used</ins> <ins>value</ins></dfn> <ins>is</ins> <ins>the</ins> <ins>result</ins> <ins>of</ins>
<ins>taking</ins> <ins>the</ins> <ins>computed</ins> <ins>value</ins> <ins>and</ins> <ins>resolving</ins> <ins>any</ins> <ins>remaining</ins> <ins>dependencies</ins>
<ins>into</ins> <ins>an</ins> <ins>absolute</ins> <ins>value.</ins>

<h3><ins>6.1.4</ins> <span class="index-def" title="actual value">
<a name="actual-value"><ins>Actual</ins> <ins>values</ins></a></span></h3>

<p><ins>A</ins> <ins>used</ins> <ins>value</ins> <ins>is</ins> <ins>in</ins> <ins>principle</ins> <ins>the</ins> <ins>value</ins> <ins>used</ins> <ins>for</ins> <ins>rendering,</ins> <ins>but</ins> <ins>a</ins>
<ins>user</ins> <ins>agent</ins> <ins>may</ins> <ins>not</ins> <ins>be</ins> <ins>able</ins> <ins>to</ins> <ins>make</ins> <ins>use</ins> <ins>of</ins> <ins>the</ins> <ins>value</ins> <ins>in</ins> <ins>a</ins> <ins>given</ins>
<ins>environment.</ins> <ins>For</ins> <ins>example,</ins> <ins>a</ins> <ins>user</ins> <ins>agent</ins> <ins>may</ins> <ins>only</ins> <ins>be</ins> <ins>able</ins> <ins>to</ins> <ins>render</ins>
<ins>borders</ins> <ins>with</ins> <ins>integer</ins> <ins>pixel</ins> <ins>widths</ins> <ins>and</ins> <ins>may</ins> <ins>therefore</ins> <ins>have</ins> <ins>to</ins>
<ins>approximate</ins> <ins>the</ins> <ins>computed</ins> <ins>width,</ins> <ins>or</ins> <ins>the</ins> <ins>user</ins> <ins>agent</ins> <ins>may</ins> <ins>be</ins> <ins>forced</ins> <ins>to</ins>
<ins>use</ins> <ins>only</ins> <ins>black</ins> <ins>and</ins> <ins>white</ins> <ins>shades</ins> <ins>instead</ins> <ins>of</ins> <ins>full</ins> <ins>colour.</ins> <ins>The</ins> <ins>actual</ins>
<ins>value</ins> <ins>is</ins> <ins>the</ins> <ins>used</ins> <ins>value</ins> <ins>after</ins> <ins>any</ins> <ins>approximations</ins> <ins>have</ins> <ins>been</ins> <ins>applied.</ins>


<h2><ins>6.2</ins> <a name="inheritance"><ins>Inheritance</ins></a></h2>

<p><ins>Some</ins> values are inherited by the children of an element in the <a
href="conform.html#doctree">document tree</a><ins>,</ins> <ins>as</ins> <ins>described</ins> <a
href="#specified-value"><ins>above</ins></a>. Each property <a
href="about.html#property-defs">defines</a> whether it is inherited or
not.

<div class="html-example"><P>
Suppose there is an H1 element with an emphasizing element (EM)
inside:</p>

<pre>
&lt;H1&gt;The headline &lt;EM&gt;is&lt;/EM&gt; important!&lt;/H1&gt;
</pre>

<p>If no color has been assigned to the EM element, the emphasized
"is" will inherit the color of the parent element, so if H1 has the
color blue, the EM element will likewise be in blue.
</div>

<p> <del>To</del> <del>set</del> <del>a</del> <del>"default"</del> <del>style</del> <del>property</del> <del>for</del> <del>a</del> <del>document,</del> <del>authors</del> <del>may</del> <del>set</del> <del>the</del> <del>property</del> <del>on</del> <del>the</del> <del>root</del> <del>of</del> <del>the</del> <del>document</del> <del>tree.</del> <del>In</del> <del>HTML,</del> <del>for</del> <del>example,</del> <del>the</del> <del>HTML</del> <del>or</del> <del>BODY</del><ins>When</ins> <ins>inheritance</ins> <ins>occurs,</ins> elements  <del>can</del> <del>serve</del> <del>this</del> <del>function.</del> <del>Note</del> <del>that</del> <del>this</del> <del>will</del> <del>work</del> <del>even</del> <del>if</del> <del>the</del> <del>author</del> <del>omits</del> <del>the</del> <del>BODY</del> <del>tag</del> <del>in</del> <del>the</del> <del>HTML</del> <del>source</del> <del>since</del> <del>the</del> <del>HTML</del> <del>parser</del> <del>will</del> <del>infer</del> <del>the</del> <del>missing</del> <del>tag.</del> <del>Example(s):</del> <del>For</del> <del>example,</del> <del>since</del><ins>inherit</ins> <ins>computed</ins> <ins>values.</ins> The
 <del>'color'</del> <del>property</del> <del>is</del> <del>inherited,</del> <del>all</del> <del>descendants</del> <del>of</del><ins>computed</ins> <ins>value</ins> <ins>from</ins> the  <del>BODY</del><ins>parent</ins> element  <del>will</del> <del>inherit</del><ins>becomes</ins> <ins>both</ins> the  <del>color</del> <del>'black':</del> <del>BODY</del> <del>{</del> <del>color:</del> <del>black;</del> <del>}</del>specified
 <del>percentage</del> <del>values</del> <del>are</del> <del>not</del> <del>inherited;</del><ins>value</ins> <ins>and</ins> <ins>the</ins> computed  <del>values</del> <del>are.</del><ins>value</ins> <ins>on</ins> <ins>the</ins> <ins>child.</ins>

<div class="example"><P style="display:none">Example(s):</P><P> 
For example, given the following style sheet:</P>

<pre>
body { font-size: 10pt }
h1 { font-size:  <del>120%</del><ins>130%</ins> }
</pre>

<p>and this document fragment:

<pre class="html-example">
&lt;BODY&gt;
  &lt;H1&gt;A &lt;EM&gt;large&lt;/EM&gt; heading&lt;/H1&gt;
&lt;/BODY&gt;
</pre>

<p>the <span class="prop-inst-font-size">'font-size'</span> property
for the H1 element will have the computed value  <del>'12pt'</del> <del>(120%</del><ins>'13pt'</ins> <ins>(130%</ins> times
10pt, the parent's value). Since the computed value of <a href="fonts.html#propdef-font-size" class="noxref"><span
class="propinst-font-size">'font-size'</span></a> is inherited, the EM
element will have the computed value  <del>'12pt'</del><ins>'13pt'</ins> as well.  If the
user agent does not have the  <del>12pt</del><ins>13pt</ins> font available, the
actual value of <a href="fonts.html#propdef-font-size" class="noxref"><span class="propinst-font-size">'font-size'</span></a>
for both H1 and EM might be, for example,  <del>'11pt'.</del><ins>'12pt'.</ins>
</div>

<h3>6.2.1 The <span class="index-def" title="inherit, definition
of"><a name="value-def-inherit">'inherit'</a></span>
value</h3>

<P>Each property may also have a specified value of 'inherit', which
means that, for a given element, the property takes the same computed
value as the property for the element's parent. The  <del>inherited</del> <del>value,</del> <del>which</del> <del>is</del> <del>normally</del> <del>only</del><ins>'inherit'</ins> <ins>value</ins>
<ins>can</ins> <ins>be</ins> used  <del>as</del> <del>a</del> <del>fallback</del> <del>value,</del><ins>to</ins> <ins>strengthen</ins> <ins>inherited</ins> <ins>values,</ins> <ins>and</ins> <ins>it</ins> can <ins>also</ins> be  <del>strengthened</del> <del>by</del> <del>setting</del><ins>used</ins> <ins>on</ins>
<ins>properties</ins> <ins>that</ins> <ins>are</ins> <ins>not</ins> <ins>normally</ins> <ins>inherited.</ins>

<p><ins>If</ins> <ins>the</ins> 'inherit'  <del>explicitly.</del><ins>value</ins> <ins>is</ins> <ins>set</ins> <ins>on</ins> <ins>the</ins> <ins>root</ins> <ins>element,</ins> <ins>the</ins> <ins>property</ins> <ins>is</ins>
<ins>assigned</ins> <ins>its</ins> <ins>initial</ins> <ins>value.</ins>

<div class="example"><P style="display:none">Example(s):</P><P>In the example below, the <a href="colors.html#propdef-color" class="noxref"><span
class="propinst-color">'color'</span></a> and <a href="colors.html#propdef-background" class="noxref"><span
class="propinst-background">'background'</span></a> properties are set on
the BODY element. On all other elements, the 'color' value will be
inherited and the background will be transparent. If these rules are
part of the user's style sheet, black text on a white background will
be enforced throughout the document.

<PRE>
body {
  color: black !important; 
  background: white !important;
}

* { 
  color: inherit !important; 
  background:  <del>transparent;</del><ins>transparent</ins> <ins>!important;</ins>
}
</PRE>

</div>




<H2>6.3 <a name="at-import">The @import rule</a></h2>

<P>The <a name="x6"><span class="index-def"
title="@import"><dfn>'@import'</dfn></span></a> rule allows users to
import style rules from other style sheets. Any @import rules must
precede all rule sets in a style sheet. The '@import' keyword must be
followed by the URI of the style sheet to include. A string is also
allowed; it will be interpreted as if it had url(...) around it.

<div class="example"><P style="display:none">Example(s):</P><P> 
The following lines are equivalent in meaning and illustrate both
'@import' syntaxes (one with "url()" and one with a bare string):</p>

<PRE>
@import "mystyle.css";
@import url("mystyle.css");
</PRE>
</div>

<p>So that user agents can avoid retrieving resources for unsupported
<a href="media.html">media types</a>, authors may specify
media-dependent <a name="x7"><span class="index-inst"
title="@import">@import</span></a> rules.  These <a name="x8"><span class="index-def"
title="conditional import|media-dependent import">conditional
imports</span></a> specify comma-separated  <del>media</del> <del>types</del> <del>after</del> <del>the</del> <del>URI.</del> <del>Example(s):</del> <del>The</del> <del>following</del> <del>rules</del> <del>have</del> <del>the</del> <del>same</del> <del>effect</del> <del>as</del> <del>if</del> <del>the</del> <del>imported</del> <del>style</del> <del>sheet</del> <del>were</del> <del>wrapped</del> <del>in</del> <del>an</del> <del>@media</del> <del>rule</del> <del>for</del><ins>media</ins> <ins>types</ins> <ins>after</ins> the  <del>same</del> <del>media,</del> <del>but</del> <del>it</del> <del>may</del> <del>save</del><ins>URI.</ins>

<div class="example"><P style="display:none"><ins>Example(s):</ins></P>
<p>The  <del>UA</del> <del>a</del> <del>fruitless</del> <del>download.</del><ins>following</ins> <ins>rules</ins> <ins>illustrate</ins> <ins>how</ins> <ins>@import</ins> <ins>rules</ins> <ins>can</ins> <ins>be</ins> <ins>made</ins> <ins>media-dependent:</ins></p>

<pre>
@import url("fineprint.css") print;
@import url("bluish.css") projection, tv;
</pre>
</div>

<p>In the absence of any media types, the import is
unconditional. Specifying 'all' for the medium has the same effect.

<H2>6.4 <a name="cascade">The cascade</a></h2>

<P>Style sheets may have three different origins: author, user, and
user agent.</p>

<ul>
<li><strong>Author</strong>. The author specifies style sheets
for a source document according to the conventions of the document
language. For instance, in HTML, style sheets may be included in the
document or linked externally.

<li><strong>User</strong>: The user may be able to specify style
information for a particular document. For example, the user may
specify a file that contains a style sheet or the user agent may
provide an interface that generates a user style sheet (or  <del>behave</del><ins>behaves</ins> as
if it did).

<li><strong>User agent</strong>: <a
href="conform.html#conformance">Conforming user agents</a> must apply
a <span class="index-def" title="default style sheet"><a
name="default-style-sheet"><dfn>default style sheet</dfn></a></span>
(or behave as if they did) prior to all other style sheets for a
document. A user agent's default style sheet should present the
elements of the document language in ways that satisfy general
presentation expectations for the document language (e.g., for visual
browsers, the EM element in HTML is presented using an italic
font). See <a href="sample.html"> <del>"A</del><ins>A</ins> sample style sheet for HTML
</a>  <del>4.0"</del>for a recommended default style sheet for HTML  <del>4.0</del>documents.

<p class="note">Note that the  <del>default</del> <del>style</del> <del>sheet</del><ins>user</ins> may  <del>change</del> <del>if</del><ins>modify</ins> system settings  <del>are</del> <del>modified</del> <del>by</del> <del>the</del> <del>user</del> <del>(e.g.,</del><ins>(e.g.</ins> 
system  <del>colors).</del><ins>colors)</ins> <ins>that</ins> <ins>affect</ins> <ins>the</ins> <ins>default</ins> <ins>style</ins> <ins>sheet.</ins> However,  <del>due</del> <del>to</del> <del>limitations</del> <del>in</del> <del>a</del><ins>some</ins> user 
 <del>agent's</del> <del>internal</del> <del>implementation,</del><ins>agent</ins> <ins>implementations</ins> <ins>make</ins> it  <del>may</del> <del>be</del>impossible to change the values in the 
default style sheet.
</ul>

<P>Style sheets from these three origins will overlap in scope, and
they interact according to the cascade.

<P>The CSS <a name="x11"><span class="index-def" title="cascade">cascade</span></a>
assigns a weight to each style rule. When several rules apply, the one
with the greatest weight takes precedence.

<P>By default, rules in author style sheets have more weight than
rules in user style sheets. Precedence is reversed, however, for
"!important" rules. All  <del>rules</del>user and author rules have more weight
than rules in the UA's default style sheet.


<H3> <del>Imported</del> <del>style</del> <del>sheets</del> <del>also</del> <del>cascade</del> <del>and</del> <del>their</del> <del>weight</del> <del>depends</del> <del>on</del> <del>their</del> <del>import</del> <del>order.</del> <del>Rules</del> <del>specified</del> <del>in</del> <del>a</del> <del>given</del> <del>style</del> <del>sheet</del> <del>override</del> <del>rules</del> <del>imported</del> <del>from</del> <del>other</del> <del>style</del> <del>sheets.</del> <del>Imported</del> <del>style</del> <del>sheets</del> <del>can</del> <del>themselves</del> <del>import</del> <del>and</del> <del>override</del> <del>other</del> <del>style</del> <del>sheets,</del> <del>recursively,</del> <del>and</del> <del>the</del> <del>same</del> <del>precedence</del> <del>rules</del> <del>apply.</del>6.4.1 <a name="cascading-order">Cascading order</a></H3>

<P>To find the value for an element/property combination, user agents
must apply the following sorting order:</p>

<OL>
    <LI>
      Find all declarations that apply to the element and property in
      question, for the target <a href="media.html">media type</a>.
      Declarations apply if the associated selector <A
      HREF="selector.html">matches</A> the element in question.

    <LI> <del>The</del> <del>primary</del>Sort  <del>of</del> <del>the</del> <del>declarations</del> <del>is</del>by  <del>weight</del><ins>importance</ins> <ins>(normal</ins> <ins>or</ins> <ins>important)</ins> and  <del>origin:</del> <del>for</del> <del>normal</del> <del>declarations,</del> <del>author</del> <del>style</del> <del>sheets</del> <del>override</del><ins>origin</ins> <ins>(author,</ins> <ins>user,</ins> <ins>or</ins> <ins>user</ins> <ins>agent).</ins> <ins>In</ins> <ins>ascending</ins> <ins>order:</ins>

<ol>
<li>user <ins>agent</ins> style sheets
<li> <del>which</del> <del>override</del> <del>the</del> <del>default</del> <del>style</del> <del>sheet.</del> <del>For</del> <del>"!important"</del> <del>declarations,</del>user <ins>normal</ins> style sheets
<li> <del>override</del>author <ins>normal</ins> style sheets
<li> <del>which</del> <del>override</del> <del>the</del> <del>default</del> <del>style</del> <del>sheet.</del> <del>"!important"</del> <del>declaration</del> <del>override</del> <del>normal</del> <del>declarations.</del> <del>An</del> <del>imported</del><ins>author</ins> <ins>important</ins> style  <del>sheet</del> <del>has</del> <del>the</del> <del>same</del> <del>origin</del> <del>as</del> <del>the</del><ins>sheets</ins>
<li><ins>user</ins> <ins>important</ins> style  <del>sheet</del> <del>that</del> <del>imported</del> <del>it.</del> <del>The</del> <del>secondary</del><ins>sheets</ins>
</ol>

    <LI>
      Sort  <del>is</del>by <a href="#specificity">specificity</a> 
      of selector: more specific
      selectors will override more general ones.  Pseudo-elements and
      pseudo-classes are counted as normal elements and classes,
      respectively.

    <LI> Finally, sort by order specified: if two rules have the same
    weight, origin and specificity,
    the latter specified wins. Rules in imported style sheets are
    considered to be before any rules in the style sheet itself.

</OL>

<P>Apart from the "!important" setting on individual declarations,
this strategy gives author's style sheets higher weight than those of
the reader.  <del>It</del> <del>is</del> <del>therefore</del> <del>important</del> <del>that</del> <del>the</del>User  <del>agent</del><ins>agents</ins> <ins>must</ins> give the user the ability to turn off the
influence of  <del>a</del> <del>certain</del><ins>specific</ins> <ins>author</ins> style  <del>sheet,</del><ins>sheets,</ins> e.g., through a pull-down
menu. <ins>Conformance</ins> <ins>to</ins> <ins>UAAG</ins> <ins>1.0</ins> <ins>checkpoint</ins> <ins>4.14</ins> <ins>satisfies</ins> <ins>this</ins> <ins>condition</ins> <a href="refs.html#ref-UAAG10" rel="biblioentry" class="noxref"><span class="normref"><ins>[UAAG10]</ins></span></a><ins>.</ins>

<H3>6.4.2 <a name="important-rules">!important rules</a></H3>

<P>CSS attempts to create a balance of power between author
and user style sheets. By default, rules in an author's style
sheet override those in a user's style sheet (see cascade
rule 3). 

<P>However, for balance, an "!important" declaration (the  <del>keywords</del><ins>delimiter</ins> <ins>token</ins> 
"!" and <ins>keyword</ins> "important" follow the declaration) takes precedence over 
a normal declaration.  Both author and user style sheets may contain
"!important" declarations, and user "!important" rules override author
"!important" rules. This CSS feature improves accessibility
of documents by giving users with special requirements (large
fonts, color combinations, etc.) control over presentation.

<P> <del>Note.</del> <del>This</del> <del>is</del> <del>a</del> <del>semantic</del> <del>change</del> <del>since</del> <del>CSS1.</del> <del>In</del> <del>CSS1,</del> <del>author</del> <del>"!important"</del> <del>rules</del> <del>took</del> <del>precedence</del> <del>over</del> <del>user</del> <del>"!important"</del> <del>rules.</del>Declaring a <a name="x12"><span class="index-inst" title="shorthand
property">shorthand property</span></a> (e.g., <a href="colors.html#propdef-background" class="noxref"><span
class="propinst-background">'background'</span></a>) to be "!important" is
equivalent to declaring all of its sub-properties to be "!important".

<div class="example"><P style="display:none">Example(s):</P> 
<P>The first rule in the user's style sheet in the following example
contains an "!important" declaration, which overrides the corresponding
declaration in the author's  <del>styles</del><ins>style</ins> sheet.  The second declaration
will also win due to being marked "!important". However, the third
rule in the user's style sheet is not "!important" and will therefore
lose to the second rule in the author's style sheet (which happens to
set style on a shorthand property). Also, the third author rule will
lose to the second author rule since the second rule is
"!important". This shows that "!important" declarations have a
function also within author style sheets.

<PRE>
/* From the user's style sheet */
p { text-indent: 1em ! important }
p { font-style: italic ! important }
p { font-size: 18pt }

/* From the author's style sheet */
p { text-indent: 1.5em !important }
p { font: <ins>normal</ins> 12pt sans-serif !important }
p { font-size: 24pt }
</PRE>
</div>


<H3>6.4.3 <a name="specificity">Calculating a selector's specificity</a></H3>

<P>A selector's specificity is calculated as follows:</p>

<ul>
<li>count <ins>1</ins> <ins>if</ins> <ins>the</ins> <ins>selector</ins> <ins>is</ins> <ins>a</ins> <ins>'style'</ins> <ins>attribute</ins> <ins>rather</ins> <ins>than</ins> <ins>a</ins>
<ins>selector,</ins> <ins>0</ins> <ins>otherwise</ins> <ins>(=</ins> <ins>a)</ins> <ins>(In</ins> <ins>HTML,</ins> <ins>values</ins> <ins>of</ins> <ins>an</ins> <ins>element's</ins> <ins>"style"</ins>
<ins>attribute</ins> <ins>are</ins> <ins>style</ins> <ins>sheet</ins> <ins>rules.</ins> <ins>These</ins> <ins>rules</ins> <ins>have</ins> <ins>no</ins> <ins>selectors,</ins> <ins>so</ins>
<ins>a=1,</ins> <ins>b=0,</ins> <ins>c=0,</ins> <ins>and</ins> <ins>d=0.)</ins>

<li><ins>count</ins> the number of ID attributes in the selector (=  <del>a)</del><ins>b)</ins>

<li>count the number of other attributes and pseudo-classes 
in the selector (=  <del>b)</del><ins>c)</ins>

<li>count the  <del>number</del> <del>of</del> <del>element</del> <del>names</del><ins>number</ins> <ins>of</ins> <ins>element</ins> <ins>names</ins> <ins>and</ins> <ins>pseudo-elements</ins> <ins>in</ins> <ins>the</ins> <ins>selector</ins> <ins>(=</ins> <ins>d)</ins>
</ul>

<p><ins>The</ins> <ins>specificity</ins> <ins>is</ins> <ins>based</ins> <ins>only</ins> <ins>on</ins> <ins>the</ins> <ins>form</ins> <ins>of</ins> <ins>the</ins> <ins>selector.</ins> <ins>In</ins>
<ins>particular,</ins> <ins>a</ins> <ins>selector</ins> <ins>of</ins> <ins>the</ins> <ins>form</ins> <ins>"[id=p33]"</ins> <ins>is</ins> <ins>counted</ins> <ins>as</ins> <ins>an</ins>
<ins>attribute</ins> <ins>selector</ins> <ins>(a=0,</ins> <ins>b=0,</ins> <ins>c=1,</ins> <ins>d=0),</ins> <ins>even</ins> <ins>if</ins> <ins>the</ins> <ins>id</ins> <ins>attribute</ins> <ins>is</ins>
<ins>defined</ins> <ins>as</ins> <ins>an</ins> <ins>"ID"</ins> in the  <del>selector</del> <del>(=</del> <del>c)</del> <del>ignore</del> <del>pseudo-elements.</del><ins>source</ins> <ins>document's</ins> <ins>DTD.</ins>

<P>Concatenating the  <del>three</del><ins>four</ins> numbers  <del>a-b-c</del><ins>a-b-c-d</ins> (in a number system with a large
base) gives the specificity. 

<div class="example"><P style="display:none">Example(s):</P><P>
Some examples:

<PRE>
 *             {}  /* a=0 b=0 c=0 <ins>d=0</ins> -&gt; specificity =  <del>0</del><ins>0,0,0,0</ins> */
 li            {}  /* a=0 b=0  <del>c=1</del><ins>c=0</ins> <ins>d=1</ins> -&gt; specificity =  <del>1</del><ins>0,0,0,1</ins> <ins>*/</ins>
 <ins>li:first-line</ins> <ins>{}</ins>  <ins>/*</ins> <ins>a=0</ins> <ins>b=0</ins> <ins>c=0</ins> <ins>d=2</ins> <ins>-&gt;</ins> <ins>specificity</ins> <ins>=</ins> <ins>0,0,0,2</ins> */
 ul li         {}  /* a=0 b=0  <del>c=2</del><ins>c=0</ins> <ins>d=2</ins> -&gt; specificity =  <del>2</del><ins>0,0,0,2</ins> */
 ul ol+li      {}  /* a=0 b=0  <del>c=3</del><ins>c=0</ins> <ins>d=3</ins> -&gt; specificity =  <del>3</del><ins>0,0,0,3</ins> */
 h1 + *[rel=up]{}  /* a=0  <del>b=1</del><ins>b=0</ins> c=1 <ins>d=1</ins> -&gt; specificity =  <del>11</del><ins>0,0,1,1</ins> */
 ul ol li.red  {}  /* a=0  <del>b=1</del> <del>c=3</del><ins>b=0</ins> <ins>c=1</ins> <ins>d=3</ins> -&gt; specificity =  <del>13</del><ins>0,0,1,3</ins> */
 li.red.level  {}  /* a=0  <del>b=2</del> <del>c=1</del><ins>b=0</ins> <ins>c=2</ins> <ins>d=1</ins> -&gt; specificity =  <del>21</del><ins>0,0,2,1</ins> */
 #x34y         {}  /* <ins>a=0</ins> <ins>b=1</ins> <ins>c=0</ins> <ins>d=0</ins> <ins>-&gt;</ins> <ins>specificity</ins> <ins>=</ins> <ins>0,1,0,0</ins> <ins>*/</ins>
 <ins>style=""</ins>          <ins>/*</ins> a=1 b=0 c=0 <ins>d=0</ins> -&gt; specificity =  <del>100</del><ins>1,0,0,0</ins> */
</PRE>
</div>

<div class="html-example">

<pre>
 <del>In</del> <del>HTML,</del> <del>values</del> <del>of</del> <del>an</del> <del>element's</del> <del>"style"</del> <del>attribute</del> <del>are</del> <del>style</del> <del>sheet</del> <del>rules.</del> <del>These</del> <del>rules</del> <del>have</del> <del>no</del> <del>selectors,</del> <del>but</del> <del>for</del> <del>the</del> <del>purpose</del> <del>of</del> <del>step</del> <del>3</del> <del>of</del> <del>the</del> <del>cascade</del> <del>algorithm,</del> <del>they</del> <del>are</del> <del>considered</del> <del>to</del> <del>have</del> <del>an</del> <del>ID</del> <del>selector</del> <del>(specificity:</del> <del>a=1,</del> <del>b=0,</del> <del>c=0).</del> <del>For</del> <del>the</del> <del>purpose</del> <del>of</del> <del>step</del> <del>4,</del> <del>they</del> <del>are</del> <del>considered</del> <del>to</del> <del>be</del> <del>after</del> <del>all</del> <del>other</del> <del>rules.</del>&lt;HEAD&gt;
&lt;STYLE type="text/css"&gt;
  #x97z { color:  <del>blue</del><ins>red</ins> }
&lt;/STYLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;P ID=x97z style="color:  <del>red"&gt;</del><ins>green"&gt;</ins>
&lt;/BODY&gt;
</pre>

<P>In the above example, the color of the P element would be
 <del>red.</del> <del>Although</del> <del>the</del> <del>specificity</del> <del>is</del> <del>the</del> <del>same</del> <del>for</del> <del>both</del> <del>declarations,</del><ins>green.</ins> The declaration in the "style" attribute will override the one in
the STYLE element because of cascading rule  <del>4.</del><ins>3,</ins> <ins>since</ins> <ins>it</ins> <ins>has</ins> <ins>a</ins> <ins>higher</ins>
<ins>specificity.</ins>
</div>


<H3><a name="q13">6.4.4 Precedence of non-CSS presentational hints</a></H3> 

<P>The UA may choose to honor presentational  <del>hints</del> <del>from</del> <del>other</del> <del>sources</del> <del>than</del> <del>style</del> <del>sheets,</del> <del>for</del> <del>example</del> <del>the</del> <del>FONT</del> <del>element</del> <del>or</del> <del>the</del> <del>"align"</del> <del>attribute</del><ins>attributes</ins> in  <del>HTML.</del><ins>an</ins> <ins>HTML</ins> <ins>source</ins>
<ins>document.</ins> If so,  <del>the</del> <del>non-CSS</del> <del>presentational</del> <del>hints</del> <del>must</del> <del>be</del><ins>these</ins> <ins>attributes</ins> <ins>are</ins> translated to the corresponding
CSS rules with specificity equal to  <del>zero.</del> <del>The</del> <del>rules</del><ins>0,</ins> <ins>and</ins> are  <del>assumed</del> <del>to</del> <del>be</del><ins>treated</ins> <ins>as</ins> <ins>if</ins> <ins>they</ins> <ins>were</ins>
<ins>inserted</ins> at the start of the author style  <del>sheet</del> <del>and</del><ins>sheet.</ins> <ins>They</ins> may <ins>therefore</ins> be
overridden by subsequent style sheet rules.  <del>Note.</del>In a transition phase,
this policy will make it easier for stylistic attributes to coexist
with style sheets.

<P> <del>Note.</del><ins>For</ins> <ins>HTML,</ins> <ins>any</ins> <ins>attribute</ins> <ins>that</ins> <ins>is</ins> <ins>not</ins> in  <del>CSS1,</del>the  <del>non-CSS</del> <del>presentational</del> <del>hints</del> <del>were</del> <del>given</del> <del>a</del> <del>specificity</del> <del>equal</del> <del>to</del> <del>1,</del> <del>not</del> <del>0.</del><ins>following</ins> <ins>list</ins> <ins>should</ins> <ins>be</ins>
<ins>considered</ins> <ins>presentational:</ins> <ins>abbr,</ins> <ins>accept-charset,</ins> <ins>accept,</ins> <ins>accesskey,</ins>
<ins>action,</ins> <ins>alt,</ins> <ins>archive,</ins> <ins>axis,</ins> <ins>charset,</ins> <ins>checked,</ins> <ins>cite,</ins> <ins>class,</ins> <ins>classid,</ins>
<ins>code,</ins> <ins>codebase,</ins> <ins>codetype,</ins> <ins>colspan,</ins> <ins>coords,</ins> <ins>data,</ins> <ins>datetime,</ins> <ins>declare,</ins>
<ins>defer,</ins> <ins>dir,</ins> <ins>disabled,</ins> <ins>enctype,</ins> <ins>for,</ins> <ins>headers,</ins> <ins>href,</ins> <ins>hreflang,</ins>
<ins>http-equiv,</ins> <ins>id,</ins> <ins>ismap,</ins> <ins>label,</ins> <ins>lang,</ins> <ins>language,</ins> <ins>longdesc,</ins> <ins>maxlength,</ins>
<ins>media,</ins> <ins>method,</ins> <ins>multiple,</ins> <ins>name,</ins> <ins>nohref,</ins> <ins>object,</ins> <ins>onblur,</ins> <ins>onchange,</ins>
<ins>onclick,</ins> <ins>ondblclick,</ins> <ins>onfocus,</ins> <ins>onkeydown,</ins> <ins>onkeypress,</ins> <ins>onkeyup,</ins> <ins>onload,</ins>
<ins>onload,</ins> <ins>onmousedown,</ins> <ins>onmousemove,</ins> <ins>onmouseout,</ins> <ins>onmouseover,</ins> <ins>onmouseup,</ins>
<ins>onreset,</ins> <ins>onselect,</ins> <ins>onsubmit,</ins> <ins>onunload,</ins> <ins>onunload,</ins> <ins>profile,</ins> <ins>prompt,</ins>
<ins>readonly,</ins> <ins>rel,</ins> <ins>rev,</ins> <ins>rowspan,</ins> <ins>scheme,</ins> <ins>scope,</ins> <ins>selected,</ins> <ins>shape,</ins> <ins>span,</ins>
<ins>src,</ins> <ins>standby,</ins> <ins>start,</ins> <ins>style,</ins> <ins>summary,</ins> <ins>title,</ins> <ins>type</ins> <ins>(except</ins> <ins>on</ins> <ins>LI,</ins> <ins>OL</ins> <ins>and</ins> 
<ins>UL</ins> <ins>elements),</ins> <ins>usemap,</ins> <ins>value,</ins> <ins>valuetype,</ins> <ins>version.</ins>

<P><ins>For</ins> <ins>other</ins> <ins>languages,</ins> <ins>all</ins> <ins>document</ins> <ins>language-based</ins> <ins>styling</ins> <ins>should</ins> <ins>be</ins> 
<ins>handled</ins> <ins>in</ins> the  <del>change</del> <del>is</del> <del>due</del> <del>to</del><ins>user</ins> <ins>agent</ins> <ins>style</ins> <ins>sheet.</ins>

<div class="example"><P style="display:none"><ins>Example(s):</ins></P>

<p><ins>The</ins> <ins>following</ins> <ins>user</ins> <ins>style</ins> <ins>sheet</ins> <ins>would</ins> <ins>override</ins> the  <del>introduction</del><ins>font</ins> <ins>weight</ins> of
<ins>'b'</ins> <ins>elements</ins> <ins>in</ins> <ins>all</ins> <ins>documents,</ins> <ins>and</ins> the  <del>universal</del> <del>selector,</del> <del>which</del> <del>has</del> <del>a</del> <del>specificity</del><ins>color</ins> <ins>of</ins> <ins>'font'</ins>
<ins>elements</ins> <ins>with</ins> <ins>color</ins> <ins>attributes</ins> <ins>in</ins> <ins>XML</ins> <ins>documents.</ins> <ins>It</ins> <ins>would</ins> <ins>not</ins> <ins>affect</ins>
<ins>the</ins> <ins>color</ins> <ins>of</ins> <ins>any</ins> <ins>'font'</ins> <ins>elements</ins> <ins>with</ins> <ins>color</ins> <ins>attributes</ins> <ins>in</ins> <ins>HTML</ins>
<ins>documents:</ins>

<pre>
<ins>b</ins> <ins>{</ins> <ins>font-weight:</ins> <ins>normal;</ins> <ins>}</ins>
<ins>font[color]</ins> <ins>{</ins> <ins>color:</ins> <ins>orange;</ins> <ins>}</ins>
</pre>

<P><ins>The</ins> <ins>following,</ins> <ins>however,</ins> <ins>would</ins> <ins>override</ins> <ins>the</ins> <ins>color</ins> of  <del>0.</del><ins>font</ins> <ins>elements</ins> <ins>in</ins> <ins>all</ins> <ins>documents:</ins>

<pre>
<ins>font[color]</ins> <ins>{</ins> <ins>color:</ins> <ins>orange</ins> <ins>!</ins> <ins>important;</ins> <ins>}</ins>
</pre>
</div>



<hr class="navbar">

<div class="navbar">
<p><a href="selector.html">previous</a> &nbsp;
<a href="media.html">next</a> &nbsp;
<a href="cover.html#minitoc">contents</a> &nbsp;
<a href="propidx.html">properties</a> &nbsp;
<a href="indexlist.html">index</a> &nbsp;
</div>
</BODY>
</html>


