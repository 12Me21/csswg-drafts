<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">

<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE><ins>Elaborate</ins> <ins>description</ins> <ins>of</ins> <ins>Stacking</ins> <ins>Contexts</ins></TITLE>
<link rel="stylesheet" href="style/default.css" type="text/css">
<link rel="stylesheet" href="http://www.w3.org/StyleSheets/TR/W3C-CR.css" type="text/css">
<link rel="prev" href="sample.html">
<link rel="next" href="propidx.html">
<link rel="contents" href="cover.html#minitoc">
<link rel="CSS-properties" href="propidx.html" title="properties">
<link rel="index" href="indexlist.html" title="index">
<link rel="first" href="cover.html">
</HEAD>
<BODY>
<div class="navbar">
<p><a href="sample.html"><ins>previous</ins></a> <ins>&nbsp;</ins>
<a href="propidx.html"><ins>next</ins></a> <ins>&nbsp;</ins>
<a href="cover.html#minitoc"><ins>contents</ins></a> <ins>&nbsp;</ins>
<a href="propidx.html"><ins>properties</ins></a> <ins>&nbsp;</ins>
<a href="indexlist.html"><ins>index</ins></a> <ins>&nbsp;</ins>
</div>
<hr class="navbar">

<H1><a name="q0"><ins>Appendix</ins> <ins>E.</ins> <ins>Elaborate</ins> <ins>description</ins> <ins>of</ins> <ins>Stacking</ins> <ins>Contexts</ins></a></H1>
<div class="subtoc">
<p><strong><ins>Contents</ins></strong>
  <ul class="toc">
    <li class="tocline2"><a href="zindex.html#stacking-defs" class="tocxref"><ins>E.1</ins> <ins>Definitions</ins></a>
    <li class="tocline2"><a href="zindex.html#painting-order" class="tocxref"><ins>E.2</ins> <ins>Painting</ins> <ins>order</ins></a>
    <li class="tocline2"><a href="zindex.html#stacking-notes" class="tocxref"><ins>E.3</ins> <ins>Notes</ins></a>
  </ul>
</div>

<p><ins>This</ins> <ins>chapter</ins> <ins>defines</ins> <ins>the</ins> <ins>CSS&nbsp;2.1</ins> <ins>painting</ins> <ins>order</ins> <ins>in</ins> <ins>more</ins> <ins>detail</ins> <ins>than</ins>
<ins>described</ins> <ins>in</ins> <ins>the</ins> <ins>rest</ins> <ins>of</ins> <ins>the</ins> <ins>specification.</ins></p>

<h2><ins>E.1</ins> <a name="stacking-defs"><ins>Definitions</ins></a></h2>

<dl>

<dt><ins>Tree</ins> <ins>Order</ins></dt>

<dd><ins>Preorder</ins> <ins>depth-first</ins> <ins>traversal</ins> <ins>of</ins> <ins>the</ins> <em><ins>rendering</ins></em> <ins>tree,</ins> <ins>in</ins>
<ins>logical</ins> <ins>(not</ins> <ins>visual)</ins> <ins>order</ins> <ins>for</ins> <ins>bidirectional</ins> <ins>content,</ins> <ins>after</ins> <ins>taking</ins>
<ins>into</ins> <ins>account</ins> <ins>properties</ins> <ins>that</ins> <ins>move</ins> <ins>boxes</ins> <ins>around</ins> <ins>such</ins> <ins>as</ins> <ins>the</ins> <ins>'run-in'</ins>
<ins>value</ins> <ins>of</ins> <ins>'display'.</ins></dd>

<dt><ins>Element</ins></dt>

<dd><ins>In</ins> <ins>this</ins> <ins>description,</ins> <ins>"element"</ins> <ins>refers</ins> <ins>to</ins> <ins>actual</ins> <ins>elements,</ins>
<ins>pseudo-elements,</ins> <ins>and</ins> <ins>anonymous</ins> <ins>boxes.</ins> <ins>Pseudo-elements</ins> <ins>and</ins> <ins>anonymous</ins>
<ins>boxes</ins> <ins>are</ins> <ins>treated</ins> <ins>as</ins> <ins>descendants</ins> <ins>in</ins> <ins>the</ins> <ins>appropriate</ins> <ins>places.</ins> <ins>For</ins>
<ins>example,</ins> <ins>an</ins> <ins>outside</ins> <ins>list</ins> <ins>marker</ins> <ins>comes</ins> <ins>before</ins> <ins>an</ins> <ins>adjoining</ins> <ins>':before'</ins>
<ins>box</ins> <ins>in</ins> <ins>the</ins> <ins>line</ins> <ins>box,</ins> <ins>which</ins> <ins>comes</ins> <ins>before</ins> <ins>the</ins> <ins>content</ins> <ins>of</ins> <ins>the</ins> <ins>box,</ins> <ins>and</ins> <ins>so</ins>
<ins>forth.</ins></dd>

</dl>

<h2><ins>E.2</ins> <a name="painting-order"><ins>Painting</ins> <ins>order</ins></a></h2>

<p><ins>The</ins> <ins>bottom</ins> <ins>of</ins> <ins>the</ins> <ins>stack</ins> <ins>is</ins> <ins>the</ins> <ins>furthest</ins> <ins>from</ins> <ins>the</ins> <ins>user,</ins> <ins>the</ins> <ins>top</ins> <ins>of</ins> <ins>the</ins>
<ins>stack</ins> <ins>is</ins> <ins>the</ins> <ins>nearest</ins> <ins>to</ins> <ins>the</ins> <ins>user:</ins></p>

<pre>
               <ins>|</ins>     <ins>|</ins>         <ins>|</ins>    <ins>|</ins>        
               <ins>|</ins>          <ins>|</ins>    <ins>|</ins>    <ins>|</ins>     <ins>&#x21E6;</ins> <ins>&#x263B;</ins>
               <ins>|</ins>          <ins>|</ins>         <ins>|</ins>     <ins>user</ins>
  <ins>z-index:</ins>  <ins>canvas</ins>  <ins>-1</ins>    <ins>0</ins>    <ins>1</ins>    <ins>2</ins>
</pre>

<p><ins>The</ins> <ins>stacking</ins> <ins>context</ins> <ins>background</ins> <ins>and</ins> <ins>most</ins> <ins>negative</ins> <ins>positioned</ins>
<ins>stacking</ins> <ins>contexts</ins> <ins>are</ins> <ins>at</ins> <ins>the</ins> <ins>bottom</ins> <ins>of</ins> <ins>the</ins> <ins>stack,</ins> <ins>while</ins> <ins>the</ins> <ins>most</ins>
<ins>positive</ins> <ins>positioned</ins> <ins>stacking</ins> <ins>contexts</ins> <ins>are</ins> <ins>at</ins> <ins>the</ins> <ins>top</ins> <ins>of</ins> <ins>the</ins> <ins>stack.</ins></p>

<p><ins>The</ins> <ins>canvas</ins> <ins>is</ins> <ins>transparent</ins> <ins>if</ins> <ins>contained</ins> <ins>within</ins> <ins>another,</ins> <ins>and</ins> <ins>given</ins> <ins>a</ins>
<ins>UA-defined</ins> <ins>color</ins> <ins>if</ins> <ins>it</ins> <ins>is</ins> <ins>not.</ins> <ins>It</ins> <ins>is</ins> <ins>infinite</ins> <ins>in</ins> <ins>extent</ins> <ins>and</ins> <ins>contains</ins>
<ins>the</ins> <ins>root</ins> <ins>element.</ins> <ins>Initially,</ins> <ins>the</ins> <ins>viewport</ins> <ins>is</ins> <ins>anchored</ins> <ins>with</ins> <ins>its</ins> <ins>top</ins>
<ins>left</ins> <ins>corner</ins> <ins>at</ins> <ins>the</ins> <ins>canvas</ins> <ins>origin.</ins></p>

<p><ins>The</ins> <ins>stacking</ins> <ins>order</ins> <ins>for</ins> <ins>an</ins> <ins>element</ins> <ins>generating</ins> <ins>a</ins> <ins>stacking</ins> <ins>context</ins> <ins>(see</ins>
<ins>the</ins> <ins>'z-index'</ins> <ins>property)</ins> <ins>is:</ins></p>

<ol>
<li> <ins>If</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>root</ins> <ins>element:</ins>
<ol>
<li>    <ins>background</ins> <ins>color</ins> <ins>of</ins> <ins>element</ins> <ins>over</ins> <ins>the</ins> <ins>entire</ins> <ins>canvas.</ins>
<li>    <ins>background</ins> <ins>image</ins> <ins>of</ins> <ins>element,</ins> <ins>over</ins> <ins>the</ins> <ins>entire</ins> <ins>canvas,</ins> <ins>anchored</ins> <ins>at</ins> <ins>the</ins> <ins>origin</ins>
        <ins>that</ins> <ins>would</ins> <ins>be</ins> <ins>used</ins> <ins>if</ins> <ins>it</ins> <ins>was</ins> <ins>painted</ins> <ins>for</ins> <ins>the</ins> <ins>root</ins> <ins>element.</ins>
</ol>
<li><ins>If</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>block,</ins> <ins>list-item,</ins> <ins>or</ins> <ins>other</ins> <ins>block</ins> <ins>equivalent:</ins>
<ol>
<li>    <ins>background</ins> <ins>color</ins> <ins>of</ins> <ins>element</ins> <ins>unless</ins> <ins>it</ins> <ins>is</ins> <ins>the</ins> <ins>root</ins> <ins>element.</ins>
<li>    <ins>background</ins> <ins>image</ins> <ins>of</ins> <ins>element</ins> <ins>unless</ins> <ins>it</ins> <ins>is</ins> <ins>the</ins> <ins>root</ins> <ins>element.</ins>
<li>    <ins>border</ins> <ins>of</ins> <ins>element.</ins>
</ol>
    <ins>Otherwise,</ins> <ins>if</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>block</ins> <ins>level</ins> <ins>table:</ins>
<ol>
<li>     <ins>table</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image)</ins> <ins>unless</ins> <ins>it</ins> <ins>is</ins> <ins>the</ins> <ins>root</ins> <ins>element.</ins>
<li>     <ins>column</ins> <ins>group</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>column</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>row</ins> <ins>group</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>row</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>cell</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>all</ins> <ins>table</ins> <ins>borders</ins> <ins>(in</ins> <ins>tree</ins> <ins>order</ins> <ins>for</ins> <ins>separated</ins> <ins>borders).</ins>
</ol>
<li><ins>Stacking</ins> <ins>contexts</ins> <ins>formed</ins> <ins>by</ins> <ins>positioned</ins> <ins>descendants</ins> <ins>with</ins> <ins>negative</ins>
    <ins>z-indices</ins> <ins>(excluding</ins> <ins>0)</ins> <ins>in</ins> <ins>z-index</ins> <ins>order</ins> <ins>(most</ins> <ins>negative</ins> <ins>first)</ins>
    <ins>then</ins> <ins>tree</ins> <ins>order.</ins>
<li><ins>For</ins> <ins>all</ins> <ins>its</ins> <ins>in-flow,</ins> <ins>non-positioned,</ins> <ins>block-level</ins> <ins>descendants</ins> <ins>in</ins>
    <ins>tree</ins> <ins>order:</ins> <ins>If</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>block,</ins> <ins>list-item,</ins> <ins>or</ins> <ins>other</ins> <ins>block</ins>
    <ins>equivalent:</ins>
<ol>
<li>     <ins>background</ins> <ins>color</ins> <ins>of</ins> <ins>element.</ins>
<li>     <ins>background</ins> <ins>image</ins> <ins>of</ins> <ins>element.</ins>
<li>     <ins>border</ins> <ins>of</ins> <ins>element.</ins>
</ol>
    <ins>Otherwise,</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>table:</ins>
<ol>
<li>     <ins>table</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>column</ins> <ins>group</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>column</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>row</ins> <ins>group</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>row</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>cell</ins> <ins>backgrounds</ins> <ins>(color</ins> <ins>then</ins> <ins>image).</ins>
<li>     <ins>all</ins> <ins>table</ins> <ins>borders</ins> <ins>(in</ins> <ins>tree</ins> <ins>order</ins> <ins>for</ins> <ins>separated</ins> <ins>borders).</ins>
</ol>
<li><ins>All</ins> <ins>non-positioned</ins> <ins>floating</ins> <ins>descendants,</ins> <ins>in</ins> <ins>tree</ins> <ins>order.</ins> <ins>For</ins> <ins>each</ins> <ins>one</ins> <ins>of</ins> <ins>these,</ins>
    <ins>treat</ins> <ins>the</ins> <ins>element</ins> <ins>as</ins> <ins>if</ins> <ins>it</ins> <ins>created</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins> <ins>context,</ins> <ins>but</ins> <ins>any</ins>
    <ins>descendants</ins> <ins>which</ins> <ins>actually</ins> <ins>create</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins> <ins>context</ins> <ins>should</ins> <ins>be</ins>
    <ins>considered</ins> <ins>part</ins> <ins>of</ins> <ins>the</ins> <ins>parent</ins> <ins>stacking</ins> <ins>context,</ins> <ins>not</ins> <ins>this</ins> <ins>new</ins> <ins>one.</ins>

<li> <ins>If</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>an</ins> <ins>inline</ins> <ins>element</ins> <ins>that</ins> <ins>generates</ins> <ins>a</ins> <ins>stacking</ins>
     <ins>context,</ins> <ins>then:</ins>
<ol>
<li>   <ins>For</ins> <ins>each</ins> <ins>line</ins> <ins>box</ins> <ins>that</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>in:</ins>
<ol>
<li>      <ins>Jump</ins> <ins>to</ins> <ins>7.2.1</ins> <ins>for</ins> <ins>the</ins> <ins>box(es)</ins> <ins>of</ins> <ins>the</ins> <ins>element</ins> <ins>in</ins> <ins>that</ins> <ins>line</ins>
          <ins>box</ins> <ins>(in</ins> <ins>tree</ins> <ins>order).</ins>
</ol>
</ol>
<li> <ins>Otherwise:</ins> <ins>first</ins> <ins>for</ins> <ins>the</ins> <ins>element,</ins> <ins>then</ins> <ins>for</ins> <ins>all</ins> <ins>its</ins> <ins>in-flow,</ins>
     <ins>non-positioned,</ins> <ins>block-level</ins> <ins>descendants</ins> <ins>in</ins> <ins>tree</ins> <ins>order:</ins>
<ol>
<li>     <ins>If</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>a</ins> <ins>block-level</ins> <ins>replaced</ins> <ins>element,</ins>
         <ins>then:</ins> <ins>the</ins> <ins>replaced</ins> <ins>content,</ins> <ins>atomically.</ins>
<li>     <ins>Otherwise,</ins> <ins>for</ins> <ins>each</ins> <ins>line</ins> <ins>box</ins> <ins>of</ins> <ins>that</ins> <ins>element:</ins>
<ol>
<li>         <ins>For</ins> <ins>each</ins> <ins>box</ins> <ins>that</ins> <ins>is</ins> <ins>a</ins> <ins>child</ins> <ins>of</ins> <ins>that</ins> <ins>element,</ins> <ins>in</ins> <ins>that</ins> <ins>line</ins>
             <ins>box,</ins> <ins>in</ins> <ins>tree</ins> <ins>order:</ins>
<ol>
<li>         <ins>background</ins> <ins>color</ins> <ins>of</ins> <ins>element.</ins>
<li>         <ins>background</ins> <ins>image</ins> <ins>of</ins> <ins>element.</ins>
<li>         <ins>border</ins> <ins>of</ins> <ins>element.</ins>
<li>         <ins>For</ins> <ins>inline</ins> <ins>elements:</ins>
<ol>
<li>             <ins>For</ins> <ins>all</ins> <ins>the</ins> <ins>element's</ins> <ins>in-flow,</ins> <ins>non-positioned,</ins> <ins>inline-level</ins>
                 <ins>children</ins> <ins>that</ins> <ins>are</ins> <ins>in</ins> <ins>this</ins> <ins>line</ins> <ins>box,</ins> <ins>and</ins> <ins>all</ins>
                 <ins>runs</ins> <ins>of</ins> <ins>text</ins> <ins>inside</ins> <ins>the</ins> <ins>element</ins> <ins>that</ins> <ins>is</ins> <ins>on</ins> <ins>this</ins> <ins>line</ins> <ins>box,</ins>
                 <ins>in</ins> <ins>tree</ins> <ins>order:</ins>
<ol>
<li>                <ins>If</ins> <ins>this</ins> <ins>is</ins> <ins>a</ins> <ins>run</ins> <ins>of</ins> <ins>text,</ins> <ins>then:</ins>
<ol>
<li>                    <ins>any</ins> <ins>underlining</ins> <ins>affecting</ins> <ins>the</ins> <ins>text</ins> <ins>of</ins> <ins>the</ins>
                        <ins>element,</ins> <ins>in</ins> <ins>tree</ins> <ins>order</ins> <ins>of</ins> <ins>the</ins> <ins>elements</ins>
                        <ins>applying</ins> <ins>the</ins> <ins>underlining</ins> <ins>(such</ins> <ins>that</ins> <ins>the</ins>
                        <ins>deepest</ins> <ins>element's</ins> <ins>underlining,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins>
                        <ins>painted</ins> <ins>topmost</ins> <ins>and</ins> <ins>the</ins> <ins>root</ins> <ins>element's</ins>
                        <ins>underlining,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins> <ins>drawn</ins> <ins>bottommost).</ins>
<li>                    <ins>any</ins> <ins>overlining</ins> <ins>affecting</ins> <ins>the</ins> <ins>text</ins> <ins>of</ins> <ins>the</ins>
                        <ins>element,</ins> <ins>in</ins> <ins>tree</ins> <ins>order</ins> <ins>of</ins> <ins>the</ins> <ins>elements</ins>
                        <ins>applying</ins> <ins>the</ins> <ins>overlining</ins> <ins>(such</ins> <ins>that</ins> <ins>the</ins>
                        <ins>deepest</ins> <ins>element's</ins> <ins>overlining,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins>
                        <ins>painted</ins> <ins>topmost</ins> <ins>and</ins> <ins>the</ins> <ins>root</ins> <ins>element's</ins>
                        <ins>overlining,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins> <ins>drawn</ins> <ins>bottommost).</ins>
<li>                    <ins>the</ins> <ins>text.</ins>
<li>                    <ins>any</ins> <ins>line-through</ins> <ins>affecting</ins> <ins>the</ins> <ins>text</ins> <ins>of</ins> <ins>the</ins>
                        <ins>element,</ins> <ins>in</ins> <ins>tree</ins> <ins>order</ins> <ins>of</ins> <ins>the</ins> <ins>elements</ins>
                        <ins>applying</ins> <ins>the</ins> <ins>line-through</ins> <ins>(such</ins> <ins>that</ins> <ins>the</ins>
                        <ins>deepest</ins> <ins>element's</ins> <ins>line-through,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins>
                        <ins>painted</ins> <ins>topmost</ins> <ins>and</ins> <ins>the</ins> <ins>root</ins> <ins>element's</ins>
                        <ins>line-through,</ins> <ins>if</ins> <ins>any,</ins> <ins>is</ins> <ins>drawn</ins> <ins>bottommost).</ins>
</ol>
<li>                <ins>Otherwise,</ins> <ins>jump</ins> <ins>to</ins> <ins>7.2.1</ins> <ins>for</ins> <ins>that</ins> <ins>element.</ins>
</ol>
</ol>
                <ins>For</ins> <ins>inline-block</ins> <ins>and</ins> <ins>inline-table</ins> <ins>elements:</ins>
<ol>
<li>                <ins>For</ins> <ins>each</ins> <ins>one</ins> <ins>of</ins> <ins>these,</ins> <ins>treat</ins> <ins>the</ins> <ins>element</ins> <ins>as</ins> <ins>if</ins> <ins>it</ins>
                    <ins>created</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins> <ins>context,</ins> <ins>but</ins> <ins>any</ins>
                    <ins>descendants</ins> <ins>which</ins> <ins>actually</ins> <ins>create</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins>
                    <ins>context</ins> <ins>should</ins> <ins>be</ins> <ins>considered</ins> <ins>part</ins> <ins>of</ins> <ins>the</ins> <ins>parent</ins>
                    <ins>stacking</ins> <ins>context,</ins> <ins>not</ins> <ins>this</ins> <ins>new</ins> <ins>one.</ins>
</ol>
                <ins>For</ins> <ins>inline-level</ins> <ins>replaced</ins> <ins>elements:</ins>
<ol>
<li>                <ins>the</ins> <ins>replaced</ins> <ins>content,</ins> <ins>atomically.</ins>
</ol>
</ol>
<p class="note"><ins>Some</ins> <ins>of</ins> <ins>the</ins> <ins>boxes</ins> <ins>may</ins> <ins>have</ins> <ins>been</ins> <ins>generated</ins> <ins>by</ins> <ins>line</ins>
                <ins>splitting</ins> <ins>or</ins> <ins>the</ins> <ins>Unicode</ins> <ins>bidirectional</ins> <ins>algorithm.</ins>
<li>         <ins>Optionally,</ins> <ins>the</ins> <ins>outline</ins> <ins>of</ins> <ins>the</ins> <ins>element</ins> <ins>(see</ins> <ins>10</ins> <ins>below).</ins>
</ol>
<li>     <ins>Optionally,</ins> <ins>if</ins> <ins>the</ins> <ins>element</ins> <ins>is</ins> <ins>block-level,</ins> <ins>the</ins> <ins>outline</ins> <ins>of</ins> <ins>the</ins>
         <ins>element</ins> <ins>(see</ins> <ins>10</ins> <ins>below).</ins>
</ol>
<li><ins>All</ins> <ins>positioned</ins> <ins>descendants</ins> <ins>with</ins> <ins>'z-index:</ins> <ins>auto'</ins> <ins>or</ins> <ins>'z-index:</ins> <ins>0',</ins>
    <ins>in</ins> <ins>tree</ins> <ins>order.</ins> <ins>For</ins> <ins>those</ins> <ins>with</ins> <ins>'z-index:</ins> <ins>auto',</ins> <ins>treat</ins> <ins>the</ins> <ins>element</ins>
    <ins>as</ins> <ins>if</ins> <ins>it</ins> <ins>created</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins> <ins>context,</ins> <ins>but</ins> <ins>any</ins> <ins>descendants</ins> <ins>which</ins>
    <ins>actually</ins> <ins>create</ins> <ins>a</ins> <ins>new</ins> <ins>stacking</ins> <ins>context</ins> <ins>should</ins> <ins>be</ins> <ins>considered</ins> <ins>part</ins>
    <ins>of</ins> <ins>the</ins> <ins>parent</ins> <ins>stacking</ins> <ins>context,</ins> <ins>not</ins> <ins>this</ins> <ins>new</ins> <ins>one.</ins> <ins>For</ins> <ins>those</ins> <ins>with</ins>
    <ins>'z-index:</ins> <ins>0',</ins> <ins>treat</ins> <ins>the</ins> <ins>stacking</ins> <ins>context</ins> <ins>generated</ins> <ins>atomically.</ins>

<li><ins>Stacking</ins> <ins>contexts</ins> <ins>formed</ins> <ins>by</ins> <ins>positioned</ins> <ins>descendants</ins> <ins>with</ins> <ins>z-indices</ins>
    <ins>greater</ins> <ins>than</ins> <ins>or</ins> <ins>equal</ins> <ins>to</ins> <ins>1</ins> <ins>in</ins> <ins>z-index</ins> <ins>order</ins> <ins>(smallest</ins> <ins>first)</ins> <ins>then</ins>
    <ins>tree</ins> <ins>order.</ins>

<li><ins>Finally,</ins> <ins>implementations</ins> <ins>that</ins> <ins>do</ins> <ins>not</ins> <ins>draw</ins> <ins>outlines</ins> <ins>in</ins> <ins>steps</ins> <ins>above</ins>
    <ins>must</ins> <ins>draw</ins> <ins>outlines</ins> <ins>from</ins> <ins>this</ins> <ins>stacking</ins> <ins>context</ins> <ins>at</ins> <ins>this</ins> <ins>stage.</ins> <ins>(It</ins>
    <ins>is</ins> <ins>recommended</ins> <ins>to</ins> <ins>draw</ins> <ins>outlines</ins> <ins>in</ins> <ins>this</ins> <ins>step</ins> <ins>and</ins> <ins>not</ins> <ins>in</ins> <ins>the</ins> <ins>steps</ins> <ins>above.)</ins>
</ol>

<h2><ins>E.3</ins> <a name="stacking-notes"><ins>Notes</ins></a></h2>

<p><ins>The</ins> <ins>background</ins> <ins>of</ins> <ins>the</ins> <ins>root</ins> <ins>element</ins> <ins>is</ins> <ins>only</ins> <ins>painted</ins> <ins>once,</ins> <ins>over</ins> <ins>the</ins>
<ins>whole</ins> <ins>canvas.</ins></p>

<p><ins>While</ins> <ins>the</ins> <ins>backgrounds</ins> <ins>of</ins> <ins>bidirectional</ins> <ins>inlines</ins> <ins>are</ins> <ins>painted</ins> <ins>in</ins> <ins>tree</ins>
<ins>order,</ins> <ins>they</ins> <ins>are</ins> <ins>positioned</ins> <ins>in</ins> <ins>visual</ins> <ins>order.</ins> <ins>Since</ins> <ins>the</ins> <ins>positioning</ins> <ins>of</ins>
<ins>inline</ins> <ins>backgrounds</ins> <ins>is</ins> <ins>unspecified</ins> <ins>in</ins> <ins>CSS&nbsp;2.1,</ins> <ins>the</ins> <ins>exact</ins> <ins>result</ins> <ins>of</ins> <ins>these</ins>
<ins>two</ins> <ins>requirements</ins> <ins>is</ins> <ins>UA-defined.</ins> <ins>CSS3</ins> <ins>may</ins> <ins>define</ins> <ins>this</ins> <ins>in</ins> <ins>more</ins> <ins>detail.</ins></p>

<hr class="navbar">

<div class="navbar">
<p><a href="sample.html"><ins>previous</ins></a> <ins>&nbsp;</ins>
<a href="propidx.html"><ins>next</ins></a> <ins>&nbsp;</ins>
<a href="cover.html#minitoc"><ins>contents</ins></a> <ins>&nbsp;</ins>
<a href="propidx.html"><ins>properties</ins></a> <ins>&nbsp;</ins>
<a href="indexlist.html"><ins>index</ins></a> <ins>&nbsp;</ins>
</div>
</BODY>
</HTML>
