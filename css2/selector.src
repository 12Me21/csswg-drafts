<!DOCTYPE HTML SYSTEM "http://www.w3.org/TR/WD-html40/sgml/HTML4.dtd">
<html lang="en">
<!-- $Id: selector.src,v 1.14 1997-09-08 23:59:53 ian Exp $ -->
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<TITLE>Selectors</TITLE>
<LINK rel="next" href="cascade.html">
<LINK rel="previous" href="syndata.html">
<LINK rel="STYLESHEET" href="style/default.css" type="text/css">
</HEAD>
<BODY>
<H1 align="center">Selectors</H1>
In CSS, pattern matching rules determine which style rules apply to
elements in a document. Patterns, called <span class="index-def"
title="selectors"><em>selectors</em></span>, may range from simple
element names to rich contextual patterns.

<H2>Type selectors</H2>

<P>The simplest selector is the name of an element from the object
language, called a <span class="index-def" title="type
selector"><em>type selector</em></span>. Type selectors match all
instances of the element in the document.

<div class="example">
For example, the following rule matches all H1 elements in a document:

<PRE>
  H1 { font-family: Helvetica }
</PRE>
</div>

<H2><a name="grouping">Grouping</a></H2>

<P>When element selectors share the same declarations, they may be
grouped into comma-separated lists.

<div class="example">
In this example, we condense three rules with identical declarations
into one. Thus,

<PRE>
  H1 { font-family: Helvetica }
  H2 { font-family: Helvetica }
  H3 { font-family: Helvetica }
</PRE>

<P>is equivalent to:

<PRE>
  H1, H2, H3 { font-family: Helvetica }
</PRE>
</div>

<P> Furthermore, multiple declarations for the same selector may be
organized into semi-colons separated groups.

<div class="example"><P>
Thus, the following rules:  
<PRE>
  H1 { font-weight: bold }
  H1 { font-size: 12pt }
  H1 { line-height: 14pt }
  H1 { font-family: Helvetica }
  H1 { font-variant: normal }
  H1 { font-style: normal }
</PRE>

<P>are equivalent to:

<PRE>
  H1 { 
    font-weight: bold; 
    font-size: 12pt;
    line-height: 14pt; 
    font-family: Helvetica; 
    font-variant: normal;
    font-style: normal;
  }
</PRE>

</div>

<P> In addition, some properties are <span class="index-def"
title="shorthand"><em>shorthand</em></span> rules that allow authors
to specify the values of several properties with a single
property. For instance, the <span class="propinst-font">'font'</span>
property is a shorthand property for setting <span
class="propinst-font-style">'font-style'</span>, <span
class="propinst-font-variant">'font-variant'</span>, <span
class="propinst-font-weight">'font-weight'</span>, <span
class="propinst-font-size">'font-size'</span>, <span
class="propinst-line-height">'line-height'</span>, and <span
class="propinst-font-family">'font-family'</span> all at once.

	  
<div class="example"><P>
The multiple style rules of the previous example:

<PRE>
  H1 { 
    font-weight: bold; 
    font-size: 12pt;
    line-height: 14pt; 
    font-family: Helvetica; 
    font-variant: normal;
    font-style: normal;
  }
</PRE>

<P>may be rewritten with a single property:

<PRE>
  H1 { font: bold 12pt/14pt Helvetica }
</PRE>

<P>Note that since <span
class="propinst-font-variant">'font-variant'</span> and <span
class="propinst-font-style">'font-style'</span> take their default
values of 'normal' in this example, these values have been omitted
from the shorthand form.
</div>

<H2>Contextual selectors</H2>

<P>At times, authors may want selectors to match elements that appear
in a certain context, such as "only those EM elements that are within
an H1 element".  In these cases, <span class="index-def"
title="contextual selector"><em>contextual selector</em></span> add
specificity. 

<P>A contextual selector is made up of two or more type selectors
separated by white space. A contextual selector may also contain <a
href="#attribute-selectors">attribute selectors</a>, but with only one
attribute per simple selector.

<P>Context is determined by the ancestors of an element in the
document tree (and not its siblings or descendents).

<div class="example"><P>
For example, consider the following rules:

<PRE>
   H1 { color: red }
   EM { color: red }
</PRE>

<P>Although the intention of these rules is to add emphasis to text by
changing its color, the effect will be lost in a case such as:

<PRE>
&lt;H1&gt;This headline is &lt;EM&gt;very&lt;/EM&gt; important&lt;/H1&gt;
</PRE>

<P>We address this special case by adding a contextual rule to the
previous two that sets the text color to blue whenever an EM occurs
immediately within an H1:

<PRE>
   H1 EM { color: blue }
</PRE>
</div>

<div class="example"><P>
The following rules vary the appearance of nested list items:

<PRE>
   OL OL { list-style: upper-alpha }
   OL OL OL { list-style: lower-alpha }
</PRE>

<P>The first rule matches all OL elements one level below another OL
element. The second rule matches all OL elements with <em>two</em> OL
ancestors.
</div>

<P>Contextual selectors may be grouped according to the <a
href="grouping">rules for grouping</a> listed above.

<H2><a name="pseudo-elements">Pseudo-elements</a> and <a
name="pseudo-classes">pseudo-classes</a></H2>

<P> In CSS2, style is normally attached to an element based on its
position in the document tree. This simple model is sufficient for
many cases, but some common publishing scenarios (such as changing the
font size of the first letter of a paragraph) may be independent of
the document tree. For instance, in <a rel="biblioentry"
href="./refs.html#ref-HTML40">[HTML40]</a>, no element refers to the
first line of a paragraph, and therefore no simple CSS selector may
refer to it.

<P>CSS introduces the concepts of <span class="index-def"
title="pseudo-elements">pseudo-elements</span> and <span
class="index-def"
title="pseudo-classes"><em>pseudo-classes</em></span> to extend the
addressing model and permit formatting based on information that lies
outside the document tree. Pseudo-elements refer to sub-parts of an
element's content (e.g., the first letter or first line of a
paragraph, etc.). Pseudo-classes refer to elements that are grouped
dynamically (e.g., all links that have been visited, all left-hand pages,
etc.)

<P>Although pseudo-elements and pseudo-classes do not exist in the
document tree, their behavior is defined as if they did. Each
pseudo-element and pseudo-class may be modeled by a <span
class="index-def" title="fictional tag sequence"><em>fictional tag
sequence</em></span>, a fragment of document source that includes
imaginary elements from the object language.

<P>For instance, suppose we want to specify style information for the
first line of a paragraph only. CSS defines a pseudo-element named
":first-line" which may be used as part of a selector:

<PRE>
    P:first-line { font-style: small-caps }
</PRE>

<P>The above rule means "change the font style of the first line of
every paragraph to small-caps". However, the selector "P:first-line"
does not match any real HTML element. It does match a pseudo-element
that conforming user agents will insert at the beginning of every
paragraph.

<P>Note that the length of the first line depends on a number of
factors, including the width of the page, the font size, etc. Suppose
for this example that the paragraph is broken into the lines indicated
in the example. Thus, an ordinary HTML paragraph such as:

<PRE>
&lt;P&gt;This is a somewhat long HTML paragraph that will
be broken into several lines. The first line will be
identified by a fictional tag sequence. The other lines will 
be treated as ordinary lines in the paragraph.&lt;/P&gt;
</PRE>

<P>will be "rewritten" by user agents to include the fictional tag
sequence for :first-line. 

<PRE>
&lt;P&gt;
&lt;P:first-line&gt;This is a somewhat long HTML paragraph that will&lt;/P:first-line&gt;
be broken into several lines. The first line will be
identified by a fictional tag sequence. The other lines will 
be treated as ordinary lines in the paragraph.&lt;/P&gt;
</PRE>

<P>If a pseudo-element breaks up a real element, the necessary extra
tags must be regenerated in the fictional tag sequence. Thus, if we 
mark up the previous paragraph with a SPAN element:

<PRE>
&lt;P&gt;&lt;SPAN class="test"&gt;This is a somewhat long HTML paragraph that will
be broken into several lines.&lt;/SPAN&gt; The first line will be
identified by a fictional tag sequence. The other lines will 
be treated as ordinary lines in the paragraph.&lt;/P&gt;
</PRE>

<P>The user agent must generate the appropriate start and end tags for
SPAN when inserting the fictional tag sequence for :first-line.

<PRE>
&lt;P&gt;&lt;P:first-line&gt;&lt;SPAN class="test"&gt;This is a somewhat long HTML paragraph that will&lt;/SPAN&gt;&lt;/P:first-line&gt;
&lt;SPAN&gt;be broken into several lines.&lt;/SPAN&gt; The first line will be
identified by a fictional tag sequence. The other lines will 
be treated as ordinary lines in the paragraph.&lt;/P&gt;
</PRE>

<P> Pseudo-element and pseudo-class names are case-insensitive.

<div class="note"><P>
<em><strong>Note.</strong>
In CSS2, only one pseudo-element can be specified per
selector. This may change in future versions of CSS.
</em>
</div>

<H3>Overlapping pseudo-elements</H3>

<P> Several pseudo element rules may refer to the same content.

<div class="example"><P>
In the following example, the first letter of each P element will be
green with a font size of 24pt. The rest of the first line (as
formatted on the canvas) will be blue while the rest of the paragraph
will be red.

<PRE>
  P { color: red; font-size: 12pt }
  P:first-letter { color: green; font-size: 200% }
  P:first-line { color: blue }

  &lt;P&gt;Some text that ends up on two lines&lt;/P&gt;
</PRE>

<P>Assuming that a line break will occur before the word "ends", the
<span class="index-inst" title="fictional tag sequence">fictional tag
sequence</span> for this fragment is:

<PRE>
  &lt;P&gt;
  &lt;P:first-line&gt;
  &lt;P:first-letter&gt; 
  S 
  &lt;/P:first-letter&gt;ome text that 
  &lt;/P:first-line&gt; 
  ends up on two lines 
  &lt;/P&gt;
</PRE>

<P>Note that the :first-letter element is inside the :first-line
element.  Properties set on :first-line will be inherited by
:first-letter, but are overridden if the same property is set on
:first-letter.
</div>

<H3>Pseudo-elements with contextual selectors</H3>

<P> In a contextual selector, pseudo-elements are only allowed at the
end of the selector. 


<div class="example"><P>
The following example illustrates this with the
<span class="index-inst" title=":first-letter">:first-letter</span>
pseudo element.

<PRE>
  BODY P:first-letter { color: purple }
</PRE>
</div>

<P> Pseudo-classes may also be used in contextual selectors. 

<div class="example"><P>
The following example sets the border color to blue of all images that
descend from A elements that have not yet been visited:
<PRE>
  A:link IMG { border: solid blue }
</PRE>
</div>

<H3>Typographical pseudo-elements:
<span class="index-inst" title="pseudo-elements, 
:first-line">:first-line</span> and
<span class="index-inst"
title="pseudo-elements,:first-letter">:first-letter</span> 
</H3>

<P> Some common typographical effects are associated not with
structural elements but rather with typographical items as formatted
on the canvas. In CSS2, two such typographical items can be addressed
through <span class="index-inst"
title="pseudo-elements">pseudo-elements</span>: the first line of an
element, and the first letter.

<P>Conforming UAs may ignore all rules with :first-line or
:first-letter in the selector, or, alternatively, may only support a
subset of the properties on these pseudo-elements. See the section on
<a href="convent.html#conformance">conformance</a> for further information.

<H4><span class="index-def" title="pseudo-elements, :first-line|:first-line">:first-line</span></H4>

<P> The :first-line pseudo-element is used to apply special styles to
the first line as formatted on the canvas.

<div class="example"><P>
For example, on a text-based UA, this text:

<PRE>
  &lt;STYLE type="text/css"&gt;
    P:first-line { font-style: small-caps }
  &lt;/STYLE&gt;

  &lt;P&gt;The first line of an article in Newsweek.
</PRE>

<P>could be formatted as:

<PRE>
  THE FIRST LINE OF AN
  article in Newsweek.
</PRE>

<P> The <span class="index-inst" title="fictional tag sequence">fictional tag sequence</span> in the above example is:

<PRE>
  &lt;P&gt;
  &lt;P:first-line&gt;
  The first line of an 
  &lt;/P:first-line&gt;
  article in Newsweek.
  &lt;/P&gt;
</PRE>

<P> The :first-line end tag is inserted at the end of the first line
as formatted on the canvas.
</div>

<P> The <span class="index-inst" title="pseudo-elements,
:first-line">:first-line</span> pseudo-element can only be attached to a 
block-level element.

<P> The :first-line pseudo-element is similar to an inline element,
but with certain restrictions. Only the following properties apply to
a :first-line element: 
<a href="fonts.html#font-properties">font properties</a>, 
<a href="colors.html#color-properties">color properties</a>, 
<a href="colors.html#background-properties">background properties</a>, 
<span class="propinst-word-spacing">'word-spacing'</span>, <span
class="propinst-letter-spacing">'letter-spacing'</span>, <span
class="propinst-text-decoration">'text-decoration'</span>, <span
class="propinst-vertical-align">'vertical-align'</span>, <span
class="propinst-text-transform">'text-transform'</span>, <span
class="propinst-line-height">'line-height'</span>, and <span
class="propinst-clear">'clear'</span>, 

<H4><span class="index-def" title="pseudo-elements,
:first-letter|:first-letter">:first-letter</span></H4>


<P> The :first-letter pseudo-element is used for <span
class="index-inst" title="initial caps">"initial caps"</span> and
<span class="index-inst" title="drop caps">"drop caps"</span>, which
are common typographical effects. It is similar to an inline element
if its <span class="propinst-float">'float'</span> property is 'none',
otherwise it is similar to a floating element. 

<P>These are the properties that apply to :first-letter pseudo-elements:
<a href="fonts.html#font-properties">font properties</a>, 
<a href="colors.html#color-properties">color properties</a>, 
<a href="colors.html#background-properties">background properties</a>, 
<span class="propinst-text-decoration">'text-decoration'</span>, 
<span class="propinst-vertical-align">'vertical-align'</span> (only if
	'float' is 'none'), <span 
class="propinst-text-transform">'text-transform'</span>, <span
class="propinst-line-height">'line-height'</span>, 
<a href="flowobj.html#margin-properties">margin properties</a>, 
<a href="flowobj.html#padding-properties">padding properties</a>, 
<a href="flowobj.html#border-properties">border properties</a>, 
<span class="propinst-float">'float'</span>, and <span
class="propinst-clear">'clear'</span>. 

<div class="example"><P>
<P>The following CSS2 will make a dropcap initial letter span two lines:

<PRE>
&lt;HTML&gt;
 &lt;HEAD&gt;
  &lt;TITLE&gt;Title&lt;/TITLE&gt;
  &lt;STYLE type="text/css"&gt;
   P              { font-size: 12pt; line-height: 12pt }
   P:first-letter { font-size: 200%; float: left }
   SPAN           { text-transform: uppercase }
  &lt;/STYLE&gt;
 &lt;/HEAD&gt;
 &lt;BODY&gt;
  &lt;P&gt;&lt;SPAN&gt;The first&lt;/SPAN&gt; few words of an article in The Economist.&lt;/P&gt;
 &lt;/BODY&gt;
&lt;/HTML&gt;
</PRE>

<P> If a text-based UA supports the :first-letter pseudo-element
the above could be formatted as:

<PRE>
  ___
   | HE FIRST few
   | words of an 
  article in the
  Economist.
</PRE>

<P> The <span class="index-inst" title="fictional tag
 sequence">fictional tag sequence</span> is:

<PRE>
  &lt;P&gt;
  &lt;SPAN&gt;
  &lt;P:first-letter&gt;
  T
  &lt;/P:first-letter&gt;he first
  &lt;/SPAN&gt; 
  few words of an article in the Economist.
  &lt;/P&gt;
</PRE>

<P> Note that the :first-letter pseudo-element tags abut the content
(i.e., the initial character), while the :first-line pseudo-element
start tag is inserted right after the start tag of the element to
which it is attached.
</div>

<P> The UA defines what characters are inside the :first-letter
element. Quotes that precede the first letter should be
included, as in:

<PRE>
  ||   /\    bird in 
      /  \   the hand
     /----\  is worth
    /      \ two in
  the bush," says an 
  old proverb.
</PRE>
<!-- " -->

<P> When the paragraph starts with other punctuation (e.g., parenthesis
and ellipsis points) or other characters that are normally not
considered letters (e.g.,  digits and mathematical symbols),
:first-letter pseudo-elements are usually ignored.

<P> The :first-letter pseudo-element can only be attached to a
block-level element.

<div class="note"><P>
<em><strong>Note.</strong>
Some languages may have specific rules about how to treat certain
letter combinations. In Dutch, for example, if the letter combination
"ij" appears at the beginning of a word, they should both be
considered within the :first-letter pseudo-element.
</em>
</div>

<H3>Anchor pseudo-classes in HTML:
<span class="index-def" title="pseudo-classes, :link|:link">:link</span>,
<span class="index-def" title="pseudo-classes, :visited|:visited">:visited</span>,
and 
<span class="index-def" title="pseudo-classes, :active|:active">:active</span>
</H3>


<P>user agents commonly display unvisited HTML links differently from
previously visited ones. In CSS2, authors may refer to three
categories of links: visited, unvisited, and a currently selected
link (e.g., by the mouse). Each category of link has a corresponding
pseudo-class:

<PRE>
  A:link { color: red }       /* unvisited link */
  A:visited { color: blue }   /* visited links */
  A:active { color: lime }    /* active links */
</PRE>

<P> user agents are not required to reformat a currently displayed
document due to anchor pseudo-class transitions. For instance, a style
sheet may legally specify that the <span
class="propinst-font-size">'font-size'</span> of an 'active' link
should be larger that a 'visited' link, but the UA is not required to
dynamically reformat the document when the reader selects the
'visited' link. 

<P> In CSS2, anchor pseudo-classes have no effect on elements other
than A. Therefore, the element type can be omitted from the
selector. 

<div class="note"><P> 
<em><strong>Note.</strong>
user agents may choose to move an element from
'visited' to 'link' after a certain time.
</em>
</div>

<div class="example"><P>
The following two CSS2 declarations are equivalent and
select the same HTML elements:

<PRE>
  A:link { color: red }
  :link { color: red }
</PRE>
</div>


<H2><a name="attribute-selectors">Attribute selectors in HTML</a></H2>

<P> <a rel="biblioentry" href="./refs.html#ref-HTML40">[HTML40]</a>
defines two attributes -- "class" and "id" -- that may be used as CSS2
selectors in an HTML document. These are called <span
class="index-def" title="attribute selectors"><em>attribute
selectors</em></span>.

<H3>The class attribute</H3> 

<P>The HTML "class" attribute allows authors to group elements
together and specify style information to the entire group. 

<P>To add class information to a selector, the selector must be
followed by a period (".") and then the class name, with no
intervening white space. The selector may be empty, which means "any
element".

<div class="example"><P>
For example, we can assign style information to all elements belonging
to the class 'pastoral':

<PRE>
  .pastoral { color: green }  /* all elements with class=pastoral */
</PRE>

<P>or to certain types of elements belonging to the class 'pastoral'
(here, H1):

<PRE>
  H1.pastoral { color: green }  /* H1 elements with class=pastoral */
</PRE>

<P>Given these rules, the first H1 instance below would not have green
text, while the second would:

<PRE>
  &lt;H1&gt;Not green&lt;/H1&gt;
  &lt;H1 class="pastoral"&gt;Very green&lt;/H1&gt;
</PRE>
</div>

<P> The normal inheritance rules apply to classed elements; they
inherit values from their parent in the document structure.

<P> Only one class can be specified per selector. 

<div class="illegal-example"><P>
<span class="example-title">ILLEGAL EXAMPLE:</span><br> 
The following selector is illegal in CSS2 since it contains two classes.
<PRE> 
   P.pastoral.marine { color: green }
</PRE>
</div>

<div class="note"><P>
<em><strong>Note.</strong>
CSS gives so much power to the "class" attribute, that in many cases
it doesn't even matter what HTML element the class is set on -- you
can make any element emulate almost any other. Relying on this power
is not recommended, since it removes the level of structure that has a
universal meaning (HTML elements).  A structure based on "class" is only
useful within a restricted domain, where the meaning of a class has
been mutually agreed upon.
</em>
</div>

<H3>The id attribute</H3>
<P>The HTML "id" attribute allows authors to uniquely
identify an element and specify style information for that
element only. 

<P>To add id information to a selector, the selector must be
followed by a period ("#") and then the id name, with no
intervening white space. The selector may be empty, which means "any
element".

<div class="example"><P>
<PRE>
  &lt;HEAD&gt;
  &lt;STYLE&gt;
  #z98y { letter-spacing: 0.3em }
  H1#z98y { letter-spacing: 0.5em }
  &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
  <em>...body...</em>
  &lt;P id=z98y&gt;Wide text&lt;/P&gt;
  <em>...body...</em>
  &lt;/BODY&gt;
</PRE>

<P> In the above example, the first selector matches the P element
due to the "id" attribute value. The second selector specifies both an
element type (H1) and an "id" value, and will therefore not match the
P element.
</div>

<div class="note"><P>
<em><strong>Note.</strong>
While style sheets have been designed to augment document
structure, this feature will allow authors to create documents that
present well on the canvas without taking advantage of the structural
elements of HTML. This use of style sheets is discouraged.
</em>
</div>


<H3>Pseudo-elements and pseudo-classes with attribute selectors</H3>

<P> Pseudo-classes can be combined with normal classes. In this case,
the class name precedes the pseudo-class name in the selector.

<div class="example"><P>
In the following example, if the link in the above example has been
visited, it will be rendered in blue.

<PRE>
  A.external:visited { color: blue }

  &lt;A class="external" href="http://out.side/"&gt;external link&lt;/A&gt;
</PRE>

</div>

<P> Pseudo-elements can also be combined with attribute selectors:

<div class="example"><P>
<PRE>
  P.initial:first-letter { color: red }

  &lt;P class="initial"&gt;First paragraph&lt;/A&gt;
</PRE>

<P> The above example would make the first letter of all P elements
with "class=initial" red. 
</div>

<P>When combined with classes or pseudo-classes, pseudo-elements must
be specified at the end of the selector.

<H3>Colliding attribute selectors and pseudo-classes</H3>
<P>CSS syntax allows the following rules to co-exist:

<PRE>
  A:link { color: red }      /* The :link pseudo-class */
  A.link { color: green }    /* In HTML, class=link */
  A#link { color: blue }     /* In HTML, id=link */
</PRE>

<P>Since a link may have class="link", id="link", and belong to the
pseudo-class :link simultaneously (i.e., be unvisited), user agents
must resolve the colliding rules. User agents must do so according to
the <a href="./cascade.html#cascading-order">cascading order</a>
defined in the section on the cascade.


</BODY>
</html>
