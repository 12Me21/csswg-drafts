<!DOCTYPE html><html lang=en><head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>Selectors Level 4</title>
  <link href=../default.css rel=stylesheet type=text/css>
  <link href=../csslogo.ico rel="shortcut icon" type=image/x-icon>
  <style>
  body {
    background: url("https://www.w3.org/StyleSheets/TR/logo-ED") top left no-repeat white;
    background-attachment: fixed;
    color: black;
    font-family: sans-serif;
    margin: 0 auto;
    max-width: 50em;
    padding: 2em 1em 2em 70px;
  }
  :link { color: #00C; background: transparent }
  :visited { color: #609; background: transparent }
  a[href]:active { color: #C00; background: transparent }
  a[href]:hover { background: #ffa }

  a[href] img { border-style: none }

  h1, h2, h3, h4, h5, h6 { text-align: left }
  h1, h2, h3 { color: #005A9C; }
  h1 { font: 170% sans-serif }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  h4 { font: bold 100% sans-serif }
  h5 { font: italic 100% sans-serif }
  h6 { font: small-caps 100% sans-serif }

  .hide { display: none }

  div.head { margin-bottom: 1em }
  div.head h1 { margin-top: 2em; clear: both }
  div.head table { margin-left: 2em; margin-top: 2em }

  p.copyright { font-size: small }
  p.copyright small { font-size: small }

  pre { margin-left: 2em }
  dt { font-weight: bold }

  ul.toc, ol.toc {
    list-style: none;
  }
  </style>
<style>
.tprofile td, th { vertical-align: baseline; padding: 0 0.5em; }
.tprofile th { text-align: right; }
</style>

</head>
<body class=h-entry>
<div class=head>
  <p data-fill-with=logo><a class=logo href=http://www.w3.org/>
    <img alt=W3C height=48 src=http://www.w3.org/Icons/w3c_home width=72>
</a>
</p>
  <h1 class="p-name no-ref" id=title>Selectors Level 4</h1>
  <h2 class="no-num no-toc no-ref heading settled heading" id=subtitle><span class=content>Editor’s Draft,
    <span class=dt-updated><span class=value-title title=20140506>6 May 2014</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>This version:<dd><a class=u-url href=http://dev.w3.org/csswg/selectors>http://dev.w3.org/csswg/selectors</a><dt>Latest version:<dd><a href=http://www.w3.org/TR/selectors/>http://www.w3.org/TR/selectors/</a><dt>Editor’s Draft:<dd><a href=http://dev.w3.org/csswg/selectors>http://dev.w3.org/csswg/selectors</a><dt>Previous Versions:<dd><a href=http://www.w3.org/TR/2013/WD-selectors4-20130502/ rel=previous>http://www.w3.org/TR/2013/WD-selectors4-20130502/</a><dd><a href=http://www.w3.org/TR/2012/WD-selectors4-20120823/ rel=previous>http://www.w3.org/TR/2012/WD-selectors4-20120823/</a><dd><a href=http://www.w3.org/TR/2011/WD-selectors4-20110929/ rel=previous>http://www.w3.org/TR/2011/WD-selectors4-20110929/</a>
    <dt>Feedback:</dt>
        <dd><a href="mailto:www-style@w3.org?subject=%5Bselectors%5D%20feedback">www-style@w3.org</a>
            with subject line
            “<kbd>[selectors] <var>… message topic …</var></kbd>”(<a href=http://lists.w3.org/Archives/Public/www-style/ rel=discussion>archives</a>)<dt>Test Suite:<dd>None Yet<dt>Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://fantasai.inkedblade.net/contact>Elika J. Etemad</a> (<span class="p-org org">Invited Expert</span>)<dd class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://xanthir.com/contact/>Tab Atkins Jr.</a> (<span class="p-org org">Google</span>)<dt>Former Editors:
<dd class="p-author h-card vcard"><a class="p-name fn u-url url" href=http://www.tantek.com>Tantek Çelik</a><dd class="p-author h-card vcard"><span class="p-name fn">Daniel Glazman</span><dd class="p-author h-card vcard"><span class="p-name fn">Ian Hickson</span><dd class="p-author h-card vcard"><span class="p-name fn">Peter Linss</span><dd class="p-author h-card vcard"><span class="p-name fn">John Williams</span></dl></div>
  <div data-fill-with=warning></div>
  <p class=copyright data-fill-with=copyright><a href=http://www.w3.org/Consortium/Legal/ipr-notice#Copyright>Copyright</a> © 2014 <a href=http://www.w3.org/><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href=http://www.csail.mit.edu/><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href=http://www.ercim.eu/><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href=http://www.keio.ac.jp/>Keio</a>, <a href=http://ev.buaa.edu.cn/>Beihang</a>), All Rights Reserved. W3C <a href=http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer>liability</a>, <a href=http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks>trademark</a> and <a href=http://www.w3.org/Consortium/Legal/copyright-documents>document use</a> rules apply.
</p>
  <hr title="Separator for header">
</div>

<h2 class="no-num no-toc no-ref heading settled heading" id=abstract><span class=content>Abstract</span></h2>
<p class=p-summary data-fill-with=abstract><b>Selectors</b> are patterns that match against elements in a tree, and as such form one of several technologies that can be used to select nodes in a document. Selectors have been optimized for use with HTML and XML, and are designed to be usable in performance-critical code. They are a core component of <abbr title="Cascading Style Sheets">CSS</abbr> (Cascading Style Sheets), which uses Selectors to bind style properties to elements in the document.<p>Selectors Level 4 describes the selectors that already exist in <a data-biblio-type=normative data-link-type=biblio href=#select title=select>[SELECT]</a>, and further introduces new selectors for CSS and other languages that may need them.
<a href=http://www.w3.org/TR/CSS/>CSS</a> is a language for describing the rendering of structured documents 
(such as HTML and XML) 
on screen, on paper, in speech, etc.</p>

<h2 class="no-num no-toc no-ref heading settled heading" id=status><span class=content>Status of this document</span></h2>
<div data-fill-with=status><p>
	This is a public copy of the editors’ draft. 
	It is provided for discussion only and may change at any moment. 
	Its publication here does not imply endorsement of its contents by W3C. 
	Don’t cite this document other than as work in progress.

<p>
	The (<a href=http://lists.w3.org/Archives/Public/www-style/>archived</a>) public mailing list
	<a href="mailto:www-style@w3.org?Subject=%5Bselectors%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a> 
	(see <a href=http://www.w3.org/Mail/Request>instructions</a>) 
	is preferred for discussion of this specification. 
	When sending e-mail, 
	please put the text “selectors” in the subject, 
	preferably like this:
	“[selectors] <em>…summary of comment…</em>”

<p>
	This document was produced by the <a href=http://www.w3.org/Style/CSS/members>CSS Working Group</a> 
	(part of the <a href=http://www.w3.org/Style/>Style Activity</a>).

<p>
	This document was produced by a group operating under 
	the <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/>5 February 2004 W3C Patent Policy</a>. 
	W3C maintains a <a href=http://www.w3.org/2004/01/pp-impl/32061/status rel=disclosure>public list of any patent disclosures</a> 
	made in connection with the deliverables of the group; 
	that page also includes instructions for disclosing a patent. 
	An individual who has actual knowledge of a patent which the individual believes contains <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential>Essential Claim(s)</a> 
	must disclose the information in accordance with <a href=http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure>section 6 of the W3C Patent Policy</a>.</div>
<div data-fill-with=at-risk><p>The following features are at-risk, and may be dropped during the CR period:
<ul><li>the column combinator<li>the <a class=css data-link-type=maybe href=#selectordef-drop title=:drop()>:drop()</a> pseudo-class<li>the <a class=css data-link-type=maybe href=#read-write-pseudo title=:read-write>:read-write</a> pseudo-class</ul></div>

<h2 class="no-num no-toc no-ref heading settled heading" id=contents><span class=content>Table of Contents</span></h2>
<div data-fill-with=table-of-contents><ul class=toc>
	<li><a href=#context><span class=secno>1</span> Introduction</a>
		<ul class=toc>
		<li><a href=#placement><span class=secno>1.1</span>Module Interactions</a></ul>
	<li><a href=#overview><span class=secno>2</span> Selectors Overview</a>
		<ul class=toc>
		<li><a href=#profiles><span class=secno>2.1</span> <span data-link-type=dfn title=fast>Fast</span> vs <span data-link-type=dfn title=complete>Complete</span> Selector Profiles</a></ul>
	<li><a href=#syntax><span class=secno>3</span> Selector Syntax and Structure</a>
		<ul class=toc>
		<li><a href=#structure><span class=secno>3.1</span> Structure and Terminology</a>
		<li><a href=#evaluating-selectors><span class=secno>3.2</span> Evaluating a Selector</a>
		<li><a href=#data-model><span class=secno>3.3</span> Data Model</a>
			<ul class=toc>
			<li><a href=#dom-mapping><span class=secno>3.3.1</span> Guidance on Mapping Document Languages to DOM</a></ul>
		<li><a href=#scoping><span class=secno>3.4</span> Scoped Selectors</a>
		<li><a href=#relative><span class=secno>3.5</span> Relative Selectors</a>
			<ul class=toc>
			<li><a href=#absolutizing><span class=secno>3.5.1</span> Absolutizing a Relative Selector</a></ul>
		<li><a href=#pseudo-classes><span class=secno>3.6</span> Pseudo-classes</a>
		<li><a href=#pseudo-elements><span class=secno>3.7</span>Pseudo-elements</a>
			<ul class=toc>
			<li><a href=#pseudo-element-types><span class=secno>3.7.1</span> Types of Pseudo-Elements</a></ul>
		<li><a href=#case-sensitive><span class=secno>3.8</span> Characters and case sensitivity</a>
		<li><a href=#namespaces><span class=secno>3.9</span> Namespaces</a>
		<li><a href=#invalid><span class=secno>3.10</span> Invalid Selectors and Error Handling</a></ul>
	<li><a href=#logical-combination><span class=secno>4</span> Logical Combinations</a>
		<ul class=toc>
		<li><a href=#grouping><span class=secno>4.1</span> Selector Lists</a>
		<li><a href=#matches><span class=secno>4.2</span> The Matches-Any Pseudo-class: <span class=css data-link-type=maybe title=:matches()>:matches()</span></a>
		<li><a href=#negation><span class=secno>4.3</span> The Negation Pseudo-class: <span class=css data-link-type=maybe title=:not()>:not()</span></a>
		<li><a href=#relational><span class=secno>4.4</span> The Relational Pseudo-class: <span class=css data-link-type=maybe title=:has()>:has()</span></a></ul>
	<li><a href=#elemental-selectors><span class=secno>5</span> Elemental selectors</a>
		<ul class=toc>
		<li><a href=#type-selectors><span class=secno>5.1</span> Type (tag name) selector</a>
			<ul class=toc>
			<li><a href=#typenmsp><span class=secno>5.1.1</span> Type selectors and namespaces</a></ul>
		<li><a href=#universal-selector><span class=secno>5.2</span> Universal selector </a>
			<ul class=toc>
			<li><a href=#univnmsp><span class=secno>5.2.1</span> Universal selector and namespaces</a></ul></ul>
	<li><a href=#attribute-selectors><span class=secno>6</span> Attribute selectors</a>
		<ul class=toc>
		<li><a href=#attribute-representation><span class=secno>6.1</span> Attribute presence and value selectors</a>
		<li><a href=#attribute-substrings><span class=secno>6.2</span> Substring matching attribute selectors</a>
		<li><a href=#attribute-case><span class=secno>6.3</span> Case-sensitivity</a>
		<li><a href=#attrnmsp><span class=secno>6.4</span> Attribute selectors and namespaces</a>
		<li><a href=#def-values><span class=secno>6.5</span> Default attribute values in DTDs</a>
		<li><a href=#class-html><span class=secno>6.6</span> Class selectors</a>
		<li><a href=#id-selectors><span class=secno>6.7</span> ID selectors</a></ul>
	<li><a href=#linguistic-pseudos><span class=secno>7</span> Linguistic Pseudo-classes</a>
		<ul class=toc>
		<li><a href=#the-dir-pseudo><span class=secno>7.1</span> The directionality pseudo-class <span class=css data-link-type=maybe title=:dir()>:dir()</span></a>
		<li><a href=#the-lang-pseudo><span class=secno>7.2</span> The language pseudo-class <span class=css data-link-type=maybe title=:lang()>:lang()</span></a></ul>
	<li><a href=#location><span class=secno>8</span> Location Pseudo-classes</a>
		<ul class=toc>
		<li><a href=#the-any-link-pseudo><span class=secno>8.1</span> The hyperlink pseudo-class: <span class=css data-link-type=maybe title=:any-link>:any-link</span></a>
		<li><a href=#link><span class=secno>8.2</span> The link history pseudo-classes: <span class=css data-link-type=maybe title=:link>:link</span> and <span class=css data-link-type=maybe title=:visited>:visited</span></a>
		<li><a href=#the-target-pseudo><span class=secno>8.3</span> The target pseudo-class <span class=css data-link-type=maybe title=:target>:target</span></a>
		<li><a href=#the-scope-pseudo><span class=secno>8.4</span> The reference element pseudo-class <span class=css data-link-type=maybe title=:scope>:scope</span></a></ul>
	<li><a href=#useraction-pseudos><span class=secno>9</span> User Action Pseudo-classes</a>
		<ul class=toc>
		<li><a href=#the-hover-pseudo><span class=secno>9.1</span> The pointer hover pseudo-class <span class=css data-link-type=maybe title=:hover>:hover</span></a>
		<li><a href=#the-active-pseudo><span class=secno>9.2</span> The activation pseudo-class <span class=css data-link-type=maybe title=:active>:active</span></a>
		<li><a href=#the-focus-pseudo><span class=secno>9.3</span> The input focus pseudo-class <span class=css data-link-type=maybe title=:focus>:focus</span></a>
		<li><a href=#drag-pseudos><span class=secno>9.4</span> The drag-and-drop pseudo-class <span class=css data-link-type=maybe title=:drop>:drop</span> and <span class=css data-link-type=maybe title=:drop()>:drop()</span></a></ul>
	<li><a href=#time-pseudos><span class=secno>10</span> Time-dimensional Pseudo-classes</a>
		<ul class=toc>
		<li><a href=#the-current-pseudo><span class=secno>10.1</span> The current-element pseudo-class <span class=css data-link-type=maybe title=:current>:current</span></a>
		<li><a href=#the-past-pseudo><span class=secno>10.2</span> The past-element pseudo-class <span class=css data-link-type=maybe title=:past>:past</span></a>
		<li><a href=#the-future-pseudo><span class=secno>10.3</span> The future-element pseudo-class <span class=css data-link-type=maybe title=:future>:future</span></a></ul>
	<li><a href=#input-pseudos><span class=secno>11</span> The Input Pseudo-classes</a>
		<ul class=toc>
		<li><a href=#input-states><span class=secno>11.1</span> Input Control States</a>
			<ul class=toc>
			<li><a href=#enableddisabled><span class=secno>11.1.1</span> The <span class=css data-link-type=maybe title=:enabled>:enabled</span> and <span class=css data-link-type=maybe title=:disabled>:disabled</span> pseudo-classes</a>
			<li><a href=#rw-pseudos><span class=secno>11.1.2</span> The mutability pseudo-classes <span class=css data-link-type=maybe title=:read-only>:read-only</span> and <span class=css data-link-type=maybe title=:read-write>:read-write</span></a>
			<li><a href=#placeholder><span class=secno>11.1.3</span> The placeholder-shown pseudo-class <span class=css data-link-type=maybe title=:placeholder-shown>:placeholder-shown</span></a>
			<li><a href=#the-default-pseudo><span class=secno>11.1.4</span> The default-option pseudo-class <span class=css data-link-type=maybe title=:default>:default</span></a></ul>
		<li><a href=#input-value-states><span class=secno>11.2</span> Input Value States</a>
			<ul class=toc>
			<li><a href=#checked><span class=secno>11.2.1</span> The selected-option pseudo-class <span class=css data-link-type=maybe title=:checked>:checked</span></a>
			<li><a href=#indeterminate><span class=secno>11.2.2</span> The indeterminate-value pseudo-class <span class=css data-link-type=maybe title=:indeterminate>:indeterminate</span></a></ul>
		<li><a href=#ui-validity><span class=secno>11.3</span> Input Value-checking</a>
			<ul class=toc>
			<li><a href=#validity-pseudos><span class=secno>11.3.1</span> The validity pseudo-classes: <span class=css data-link-type=maybe title=:valid>:valid</span> and <span class=css data-link-type=maybe title=:invalid>:invalid</span></a>
			<li><a href=#range-pseudos><span class=secno>11.3.2</span> The range pseudo-classes <span class=css data-link-type=maybe title=:in-range>:in-range</span> and <span class=css data-link-type=maybe title=:out-of-range>:out-of-range</span></a>
			<li><a href=#opt-pseudos><span class=secno>11.3.3</span> The optionality pseudo-classes <span class=css data-link-type=maybe title=:required>:required</span> and <span class=css data-link-type=maybe title=:optional>:optional</span></a>
			<li><a href=#user-pseudos><span class=secno>11.3.4</span> The user-interaction pseudo-class <span class=css data-link-type=maybe title=:user-error>:user-error</span></a></ul></ul>
	<li><a href=#structural-pseudos><span class=secno>12</span> Tree-Structural pseudo-classes</a>
		<ul class=toc>
		<li><a href=#the-root-pseudo><span class=secno>12.1</span> <span class=css data-link-type=maybe title=:root>:root</span> pseudo-class</a>
		<li><a href=#the-empty-pseudo><span class=secno>12.2</span> <span class=css data-link-type=maybe title=:empty>:empty</span> pseudo-class</a>
		<li><a href=#the-blank-pseudo><span class=secno>12.3</span> <span class=css data-link-type=maybe title=:blank>:blank</span> pseudo-class</a>
		<li><a href=#child-index><span class=secno>12.4</span> Child-indexed Pseudo-classes</a>
			<ul class=toc>
			<li><a href=#the-nth-child-pseudo><span class=secno>12.4.1</span> <span class=css data-link-type=maybe title=:nth-child()>:nth-child()</span> pseudo-class</a>
			<li><a href=#the-nth-last-child-pseudo><span class=secno>12.4.2</span> <span class=css data-link-type=maybe title=:nth-last-child()>:nth-last-child()</span> pseudo-class</a>
			<li><a href=#the-first-child-pseudo><span class=secno>12.4.3</span> <span class=css data-link-type=maybe title=:first-child>:first-child</span> pseudo-class</a>
			<li><a href=#the-last-child-pseudo><span class=secno>12.4.4</span> <span class=css data-link-type=maybe title=:last-child>:last-child</span> pseudo-class</a>
			<li><a href=#the-only-child-pseudo><span class=secno>12.4.5</span> <span class=css data-link-type=maybe title=:only-child>:only-child</span> pseudo-class</a></ul>
		<li><a href=#typed-child-index><span class=secno>12.5</span> Typed Child-indexed Pseudo-classes</a>
			<ul class=toc>
			<li><a href=#the-nth-of-type-pseudo><span class=secno>12.5.1</span> <span class=css data-link-type=maybe title=:nth-of-type()>:nth-of-type()</span> pseudo-class</a>
			<li><a href=#the-nth-last-of-type-pseudo><span class=secno>12.5.2</span> <span class=css data-link-type=maybe title=:nth-last-of-type()>:nth-last-of-type()</span> pseudo-class</a>
			<li><a href=#the-first-of-type-pseudo><span class=secno>12.5.3</span> <span class=css data-link-type=maybe title=:first-of-type>:first-of-type</span> pseudo-class</a>
			<li><a href=#the-last-of-type-pseudo><span class=secno>12.5.4</span> <span class=css data-link-type=maybe title=:last-of-type>:last-of-type</span> pseudo-class</a>
			<li><a href=#the-only-of-type-pseudo><span class=secno>12.5.5</span> <span class=css data-link-type=maybe title=:only-of-type>:only-of-type</span> pseudo-class</a></ul></ul>
	<li><a href=#combinators><span class=secno>13</span> Combinators</a>
		<ul class=toc>
		<li><a href=#descendant-combinators><span class=secno>13.1</span> Descendant combinator (<code> </code>)</a>
		<li><a href=#child-combinators><span class=secno>13.2</span> Child combinator (<code>&gt;</code>)</a>
		<li><a href=#adjacent-sibling-combinators><span class=secno>13.3</span> Next-sibling combinator (<code>+</code>)</a>
		<li><a href=#general-sibling-combinators><span class=secno>13.4</span> Following-sibling combinator (<code>~</code>)</a></ul>
	<li><a href=#table-pseudos><span class=secno>14</span> Grid-Structural Selectors</a>
		<ul class=toc>
		<li><a href=#column-combinator><span class=secno>14.1</span> Column combinator</a>
		<li><a href=#the-nth-column-pseudo><span class=secno>14.2</span> <span class=css data-link-type=maybe title=:nth-column()>:nth-column()</span> pseudo-class</a>
		<li><a href=#the-nth-last-column-pseudo><span class=secno>14.3</span> <span class=css data-link-type=maybe title=:nth-last-column()>:nth-last-column()</span> pseudo-class</a></ul>
	<li><a href=#specificity><span class=secno>15</span> Calculating a selector’s specificity</a>
	<li><a href=#grammar><span class=secno>16</span><span id=formal-syntax></span> Grammar</a>
	<li><a href=#api-hooks><span class=secno>17</span> API Hooks</a>
		<ul class=toc>
		<li><a href=#parse-a-selector><span class=secno>17.1</span> Parse A Selector</a>
		<li><a href=#parse-a-relative-selector><span class=secno>17.2</span> Parse A Relative Selector</a></ul>
	<li><a href=#changes><span class=secno>18</span> Changes</a>
	<li><a href=#acknowledgements><span class=secno>19</span> Acknowledgements</a>
	<li><a href=#conformance><span class=secno></span> Conformance</a>
		<ul class=toc>
		<li><a href=#conventions><span class=secno></span> Document conventions</a>
		<li><a href=#conformance-classes><span class=secno></span> Conformance classes</a>
		<li><a href=#partial><span class=secno></span> Partial implementations</a>
		<li><a href=#experimental><span class=secno></span> Experimental implementations</a>
		<li><a href=#testing><span class=secno></span> Non-experimental implementations</a></ul>
	<li><a href=#references><span class=secno></span> References</a>
		<ul class=toc>
		<li><a href=#normative><span class=secno></span> Normative References</a>
		<li><a href=#informative><span class=secno></span> Informative References</a></ul>
	<li><a href=#index><span class=secno></span> Index</a>
	<li><a href=#property-index><span class=secno></span> Property index</a>
	<li><a href=#issues-index><span class=secno></span>Issues Index</a></ul></div>



<h2 class="heading settled heading" data-level=1 id=context><span class=secno>1 </span><span class=content>
Introduction</span><a class=self-link href=#context></a></h2>

<p><em>This section is not normative.</em></p>

<p>A selector is a boolean predicate
	that takes an element in a tree structure
	and tests whether the element matches the selector or not.</p>

<p>These expressions may be used for many things:</p>

	<ul>
		<li>
			directly on an element to test whether it matches some criteria,
			such as in the <code>element.matches()</code> function defined in <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a>

		<li>
			applied to an entire tree of elements
			to filter it into a set of elements that match the criteria,
			such as in the <code>document.queryAll()</code> function defined in <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a>
			or the selector of a CSS style rule.

		<li>
			used "in reverse" to generate markup that would match a given selector,
			such as in <a href=http://haml.info/>HAML</a> or <a href=http://en.wikipedia.org/wiki/Zen_Coding>Zen Coding</a>
	</ul>

<p>Selectors Levels 1, 2, and 3 are defined as the subsets of selector
	functionality defined in the <a href=http://www.w3.org/TR/REC-CSS1>CSS1</a>,
	<a href=http://www.w3.org/TR/CSS21/>CSS2.1</a>, and
	<a href=http://www.w3.org/TR/css3-selectors/>Selectors Level 3</a>
	specifications, respectively. This module defines Selectors Level 4.</p>

<h3 class="heading settled heading" data-level=1.1 id=placement><span class=secno>1.1 </span><span class=content>Module Interactions</span><a class=self-link href=#placement></a></h3>

<p>This module replaces the definitions of
	and extends the set of selectors defined for CSS in <a data-biblio-type=informative data-link-type=biblio href=#select title=select>[SELECT]</a> and <a data-biblio-type=informative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>.</p>

<p>Pseudo-element selectors,
	which define abstract elements in a rendering tree,
	are not part of this specification:
	their generic syntax is described here,
	but, due to their close integration with the rendering model and irrelevance to other uses such as DOM queries,
	they will be defined in other modules.</p>

<h2 class="heading settled heading" data-level=2 id=overview><span class=secno>2 </span><span class=content>
Selectors Overview</span><a class=self-link href=#overview></a></h2>

<p><em>This section is non-normative, as it merely summarizes the
	following sections.</em></p>

<p>A selector represents a structure. This structure can be used as a
	condition (e.g. in a CSS rule) that determines which elements a
	selector matches in the document tree, or as a flat description of the
	HTML or XML fragment corresponding to that structure.</p>

<p>Selectors may range from simple element names to rich contextual
	representations.</p>

<p>The following table summarizes the Selector syntax:</p>

	<table class=data>
		<col class=pattern>
		<col class=meaning>
		<col class=section>
		<col class=level>
		<thead>
			<tr>
				<th>Pattern
				<th>Represents
				<th>Section
				<th>Level
		<tbody>
			<tr>
				<td><code>*</code>
				<td>any element
				<td><a href=#universal-selector>Universal selector</a>
				<td>2
			<tr>
				<td><code>E</code>
				<td>an element of type E
				<td><a href=#type-selectors>Type (tag name) selector</a>
				<td>1
		<tbody>
			<tr>
				<td><code>E:not(<var>s1</var>, <var>s2</var>)</code>
				<td>an E element that does not match either <a data-link-type=dfn href=#compound title="compound selector">compound selector</a> <var>s1</var>
						or <a data-link-type=dfn href=#compound title="compound selector">compound selector</a> <var>s2</var>
				<td><a href=#negation>Negation pseudo-class</a>
				<td>3/4
			<tr>
				<td><code>E:matches(<var>s1</var>, <var>s2</var>)</code>
				<td>an E element that matches <a data-link-type=dfn href=#compound title="compound selector">compound selector</a> <var>s1</var>
						and/or <a data-link-type=dfn href=#compound title="compound selector">compound selector</a> <var>s2</var>
				<td><a href=#matches>Matches-any pseudo-class</a>
				<td>4
			<tr>
				<td><code>E:has(<var>rs1</var>, <var>rs2</var>)</code>
				<td>an E element,
					if either of the <a data-link-type=dfn href=#relative-selector- title="relative selectors">relative selectors</a> <var>rs1</var> or <var>rs2</var>,
					when evaluated with E as the <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>,
					match an element
				<td><a href=#relational>Relational pseudo-class</a>
				<td>4
		<tbody>
			<tr>
				<td><code>E.warning</code>
				<td>an E element belonging to the class <code>warning</code>
						(the document language specifies how class is determined).
				<td><a href=#class-html>Class selectors</a>
				<td>1
			<tr>
				<td><code>E#myid</code>
				<td>an E element with ID equal to <code>myid</code>.
				<td><a href=#id-selectors>ID selectors</a>
				<td>1
			<tr>
				<td><code>E[foo]</code>
				<td>an E element with a <code>foo</code> attribute
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>2
			<tr>
				<td><code>E[foo="bar"]</code>
				<td>an E element whose <code>foo</code> attribute value is
						exactly equal to <code>bar</code>
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>2
			<tr>
				<td><code>E[foo="bar" i]</code>
				<td>an E element whose <code>foo</code> attribute value is
						exactly equal to any (ASCII-range) case-permutation of <code>bar</code>
				<td><a href=#attribute-case>Attribute selectors: Case-sensitivity</a>
				<td>4
			<tr>
				<td><code>E[foo~="bar"]</code>
				<td>an E element whose <code>foo</code> attribute value is
						a list of whitespace-separated values, one of which is
						exactly equal to <code>bar</code>
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>2
			<tr>
				<td><code>E[foo^="bar"]</code>
				<td>an E element whose <code>foo</code> attribute value
						begins exactly with the string "bar"
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>3
			<tr>
				<td><code>E[foo$="bar"]</code>
				<td>an E element whose <code>foo</code> attribute value
						ends exactly with the string <code>bar</code>
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>3
			<tr>
				<td><code>E[foo*="bar"]</code>
				<td>an E element whose <code>foo</code> attribute value
						contains the substring <code>bar</code>
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>3
			<tr>
				<td><code>E[foo|="en"]</code>
				<td>an E element whose <code>foo</code> attribute value is
						a hyphen-separated list of values beginning with <code>en</code>
				<td><a href=#attribute-selectors>Attribute selectors</a>
				<td>2
		<tbody>
			<tr>
				<td><code>E:dir(ltr)</code>
				<td>an element of type E in with left-to-right directionality
					(the document language specifies how directionality is determined)
				<td><a href=#dir-pseudo>The :dir() pseudo-class</a>
				<td>4
			<tr>
				<td><code>E:lang(zh, *-hant)</code>
				<td>an element of type E tagged as being either in Chinese
					(any dialect or writing system)
					or othewise written with traditional Chinese characters
				<td><a href=#lang-pseudo>The :lang() pseudo-class</a>
				<td>2/4
		<tbody>
			<tr>
				<td><code>E:any-link</code>
				<td>an E element being the source anchor of a hyperlink
				<td><a href=#any-link-pseudo>The hyperlink pseudo-class</a>
				<td>4
			<tr>
				<td><code>E:link</code>
				<td>an E element being the source anchor of a hyperlink
						of which the target is not yet visited
				<td><a href=#link>The link history pseudo-classes</a>
				<td>1
			<tr>
				<td><code>E:visited</code>
				<td>an E element being the source anchor of a hyperlink
						of which the target is already visited
				<td><a href=#link>The link history pseudo-classes</a>
				<td>1
			<tr>
				<td><code>E:target</code>
				<td>an E element being the target of the referring URL
				<td><a href=#target-pseudo>The target pseudo-class</a>
				<td>3
			<tr>
				<td><code>E:scope</code>
				<td>an E element being a designated reference element
				<td><a href=#scope-pseudo>The scope pseudo-class</a>
				<td>4
		<tbody>
			<tr>
				<td><code>E:current</code>
				<td>an E element that is currently presented in a time-dimensional canvas
				<td><a href=#time-pseudos>Time-dimensional Pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:current(<var>s</var>)</code>
				<td>an E element that is the deepest <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element that
						matches selector <var>s</var>
				<td><a href=#time-pseudos>Time-dimensional Pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:past</code>
				<td>an E element that is in the past in a time-dimensional canvas
				<td><a href=#time-pseudos>Time-dimensional Pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:future</code>
				<td>an E element that is in the future in a time-dimensional canvas
				<td><a href=#time-pseudos>Time-dimensional Pseudo-classes</a>
				<td>4
		<tbody>
			<tr>
				<td><code>E:active</code>
				<td>an E element that is in an activated state
				<td><a href=#useraction-pseudos>The user action pseudo-classes</a>
				<td>1
			<tr>
				<td><code>E:hover</code>
				<td>an E element that is under the cursor,
						or that has a descendant under the cursor
				<td><a href=#useraction-pseudos>The user action pseudo-classes</a>
				<td>2
			<tr>
				<td><code>E:focus</code>
				<td>an E element that has user input focus
				<td><a href=#useraction-pseudos>The user action pseudo-classes</a>
				<td>2
			<tr>
				<td><code>E:active-drop</code>
				<td>an E element that will receive the item currently being dragged
				<td><a href=#drag-pseudos>The drag-and-drop pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:valid-drop</code>
				<td>an E element that could receive the item currently being dragged
				<td><a href=#drag-pseudos>The drag-and-drop pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:invalid-drop</code>
				<td>an E element that cannot receive the item currently being dragged, but could receive some other item
				<td><a href=#drag-pseudos>The drag-and-drop pseudo-classes</a>
				<td>4
		<tbody>
			<tr>
				<td><code>E:enabled<br>E:disabled</code>
				<td>a user interface element E that is enabled or disabled, respectively
				<td><a href=#enableddisabled>The :enabled and :disabled pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:read-only</code><br><code>E:read-write</code>
				<td>a user interface element E that
				<td><a href=#rw-pseudos>The mutability pseudo-classes</a>
				<td>3-UI/4
			<tr>
				<td><code>E:placeholder-shown</code>
				<td>an input control currently showing placeholder text
				<td><a href=#rw-pseudos>The placeholder-shown pseudo-class</a>
				<td>3-UI/4
			<tr>
				<td><code>E:default</code>
				<td>a user interface element E that
				<td><a href=#default-pseudo>The default option pseudo-class :default</a>
				<td>3-UI/4
			<tr>
				<td><code>E:checked</code>
				<td>a user interface element E that is checked/selected
					 (for instance a radio-button or checkbox)
				<td><a href=#checked>The selected-option pseudo-class</a>
				<td>3
			<tr>
				<td><code>E:indeterminate</code>
				<td>a user interface element E that is in an indeterminate state
						(neither checked nor unchecked)
				<td><a href=#indeterminate>The indeterminate-value pseudo-class</a>
				<td>4
			<tr>
				<td><code>E:valid</code><br><code>E:invalid</code>
				<td>a user-input element E that
				<td><a href=#range-pseudos>The validity pseudo-classes</a>
				<td>3-UI/4
			<tr>
				<td><code>E:in-range</code><br><code>E:out-of-range</code>
				<td>a user-input element E whose value is in-range/out-of-range
				<td><a href=#range-pseudos>The range pseudo-classes</a>
				<td>3-UI/4
			<tr>
				<td><code>E:required</code><br><code>E:optional</code>
				<td>a user-input element E that requires/does not require input
				<td><a href=#opt-pseudos>The optionality pseudo-classes</a>
				<td>3-UI/4
			<tr>
				<td><code>E:required</code><br><code>E:optional</code>
				<td>a user-input element E with incorrect input
				<td><a href=#opt-pseudos>The optionality pseudo-classes</a>
				<td>4
		<tbody>
			<tr>
				<td><code>E:root</code>
				<td>an E element, root of the document
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:empty</code>
				<td>an E element that has no children (not even text nodes)
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:blank</code>
				<td>an E element that has no content except maybe white space
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:nth-child(<var>n</var> [of <var>sel</var>]? )</code>
				<td>an E element, the <var>n</var>-th child of its parent matching <var>sel</var>
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:nth-last-child(<var>n</var> [of <var>sel</var>]? )</code>
				<td>an E element, the <var>n</var>-th child of its parent matching <var>sel</var>,
						counting from the last one
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:first-child</code>
				<td>an E element, first child of its parent
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>2
			<tr>
				<td><code>E:last-child</code>
				<td>an E element, last child of its parent
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:only-child</code>
				<td>an E element, only child of its parent
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:nth-of-type(<var>n</var>)</code>
				<td>an E element, the <var>n</var>-th sibling of its type
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:nth-last-of-type(<var>n</var>)</code>
				<td>an E element, the <var>n</var>-th sibling of its type,
						counting from the last one
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:first-of-type</code>
				<td>an E element, first sibling of its type
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:last-of-type</code>
				<td>an E element, last sibling of its type
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
			<tr>
				<td><code>E:only-of-type</code>
				<td>an E element, only sibling of its type
				<td><a href=#structural-pseudos>Structural pseudo-classes</a>
				<td>3
		<tbody>
			<tr>
				<td><code>E F</code>
				<td>an F element descendant of an E element
				<td><a href=#descendant-combinators>Descendant combinator</a>
				<td>1
			<tr>
				<td><code>E &gt; F</code>
				<td>an F element child of an E element
				<td><a href=#child-combinators>Child combinator</a>
				<td>2
			<tr>
				<td><code>E + F</code>
				<td>an F element immediately preceded by an E element
				<td><a href=#adjacent-sibling-combinators>Next-sibling combinator</a>
				<td>2
			<tr>
				<td><code>E ~ F</code>
				<td>an F element preceded by an E element
				<td><a href=#general-sibling-combinators>Following-sibling combinator</a>
				<td>3
		<tbody>
			<tr>
				<td><code>F || E</code>
				<td>an E element that represents a cell in a grid/table
						belonging to a column represented by an element F
				<td><a href=#table-pseudos>Grid-Structural pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:nth-column(<var>n</var>)</code>
				<td>an E element that represents a cell belonging to the
						<var>n</var>th column in a grid/table
				<td><a href=#table-pseudos>Grid-Structural pseudo-classes</a>
				<td>4
			<tr>
				<td><code>E:nth-last-column(<var>n</var>)</code>
				<td>an E element that represents a cell belonging to the
						<var>n</var>th column in a grid/table, counting from the last one
				<td><a href=#table-pseudos>Grid-Structural pseudo-classes</a>
				<td>4
	</table>

<p class=note>Note: Some Level 4 selectors (noted above as "3-UI") were introduced in <a data-biblio-type=informative data-link-type=biblio href=#css3ui title=css3ui>[CSS3UI]</a>.</p>

<h3 class="heading settled heading" data-level=2.1 id=profiles><span class=secno>2.1 </span><span class=content>
<a data-link-type=dfn href=#fast-profile title=fast>Fast</a> vs <a data-link-type=dfn href=#complete-profile title=complete>Complete</a> Selector Profiles</span><a class=self-link href=#profiles></a></h3>

<p>Selectors are used in many different contexts,
	with wildly varying performance characteristics.
	Some powerful selectors are unfortunately too slow
	to realistically include in the more performance-sensitive contexts.
	To accommodate this, two profiles of the Selectors spec are defined:</p>

	<dl>
		<dt><dfn data-dfn-type=dfn data-noexport="" id=fast-profile>fast<a class=self-link href=#fast-profile></a></dfn>
		<dd>
			The <a data-link-type=dfn href=#fast-profile title=fast>fast</a> profile is appropriate for use in any context,
			including dynamic browser CSS selector matching.
			It includes every selector defined in this document,
			except for:

			<ul>
				<li>The <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a> pseudo-class
			</ul>

		<dt><dfn data-dfn-type=dfn data-noexport="" id=complete-profile>complete<a class=self-link href=#complete-profile></a></dfn>
		<dd>
			The <a data-link-type=dfn href=#complete-profile title=complete>complete</a> profile is appropriate for contexts which aren’t extremely performance sensitive.
			For example, the <a class=idl-code data-link-for=Element data-link-type=method title=query()>query()</a> method defined in <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a> should use the <a class=css data-link-type=maybe href=#complete-profile title=complete>complete</a> profile.
			It includes all of the selectors defined in this document.
	</dl>

<p>CSS implementations conformant to Selectors Level 4 must use the <a class=css data-link-type=maybe href=#fast-profile title=fast>fast</a> profile for CSS selection.</p>

	<p class=issue id=issue-cbdc0c66><a class=self-link href=#issue-cbdc0c66></a>
		The categorization of things into the "fast" or "complete" profiles needs implementor review.
		If some things currently not in the fast profile can reasonably be done in CSS Selectors,
		we should move them.


<h2 class="heading settled heading" data-level=3 id=syntax><span class=secno>3 </span><span class=content>
Selector Syntax and Structure</span><a class=self-link href=#syntax></a></h2>

<h3 class="heading settled heading" data-level=3.1 id=structure><span class=secno>3.1 </span><span class=content>
Structure and Terminology</span><a class=self-link href=#structure></a></h3>

<p>The term <dfn data-dfn-type=dfn data-export="" id=selector>selector<a class=self-link href=#selector></a></dfn> can refer to a <a data-link-type=dfn href=#simple title="simple selector">simple selector</a>,
	<a data-link-type=dfn href=#compound title="compound selector">compound selector</a>, <a data-link-type=dfn href=#complex title="complex selector">complex selector</a>, or <a data-link-type=dfn href=#selector-list title="selector list">selector list</a>.</p>

<p>A <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> is a comma-separated list of <a data-link-type=dfn href=#selector title=selectors>selectors</a>;
	see <a href=#grouping>Selector Lists</a>.</p>

<p>A <dfn data-dfn-type=dfn data-export="" id=complex>complex selector<a class=self-link href=#complex></a></dfn> is a sequence of one or more <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>
	separated by <a data-link-type=dfn href=#combinator title=combinators>combinators</a>.</p>

<p>A <dfn data-dfn-type=dfn data-export="" id=compound>compound selector<a class=self-link href=#compound></a></dfn>
	is a sequence of <a data-link-type=dfn href=#simple title="simple selectors">simple selectors</a>
	that are not separated by a <a data-link-type=dfn href=#combinator title=combinator>combinator</a>.
	If it contains a <a data-link-type=dfn href=#type-selector title="type selector">type selector</a> or <a data-link-type=dfn href=#universal-selector0 title="universal selector">universal selector</a>,
	that selector comes first in the sequence.
	Only one type selector or universal selector is allowed in the sequence.</p>

<p>A <dfn data-dfn-type=dfn data-export="" id=simple>simple selector<a class=self-link href=#simple></a></dfn> represents an aspect of an element to be matched against.
	A simple selector is either a
	<a data-link-type=dfn href=#type-selector title="type selector">type selector</a>,
	<a data-link-type=dfn href=#universal-selector0 title="universal selector">universal selector</a>,
	<a data-link-type=dfn href=#attribute-selector title="attribute selector">attribute selector</a>,
	<a data-link-type=dfn href=#class-selector title="class selector">class selector</a>,
	<a data-link-type=dfn href=#id-selector title="id selector">ID selector</a>,
	or <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a>.</p>

<p>A <dfn data-dfn-type=dfn data-export="" id=combinator>combinator<a class=self-link href=#combinator></a></dfn> represents a particular kind of relationship
	between the elements matched by the <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a> on either side.
	Combinators in Selectors level 4 include:
	whitespace,</p>
	“greater-than sign” (U+003E, <code>&gt;</code>),
	“plus sign” (U+002B, <code>+</code>),
	and “tilde” (U+007E, <code>~</code>).

<p class=issue id=issue-1bea4b82><a class=self-link href=#issue-1bea4b82></a>Issue: Fill in more combinators.</p>

<p>An empty selector,
	containing no <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>,
	is an <a href=#invalid>invalid selector</a>.</p>

<p class=note>Note: As whitespace is a valid <a data-link-type=dfn href=#combinator title=combinator>combinator</a>,
	no whitespace is allowed between the <a data-link-type=dfn href=#simple title="simple selectors">simple selectors</a>
	in a <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>.</p>

<h3 class="heading settled heading" data-level=3.2 id=evaluating-selectors><span class=secno>3.2 </span><span class=content>
Evaluating a Selector</span><a class=self-link href=#evaluating-selectors></a></h3>

<p>This section describes how to <dfn data-dfn-type=dfn data-export="" id=evaluate-a-selector>evaluate a selector<a class=self-link href=#evaluate-a-selector></a></dfn> against a set of elements.</p>

<p>APIs using this algorithm must provide a selector,
	and one or more <a data-link-type=dfn title="element tree">element tree</a> root elements
	indicating the trees that will be searched by the selector.
	They may optionally provide:</p>

	<ul>
		<li>
			a <a data-link-type=dfn href=#scoping-method- title="scoping method">scoping method</a> and <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>.
			If not specified, the selector defaults to being unscoped.

		<li>
			a set of <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>,
			for resolving the <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> pseudo-class against.
			If not specified,
			the set defaults to being empty.

<p>If the selector is a <a data-link-type=dfn href=#relative-selector- title="relative selector">relative selector</a>,
			the set of <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a> must not be empty.</p>

<p class=note>Note: Note that if the selector is scoped,
			the scoping root is automatically taken as the <a data-link-type=dfn href=#scope-element title=":scope element">:scope element</a>,
			so it doesn’t have to be provided explicitly
			unless a different result is desired.</p>

		<li>
			which <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a> are allowed to show up in the match list, if any.
			If not specified, this defaults to allowing all pseudo-elements.
	</ul>

<p>A <a data-link-type=dfn href=#selector title=selector>selector</a> is evaluated against some initial list of elements:
	the <dfn data-dfn-type=dfn data-export="" id=selector-match-list>selector match list<a class=self-link href=#selector-match-list></a></dfn>.
	The <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> is initially populated with the <a data-link-type=dfn title="element tree">element tree</a> roots
	provided to the algorithm,
	and all elements reachable from them by traversing any number of child lists.</p>

<p>If the selector is <a data-link-type=dfn href=#scope-contained- title=scope-contained>scope-contained</a>,
	the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> is immediately filtered
	to contain only elements that are either the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>
	or descendants of the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>.</p>

<p>The selector is processed from left to right in order,
	with <a data-link-type=dfn href=#simple title="simple selectors">simple selectors</a> filtering the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>,
	and <a data-link-type=dfn href=#combinator title=combinators>combinators</a> and <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a> changing the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> into something new.
	If the selector is <a data-link-type=dfn href=#scope-contained- title=scope-contained>scope-contained</a>
	then after each <a data-link-type=dfn href=#combinator title=combinator>combinator</a>
	the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> must be filtered
	to contain only elements that are either the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>
	or descendants of the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>.</p>

<p>If the selector is <a data-link-type=dfn href=#scope-filtered- title=scope-filtered>scope-filtered</a>,
	then after the selector is finished processing,
	the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> must be filtered
	to contain only elements that are either the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>
	or descendants of the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>.</p>

<p>After the selector is finished matching,
	the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> must be filtered
	to only contain elements and <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a>
	allowed by the invoker of this algorithm.</p>

<p>When this process is done, the elements in the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>
	are the elements said to match the selector.
	If the order of elements matter,
	they must be sorted in document order,
	unless otherwise specified.</p>

	<div class=example>
		For example, to evaluate the selector "div &gt; i.name" against a document,
		the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> is first set to all the elements in the entire document.
		Then, the "div" type selector is evaluated, filtering the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>
		to only contain elements with a tagname of "div".
		Then, the "&gt;" child combinator is evaluated, transforming the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>
		by replacing each element currently in it with the element’s children.
		Then, the "i" type selector is evaluated, filtering the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>
		to only contain elements with a tagname of "i".
		Finally, the ".name" class selector is evaluated, filter the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a>
		to only contain elements with a class of "name".
	</div>

<p class=note>Note: Many implementations of selectors instead evaluate them right to left,
	as it’s more efficient to do so in many cases.
	This, as usual, is completely valid,
	as long as it results in the same elements being returned
	as the spec’s algorithm would.</p>

<p class=issue id=issue-944b07a3><a class=self-link href=#issue-944b07a3></a>Issue: The relative position of pseudo-elements in the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> is undefined.
	There’s not yet a context that exposes this information,
	but we need to decide on something eventually,
	before something <em>is</em> exposed.</p>


<h3 class="heading settled heading" data-level=3.3 id=data-model><span class=secno>3.3 </span><span class=content>
Data Model</span><a class=self-link href=#data-model></a></h3>

<p>Selectors are evaluated against a DOM tree. <a data-biblio-type=normative data-link-type=biblio href=#dom title=dom>[DOM]</a>
	Within this specification,
	this may be referred to as the "document tree".</p>

<p>In addition to the information present in the document tree,
	for the purpose of selectors,
	elements are assumed to have arbitrary <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a> flags
	and <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> slots,
	as defined by the given <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a> and <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a>.</p>

	<div class=example>
		For example, the first element child of each element
		has a flag indicating that it matches the <a class=css data-link-type=maybe href=#first-child-pseudo title=:first-child>:first-child</a> pseudo-element.

<p>For another example,
		all elements have <span class=css data-link-type=maybe title=::before>::before</span> pseudo-elements,
		but not only elements with <a data-link-type=dfn href=http://dev.w3.org/csswg/css-scoping-1/#shadow-tree title="shadow trees">shadow trees</a> have <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-scoping-1/#selectordef-shadow title=::shadow>::shadow</a> pseudo-elements.</p>
	</div>

<p>Four aspects of a DOM element are especially relevant for selectors:</p>

	<ul>
		<li>The element’s type (also known as tagname),
			which is a pair of strings: a namespace and a local name.
		<li>An ID, which is a string.
		<li>Classes, which are strings.
		<li>Attributes, which are pairs of strings consisting of an attribute name and an attribute value.
	</ul>

<p>These aspects are referred to as <dfn data-dfn-type=dfn data-export="" id=feature title=feature>features<a class=self-link href=#feature></a></dfn>.
	The <a data-link-type=dfn href=#simple title="simple selectors">simple selectors</a> which are keyed off of them
	(<a data-link-type=dfn href=#universal-selector0 title="universal selector">universal selector</a>, <a data-link-type=dfn href=#type-selector title="type selectors">type selectors</a>, <a data-link-type=dfn href=#id-selector title="id selectors">ID selectors</a>, <a data-link-type=dfn href=#class-selector title="class selectors">class selectors</a>, and <a data-link-type=dfn href=#attribute-selector title="attribute selectors">attribute selectors</a>)
	are called <dfn data-dfn-type=dfn data-export="" id=feature-selector title="feature selector">feature selectors<a class=self-link href=#feature-selector></a></dfn>.</p>

<p>While elements may lack any of the individual <a data-link-type=dfn href=#feature title=features>features</a>,
	some elements are <dfn data-dfn-type=dfn data-export="" id=featureless>featureless<a class=self-link href=#featureless></a></dfn>,
	which means that not only do they lack any <a data-link-type=dfn href=#feature title=features>features</a>
	(and thus will never match a <a data-link-type=dfn href=#feature-selector title="feature selector">feature selector</a>),
	but any selectors that reference <a data-link-type=dfn href=#feature title=features>features</a>,
	such as <span class=css data-link-type=maybe title=:not(div)>:not(div)</span>,
	also never match them.
	Thus, only <a data-link-type=dfn href=#pseudo-class title=pseudo-classes>pseudo-classes</a> or <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a> can be used to select them.
	Individual <a data-link-type=dfn href=#featureless title=featureless>featureless</a> elements may define additional restrictions on what kinds of selectors can match them.</p>

	<div class=example>
		For example, the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-scoping-1/#host-element0 title="host element">host element</a> in a <a data-link-type=dfn href=http://dev.w3.org/csswg/css-scoping-1/#shadow-tree title="shadow tree">shadow tree</a> is <a data-link-type=dfn href=#featureless title=featureless>featureless</a>,
		and can’t be matched by <em>any</em> <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a> except for <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-scoping-1/#selectordef-host0 title=:host>:host</a> and <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-scoping-1/#selectordef-host-context title=:host-context()>:host-context()</a>.)
	</div>

<p>When matching a selector against a document which is in <a data-link-type=dfn title="quirks mode">quirks mode</a>,
	class and ID selectors must be matched <a data-link-type=dfn href=http://dev.w3.org/csswg/css-syntax-3/#ascii-case-insensitive title="ascii case-insensitive">ASCII case-insensitively</a>
	against the classes and ID of the elements in the document.</p>

<h4 class="heading settled heading" data-level=3.3.1 id=dom-mapping><span class=secno>3.3.1 </span><span class=content>
Guidance on Mapping Document Languages to DOM</span><a class=self-link href=#dom-mapping></a></h4>

<p>The DOM document structure is powerful and useful,
	but generic enough to model pretty much any langauge that describes tree-based data
	(or even graph-based, with a suitable interpretation).</p>

<p>Some languages, like HTML, already have well-defined procedures
	for producing a DOM object from a resource.
	If a given language does not,
	such a procedure must be defined
	in order for Selectors to apply to documents in that language.</p>

<p>At minimum,
	the document language must define what maps to the DOM concept of an "element".</p>

<p>The primary one-to-many relationship between nodes—<wbr>parent/child in tree-based structures,
	element/neighbors in graph-based structures—<wbr>should be reflected as the child nodes of an element.</p>

<p>Other features of the element should be reflected as <a data-link-type=dfn href=#feature title=features>features</a> when possible,
	mapping to something that serves a similar purpose to the same feature in DOM:</p>

	<dl>
		<dt>type
		<dd>
			If the elements in the document language have some notion of "type"
			as a basic distinguisher between different groups of elements,
			it should be reflected as the "type" <a data-link-type=dfn href=#feature title=feature>feature</a>.

<p>If this "type" can be separated into a "basic" name
			and a "namespace" that groups names into higher-level groups,
			that should be reflected in the "namespace" and "local name" divisions of the "type" <a data-link-type=dfn href=#feature title=feature>feature</a>.
			Otherwise, the "namespace" part should be the empty string,
			and the entire name should be in the "local name" part.</p>

		<dt>id
		<dd>
			If some aspect of the element functions as a unique identifier across the document,
			it should be mapped to the "id" <a data-link-type=dfn href=#feature title=feature>feature</a>.

<p class=note>Note: While HTML only allows an element to have a single ID,
			this should not be taken as a general restriction.
			The important quality of an ID is that each ID should be associated with a single element;
			a single element can validly have multiple IDs.</p>

		<dt>classes and attributes
		<dd>
			Aspects of the element that are useful for identifying the element,
			but are not generally unique to elements within a document,
			should be mapped to the "class" or "attribute" <a data-link-type=dfn href=#feature title=features>features</a>
			depending on if they’re something equivalent to a "label" (a string by itself)
			or a "property" (a name/value pair)

		<dt>pseudo-classes and pseudo-attributes
		<dd>
			If any elements match any pseudo-classes or have any pseudo-elements,
			that must be explicitly defined.

<p class=issue id=issue-ea3628be><a class=self-link href=#issue-ea3628be></a>Issue: Some pseudo-classes are *syntactical*,
			like <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a> and <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>,
			and thus should always work.
			Need to indicate that somewhere.
			Probably the structural pseudos always work
			whenever the child list is ordered.</p>
	</dl>

	<div class=example>
		For example, <a href="">JSONSelect</a> is a library that uses selectors
		to extract information from JSON documents.

		<ul>
			<li>
				The "elements" of the JSON document
				are each array, object, boolean, string, number, or null.
				The array and object elements have their contents as children.

			<li>
				Each element’s type is its JS type name:
				"array", "object", etc.

			<li>
				Children of an object
				have their key as a class.

			<li>
				Children of an array match the <a class=css data-link-type=maybe href=#first-child-pseudo title=:first-child>:first-child</a>, <a class=css data-link-type=maybe href=#nth-child-pseudo title=:nth-child()>:nth-child()</a>, etc pseudo-classes.

			<li>
				The root object matches <a class=css data-link-type=maybe href=#root-pseudo title=:root>:root</a>.

			<li>
				It additionally defines <span class=css data-link-type=maybe title=:val()>:val()</span> and <span class=css data-link-type=maybe title=:contains()>:contains()</span> pseudo-classes,
				for matching boolean/number/string elements with a particular value
				or which contain a particular substring.
		</ul>

<p>This structure is sufficient to allow powerful, compact querying of JSON documents with selectors.</p>
	</div>



<h3 class="heading settled heading" data-level=3.4 id=scoping><span class=secno>3.4 </span><span class=content>
Scoped Selectors</span><a class=self-link href=#scoping></a></h3>

<p>Some host applications may choose to <dfn data-dfn-type=dfn data-export="" id=scope- title="scope | scoped selector">scope<a class=self-link href=#scope-></a></dfn> selectors
	to a particular subtree or fragment of the document.
	The root of the scoping subtree is called the <dfn data-dfn-type=dfn data-export="" id=scoping-root>scoping root<a class=self-link href=#scoping-root></a></dfn>,
	and may be either a true element (the <dfn data-dfn-type=dfn data-export="" id=scoping-element>scoping element<a class=self-link href=#scoping-element></a></dfn>)
	or a <dfn data-dfn-type=dfn data-export="" id=virtual-scoping-root title="virtual scoping root">virtual<a class=self-link href=#virtual-scoping-root></a></dfn> one (such as a <a class=idl-code data-link-type=interface href=http://dom.spec.whatwg.org/#documentfragment title=documentfragment>DocumentFragment</a>).</p>

<p>There are two <dfn data-dfn-type=dfn data-export="" id=scoping-method- title="scoping method | selector scoping method">scoping methods<a class=self-link href=#scoping-method-></a></dfn> for selectors:</p>

	<dl>
		<dt><dfn data-dfn-type=dfn data-export="" id=scope-contained- title="scope-contained | scope-contained selector">scope-contained<a class=self-link href=#scope-contained-></a></dfn>
		<dd>
			With this method of scoping, selectors match as if
			the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a> were the root of the document:
			all <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a> must be represented within the scope.
			(The <a class=css data-link-type=maybe href=#root-pseudo title=:root>:root</a> pseudo-class, however,
			still only matches the actual root of the document.)

		<dt><dfn data-dfn-type=dfn data-export="" id=scope-filtered- title="scope-filtered | scope-filtered selector">scope-filtered<a class=self-link href=#scope-filtered-></a></dfn>
		<dd>
			With this method of scoping, a selector matches an element only if the element is within the scope,
			even if other components of the selector are outside the scope.
			(A <a data-link-type=dfn href=#scoping-element title="scoping element">scoping element</a> is considered to be in scope.)
	</dl>

	<div class=example>
		For example,
		the <code>element.querySelector()</code> function defined in <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a>
		allows the author to define a <a data-link-type=dfn href=#scope-filtered- title=scope-filtered>scope-filtered</a> selector.

<p>On the other hand, the selectors within an <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> scoped stylesheet
		define <a data-link-type=dfn href=#scope-contained- title=scope-contained>scope-contained</a> selectors.</p>
	</div>

<p class=note>Note: If there are no <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a> when a selector is evaluated,
	the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a> acts like a <a data-link-type=dfn href=#scope-element title=":scope element">:scope element</a>.</p>

<h3 class="heading settled heading" data-level=3.5 id=relative><span class=secno>3.5 </span><span class=content>
Relative Selectors</span><a class=self-link href=#relative></a></h3>

<p>Certain contexts may accept <dfn data-dfn-type=dfn data-export="" id=relative-selector- title="relative selector | relative | scope-relative">relative selectors<a class=self-link href=#relative-selector-></a></dfn>,
	which are a shorthand for selectors that represent elements relative to a <a data-link-type=dfn href=#scope-element title=":scope element">:scope element</a>
	(i.e. an element that matches <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a>).
	In a <a data-link-type=dfn href=#relative-selector- title="relative selector">relative selector</a>,
	“:scope ” (the <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> pseudo-class followed by a space)
	is implied at the beginning of each <a data-link-type=dfn href=#complex title="complex selector">complex selector</a>
	that does not already contain the <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> pseudo-class.
	This allows the selector to begin syntactically with a <a data-link-type=dfn href=#combinator title=combinator>combinator</a>.
	However, it must be <a href=#absolutize>absolutized</a> before matching.</p>

<p>Relative selectors, once absolutized,
	can additionally be <a data-link-type=dfn href=#scope-contained- title=scope-contained>scope-contained</a> or <a data-link-type=dfn href=#scope-filtered- title=scope-filtered>scope-filtered</a>.</p>

<h4 class="heading settled heading" data-level=3.5.1 id=absolutizing><span class=secno>3.5.1 </span><span class=content>
Absolutizing a Relative Selector</span><a class=self-link href=#absolutizing></a></h4>

<p>To <dfn data-dfn-type=dfn data-export="" id=absolutize>absolutize a relative selector<a class=self-link href=#absolutize></a></dfn>:</p>

<p>If there are no <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>
	and the selector is <a data-link-type=dfn href=http://dev.w3.org/csswg/css-cascade-3/#scoped title=scoped>scoped</a> to a <a data-link-type=dfn href=#virtual-scoping-root title="virtual scoping root">virtual scoping root</a>:</p>

	<ol>
		<li>
			If the selector starts with a <a data-link-type=dfn href=#child-combinator title="child combinator">child combinator</a>,
			remove the child combinator.
			The selector is now absolute,
			with the additional constraint that the first compound selector in the selector
			only matches elements without a parent.

		<li>
			Otherwise, if the selector starts with any combinator other than the <a data-link-type=dfn href=#descendant-combinator title="descendant combinator">descendant combinator</a>,
			change the selector to <span class=css data-link-type=maybe title=:not(*)>:not(*)</span>.
			<span class=note>This is the shortest selector that is valid, but guaranteed to match nothing.</span>

		<li>
			Otherwise, the selector is already absolute.
	</ol>

<p>Otherwise:</p>

	<ol>
		<li>
			If the selector starts with a <a data-link-type=dfn href=#combinator title=combinator>combinator</a> other than the <a data-link-type=dfn href=#descendant-combinator title="descendant combinator">descendant combinator</a>,
			prepend <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> as the initial <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>.

		<li>
			Otherwise, if the selector does not contain any instance of the <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> pseudo-class
			(either at the top-level or as an argument to a functional pseudo-class),
			prepend <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> followed by the <a data-link-type=dfn href=#descendant-combinator title="descendant combinator">descendant combinator</a>.

		<li>
			Otherwise, the selector is already absolute.
	</ol>

<p>To <dfn data-dfn-type=dfn data-export="" id=absolutize-list>absolutize a relative selector list<a class=self-link href=#absolutize-list></a></dfn>,
	absolutize each relative selector in the list.</p>


<h3 class="heading settled heading" data-level=3.6 id=pseudo-classes><span class=secno>3.6 </span><span class=content>
Pseudo-classes</span><a class=self-link href=#pseudo-classes></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=pseudo-class>pseudo-class<a class=self-link href=#pseudo-class></a></dfn> concept is introduced to permit selection based on
	information that lies outside of the document tree
	or that can be awkward or impossible to express using the other simple selectors.</p>

<p>The syntax of a <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a>
	is a ":" (U+003A COLON)
	followed by the name of the <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a>,
	which is either an <a data-link-type=dfn href=http://dev.w3.org/csswg/css-syntax-3/#identifier title=identifier>identifier</a>,
	or in the case of a	<dfn data-dfn-type=dfn data-export="" id=functional-pseudo-class>functional pseudo-class<a class=self-link href=#functional-pseudo-class></a></dfn>,
	a function potentially containing arguments between parentheses
	(similar to CSS functions).</p>

<p>No <a data-link-type=dfn href=#whitespace title="white space">white space</a> is allowed between the colon and the name of the <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a>,
	and as usual for CSS syntax,
	there are no spaces between the function name and its opening parenthesis.
	As usual for CSS syntax,
	<a data-link-type=dfn href=#whitespace title="white space">white space</a> is allowed arond the arguments between the parentheses
	of a functional pseudo-class,
	unless otherwise specified.</p>

<p><a data-link-type=dfn href=#pseudo-class title=pseudo-classes>Pseudo-classes</a> are identical to any other type of <a data-link-type=dfn href=#simple title="simple selector">simple selector</a>:
	they’re allowed in all <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a> contained in a selector,
	and must follow the <a data-link-type=dfn href=#type-selector title="type selector">type selector</a> or <a data-link-type=dfn href=#universal-selector0 title="universal selector">universal selector</a>, if present.
	<a data-link-type=dfn href=#pseudo-class title=pseudo-class>Pseudo-class</a> names are <a data-link-type=dfn href=http://dev.w3.org/csswg/css-syntax-3/#ascii-case-insensitive title="ascii case-insensitive">ASCII case-insensitive</a>.
	Some <a data-link-type=dfn href=#pseudo-class title=pseudo-classes>pseudo-classes</a> are mutually exclusive
	(such that a <a data-link-type=dfn href=#compound title="compound selector">compound selector</a> containing them, while valid, will never match anything),
	while others can apply simultaneously to the same element.
	<a data-link-type=dfn href=#pseudo-class title=pseudo-classes>Pseudo-classes</a> may be dynamic,
	in the sense that an element can acquire or lose a pseudo-class
	while a user interacts with the document.</p>

<h3 class="heading settled heading" data-level=3.7 id=pseudo-elements><span class=secno>3.7 </span><span class=content>Pseudo-elements</span><a class=self-link href=#pseudo-elements></a></h3>

<p>Similar to how <a data-link-type=dfn href=#pseudo-class title=pseudo-classes>pseudo-classes</a> represent additional information
	not directly present in the document tree
	(or that is inconvenient to use),
	a <dfn data-dfn-type=dfn data-export="" id=pseudo-element>pseudo-element<a class=self-link href=#pseudo-element></a></dfn> is an <em>element</em>
	not directly present in the document tree,
	used to create abstractions about the document tree
	beyond those specified by the document language.</p>

	<div class=example>
		For instance, document languages do not offer mechanisms to access
		the first letter or first line of an element’s content,
		but there exist <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a>
		(<span class=css data-link-type=maybe title=::first-letter>::first-letter</span> and <span class=css data-link-type=maybe title=::first-line>::first-line</span>)
		that allow those things to be styled.

<p><a data-link-type=dfn href=#pseudo-element title=pseudo-elements>Pseudo-elements</a> can also represent content that doesn’t exist in the source document at all,
		such as the <span class=css data-link-type=maybe title=::before>::before</span> and <span class=css data-link-type=maybe title=::after>::after</span> pseudo-elements
		which allow additional content to be inserted before or after the contents of any element.</p>
	</div>

<p>The syntax of a <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a>
	is "::" (two U+003A COLON characters)
	followed by the name of the <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> as an <a data-link-type=dfn href=http://dev.w3.org/csswg/css-syntax-3/#identifier title=identifier>identifier</a>.
	<a data-link-type=dfn href=#pseudo-element title=pseudo-element>Pseudo-element</a> names are <a data-link-type=dfn href=http://dev.w3.org/csswg/css-syntax-3/#ascii-case-insensitive title="ascii case-insensitive">ASCII case-insensitive</a>.
	No <a data-link-type=dfn href=#whitespace title="white space">white space</a> is allowed between the two colons, or between the colons and the name.</p>

<p>Due to legacy constraints,
	user agents must allow <span class=css data-link-type=maybe title=::before>::before</span>, <span class=css data-link-type=maybe title=::after>::after</span>, <span class=css data-link-type=maybe title=::first-line>::first-line</span>, and <span class=css data-link-type=maybe title=::first-letter>::first-letter</span> pseudo-elements
	to be written with a single colon rather than two,
	similar to <a data-link-type=dfn href=#pseudo-class title=pseudo-class>pseudo-class</a> syntax.
	Authors must always use the double-colon syntax for these <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a>.</p>

<p><a data-link-type=dfn href=#pseudo-element title=pseudo-elements>Pseudo-elements</a> do not exist independently;
	they belong to another element on the page,
	called their <dfn data-dfn-type=dfn data-export="" id=originating-element>originating element<a class=self-link href=#originating-element></a></dfn>.
	When a <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> is encountered in a selector as part of a <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>,
	the part of the selector to the left of the <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> selects the <a data-link-type=dfn href=#originating-element title="originating element">originating element</a> for the <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a>;
	the part of the selector to the right, if any, applies to the <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> itself.
	If a <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> <em>starts</em> a <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>,
	it’s treated as if the selector to its left was the <a data-link-type=dfn href=#universal-selector0 title="universal selector">universal selector</a>.</p>

	<div class=example>
		For example, in the selector <span class=css data-link-type=maybe title="div a::before">div a::before</span>,
		the <span class=css data-link-type=maybe title=a>a</span> elements matched by the selector are the <a data-link-type=dfn href=#originating-element title="originating elements">originating elements</a>
		for the <span class=css data-link-type=maybe title=::before>::before</span> pseudo-elements attached to them.

<p>The selector <span class=css data-link-type=maybe title=::first-line>::first-line</span> is equivalent to <span class=css data-link-type=maybe title=*::first-line>*::first-line</span>,
		which selects the <span class=css data-link-type=maybe title=::first-line>::first-line</span> pseudo-element on <em>every</em> element in the document.</p>
	</div>

<p><a data-link-type=dfn href=#pseudo-element title=pseudo-elements>Pseudo-elements</a> are <a data-link-type=dfn href=#featureless title=featureless>featureless</a>,
	and so can’t be matched by any <a data-link-type=dfn href=#feature-selector title="feature selector">feature selector</a>.
	They also do not affect the interpretation of <a data-link-type=dfn href=#structural-pseudo-classes title="structural pseudo-classes">structural pseudo-classes</a>,
	which are evaluated based solely on real elements.
	Other <a data-link-type=dfn href=#pseudo-class title=pseudo-classes>pseudo-classes</a> <em>can</em> match <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a>,
	unless otherwise specified.</p>

	<p class=issue id=issue-73b391d2><a class=self-link href=#issue-73b391d2></a>
		I’ve switched over to defaulting to allowing.
		Is that okay,
		or should we stick with defaulting to *not* allowing,
		and requiring individual pseudo-classes to specify that they work on pseudo-elements?

	<div class=example>
		For example, the <a class=css data-link-type=maybe href=#hover-pseudo title=:hover>:hover</a> pseudo-class specifies that it
		can apply to any pseudo-element, i.e. <span class=css data-link-type=maybe title=::first-line:hover>::first-line:hover</span>
		will match when the first line is hovered.
		However, since neither <a class=css data-link-type=maybe href=#focus-pseudo title=:focus>:focus</a> nor <span class=css data-link-type=maybe title=::first-line>::first-line</span>
		define that <a class=css data-link-type=maybe href=#focus-pseudo title=:focus>:focus</a> can apply to <span class=css data-link-type=maybe title=::first-line>::first-line</span>,
		the selector <span class=css data-link-type=maybe title=::first-line:focus>::first-line:focus</span> will never match anything.
	</div>

<p><a data-link-type=dfn href=#pseudo-element title=pseudo-elements>Pseudo-elements</a> may have children,
	as defined by the specification defining them.
	Their children can be children of other elements, too,
	turning the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> into a directed acyclic graph,
	but their rendering must be defined so as to maintain the tree-ness of the <a data-link-type=dfn title="box tree">box tree</a>.</p>

	<div class=example>
		For example,
		the <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-scoping-1/#selectordef-content title=::content>::content</a> pseudo-element treats elements distributed to it as its children.
		This means that, given the following fragment:

		<pre>&lt;div&gt;
  &lt;span&gt;foo&lt;/span&gt;
  &lt;"shadow root"&gt;
    &lt;content&gt;&lt;/content&gt;
  &lt;/"shadow root"&gt;
&lt;/div&gt;
</pre>

<p>the selectors <span class=css data-link-type=maybe title="div > span">div &gt; span</span> and <span class=css data-link-type=maybe title="div::shadow ::content > span">div::shadow ::content &gt; span</span> select the same element via different paths.</p>

<p>However, when rendered,</p>
		the <code>&lt;span&gt;</code> element generates boxes as if it were the child of the <code>&lt;content&gt;</code> element,
		rather than the <code>&lt;div&gt;</code> element,
		so the tree structure of the <a data-link-type=dfn title="box tree">box tree</a> is maintained.
	</div>

<p>The host language defines which pseudo-elements exist and their meaning.
	<a data-biblio-type=informative data-link-type=biblio href=#css21 title=css21>[CSS21]</a> defines the <span class=css data-link-type=maybe title=::before>::before</span>, <span class=css data-link-type=maybe title=::after>::after</span>, <span class=css data-link-type=maybe title=::first-line>::first-line</span> and <span class=css data-link-type=maybe title=::first-letter>::first-letter</span> pseudo-elements
	which exist in all document languages.</p>

<h4 class="heading settled heading" data-level=3.7.1 id=pseudo-element-types><span class=secno>3.7.1 </span><span class=content>
Types of Pseudo-Elements</span><a class=self-link href=#pseudo-element-types></a></h4>

<p><a data-link-type=dfn href=#pseudo-element title=pseudo-elements>Pseudo-elements</a> are divided into two categories:
	<a data-link-type=dfn href=#content-pseudo-element title="content pseudo-elements">content pseudo-elements</a>,
	<a data-link-type=dfn href=#text-pseudo-element title="text pseudo-elements">text pseudo-elements</a>,</p>

<p>A <dfn data-dfn-type=dfn data-export="" id=content-pseudo-element>content pseudo-element<a class=self-link href=#content-pseudo-element></a></dfn>
	“acts like an element”.
	It might be able to generate boxes
	(though it probably doesn’t by default),
	and all properties are valid on it.
	While it is ignored by <a data-link-type=dfn href=#structural-pseudo-classes title="structural pseudo-classes">structural pseudo-classes</a>,
	it’s otherwise treated exactly like an element inserted in its place.</p>

	<div class=example>
		For example, the <span class=css data-link-type=maybe title=::before>::before</span> <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> is a <a data-link-type=dfn href=#content-pseudo-element title="content pseudo-element">content pseudo-element</a>,
		as it can be styled like any other element
		(as long as its <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-content-3/#content title=content>content</a> property is set to a non-<span class=css data-link-for=content data-link-type=maybe title=none>none</span> value).

<p>The <a class=css data-link-type=maybe href=http://dev.w3.org/csswg/css-scoping-1/#selectordef-shadow title=::shadow>::shadow</a> <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a> is also a <a data-link-type=dfn href=#content-pseudo-element title="content pseudo-element">content pseudo-element</a>,
		even though it never generates boxes.
		It does, however,
		act as the parent of the top-level elements in its <a data-link-type=dfn href=http://dev.w3.org/csswg/css-scoping-1/#shadow-tree title="shadow tree">shadow tree</a>.</p>
	</div>

<p>A <dfn data-dfn-type=dfn data-export="" id=text-pseudo-element>text pseudo-element<a class=self-link href=#text-pseudo-element></a></dfn>,
	on the other hand,
	never generates boxes.
	Instead, it generates fragments
	within the boxes generated by its <a data-link-type=dfn href=#originating-element title="originating element">originating element</a>.
	Further, the fragments generated by a <a data-link-type=dfn href=#text-pseudo-element title="text pseudo-element">text pseudo-element</a>
	can cross content boundaries of elements within the <a data-link-type=dfn href=#originating-element title="originating element">originating element</a>.
	For these reasons,
	the properties that apply to <a data-link-type=dfn href=#text-pseudo-element title="text pseudo-elements">text pseudo-elements</a> are extremely restricted.</p>
	<span class=issue id=issue-2422b936><a class=self-link href=#issue-2422b936></a>Explain this better.</span>

	<div class=example>
		The <span class=css data-link-type=maybe title=::first-line>::first-line</span> and <span class=css data-link-type=maybe title=::first-letter>::first-letter</span> <a data-link-type=dfn href=#pseudo-element title=pseudo-elements>pseudo-elements</a>
		are both <a data-link-type=dfn href=#text-pseudo-element title="text pseudo-elements">text pseudo-elements</a>.
	</div>

<h3 class="heading settled heading" data-level=3.8 id=case-sensitive><span class=secno>3.8 </span><span class=content>
Characters and case sensitivity</span><a class=self-link href=#case-sensitive></a></h3>

<p>All Selectors syntax is case-insensitive within the ASCII range
	(i.e. [a-z]  and [A-Z] are equivalent),
	except for the following parts,
	which are not under the control of Selectors:
	the case-sensitivity of
	document language element names,
	attribute names,
	and attribute values
	depends on the document language.</p>

	<div class=example>
		For example,
		<a href=http://www.whatwg.org/html/selectors.html#case-sensitivity>in HTML, element and attribute names are ASCII case-insensitive</a>,
		but in XML, they are case-sensitive.
	</div>

<p>Case sensitivity of namespace prefixes is defined in <a data-biblio-type=normative data-link-type=biblio href=#css3namespace title=css3namespace>[CSS3NAMESPACE]</a>.
	Case sensitivity of <a data-link-type=dfn href=#language-range title="language ranges">language ranges</a> is defined in the <a class=css data-link-type=maybe href=#lang-pseudo title=:lang()>:lang()</a> section.</p>

<p><dfn data-dfn-type=dfn data-noexport="" id=whitespace>White space<a class=self-link href=#whitespace></a></dfn> in Selectors consists of the
	code points SPACE (U+0020), TAB (U+0009), LINE FEED (U+000A),
	CARRIAGE RETURN (U+000D), and FORM FEED (U+000C) can occur in whitespace.
	Other space-like code points, such as EM SPACE (U+2003) and
	IDEOGRAPHIC SPACE (U+3000), are never part of white space.</p>

<p>Code points in Selectors can be escaped with a backslash
	according to the same <a href=http://www.w3.org/TR/CSS21/syndata.html#characters>escaping rules</a> as CSS. <a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
	Note that escaping a code point "cancels out" any special meaning it may have in Selectors.
	For example, the selector <span class=css data-link-type=maybe title="#foo>a">#foo&gt;a</span> contains a combinator,</p>
	but <span class=css data-link-type=maybe title="#foo\>a">#foo\&gt;a</span> instead selects an element with the id <code>foo&gt;a</code>.


<h3 class="heading settled heading" data-level=3.9 id=namespaces><span class=secno>3.9 </span><span class=content>
Namespaces</span><a class=self-link href=#namespaces></a></h3>

<p>Certain selectors support namespace prefixes.
	The mechanism by which namespace prefixes are <dfn data-dfn-type=dfn data-noexport="" id=nsdecl>declared<a class=self-link href=#nsdecl></a></dfn>
	should be specified by the language that uses Selectors.
	If the language does not specify a namespace prefix declaration mechanism,
	then no prefixes are declared.
	In CSS, namespace prefixes are declared with the <span class=css data-link-type=maybe title=@namespace>@namespace</span>rule. <a data-biblio-type=normative data-link-type=biblio href=#css3namespace title=css3namespace>[CSS3NAMESPACE]</a></p>

<h3 class="heading settled heading" data-level=3.10 id=invalid><span class=secno>3.10 </span><span class=content>
Invalid Selectors and Error Handling</span><a class=self-link href=#invalid></a></h3>

<p>User agents must observe the rules for handling <dfn data-dfn-type=dfn data-noexport="" id=invalid-selector title="invalid selector|invalid">invalid selectors<a class=self-link href=#invalid-selector></a></dfn>:</p>

	<ul>
		<li>a parsing error in a selector,
			e.g. an unrecognized token or a token which is not allowed at the current parsing point,
			causes that selector to be invalid
		<li>a simple selector containing an <a href=#namespaces>undeclared namespace prefix</a> is invalid
		<li>a selector containing an invalid simple selector, an invalid combinator
			or an invalid token is invalid.
		<li>a selector list containing an invalid selector is invalid.
	</ul>

<p>An <a data-link-type=dfn href=#invalid-selector title="invalid selector">invalid selector</a> represents nothing.</p>



<h2 class="heading settled heading" data-level=4 id=logical-combination><span class=secno>4 </span><span class=content>
Logical Combinations</span><a class=self-link href=#logical-combination></a></h2>

<h3 class="heading settled heading" data-level=4.1 id=grouping><span class=secno>4.1 </span><span class=content>
Selector Lists</span><a class=self-link href=#grouping></a></h3>

<p>A comma-separated list of selectors represents the union of all
	elements selected by each of the individual selectors in the
	<dfn data-dfn-type=dfn data-export="" id=selector-list>selector list<a class=self-link href=#selector-list></a></dfn>.
	(A comma is U+002C.) For example, in CSS when several selectors share
	the same declarations, they may be grouped into a comma-separated
	list. White space may appear before and/or after the comma.</p>

	<div class=example>
		CSS example:
		In this example, we condense three rules with identical
		declarations into one. Thus,
		<pre>h1 { font-family: sans-serif }
h2 { font-family: sans-serif }
h3 { font-family: sans-serif }
</pre>
<p>is equivalent to:</p>
		<pre>h1, h2, h3 { font-family: sans-serif }
</pre>
	</div>

<p><strong>Warning</strong>: the equivalence is true in this example
	because all the selectors are valid selectors. If just one of these
	selectors were invalid, the entire <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> would be
	invalid. This would invalidate the rule for all three heading
	elements, whereas in the former case only one of the three individual
	heading rules would be invalidated.</p>

	<div class=example>
		Invalid CSS example:

		<pre>h1 { font-family: sans-serif }
h2..foo { font-family: sans-serif }
h3 { font-family: sans-serif }
</pre>

<p>is not equivalent to:</p>

<pre>h1, h2..foo, h3 { font-family: sans-serif } </pre>

<p>because the above selector (<span class=css data-link-type=maybe title="h1, h2..foo, h3">h1, h2..foo, h3</span>)
		is entirely invalid and the entire style rule is dropped. (When
		the selectors are not grouped, only the rule for <span class=css data-link-type=maybe title=h2..foo>h2..foo</span>
		is dropped.)</p>
	</div>

<h3 class="heading settled heading" data-level=4.2 id=matches><span class=secno>4.2 </span><span class=content>
The Matches-Any Pseudo-class: <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a></span><a class=self-link href=#matches></a></h3>

<p>The matches-any pseudo-class, <dfn class=css-code data-dfn-type=selector data-export="" id=matches-pseudo>:matches()<a class=self-link href=#matches-pseudo></a></dfn>,
	is a functional pseudo-class taking a <a href=#grouping>selector list</a>
	as its argument. It represents an element that is represented by its argument.</p>

<p>The <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a> pseudo-class may not be nested within itself
	or within <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a>:
	<span class=css data-link-type=maybe title=:matches(:matches(...))>:matches(:matches(...))</span> and <span class=css data-link-type=maybe title=:not(:matches(...))>:not(:matches(...))</span> are invalid.
	Additionally, pseudo-elements cannot be represented by the matches-any pseudo-class;
	they are not valid within <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>.</p>

<p class=issue id=issue-dc4684d3><a class=self-link href=#issue-dc4684d3></a>Issue: This restriction probably isn’t necessary.
	If it is, it needs to be expanded,
	since <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a> and <a class=css data-link-type=maybe href=#nth-child-pseudo title=:nth-child()>:nth-child()</a> have the same functionality as <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>.</p>

<p>Default namespace declarations do not affect any “implied” universal selectors
	within a <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a> pseudo-class.</p>

	<div class=example>
		For example, following selector matches any element that is being
		hovered or focused, regardless of its namespace. In particular, it
		is not limited to only matching elements in the default namespace
		that are being hovered or focused.

<pre>*|*:matches(:hover, :focus) </pre>

<p>The following selector, however, represents only hovered or focused
		elements that are in the default namespace, because it uses an explicit
		universal selector within the <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a> notation:</p>

<pre>*|*:matches(*:hover, *:focus) </pre>
	</div>

<h3 class="heading settled heading" data-level=4.3 id=negation><span class=secno>4.3 </span><span class=content>
The Negation Pseudo-class: <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a></span><a class=self-link href=#negation></a></h3>

<p>The negation pseudo-class, <dfn class=css-code data-dfn-type=selector data-export="" id=negation-pseudo>:not()<a class=self-link href=#negation-pseudo></a></dfn>, is a
	functional pseudo-class taking a <a href=#grouping>selector list</a>
	as an argument. It represents an element that is not represented
	by its argument.</p>

<p class=note>Note: In Selectors Level 3,
	only a single <a data-link-type=dfn href=#simple title="simple selector">simple selector</a> was allowed as the argument to <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a>.</p>

<p>A negation may not be nested within itself or within <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>:
	<span class=css data-link-type=maybe title=:not(:not(...))>:not(:not(...))</span> and <span class=css data-link-type=maybe title=:matches(:not(...))>:matches(:not(...))</span> are invalid.
	Additionally, pseudo-elements cannot be represented by the negation pseudo-class;
	they are not valid within <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a>.</p>

	<div class=example>
		For example, the following selector matches all <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/forms.html#the-button-element title=button>button</a> elements in an HTML document
		that are not disabled.

<pre>button:not([DISABLED]) </pre>

<p>The following selector represents all but <a data-link-type=element title="">FOO</a> elements.</p>

<pre>*:not(FOO)</pre>

<p>The following compound selector represents all HTML elements
		except links.</p>

<pre>html|*:not(:link):not(:visited)</pre>
	</div>

<p>Default namespace declarations do not affect the subject of any selector
	within a negation pseudo-class unless the argument is an explicit universal
	selector or a type selector. (See <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>for examples.)</p>

<p class=note>Note: The <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a> pseudo allows
	useless selectors to be written.  For instance <span class=css data-link-type=maybe title=:not(*|*)>:not(*|*)</span>,
	which represents no element at all, or <span class=css data-link-type=maybe title=foo:not(bar)>foo:not(bar)</span>,
	which is equivalent to <span class=css data-link-type=maybe title=foo>foo</span> but with a higher
	specificity.</p>

<h3 class="heading settled heading" data-level=4.4 id=relational><span class=secno>4.4 </span><span class=content>
The Relational Pseudo-class: <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a></span><a class=self-link href=#relational></a></h3>

<p>The relational pseudo-class, <dfn class=css-code data-dfn-type=selector data-export="" id=has-pseudo>:has()<a class=self-link href=#has-pseudo></a></dfn>,
	is a functional pseudo-class taking a <a data-link-type=dfn href=#relative-selector- title="relative selector">relative selector</a> <a data-link-type=dfn href=#selector-list title="selector list">list</a> as an argument.
	It represents an element if any of the <a data-link-type=dfn href=#relative-selector- title="relative selectors">relative selectors</a>,
	when <a href=#absolutize>absolutized</a>
	and evaluated with the element as the <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>,
	would match at least one element.</p>

	<div class=example>
		For example, the following selector matches only
		<code>&lt;a&gt;</code> elements that contain an <code>&lt;img&gt;</code> child:

<pre>a:has(&gt; img)</pre>

		The following selector matches a <code>&lt;dt&gt;</code> element
		immediately followed by another <code>&lt;dt&gt;</code> element:

<pre>dt:has(+ dt)</pre>

		The following selector matches <code>&lt;section&gt;</code> elements
		that don’t contain any heading elements:

<pre>section:not(:has(h1, h2, h3, h4, h5, h6))</pre>

<p>Note that ordering matters in the above selector.
		Swapping the nesting of the two pseudo-classes, like:</p>

<pre>section:has(:not(h1, h2, h3, h4, h5, h6))</pre>

		...would result matching any <code>&lt;section&gt;</code> element
		which contains anything that’s not a header element.
	</div>


<h2 class="heading settled heading" data-level=5 id=elemental-selectors><span class=secno>5 </span><span class=content>
Elemental selectors</span><a class=self-link href=#elemental-selectors></a></h2>

<h3 class="heading settled heading" data-level=5.1 id=type-selectors><span class=secno>5.1 </span><span class=content>
Type (tag name) selector</span><a class=self-link href=#type-selectors></a></h3>

<p>A <dfn data-dfn-type=dfn data-export="" id=type-selector>type selector<a class=self-link href=#type-selector></a></dfn> is the name of a document language element type
	written using the syntax of <a href=http://www.w3.org/TR/css3-namespace/#css-qnames>CSS qualified names</a> <a data-biblio-type=normative data-link-type=biblio href=#css3namespace title=css3namespace>[CSS3NAMESPACE]</a>.
	A type selector represents an instance of the element type in the document tree.</p>

	<div class=example>
	 Example:
	 The following selector represents an <a data-link-type=element title=h1>h1</a> element in the document tree:

<pre>h1 </pre>
	</div>

<h4 class="heading settled heading" data-level=5.1.1 id=typenmsp><span class=secno>5.1.1 </span><span class=content>
Type selectors and namespaces</span><a class=self-link href=#typenmsp></a></h4>

<p>Type selectors allow an optional namespace component: a namespace
	prefix that has been previously <a href=#nsdecl>declared</a> may be
	prepended to the element name separated by the namespace separator</p>
	"vertical bar" (U+007C, <code>|</code>). (See, e.g., <a data-biblio-type=informative data-link-type=biblio href=#xml-names title=xml-names>[XML-NAMES]</a> for the use of namespaces in
	XML.)

<p>The namespace component may be left empty (no prefix before the
	namespace separator) to indicate that the selector is only to
	represent elements with no namespace.</p>

<p>An asterisk may be used for the namespace prefix, indicating that
	the selector represents elements in any namespace (including elements
	with no namespace).</p>

<p>Element type selectors that have no namespace component (no
	namespace separator) represent elements without regard to the</p>
	element’s namespace (equivalent to "<code>*|</code>") unless a default
	namespace has been <a href=#nsdecl>declared</a>  for namespaced selectors (e.g. in CSS, in
	the style sheet). If a default namespace has been declared, such
	selectors will represent only elements in the default namespace.

<p>A type selector containing a namespace prefix that has not been
	previously <a href=#nsdecl>declared</a> for namespaced selectors is
	an <a href=#conformance>invalid</a> selector.</p>

<p>In a namespace-aware client,
	the name part of element type selectors
	(the part after the namespace separator, if it is present)
	will only match against the <a href=http://www.w3.org/TR/REC-xml-names/#NT-LocalPart>local part</a>
	of the element’s <a href=http://www.w3.org/TR/REC-xml-names/#ns-qualnames>qualified name</a>.</p>

<p>In summary:</p>

	<dl>
		<dt><code>ns|E</code>
		<dd>
			elements with name E in namespace ns

		<dt><code>*|E</code>
		<dd>
			elements with name E in any namespace,
			including those without a namespace

		<dt><code>|E</code>
		<dd>
			elements with name E without a namespace

		<dt><code>E</code>
		<dd>
			if no default namespace has been <a href=#nsdecl>declared</a> for selectors,
			this is equivalent to *|E.
			Otherwise it is equivalent to ns|E
			where ns is the default namespace.
	</dl>

	<div class=example>
		CSS examples:

		<pre>@namespace foo url(http://www.example.com);
foo|h1 { color: blue }  /* first rule */
foo|* { color: yellow } /* second rule */
|h1 { color: red }      /* ...*/
*|h1 { color: green }
h1 { color: green }
</pre>

<p>The first rule (not counting the <span class=css data-link-type=maybe title=@namespace>@namespace</span> at-rule)
		will match only <a data-link-type=element title=h1>h1</a> elements in the
		"http://www.example.com" namespace.</p>

<p>The second rule will match all elements in the
		"http://www.example.com" namespace.</p>

<p>The third rule will match only <a data-link-type=element title=h1>h1</a> elements with
		no namespace.</p>

<p>The fourth rule will match <a data-link-type=element title=h1>h1</a> elements in any
		namespace (including those without any namespace).</p>

<p>The last rule is equivalent to the fourth rule because no default
		namespace has been defined.</p>
	</div>

<h3 class="heading settled heading" data-level=5.2 id=universal-selector><span class=secno>5.2 </span><span class=content>
Universal selector </span><a class=self-link href=#universal-selector></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=universal-selector0>universal selector<a class=self-link href=#universal-selector0></a></dfn>, written as a
	<a href=http://www.w3.org/TR/css3-namespace/#css-qnames>CSS qualified</a></p><a href=http://www.w3.org/TR/css3-namespace/#css-qnames>
	name</a> <a data-biblio-type=normative data-link-type=biblio href=#css3namespace title=css3namespace>[CSS3NAMESPACE]</a> with an asterisk (<code>*</code>
	U+002A) as the local name, represents the qualified name of any element
	type. It represents any single element in the document tree in any
	namespace (including those without a namespace) if no default
	namespace has been specified for selectors. If a default namespace has
	been specified, see <a href=#univnmsp>Universal selector and
	Namespaces</a> below.

<p>If a universal selector represented by <span class=css data-link-type=maybe title=*>*</span>
	(i.e. without a namespace prefix)
	is not the only component of a <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>
	or is immediately followed by a <a data-link-type=dfn href=#pseudo-element title=pseudo-element>pseudo-element</a>,
	then the <span class=css data-link-type=maybe title=*>*</span> may be omitted
	and the universal selector’s presence implied.</p>

	<div class=example>
		<ul>
			<li>''*[hreflang|=en]<span class=css data-link-type=maybe title=" and "> and </span>[hreflang|=en]'' are equivalent,
			<li><span class=css data-link-type=maybe title=*.warning>*.warning</span> and <span class=css data-link-type=maybe title=.warning>.warning</span> are equivalent,
			<li><span class=css data-link-type=maybe title=*#myid>*#myid</span> and <span class=css data-link-type=maybe title=#myid>#myid</span> are equivalent.
		</ul>
	</div>

<p class=note>Note: It is recommended that the <span class=css data-link-type=maybe title=*>*</span> not be omitted,
	because it decreases the potential confusion between,
	for example, <span class=css data-link-type=maybe title="div :first-child">div :first-child</span>
	and <span class=css data-link-type=maybe title=div:first-child>div:first-child</span>.
	Here, <span class=css data-link-type=maybe title="div *:first-child">div *:first-child</span> is more readable.</p>

<h4 class="heading settled heading" data-level=5.2.1 id=univnmsp><span class=secno>5.2.1 </span><span class=content>
Universal selector and namespaces</span><a class=self-link href=#univnmsp></a></h4>

<p>The universal selector allows an optional namespace component. It
	is used as follows:</p>

	<dl>
		<dt><span class=css data-link-type=maybe title=ns|*>ns|*</span>
		<dd>
			all elements in namespace ns

		<dt><span class=css data-link-type=maybe title=*|*>*|*</span>
		<dd>
			all elements

		<dt><span class=css data-link-type=maybe title=|*>|*</span>
		<dd>
			all elements without a namespace

		<dt><span class=css data-link-type=maybe title=*>*</span>
		<dd>
			if no default namespace has been specified,
			this is equivalent to *|*.
			Otherwise it is equivalent to ns|*
			where ns is the default namespace.
	</dl>

<p>A universal selector containing a namespace prefix
	that has not been previously <a href=#nsdecl>declared</a>
	is an <a data-link-type=dfn href=#invalid-selector title="invalid selector">invalid selector</a>.</p>


<h2 class="heading settled heading" data-level=6 id=attribute-selectors><span class=secno>6 </span><span class=content>
Attribute selectors</span><a class=self-link href=#attribute-selectors></a></h2>

<p>Selectors allow the representation of an element’s attributes. When
	a selector is used as an expression to match against an element,
	an <dfn data-dfn-type=dfn data-export="" id=attribute-selector>attribute selector<a class=self-link href=#attribute-selector></a></dfn> must be considered to match an element if that
	element has an attribute that matches the attribute represented by the
	attribute selector.</p>

	<p class=issue id=issue-411b789d><a class=self-link href=#issue-411b789d></a>Add comma-separated syntax for
	<a href=http://lists.w3.org/Archives/Public/www-style/2011Mar/0215.html>multiple-value matching</a>?
	e.g. [rel ~= next, prev, up, first, last]

<h3 class="heading settled heading" data-level=6.1 id=attribute-representation><span class=secno>6.1 </span><span class=content>
Attribute presence and value selectors</span><a class=self-link href=#attribute-representation></a></h3>

<p>CSS2 introduced four attribute selectors:</p>

	<dl>
		<dt><span class=css data-link-type=maybe title=[att]>[att]</span>
		<dd>
			Represents an element with the <code>att</code> attribute,
			whatever the value of the attribute.

		<dt>''[att=val]''
		<dd>
			Represents an element with the <code>att</code> attribute
			whose value is exactly "val".

		<dt>''[att~=val]''
		<dd>
			Represents an element with the <code>att</code> attribute
			whose value is a <a href=#whitespace>whitespace</a>-separated list of words,
			one of which is exactly "val".
			If "val" contains whitespace,
			it will never represent anything
			(since the words are <em>separated</em> by spaces).
			Also if "val" is the empty string,
			it will never represent anything.

		<dt>''[att|=val]''
		<dd>
			Represents an element with the <code>att</code> attribute,
			its value either being exactly "val"
			or beginning with "val" immediately followed by "-" (U+002D).
			This is primarily intended to allow language subcode matches
			(e.g., the <code>hreflang</code> attribute on the <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element in HTML)
			as described in BCP 47 (<a data-biblio-type=informative data-link-type=biblio href=#bcp47 title=bcp47>[BCP47]</a>) or its successor.
			For <code>lang</code> (or <code>xml:lang</code>) language subcode matching,
			please see the <span class=css data-link-type=maybe title=:lang>:lang</span> pseudo-class.
	</dl>

<p>Attribute values must be <a class="production css-code" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-ident-token title="<ident-token>">&lt;ident-token&gt;</a>s or <a class="production css-code" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-string-token title="<string-token>">&lt;string-token&gt;</a>s. <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a></p>

	<div class=example>
		Examples:

<p>The following attribute selector represents an <a data-link-type=element title=h1>h1</a> element</p>
		that carries the <code>title</code> attribute,
		whatever its value:

<pre>h1[title]</pre>

<p>In the following example, the selector represents a</p>
		<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-span-element title=span>span</a> element whose <code>class</code> attribute has
		exactly the value "example":

<pre>span[class="example"]</pre>

<p>Multiple attribute selectors can be used to represent several
		attributes of an element, or several conditions on the same
		attribute. Here, the selector represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-span-element title=span>span</a> element</p>
		whose <code>hello</code> attribute has exactly the value "Cleveland"
		and whose <code>goodbye</code> attribute has exactly the value
		"Columbus":

<pre>span[hello="Cleveland"][goodbye="Columbus"]</pre>

<p>The following CSS rules illustrate the differences between
		"=" and "~=".  The first selector would match, for example, an
		<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element with the value "copyright copyleft</p>
		copyeditor" on a <code>rel</code> attribute. The second selector
		would only match an <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element with an <code>href</code>
		attribute having the exact value "http://www.w3.org/".

		<pre>a[rel~="copyright"] { ... }
a[href="http://www.w3.org/"] { ... }
</pre>

<p>The following selector represents an <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element</p>
		whose <code>hreflang</code> attribute is exactly "fr".

<pre>a[hreflang=fr] </pre>

<p>The following selector represents an <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element for</p>
		which the value of the <code>hreflang</code> attribute begins with
		"en", including "en", "en-US", and "en-scouse":

<pre>a[hreflang|="en"] </pre>

<p>The following selectors represent a <a data-link-type=element title="">DIALOGUE</a> element
		whenever it has one of two different values for an attribute</p>
		<code>character</code>:

		<pre>DIALOGUE[character=romeo]
DIALOGUE[character=juliet]
</pre>

	</div>

<h3 class="heading settled heading" data-level=6.2 id=attribute-substrings><span class=secno>6.2 </span><span class=content>
Substring matching attribute selectors</span><a class=self-link href=#attribute-substrings></a></h3>

<p>Three additional attribute selectors are provided for matching
	substrings in the value of an attribute:</p>

	<dl>
		<dt>''[att^=val]''
		<dd>
			Represents an element with the <code>att</code> attribute
			whose value begins with the prefix "val".
			If "val" is the empty string
			then the selector does not represent anything.

		<dt>''[att$=val]''
		<dd>
			Represents an element with the <code>att</code> attribute
			whose value ends with the suffix "val".
			If "val" is the empty string
			then the selector does not represent anything.

		<dt>''[att*=val]''
		<dd>
			Represents an element with the <code>att</code> attribute
			whose value contains at least one instance of the substring "val".
			If "val" is the empty string
			then the selector does not represent anything.
	</dl>

<p>Attribute values must be <a class="production css-code" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-ident-token title="<ident-token>">&lt;ident-token&gt;</a>s or <a class="production css-code" data-link-type=type href=http://dev.w3.org/csswg/css-syntax-3/#typedef-string-token title="<string-token>">&lt;string-token&gt;</a>s.</p>

	<div class=example>
		Examples:
		The following selector represents an HTML <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/embedded-content-0.html#the-object-element title=object>object</a> element,
		referencing an image:

<pre>object[type^="image/"] </pre>

<p>The following selector represents an HTML <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> element</p>
		with an <code>href</code> attribute whose value ends with ".html".

<pre>a[href$=".html"] </pre>

<p>The following selector represents an HTML paragraph</p>
		with a <code>title</code> attribute whose value contains the substring "hello"

<pre>p[title*="hello"] </pre>
	</div>

<h3 class="heading settled heading" data-level=6.3 id=attribute-case><span class=secno>6.3 </span><span class=content>
Case-sensitivity</span><a class=self-link href=#attribute-case></a></h3>

<p>By default case-sensitivity of attribute names and values in selectors
	depends on the document language. To match attribute values case-insensitively
	regardless of document language rules, the attribute selector may include the</p>
	identifier <code>i</code> before the closing bracket (<code>]</code>).
	When this flag is present, UAs must match the attribute’s value
	case-insensitively within the ASCII range.

	<div class=example>
		The following rule will style the <code>frame</code> attribute when it
		has a value of <code>hsides</code>, whether that value is represented
		as <code>hsides</code>, <code>HSIDES</code>, <code>hSides</code>, etc.
		even in an XML environment where attribute values are case-sensitive.

<pre>[frame=hsides i] { border-style: solid none; } </pre>
	</div>

	

<h3 class="heading settled heading" data-level=6.4 id=attrnmsp><span class=secno>6.4 </span><span class=content>
Attribute selectors and namespaces</span><a class=self-link href=#attrnmsp></a></h3>

<p>The attribute name in an attribute selector is given as a
	<a href=http://www.w3.org/TR/css3-namespace/#css-qnames>CSS qualified
	name</a>: a namespace prefix that has been previously <a href=#nsdecl>declared</a>
	may be prepended to the attribute name separated by the namespace</p>
	separator "vertical bar" (<code>|</code>). In keeping with
	the Namespaces in the XML recommendation, default namespaces do not
	apply to attributes, therefore attribute selectors without a namespace
	component apply only to attributes that have no namespace (equivalent
	to <span class=css data-link-type=maybe title=|attr>|attr</span>). An asterisk may be used for
	the namespace prefix indicating that the selector is to match all
	attribute names without regard to the attribute’s namespace.

<p>An attribute selector with an attribute name containing a namespace
	prefix that has not been previously <a href=#nsdecl>declared</a> is
	an <a href=#conformance>invalid</a> selector.</p>

	<div class=example>
		CSS examples:

		<pre>@namespace foo "http://www.example.com";
[foo|att=val] { color: blue }
[*|att] { color: yellow }
[|att] { color: green }
[att] { color: green }
</pre>

<p>The first rule will match only elements with the attribute</p>
		<code>att</code> in the "http://www.example.com" namespace with the
		value "val".

<p>The second rule will match only elements with the attribute</p>
		<code>att</code> regardless of the namespace of the attribute
		(including no namespace).

<p>The last two rules are equivalent and will match only elements</p>
		with the attribute <code>att</code> where the attribute is not
		in a namespace.
	</div>

<h3 class="heading settled heading" data-level=6.5 id=def-values><span class=secno>6.5 </span><span class=content>
Default attribute values in DTDs</span><a class=self-link href=#def-values></a></h3>

<p>Attribute selectors represent attribute values in the document tree.
	How that document tree is constructed is outside the scope of Selectors.
	In some document formats default attribute values can be defined in a DTD or
	elsewhere, but these can only be selected by attribute selectors if they
	appear in the document tree. Selectors should be designed so that they
	work whether or not the default values are included in the document tree.</p>

<p>For example, a XML UA may, but is <em>not</em> required to,
	read an “external subset” of the DTD, but <em>is</em> required to
	look for default attribute values in the document’s “internal subset”.
	(See, e.g., <a data-biblio-type=informative data-link-type=biblio href=#xml10 title=xml10>[XML10]</a> for definitions of these subsets.)
	Depending on the UA, a default attribute value defined in the external subset of the DTD
	might or might not appear in the document tree.</p>

<p>A UA that recognizes an XML namespace may, but is not required to use its
	knowledge of that namespace to treat default attribute values as if
	they were present in the document. (For example, an XHTML UA is not
	required to use its built-in knowledge of the XHTML DTD. See, e.g., <a data-biblio-type=informative data-link-type=biblio href=#xml-names title=xml-names>[XML-NAMES]</a> for details on namespaces in XML
	1.0.)</p>

<p class=note>Note: Typically, implementations
	choose to ignore external subsets. This corresponds to the behaviour
	of non-validating processors as defined by the XML specification.</p>

	<div class=example>
		Example:

		Consider an element <code>EXAMPLE</code> with an attribute <code>radix</code>
		that has a default value of <code>"decimal"</code>. The DTD fragment might be

<pre class=dtd-example>&lt;!ATTLIST EXAMPLE radix (decimal,octal) "decimal"&gt; </pre>

<p>If the style sheet contains the rules</p>

		<pre>EXAMPLE[radix=decimal] { /*... default property settings ...*/ }
EXAMPLE[radix=octal]   { /*... other settings...*/ }
</pre>

		the first rule might not match elements whose <code>radix</code> attribute is
		set by default, i.e. not set explicitly. To catch all cases, the
		attribute selector for the default value must be dropped:

		<pre>EXAMPLE                { /*... default property settings ...*/ }
EXAMPLE[radix=octal]   { /*... other settings...*/ }
</pre>

<p>Here, because the selector ''EXAMPLE[radix=octal]'' is
		more specific than the type selector alone, the style declarations in
		the second rule will override those in the first for elements that</p>
		have a <code>radix</code> attribute value of <code>"octal"</code>. Care has to be taken that
		all property declarations that are to apply only to the default case
		are overridden in the non-default cases' style rules.
	</div>

<h3 class="heading settled heading" data-level=6.6 id=class-html><span class=secno>6.6 </span><span class=content>
Class selectors</span><a class=self-link href=#class-html></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=class-selector>class selector<a class=self-link href=#class-selector></a></dfn> is given as a full stop (. U+002E) immediately
	followed by an identifier. It represents an element belonging to the
	class identified by the identifier, as defined by the document language.
	For example, in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>, <a data-biblio-type=informative data-link-type=biblio href=#svg11 title=svg11>[SVG11]</a>, and <a data-biblio-type=informative data-link-type=biblio href=#mathml title=mathml>[MATHML]</a> membership in a</p>
	class is given by the <code>class</code> attribute: in these languages
	it is equivalent to the <code>~=</code> notation applied to the
	local <code>class</code> attribute
	(i.e. <code>[class~=<var>identifier</var>]</code>).

	<div class=example>
		CSS examples:

<p>We can assign style information to all elements with</p>
		<code>class~="pastoral"</code> as follows:

<pre>*.pastoral { color: green }  /* all elements with class~=pastoral */ </pre>

<p>or just</p>

<pre>.pastoral { color: green }  /* all elements with class~=pastoral */ </pre>

<p>The following assigns style only to H1 elements with</p>
		<code>class~="pastoral"</code>:

<pre>H1.pastoral { color: green }  /* H1 elements with class~=pastoral */ </pre>

		Given these rules, the first <code>H1</code> instance below would not have
		green text, while the second would:

		<pre>&lt;H1&gt;Not green&lt;/H1&gt;
&lt;H1 class="pastoral"&gt;Very green&lt;/H1&gt;
</pre>

		The following rule matches any <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>P</a> element whose <code>class</code>
		attribute has been assigned a list of <a href=#whitespace>whitespace</a>-separated values that includes both
		<code>pastoral</code> and <code>marine</code>:

<pre>p.pastoral.marine { color: green } </pre>

		This rule matches when <code>class="pastoral blue aqua
		marine"</code> but does not match for <code>class="pastoral
		blue"</code>.
	</div>

<p class=note>Note: Because CSS gives considerable
	power to the "class" attribute, authors could conceivably design their
	own "document language" based on elements with almost no associated
	presentation (such as <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-div-element title=div>div</a> and <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-span-element title=span>span</a> in HTML)
	and assigning style
	information through the "class" attribute.  Authors should avoid this
	practice since the structural elements of a document language often
	have recognized and accepted meanings and author-defined classes may
	not.</p>

<p class=note>Note: If an element has multiple
	class attributes, their values must be concatenated with spaces
	between the values before searching for the class. As of this time the
	working group is not aware of any manner in which this situation can
	be reached, however, so this behavior is explicitly non-normative in
	this specification.</p>

<h3 class="heading settled heading" data-level=6.7 id=id-selectors><span class=secno>6.7 </span><span class=content>
ID selectors</span><a class=self-link href=#id-selectors></a></h3>

<p>Document languages may contain attributes that are declared to be of type ID.
	What makes attributes of type ID special
	is that no two such attributes can have the same value in a conformant document,
	regardless of the type of the elements that carry them;
	whatever the document language,
	an ID typed attribute can be used to uniquely identify its element.</p>
	In HTML all ID attributes are named <code>id</code>;
	XML applications may name ID attributes differently,
	but the same restriction applies.
	Which attribute on an element is considered the “ID attribute“ is defined by the document language.

	An <dfn data-dfn-type=dfn data-export="" id=id-selector>ID selector<a class=self-link href=#id-selector></a></dfn> consists of a “number sign” (U+0023, <code>#</code>)
	immediately followed by the ID value,
	which must be a CSS <a href=http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier>identifier</a>.
	An ID selector represents an element instance that has an identifier that matches the identifier in the ID selector.
	(It is possible in non-conforming documents for multiple elements to match a single ID selector.)

	<div class=example>
		Examples:
		The following ID selector represents an <a data-link-type=element title=h1>h1</a> element
		whose ID-typed attribute has the value "chapter1":

<pre>h1#chapter1 </pre>

<p>The following ID selector represents any element whose ID-typed
		attribute has the value "chapter1":</p>

<pre>#chapter1 </pre>

<p>The following selector represents any element whose ID-typed
		attribute has the value "z98y".</p>

<pre>*#z98y </pre>
	</div>

<p class=note>Note: In XML 1.0 <a data-biblio-type=informative data-link-type=biblio href=#xml10 title=xml10>[XML10]</a>, the information about which attribute
	contains an element’s IDs is contained in a DTD or a schema. When
	parsing XML, UAs do not always read the DTD, and thus may not know
	what the ID of an element is (though a UA may have namespace-specific
	knowledge that allows it to determine which attribute is the ID
	attribute for that namespace). If a style sheet author knows or
	suspects that a UA may not know what the ID of an element is, he
	should use normal attribute selectors instead:
	''[name=p371]<span class=css data-link-type=maybe title=" instead of "> instead of </span>#p371''.</p>

<p>If an element has multiple ID attributes, all of them must be
	treated as IDs for that element for the purposes of the ID
	selector. Such a situation could be reached using mixtures of xml:id,
	DOM3 Core, XML DTDs, and namespace-specific knowledge.</p>

<h2 class="heading settled heading" data-level=7 id=linguistic-pseudos><span class=secno>7 </span><span class=content>
Linguistic Pseudo-classes</span><a class=self-link href=#linguistic-pseudos></a></h2>

<h3 class="heading settled heading" data-level=7.1 id=the-dir-pseudo><span class=secno>7.1 </span><span class=content>
The directionality pseudo-class <a class=css data-link-type=maybe href=#dir-pseudo title=:dir()>:dir()</a></span><a class=self-link href=#the-dir-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=dir-pseudo>:dir()<a class=self-link href=#dir-pseudo></a></dfn> pseudo-class allows the author to write
	selectors that represent an element based on its directionality as
	determined by the document language.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines <a href=http://www.whatwg.org/html/selectors.html#selector-ltr>how to determine the directionality of an element</a>,</p>
	based on a combination of the <code>dir</code> attribute, the surrounding text, and other factors.
	The <a class=css data-link-type=maybe href=#dir-pseudo title=:dir()>:dir()</a> pseudo-class does not select based on stylistic
	states—for example, the CSS <a class=property data-link-type=propdesc href=http://dev.w3.org/csswg/css-writing-modes-3/#propdef-direction title=direction>direction</a> property does not affect
	whether it matches.

<p>The pseudo-class <a class=css data-link-type=maybe href=http://www.w3.org/html/wg/drafts/html/CR/disabled-elements.html#selector-ltr title=:dir(ltr)>:dir(ltr)</a> represents an element that</p>
	has a directionality of left-to-right (<code>ltr</code>). The
	pseudo-class <a class=css data-link-type=maybe href=http://www.w3.org/html/wg/drafts/html/CR/disabled-elements.html#selector-rtl title=:dir(rtl)>:dir(rtl)</a> represents an element that has
	a directionality of right-to-left (<code>rtl</code>). The argument to
	<a class=css data-link-type=maybe href=#dir-pseudo title=:dir()>:dir()</a> must be a single identifier, otherwise the selector
	is invalid. White space is optionally allowed between the identifier
	and the parentheses. Values other than <code>ltr</code> and
	<code>rtl</code> are not invalid, but do not match anything. (If a
	future markup spec defines other directionalities, then Selectors may
	be extended to allow corresponding values.)

<p>The difference between <span class=css data-link-type=maybe title=:dir(c)>:dir(C)</span> and ''[dir=C]''
	is that ''[dir=C]'' only performs a comparison against a given
	attribute on the element, while the <span class=css data-link-type=maybe title=:dir(c)>:dir(C)</span> pseudo-class
	uses the UAs knowledge of the document’s semantics to perform the
	comparison. For example, in HTML, the directionality of an element</p>
	inherits so that a child without a <code>dir</code> attribute will have
	the same directionality as its closest ancestor with a valid <code>dir</code>
	attribute. As another example, in HTML,
	an element that matches ''[dir=auto]'' will match either
	<a class=css data-link-type=maybe href=http://www.w3.org/html/wg/drafts/html/CR/disabled-elements.html#selector-ltr title=:dir(ltr)>:dir(ltr)</a> or <a class=css data-link-type=maybe href=http://www.w3.org/html/wg/drafts/html/CR/disabled-elements.html#selector-rtl title=:dir(rtl)>:dir(rtl)</a> depending on the resolved
	directionality of the elements as determined by its contents. <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>

<h3 class="heading settled heading" data-level=7.2 id=the-lang-pseudo><span class=secno>7.2 </span><span class=content>
The language pseudo-class <a class=css data-link-type=maybe href=#lang-pseudo title=:lang()>:lang()</a></span><a class=self-link href=#the-lang-pseudo></a></h3>

<p>If the document language specifies how the (human) content language of an
	element is determined, it is possible to write selectors that
	represent an element based on its language.
	The <dfn class=css-code data-dfn-type=selector data-export="" id=lang-pseudo>:lang()<a class=self-link href=#lang-pseudo></a></dfn> pseudo-class represents an element that
	is in one of the languages listed in its argument. It accepts
	a comma-separated list of one or more <a data-link-type=dfn href=#language-range title="language ranges">language ranges</a> as its
	argument. Each <dfn data-dfn-type=dfn data-noexport="" id=language-range>language range<a class=self-link href=#language-range></a></dfn> in <a class=css data-link-type=maybe href=#lang-pseudo title=:lang()>:lang()</a>
	must be a valid CSS <a href=http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier>identifier</a>
	<a data-biblio-type=normative data-link-type=biblio href=#css21 title=css21>[CSS21]</a>
	or consist of an asterisk (* U+002A) immediately followed by an identifier
	beginning with an ASCII hyphen (U+002D) for the selector to be valid.</p>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=language>language<a class=self-link href=#language></a></dfn> of an element is defined by the document language.
	For example, in HTML <a data-biblio-type=informative data-link-type=biblio href=#html401 title=html401>[HTML401]</a>, the <a data-link-type=dfn href=#language title=language>language</a> is determined by a</p>
	combination of the <code>lang</code> attribute, information from
	<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/document-metadata.html#meta title=meta>meta</a> elements, and possibly also the protocol (e.g.
	from HTTP headers). XML languages can use the <code>xml:lang</code>
	attribute to indicate language information for an element.

<p>The element’s <a data-link-type=dfn href=#language title=language>language</a> matches a <a data-link-type=dfn href=#language-range title="language range">language range</a> if
	the element’s <a data-link-type=dfn href=#language title=language>language</a> (normalized to BCP 47 syntax if necessary)
	matches the given <a data-link-type=dfn href=#language-range title="language range">language range</a> in an <var>extended filtering</var>
	operation per <a data-biblio-type=informative data-link-type=biblio href=#rfc4647 title=rfc4647>[RFC4647]</a> <cite>Matching of Language Tags</cite> (section 3.3.2).
	The matching is performed case-insensitively within the ASCII range.
	The <a data-link-type=dfn href=#language-range title="language range">language range</a> does not need to be a valid language code to
	perform this comparison.</p>

<p class=note>Note: It is recommended that
	documents and protocols indicate language using codes from BCP 47 <a data-biblio-type=informative data-link-type=biblio href=#bcp47 title=bcp47>[BCP47]</a></p>
	or its successor, and by means of <code>xml:lang</code> attributes in the
	case of XML-based documents <a data-biblio-type=informative data-link-type=biblio href=#xml10 title=xml10>[XML10]</a>. See <a href=http://www.w3.org/International/questions/qa-lang-2or3.html>
	"FAQ: Two-letter or three-letter language codes."</a>

	<div class=example>
		Examples:
		The two following selectors represent an HTML document that is in
		Belgian French or German. The two next selectors represent
		<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-q-element title=q>q</a> quotations in an arbitrary element in Belgian French
		or German.

		<pre>html:lang(fr-be)
html:lang(de)
:lang(fr-be) &gt; q
:lang(de) &gt; q
</pre>
	</div>

<p class=note>Note: One difference between <span class=css data-link-type=maybe title=:lang(c)>:lang(C)</span> and the ''|='' operator
	is that the ''|='' operator only performs a comparison against a given
	attribute on the element, while the <span class=css data-link-type=maybe title=:lang(c)>:lang(C)</span> pseudo-class
	uses the UAs knowledge of the document’s semantics to perform the
	comparison.</p>

	<div class=example>
		In this HTML example, only the BODY matches
		''[lang|=fr]'' (because it has a LANG attribute) but both
		the BODY and the P match <span class=css data-link-type=maybe title=:lang(fr)>:lang(fr)</span> (because both are in
		French). The P does not match the ''[lang|=fr]'' because it
		does not have a LANG attribute.

		<pre>&lt;body lang=fr&gt;
  &lt;p&gt;Je suis français.&lt;/p&gt;
&lt;/body&gt;
</pre>
	</div>

	<div class=example>
		Another difference between <span class=css data-link-type=maybe title=:lang(c)>:lang(C)</span> and the ''|='' operator
		is that <span class=css data-link-type=maybe title=:lang(c)>:lang(C)</span> performs implicit wildcard matching.

<p>For example, <span class=css data-link-type=maybe title=:lang(de-de)>:lang(de-DE)</span> will match all of <span class=css data-link-type=maybe title=de-de>de-DE</span>,
		<span class=css data-link-type=maybe title=de-de-1996>de-DE-1996</span>, <span class=css data-link-type=maybe title=de-latn-de>de-Latn-DE</span>, <span class=css data-link-type=maybe title=de-latf-de>de-Latf-DE</span>, <span class=css data-link-type=maybe title=de-latn-de-1996>de-Latn-DE-1996</span>,
		whereas of those ''[lang|=de-DE]<span class=css data-link-type=maybe title=" will only match "> will only match </span>de-DE'' and
		<span class=css data-link-type=maybe title=de-de-1996>de-DE-1996</span>.</p>

<p>To perform wildcard matching on the first subtag (the primary language),
		an asterisk must be used: <span class=css data-link-type=maybe title=*-ch>*-CH</span> will match all of <span class=css data-link-type=maybe title=de-ch>de-CH</span>,
		<span class=css data-link-type=maybe title=it-ch>it-CH</span>, <span class=css data-link-type=maybe title=fr-ch>fr-CH</span>, and <span class=css data-link-type=maybe title=rm-ch>rm-CH</span>.</p>

<p>Note that asterisks are not allowed anywhere else in <a class=css data-link-type=maybe href=#lang-pseudo title=:lang()>:lang()</a>'s
		language range syntax: they only have meaning, and are therefore only allowed,
		at the beginning.</p>
	</div>

<p class=note>Note: Wildcard language matching is new in Level 4.</p>


<h2 class="heading settled heading" data-level=8 id=location><span class=secno>8 </span><span class=content>
Location Pseudo-classes</span><a class=self-link href=#location></a></h2>

<h3 class="heading settled heading" data-level=8.1 id=the-any-link-pseudo><span class=secno>8.1 </span><span class=content>
The hyperlink pseudo-class: <a class=css data-link-type=maybe href=#any-link-pseudo title=:any-link>:any-link</a></span><a class=self-link href=#the-any-link-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=any-link-pseudo>:any-link<a class=self-link href=#any-link-pseudo></a></dfn> pseudo-class represents an element
	that acts as the source anchor of a hyperlink.</p>
	For example, in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>, any <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a>, <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/embedded-content-0.html#the-area-element title=area>area</a>, or <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/document-metadata.html#the-link-element title=link>link</a> elements with an <code>href</code> attribute
	are hyperlinks, and thus <a href=http://www.whatwg.org/html/selectors.html#selector-link>match <code>:any-link</code></a>.
	It matches an element if the element would match <a class=css data-link-type=maybe href=#link-pseudo title=:link>:link</a> or <a class=css data-link-type=maybe href=#visited-pseudo title=:visited>:visited</a>,
	equivalent to <span class=css data-link-type=maybe title=":matches(:link, :visited)">:matches(:link, :visited)</span>.


	<p class=issue id=issue-907dd942><a class=self-link href=#issue-907dd942></a>Any better name suggestions for this pseudo?

<h3 class="heading settled heading" data-level=8.2 id=link><span class=secno>8.2 </span><span class=content>
The link history pseudo-classes: <a class=css data-link-type=maybe href=#link-pseudo title=:link>:link</a> and <a class=css data-link-type=maybe href=#visited-pseudo title=:visited>:visited</a></span><a class=self-link href=#link></a></h3>

<p>User agents commonly display unvisited <a href=#the-any-link-pseudo>hyperlinks</a> differently from
	previously visited ones. Selectors
	provides the pseudo-classes <dfn class=css-code data-dfn-type=selector data-export="" id=link-pseudo>:link<a class=self-link href=#link-pseudo></a></dfn> and
	<dfn class=css-code data-dfn-type=selector data-export="" id=visited-pseudo>:visited<a class=self-link href=#visited-pseudo></a></dfn> to distinguish them:</p>

	<ul>
		<li>The <a class=css data-link-type=maybe href=#link-pseudo title=:link>:link</a> pseudo-class applies to links that have
		not yet been visited.
		<li>The <a class=css data-link-type=maybe href=#visited-pseudo title=:visited>:visited</a> pseudo-class applies once the link has
		been visited by the user.
	</ul>

<p>After some amount of time, user agents may choose to return a
	visited link to the (unvisited) ':link' state.</p>

<p>The two states are mutually exclusive.</p>

	<div class=example>
		The following selector represents links carrying class
		<code>footnote</code> and already visited:

<pre>.footnote:visited </pre>
	</div>

<p class=note>Note: It is possible for style sheet
	authors to abuse the :link and :visited pseudo-classes to determine
	which sites a user has visited without the user’s consent.</p>

<p>UAs may therefore treat all links as unvisited links, or implement
	other measures to preserve the user’s privacy while rendering visited
	and unvisited links differently.</p>


<h3 class="heading settled heading" data-level=8.3 id=the-target-pseudo><span class=secno>8.3 </span><span class=content>
The target pseudo-class <a class=css data-link-type=maybe href=#target-pseudo title=:target>:target</a></span><a class=self-link href=#the-target-pseudo></a></h3>

<p>Some URLs refer to a location within a resource. This kind of URL
	ends with a "number sign" (#) followed by an anchor
	identifier (called the fragment identifier).</p>

<p>URLs with fragment identifiers link to a certain element within the
	document, known as the target element. For instance, here is a URL</p>
	pointing to an anchor named <code>section_2</code> in an HTML
	document:

<pre>http://example.com/html/top.html#section_2 </pre>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=target-pseudo>:target<a class=self-link href=#target-pseudo></a></dfn> pseudo-class matches the target element of the document’s URL.
	If the document’s URL has no fragment identifier, then the document has no target element.</p>

	<div class=example>
		Example:

<pre>p.note:target </pre>

<p>This selector represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element of class</p>
		<code>note</code> that is the target element of the referring
		URL.
	</div>

	<div class=example>
		CSS example:
		Here, the <a class=css data-link-type=maybe href=#target-pseudo title=:target>:target</a> pseudo-class is used to make the
		target element red and place an image before it, if there is one:

		<pre>*:target { color : red }
*:target::before { content : url(target.png) }
</pre>
	</div>


<h3 class="heading settled heading" data-level=8.4 id=the-scope-pseudo><span class=secno>8.4 </span><span class=content>
The reference element pseudo-class <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a></span><a class=self-link href=#the-scope-pseudo></a></h3>

<p>In some contexts, selectors can be matched with an explicit set of <dfn data-dfn-type=dfn data-export="" id=scope-element title=":scope element">:scope elements<a class=self-link href=#scope-element></a></dfn>.
	This is is a (potentially empty) set of elements
	that provide a reference point for selectors to match against,</p>
	such as that specified by the <code>querySelector()</code> call in <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a>,
	or the parent element of a <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-style-element>scoped <code>&lt;style&gt;</code> element</a> in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>.

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=scope-pseudo>:scope<a class=self-link href=#scope-pseudo></a></dfn> pseudo-class represents any element that is a <a data-link-type=dfn href=#scope-element title=":scope element">:scope element</a>.
	If the <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a> are not explicitly specified,
	but the selector is <a data-link-type=dfn href=http://dev.w3.org/csswg/css-cascade-3/#scoped title=scoped>scoped</a> and the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a> is an element,
	then <a class=css data-link-type=maybe href=#scope-pseudo title=:scope>:scope</a> represents the <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a>;
	otherwise, it represents the root of the document
	(equivalent to <a class=css data-link-type=maybe href=#root-pseudo title=:root>:root</a>).
	Specifications intending for this pseudo-class to match specific elements
	rather than the document’s root element
	must define either a <a data-link-type=dfn href=#scoping-root title="scoping root">scoping root</a> (if using <a data-link-type=dfn href=#scope- title="scoped selectors">scoped selectors</a>) or an explicit set of <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>.</p>

<h2 class="heading settled heading" data-level=9 id=useraction-pseudos><span class=secno>9 </span><span class=content>
User Action Pseudo-classes</span><a class=self-link href=#useraction-pseudos></a></h2>

<p>Interactive user agents sometimes change the rendering in response to user actions.
	Selectors provides three pseudo-classes for the selection of an element the user is acting on.
	(In non-interactive user agents, these pseudo-classes are valid, but never match any element.)</p>

<p>These pseudo-classes are not mutually exclusive. An element may
	match several pseudo-classes at the same time.</p>

	<div class=example>
		Examples:

		<pre>a:link    /* unvisited links */
a:visited /* visited links */
a:hover   /* user hovers */
a:active  /* active links */
</pre>

<p>An example of combining dynamic pseudo-classes:</p>

		<pre>a:focus
a:focus:hover
</pre>

<p>The last selector matches <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-a-element title=a>a</a> elements that are in
		the pseudo-class :focus and in the pseudo-class :hover.</p>
	</div>

<p class=note>Note: The specifics of hit-testing,
	necessary to know when several of the pseudo-classes defined in this section apply,
	are not yet defined,
	but will be in the future.</p>

<h3 class="heading settled heading" data-level=9.1 id=the-hover-pseudo><span class=secno>9.1 </span><span class=content>
The pointer hover pseudo-class <a class=css data-link-type=maybe href=#hover-pseudo title=:hover>:hover</a></span><a class=self-link href=#the-hover-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=hover-pseudo>:hover<a class=self-link href=#hover-pseudo></a></dfn> pseudo-class applies
	while the user designates an element with a pointing device,
	but does not necessarily activate it.
	For example, a visual user agent could apply this pseudo-class
	when the cursor (mouse pointer) hovers over a box generated by the element.
	Interactive user agents that cannot detect hovering due to hardware limitations
	(e.g., a pen device that does not detect hovering)
	are still conforming.</p>

<p>The parent of an element that is <a class=css data-link-type=maybe href=#hover-pseudo title=:hover>:hover</a> is also in that state.</p>

<p>Host languages may define additional ways in which an element can match <a class=css data-link-type=maybe href=#hover-pseudo title=:hover>:hover</a>.</p>
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/forms.html#the-label-element title=label>label</a> element as <a href=http://www.whatwg.org/html/selectors.html#selector-hover>matching <code>:hover</code></a>
	when its labelled control is hovered.

<p class=note>Note: Since the ':hover' state can apply to
	an element because its child is designated by a pointing device, then it is
	possible for ':hover' to apply to an element that is not underneath
	the pointing device.</p>

<p>The <a class=css data-link-type=maybe href=#hover-pseudo title=:hover>:hover</a> pseudo-class can apply to any pseudo-element.</p>

<h3 class="heading settled heading" data-level=9.2 id=the-active-pseudo><span class=secno>9.2 </span><span class=content>
The activation pseudo-class <a class=css data-link-type=maybe href=#active-pseudo title=:active>:active</a></span><a class=self-link href=#the-active-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=active-pseudo>:active<a class=self-link href=#active-pseudo></a></dfn> pseudo-class applies while an element
	is being activated by the user. For example, between the times the
	user presses the mouse button and releases it. On systems with more
	than one mouse button, <a class=css data-link-type=maybe href=#active-pseudo title=:active>:active</a> applies only to the
	primary or primary activation button (typically the "left" mouse
	button), and any aliases thereof.</p>

<p>There may be document language or implementation specific limits on
	which elements can become <a class=css data-link-type=maybe href=#active-pseudo title=:active>:active</a>.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines a <a href=http://www.whatwg.org/html/selectors.html#selector-active>list of activatable elements</a>.</p>

<p>Selectors doesn’t define if the parent of an element that is
	':active' is also in that state.</p>

<p class=note>Note: An element can be both
	':visited' and ':active' (or ':link' and ':active').</p>

<h3 class="heading settled heading" data-level=9.3 id=the-focus-pseudo><span class=secno>9.3 </span><span class=content>
The input focus pseudo-class <a class=css data-link-type=maybe href=#focus-pseudo title=:focus>:focus</a></span><a class=self-link href=#the-focus-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=focus-pseudo>:focus<a class=self-link href=#focus-pseudo></a></dfn> pseudo-class applies while an element
	has the focus (accepts keyboard or mouse events, or other forms of
	input).</p>

<p>There may be document language or implementation specific limits on
	which elements can acquire <a class=css data-link-type=maybe href=#focus-pseudo title=:focus>:focus</a>.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines a <a href=http://www.whatwg.org/html/selectors.html#selector-active>list of activatable elements</a>.</p>

<h3 class="heading settled heading" data-level=9.4 id=drag-pseudos><span class=secno>9.4 </span><span class=content>
The drag-and-drop pseudo-class <a class=css data-link-type=maybe href=#selectordef-drop0 title=:drop>:drop</a> and <a class=css data-link-type=maybe href=#selectordef-drop title=:drop()>:drop()</a></span><a class=self-link href=#drag-pseudos></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-drop0>:drop<a class=self-link href=#selectordef-drop0></a></dfn> pseudo-class applies to all elements
	that are drop targets,
	as defined by the host language,
	while the user is “dragging”
	or otherwise conceptually carrying an item
	to be “dropped”.</p>
	For example, in HTML the <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/dnd.html#the-dropzone-attribute><code>dropzone</code></a> attribute
	specified that an element is a drop target.

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-drop>:drop()<a class=self-link href=#selectordef-drop></a></dfn> functional pseudo-class is identical to <a class=css data-link-type=maybe href=#selectordef-drop0 title=:drop>:drop</a>,
	but allows additional filters to be specified that can exclude some drop targets.
	Its syntax is:</p>

<pre class=prod>:drop( [ active || valid || invalid ]? ) </pre>

<p>The keywords have the following meanings:</p>

	<dl data-dfn-for=:drop() data-dfn-type=value>
		<dt><dfn class=css-code data-dfn-for=:drop() data-dfn-type=value data-export="" id=valuedef-active>active<a class=self-link href=#valuedef-active></a></dfn>
		<dd>
			The drop target is the current drop target for the drag operation.
			That is, if the user were to release the drag,
			it would be dropped onto this drop target.

		<dt><dfn class=css-code data-dfn-for=:drop() data-dfn-type=value data-export="" id=valuedef-valid>valid<a class=self-link href=#valuedef-valid></a></dfn>
		<dd>
			If the host language has a concept of “valid” and “invalid” drop targets,
			this only matches if the drop target is valid for the object currently being dragged.
			Otherwise, it matches all drop targets.

			For example, HTML’s <code>dropzone</code> attribute can specify that the drop target only accepts strings or files that are set to a given type.

		<dt><dfn class=css-code data-dfn-for=:drop() data-dfn-type=value data-export="" id=valuedef-invalid>invalid<a class=self-link href=#valuedef-invalid></a></dfn>
		<dd>
			If the host language has a concept of “valid” and “invalid” drop targets,
			this only matches if the drop target is invalid for the object currently being dragged.
			Otherwise, it matches nothing.
	</dl>

<p>Multiple keywords can be combined in the argument,
	representing only drop targets that satisfy all of the keywords.
	For example, <span class=css data-link-type=maybe title=":drop(valid active)">:drop(valid active)</span> will match the active drop target <em>if</em> it’s valid,
	but not if it’s invalid.</p>

<p>If no keywords are given in the argument,
	<a class=css data-link-type=maybe href=#selectordef-drop title=:drop()>:drop()</a> has the same meaning as <a class=css data-link-type=maybe href=#selectordef-drop0 title=:drop>:drop</a>
	- it matches every drop target.</p>

<h2 class="heading settled heading" data-level=10 id=time-pseudos><span class=secno>10 </span><span class=content>
Time-dimensional Pseudo-classes</span><a class=self-link href=#time-pseudos></a></h2>

<p>These pseudo-classes classify elements with respect to the
	currently-displayed or active position in some timeline, such as
	during speech rendering of a document, or during the display of
	a video using WebVTT to render subtitles.</p>

<p>CSS does not define this timeline;
	the host language must do so.
	If there is no timeline defined for an element,
	these pseudo-classes must not match the element.</p>

<h3 class="heading settled heading" data-level=10.1 id=the-current-pseudo><span class=secno>10.1 </span><span class=content>
The current-element pseudo-class <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a></span><a class=self-link href=#the-current-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=current-pseudo>:current<a class=self-link href=#current-pseudo></a></dfn> pseudo-class represents the
	element, or an ancestor of the element, that is currently being displayed.</p>

<p>Its alternate form <dfn class=css-code data-dfn-type=selector data-export="" id=selectordef-current>:current()<a class=self-link href=#selectordef-current></a></dfn>, like <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>,
	takes a list of <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a> as its argument: it represents the
	<a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element that matches the argument or, if that does
	not match, the innermost ancestor of the <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element
	that does. (If neither the <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element nor its ancestors
	match the argument, then the selector does not represent anything.)</p>

	<div class=example>
		For example, the following rule will highlight whichever paragraph
		or list item is being read aloud in a speech rendering of the document:

		<pre>:current(p, li, dt, dd) {
  background: yellow;
}
</pre>
	</div>

<h3 class="heading settled heading" data-level=10.2 id=the-past-pseudo><span class=secno>10.2 </span><span class=content>
The past-element pseudo-class <a class=css data-link-type=maybe href=#past-pseudo title=:past>:past</a></span><a class=self-link href=#the-past-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=past-pseudo>:past<a class=self-link href=#past-pseudo></a></dfn> pseudo-class represents any element that is
	defined to occur entirely prior to a <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element.
	For example, the WebVTT spec defines the <a class=css data-link-type=maybe href=#past-pseudo title=:past>:past</a> pseudo-class <a href=http://dev.w3.org/html5/webvtt/#the-past-and-future-pseudo-classes>relative to the current playback position of a media element</a>.
	If a time-based order of elements is not defined by the document language,
	then this represents any element that is a (possibly indirect) previous
	sibling of a <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element.</p>

<h3 class="heading settled heading" data-level=10.3 id=the-future-pseudo><span class=secno>10.3 </span><span class=content>
The future-element pseudo-class <a class=css data-link-type=maybe href=#future-pseudo title=:future>:future</a></span><a class=self-link href=#the-future-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=future-pseudo>:future<a class=self-link href=#future-pseudo></a></dfn> pseudo-class represents any element that is
	defined to occur entirely after a <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element.
	For example, the WebVTT spec defines the <a class=css data-link-type=maybe href=#future-pseudo title=:future>:future</a> pseudo-class <a href=http://dev.w3.org/html5/webvtt/#the-past-and-future-pseudo-classes>relative to the current playback position of a media element</a>.
	If a time-based order of elements is not defined by the document language,
	then this represents any element that is a (possibly indirect) next
	sibling of a <a class=css data-link-type=maybe href=#current-pseudo title=:current>:current</a> element.</p>


<h2 class="heading settled heading" data-level=11 id=input-pseudos><span class=secno>11 </span><span class=content>
The Input Pseudo-classes</span><a class=self-link href=#input-pseudos></a></h2>

<p>The pseudo-classes in this section mostly apply to elements that take user input,
	such as HTML’s <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/forms.html#the-input-element title=input>input</a> element.</p>

<h3 class="heading settled heading" data-level=11.1 id=input-states><span class=secno>11.1 </span><span class=content>
Input Control States</span><a class=self-link href=#input-states></a></h3>

<h4 class="heading settled heading" data-level=11.1.1 id=enableddisabled><span class=secno>11.1.1 </span><span class=content>
The <a class=css data-link-type=maybe href=#enabled-pseudo title=:enabled>:enabled</a> and <a class=css data-link-type=maybe href=#disabled-pseudo title=:disabled>:disabled</a> pseudo-classes</span><a class=self-link href=#enableddisabled></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=enabled-pseudo>:enabled<a class=self-link href=#enabled-pseudo></a></dfn> pseudo-class represents user interface elements
	that are in an enabled state; such elements have a corresponding disabled
	state.</p>

<p>Conversely, the <dfn class=css-code data-dfn-type=selector data-export="" id=disabled-pseudo>:disabled<a class=self-link href=#disabled-pseudo></a></dfn> pseudo-class represents user
	interface elements that are in a disabled state; such elements have a
	corresponding enabled state.</p>

<p>What constitutes an enabled state, a disabled state, and a user interface
	element is host-language-dependent. In a typical document most elements will be
	neither <a class=css data-link-type=maybe href=#enabled-pseudo title=:enabled>:enabled</a> nor <a class=css data-link-type=maybe href=#disabled-pseudo title=:disabled>:disabled</a>.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines <a href=http://www.whatwg.org/html/selectors.html#selector-enabled>non-disabled interactive elements</a> to be <a class=css data-link-type=maybe href=#enabled-pseudo title=:enabled>:enabled</a>,
	and any such elements that are <a href=http://www.whatwg.org/html/selectors.html#selector-disabled>explicitly disabled</a> to be <a class=css data-link-type=maybe href=#disabled-pseudo title=:disabled>:disabled</a>.</p>

<p class=note>Note: CSS properties that might affect a user’s ability
	to interact with a given user interface element do not affect whether it
	matches <a class=css data-link-type=maybe href=#enabled-pseudo title=:enabled>:enabled</a> or <a class=css data-link-type=maybe href=#disabled-pseudo title=:disabled>:disabled</a>; e.g., the
	<a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visuren.html#propdef-display title=display>display</a> and <a class=property data-link-type=propdesc href=http://www.w3.org/TR/CSS21/visufx.html#propdef-visibility title=visibility>visibility</a> properties have no effect
	on the enabled/disabled state of an element.</p>

<h4 class="heading settled heading" data-level=11.1.2 id=rw-pseudos><span class=secno>11.1.2 </span><span class=content>
The mutability pseudo-classes <a class=css data-link-type=maybe href=#read-only-pseudo title=:read-only>:read-only</a> and <a class=css data-link-type=maybe href=#read-write-pseudo title=:read-write>:read-write</a></span><a class=self-link href=#rw-pseudos></a></h4>

<p>An element matches <dfn class=css-code data-dfn-type=selector data-export="" id=read-write-pseudo>:read-write<a class=self-link href=#read-write-pseudo></a></dfn> if it is user-alterable,
	as defined by the host language.
	Otherwise, it is <dfn class=css-code data-dfn-type=selector data-export="" id=read-only-pseudo>:read-only<a class=self-link href=#read-only-pseudo></a></dfn>.</p>

	For example, in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> a <a href=http://www.whatwg.org/html/selectors.html#selector-read-only>non-disabled non-readonly <code>&lt;input&gt;</code> element</a> is <a class=css data-link-type=maybe href=#read-write-pseudo title=:read-write>:read-write</a>,
	as is any element with the <code>contenteditable</code> attribute set to the true state.

<h4 class="heading settled heading" data-level=11.1.3 id=placeholder><span class=secno>11.1.3 </span><span class=content>
The placeholder-shown pseudo-class <a class=css data-link-type=maybe href=#placeholder-shown-pseudo title=:placeholder-shown>:placeholder-shown</a></span><a class=self-link href=#placeholder></a></h4>

<p>Input elements can sometimes show placeholder text
	as a hint to the user on what to type in.</p>
	See, for example, the <code>placeholder</code> attribute in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>.
	The <dfn class=css-code data-dfn-type=selector data-export="" id=placeholder-shown-pseudo>:placeholder-shown<a class=self-link href=#placeholder-shown-pseudo></a></dfn> pseudo-class
	matches an input element that is showing such placeholder text.

<h4 class="heading settled heading" data-level=11.1.4 id=the-default-pseudo><span class=secno>11.1.4 </span><span class=content>
The default-option pseudo-class <a class=css data-link-type=maybe href=#default-pseudo title=:default>:default</a></span><a class=self-link href=#the-default-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=default-pseudo>:default<a class=self-link href=#default-pseudo></a></dfn> pseudo-class applies to the one or more UI elements
	that are the default among a set of similar elements.  Typically applies to
	context menu items, buttons and select lists/menus.</p>

<p>One example is the default submit button among a set of buttons.
	Another example is the default option from a popup menu.
	In a select-many group (such as for pizza toppings), multiple elements can match <a class=css data-link-type=maybe href=#default-pseudo title=:default>:default</a>.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines that <a class=css data-link-type=maybe href=#default-pseudo title=:default>:default</a> matches
	<a href=http://www.whatwg.org/html/selectors.html#selector-default>the “default button” in a form,</a></p><a href=http://www.whatwg.org/html/selectors.html#selector-default>
	the initially-selected <code>&lt;option&gt;</code>(s) in a <code>&lt;select&gt;</code>,
	and a few other elements.</a>

<h3 class="heading settled heading" data-level=11.2 id=input-value-states><span class=secno>11.2 </span><span class=content>
Input Value States</span><a class=self-link href=#input-value-states></a></h3>

<h4 class="heading settled heading" data-level=11.2.1 id=checked><span class=secno>11.2.1 </span><span class=content>
The selected-option pseudo-class <a class=css data-link-type=maybe href=#checked-pseudo title=:checked>:checked</a></span><a class=self-link href=#checked></a></h4>

<p>Radio and checkbox elements can be toggled by the user. Some menu
	items are "checked" when the user selects them. When such elements are
	toggled "on" the <dfn class=css-code data-dfn-type=selector data-export="" id=checked-pseudo>:checked<a class=self-link href=#checked-pseudo></a></dfn> pseudo-class applies.</p>
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines that <a href=http://www.whatwg.org/html/selectors.html#selector-checked>checked checkboxes, radio buttons, and selected <code>&lt;option&gt;</code> elements</a> match <a class=css data-link-type=maybe href=#checked-pseudo title=:checked>:checked</a>.

<p>While the <a class=css data-link-type=maybe href=#checked-pseudo title=:checked>:checked</a> pseudo-class is dynamic in nature,
	and can altered by user action,
	since it can also be based on the presence of semantic attributes in the document</p>
	(such as the <code>selected</code> and <code>checked</code> attributes in <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>),
	it applies to all media.

	<div class=example>
		An unchecked checkbox can be selected by using the negation
		pseudo-class:

<pre>:not(:checked)</pre>
	</div>

<h4 class="heading settled heading" data-level=11.2.2 id=indeterminate><span class=secno>11.2.2 </span><span class=content>
The indeterminate-value pseudo-class <a class=css data-link-type=maybe href=#indetermine-pseudo title=:indeterminate>:indeterminate</a></span><a class=self-link href=#indeterminate></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=indetermine-pseudo>:indeterminate<a class=self-link href=#indetermine-pseudo></a></dfn> pseudo-class applies to UI elements whose
	value is in an indeterminate state.
	For example, radio and checkbox elements can be toggled between checked and unchecked states,
	but are sometimes in an indeterminate state, neither checked nor unchecked.
	Similarly a progress meter can be in an indeterminate state when the percent completion is unknown.
	For example, <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a> defines how <a href=http://www.whatwg.org/html/selectors.html#selector-indeterminate>checkboxes</a> can be made to match <a class=css data-link-type=maybe href=#indetermine-pseudo title=:indeterminate>:indeterminate</a>.</p>

<p>Like the <a class=css data-link-type=maybe href=#checked-pseudo title=:checked>:checked</a> pseudo-class, <a class=css data-link-type=maybe href=#indetermine-pseudo title=:indeterminate>:indeterminate</a>
	applies to all media. Components of a radio-group initialized with no
	pre-selected choice, for example, would be <a class=css data-link-type=maybe href=#indetermine-pseudo title=:indeterminate>:indeterminate</a>
	even in a static display.</p>

<h3 class="heading settled heading" data-level=11.3 id=ui-validity><span class=secno>11.3 </span><span class=content>
Input Value-checking</span><a class=self-link href=#ui-validity></a></h3>

<h4 class="heading settled heading" data-level=11.3.1 id=validity-pseudos><span class=secno>11.3.1 </span><span class=content>
The validity pseudo-classes: <a class=css data-link-type=maybe href=#valid-pseudo title=:valid>:valid</a> and <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a></span><a class=self-link href=#validity-pseudos></a></h4>

<p>An element is <dfn class=css-code data-dfn-type=selector data-export="" id=valid-pseudo>:valid<a class=self-link href=#valid-pseudo></a></dfn>
	or <dfn class=css-code data-dfn-type=selector data-export="" id=invalid-pseudo>:invalid<a class=self-link href=#invalid-pseudo></a></dfn>
	when its contents or value is, respectively,
	valid or invalid with respect to data validity semantics defined by the document language
	(e.g. <a data-biblio-type=informative data-link-type=biblio href=#xforms11 title=xforms11>[XFORMS11]</a> or <a data-biblio-type=informative data-link-type=biblio href=#html5 title=html5>[HTML5]</a>).
	An element which lacks data validity semantics is neither <a class=css data-link-type=maybe href=#valid-pseudo title=:valid>:valid</a> nor <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a>.</p>

<p class=note>Note: There is a difference between an element which has no constraints,
	and thus would always be <a class=css data-link-type=maybe href=#valid-pseudo title=:valid>:valid</a>,
	and one which has no data validity semantics at all,
	and thus is neither <a class=css data-link-type=maybe href=#valid-pseudo title=:valid>:valid</a> nor <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a>.</p>
	In HTML, for example, an <code>&lt;input type="text"&gt;</code> element may have no constraints,
	but a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element has no validity semantics at all,
	and so it never matches either of these pseudo-classes.

<h4 class="heading settled heading" data-level=11.3.2 id=range-pseudos><span class=secno>11.3.2 </span><span class=content>
The range pseudo-classes <a class=css data-link-type=maybe href=#in-range-pseudo title=:in-range>:in-range</a> and <a class=css data-link-type=maybe href=#out-of-range-pseudo title=:out-of-range>:out-of-range</a></span><a class=self-link href=#range-pseudos></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=in-range-pseudo>:in-range<a class=self-link href=#in-range-pseudo></a></dfn> and
	<dfn class=css-code data-dfn-type=selector data-export="" id=out-of-range-pseudo>:out-of-range<a class=self-link href=#out-of-range-pseudo></a></dfn> pseudo-classes
	apply only to elements that have range limitations.  An element is
	<a class=css data-link-type=maybe href=#in-range-pseudo title=:in-range>:in-range</a> or <a class=css data-link-type=maybe href=#out-of-range-pseudo title=:out-of-range>:out-of-range</a> when the value
	that the element is bound to is in range or out of range with respect
	to its range limits as defined by the document language. An element
	that lacks data range limits or is not a form control is neither
	<a class=css data-link-type=maybe href=#in-range-pseudo title=:in-range>:in-range</a> nor <a class=css data-link-type=maybe href=#out-of-range-pseudo title=:out-of-range>:out-of-range</a>.
	E.g. a slider element with a value of 11 presented as a slider control
	that only represents the values from 1-10 is :out-of-range.  Another
	example is a menu element with a value of "E" that happens to be
	presented in a popup menu that only has choices "A", "B" and "C".</p>

<h4 class="heading settled heading" data-level=11.3.3 id=opt-pseudos><span class=secno>11.3.3 </span><span class=content>
The optionality pseudo-classes <a class=css data-link-type=maybe href=#required-pseudo title=:required>:required</a> and <a class=css data-link-type=maybe href=#optional-pseudo title=:optional>:optional</a></span><a class=self-link href=#opt-pseudos></a></h4>

<p>A form element is <dfn class=css-code data-dfn-type=selector data-export="" id=required-pseudo>:required<a class=self-link href=#required-pseudo></a></dfn> or
	<dfn class=css-code data-dfn-type=selector data-export="" id=optional-pseudo>:optional<a class=self-link href=#optional-pseudo></a></dfn>
	if a value for it is, respectively, required or optional before the
	form it belongs to can be validly submitted. Elements that are not
	form elements are neither required nor optional.</p>

<h4 class="heading settled heading" data-level=11.3.4 id=user-pseudos><span class=secno>11.3.4 </span><span class=content>
The user-interaction pseudo-class <a class=css data-link-type=maybe href=#user-error-pseudo title=:user-error>:user-error</a></span><a class=self-link href=#user-pseudos></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=user-error-pseudo>:user-error<a class=self-link href=#user-error-pseudo></a></dfn> pseudo-class
	represents an input element with incorrect input, but only
	<em>after</em> the user has significantly interacted with it.
	The <a class=css data-link-type=maybe href=#user-error-pseudo title=:user-error>:user-error</a> pseudo-class
	must match an <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a>, <a class=css data-link-type=maybe href=#out-of-range-pseudo title=:out-of-range>:out-of-range</a>, or empty-but-<a class=css data-link-type=maybe href=#required-pseudo title=:required>:required</a> form element
	between the time the user has attempted to submit the form
	and before the user has interacted again with the form element.
	User-agents may allow it to match such elements at other times,
	as would be appropriate for highlighting an error to the user.
	For example, a UA may choose to have <a class=css data-link-type=maybe href=#user-error-pseudo title=:user-error>:user-error</a> match
	an <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a> element once the user has typed some text into it
	and changed the focus to another element,
	and to stop matching only after the user has successfully corrected the input.</p>

	<div class=example>
		For example, the input in the following document fragment
		would match <a class=css data-link-type=maybe href=#invalid-pseudo title=:invalid>:invalid</a> as soon as the page is loaded
		(because it the initial value violates the max-constraint),
		but it won’t match <a class=css data-link-type=maybe href=#user-error-pseudo title=:user-error>:user-error</a> until the user significantly interacts with the element,
		or attempts to submit the form it’s part of.

		<pre>&lt;form&gt;
  &lt;label&gt;
    Volume:
    &lt;input name='vol' type=number min=0 max=10 value=11&gt;
  &lt;/label&gt;
  ...
&lt;/form&gt;
</pre>
	</div>



<p class=issue id=issue-30fdb3b6><a class=self-link href=#issue-30fdb3b6></a>Issue: Look into :-moz-ui-valid as well.</p>

<h2 class="heading settled heading" data-level=12 id=structural-pseudos><span class=secno>12 </span><span class=content>
Tree-Structural pseudo-classes</span><a class=self-link href=#structural-pseudos></a></h2>

<p>Selectors introduces the concept of <dfn data-dfn-type=dfn data-noexport="" id=structural-pseudo-classes>structural pseudo-classes<a class=self-link href=#structural-pseudo-classes></a></dfn>
	to permit selection based on extra information that lies in
	the document tree but cannot be represented by other simple selectors or
	combinators.</p>

<p>Standalone text and other non-element
	nodes are not counted when calculating the position of an element in the list
	of children of its parent. When calculating the position of an element in
	the list of children of its parent, the index numbering starts at 1.</p>


<h3 class="heading settled heading" data-level=12.1 id=the-root-pseudo><span class=secno>12.1 </span><span class=content>
<a class=css data-link-type=maybe href=#root-pseudo title=:root>:root</a> pseudo-class</span><a class=self-link href=#the-root-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=root-pseudo>:root<a class=self-link href=#root-pseudo></a></dfn> pseudo-class represents an element that is
	the root of the document.</p>

<p>For example, in a DOM document,
	the <a class=css data-link-type=maybe href=#root-pseudo title=:root>:root</a> pseudo-class matches the root element of the <a class=idl-code data-link-type=interface href=http://dom.spec.whatwg.org/#document title=document>Document</a> object.
	In HTML, this would be the <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/semantics.html#the-html-element title=html>html</a> element
	(unless scripting has been used to modify the document).</p>

<h3 class="heading settled heading" data-level=12.2 id=the-empty-pseudo><span class=secno>12.2 </span><span class=content>
<a class=css data-link-type=maybe href=#empty-pseudo title=:empty>:empty</a> pseudo-class</span><a class=self-link href=#the-empty-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=empty-pseudo>:empty<a class=self-link href=#empty-pseudo></a></dfn> pseudo-class represents an element that has no children at all.
	In terms of the document tree,
	only element nodes and content nodes
	(such as <a data-biblio-type=informative data-link-type=biblio href=#dom title=dom>[DOM]</a> text nodes, and entity references)
	whose data has a non-zero length must be considered as affecting emptiness;
	comments, processing instructions, and other nodes
	must not affect whether an element is considered empty or not.</p>

	<div class=example>
		Examples:
		<span class=css data-link-type=maybe title=p:empty>p:empty</span> is a valid representation of the following fragment:

<pre>&lt;p&gt;&lt;/p&gt;</pre>

<p><span class=css data-link-type=maybe title=foo:empty>foo:empty</span> is not a valid representation for the
		following fragments:</p>

<pre>&lt;foo&gt;bar&lt;/foo&gt;</pre>

<pre>&lt;foo&gt;&lt;bar&gt;bla&lt;/bar&gt;&lt;/foo&gt;</pre>

<pre>&lt;foo&gt;this is not &lt;bar&gt;:empty&lt;/bar&gt;&lt;/foo&gt;</pre>
	</div>

<h3 class="heading settled heading" data-level=12.3 id=the-blank-pseudo><span class=secno>12.3 </span><span class=content>
<a class=css data-link-type=maybe href=#blank-pseudo title=:blank>:blank</a> pseudo-class</span><a class=self-link href=#the-blank-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=blank-pseudo>:blank<a class=self-link href=#blank-pseudo></a></dfn> pseudo-class is like the <a class=css data-link-type=maybe href=#empty-pseudo title=:empty>:empty</a> pseudo-class,
	except that it additionally matches elements that only contain
	<a href=http://www.w3.org/TR/css3-text/#white-space-rules>code points affected by whitespace processing</a>. <a data-biblio-type=normative data-link-type=biblio href=#css3text title=css3text>[CSS3TEXT]</a></p>

	<div class=example>
		For example, the following element matches <a class=css data-link-type=maybe href=#blank-pseudo title=:blank>:blank</a>,
		but not <a class=css data-link-type=maybe href=#empty-pseudo title=:empty>:empty</a>,
		because it contains at least one linebreak, and possibly other whitespace:

<pre>&lt;p&gt;<br>&lt;/p&gt;</pre>
	</div>

<p class=issue id=issue-563b06fc><a class=self-link href=#issue-563b06fc></a>Issue: We don’t like the name <a class=css data-link-type=maybe href=#blank-pseudo title=:blank>:blank</a>—<wbr>it doesn’t clearly convey a difference from <a class=css data-link-type=maybe href=#empty-pseudo title=:empty>:empty</a>.
	Moz uses <span class=css data-link-type=maybe title=:-moz-whitespace-only>:-moz-whitespace-only</span>,
	which is clear but a little wordy.
	Any other suggestions?</p>


<h3 class="heading settled heading" data-level=12.4 id=child-index><span class=secno>12.4 </span><span class=content>
Child-indexed Pseudo-classes</span><a class=self-link href=#child-index></a></h3>

<p>The pseudo-classes defined in this section select elements
	based on their index in their list of siblings.</p>

<h4 class="heading settled heading" data-level=12.4.1 id=the-nth-child-pseudo><span class=secno>12.4.1 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-child-pseudo title=:nth-child()>:nth-child()</a> pseudo-class</span><a class=self-link href=#the-nth-child-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-child-pseudo title=:nth-child()>:nth-child(<var>An+B</var> [of <var>sel</var>]? )<a class=self-link href=#nth-child-pseudo></a></dfn>
	pseudo-class notation represents an element that has <var>An+B</var>-1 siblings
	<em>before</em> it in the document tree
	which match the <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> <var>sel</var>.</p>

<p>The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.
	If <var>sel</var> is omitted,
	it defaults to <span class=css data-link-type=maybe title=*>*</span>.</p>

<p>For example, this selector could address every other row in a table,
	and could be used to alternate the color of paragraph text in a cycle of four.</p>

	<div class=example>
		Examples:

		<pre>:nth-child(even)   /* represents the 2nd, 4th, 6th, etc elements
:nth-child(10n-1)  /* represents the 9th, 19th, 29th, etc elements */
:nth-child(10n+9)  /* Same */
:nth-child(10n+-1) /* Syntactically invalid, and would be ignored */
</pre>
	</div>

	<div class=example>
		By passing a selector argument,
		we can select the Nth element that matches that selector.
		For example, the following selector matches the first three “important” list items,
		denoted by the <span class=css data-link-type=maybe title=.important>.important</span> class:

<pre>li:nth-child(-n+3 of .important)</pre>

<p>Note that this is different from moving the selector outside of the function, like:</p>

<pre>li.important:nth-child(-n+3)</pre>

<p>This selector instead just selects the first three list items
		if they also have the <span class=css data-link-type=maybe title=.important>.important</span> class.</p>
	</div>

<h4 class="heading settled heading" data-level=12.4.2 id=the-nth-last-child-pseudo><span class=secno>12.4.2 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-last-child-pseudo title=:nth-last-child()>:nth-last-child()</a> pseudo-class</span><a class=self-link href=#the-nth-last-child-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-last-child-pseudo title=:nth-last-child()>:nth-last-child(<var>An+B</var> [of <var>sel</var>]? )<a class=self-link href=#nth-last-child-pseudo></a></dfn>
	pseudo-class notation represents an element that has <var>An+B</var>-1 siblings
	<em>after</em> it in the document tree
	which match the <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> <var>sel</var>.</p>

<p>The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.
	If <var>sel</var> is omitted,
	it defaults to <span class=css data-link-type=maybe title=*>*</span>.</p>

	<div class=example>
		Examples:

		<pre>tr:nth-last-child(-n+2)    /* represents the two last rows of an HTML table */

foo:nth-last-child(odd)    /* represents all odd foo elements in their parent element,
                              counting from the last one */
</pre>
	</div>

<h4 class="heading settled heading" data-level=12.4.3 id=the-first-child-pseudo><span class=secno>12.4.3 </span><span class=content>
<a class=css data-link-type=maybe href=#first-child-pseudo title=:first-child>:first-child</a> pseudo-class</span><a class=self-link href=#the-first-child-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=first-child-pseudo>:first-child<a class=self-link href=#first-child-pseudo></a></dfn> pseudo-class
	represents an element that precedes all of its siblings (if any).
	Same as <span class=css data-link-type=maybe title=:nth-child(1)>:nth-child(1)</span>.</p>

	<div class=example>
		Examples:
		The following selector represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element that is
		the first child of a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-div-element title=div>div</a> element:

<pre>div &gt; p:first-child</pre>

		This selector can represent the <code>p</code> inside the
		<code>div</code> of the following fragment:

		<pre>&lt;p&gt; The last P before the note.&lt;/p&gt;
&lt;div class="note"&gt;
   &lt;p&gt; The first P inside the note.&lt;/p&gt;
&lt;/div&gt;
</pre>

		but cannot represent the second <code>p</code> in the following fragment:

		<pre>&lt;p&gt; The last P before the note.&lt;/p&gt;
&lt;div class="note"&gt;
   &lt;h2&gt; Note &lt;/h2&gt;
   &lt;p&gt; The first P inside the note.&lt;/p&gt;
&lt;/div&gt;
</pre>

<p>The following two selectors are usually equivalent:</p>

		<pre>* &gt; a:first-child /* a is first child of any element */
a:first-child /* Same (assuming a is not the root element) */
</pre>
	</div>

<h4 class="heading settled heading" data-level=12.4.4 id=the-last-child-pseudo><span class=secno>12.4.4 </span><span class=content>
<a class=css data-link-type=maybe href=#last-child-pseudo title=:last-child>:last-child</a> pseudo-class</span><a class=self-link href=#the-last-child-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=last-child-pseudo>:last-child<a class=self-link href=#last-child-pseudo></a></dfn> pseudo-class
	represents an element that follows all of its siblings (if any).
	Same as <span class=css data-link-type=maybe title=:nth-last-child(1)>:nth-last-child(1)</span>.</p>

	<div class=example>
		Example:
		The following selector represents a list item <code>li</code> that
		is the last child of an ordered list <code>ol</code>.

<pre>ol &gt; li:last-child</pre>
	</div>

<h4 class="heading settled heading" data-level=12.4.5 id=the-only-child-pseudo><span class=secno>12.4.5 </span><span class=content>
<a class=css data-link-type=maybe href=#only-child-pseudo title=:only-child>:only-child</a> pseudo-class</span><a class=self-link href=#the-only-child-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=only-child-pseudo>:only-child<a class=self-link href=#only-child-pseudo></a></dfn> pseudo-class
	represents an element that has no siblings.
	Same as <span class=css data-link-type=maybe title=:first-child:last-child>:first-child:last-child</span>
	or <span class=css data-link-type=maybe title=:nth-child(1):nth-last-child(1)>:nth-child(1):nth-last-child(1)</span>,
	but with a lower specificity.</p>


<h3 class="heading settled heading" data-level=12.5 id=typed-child-index><span class=secno>12.5 </span><span class=content>
Typed Child-indexed Pseudo-classes</span><a class=self-link href=#typed-child-index></a></h3>

<p>The pseudo-elements in this section are similar to the <a href=#child-index>Child Index Pseudo-classes</a>,
	but they resolve based on an element’s index <strong>among elements of the same <a href=#type-selectors>type (tag name)</a></strong> in their sibling list.</p>

<h4 class="heading settled heading" data-level=12.5.1 id=the-nth-of-type-pseudo><span class=secno>12.5.1 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-of-type-pseudo title=:nth-of-type()>:nth-of-type()</a> pseudo-class</span><a class=self-link href=#the-nth-of-type-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-of-type-pseudo title=:nth-of-type()>:nth-of-type(<var>An+B</var>)<a class=self-link href=#nth-of-type-pseudo></a></dfn> pseudo-class notation
	represents an element that has <var>An+B</var>-1 siblings
	with the same <a href=http://www.w3.org/TR/css3-namespace/#expanded-name>expanded element name</a>
	<em>before</em> it in the document tree.
	The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.</p>

	<div class=example>
		CSS example:
		This allows an author to alternate the position of floated images:

		<pre>img:nth-of-type(2n+1) { float: right; }
img:nth-of-type(2n) { float: left; }
</pre>
	</div>

<p class=note>Note: If the type of the element is known ahead of time,
	this pseudo-class is equivalent to using <a class=css data-link-type=maybe href=#nth-child-pseudo title=:nth-child()>:nth-child()</a> with a type selector.
	That is, <span class=css data-link-type=maybe title=img:nth-of-type(2)>img:nth-of-type(2)</span>
	is equivalent to <span class=css data-link-type=maybe title="*:nth-child(2 of img)">*:nth-child(2 of img)</span>.</p>


<h4 class="heading settled heading" data-level=12.5.2 id=the-nth-last-of-type-pseudo><span class=secno>12.5.2 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-last-of-type title=:nth-last-of-type()>:nth-last-of-type()</a> pseudo-class</span><a class=self-link href=#the-nth-last-of-type-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-last-of-type title=:nth-last-of-type()>:nth-last-of-type(<var>An+B</var>)<a class=self-link href=#nth-last-of-type></a></dfn> pseudo-class notation
	represents an element that has <var>An+B</var>-1 siblings
	with the same <a href=http://www.w3.org/TR/css3-namespace/#expanded-name>expanded element name</a>
	<em>after</em> it in the document tree.
	The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.</p>

	<div class=example>
		Example:
		To represent all <code>h2</code> children of an XHTML
		<code>body</code> except the first and last, one could use the
		following selector:

<pre>body &gt; h2:nth-of-type(n+2):nth-last-of-type(n+2) </pre>

<p>In this case, one could also use <a class=css data-link-type=maybe href=#negation-pseudo title=:not()>:not()</a>, although the
		selector ends up being just as long:</p>

<pre>body &gt; h2:not(:first-of-type):not(:last-of-type) </pre>
	</div>

<h4 class="heading settled heading" data-level=12.5.3 id=the-first-of-type-pseudo><span class=secno>12.5.3 </span><span class=content>
<a class=css data-link-type=maybe href=#first-of-type-pseudo title=:first-of-type>:first-of-type</a> pseudo-class</span><a class=self-link href=#the-first-of-type-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=first-of-type-pseudo>:first-of-type<a class=self-link href=#first-of-type-pseudo></a></dfn> pseudo-class
	represents an element that is the first sibling
	with the same <a href=http://www.w3.org/TR/css3-namespace/#expanded-name>expanded element name</a>
	in its sibling list.
	Same as <span class=css data-link-type=maybe title=:nth-of-type(1)>:nth-of-type(1)</span>.</p>

	<div class=example>
		Example:
		The following selector represents a definition title
		<code>dt</code> inside a definition list <code>dl</code>, this
		<code>dt</code> being the first of its type in the list of children of
		its parent element.

<pre>dl dt:first-of-type</pre>

		It is a valid description for the first two <code>dt</code>
		elements in the following example but not for the third one:

		<pre>&lt;dl&gt;
  &lt;dt&gt;gigogne&lt;/dt&gt;
  &lt;dd&gt;
    &lt;dl&gt;
      &lt;dt&gt;fusée&lt;/dt&gt;
      &lt;dd&gt;multistage rocket&lt;/dd&gt;
      &lt;dt&gt;table&lt;/dt&gt;
      &lt;dd&gt;nest of tables&lt;/dd&gt;
    &lt;/dl&gt;
  &lt;/dd&gt;
&lt;/dl&gt;
</pre>
	</div>

<h4 class="heading settled heading" data-level=12.5.4 id=the-last-of-type-pseudo><span class=secno>12.5.4 </span><span class=content>
<a class=css data-link-type=maybe href=#last-of-type-pseudo title=:last-of-type>:last-of-type</a> pseudo-class</span><a class=self-link href=#the-last-of-type-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=last-of-type-pseudo>:last-of-type<a class=self-link href=#last-of-type-pseudo></a></dfn> pseudo-class
	represents an element that is the last sibling
	with the same <a href=http://www.w3.org/TR/css3-namespace/#expanded-name>expanded element name</a>
	in its sibling list.
	Same as <span class=css data-link-type=maybe title=:nth-last-of-type(1)>:nth-last-of-type(1)</span>.</p>

	<div class=example>
		Example:
		The following selector represents the last data cell
		<code>td</code> of a table row <code>tr</code>.

<pre>tr &gt; td:last-of-type</pre>
	</div>

<h4 class="heading settled heading" data-level=12.5.5 id=the-only-of-type-pseudo><span class=secno>12.5.5 </span><span class=content>
<a class=css data-link-type=maybe href=#only-of-type-pseudo title=:only-of-type>:only-of-type</a> pseudo-class</span><a class=self-link href=#the-only-of-type-pseudo></a></h4>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=only-of-type-pseudo>:only-of-type<a class=self-link href=#only-of-type-pseudo></a></dfn> pseudo-class
	represents an element that has no siblings
	with the same <a href=http://www.w3.org/TR/css3-namespace/#expanded-name>expanded element name</a>.
	Same as <span class=css data-link-type=maybe title=:first-of-type:last-of-type>:first-of-type:last-of-type</span>
	or <span class=css data-link-type=maybe title=:nth-of-type(1):nth-last-of-type(1)>:nth-of-type(1):nth-last-of-type(1)</span>,
	but with a lower specificity.</p>



<h2 class="heading settled heading" data-level=13 id=combinators><span class=secno>13 </span><span class=content>
Combinators</span><a class=self-link href=#combinators></a></h2>

<h3 class="heading settled heading" data-level=13.1 id=descendant-combinators><span class=secno>13.1 </span><span class=content>
Descendant combinator (<code> </code>)</span><a class=self-link href=#descendant-combinators></a></h3>

<p>At times, authors may want selectors to describe an element that is
	the descendant of another element in the document tree (e.g., "an
	<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-em-element title=em>em</a> element that is contained within an <a data-link-type=element title=h1>H1</a> element").
	Descendant combinators express such a relationship. A
	<dfn data-dfn-type=dfn data-export="" id=descendant-combinator>descendant combinator<a class=self-link href=#descendant-combinator></a></dfn> is <a href=#whitespace>whitespace</a> that
	separates two <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>.  A selector of the form</p>
	<span class=css data-link-type=maybe title="a b">A B</span> represents an element <code>B</code> that is an
	arbitrary descendant of some ancestor element <code>A</code>.

	<div class=example>
		Examples:
		For example, consider the following selector:

<pre>h1 em</pre>

<p>It represents an <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/text-level-semantics.html#the-em-element title=em>em</a> element being the descendant of
		an <a data-link-type=element title=h1>h1</a> element. It is a correct and valid, but partial,
		description of the following fragment:</p>

		<pre>&lt;h1&gt;This &lt;span class="myclass"&gt;headline
is &lt;em&gt;very&lt;/em&gt; important&lt;/span&gt;&lt;/h1&gt;
</pre>

<p>The following selector:</p>

<pre>div * p</pre>

<p>represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element that is a grandchild or later
		descendant of a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-div-element title=div>div</a> element. Note the whitespace on
		either side of the "*" is not part of the universal selector; the</p>
		whitespace is a combinator indicating that the <code>div</code> must be the
		ancestor of some element, and that that element must be an ancestor
		of the <code>p</code>.
		The following selector, which combines descendant combinators and
		<a href=#attribute-selectors>attribute selectors</a>, represents an
		element that (1) has the <code>href</code> attribute set and (2) is
		inside a <code>p</code> that is itself inside a <code>div</code>:

<pre>div p *[href]</pre>
	</div>

<h3 class="heading settled heading" data-level=13.2 id=child-combinators><span class=secno>13.2 </span><span class=content>
Child combinator (<code>&gt;</code>)</span><a class=self-link href=#child-combinators></a></h3>

<p>A <dfn data-dfn-type=dfn data-export="" id=child-combinator>child combinator<a class=self-link href=#child-combinator></a></dfn> describes a childhood relationship
	between two elements. A child combinator is made of the</p>
	"greater-than sign" (U+003E, <code>&gt;</code>) code point and
	separates two <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>.

	<div class=example>
		Examples:
		The following selector represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element that is
		child of <code>body</code>:

<pre>body &gt; p</pre>

<p>The following example combines descendant combinators and child
		combinators.</p>

<pre>div ol&gt;li p</pre>
		

<p>It represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element that is a descendant of an
		<a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-li-element title=li>li</a> element; the <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-li-element title=li>li</a> element must be the
		child of an <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-ol-element title=ol>ol</a> element; the <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-ol-element title=ol>ol</a> element must</p>
		be a descendant of a <code>div</code>. Notice that the optional white
		space around the "&gt;" combinator has been left out.
	</div>

<p>For information on selecting the first child of an element,
	please see the section on the <a class=css data-link-type=maybe href=#first-child-pseudo title=:first-child>:first-child</a> pseudo-class above.</p>

<h3 class="heading settled heading" data-level=13.3 id=adjacent-sibling-combinators><span class=secno>13.3 </span><span class=content>
Next-sibling combinator (<code>+</code>)</span><a class=self-link href=#adjacent-sibling-combinators></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=next-sibling-combinator>next-sibling combinator<a class=self-link href=#next-sibling-combinator></a></dfn> is made of the “plus sign”</p>
	(U+002B, <code>+</code>) code point that separates two
	<a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>.
	The elements represented by the two <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>
	share the same parent in the document tree
	and the element represented by the first <a data-link-type=dfn href=#compound title="compound selector">compound selector</a>
	immediately precedes the element represented by the second one.
	Non-element nodes (e.g. text between elements)
	are ignored when considering the adjacency of elements.

	<div class=example>
		Examples:
		The following selector represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-p-element title=p>p</a> element
		immediately following a <a data-link-type=element title=math>math</a> element:

<pre>math + p</pre>

<p>The following selector is conceptually similar to the one in the
		previous example, except that it adds an attribute selector — it
		adds a constraint to the <a data-link-type=element title=h1>h1</a> element, that it must have</p>
		<code>class="opener"</code>:

<pre>h1.opener + h2</pre>
	</div>


<h3 class="heading settled heading" data-level=13.4 id=general-sibling-combinators><span class=secno>13.4 </span><span class=content>
Following-sibling combinator (<code>~</code>)</span><a class=self-link href=#general-sibling-combinators></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=following-sibling-combinator>following-sibling combinator<a class=self-link href=#following-sibling-combinator></a></dfn> is made of the "tilde"</p>
	(U+007E, <code>~</code>) code point that separates two <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>.
	The elements represented by the two <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a> share
	the same parent in the document tree and the element represented by
	the first compound selector precedes (not necessarily immediately) the element
	represented by the second one.

	<div class=example>
<pre>h1 ~ pre</pre>

		represents a <a data-link-type=element href=http://www.w3.org/html/wg/drafts/html/CR/grouping-content.html#the-pre-element title=pre>pre</a> element following an <code>h1</code>. It
		is a correct and valid, but partial, description of:

		<pre>&lt;h1&gt;Definition of the function a&lt;/h1&gt;
&lt;p&gt;Function a(x) has to be applied to all figures in the table.&lt;/p&gt;
&lt;pre&gt;function a(x) = 12x/13.5&lt;/pre&gt;
</pre>
	</div>


<h2 class="heading settled heading" data-level=14 id=table-pseudos><span class=secno>14 </span><span class=content>
Grid-Structural Selectors</span><a class=self-link href=#table-pseudos></a></h2>

<p>The double-association of a cell in a 2D grid (to its row and column)
	cannot be represented by parentage in a hierarchical markup language.
	Only one of those associations can be represented hierarchically: the
	other must be explicitly or implicitly defined in the document language
	semantics. In both HTML and DocBook, two of the most common hierarchical
	markup languages, the markup is row-primary (that is, the row associations
	are represented hierarchically); the columns must be implied.
	To be able to represent such implied column-based relationships, the
	<a data-link-type=dfn href=#column-combinator0 title="column combinator">column combinator</a> and the
	<a class=css data-link-type=maybe href=#nth-column-pseudo title=:nth-column()>:nth-column()</a> and <a class=css data-link-type=maybe href=#nth-last-column-pseudo title=:nth-last-column()>:nth-last-column()</a> pseudo-classes
	are defined.
	In a column-primary format, these pseudo-classes match against row associations instead.</p>

<h3 class="heading settled heading" data-level=14.1 id=column-combinator><span class=secno>14.1 </span><span class=content>
Column combinator</span><a class=self-link href=#column-combinator></a></h3>

<p>The <dfn data-dfn-type=dfn data-export="" id=column-combinator0>column combinator<a class=self-link href=#column-combinator0></a></dfn>, which consists of two pipes (<span class=css data-link-type=maybe title=||>||</span>)
	represents the relationship of a column element
	to a cell element belonging to the column it represents.
	Column membership is determined based on the semantics of the document language only:
	whether and how the elements are presented is not considered.
	If a cell element belongs to more than one column,
	it is represented by a selector indicating membership in any of those columns.</p>

	<div class=example>
		The following example makes cells C, E, and G yellow.

		<pre>col.selected || td {
  background: gray;
  color: white;
  font-weight: bold;
}
</pre>

		<pre>&lt;table&gt;
  &lt;col span="2"&gt;
  &lt;col class="selected"&gt;
  &lt;tr&gt;&lt;td&gt;A &lt;td&gt;B &lt;td&gt;C
  &lt;tr&gt;&lt;td colspan="2"&gt;D &lt;td&gt;E
  &lt;tr&gt;&lt;td&gt;F &lt;td colspan="2"&gt;G
&lt;/table&gt;
</pre>
	</div>

<h3 class="heading settled heading" data-level=14.2 id=the-nth-column-pseudo><span class=secno>14.2 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-column-pseudo title=:nth-column()>:nth-column()</a> pseudo-class</span><a class=self-link href=#the-nth-column-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-column-pseudo title=:nth-column()>:nth-column(<var>An+B</var>)<a class=self-link href=#nth-column-pseudo></a></dfn>
	pseudo-class notation represents a cell element belonging to a column
	that has <var>An+B</var>-1 columns
	<strong>before</strong> it, for any positive</p>
	integer or zero value of <code>n</code>. Column membership is determined
	based on the semantics of the document language only: whether and how the
	elements are presented is not considered. If a cell element belongs to
	more than one column, it is represented by a selector indicating any of
	those columns.

<p>The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.</p>



<h3 class="heading settled heading" data-level=14.3 id=the-nth-last-column-pseudo><span class=secno>14.3 </span><span class=content>
<a class=css data-link-type=maybe href=#nth-last-column-pseudo title=:nth-last-column()>:nth-last-column()</a> pseudo-class</span><a class=self-link href=#the-nth-last-column-pseudo></a></h3>

<p>The <dfn class=css-code data-dfn-type=selector data-export="" id=nth-last-column-pseudo title=:nth-last-column()>:nth-last-column(<var>An+B</var>)<a class=self-link href=#nth-last-column-pseudo></a></dfn>
	pseudo-class notation represents a cell element belonging to a column
	that has <var>An+B</var>-1 columns
	<strong>after</strong> it, for any positive</p>
	integer or zero value of <code>n</code>. Column membership is determined
	based on the semantics of the document language only: whether and how the
	elements are presented is not considered. If a cell element belongs to
	more than one column, it is represented by a selector indicating any of
	those columns.

<p>The CSS Syntax Module <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a> defines the <a href=http://dev.w3.org/csswg/css-syntax/#anb><var>An+B</var> notation</a>.</p>

<h2 class="heading settled heading" data-level=15 id=specificity><span class=secno>15 </span><span class=content>
Calculating a selector’s specificity</span><a class=self-link href=#specificity></a></h2>

<p>A selector’s specificity is calculated for a given element as follows:</p>

	<ul>
		<li>count the number of ID selectors in the selector (= <var>A</var>)
		<li>count the number of class selectors, attributes selectors, and pseudo-classes in the selector (= <var>B</var>)
		<li>count the number of type selectors and pseudo-elements in the selector (= <var>C</var>)
		<li>ignore the universal selector
	</ul>

<p>If the selector is a <a data-link-type=dfn href=#selector-list title="selector list">selector list</a>,
	this number is calculated for each selector in the list,
	and the specificity of the entire selector is the largest of any individual selector in the list that matches the element.</p>

<p>In most cases, a selector has the same specificity for every element it applies to.
	The specificity of a <a href=#matches>:matches()</a> pseudo-class, however,
	is the specificity of the most specific complex selector that matched the given element.
	(The full selector’s specificity is equivalent to expanding out all the combinations in full, without <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>.)
	The specificity of a <a href=#negation>:not()</a> pseudo-class is
	the specificity of the most specifc complex selector in its selector list.
	In either case, the pseudo-class itself does not contribute any additional specificity.
	For example, <span class=css data-link-type=maybe title=":matches(em, strong)">:matches(em, strong)</span> has a specificity of (0,0,1), like a tag selector.</p>

<p>Specificities are compared by comparing the three components in order:
	the specificity with a larger <var>A</var> value is more specific;
	if the two <var>A</var> values are tied,
	then the specificity with a larger <var>B</var> value is more specific;
	if the two <var>B</var> values are also tied,
	then the specificity with a larger <var>C</var> value is more specific;
	if all the values are tied,
	the two specifities are equal.</p>

<p>Due to storage limitations,
	implementations may have limitations on the size of <var>A</var>, <var>B</var>, or <var>C</var>.
	If so, values higher than the limit must be clamped to that limit,
	and not overflow.</p>

	<div class=example>
		Examples:
		<pre>*               /* a=0 b=0 c=0 */
LI              /* a=0 b=0 c=1 */
UL LI           /* a=0 b=0 c=2 */
UL OL+LI        /* a=0 b=0 c=3 */
H1 + *[REL=up]  /* a=0 b=1 c=1 */
UL OL LI.red    /* a=0 b=1 c=3 */
LI.red.level    /* a=0 b=2 c=1 */
#x34y           /* a=1 b=0 c=0 */
#s12:not(FOO)   /* a=1 b=0 c=1 */
.foo :matches(.bar, #baz)
                /* Either a=1 b=1 c=0
                   or a=0 b=2 c=0, depending
                   on the element being matched. */
</pre>
	</div>

<p class=note>Note: Repeated occurrences of the
	same simple selector are allowed and do increase specificity.</p>

<p class=note>Note: The specificity of the styles</p>
	specified in an HTML <code>style</code> attribute <a href=http://www.w3.org/TR/css-style-attr/#interpret>is described in CSS Style Attributes</a>. <a data-biblio-type=informative data-link-type=biblio href=#cssstyleattr title=cssstyleattr>[CSSSTYLEATTR]</a>

<h2 class="heading settled heading" data-level=16 id=grammar><span class=secno>16 </span><span class=content><span id=formal-syntax></span>
Grammar</span><a class=self-link href=#grammar></a></h2>

<p class=issue id=issue-d7918c9b><a class=self-link href=#issue-d7918c9b></a>Issue: Rewrite this whole danged thing in terms of Syntax parsing algos instead.</p>

<p>The grammar below defines the syntax of Selectors.
	It is applied to a stream of tokens,
	as returned by the tokenizer defined in <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a>.
	It is globally LL(1) and can be locally LL(2)
	(but note that most UAs should not use it directly,
	since it doesn’t express the parsing conventions).
	The format of the productions is optimized for human consumption
	and some shorthand notations beyond Yacc (see <a data-biblio-type=normative data-link-type=biblio href=#yacc title=yacc>[YACC]</a>) are used:</p>

	<ul>
		<li><b>*</b>: 0 or more
		<li><b>+</b>: 1 or more
		<li><b>?</b>: 0 or 1
		<li><b>|</b>: separates alternatives
		<li><b>[ ]</b>: grouping
	</ul>

<p>The productions in uppercase are defined by CSS Syntax <a data-biblio-type=normative data-link-type=biblio href=#css3syn title=css3syn>[CSS3SYN]</a>,
	and correspond to the tokens of the same name.
	Literal strings correspond to delim tokens with the given value.
	Unlike other grammars in CSS, whitespace is not ignored
	The production "S" represents a whitespace token.
	The wqname_prefix production comes from the Namespaces spec <a data-biblio-type=normative data-link-type=biblio href=#css3namespace title=css3namespace>[CSS3NAMESPACE]</a></p>

<p>The productions are:</p>

	<pre>  complex_selector_list
    : complex_selector [ COMMA S* complex_selector ]*
    ;

  scope_relative_selector_list
    : scope_relative_selector [ COMMA s* scope_relative_selector ]*

  scope_relative_selector
    : combinator? complex_selector
    ;

  complex_selector
    : compound_selector [ combinator compound_selector ]* S*
    ;

  combinator
    /* combinators can be surrounded by whitespace */
    : S+ | S* [ '&gt;' | '+' | '~' | COLUMN | '/' IDENT '/' ] S*
    ;

  compound_selector_list
    : compound_selector S* [ COMMA S* compound_selector ]* S*

  compound_selector
    : type_selector [ id | class | attrib | pseudo ]*
      | [ id | class | attrib | pseudo ]+
    ;

  simple_selector_list
    : simple_selector S* [ COMMA S* simple_selector ] S*

  simple_selector
    : type_selector | id | class | attrib | pseudo

  type_selector
    : wqname_prefix? element_name
    ;

  element_name
    : IDENT | '*'
    ;

  id
    : HASH
    ;

  class
    : '.' IDENT
    ;

  attrib
    : '[' S* attrib_name ']'
      | '[' S* attrib_name attrib_match [ IDENT | STRING ] S* attrib_flags? ']'
    ;

  attrib_name
    : wqname_prefix? IDENT S*

  attrib_match
    : [ '=' |
        PREFIX-MATCH |
        SUFFIX-MATCH |
        SUBSTRING-MATCH |
        INCLUDE-MATCH |
        DASH-MATCH
      ] S*

  attrib_flags
    : IDENT S*

  pseudo
    /* '::' starts a pseudo-element, ':' a pseudo-class */
    /* Exceptions: :first-line, :first-letter, :before and :after. */
    /* Note that pseudo-elements are restricted to one per selector and */
    /* occur only in the last compound_selector. */
    : ':' ':'? [ IDENT | functional_pseudo ]
    ;

  functional_pseudo
    : FUNCTION S* value ')'
    ;
</pre>

<p>To aid with the authoring of property grammars,
	the following CSS grammar productions are defined:</p>

	<dl>
		<dt><dfn class=css-code data-dfn-type=type data-export="" id=typedef-selector><var>&lt;selector&gt;</var><a class=self-link href=#typedef-selector></a></dfn>
		<dd>
			A <code>complex_selector_list</code> production representing
			a <a data-link-type=dfn href=#selector-list title="selector list">selector list</a>.

		<dt><dfn class=css-code data-dfn-type=type data-export="" id=typedef-relative-selector><var>&lt;relative-selector&gt;</var><a class=self-link href=#typedef-relative-selector></a></dfn>
		<dd>
			A <code>scope_relative_selector_list</code> production representing
			a <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> comprised of <a data-link-type=dfn href=#relative-selector- title="relative selectors">relative selectors</a>.

		<dt><dfn class=css-code data-dfn-type=type data-export="" id=typedef-compound-selector><var>&lt;compound-selector&gt;</var><a class=self-link href=#typedef-compound-selector></a></dfn>
		<dd>
			A <code>compound_selector_list</code> production representing
			a <a data-link-type=dfn href=#selector-list title="selector list">selector list</a> comprised of <a data-link-type=dfn href=#compound title="compound selectors">compound selectors</a>.

		<dt><dfn class=css-code data-dfn-type=type data-export="" id=typedef-id-selector><var>&lt;id-selector&gt;</var><a class=self-link href=#typedef-id-selector></a></dfn>
		<dd>
			An <code>id</code> production representing
			an <a data-link-type=dfn href=#id-selector title="id selector">ID selector</a>
	</dl>

<h2 class="heading settled heading" data-level=17 id=api-hooks><span class=secno>17 </span><span class=content>
API Hooks</span><a class=self-link href=#api-hooks></a></h2>

<p>To aid in the writing of specs that use Selectors concepts,
	this section defines several API hooks that can be invoked by other specifications.</p>

<h3 class="heading settled heading" data-level=17.1 id=parse-a-selector><span class=secno>17.1 </span><span class=content>
Parse A Selector</span><a class=self-link href=#parse-a-selector></a></h3>

<p>This section defines how to <dfn data-dfn-type=dfn data-export="" id=parse-a-selector0>parse a selector<a class=self-link href=#parse-a-selector0></a></dfn> from a string <var>source</var>.
	It returns either a complex selector list,
	or failure.</p>

	<ol>
		<li>
			Let <var>selector</var> be the result of parsing <var>source</var> against the <code>complex_selector_list</code> grammar.
			If it does not match the grammar,
			return failure.

		<li>
			Otherwise,
			if any simple selectors in <var>selector</var> are not recognized by the user agent,
			or <var>selector</var> is otherwise invalid in some way
			(such as, for example, containing an undeclared namespace prefix),
			return failure.

		<li>
			Otherwise,
			return <var>selector</var>.
	</ol>

<h3 class="heading settled heading" data-level=17.2 id=parse-a-relative-selector><span class=secno>17.2 </span><span class=content>
Parse A Relative Selector</span><a class=self-link href=#parse-a-relative-selector></a></h3>

<p>This section defines how to <dfn data-dfn-type=dfn data-export="" id=parse-a-relative-selector0>parse a relative selector<a class=self-link href=#parse-a-relative-selector0></a></dfn> from a string <var>source</var>,
	against <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a> <var>refs</var>.
	It returns either a complex selector list,
	or failure.</p>

	<ol>
		<li>
			Let <var>selector</var> be the result of parsing <var>source</var> against the <code>scope_relative_selector_list</code> grammar.
			If it does not match the grammar,
			return failure.

		<li>
			Otherwise,
			if any simple selectors in <var>selector</var> are not recognized by the user agent,
			or <var>selector</var> is otherwise invalid in some way
			(such as, for example, containing an undeclared namespace prefix),
			return failure.

		<li>
			Otherwise,
			<a data-link-type=dfn href=#absolutize-list title="absolutize a relative selector list">absolutize <var>selector</var></a> with <var>refs</var> as the <a data-link-type=dfn href=#scope-element title=":scope elements">:scope elements</a>.

		<li>
			Return <var>selector</var>.
	</ol>


<h2 class="heading settled heading" data-level=18 id=changes><span class=secno>18 </span><span class=content>
Changes</span><a class=self-link href=#changes></a></h2>

<p>Significant changes since the <a href=http://www.w3.org/TR/2013/WD-selectors4-20130502/>2 May 2013 Working Draft</a> include:</p>

	<ul>
		<li>Split out <a data-link-type=dfn href=#relative-selector- title="relative selectors">relative selectors</a> from <a data-link-type=dfn href=#scope- title="scoped selectors">scoped selectors</a>,
			as these are different concepts that can be independently invoked.
	</ul>


<h2 class="heading settled heading" data-level=19 id=acknowledgements><span class=secno>19 </span><span class=content>
Acknowledgements</span><a class=self-link href=#acknowledgements></a></h2>

<p>The CSS working group would like to thank everyone who contributed
	to the <a href=http://www.w3.org/TR/css3-selectors>previous Selectors</a> specifications over the years,
	as those specifications formed the basis for this one.
	In particular, the working group would like to extend special thanks
	to the following for their specific contributions to Selectors Level 4:
	L. David Baron,
	Andrew Fedoniouk,
	Ian Hickson,
	Grey Hodge,
	Lachlan Hunt,
	Jason Cranford Teague</p>

<h2 class="no-ref no-num heading settled heading" id=conformance><span class=content>
Conformance</span><a class=self-link href=#conformance></a></h2>

<h3 class="no-ref heading settled heading" id=conventions><span class=content>
Document conventions</span><a class=self-link href=#conventions></a></h3>

    <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification.

    <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-biblio-type=normative data-link-type=biblio href=#rfc2119 title=rfc2119>[RFC2119]</a></p>

    <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

    <div class=example>
        <p>This is an example of an informative example.</p>
    </div>

    <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

    <p class=note>Note, this is an informative note.</p>

<h3 class="no-ref heading settled heading" id=conformance-classes><span class=content>
Conformance classes</span><a class=self-link href=#conformance-classes></a></h3>

    <p>Conformance to this specification
    is defined for three conformance classes:
    <dl>
        <dt>style sheet
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#style-sheet>CSS
            style sheet</a>.
        <dt>renderer
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that interprets the semantics of a style sheet and renders
            documents that use them.
        <dt>authoring tool
            <dd>A <a href=http://www.w3.org/TR/CSS21/conform.html#user-agent>UA</a>
            that writes a style sheet.
    </dl>

    <p>A style sheet is conformant to this specification
    if all of its statements that use syntax defined in this module are valid
    according to the generic CSS grammar and the individual grammars of each
    feature defined in this module.

    <p>A renderer is conformant to this specification
    if, in addition to interpreting the style sheet as defined by the
    appropriate specifications, it supports all the features defined
    by this specification by parsing them correctly
    and rendering the document accordingly. However, the inability of a
    UA to correctly render a document due to limitations of the device
    does not make the UA non-conformant. (For example, a UA is not
    required to render color on a monochrome monitor.)

    <p>An authoring tool is conformant to this specification
    if it writes style sheets that are syntactically correct according to the
    generic CSS grammar and the individual grammars of each feature in
    this module, and meet all other conformance requirements of style sheets
    as described in this module.

<h3 class="no-ref heading settled heading" id=partial><span class=content>
Partial implementations</span><a class=self-link href=#partial></a></h3>

    <p>So that authors can exploit the forward-compatible parsing rules to
    assign fallback values, CSS renderers <strong>must</strong>
    treat as invalid (and <a href=http://www.w3.org/TR/CSS21/conform.html#ignore>ignore
    as appropriate</a>) any at-rules, properties, property values, keywords,
    and other syntactic constructs for which they have no usable level of
    support. In particular, user agents <strong>must not</strong> selectively
    ignore unsupported component values and honor supported values in a single
    multi-value property declaration: if any value is considered invalid
    (as unsupported values must be), CSS requires that the entire declaration
    be ignored.</p>

<h3 class="no-ref heading settled heading" id=experimental><span class=content>
Experimental implementations</span><a class=self-link href=#experimental></a></h3>

    <p>To avoid clashes with future CSS features, the CSS2.1 specification
    reserves a <a href=http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords>prefixed
    syntax</a> for proprietary and experimental extensions to CSS.

    <p>Prior to a specification reaching the Candidate Recommendation stage
    in the W3C process, all implementations of a CSS feature are considered
    experimental. The CSS Working Group recommends that implementations
    use a vendor-prefixed syntax for such features, including those in
    W3C Working Drafts. This avoids incompatibilities with future changes
    in the draft.
    </p>

<h3 class="no-ref heading settled heading" id=testing><span class=content>
Non-experimental implementations</span><a class=self-link href=#testing></a></h3>

    <p>Once a specification reaches the Candidate Recommendation stage,
    non-experimental implementations are possible, and implementors should
    release an unprefixed implementation of any CR-level feature they
    can demonstrate to be correctly implemented according to spec.

    <p>To establish and maintain the interoperability of CSS across
    implementations, the CSS Working Group requests that non-experimental
    CSS renderers submit an implementation report (and, if necessary, the
    testcases used for that implementation report) to the W3C before
    releasing an unprefixed implementation of any CSS features. Testcases
    submitted to W3C are subject to review and correction by the CSS
    Working Group.

    <p>Further information on submitting testcases and implementation reports
    can be found from on the CSS Working Group’s website at
    <a href=http://www.w3.org/Style/CSS/Test/>http://www.w3.org/Style/CSS/Test/</a>.
    Questions should be directed to the
    <a href=http://lists.w3.org/Archives/Public/public-css-testsuite>public-css-testsuite@w3.org</a>
    mailing list.

<h2 class="no-num no-ref heading settled heading" id=references><span class=content>
References</span><a class=self-link href=#references></a></h2>

<h3 class="no-num no-ref heading settled heading" id=normative><span class=content>
Normative References</span><a class=self-link href=#normative></a></h3>
<div data-fill-with=normative-references><dl><dt id=css21 title=CSS21><a class=self-link href=#css21></a>[CSS21]<dd>Bert Bos; et al. <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>Cascading Style Sheets Level 2 Revision 1 (CSS 2.1) Specification</a>. 7 June 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-CSS2-20110607>http://www.w3.org/TR/2011/REC-CSS2-20110607</a><dt id=css3namespace title=CSS3NAMESPACE><a class=self-link href=#css3namespace></a>[CSS3NAMESPACE]<dd>Elika J. Etemad; Anne van Kesteren. <a href=http://www.w3.org/TR/2011/REC-css3-namespace-20110929/>CSS Namespaces Module</a>. 29 September 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-css3-namespace-20110929/>http://www.w3.org/TR/2011/REC-css3-namespace-20110929/</a><dt id=css3syn title=CSS3SYN><a class=self-link href=#css3syn></a>[CSS3SYN]<dd>Tab Atkins Jr.; Simon Sapin. <a href=http://www.w3.org/TR/2013/WD-css-syntax-3-20131105/>CSS Syntax Module</a>. 5 November 2013. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/WD-css-syntax-3-20131105/>http://www.w3.org/TR/2013/WD-css-syntax-3-20131105/</a><dt id=css3text title=CSS3TEXT><a class=self-link href=#css3text></a>[CSS3TEXT]<dd>Elika J. Etemad; Koji Ishii. <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>CSS Text Module Level 3</a>. 13 November 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-text-20121113/>http://www.w3.org/TR/2012/WD-css3-text-20121113/</a><dt id=dom title=DOM><a class=self-link href=#dom></a>[DOM]<dd>Anne van Kesteren; Aryeh Gregor; Ms2ger. <a href=http://dom.spec.whatwg.org/>DOM Living Standard</a>. WHATWG Living Standard. (Work in progress.) URL: <a href=http://dom.spec.whatwg.org/>http://dom.spec.whatwg.org/</a><dt id=rfc2119 title=RFC2119><a class=self-link href=#rfc2119></a>[RFC2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a><dt id=select title=SELECT><a class=self-link href=#select></a>[SELECT]<dd>Tantek Çelik; et al. <a href=http://www.w3.org/TR/2011/REC-css3-selectors-20110929/>Selectors Level 3</a>. 29 September 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-css3-selectors-20110929/>http://www.w3.org/TR/2011/REC-css3-selectors-20110929/</a><dt id=yacc title=YACC><a class=self-link href=#yacc></a>[YACC]<dd>S. C. Johnson. <a href=None>YACC - Yet another compiler compiler</a>. 1975. Technical Report. URL: <a href=None>None</a></dl></div>

<h3 class="no-num no-ref heading settled heading" id=informative><span class=content>
Informative References</span><a class=self-link href=#informative></a></h3>
<div data-fill-with=informative-references><dl><dt id=bcp47 title=BCP47><a class=self-link href=#bcp47></a>[BCP47]<dd>A. Phillips; M. Davis. <a href=ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt>Tags for Identifying Languages.</a>. September 2009. Internet Best Current Practice. Currently represented by RFC 5646. URL: <a href=ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt>ftp://ftp.rfc-editor.org/in-notes/bcp/bcp47.txt</a><dt id=css3ui title=CSS3UI><a class=self-link href=#css3ui></a>[CSS3UI]<dd>Tantek Çelik. <a href=http://www.w3.org/TR/2012/WD-css3-ui-20120117/>CSS Basic User Interface Module Level 3 (CSS3 UI)</a>. 17 January 2012. W3C Working Draft. (Work in progress.) URL: <a href=http://www.w3.org/TR/2012/WD-css3-ui-20120117/>http://www.w3.org/TR/2012/WD-css3-ui-20120117/</a><dt id=cssstyleattr title=CSSSTYLEATTR><a class=self-link href=#cssstyleattr></a>[CSSSTYLEATTR]<dd>Tantek Çelik; Elika J. Etemad. <a href=http://www.w3.org/TR/2010/CR-css-style-attr-20101012/>CSS Style Attributes</a>. 12 October 2010. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2010/CR-css-style-attr-20101012/>http://www.w3.org/TR/2010/CR-css-style-attr-20101012/</a><dt id=html401 title=HTML401><a class=self-link href=#html401></a>[HTML401]<dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a href=http://www.w3.org/TR/1999/REC-html401-19991224>HTML 4.01 Specification</a>. 24 December 1999. W3C Recommendation. URL: <a href=http://www.w3.org/TR/1999/REC-html401-19991224>http://www.w3.org/TR/1999/REC-html401-19991224</a><dt id=html5 title=HTML5><a class=self-link href=#html5></a>[HTML5]<dd>Robin Berjon; et al. <a href=http://www.w3.org/TR/2013/CR-html5-20130806/>HTML5</a>. 6 August 2013. W3C Candidate Recommendation. (Work in progress.) URL: <a href=http://www.w3.org/TR/2013/CR-html5-20130806/>http://www.w3.org/TR/2013/CR-html5-20130806/</a><dt id=mathml title=MATHML><a class=self-link href=#mathml></a>[MATHML]<dd>Patrick Ion; Robert Miner. <a href=http://www.w3.org/1999/07/REC-MathML-19990707>Mathematical Markup Language (MathML) 1.01 Specification</a>. 7 July 1999. W3C Recommendation. URL: <a href=http://www.w3.org/1999/07/REC-MathML-19990707>http://www.w3.org/1999/07/REC-MathML-19990707</a><dt id=rfc4647 title=RFC4647><a class=self-link href=#rfc4647></a>[RFC4647]<dd>A. Phillips; M. Davis. <a href=http://www.ietf.org/rfc/rfc4647.txt>Matching of Language Tags</a>. September 2006. URL: <a href=http://www.ietf.org/rfc/rfc4647.txt>http://www.ietf.org/rfc/rfc4647.txt</a><dt id=svg11 title=SVG11><a class=self-link href=#svg11></a>[SVG11]<dd>Erik Dahlström; et al. <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>Scalable Vector Graphics (SVG) 1.1 (Second Edition)</a>. 16 August 2011. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2011/REC-SVG11-20110816/>http://www.w3.org/TR/2011/REC-SVG11-20110816/</a><dt id=xforms11 title=XFORMS11><a class=self-link href=#xforms11></a>[XFORMS11]<dd>John M. Boyer. <a href=http://www.w3.org/TR/2009/REC-xforms-20091020/>XForms 1.1</a>. 20 October 2009. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2009/REC-xforms-20091020/>http://www.w3.org/TR/2009/REC-xforms-20091020/</a><dt id=xml-names title=XML-NAMES><a class=self-link href=#xml-names></a>[XML-NAMES]<dd>Tim Bray; et al. <a href=http://www.w3.org/TR/2009/REC-xml-names-20091208/>Namespaces in XML 1.0 (Third Edition)</a>. 8 December 2009. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2009/REC-xml-names-20091208/>http://www.w3.org/TR/2009/REC-xml-names-20091208/</a><dt id=xml10 title=XML10><a class=self-link href=#xml10></a>[XML10]<dd>C. M. Sperberg-McQueen; et al. <a href=http://www.w3.org/TR/2008/REC-xml-20081126/>Extensible Markup Language (XML) 1.0 (Fifth Edition)</a>. 26 November 2008. W3C Recommendation. URL: <a href=http://www.w3.org/TR/2008/REC-xml-20081126/>http://www.w3.org/TR/2008/REC-xml-20081126/</a></dl></div>

<h2 class="no-num no-ref heading settled heading" id=index><span class=content>
Index</span><a class=self-link href=#index></a></h2>
<div data-fill-with=index><ul class=indexlist>
<li>absolutize a relative selector, <a href=#absolutize title="section 3.5.1">3.5.1</a>
<li>absolutize a relative selector list, <a href=#absolutize-list title="section 3.5.1">3.5.1</a>
<li>active, <a href=#valuedef-active title="section 9.4">9.4</a>
<li>:active, <a href=#active-pseudo title="section 9.2">9.2</a>
<li>:any-link, <a href=#any-link-pseudo title="section 8.1">8.1</a>
<li>attribute selector, <a href=#attribute-selector title="section 6">6</a>
<li>:blank, <a href=#blank-pseudo title="section 12.3">12.3</a>
<li>:checked, <a href=#checked-pseudo title="section 11.2.1">11.2.1</a>
<li>child combinator, <a href=#child-combinator title="section 13.2">13.2</a>
<li>class selector, <a href=#class-selector title="section 6.6">6.6</a>
<li>column combinator, <a href=#column-combinator0 title="section 14.1">14.1</a>
<li>combinator, <a href=#combinator title="section 3.1">3.1</a>
<li>complete, <a href=#complete-profile title="section 2.1">2.1</a>
<li>complex selector, <a href=#complex title="section 3.1">3.1</a>
<li>compound selector, <a href=#compound title="section 3.1">3.1</a>
<li>&lt;compound-selector&gt;, <a href=#typedef-compound-selector title="section 16">16</a>
<li>content pseudo-element, <a href=#content-pseudo-element title="section 3.7.1">3.7.1</a>
<li>:current(), <a href=#selectordef-current title="section 10.1">10.1</a>
<li>:current, <a href=#current-pseudo title="section 10.1">10.1</a>
<li>declared, <a href=#nsdecl title="section 3.9">3.9</a>
<li>:default, <a href=#default-pseudo title="section 11.1.4">11.1.4</a>
<li>descendant combinator, <a href=#descendant-combinator title="section 13.1">13.1</a>
<li>:dir(), <a href=#dir-pseudo title="section 7.1">7.1</a>
<li>:disabled, <a href=#disabled-pseudo title="section 11.1.1">11.1.1</a>
<li>:drop(), <a href=#selectordef-drop title="section 9.4">9.4</a>
<li>:drop, <a href=#selectordef-drop0 title="section 9.4">9.4</a>
<li>:empty, <a href=#empty-pseudo title="section 12.2">12.2</a>
<li>:enabled, <a href=#enabled-pseudo title="section 11.1.1">11.1.1</a>
<li>evaluate a selector, <a href=#evaluate-a-selector title="section 3.2">3.2</a>
<li>fast, <a href=#fast-profile title="section 2.1">2.1</a>
<li>feature, <a href=#feature title="section 3.3">3.3</a>
<li>featureless, <a href=#featureless title="section 3.3">3.3</a>
<li>feature selector, <a href=#feature-selector title="section 3.3">3.3</a>
<li>:first-child, <a href=#first-child-pseudo title="section 12.4.3">12.4.3</a>
<li>:first-of-type, <a href=#first-of-type-pseudo title="section 12.5.3">12.5.3</a>
<li>:focus, <a href=#focus-pseudo title="section 9.3">9.3</a>
<li>following-sibling combinator, <a href=#following-sibling-combinator title="section 13.4">13.4</a>
<li>functional pseudo-class, <a href=#functional-pseudo-class title="section 3.6">3.6</a>
<li>:future, <a href=#future-pseudo title="section 10.3">10.3</a>
<li>:has(), <a href=#has-pseudo title="section 4.4">4.4</a>
<li>:hover, <a href=#hover-pseudo title="section 9.1">9.1</a>
<li>ID selector, <a href=#id-selector title="section 6.7">6.7</a>
<li>&lt;id-selector&gt;, <a href=#typedef-id-selector title="section 16">16</a>
<li>:indeterminate, <a href=#indetermine-pseudo title="section 11.2.2">11.2.2</a>
<li>:in-range, <a href=#in-range-pseudo title="section 11.3.2">11.3.2</a>
<li>:invalid, <a href=#invalid-pseudo title="section 11.3.1">11.3.1</a>
<li>invalid<ul><li>definition of, <a href=#invalid-selector title="section 3.10">3.10</a>
<li>value for :drop(), <a href=#valuedef-invalid title="section 9.4">9.4</a>
</ul><li>invalid selector, <a href=#invalid-selector title="section 3.10">3.10</a>
<li>:lang(), <a href=#lang-pseudo title="section 7.2">7.2</a>
<li>language, <a href=#language title="section 7.2">7.2</a>
<li>language range, <a href=#language-range title="section 7.2">7.2</a>
<li>:last-child, <a href=#last-child-pseudo title="section 12.4.4">12.4.4</a>
<li>:last-of-type, <a href=#last-of-type-pseudo title="section 12.5.4">12.5.4</a>
<li>:link, <a href=#link-pseudo title="section 8.2">8.2</a>
<li>:matches(), <a href=#matches-pseudo title="section 4.2">4.2</a>
<li>next-sibling combinator, <a href=#next-sibling-combinator title="section 13.3">13.3</a>
<li>:not(), <a href=#negation-pseudo title="section 4.3">4.3</a>
<li>:nth-child(), <a href=#nth-child-pseudo title="section 12.4.1">12.4.1</a>
<li>:nth-column(), <a href=#nth-column-pseudo title="section 14.2">14.2</a>
<li>:nth-last-child(), <a href=#nth-last-child-pseudo title="section 12.4.2">12.4.2</a>
<li>:nth-last-column(), <a href=#nth-last-column-pseudo title="section 14.3">14.3</a>
<li>:nth-last-of-type(), <a href=#nth-last-of-type title="section 12.5.2">12.5.2</a>
<li>:nth-of-type(), <a href=#nth-of-type-pseudo title="section 12.5.1">12.5.1</a>
<li>:only-child, <a href=#only-child-pseudo title="section 12.4.5">12.4.5</a>
<li>:only-of-type, <a href=#only-of-type-pseudo title="section 12.5.5">12.5.5</a>
<li>:optional, <a href=#optional-pseudo title="section 11.3.3">11.3.3</a>
<li>originating element, <a href=#originating-element title="section 3.7">3.7</a>
<li>:out-of-range, <a href=#out-of-range-pseudo title="section 11.3.2">11.3.2</a>
<li>parse a relative selector, <a href=#parse-a-relative-selector0 title="section 17.2">17.2</a>
<li>parse a selector, <a href=#parse-a-selector0 title="section 17.1">17.1</a>
<li>:past, <a href=#past-pseudo title="section 10.2">10.2</a>
<li>:placeholder-shown, <a href=#placeholder-shown-pseudo title="section 11.1.3">11.1.3</a>
<li>pseudo-class, <a href=#pseudo-class title="section 3.6">3.6</a>
<li>pseudo-element, <a href=#pseudo-element title="section 3.7">3.7</a>
<li>:read-only, <a href=#read-only-pseudo title="section 11.1.2">11.1.2</a>
<li>:read-write, <a href=#read-write-pseudo title="section 11.1.2">11.1.2</a>
<li>relative, <a href=#relative-selector- title="section 3.5">3.5</a>
<li>relative selector, <a href=#relative-selector- title="section 3.5">3.5</a>
<li>&lt;relative-selector&gt;, <a href=#typedef-relative-selector title="section 16">16</a>
<li>:required, <a href=#required-pseudo title="section 11.3.3">11.3.3</a>
<li>:root, <a href=#root-pseudo title="section 12.1">12.1</a>
<li>:scope, <a href=#scope-pseudo title="section 8.4">8.4</a>
<li>scope, <a href=#scope- title="section 3.4">3.4</a>
<li>scope-contained, <a href=#scope-contained- title="section 3.4">3.4</a>
<li>scope-contained selector, <a href=#scope-contained- title="section 3.4">3.4</a>
<li>scoped selector, <a href=#scope- title="section 3.4">3.4</a>
<li>:scope element, <a href=#scope-element title="section 8.4">8.4</a>
<li>scope-filtered, <a href=#scope-filtered- title="section 3.4">3.4</a>
<li>scope-filtered selector, <a href=#scope-filtered- title="section 3.4">3.4</a>
<li>scope-relative, <a href=#relative-selector- title="section 3.5">3.5</a>
<li>scoping element, <a href=#scoping-element title="section 3.4">3.4</a>
<li>scoping method, <a href=#scoping-method- title="section 3.4">3.4</a>
<li>scoping root, <a href=#scoping-root title="section 3.4">3.4</a>
<li>selector, <a href=#selector title="section 3.1">3.1</a>
<li>&lt;selector&gt;, <a href=#typedef-selector title="section 16">16</a>
<li>selector list, <a href=#selector-list title="section 4.1">4.1</a>
<li>selector match list, <a href=#selector-match-list title="section 3.2">3.2</a>
<li>selector scoping method, <a href=#scoping-method- title="section 3.4">3.4</a>
<li>simple selector, <a href=#simple title="section 3.1">3.1</a>
<li>structural pseudo-classes, <a href=#structural-pseudo-classes title="section 12">12</a>
<li>:target, <a href=#target-pseudo title="section 8.3">8.3</a>
<li>text pseudo-element, <a href=#text-pseudo-element title="section 3.7.1">3.7.1</a>
<li>type selector, <a href=#type-selector title="section 5.1">5.1</a>
<li>universal selector, <a href=#universal-selector0 title="section 5.2">5.2</a>
<li>:user-error, <a href=#user-error-pseudo title="section 11.3.4">11.3.4</a>
<li>:valid, <a href=#valid-pseudo title="section 11.3.1">11.3.1</a>
<li>valid, <a href=#valuedef-valid title="section 9.4">9.4</a>
<li>virtual scoping root, <a href=#virtual-scoping-root title="section 3.4">3.4</a>
<li>:visited, <a href=#visited-pseudo title="section 8.2">8.2</a>
<li>White space, <a href=#whitespace title="section 3.8">3.8</a>
</ul></div>

<h2 class="no-num no-ref heading settled heading" id=property-index><span class=content>
Property index</span><a class=self-link href=#property-index></a></h2>
<div data-fill-with=property-index><p>No properties defined.</div>


<h2 class="no-num heading settled" id=issues-index><span class=content>Issues Index</span><a class=self-link href=#issues-index></a></h2><div style="counter-reset: issue"><div class=issue>
		The categorization of things into the "fast" or "complete" profiles needs implementor review.
		If some things currently not in the fast profile can reasonably be done in CSS Selectors,
		we should move them.


<a href=#issue-cbdc0c66> ↵ </a></div><div class=issue>Issue: Fill in more combinators.<a href=#issue-1bea4b82> ↵ </a></div>

<div class=issue>Issue: The relative position of pseudo-elements in the <a data-link-type=dfn href=#selector-match-list title="selector match list">selector match list</a> is undefined.
	There’s not yet a context that exposes this information,
	but we need to decide on something eventually,
	before something <em>is</em> exposed.<a href=#issue-944b07a3> ↵ </a></div>


<div class=issue>Issue: Some pseudo-classes are *syntactical*,
			like <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a> and <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>,
			and thus should always work.
			Need to indicate that somewhere.
			Probably the structural pseudos always work
			whenever the child list is ordered.<a href=#issue-ea3628be> ↵ </a></div>
	<div class=issue>
		I’ve switched over to defaulting to allowing.
		Is that okay,
		or should we stick with defaulting to *not* allowing,
		and requiring individual pseudo-classes to specify that they work on pseudo-elements?

	<a href=#issue-73b391d2> ↵ </a></div><div class=issue>Explain this better.<a href=#issue-2422b936> ↵ </a></div>

	<div class=issue>Issue: This restriction probably isn’t necessary.
	If it is, it needs to be expanded,
	since <a class=css data-link-type=maybe href=#has-pseudo title=:has()>:has()</a> and <a class=css data-link-type=maybe href=#nth-child-pseudo title=:nth-child()>:nth-child()</a> have the same functionality as <a class=css data-link-type=maybe href=#matches-pseudo title=:matches()>:matches()</a>.<a href=#issue-dc4684d3> ↵ </a></div>

<div class=issue>Add comma-separated syntax for
	<a href=http://lists.w3.org/Archives/Public/www-style/2011Mar/0215.html>multiple-value matching</a>?
	e.g. [rel ~= next, prev, up, first, last]

<a href=#issue-411b789d> ↵ </a></div><div class=issue>Any better name suggestions for this pseudo?

<a href=#issue-907dd942> ↵ </a></div><div class=issue>Issue: Look into :-moz-ui-valid as well.<a href=#issue-30fdb3b6> ↵ </a></div>

<div class=issue>Issue: We don’t like the name <a class=css data-link-type=maybe href=#blank-pseudo title=:blank>:blank</a>—<wbr>it doesn’t clearly convey a difference from <a class=css data-link-type=maybe href=#empty-pseudo title=:empty>:empty</a>.
	Moz uses <span class=css data-link-type=maybe title=:-moz-whitespace-only>:-moz-whitespace-only</span>,
	which is clear but a little wordy.
	Any other suggestions?<a href=#issue-563b06fc> ↵ </a></div>


<div class=issue>Issue: Rewrite this whole danged thing in terms of Syntax parsing algos instead.<a href=#issue-d7918c9b> ↵ </a></div>

</div>