<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head profile="http://dublincore.org/documents/2008/08/04/dc-html/ ">
  <meta content="text/html;charset=utf-8" http-equiv=Content-Type>
  <title>CSS Device Adaptation</title>

  <link href="http://purl.org/dc/terms/" rel=schema.dcterms>
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
   rel=dcterms.rights>
  <meta content="CSS Device Adaptation" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2013-10-02 name=dcterms.date>
  <meta content="Rune Lillesveen" name=dcterms.creator>
  <meta content="Øyvind Stenhaug" name=dcterms.creator>
  <meta content="Florian Rivoal" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://dev.w3.org/csswg/css-device-adapt/"
   name=dcterms.identifier>
  <link href=default.css rel=stylesheet type="text/css">
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
   type="text/css">

 <body class=draft>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Device Adaptation</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 2 October 2013</h2>

   <dl>
    <dt>This version:

    <dd>$Date$ (editor's draft)
     <!--<dd><a href="http://dev.w3.org/csswg/css-device-adapt/">http://www.w3.org/TR/2013/WD-css-device-adapt-20131002/</a></dd>-->

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css-device-adapt/">http://www.w3.org/TR/css-device-adapt/</a>

    <dt>Latest editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-device-adapt/">http://dev.w3.org/csswg/css-device-adapt/</a>

    <dt>Previous version:

    <dd><a href="http://www.w3.org/TR/2011/WD-css-device-adapt-20110915/">
     http://www.w3.org/TR/2011/WD-css-device-adapt-20110915/</a>

    <dt>Issues List:

    <dd><a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?product=CSS&component=Device%20Adaptation">W3C
     Bugzilla</a>

    <dt>Feedback:

    <dd><a
     href="mailto:www-style@w3.org?subject=%5Bcss-device-adapt%5D%20feedback">www-style@w3.org</a>
     with subject line “<kbd>[css-device-adapt] <var>… message topic
     …</var></kbd>” (<a
     href="http://lists.w3.org/Archives/Public/www-style/"
     rel=discussion>archives</a>)

    <dt>Editors:

    <dd><a href="mailto:rune@opera.com">Rune Lillesveen</a> (<a
     href="http://www.opera.com/">Opera Software</a>)

    <dd><a href="mailto:oyvinds@opera.com">Øyvind Stenhaug</a> (<a
     href="http://www.opera.com/">Opera Software</a>)

    <dd><a href="mailto:florian@rivoal.net">Florian Rivoal</a> (invited
     expert)

    <dt>Previous Editors:

    <dd><a href="mailto:rbetts@adobe.com">Ryan Betts</a> (<a
     href="http://www.adobe.com/">Adobe Systems</a>)
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2013 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>, <a
    href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>This specification provides a way for an author to specify, in CSS, the
   size, zoom factor, and orientation of the viewport that is used as the
   base for the initial containing block.

  <h2 class="no-num no-toc" id=status-of-this-document>Status of this
   document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss-device-adapt%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css-device-adapt” in the subject, preferably like this:
   “[<!---->css-device-adapt<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a
   href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part of
   the <a href="http://www.w3.org/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=table-of-contents>Table of Contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>

   <li><a href="#values"><span class=secno>2. </span>Values</a>

   <li><a href="#the-viewport"><span class=secno>3. </span>The viewport</a>

   <li><a href="#the-atviewport-rule"><span class=secno>4. </span>The <code
    class=css>@viewport</code> rule</a>
    <ul class=toc>
     <li><a href="#syntax"><span class=secno>4.1. </span>Syntax</a>
    </ul>

   <li><a href="#viewport-descriptors"><span class=secno>5. </span>Viewport
    descriptors</a>
    <ul class=toc>
     <li><a href="#the-lsquomin-widthrsquo-and-lsquomax-wid"><span
      class=secno>5.1. </span>The ‘<code
      class=descriptor>min-width</code>’ and ‘<code
      class=descriptor>max-width</code>’ descriptors</a>

     <li><a href="#the-lsquowidthrsquo-shorthand-descriptor"><span
      class=secno>5.2. </span>The ‘<code class=descriptor>width</code>’
      shorthand descriptor</a>

     <li><a href="#the-lsquomin-heightrsquo-and-lsquomax-he"><span
      class=secno>5.3. </span>The ‘<code
      class=descriptor>min-height</code>’ and ‘<code
      class=descriptor>max-height</code>’ descriptor</a>

     <li><a href="#the-lsquoheightrsquo-shorthand-descripto"><span
      class=secno>5.4. </span>The ‘<code class=descriptor>height</code>’
      shorthand descriptor</a>

     <li><a href="#the-lsquozoomrsquo-descriptor"><span class=secno>5.5.
      </span>The ‘<code class=descriptor
      title="zoom!!descriptor">zoom</code>’ descriptor</a>

     <li><a href="#the-lsquomin-zoomrsquo-descriptor"><span class=secno>5.6.
      </span>The ‘<code class=descriptor>min-zoom</code>’ descriptor</a>

     <li><a href="#the-lsquomax-zoomrsquo-descriptor"><span class=secno>5.7.
      </span>The ‘<code class=descriptor>max-zoom</code>’ descriptor</a>

     <li><a href="#the-lsquouser-zoomrsquo-descriptor"><span class=secno>5.8.
      </span>The ‘<code class=descriptor>user-zoom</code>’ descriptor</a>

     <li><a href="#the-lsquoorientationrsquo-descriptor"><span
      class=secno>5.9. </span>The ‘<code
      class=descriptor>orientation</code>’ descriptor</a>
    </ul>

   <li><a href="#constraining-viewport-descriptor-values"><span
    class=secno>6. </span>Constraining viewport descriptor values</a>
    <ul class=toc>
     <li><a href="#definitions"><span class=secno>6.1. </span>Definitions</a>

     <li><a href="#constraining-procedure"><span class=secno>6.2. </span>The
      procedure</a>
    </ul>

   <li><a href="#media-queries"><span class=secno>7. </span>Media Queries</a>

   <li><a href="#cssom"><span class=secno>8. </span>CSSOM</a>

   <li><a href="#dom-interfaces"><span class=secno>9. </span>DOM
    Interfaces</a>

   <li><a href="#conformance"><span class=secno>10. </span>Conformance</a>

   <li><a href="#viewport-meta"><span class=secno>11. </span>Viewport <code
    class=html>META</code> element</a>
    <ul class=toc>
     <li><a href="#meta-properties"><span class=secno>11.1.
      </span>Properties</a>

     <li><a href="#parsing-algorithm"><span class=secno>11.2. </span>Parsing
      algorithm</a>

     <li><a href="#lsquoextend-to-zoomrsquo"><span class=secno>11.3.
      </span>‘<code class=css
      title=extend-to-zoom>extend-to-zoom</code>’</a>

     <li><a href="#translation-into-atviewport-descriptors"><span
      class=secno>11.4. </span>Translation into <code
      class=css>@viewport</code> descriptors</a>
    </ul>

   <li><a href="#handling-auto-zoom"><span class=secno>12. </span>Handling
    ‘<code class=css title="auto!!zoom">auto</code>’ for ‘<code
    class=descriptor title="zoom!!descriptor">zoom</code>’</a>

   <li><a href="#ua-stylesheet"><span class=secno>13. </span>UA stylesheets
    </a>
    <ul class=toc>
     <li><a href="#desktop-ua-styles-"><span class=secno>13.1. </span>Desktop
      UA styles </a>

     <li><a href="#small-screen-ua-styles"><span class=secno>13.2.
      </span>Small screen UA styles</a>
    </ul>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#descriptor-index">Descriptor index</a>

   <li class=no-num><a href="#index">Index</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p><em>This section is not normative.</em>

  <p>CSS 2.1 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
   specifies an <a
   href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">
   initial containing block</a> for continuous media that has the dimensions
   of the <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">
   viewport</a>. Mobile/handheld device browsers have a viewport that is
   generally a lot narrower than a desktop browser window at a zoom level
   that gives a CSS pixel size <a
   href="http://www.w3.org/TR/CSS21/syndata.html#length-units">recommended
   </a> by CSS 2.1.

  <p>The narrow viewport is a problem for documents designed to look good in
   desktop browsers. The result is that mobile browser vendors use a fixed
   initial containing block size that is different from the viewport size,
   and close to that of a typical desktop browser window. In addition to
   scrolling or panning, zooming is often used to change between an overview
   of the document and zoom in on particular areas of the document to read
   and interact with.

  <p>Certain DOCTYPEs (for instance XHTML Mobile Profile) are used to
   recognize mobile documents which are assumed to be designed for handheld
   devices, hence using the viewport size as the initial containing block
   size.

  <p>Additionally, an HTML <code class=html>META</code> tag has been
   introduced for allowing an author to specify the size of the initial
   containing block, and the initial zoom factor directly. It was first
   implemented by Apple for the Safari/iPhone browser, but has since been
   implemented for the Opera, Android, and Fennec browsers. These
   implementations are not fully interoperable and this specification is an
   attempt at standardizing the functionality provided by the viewport <code
   class=html>META</code> tag in CSS.

  <h2 id=values><span class=secno>2. </span>Values</h2>

  <p>This specification follows the <a
   href="http://www.w3.org/TR/css3-syntax/#property-defs">CSS property
   definition conventions</a> from <a href="#CSS3SYN"
   rel=biblioentry>[CSS3SYN]<!--{{!CSS3SYN}}--></a>.

  <p>Value types are defined in <a href="#CSS3VAL"
   rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a>.

  <h2 id=the-viewport><span class=secno>3. </span>The viewport</h2>

  <p>In CSS 2.1 a <a
   href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a> is a
   feature of a user agent for continuous media and used to establish the
   initial containing block for continuous media. For paged media, the
   initial containing block is based on the page area. The page area can be
   set through @page rules. Hence, @viewport applies to continuous media, and
   @page to paged media, and they will not interact or conflict.

  <p>This specification introduces a way of overriding the size of the
   viewport provided by the user agent (UA). Because of this, we need to
   introduce the difference between the <a href="#initial-viewport">initial
   viewport</a> and the <a href="#actual-viewport">actual viewport</a>.

  <dl>
   <dt><dfn id=initial-viewport>initial viewport</dfn>

   <dd>This refers to the viewport before any UA or author styles have
    overridden the viewport given by the window or viewing area of the UA.
    Note that the initial viewport size will change with the size of the
    window or viewing area.

   <dt><dfn id=actual-viewport>actual viewport</dfn>

   <dd>This is the viewport you get after the cascaded viewport descriptors,
    and the following <a href="#constraining-procedure">constraining
    procedure</a> have been applied.
  </dl>

  <p>When the <a href="#actual-viewport">actual viewport</a> cannot fit
   inside the window or viewing area, either because the <a
   href="#actual-viewport">actual viewport</a> is larger than the <a
   href="#initial-viewport">initial viewport</a> or the zoom factor causes
   only parts of the <a href="#actual-viewport">actual viewport</a> to be
   visible, the UA should offer a scrolling or panning mechanism.

  <p>It is recommended that initially the upper-left corners of the <a
   href="#actual-viewport"> actual viewport</a> and the window or viewing
   area are aligned if the base direction of the document is ltr. Similarly,
   that the upper-right corners are aligned when the base direction is rtl.
   The base direction for a document is defined as the computed value of the
   <code class=property>direction</code> property for the first <code
   class=html>BODY</code> element of an HTML or XHTML document. For other
   document types, it is the computed <code class=property>direction</code>
   for the root element.

  <p class=issue>"dbaron: The question is, what does this do on the desktop
   browser? (And what's a desktop browser)". Need to say that a "desktop"
   browser typically have no UA styles, as opposed to the <a
   href="#ua-stylesheet">UA stylesheet</a> outlined for current mobile
   behaviour, and that no UA styles for @viewport will give "desktop"
   behaviour per default (actual viewport is initial viewport).

  <h2 id=the-atviewport-rule><span class=secno>4. </span>The <code
   class=css>@viewport</code> rule</h2>

  <p>The <code class=css>@viewport</code> <a
   href="http://www.w3.org/TR/CSS21/syndata.html#at-rules">at-rule</a>
   consists of the @-keyword followed by a block of descriptors describing
   the viewport.

  <p>The descriptors inside an <code class=css>@viewport</code> rule are per
   document and there is no inheritance involved. Hence declarations using
   the ‘<code class=css>inherit</code>’ keyword will be dropped. They
   work similarly to <code class=css>@page</code> descriptors and follow the
   cascading order of CSS. Hence, descriptors in <code
   class=css>@viewport</code> rules will override descriptors from preceding
   rules. The declarations allow !important which will affect cascading of
   descriptors accordingly.

  <p class=issue>Should the @viewport rule apply to top-level documents only?
   If not, we need to say something about different zoom factors in frames.

  <div class=example>
   <p>This example sets the viewport to at least 320px, but otherwise match
    window width if it is wider than 320px. Note that it is enough to set the
    width as the height will be resolved from the width when auto.

   <pre><!--
	-->@viewport {
<!--    -->  width: 320px auto;
<!--    -->}<!--
   --></pre>
  </div>

  <h3 id=syntax><span class=secno>4.1. </span>Syntax</h3>

  <p>The syntax for the <code class=css>@viewport</code> rule is as follows
   (using the notation from the <a
   href="http://www.w3.org/TR/CSS21/grammar.html">Grammar appendix</a> of CSS
   2.1 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>):

  <pre><!--
    -->viewport
<!---->  : VIEWPORT_SYM S*
<!---->    '{' S* declaration? [ ';' S* declaration? ]* '}' S*<!--
      -->;</pre>

  <p>with the new token:

  <pre>@{V}{I}{E}{W}{P}{O}{R}{T} {return VIEWPORT_SYM;}</pre>

  <p> where:

  <pre>V               v|\\0{0,4}(56|76)(\r\n|[ \t\r\n\f])?|\\v
<!--  -->W               w|\\0{0,4}(57|77)(\r\n|[ \t\r\n\f])?|\\w</pre>

  <p>The <code>viewport</code> non-terminal is added to the
   <code>stylesheet</code> production along with the <code>ruleset</code>,
   <code>media</code>, and <code>page</code> non-terminals:

  <pre><!--
      -->stylesheet
<!--  -->  : [ CHARSET_SYM STRING ';' ]?
<!--  -->    [S|CDO|CDC]* [ import [ CDO S* | CDC S* ]* ]*
<!--  -->    [ [ ruleset | media | page | viewport ] [ CDO S* | CDC S* ]* ]*
<!--  -->  ;<!--
 --></pre>

  <p>It is also added to media production to allow <code
   class=css>@viewport</code> rules nested inside <code
   class=css>@media</code> rules <span class=note>This is extending the CSS
   2.1 syntax. A draft of CSS3 Paged Media also allows page inside
   @media.</span>:

  <pre><!--
      -->media
<!--  -->  : MEDIA_SYM S* media_list LBRACE S* [ ruleset | viewport ]* '}' S*
<!--  -->  ;<!--
 --></pre>

  <h2 id=viewport-descriptors><span class=secno>5. </span>Viewport
   descriptors</h2>

  <p>This section presents the descriptors that are allowed inside an <code
   class=css>@viewport</code> rule. Other descriptors than those listed here
   will be dropped.

  <p>Relative length values are resolved against initial values. For instance
   ‘<code class=property>em</code>’s are resolved against the initial
   value of the <code class=property>font-size</code> property. Viewport
   lengths (vw, vh, vmin, vmax) are relative to the initial viewport.

  <h3 id=the-lsquomin-widthrsquo-and-lsquomax-wid><span class=secno>5.1.
   </span>The ‘<a href="#min-width"><code
   class=descriptor>min-width</code></a>’ and ‘<a href="#max-width"><code
   class=descriptor>max-width</code></a>’ descriptors</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=min-width>min-width</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto" title="auto!!length">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>Refer to the width of the <a href="#initial-viewport">initial
      viewport</a>

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto"><code class=css
      title="auto!!length">auto</code></a>’, an absolute length, or a
      percentage as specified
  </table>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=max-width>max-width</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto" title="auto!!length">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>Refer to the width of the <a href="#initial-viewport">initial
      viewport</a>

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto"><code class=css
      title="auto!!length">auto</code></a>’, an absolute length, or a
      percentage as specified
  </table>

  <p>Specifies the minimum and maximum width of the <a
   href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a> that
   is used to set the size of the <a
   href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">
   initial containing block</a> where

  <p style="margin: 1em"><var><dfn
   id=ltviewport-lengthgt>&lt;viewport-length&gt;</dfn></var> = auto |
   <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var>

  <p>and the values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=auto
    title="auto!!length">auto</dfn></code>’

   <dd>The used value is calculated from the other descriptors' values
    according to the <a href="#constraining-procedure">constraining
    procedure</a>.

   <dt><var>&lt;length&gt;</var>

   <dd>
    <p>A non-negative absolute or relative length.

   <dt><var>&lt;percentage&gt;</var>

   <dd>
    <p>A percentage value relative to the width or height of the <a
     href="#initial-viewport">initial viewport</a> at zoom factor 1.0, for
     horizontal and vertical lengths respectively. Must be non-negative.
  </dl>

  <p>The min-width and max-width descriptors are inputs to the <a
   href="#constraining-procedure">constraining procedure</a>. The width will
   initially be set as close as possible to the <a
   href="#initial-viewport">initial viewport</a> width within the min/max
   constraints.

  <h3 id=the-lsquowidthrsquo-shorthand-descriptor><span class=secno>5.2.
   </span>The ‘<a href="#width"><code class=descriptor>width</code></a>’
   shorthand descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=width>width</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>{1,2}

    <tr>
     <td><em>Initial:</em>

     <td>See individual descriptors

    <tr>
     <td><em>Percentages:</em>

     <td>See individual descriptors

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>See individual descriptors
  </table>

  <p>This is a shorthand descriptor for setting both min-width and max-width.
   One <a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a> value will
   set both min-width and max-width to that value. Two <a
   href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a> values will set
   min-width to the first and max-width to the second.

  <h3 id=the-lsquomin-heightrsquo-and-lsquomax-he><span class=secno>5.3.
   </span>The ‘<a href="#min-height"><code
   class=descriptor>min-height</code></a>’ and ‘<a
   href="#max-height"><code class=descriptor>max-height</code></a>’
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=min-height>min-height</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto" title="auto!!length">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>Refer to the height of the <a href="#initial-viewport">initial
      viewport</a>

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto"><code class=css
      title="auto!!length">auto</code></a>’, an absolute length, or a
      percentage as specified
  </table>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=max-height>max-height</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto" title="auto!!length">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>Refer to the height of the <a href="#initial-viewport">initial
      viewport</a>

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto"><code class=css
      title="auto!!length">auto</code></a>’, an absolute length, or a
      percentage as specified
  </table>

  <p>Specifies the minimum and maximum height of the <a
   href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a> that
   is used to set the size of the <a
   href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">
   initial containing block</a>.

  <p>The min-height and max-height descriptors are inputs to the <a
   href="#constraining-procedure">constraining procedure</a>. The height will
   initially be set as close as possible to the <a
   href="#initial-viewport">initial viewport</a> height within the min/max
   constraints.

  <h3 id=the-lsquoheightrsquo-shorthand-descripto><span class=secno>5.4.
   </span>The ‘<a href="#height"><code
   class=descriptor>height</code></a>’ shorthand descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=height>height</dfn>

    <tr>
     <td><em>Value:</em>

     <td><a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>{1,2}

    <tr>
     <td><em>Initial:</em>

     <td>See individual descriptors

    <tr>
     <td><em>Percentages:</em>

     <td>See individual descriptors

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>See individual descriptors
  </table>

  <p>This is a shorthand descriptor for setting both min-height and
   max-height. One <a href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a>
   value will set both min-height and max-height to that value. Two <a
   href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a> values will set
   min-height to the first and max-height to the second.

  <h3 id=the-lsquozoomrsquo-descriptor><span class=secno>5.5. </span>The
   ‘<code class=descriptor title="zoom!!descriptor">zoom</code>’
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=zoom>zoom</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto0" title="auto!!zoom">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>The zoom factor itself

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto0"><code class=css
      title="auto!!zoom">auto</code></a>’, or a non-negative number or
      percentage as specified.
  </table>

  <p>Specifies the initial zoom factor for the window or viewing area. This
   is a magnifying glass type of zoom. Interactively changing the zoom factor
   from the initial zoom factor does not affect the size of the initial or
   the actual viewport.

  <p>Values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=auto0
    title="auto!!zoom">auto</dfn></code>’

   <dd>The zoom factor is UA-dependent. The UA may use the size of the area
    of the canvas on which the document is rendered to find that initial zoom
    factor. See <a href="#handling-auto-zoom">this section</a> for a proposed
    way of handling ‘<a href="#auto0"><code class=css
    title="auto!!zoom">auto</code></a>’ values for ‘<code
    class=descriptor title="zoom!!descriptor">zoom</code>’.

   <dt><var>&lt;number&gt;</var>

   <dd>
    <p>A non-negative number used as a zoom factor. A factor of 1.0 means
     that no zooming is done. Values larger than 1.0 gives a zoomed-in effect
     and values smaller than 1.0 a zoomed-out effect.

   <dt><var>&lt;percentage&gt;</var>

   <dd>
    <p>A non-negative percentage value used as a zoom factor. A factor of
     100% means that no zooming is done. Values larger than 100% gives a
     zoomed-in effect and values smaller than 100% a zoomed-out effect.
  </dl>

  <h3 id=the-lsquomin-zoomrsquo-descriptor><span class=secno>5.6. </span>The
   ‘<a href="#min-zoom"><code class=descriptor>min-zoom</code></a>’
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=min-zoom>min-zoom</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto1" title="auto!!min-zoom">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>The zoom factor itself

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto1"><code class=css
      title="auto!!min-zoom">auto</code></a>’, or a non-negative number or
      percentage as specified.
  </table>

  <p>Specifies the smallest allowed zoom factor. It is used as input to the
   <a href="#constraining-procedure">constraining procedure</a> to constrain
   non-‘<a href="#auto0"><code class=css
   title="auto!!zoom">auto</code></a>’ ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ values, but also to limit the
   allowed zoom factor that can be set through user interaction. The UA
   should also use this value as a constraint when choosing an actual zoom
   factor when the used value of ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ is ‘<a href="#auto0"><code
   class=css title="auto!!zoom">auto</code></a>’.

  <p>Values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=auto1
    title="auto!!min-zoom">auto</dfn></code>’

   <dd>The lower limit on zoom factor is UA dependant. There will be no
    minimum value constraint on the ‘<code class=descriptor
    title="zoom!!descriptor">zoom</code>’ descriptor used in the <a
    href="#constraining-procedure">constraining procedure</a>

   <dt><var>&lt;number&gt;</var>

   <dd>
    <p>A non-negative number limiting the minimum value of the zoom factor.

   <dt><var>&lt;percentage&gt;</var>

   <dd>
    <p>A non-negative percentage limiting the minimum value of the zoom
     factor.
  </dl>

  <h3 id=the-lsquomax-zoomrsquo-descriptor><span class=secno>5.7. </span>The
   ‘<a href="#max-zoom"><code class=descriptor>max-zoom</code></a>’
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=max-zoom>max-zoom</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto2" title="auto!!max-zoom">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>The zoom factor itself

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto2"><code class=css
      title="auto!!max-zoom">auto</code></a>’, or a non-negative number or
      percentage as specified.
  </table>

  <p>Specifies the largest allowed zoom factor. It is used as input to the <a
   href="#constraining-procedure">constraining procedure</a> to constrain
   non-‘<a href="#auto0"><code class=css
   title="auto!!zoom">auto</code></a>’ ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ values, but also to limit the
   allowed zoom factor that can be set through user interaction. The UA
   should also use this value as a constraint when choosing an actual zoom
   factor when the used value of ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ is ‘<a href="#auto0"><code
   class=css title="auto!!zoom">auto</code></a>’.

  <p>Values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=auto2
    title="auto!!max-zoom">auto</dfn></code>’

   <dd>The upper limit on zoom factor is UA dependant. There will be no
    maximum value constraint on the ‘<a href="#zoom"><code
    class=descriptor>zoom</code></a>’ descriptor used in the <a
    href="#constraining-procedure">constraining procedure</a>

   <dt><var>&lt;number&gt;</var>

   <dd>
    <p>A non-negative number limiting the maximum value of the zoom factor.

   <dt><var>&lt;percentage&gt;</var>

   <dd>
    <p>A non-negative percentage limiting the maximum value of the zoom
     factor.
  </dl>

  <h3 id=the-lsquouser-zoomrsquo-descriptor><span class=secno>5.8. </span>The
   ‘<a href="#user-zoom"><code class=descriptor>user-zoom</code></a>’
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=user-zoom>user-zoom</dfn>

    <tr>
     <td><em>Value:</em>

     <td>zoom | fixed

    <tr>
     <td><em>Initial:</em>

     <td><a href="#zoom0" title="zoom!!value">zoom</a>

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#zoom0"><code class=css
      title="zoom!!value">zoom</code></a>’ or ‘<a href="#fixed"><code
      class=css>fixed</code></a>’ as specified.
  </table>

  <p>Specifies if the zoom factor can be changed by user interaction or not.

  <p>Values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=zoom0
    title="zoom!!value">zoom</dfn></code>’

   <dd>The user can interactively change the zoom factor.

   <dt>‘<code class=css><dfn id=fixed>fixed</dfn></code>’

   <dd>The user cannot interactively change the zoom factor.
  </dl>

  <h3 id=the-lsquoorientationrsquo-descriptor><span class=secno>5.9.
   </span>The ‘<a href="#orientation"><code
   class=descriptor>orientation</code></a>’ descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=orientation>orientation</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | portrait | landscape

    <tr>
     <td><em>Initial:</em>

     <td><a href="#auto3" title="auto!!orientation">auto</a>

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual, continuous

    <tr>
     <td><em>Computed value:</em>

     <td>‘<a href="#auto3"><code class=css
      title="auto!!orientation">auto</code></a>’, ‘<a
      href="#portrait"><code class=css>portrait</code></a>’, or ‘<a
      href="#landscape"><code class=css>landscape</code></a>’ as specified.
  </table>

  <p>This descriptor is used to request that a document is displayed in
   portrait or landscape mode. For a UA/device where the orientation is
   changed upon tilting the device, an author can use this descriptor to
   inhibit the orientation change. The descriptor should be respected for
   standalone web applications, and when the document is displayed in
   fullscreen. It is recommended that it is ignored for normal web navigation
   to avoid confusing the user.

  <p>Values have the following meanings:

  <dl>
   <dt>‘<code class=css><dfn id=auto3
    title="auto!!orientation">auto</dfn></code>’

   <dd>The UA automatically chooses the orientation based on the device's
    normal mode of operation. The UA may choose to change the orientation of
    the presentation when the device is tilted.

   <dt>‘<code class=css><dfn id=portrait>portrait</dfn></code>’

   <dd>The document should be locked to portrait presentation.

   <dt>‘<code class=css><dfn id=landscape>landscape</dfn></code>’

   <dd>The document should be locked to landscape presentation.
  </dl>

  <h2 id=constraining-viewport-descriptor-values><span class=secno>6.
   </span>Constraining viewport descriptor values</h2>

  <h3 id=definitions><span class=secno>6.1. </span>Definitions</h3>

  <p>For the procedure below:

  <p>Descriptors refer to the values resolved/constrained to at that point in
   the procedure. They are initially resolved to their computed values.

  <p><code class=index id=width0 title="width!!resolved">width</code> and
   <code class=index id=height0 title="height!!resolved">height</code> refer
   to the resolved viewport size and not the shorthand descriptors. They are
   both initially ‘<a href="#auto"><code class=css
   title="auto!!length">auto</code></a>’.

  <p> <code>MIN/MAX</code> computations where one of the arguments is
   ‘<code class=css>auto</code>’ resolve to the other argument. For
   instance, <code>MIN(0.25, 'auto') = 0.25</code>, and <code>MAX(5, 'auto')
   = 5</code>.

  <p> <code class=index id=initial-width
   title="width!!initial">initial-width</code> is the width of the <a
   href="#initial-viewport">initial viewport</a> in pixels at zoom factor
   1.0.

  <p> <code class=index id=initial-height
   title="height!!initial">initial-height</code> is the height of the <a
   href="#initial-viewport">initial viewport</a> in pixels at zoom factor
   1.0.

  <h3 id=constraining-procedure><span class=secno>6.2. </span>The procedure</h3>

  <p>The used values are resolved from the computed values going through the
   steps below.

  <p>User agents are expected, but not required, to re-run this procedure and
   re-layout the document, if necessary, in response to changes in the user
   environment, for example if the device is tilted from landscape to
   portrait mode or the window that forms the <a
   href="#initial-viewport">initial viewport</a> is resized.

  <p>However, Media Queries and Device Adaption are <dfn
   id=tethered-specifications
   title="Specifications       whose evaluations are both affected by the same changes to the user        environment, and so always must be evaluated together in order to ensure        proper rendering.">tethered
   specifications</dfn>. As a result, UAs that also support <a
   href="http://www.w3.org/TR/css3-mediaqueries/">Media Queries</a> must
   re-run this procedure and re-layout the document in all cases where
   changes in the user environment would cause them to re-evaluate Media
   Queries.

  <h4 class="no-num no-toc" id=resolve-min-zoom-and-max-zoom-values>Resolve
   <code title="min-zoom!!resolved">min-zoom</code> and <code
   title="max-zoom!!resolved">max-zoom</code> values</h4>

  <ol>
   <li>If <code title="min-zoom!!resolved">min-zoom</code> is not ‘<a
    href="#auto1"><code class=css title="auto!!min-zoom">auto</code></a>’
    and <code title="max-zoom!!resolved">max-zoom</code> is not ‘<a
    href="#auto2"><code class=css title="auto!!max-zoom">auto</code></a>’,
    set <code>max-zoom = MAX(min-zoom, max-zoom)</code>
  </ol>

  <h4 class="no-num no-toc"
   id=constrain-zoom-value-to-the-min-zoom-max>Constrain <code
   title="zoom!!resolved">zoom</code> value to the <code>[min-zoom,
   max-zoom]</code> range</h4>

  <ol id=ol2>
   <li>If <code title="zoom!!resolved">zoom</code> is not ‘<a
    href="#auto0"><code class=css title="auto!!zoom">auto</code></a>’, set
    <code>zoom = MAX(min-zoom, MIN(max-zoom, zoom))</code>
  </ol>

  <h4 class="no-num no-toc" id=resolve-px>Resolve non-‘<a
   href="#auto"><code class=css title="auto!!length">auto</code></a>’
   lengths to pixel lengths</h4>

  <ol id=ol3>
   <li>Resolve absolute lengths and percentages to pixel values for the ‘<a
    href="#min-width"><code class=descriptor>min-width</code></a>’, ‘<a
    href="#max-width"><code class=descriptor>max-width</code></a>’, ‘<a
    href="#min-height"><code class=descriptor>min-height</code></a>’, and
    ‘<a href="#max-height"><code class=descriptor>max-height</code></a>’
    descriptors.
  </ol>

  <h4 class="no-num no-toc"
   id=resolve-initial-width-and-height-from-mi>Resolve initial <code
   title="width!!resolved">width</code> and <code
   title="height!!resolved">height</code> from min/max descriptors</h4>

  <ol id=ol4>
   <li>If <code title="min-width!!resolved">min-width</code> or <code
    title="max-width!!resolved">max-width</code> is not ‘<a
    href="#auto"><code class=css title="auto!!length">auto</code></a>’, set
    <code>width = MAX(min-width, MIN(max-width, initial-width))</code>

   <li>If <code title="min-height!!resolved">min-height</code> or <code
    title="max-height!!resolved">max-height</code> is not ‘<a
    href="#auto"><code class=css title="auto!!length">auto</code></a>’, set
    <code>height = MAX(min-height, MIN(max-height, initial-height))</code>
  </ol>

  <h4 class="no-num no-toc" id=resolve-width-value>Resolve <code
   title="width!!resolved">width</code> value</h4>

  <ol id=ol6>
   <li>If <code title="width!!resolved">width</code> and <code
    title="height!!resolved">height</code> are both ‘<code
    class=css>auto</code>’, set <code>width = initial-width</code>

   <li>If <code title="width!!resolved">width</code> is ‘<code
    class=css>auto</code>’, set <code>width = height * (initial-width /
    initial-height)</code>, or <code>width = initial-width</code> if <code
    class=index id=initial-height0
    title="height!!initial">initial-height</code> is 0.
  </ol>

  <h4 class="no-num no-toc" id=resolve-height-value>Resolve <code
   title="height!!resolved">height</code> value</h4>

  <ol id=ol8>
   <li>If <code title="height!!resolved">height</code> is ‘<code
    class=css>auto</code>’, set <code>height = width * (initial-height /
    initial-width)</code>, or <code>height = initial-height</code> if <code
    class=index id=initial-width0 title="width!!initial">initial-width</code>
    is 0.
  </ol>

  <h2 id=media-queries><span class=secno>7. </span>Media Queries</h2>

  <p>For several media features, the size of the initial containing block and
   the orientation of the device affects the result of a media query
   evaluation, which means that the effect of <code
   class=css>@viewport</code> rules on media queries needs extra attention.

  <p>From the Media Queries specification <a href="#MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{!MEDIAQ}}--></a>:

  <blockquote>
   <p>“To avoid circular dependencies, it is never necessary to apply the
    style sheet in order to evaluate expressions. For example, the aspect
    ratio of a printed document may be influenced by a style sheet, but
    expressions involving ‘device-aspect-ratio’ will be based on the
    default aspect ratio of the user agent.”
  </blockquote>

  <p>For <code class=css>@viewport</code> rules, though, the UA must cascade
   them separately with the <a href="#initial-viewport">initial viewport</a>
   size used for evaluating media feature expressions and other values that
   depend on the viewport size to avoid circular dependencies, but use the
   actual viewport size when cascading all other rules.

  <p>Procedure for applying CSS rules:

  <ol>
   <li>Cascade all <code class=css>@viewport</code> rules using the <a
    href="#initial-viewport">initial viewport</a> size for values and
    evaluations which rely on viewport size

   <li>Compute the <a href="#actual-viewport">actual viewport</a> from the
    cascaded viewport descriptors

   <li>Cascade all other rules using the <a href="#actual-viewport">actual
    viewport</a> size
  </ol>

  <p class=note>The rationale for using the viewport descriptors obtained
   from applying the <code class=css>@viewport</code> rules for evaluating
   media queries for style rules, is that media queries should match the <a
   href="#actual-viewport">actual viewport</a> that the document will be
   layed out in and not the initial or the one specified in the UA
   stylesheet. Consider the example below given that the UA stylesheet has a
   viewport width of 980px, but an <a href="#initial-viewport">initial
   viewport</a> width of 320px. The author has made separate styles to make
   the document look good for initial containing block widths above or below
   400px. The <a href="#actual-viewport">actual viewport</a> used will be
   320px wide, and in order to match the styles with the <a
   href="#actual-viewport">actual viewport</a> width, the viewport resulting
   from applying the <code class=css>@viewport</code> rules should be used to
   evaluate the media queries.

  <div class=example>
   <p>Given an initial viewport width of 320px and a UA stylesheet viewport
    width of 980px, the first media query will not match, but the second
    will.

   <pre><!--
	-->@viewport {
<!--    -->  width: auto;
<!--    -->}
<!--    -->
<!--    -->@media screen and (min-width: 400px) {
<!--    -->  div { color: red; }
<!--    -->}
<!--    -->
<!--    -->@media screen and (max-width: 400px) {
<!--    -->  div { color: green; }
<!--    -->}<!--
   --></pre>
  </div>

  <p>Another example:

  <div class=example>
   <p>The media query below should match because the <code
    class=css>@viewport</code> rule is applied before the media query is
    evaluated.

   <pre><!--
	-->@media screen and (width: 397px) {
<!--    -->  div { color: green; }
<!--    -->}
<!--    -->
<!--    -->@viewport {
<!--    -->  width: 397px;
<!--    -->}<!--
   --></pre>
  </div>

  <p>Below is an example where an <code class=css>@viewport</code> rule
   relies on a media query affected by the viewport descriptors.

  <div class=example>
   <p>The green color should be applied to a div because the <a
    href="#initial-viewport">initial viewport</a> width is used to evaluate
    the media query for the second <code class=css>@viewport</code> rule, but
    the <a href="#actual-viewport">actual viewport</a> is used for evaluating
    the media query when applying style rules.

   <pre><!--
        -->@viewport {
<!--    -->  width: 397px;
<!--    -->}
<!--    -->
<!--    -->@media screen and (width: 397px) {
<!--    -->  @viewport {
<!--    -->    width: 500px;
<!--    -->  }
<!--    -->}
<!--    -->
<!--    -->@media screen and (width: 397px) {
<!--    -->  div { color: green; }
<!--    -->}<!--
   --></pre>
  </div>

  <p>It is recommended that authors do not write <code
   class=css>@viewport</code> rules that rely on media queries whose
   evaluation is affected by viewport descriptors. Is is also recommended
   that the <code class=css>@viewport</code> rule(s) is placed as early in
   the document as possible to avoid unnecessary re-evaluation of media
   queries or reflows.

  <h2 id=cssom><span class=secno>8. </span>CSSOM</h2>

  <p class=issue>Properties in the CSSOM and CSSOM View specifications refer
   to the <span>viewport</span> and the <span>initial containing
   block</span>. If any of those properties should refer to the <a
   href="#initial-viewport">initial viewport</a> and not the <a
   href="#actual-viewport">actual viewport</a>, those exceptions need to be
   adressed.

  <h2 id=dom-interfaces><span class=secno>9. </span>DOM Interfaces</h2>

  <p>The <code class=css>@viewport</code> rule is exposed to the CSSOM
   through a new CSSRule interface

  <dl>
   <dt> <b>Interface <i><a id=DOM-CSSRule
    name=DOM-CSSRule>CSSRule</a></i></b>

   <dd>
    <p>The following rule type is added to the <code>CSSRule</code>
     interface. It provides identification for the new viewport rule.

    <dl>
     <dt> <b>IDL Definition</b>

     <dd>
      <div class=idl-code>
       <pre><!--
                -->interface CSSRule {
<!--            -->    ...
<!--            -->    const unsigned short VIEWPORT_RULE = 15;
<!--            -->    ...
<!--            -->};<!--
           --></pre>
      </div>
    </dl>

   <dt> <b>Interface <i><a id=DOM-CSSViewportRule
    name=DOM-CSSViewportRule>CSSViewportRule</a></i></b>

   <dd>
    <p>The <code>CSSViewportRule</code> interface represents the style rule
     for an <code class=css>@viewport</code> rules

    <dl>
     <dt> <b>IDL Definition</b>

     <dd>
      <div class=idl-code>
       <pre><!--
                -->interface CSSViewportRule : CSSRule {
<!--            -->  readonly attribute CSSStyleDeclaration style;
<!--            -->};<!--
           --></pre>
      </div>

     <dt> <b>Attributes</b>

     <dd>
      <dl>
       <dt> <code class=attribute-name><a id=DOM-CSSViewportRule-style
        name=DOM-CSSViewportRule-style>style</a></code> of type
        <code>CSSStyleDeclaration</code>

       <dd> This attribute represents the viewport descriptors associated
        with this <code class=css>@viewport</code> rule.
      </dl>

     <dt> <b>No Methods</b>
    </dl>
  </dl>

  <h2 id=conformance><span class=secno>10. </span>Conformance</h2>

  <p>Requirements for a conforming UA:

  <ul>
   <li>
    <p>The ‘<a href="#min-width"><code
     class=descriptor>min-width</code></a>’, ‘<a href="#max-width"><code
     class=descriptor>max-width</code></a>’, ‘<a href="#width"><code
     class=descriptor>width</code></a>’, ‘<a href="#min-height"><code
     class=descriptor>min-height</code></a>’, ‘<a
     href="#max-height"><code class=descriptor>max-height</code></a>’, and
     ‘<a href="#height"><code class=descriptor>height</code></a>’
     descriptors must be supported.

   <li>
    <p>The ‘<a href="#min-zoom"><code
     class=descriptor>min-zoom</code></a>’, ‘<a href="#max-zoom"><code
     class=descriptor>max-zoom</code></a>’, and ‘<code class=descriptor
     title="zoom!!descriptor">zoom</code>’ descriptors must be supported as
     input to the <a href="#constraining-procedure">constraining
     procedure</a>. However, the UA may choose to use a different zoom factor
     when presenting the document to the user, and use different minimum and
     maximum zoom limits for the user interaction.

    <p>This will for instance allow UAs without zooming capabilities to
     conform and still have interoperable implementations when it comes to
     viewport dimensions. It will also allow the UA to choose a different
     zoom factor when content overflows the <a href="#actual-viewport">actual
     viewport</a>.

   <li>
    <p>Support for the ‘<a href="#user-zoom"><code
     class=descriptor>user-zoom</code></a>’ and ‘<a
     href="#orientation"><code class=descriptor>orientation</code></a>’
     descriptors is optional.
  </ul>

  <h2 id=viewport-meta><span class=secno>11. </span>Viewport <code
   class=html>META</code> element</h2>

  <p><em>This section is not normative.</em>

  <p>This section describes a mapping from the content attribute of the
   viewport <code class=html>META</code> element, first implemented by Apple
   in the iPhone Safari browser, to the descriptors of the <code
   class=css>@viewport</code> rule described in this specification.

  <p>In order to match the Safari implementation, the following parsing
   algorithm and translation rules rely on the UA stylesheet below. See the
   section on <a href="#ua-stylesheet">UA stylesheets</a> for an elaborate
   description.

  <pre><!--
      -->@viewport {
<!--  -->  width: extend-to-zoom 980px;
<!--  -->  min-zoom: 0.25;
<!--  -->  max-zoom: 5;
<!--  -->}<!--
 --></pre>

  <p class=note>Note that these values might not fit well with all UAs. For
   instance, with a min-zoom of 0.25 you will be able to fit the whole width
   of the document inside the window for widths up to 1280px on a 320px wide
   device like the original iPhone, but only 960px if you have a 240px
   display (all widths being given in CSS pixel units).

  <h3 id=meta-properties><span class=secno>11.1. </span>Properties</h3>

  <p>The recognized properties in the viewport <code class=html>META</code>
   element are:

  <ul>
   <li><code class=index id=width1 title="width!!viewport META">width</code>

   <li><code class=index id=height1
    title="height!!viewport META">height</code>

   <li><code class=index id=initial-scale>initial-scale</code>

   <li><code class=index id=minimum-scale>minimum-scale</code>

   <li><code class=index id=maximum-scale>maximum-scale</code>

   <li><code class=index id=user-scalable>user-scalable</code>
  </ul>

  <h3 id=parsing-algorithm><span class=secno>11.2. </span>Parsing algorithm</h3>

  <p>Below is an algorithm for parsing the <code class=html>content</code>
   attribute of the <code class=html>META</code> tag produced from testing
   Safari on the iPhone. <span class=note id=tested-safari>The testing was
   done on an iPod touch running iPhone OS 4. The UA string of the browser:
   <code>"Mozilla/5.0 (iPod; U; CPU iPhone OS 4_0 like Mac OS X; en-us)
   AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293
   Safari/6531.22.7"</code>.</span> The pseudo code notation used is based on
   the notation used in <a href="#Algorithms"
   rel=biblioentry>[Algorithms]</a>.

  <p>The whitespace class contains the following characters (ascii):

  <ul>
   <li>Horizontal tab (0x09)

   <li>Line feed (0x0a)

   <li>Carriage return (0x0d)

   <li>Space (0x20)
  </ul>

  <p>The recognized separator between property/value pairs is comma for the
   Safari implementation. Some implementations have supported both commas and
   semicolons. Because of that, existing content use semicolons instead of
   commas. Authors should be using comma in order to ensure content works as
   expected in all UAs, but implementors may add support for both to ensure
   interoperability for existing content.

  <p>The separator class contains the following characters (ascii), with
   comma as the preferred separator and semicolon as optional:

  <ul>
   <li>Comma (0x2c)

   <li>Semicolon (0x3b)
  </ul>

  <pre class=algorithm><!--
    --><span class=method><span
   class=method-name>Parse-Content</span>(<span
   class=variable>S</span>)</span>
<!----><span class=statement><span
   class=variable>i</span> ← 1</span>
<!----><span class=statement><span
   class=keyword>while</span> <span class=variable>i</span> ≤ <span
   class=op>length</span>[<span class=variable>S</span>]</span>
<!----><span
   class=statement>    <span class=keyword>do</span> <span
   class=keyword>while</span> <span class=variable>i</span> ≤ <span
   class=op>length</span>[<span class=variable>S</span>] and <span
   class=variable>S</span>[<span
   class=variable>i</span>] in [whitespace, separator, '=']</span>
<!----><span
   class=statement>        <span class=keyword>do</span> <span
   class=variable>i</span> ← <span class=variable>i</span> + 1</span>
<!----><span
   class=statement>    <span class=keyword>if</span> <span
   class=variable>i</span> ≤ <span class=op>length</span>[<span
   class=variable>S</span>]</span>
<!----><span
   class=statement>        <span class=keyword>then</span> <span
   class=variable>i</span> ← <span
   class=method-name>Parse-Property</span>(<span
   class=variable>S</span>, <span class=variable>i</span>)</span>
<!---->
<!----><span
   class=method><span class=method-name>Parse-Property</span>(<span
   class=variable>S</span>, <span class=variable>i</span>)</span>
<!----><span
   class=statement><span class=variable>start</span> ← <span
   class=variable>i</span></span>
<!----><span class=statement><span
   class=keyword>while</span> <span class=variable>i</span> ≤ <span
   class=op>length</span>[<span class=variable>S</span>] and <span
   class=variable>S</span>[<span class=variable>i</span>] <span
   class=keyword>not</span> in [whitespace, separator, '=']</span>
<!----><span
   class=statement>    <span class=keyword>do</span> <span
   class=variable>i</span> ← <span class=variable>i</span> + 1</span>
<!----><span
   class=statement><span class=keyword>if</span> <span
   class=variable>i</span> &gt; <span class=op>length</span>[<span
   class=variable>S</span>] or <span class=variable>S</span>[<span
   class=variable>i</span>] in [separator]</span>
<!----><span
   class=statement>    <span class=keyword>then</span> <span
   class=keyword>return</span> <span class=variable>i</span></span>
<!----><span
   class=statement><span class=variable>property-name</span> ← <span
   class=variable>S</span>[<span class=variable>start</span> .. (<span
   class=variable>i</span> - 1)]</span>
<!----><span class=statement><span
   class=keyword>while</span> <span class=variable>i</span> ≤ <span
   class=op>length</span>[<span class=variable>S</span>] and <span
   class=variable>S</span>[<span class=variable>i</span>] <span
   class=keyword>not</span> in [separator, '=']</span>
<!----><span
   class=statement>    <span class=keyword>do</span> <span
   class=variable>i</span> ← <span class=variable>i</span> + 1</span>
<!----><span
   class=statement><span class=keyword>if</span> <span
   class=variable>i</span> &gt; <span class=op>length</span>[<span
   class=variable>S</span>] or <span class=variable>S</span>[<span
   class=variable>i</span>] in [separator]</span>
<!----><span
   class=statement>    <span class=keyword>then</span> <span
   class=keyword>return</span> <span class=variable>i</span></span>
<!----><span
   class=statement><span class=keyword>while</span> <span
   class=variable>i</span> ≤ <span class=op>length</span>[<span
   class=variable>S</span>] and <span class=variable>S</span>[<span
   class=variable>i</span>] in [whitespace, '=']</span>
<!----><span
   class=statement>    <span class=keyword>do</span> <span
   class=variable>i</span> ← <span class=variable>i</span> + 1</span>
<!----><span
   class=statement><span class=keyword>if</span> <span
   class=variable>i</span> &gt; <span class=op>length</span>[<span
   class=variable>S</span>] or <span class=variable>S</span>[<span
   class=variable>i</span>] in [separator]</span>
<!----><span
   class=statement>    <span class=keyword>then</span> <span
   class=keyword>return</span> <span class=variable>i</span></span>
<!----><span
   class=statement><span class=variable>start</span> ← <span
   class=variable>i</span></span>
<!----><span class=statement><span
   class=keyword>while</span> <span class=variable>i</span> ≤ <span
   class=op>length</span>[<span class=variable>S</span>] and <span
   class=variable>S</span>[<span class=variable>i</span>] <span
   class=keyword>not</span> in [whitespace, separator, '=']</span>
<!----><span
   class=statement>    <span class=keyword>do</span> <span
   class=variable>i</span> ← <span class=variable>i</span> + 1</span>
<!----><span
   class=statement><span class=variable>property-value</span> ← <span
   class=variable>S</span>[<span class=variable>start</span> .. (<span
   class=variable>i</span> - 1)]</span>
<!----><span class=statement><span
   class=method-name>Set-Property</span>(<span
   class=variable>property-name</span>, <span
   class=variable>property-value</span>)</span>
<!----><span
   class=statement><span class=keyword>return</span> <span
   class=variable>i</span></span><!--
 --></pre>

  <p> <span class=method-name>Set-Property</span> matches the <a
   href="#meta-properties">listed property names</a> case-insensitively. The
   <code class=variable>property-value</code> strings are interpreted as
   follows:

  <ol>
   <li>If a prefix of <code class=variable>property-value</code> can be
    converted to a number using <code>strtod</code>, the value will be that
    number. The remainder of the string is ignored.

   <li>If the value can not be converted to a number as described above, the
    whole <code class=variable>property-value</code> string will be matched
    with the following strings case-insensitively: <code class=index
    id=yes>yes</code>, <code class=index id=no>no</code>, <code class=index
    id=device-width title="device-width!!viewport META">device-width</code>,
    <code class=index id=device-height
    title="device-height!!viewport META">device-height</code>

   <li>If the string did not match any of the known strings, the value is
    unknown.
  </ol>

  <h3 id=lsquoextend-to-zoomrsquo><span class=secno>11.3. </span>‘<code
   class=css title=extend-to-zoom>extend-to-zoom</code>’</h3>

  <p>In order to be able to implement the functionality from <code
   class=html>META</code> viewport where the viewport width or height is
   extended to fill the viewing area at a given zoom level, we introduce a UA
   internal value to the list of <a
   href="#ltviewport-lengthgt">&lt;viewport-length&gt;</a> values called
   ‘<code class=css title=extend-to-zoom>extend-to-zoom</code>’ It will
   be used in width and height declarations in the translation outlined in
   the section below.

  <p>This new value is necessary in order to implement the mapping for two
   reasons. First, whether resolving the width/height needs to extend the
   pixel length to the visible width/height for a given zoom factor depends
   on the current initial width/height. <code class=html>&lt;meta
   name="viewport" content="width=400, initial-scale=1"&gt;</code> yields a
   width of 400px for an initial-width of 320px, and 640px for an initial
   width of 640px. This can not be expressed as normative min/max descriptors
   that would constrain correctly when the initial width changes like for an
   orientation change.

  <p>Secondly, the extended width/height also relies on cascading viewport
   properties from different sources, including ‘<a href="#min-zoom"><code
   class=descriptor>min-zoom</code></a>’ and ‘<a href="#max-zoom"><code
   class=descriptor>max-zoom</code></a>’ from the UA stylesheet. For
   instance, if the UA stylesheet has <code class=css>max-zoom: 5</code>, and
   the initial width is 320px, <code class=html>&lt;meta name="viewport"
   content="width=10"&gt;</code> will resolve to 64px.

  <h4 class="no-num no-toc" id=resolving-lsquoextend-to-zoomrsquo>Resolving
   ‘<code class=css title=extend-to-zoom>extend-to-zoom</code>’</h4>

  <p>The ‘<code class=css title=extend-to-zoom>extend-to-zoom</code>’
   value is resolved to pixel or auto lengths as part of <a
   href="#resolve-px">step 3</a> of the <a
   href="#constraining-procedure">constraining procedure</a>. Since this is a
   <em>non-normative</em> descriptor value, the resolution is described here.
   Note that max-descriptors need to be resolved to pixel lengths
   <em>before</em> min-descriptors when ‘<code class=css
   title=extend-to-zoom>extend-to-zoom</code>’ is a valid value.

  <p>Let <code>extend-zoom = MIN(zoom, max-zoom)</code>

  <p>For non-‘<a href="#auto0"><code class=css
   title="auto!!zoom">auto</code></a>’ <code>extend-zoom</code>, let:

  <pre><!--
     -->extend-width = initial-width / extend-zoom
<!-- -->extend-height = initial-height / extend-zoom<!--
 --></pre>

  <p>Then, resolve for ‘<code class=css
   title=extend-to-zoom>extend-to-zoom</code>’ as follows:

  <ul>
   <li>If <code>extend-zoom</code> is ‘<a href="#auto0"><code class=css
    title="auto!!zoom">auto</code></a>’:
    <ol>
     <li>If <code title="max-width!!resolved">max-width</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>max-width = 'auto'</code>

     <li>If <code title="max-height!!resolved">max-height</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>max-height =
      'auto'</code>

     <li>If <code title="min-width!!resolved">min-width</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>min-width =
      max-width</code>

     <li>If <code title="min-height!!resolved">min-height</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>min-height =
      max-height</code>
    </ol>

   <li>If <code>extend-zoom</code> is non-‘<a href="#auto0"><code class=css
    title="auto!!zoom">auto</code></a>’:
    <ol>
     <li>If <code title="max-width!!resolved">max-width</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>max-width =
      extend-width</code>

     <li>If <code title="max-height!!resolved">max-height</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>max-height =
      extend-height</code>

     <li>If <code title="min-width!!resolved">min-width</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>min-width =
      MAX(extend-width, max-width)</code>

     <li>If <code title="min-height!!resolved">min-height</code> is ‘<code
      class=css>extend-to-zoom</code>’, set <code>min-height =
      MAX(extend-height, max-height)</code>
    </ol>
  </ul>

  <h3 id=translation-into-atviewport-descriptors><span class=secno>11.4.
   </span>Translation into <code class=css>@viewport</code> descriptors</h3>

  <p>The Viewport <code class=html>META</code> element is placed in the
   cascade as if it was a <code class=html>STYLE</code> element, in the exact
   same place in the dom, that only contains a single <code
   class=css>@viewport</code> rule.

  <p>Each of the property/value pair from the parsing in the previous section
   are translated, and added to that single at-rule as follows:

  <h4 class="no-num no-toc" id=unknown-properties>Unknown properties</h4>

  <p>Unknown properties are dropped.

  <h4 class="no-num no-toc" id=the-width-and-height-properties>The <code
   class=index id=width2 title="width!!viewport META">width</code> and <code
   class=index id=height2 title="height!!viewport META">height</code>
   properties</h4>

  <p>The <code class=index id=width3
   title="width!!viewport META">width</code> and <code class=index id=height3
   title="height!!viewport META">height</code> viewport <code
   class=html>META</code> properties are translated into ‘<a
   href="#width"><code class=descriptor>width</code></a>’ and ‘<a
   href="#height"><code class=descriptor>height</code></a>’ descriptors,
   setting the ‘<code class=descriptor>min</code>’ value to ‘<code
   class=css>extend-to-zoom</code>’ and the ‘<code
   class=descriptor>max</code>’ value to the length from the viewport <code
   class=html>META</code> property as follows:

  <ol>
   <li>Non-negative number values are translated to pixel lengths, clamped to
    the range: <code>[1px, 10000px]</code>

   <li>Negative number values are dropped

   <li><code class=index id=device-width0
    title="device-width!!viewport META">device-width</code> and <code
    class=index id=device-height0
    title="device-height!!viewport META">device-height</code> translate to
    100vw and 100vh respectively

   <li>Other keywords and unknown values translate to 1px
  </ol>

  <p class=note>Some existing UA implementations use device dimensions in CSS
   pixels, and some use the window dimensions (CSS pixels) for device-width /
   device-height. Above, we translate to 100vw / 100vh which are the window
   dimensions. The rationale is that the device dimensions would not be what
   the author intended for UAs where the window is resizable or does not fill
   the screen of the device.

  <div class=example>
   <p>This <code class=html>META</code> element:

   <pre><!--
	-->&lt;meta name="viewport" content="width=500, height=600"&gt;<!--
   --></pre>

   <p>translates into:

   <pre><!--
	-->@viewport {
<!--	-->  width: extend-to-zoom 500px;
<!--	-->  height: extend-to-zoom 600px;
<!--	-->}<!--
   --></pre>
  </div>

  <p>For a viewport <code class=html>META</code> element that translates into
   an <code class=css>@viewport</code> rule with a non-‘<code
   class=css>auto</code>’ ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ declaration and no ‘<a
   href="#width"><code class=descriptor>width</code></a>’ declaration:

  <ul>
   <li>If it adds a ‘<a href="#height"><code
    class=descriptor>height</code></a>’ descriptor, add:
    <pre>width: auto;</pre>

   <li>Otherwise, add:
    <pre>width: extend-to-zoom;</pre>
  </ul>

  <p>to the <code class=css>@viewport</code> rule.

  <div class=example>
   <p>This <code class=html>META</code> element:

   <pre><!--
	-->&lt;meta name="viewport" content="initial-scale=1.0"&gt;<!--
   --></pre>

   <p>translates into:

   <pre><!--
	-->@viewport {
<!--	-->  zoom: 1.0;
<!--	-->  width: extend-to-zoom;
<!--	-->}<!--
   --></pre>
  </div>

  <div class=example>
   <p>This <code class=html>META</code> element:

   <pre><!--
	-->&lt;meta name="viewport" content="initial-scale=2.0, height=device-width"&gt;<!--
   --></pre>

   <p>translates into:

   <pre><!--
	-->@viewport {
<!--	-->  zoom: 2.0;
<!--	-->  width: auto;
<!--	-->  height: extend-to-zoom 100%;
<!--	-->}<!--
   --></pre>
  </div>

  <h4 class="no-num no-toc" id=the-initial-scale-minimum-scale-and-maxi>The
   <code class=index id=initial-scale0>initial-scale</code>, <code
   class=index id=minimum-scale0>minimum-scale</code>, and <code class=index
   id=maximum-scale0>maximum-scale</code> properties</h4>

  <p>The properties are translated into ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’, ‘<a href="#min-zoom"><code
   class=descriptor>min-zoom</code></a>’, and ‘<a href="#max-zoom"><code
   class=descriptor>max-zoom</code></a>’ respectively with the following
   translations of values.

  <ol>
   <li>Non-negative number values are translated to &lt;number&gt; values,
    clamped to the range <code>[0.1, 10]</code>

   <li>Negative number values are dropped

   <li><code class=index id=yes0>yes</code> is translated to 1

   <li><code class=index id=device-width1
    title="device-width!!viewport META">device-width</code> and <code
    class=index id=device-height1
    title="device-height!!viewport META">device-height</code> are translated
    to 10

   <li><code class=index id=no0>no</code> and unknown values are translated
    to 0.1
  </ol>

  <p>For a viewport <code class=html>META</code> element that translates into
   an <code class=css> @viewport</code> rule with no ‘<a
   href="#max-zoom"><code class=descriptor>max-zoom</code></a>’ declaration
   and a non-‘<code class=css>auto</code>’ ‘<a href="#min-zoom"><code
   class=descriptor>min-zoom</code></a>’ value that is larger than the
   ‘<a href="#max-zoom"><code class=descriptor>max-zoom</code></a>’ value
   of the UA stylesheet, the ‘<a href="#min-zoom"><code
   class=descriptor>min-zoom</code></a>’ declaration value is clamped to
   the UA stylesheet ‘<a href="#max-zoom"><code
   class=descriptor>max-zoom</code></a>’ value.

  <h4 class="no-num no-toc" id=the-user-scalable-property>The <code
   class=index id=user-scalable0>user-scalable</code> property</h4>

  <p>The <code class=index id=user-scalable1>user-scalable</code> property is
   translated into ‘<a href="#user-zoom"><code
   class=descriptor>user-zoom</code></a>’ with the following value
   translations.

  <ol>
   <li><code class=index id=yes1>yes</code> and <code class=index
    id=no1>no</code> are translated into ‘<a href="#zoom0"><code class=css
    title="zoom!!value">zoom</code></a>’ and ‘<a href="#fixed"><code
    class=css>fixed</code></a>’ respectively.

   <li>Numbers ≥ 1, numbers ≤ -1, <code class=index id=device-width2
    title="device-width!!viewport META">device-width</code> and <code
    class=index id=device-height2
    title="device-height!!viewport META">device-height</code> are mapped to
    ‘<a href="#zoom0"><code class=css
    title="zoom!!value">zoom</code></a>’

   <li>Numbers in the range <code>&lt;-1, 1&gt;</code>, and unknown values,
    are mapped to ‘<a href="#fixed"><code class=css>fixed</code></a>’
  </ol>

  <div class=example>
   <p>This <code class=html>META</code> element:

   <pre>&lt;meta name="viewport" content="width=480, initial-scale=2.0, user-scalable=1"&gt;</pre>

   <p>will translate into this <code class=css>@viewport</code> block:

   <pre><!--
	-->@viewport {
<!--	-->  width: 480px;
<!--	-->  zoom: 2.0;
<!--	-->  user-zoom: zoom;
<!--	-->}<!--
   --></pre>
  </div>

  <h2 id=handling-auto-zoom><span class=secno>12. </span>Handling ‘<a
   href="#auto0"><code class=css title="auto!!zoom">auto</code></a>’ for
   ‘<code class=descriptor title="zoom!!descriptor">zoom</code>’</h2>

  <p><em>This section is not normative.</em>

  <p>This section presents one way of picking an actual value for the
   ‘<code class=descriptor title="zoom!!descriptor">zoom</code>’
   descriptor when the used value is ‘<a href="#auto0"><code class=css
   title="auto!!zoom">auto</code></a>’.

  <p>Given an <a href="#initial-viewport">initial viewport</a> with size
   <code>(initial-width, initial-height)</code>, and a finite region within
   the <a href="http://www.w3.org/TR/CSS21/intro.html#canvas">canvas</a>
   where the formatting structure is rendered <code>(rendered-width,
   rendered-height)</code>. That region is at least as large as the <a
   href="#actual-viewport">actual viewport</a>.

  <p>Then, if the used value of ‘<code class=descriptor
   title="zoom!!descriptor">zoom</code>’ is ‘<a href="#auto0"><code
   class=css title="auto!!zoom">auto</code></a>’, let the actual zoom
   factor be:

  <pre>
<!---->zoom = MAX(initial-width / rendered-width, initial-height / rendered-height)<!--
 --></pre>

  <p>The actual zoom factor should also be further limited by the [min-zoom,
   max-zoom] range.

  <h2 id=ua-stylesheet><span class=secno>13. </span>UA stylesheets</h2>

  <p><em>This section is informative</em>

  <p>With the term desktop browser below, we mean a browser which has a size
   of the initial viewport, in CSS pixels, that is at least as large as the
   smallest viewport or viewing area you would expect a user of a desktop
   computer to have. In that sense, it could include tablet PC and TV
   browsers.

  <h3 id=desktop-ua-styles-><span class=secno>13.1. </span>Desktop UA styles</h3>

  <p>For a desktop browser, the recommendation is to have no UA styles. That
   means that it will have all descriptors initially set to ‘<code
   class=css>auto</code>’, and behave as it would have without support for
   viewport descriptors if there are no viewport descriptors in the user or
   author styles.

  <h3 id=small-screen-ua-styles><span class=secno>13.2. </span>Small screen
   UA styles</h3>

  <p>For smaller screen UAs like smartphone browsers, the UA could typically
   set the minimum viewport width to something that is at least as large as
   the narrowest width an author would expect a desktop user would use to
   view documents.

  <div class=example>
   <pre><!--
        -->@viewport {
<!--    -->  min-width: 980px;
<!--    -->}<!--
   --></pre>
  </div>

  <p>It is recommended that limitations in zooming capabilities are not
   reflected in the UA styles but rather only affect the used values for
   zoom. The min-zoom/max-zoom UA styles mentioned in the <a
   href="#viewport-meta">Viewport META section</a> are there to give an
   accurate description of how the Safari browser behaves, not as part of a
   recommended UA stylesheet.

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/">http://www.w3.org/TR/2011/REC-CSS2-20110607/</a>
   </dd>
   <!---->

   <dt id=CSS3SYN>[CSS3SYN]

   <dd>L. David Baron. <a
    href="http://www.w3.org/TR/2003/WD-css3-syntax-20030813"><cite>CSS3
    module: Syntax.</cite></a> 13 August 2003. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2003/WD-css3-syntax-20030813">http://www.w3.org/TR/2003/WD-css3-syntax-20030813</a>
   </dd>
   <!---->

   <dt id=CSS3VAL>[CSS3VAL]

   <dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a
    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/"><cite>CSS
    Values and Units Module Level 3.</cite></a> 30 July 2013. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/">http://www.w3.org/TR/2013/CR-css3-values-20130730/</a>
   </dd>
   <!---->

   <dt id=MEDIAQ>[MEDIAQ]

   <dd>Florian Rivoal. <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/"><cite>Media
    Queries.</cite></a> 19 June 2012. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/">http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>

  <dl class=bibliography>
   <dt id=Algorithms>[Algorithms]

   <dd>Thomas H. Cormen; et al. <cite>Introduction to Algorithms, Second
    Edition, MIT Press.</cite>
  </dl>

  <h2 class=no-num id=descriptor-index>Descriptor index</h2>
  <!--begin-descriptors-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Descriptor

     <th>Values

     <th>Initial

   <tbody>
    <tr>
     <th><a class=property href="#height">height</a>

     <td>&lt;viewport-length&gt;{1,2}

     <td>See individual descriptors

    <tr>
     <th><a class=property href="#max-height">max-height</a>

     <td>&lt;viewport-length&gt;

     <td>auto

    <tr>
     <th><a class=property href="#max-width">max-width</a>

     <td>&lt;viewport-length&gt;

     <td>auto

    <tr>
     <th><a class=property href="#max-zoom">max-zoom</a>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

     <td>auto

    <tr>
     <th><a class=property href="#min-height">min-height</a>

     <td>&lt;viewport-length&gt;

     <td>auto

    <tr>
     <th><a class=property href="#min-width">min-width</a>

     <td>&lt;viewport-length&gt;

     <td>auto

    <tr>
     <th><a class=property href="#min-zoom">min-zoom</a>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

     <td>auto

    <tr>
     <th><a class=property href="#orientation">orientation</a>

     <td>auto | portrait | landscape

     <td>auto

    <tr>
     <th><a class=property href="#user-zoom">user-zoom</a>

     <td>zoom | fixed

     <td>zoom

    <tr>
     <th><a class=property href="#width">width</a>

     <td>&lt;viewport-length&gt;{1,2}

     <td>See individual descriptors

    <tr>
     <th><a class=property href="#zoom">zoom</a>

     <td>auto | &lt;number&gt; | &lt;percentage&gt;

     <td>auto
  </table>
  <!--end-descriptors-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>actual viewport, <a href="#actual-viewport"
    title="section 3."><strong>3.</strong></a>

   <li>auto
    <ul>
     <li>length, <a href="#auto"
      title="section 5.1."><strong>5.1.</strong></a>

     <li>max-zoom, <a href="#auto2"
      title="section 5.7."><strong>5.7.</strong></a>

     <li>min-zoom, <a href="#auto1"
      title="section 5.6."><strong>5.6.</strong></a>

     <li>orientation, <a href="#auto3"
      title="section 5.9."><strong>5.9.</strong></a>

     <li>zoom, <a href="#auto0"
      title="section 5.5."><strong>5.5.</strong></a>
    </ul>

   <li>device-height
    <ul>
     <li>viewport META, <a href="#device-height"
      title="section 11.2.">11.2.</a>, <a href="#device-height0"
      title="section ??">??</a>, <a href="#device-height1"
      title="section ??">??</a>, <a href="#device-height2"
      title="section ??">??</a>
    </ul>

   <li>device-width
    <ul>
     <li>viewport META, <a href="#device-width"
      title="section 11.2.">11.2.</a>, <a href="#device-width0"
      title="section ??">??</a>, <a href="#device-width1"
      title="section ??">??</a>, <a href="#device-width2"
      title="section ??">??</a>
    </ul>

   <li>fixed, <a href="#fixed" title="section 5.8."><strong>5.8.</strong></a>

   <li>height, <a href="#height"
    title="section 5.4."><strong>5.4.</strong></a>
    <ul>
     <li>initial, <a href="#initial-height" title="section 6.1.">6.1.</a>, <a
      href="#initial-height0" title="section ??">??</a>

     <li>resolved, <a href="#height0" title="section 6.1.">6.1.</a>

     <li>viewport META, <a href="#height1" title="section 11.1.">11.1.</a>,
      <a href="#height2" title="section ??">??</a>, <a href="#height3"
      title="section ??">??</a>
    </ul>

   <li>initial-scale, <a href="#initial-scale"
    title="section 11.1.">11.1.</a>, <a href="#initial-scale0"
    title="section ??">??</a>

   <li>initial viewport, <a href="#initial-viewport"
    title="section 3."><strong>3.</strong></a>

   <li>landscape, <a href="#landscape"
    title="section 5.9."><strong>5.9.</strong></a>

   <li>max-height, <a href="#max-height"
    title="section 5.3."><strong>5.3.</strong></a>

   <li>maximum-scale, <a href="#maximum-scale"
    title="section 11.1.">11.1.</a>, <a href="#maximum-scale0"
    title="section ??">??</a>

   <li>max-width, <a href="#max-width"
    title="section 5.1."><strong>5.1.</strong></a>

   <li>max-zoom, <a href="#max-zoom"
    title="section 5.7."><strong>5.7.</strong></a>

   <li>min-height, <a href="#min-height"
    title="section 5.3."><strong>5.3.</strong></a>

   <li>minimum-scale, <a href="#minimum-scale"
    title="section 11.1.">11.1.</a>, <a href="#minimum-scale0"
    title="section ??">??</a>

   <li>min-width, <a href="#min-width"
    title="section 5.1."><strong>5.1.</strong></a>

   <li>min-zoom, <a href="#min-zoom"
    title="section 5.6."><strong>5.6.</strong></a>

   <li>no, <a href="#no" title="section 11.2.">11.2.</a>, <a href="#no0"
    title="section ??">??</a>, <a href="#no1" title="section ??">??</a>

   <li>orientation, <a href="#orientation"
    title="section 5.9."><strong>5.9.</strong></a>

   <li>portrait, <a href="#portrait"
    title="section 5.9."><strong>5.9.</strong></a>

   <li>Specifications whose evaluations are both affected by the same changes
    to the user environment, and so always must be evaluated together in
    order to ensure proper rendering., <a href="#tethered-specifications"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>user-scalable, <a href="#user-scalable"
    title="section 11.1.">11.1.</a>, <a href="#user-scalable0"
    title="section ??">??</a>, <a href="#user-scalable1"
    title="section ??">??</a>

   <li>user-zoom, <a href="#user-zoom"
    title="section 5.8."><strong>5.8.</strong></a>

   <li>&lt;viewport-length&gt;, <a href="#ltviewport-lengthgt"
    title="section 5.1."><strong>5.1.</strong></a>

   <li>width, <a href="#width" title="section 5.2."><strong>5.2.</strong></a>

    <ul>
     <li>initial, <a href="#initial-width" title="section 6.1.">6.1.</a>, <a
      href="#initial-width0" title="section ??">??</a>

     <li>resolved, <a href="#width0" title="section 6.1.">6.1.</a>

     <li>viewport META, <a href="#width1" title="section 11.1.">11.1.</a>, <a
      href="#width2" title="section ??">??</a>, <a href="#width3"
      title="section ??">??</a>
    </ul>

   <li>yes, <a href="#yes" title="section 11.2.">11.2.</a>, <a href="#yes0"
    title="section ??">??</a>, <a href="#yes1" title="section ??">??</a>

   <li>zoom, <a href="#zoom" title="section 5.5."><strong>5.5.</strong></a>
    <ul>
     <li>value, <a href="#zoom0"
      title="section 5.8."><strong>5.8.</strong></a>
    </ul>
  </ul>
  <!--end-index-->
