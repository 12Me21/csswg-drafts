<!DOCTYPE html public '-//W3C//DTD HTML 4.01//EN'
  'http://www.w3.org/TR/html4/strict.dtd'>
<html lang="en">
<head profile="http://www.w3.org/2006/03/hcard">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Grid Template Module</title>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link rel="stylesheet" type="text/css"
        href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css">
  <style type="text/css">
    /* delete this block when you've cleared out all the .replaceme elements */
    .replaceme {
      border: solid red;
      padding: 0 0.5em;
      margin: 0 0.1em;
      background: yellow;
      color: green;
    }
    .replaceme:before {
       content: "FIXME(";
       color: black;
    }
    .replaceme:after {
       content: ")";
       color: black;
    }
  </style>
</head>

<div class="head">
<!--logo-->

<h1>CSS Grid Template Module</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:
    <dd><a href="[VERSION]">http://www.w3.org/TR/[YEAR]/ED-css3-grid-template-[CDATE]/</a>

  <dt>Latest version:
    <dd><a href="http://www.w3.org/TR/[SHORTNAME]/">http://www.w3.org/TR/[SHORTNAME]/</a>

  <dt>Editor's draft:
    <dd><a href="http://dev.w3.org/csswg/[SHORTNAME]/">http://dev.w3.org/csswg/[SHORTNAME]/</a>

  <dt>Previous version:
    <dd><a href="http://www.w3.org/PreviousVersionURI">
    http://www.w3.org/PreviousVersionURI</a>

  <dt>Issues List:</dt>
    <dd><a href="http://www.w3.org/Style/CSS/Tracker/products/FIXME">http://www.w3.org/Style/CSS/Tracker/products/FIXME</a>

  <dt>Discussion:</dt>
    <dd><a href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a> with subject line &ldquo;<kbd>[<!---->[SHORTNAME]] <var>&hellip; message topic &hellip;</var></kbd>&rdquo;

  <dt>Editors:
    <dd class=vcard><span class=fn>[editor1 name]</span>,
      <span class=org>[affiliation (opt.)]</span>,
      <span class=email>[email address (opt.)]</span>
    <dd class=vcard><span class=fn>[editor2 name]</span>,
      <span class=org>[affiliation (opt.)]</span>,
      <span class=email>[email address (opt.)]</span>
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>CSS is a language for describing the rendering of structured documents
  (such as HTML and XML) on screen, on paper,  in speech, etc. This module
  contains the features of CSS level&nbsp;3 relating to <var class="replaceme">DESCRIBE HERE</var>.
  It includes and extends the functionality of CSS level&nbsp;2 [[!CSS21]],
  which builds on CSS level&nbsp;1 [[CSS1]].
  The main extensions compared to level&nbsp;2 are <var class="replaceme">SUMMARIZE HERE</var>.

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<!--status-->

<p>The following features are at risk: &hellip;


<p class=issue>Leave for next level or different module: chaining
regions, page templates, repeat (automatically add) columns and rows,
style fragments of elements that are in a certain slot (region-based
styling).


<h2 class="no-num no-toc" id="contents">
Table of contents</h2>

<!--toc-->



<h2 id="intro">
Introduction</h2>

<p><em>This section is not normative.</em>

<p class="issue">Merge introductory text, which right now is simply
concatenated between Grid and Template.</p>

<div class=sidefigure>
<p><img src="diagram.png" alt="Image: four elements move to four slots
in a template" longdesc="diagram.desc">

<p class=caption>Four slots, called a, b, c and d, each receive a
part of a document
</div>

<p class=mtb>The styling of a Web page, a form or a graphical user
interface can roughly be divided in two parts: (1) defining the
overall “grid” of the page or window and (2) specifying the fonts,
indents, colors, etc., of the text and other objects. The two are not
completely separate, of course, because indenting or coloring a text
influences the perceived grid as well. Nevertheless, when one
separates the parts of a style that should change when the window gets
bigger from the parts that stay the same, one often finds that the
grid changes (room for a sidebar, extra navigation bar, big margins,
larger images…), while fonts, colors, indents, numbering styles, and
many other things don't have to change, until the size of the window
becomes extreme.

<p>The properties in this specification work by associating a
<em>layout grid</em> with an element. Rather than letting an element
lay out its descendants in their normal order as inline text or as
blocks of text (the policies available in CSS level&nbsp;1), the
policy defined in this module gives an element an invisible grid for
aligning selected descendant elements.

<p>Because layouts on the Web have to adapt to different window and
paper sizes, the rows and columns of the grid can be made fixed or
flexible in size.

<p>The typical use cases for these properties include:

<ul>
  <li>Complex Web pages, with multiple navigation bars in fixed
  positions, areas for advertisements, etc.

  <li>Complex forms, where the alignment of labels and form fields may
  be easier with the properties of this module than with the
  properties for tables and margins.

  <li>GUIs, where buttons, toolbars, labels, icons, etc., are aligned
  in complex ways and have to stay aligned (and not wrap, for example)
  when the window is resized.

  <li>Paged displays (e.g., printed media) where each page is divided
  in fixed areas for different kinds of content.
</ul>

<p>Grid-based positioning is an alternative to absolute positioning,
which, like absolute positioning, is especially useful for aligning
elements that don't have simple relationships in the source
(parent-child, ancestor-descendant, immediate sibling). But in
contrast to absolute positioning, the elements are not positioned with
the help of horizontal and vertical coordinates, but by mapping them
into slots in a table-like template. The relative size and alignment
of elements is thus governed implicitly by the rows and columns of the
template.

<p>The mapping is done with the 'position' property, which specifies
in this case into which slot of the template the element goes. The
template itself is specified on the 'grid-template' property of some
ancestor of the elements to remap.

<div class=example>
<p>In this example, the four children of an element are assigned to
four slots (called a, b, c and d) in a 2×2 template. (All mark-up
examples in this specification are HTML fragments, unless otherwise
stated.)

<div class=sidefigure>
  <p><img src="aapje.png" alt="Image: sample rendering" longdesc="aapje.desc">
  <p class=caption>Each element occupies one slot. In this template,
  all slots have the same size.
</div>

<pre>
&lt;style type="text/css"&gt;
  dl { grid: "ab"
             "cd" }
  #sym1 { position: slot(a) }
  #lab1 { position: slot(b) }
  #sym2 { position: slot(c) }
  #lab2 { position: slot(d) }
&lt;/style&gt;
&lt;dl&gt;
  &lt;dt id=sym1&gt;A
  &lt;dd id=lab1&gt;A is een aapje
  &lt;dt id=sym2&gt;B
  &lt;dd id=lab2&gt;B is de bakker
&lt;/dl&gt;
</pre>
</div>

<div class=example>
<p>Templates can also help with device-independence. This example uses
Media Queries [[MEDIAQ]] to change the overall layout of a page from
3-column layout for a wide screen to a 1-column layout for a narrow
screen. It assumes the page has been marked-up with logical sections
with IDs.

<pre>
@media all
{
  body { grid: "aaa"
               "bcd" }
  #head { position: slot(a) }
  #nav  { position: slot(b) }
  #adv  { position: slot(c) }
  #body { position: slot(d) }
}
@media all and (max-width: 500px)
{
  body { grid: "a"
               "b"
               "c" }
  #head { position: slot(a) }
  #nav  { position: slot(b) }
  #adv  { display: none }
  #body { position: slot(c) }
}</pre>
</div>

<div class=example>
<p>Elements can be positioned this way, but not made to overlap,
unless with negative margins. Here is how the <a
href="http://www.csszengarden.com/?cssfile=/026/026.css&amp;page=0">
“zunflower” design</a> of the Zen Garden could be done:

<pre>
#container { grid: "abc" }
#intro { position: (a); margin-right: -2em; box-shadow: 0.5em 0.5em 0.5em }
#supportingText { position: slot(b); box-shadow: 0.5em 0.5em 0.5em }
#linkList { position: slot(c) }
</pre>
</div>

<div class=example>
<p>Template-based positioning borrows some concepts from table layout,
in particular the idea of aligning elements in rows and columns, so
that they constrain each other's size. But there are also differences. 
This example shows some of them. Assume this document fragment:

<pre>
&lt;div class=group>
 &lt;div>aa aa aa aa aa aa&lt;/div>
 &lt;div>bbb&lt;/div>
 &lt;div class=menu>ccccc&lt;/div>
&lt;/div>
</pre>

<p>We can lay it out as three columns, as the following illustrations
show. The style sheet would contain the following.

<pre>
.group {display: table}
.group > div {display: table-cell}
</pre>

<div class=figure>
  <p><img src="table1.png" alt="[Three unequal cells]" longdesc="table1.desc">

  <p class=caption>Example of rendering with a table.
</div>

<p>We can also use a template, in which case the style sheet would
contain this:

<pre>
.group {grid: "abc"}
.group > div {position: slot(a)}
.group > div + div {position: slot(b)}
.group > div + div + div {position: slot(c)}
</pre>

<p>By default, the table is as wide as needed to fit its contents. To
make sure it is as wide as its containing block, we need to add

<pre>.group {display: table; width: 100%}</pre>

<p>That is not needed for the template, but, on the other hand, if we
want the template to fit its contents, we would need to say so:

<pre>.group {grid: "abc"; width: fit-content}</pre>

<p>(See [[!CSS3BOX]] for the definition of the 'width' property.) The
columns of the template are by default all the same size. The columns
of the table satisfy certain constraints, but the exact size is not
defined. We can make them all the same by adding a rule (see
[[!CSS3TBL]]):

<pre>.group {display: table; width: 100%; table-layout: fixed}</pre>

<div class=figure>
  <p><img src="table2.png" alt="[Three equal cells]" longdesc="table2.desc">

  <p class=caption>Example of rendering with equal columns.
</div>

<p>In both styles, we can set a column to a certain size:

<pre>div.menu {width: 3em}</pre>

<p>resp.,

<pre>.group {grid: "abc" * * 3em}</pre>

<div class=figure>
  <p><img src="table3.png" alt="[Two equal cells, third is 3em wide]"
  longdesc="table3.desc">

  <p class=caption>Example of rendering with a fixed third column and
  the other two columns of equal width.
</div>

<p>If there is an unknown number of columns (children of the div.group
element), the style sheet for the table model will automatically take
them into account. The style sheet for the template model, however,
creates a template of exactly three columns and can't handle tables
with an unknown number of columns. The extra elements will be added
into the default slot (in this case the ''a'' slot).

<p>In both models, elements can have borders, but only in the table
model can borders be collapsed, which makes setting borders a little
easier in the table model:

<pre>
.group {display: table; border-collapse: collapse}
.group > div {border: solid}
</pre>

<p>resp.,

<pre>
.group > div {border: solid; border-left: none}
.group > div:first-child {border-left: solid}
</pre>

<p>In the template model, the order of the elements is explicit, and
thus it is possible to reverse the order of the columns:

<pre>
.group > div {position: slot(c)}
.group > div + div {position: slot(b)}
.group > div + div + div {position: slot(a)}
</pre>

<div class=figure>
  <p><img src="table4.png" alt="[Different contents for the cells]"
  longdesc="table4.desc">

  <p class=caption>Example of rendering with the contents of the three
  columns reversed: the third element is shown in the first slot and
  the first element in the third slot.
</div>

<p>In the table model, the order of the rows and columns is given by
the document source and thus can't be changed.
</div>

<div class=example>
<p>This example shows a way to move notes to the end of a section. 
“Notes” in this example refers to elements in HTML with a class of 
“note”. A fragment of HTML such as
<pre>
&lt;div class=section>
  &lt;p>The balubious coster of the fifth secter&lt;span
    class=note> The sixth secter coster is a difter
    manon.&lt;/span> of The Rollow Carpug mentizes a costernica.
  &lt;p>&hellip;
&lt;/div>
</pre>
<p>with this style sheet
<pre>
div.section {
    grid: "*" available
          "F" available}
.note {
    position: slot(F);
    content: counter(note) ".\A0" contents;
    counter-increment: note;
    font-size: smaller}
.note::before {
    content: counter(note);
    position: slot(*);
    vertical-align: super;
    font-size: larger}
</pre>
<p>results in a rendering similar to this:
<div class=figure>
<p><img src="footnotes.png" alt="Same text, with the SPAN replaced by
“(1)” and its content moved to the end." longdesc="footnotes.desc">
<p class=caption>Rendering of a text with footnotes.
</div>
</div>

        <h3><span class="secno">6.1 </span>Grid Rows and Columns</h3>
            <div class="sidefigure">
                <img class="figure" alt="Image: Grid Lines." src="images/grid-lines.png" />
                <p class="caption">Grid Lines.</p>
            </div>
            <p>
            <a href="#grid-element">Grid element</a>s use <a href="#grid-line">Grid Line</a>s to divide their space.  There are two sets of <a href="#grid-line">Grid Line</a>s: one set defined by the columns that run in the direction of block progression, and another orthogonal set defined by rows.  Block progression is a writing-mode term that defines a logical direction.  In English it means vertical.
            </p>
            <p>
            A <a href="#grid-track">Grid Track</a> is a generic term for a column or row which separates two <a href="#grid-line">Grid Line</a>s.  Each <a href="#grid-track">Grid Track</a> is assigned a sizing function, which controls how wide or tall the column or row may grow, and thus how far apart two <a href="#grid-line">Grid Line</a>s are.  The sizing function specified can be a length, a percentage of the <a href="#grid-element">Grid element</a>'s size, derived from the contents occupying the column or row, or a proportion of the space which remains in the <a href="#grid-element">Grid element</a>.  In the last case, remaining space refers to the width or height of the <a href="#grid-element">Grid element</a> after accounting for space already consumed by columns and rows sized with a length, percentage or content.  The size can also be specified as a range using a minmax function, which can combine any of the previously mentioned mechanisms to define a min and max size for the column or row.
            </p>
            <p>
            In the following example there are two columns and three rows.  The first column is 150px wide beginning from the starting edge of the <a href="#grid-element">Grid element</a>'s content box.  The second column uses fractional sizing, which is a function of the remaining space in the Grid.  Its size will vary as the width of the <a href="#grid-element">Grid element</a> changes.  If the used width of the <a href="#grid-element">Grid element</a> is 200px, then the second column 50px wide.  If the used width of the <a href="#grid-element">Grid element</a> is 100px, then the second column is 0px and any content positioned in the column will be overflowing the <a href="#grid-element">Grid element</a>.  Sizing occurs in a similar fashion for the rows.
            </p>
            <pre class="example">&lt;style type="text/css"&gt;
    #grid { 
<!--         display: grid; 
-->        grid-columns: 150px 1fr;
        grid-rows: 50px 1fr 50px
    }
&lt;/style&gt;</pre>


<h3 id=accessibility>About the Accessibility of Content Reordering</h3>

<p><em>(This section is not normative.)</em>

<p>The facilities in this specification allow elements from a document
to be displayed in a visual order that is to a large extent
independent of the order in the document. That may have both positive
and negative effects on accessibility. The positive aspect is that it
allows the content in the document to be kept in logical order, so
that the document is as functional as possible without the style sheet
and on media where the style sheet doesn't apply. A negative aspect is
that a document that has a defined tab order (the order in which
elements get the focus when the tab-key is pressed) will show on the
screen with a tab order unrelated to the visual order. It may be
necessary to use the keyboard control features of the CSS Basic User
Interface module [[CSS3UI]] to ensure that the tab navigation follows
the visual order, or to refrain from positioning semantically related
elements in different parts of a template.

<p>The following two requirements from the Web Content Accessibility
Guidelines (WCAG) 2.0 [[WCAG20]] are particularly relevant. See that
specification for more information.

<blockquote>
<p><a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#content-structure-separation-sequence"
><strong>1.3.2 Meaningful Sequence:</strong></a> When the sequence in
which content is presented affects its meaning, a <a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#correct-reading-sequencedef"
>correct reading sequence</a> can be <a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#programmaticallydetermineddef
">programmatically determined.</a> (Level A)
</blockquote>

<blockquote>
<p><a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#navigation-mechanisms-focus-order"
><strong>2.4.3 Focus Order:</strong></a> If a <a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#webpagedef" >Web
page</a> can be <a
href="http://www.w3.org/TR/2008/REC-WCAG20-20081211/#nav-seqdef"
>navigated sequentially</a> and the navigation sequences affect
meaning or operation, focusable components receive focus in an order
that preserves meaning and operability. (Level A)
</blockquote>



<h3 id="placement">
Module interactions</h3>

  <p class="replaceme">Explain, normatively, how this module affects the definition of CSS.</p>

  <p>This module replaces and extends the <var class="replaceme">SUMMARIZE HERE</var>
  features defined in [[!CSS21]] sections <var class="replaceme">W.X and Y.Z</var>.

<h3 id="values">
Values</h3>

  <p>This specification follows the
  <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
  definition conventions</a> from [[!CSS21]]. Value types not defined in
  this specification are defined in CSS Level 2 Revision 1 [[!CSS21]].
  Other CSS modules may expand the definitions of these value types: for
  example [[CSS3COLOR]], when combined with this module, expands the
  definition of the &lt;color&gt; value type as used in this specification.</p>
  
  <p>In addition to the property-specific values listed in their definitions,
  all properties defined in this specification also accept the
  <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>
  keyword as their property value. For readability it has not been repeated
  explicitly.



<h2 id="terminology">
Core Concepts of the Grid</h2>

  <div class="sidefigure">
      <img class="figure" alt="FIXME" src="images/grid-concepts.png" />
      <p class="caption">A diagram illustrating the relationship between
      the <a href="#grid-element">grid element</a> and its Tracks, Lines,
      Cells and Items.</p>
  </div>
  <p>A <dfn id="grid-element">grid element</dfn> is declared in markup by
  setting the display property of an element to ''grid'' or ''inline-grid''.
  Child elements of the Grid are termed <a href="#grid-item">grid items</a>
  and may be positioned and sized by the <a href="#grid-element">grid element</a>
  by leveraging the following logical concepts:

  <ul>
      <li><a href="#grid-track">Grid Track</a>s</li>
      <li><a href="#grid-line">Grid Line</a>s</li>
      <li><a href="#slot">Slot</a>s</li>
  </ul>
  
  <p>
  Figure 7 illustrates the relationship between these concepts and the markup
  in the subsections that follow produce the result shown in the figure.
  </p>

<h4 id="grid-concepts-tracks">
Grid Tracks</h4>

  <p><dfn id="grid-track">Grid Tracks</dfn> are the columns and rows of the
  Grid defined with the 'grid-rows' and 'grid-columns' properties on the
  <a href="#grid-element">Grid element</a>.  Each Track is defined by
  declaring a sequential list of sizing functions, one for each Track. 
  Tracks define the space between <a href="#grid-line">Grid Line</a>s.
  <pre class="example">&lt;style type="text/css"&gt;
#grid { 
    display: grid; 
    grid-columns: 150px 1fr; /* two columns */
    grid-rows: 50px 1fr 50px /* three rows  */
}
&lt;/style&gt;</pre>

<h4 id="grid-concepts-lines">
Grid Lines</h4>

  <p><dfn id="grid-line">Grid Lines</dfn> are the horizontal or vertical
  dividing lines that exist on either side of a column or row. 
  <i>Grid Lines</i> may be referred to by their
  <i>Grid Line</i> number.
  A <i>Grid Item</i> then uses the <i>Grid Lines</i> to determine its
  position and available space within the Grid by referencing the
  <a href="#grid-line">Grid Line</a>s using the 'grid-row' and 'grid-column'
  properties.

  <p>The following two examples create three column <i>Grid Lines</i>
  and four row <i>Grid Lines</i>.  The first example demonstrates how
  an author would refer to the <a href="#grid-line">Grid Line</a>s
  using <a href="#grid-line">Grid Line</a> numbers.  The second example
  uses explicitly named <a href="#grid-line">Grid Line</a>s.

  <pre class="example">&lt;style type="text/css"&gt;
  #grid { 
      display: grid; 
      grid-columns: 150px 1fr;
      grid-rows: 50px 1fr 50px
  }

  #item1 { grid-column: 2; grid-row: 1 4 }
&lt;/style&gt;</pre>

  <pre class="example">&lt;style type="text/css"&gt;
  /* equivalent layout to the prior example, but using named lines */
  #grid { 
      display: grid; 
      grid-columns: 150px "item1-start" 1fr "item1-end";
      grid-rows: "item1-start" 50px 1fr 50px "item1-end"
  }

  #item1 { 
      grid-column: "item1-start" "item1-end"; 
      grid-row: "item1-start" "item1-end" 
  }
&lt;/style&gt;</pre>

<h4 id="grid-concepts-cells">
Slots</h4>

  <p><dfn id="slot">Slots</dfn> are the logical space used to lay out
  one or more <a href="#grid-item">Grid Item</a>s.
  <i>slots</i> can be defined explicitly using the 'grid-template'
  property, or anonymously by referencing a region of the Grid using the
  'grid-row' and 'grid-column' properties on a <a href="#grid-item">Grid Item</a>.

  <p>Whether a <i>slot</i> is created explicitly or implicitly, there
  is no difference in the layout or drawing order of the
  <a href="#grid-item">Grid Item</a>s which are associated with that
  <i>slot</i>.
  <pre class="example">&lt;style type="text/css"&gt;
/* using the template syntax */
#grid  { 
    display: grid; 
    grid-template: "ad"
                   "bd"
                   "cd";
    grid-columns: 150px 1fr;
    grid-rows: 50px 1fr 50px
}

#item2 { position: slot(b) }
#item3 { position: slot(b) }

/* Align items 2 and 3 at different points in the slot "b".  */
/* By default, Grid Items are stretched to fit their slot    */
/* and these items would layer one over the other. */
#item2 { grid-row-align: start }
#item3 { grid-column-align: end; grid-row-align: end }&lt;/style&gt;</pre>

<h2 id=display>
Declaring a grid template</h2>

<p>An element is a <dfn>grid element</dfn> (i.e., it defines a grid
for its descendants) if its 'display' value is ''grid'' or ''inline-grid''.

<table class="propdef">
  <tr>
    <th>Name:
    <td><dfn>display</dfn>
  <tr>
    <th><a href="#values">Value</a>:
    <td>&hellip; | grid | inline-grid
</table>

<p>This module adds the ''grid'' and ''inline-grid'' values to the 'display'
property [[CSS21]], as defined below:

<dl>
  <dt><dfn id=value-def-display-inline-grid>''grid''</dfn></dt>
  <dd>A value of grid causes an element to display as a block-level <a href="#grid-element">Grid element</a>.</dd>
  <dt><dfn id="value-def-display-inline-grid">''inline-grid''</dfn></dt>
    <dd>A value of inline-grid causes an element to display as an inline-level <a href="#grid-element">Grid element</a>.</dd>
  </dl>
  
<div class="issue">
<p> Should grid elements be created automatically without using 'display'?
This makes it easier to create a grid element, but could create some confusing
dynamics, e.g. what happens if someone later in the cascade sets ''display: table''
or ''display: flex''?

<p>An element is a <dfn>grid element</dfn> (i.e., it defines a grid
for its descendants) if it generates a
a <a href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes" >block
container box</a> [[!CSS21]] and one or more of the following is true:

<ul>
<li>The element's 'grid-template' is not ''none''.
<li>The element's 'grid-rows' is not ''auto''.
<li>The element's 'grid-columns' is not ''auto''.
</ul>

<p>These properties are defined below.
</div>

<p class=note>Block containers are, informally, elements that can have
block elements as children, such as blocks, inline blocks or table
cells, but not inline elements or replaced elements.

<p class=issue>What if an element has both 'columns' and
'grid-template', is it a grid element or a column element? (or do the
columns apply to the default slot?)

<p class=issue>Use 'fr' unit (as in css3-grid-align) instead of '*' (as
in css3-layout).

<h3 id="grid-templates">
Declaring a template: 'grid-template'</h3>

<p>The 'grid-template' property assigns a grid to an element, defines
named slots in the grid, and can also designate a slot as the default
slot.

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>grid-template</dfn>
  <tr>
    <th><a href="#values">Value</a>:
    <td>none | <var>&lt;string&gt;</var>+
  <tr>
    <th>Initial:
    <td>none
  <tr>
    <th>Applies to:
    <td><a
    href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes"
    >block container elements</a> [[!CSS21]]
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Animatable:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed&nbsp;value:
    <td>specified value
  <tr>
    <th>Canonical order:
    <td><abbr title="follows order of property value definition">per
  grammar</abbr>
</table>

<p>Each string consist of one or more asterisks (“*”), letters,
periods (“.”), spaces and tabs. Each string represents one row in the
template, each symbol other than a space or tab represents one
column in that row. Spaces and tabs have no meaning. They may be added
for readability.

<p>The symbols in the template have the following meaning
<dl>
  <dt>a letter
    <dd>slot for content.
  <dt>*
    <dd>(asterisk) default slot for content.
  <dt>.
    <dd>(period) white-space.
</dl>

<p>Multiple identical letters in adjacent rows or columns form a
single <dfn>slot</dfn> that spans those rows and columns. Ditto for
multiple “*”s. Slot names are case-sensitive, so uppercase and
lowercase letters are considered to be different letters.

<p>Non-rectangular slots and multiple slots with the same
letter are illegal. A template without any letter or
“*” is illegal. A template with more than one “*” slot is illegal. 
These errors cause the declaration to be ignored.

<p class=note>Note: non-rectangular and disconnected regions
may be permitted in a future update of CSS.

<p>Rows with fewer columns than other rows are implicitly padded with
periods (“.”).

<p>Each slot (letter or “*”) acts as a block element for its
contents.

<p class=issue>Are grid templates logically oriented (relative to
writing mode), or absolutely-oriented?

<p class=issue>What happens to unpositioned content if there is no
default slot? Ideally, it shouldn't disappear...

<h3>Specifying the widths of columns: 'grid-columns'</h3>

<p>The 'grid-columns' property specifies the sizes of the columns of a
grid.

<table class=propdef>
    <tr>
      <th>Name:
      <td><dfn>grid-columns</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td>auto | <var>&lt;track-size&gt;</var>+
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td><a
      href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes"
      >block container elements</a> [[!CSS21]]
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Animatable:
      <td>yes, between grids with the same number of tracks
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>specified value
    <tr>
      <th>Canonical order:
      <td><abbr title="follows order of property value definition">per grammar</abbr>
</table>

<p>Where

<pre class=prod>
<var>&lt;track-size&gt;</var> = <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | * |
  <var>&lt;fraction&gt;</var> | <var>&lt;minmax&gt;</var> | min-content | max-content
<var>&lt;minmax&gt;</var> = minmax( <var>&lt;track-size&gt;</var> , <var>&lt;track-size&gt;</var> )
</pre>

<p>Each <dfn><var>&lt;track-size&gt;</var></dfn> sets the width of a
column.

<p>If an element has <var>N</var> columns, only the
first <var>N</var> <var>&lt;track-size&gt;</var> values are used, the
others are ignored. If there are fewer than <var>N</var> values, the
missing ones are all assumed to be '1fr'.

<p>The number of columns <var>N</var> of a grid is determined as
follows:

<ol>
<li>If 'grid-template' is not 'none', it determines the number of columns.
<li>Otherwise, the number of columns is equal to the number
of <var>&lt;track-size&gt;</var> values in 'grid-columns'.
</ol>

<p>Each <var>&lt;track-size&gt;</var> can be one of the following:

<dl>
  <dt><var>&lt;length&gt;</var>

  <dd>An explicit width for that column. Negative values are illegal.

  <dt><var>&lt;fraction&gt;</var>

  <dd>(A non-negative number followed by 'fr'.) A fraction of the
  remaining space, see <a href="#fraction-values-fr" >Fraction
  values</a> below.

  <dt>*

  <dd>(Asterisk.) All columns with a width of '*' have the same width.

  <dt><var>&lt;percentage&gt;</var>

  <dd>Expresses a size as a percentage of the a-priori
  width. <span class=issue>When the width of the <span>grid
  element</span> is dependent on content, the result is
  undefined.</span>

  <dt>max-content,
  <dt>min-content

  <dd>The column's width is determined by its contents. See the
  <a href="#colwidth">algorithm</a> below.

  <dt>minmax(<var>p</var>,<var>q</var>)

  <dd>The column's width is constrained to be greater than or equal
  to <var>p</var> and less than or equal to <var>q</var>. <var>p</var>
  and <var>q</var> stand for [ <var>&lt;length&gt;</var> | max-content
  | min-content | * ]. There may be white space around the <var>p</var>
  and <var>q</var>. If <var>q</var> &lt; <var>p</var>,
  then <var>q</var> is ignored and
  ''minmax(<var>p</var>,<var>q</var>)'' is treated as
  'minmax(<var>p</var>,<var>p</var>)'.

  <dt>fit-content

  <dd>Equivalent to 'minmax(min-content, max-content)'.
</dl>

<div class=issue>Which is easier, '1fr' or '*'? Or do we need both?
<pre>
grid-template: "a . c";
grid-columns: 1fr 1em 3fr;
</pre>
<p>or
<pre>
grid-template: "a . c c c";
grid-columns: * 1em * * *;
</pre>
</div>

<p class=issue>Do we need percentages? It seems in practice a fraction
of the remaining space is all that is necessary.

<p class=issue>Flex?



<h3>Specifying the height of rows: 'grid-rows'</h3>

<p>The 'grid-rows' property specifies the sizes of the rows of a grid.

<table class=propdef>
    <tr>
      <th>Name:
      <td><dfn>grid-rows</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td>auto | <var>&lt;track-size&gt;</var>+
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td><a
      href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes"
      >block container elements</a> [[!CSS21]]
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Animatable:
      <td>yes, between grids with the same number of tracks
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>specified value
    <tr>
      <th>Canonical order:
      <td><abbr title="follows order of property value definition">per
		grammar</abbr>
</table>


<p class=issue>Flex?


        <h3>Specifying the size of grid tracks</h3>

            <p>Where:</p>
            <ul>
                <li><strong>length</strong> is as defined by CSS3 Values. [<cite><a href="#bib-CSS3VAL" rel="biblioentry" class="bibref">CSS3VAL</a></cite>]</li>
                <li><strong>percentage</strong> expresses a size for a <a href="#grid-track">Grid Track</a> as a percentage of the <a href="#grid-element">Grid element</a>'s logical width (for columns) or logical height (for rows).
                    When the width or height of the <a href="#grid-element">Grid element</a> is dependent on content, the result is undefined.</li>
                <li><strong>fraction</strong> is a non-negative floating-point number followed 
                    by 'fr'. Each <code>fraction</code> value takes a share of the remaining space proportional to 
                    its number.  See <a href="#fraction-values-fr">fraction values</a> for more details.</li>
                <li><strong>max-content</strong> is a keyword which refers to the maximum of the max sizes of <a href="#grid-item">Grid Item</a>s occupying
                    the <a href="#grid-track">Grid Track</a>.</li>
                <li><strong>min-content</strong> is a keyword which refers to the maximum of the min sizes of <a href="#grid-item">Grid Item</a>s occupying
                    the <a href="#grid-track">Grid Track</a>.</li>
                <li><strong>minmax(min, max)</strong> defines a size range. The size used
                    should be greater than or equal to <code>min</code> and less than or equal to <code>max</code>.  If <code>max</code> &lt; <code>min</code>, 
                    then <code>max</code> is ignored and <code>minmax(min,max)</code> is treated as <code>minmax(min,min)</code>.</li>
                <li><strong>fit-content</strong> is equivalent to <code>minmax(min-content, max-content)</code>.</li>
            </ul>
            <p class="issue">
                Consider whether having undefined behavior for percentage-sized tracks in content-sized grids is appropriate. CSS2.1 and CSS3 leave percentage width undefined, although there appears to be consistency between browser implementations.


            <p class="issue">
                Flex could also be allowed as a sizing function for a <a href="#grid-track">Grid Track</a>.
            </p>

            <p>The following example:</p>
            <ul>
                <li>Adds one <a href="#grid-line">Grid Line</a> 100 pixels from the 'start' of the grid.</li>
                <li>Adds another <a href="#grid-line">Grid Line</a> 1/2 of the remaining space away.</li>
                <li>Adds another <a href="#grid-line">Grid Line</a> whose distance from the prior <a href="#grid-line">Grid Line</a> will be based on the maximum content size of elements 
                    occupying the column.</li>
                <li>Adds another <a href="#grid-line">Grid Line</a> whose distance from the prior <a href="#grid-line">Grid Line</a> is based on 
                    the minimum content size of all elements occupying the column, or 1/2 the 
                    remaining space, whichever is greater.</li>
            </ul>
            <pre class="example">div { grid-columns: 100px 1fr max-content minmax(min-content, 1fr) }</pre>
            
            <p>Additional examples of valid <a href="#grid-track">Grid Track</a> definitions:</p>
            <pre class="example">/* examples of valid track definitions */
grid-rows: 1fr minmax(min-content, 1fr);
grid-rows: 10px (1fr auto minmax(30%, 1fr))[2];
grid-rows: (10px);
grid-rows: calc(4em - 5px)</pre>
        <!--End Section: Grid-columns and Grid-rows Properties-->

        <div id="fraction-values-fr" class="section">
        <h4><span class="secno">6.5.1 </span>Fraction Values: 'fr'</h4>
            <p>Fraction values are new units applicable to the <a href="#grid-rows-property">grid-rows</a> and <a href="#grid-columns-property">grid-columns</a> properties:</p>
            <dl>
                <dt>fr</dt>
                <dd>Fraction of available space. </dd>
            </dl>
            
            <p>
                The distribution of fractional space occurs after all <code>&lt;length&gt;</code> 
                or content-based row and column sizes have reached their maximum. 
                The total size of the rows or columns is then subtracted from the available space and the remainder is 
                divided proportionately among the fractional rows and columns.
            </p>
            <p>
                Each column or row's proportional share can be computed as the column or row's 
                <code>&lt;fraction&gt; * &lt;remaining space&gt; / &lt;sum of all fractions&gt;</code>.  
                Note that fractions occurring within a <code>minmax</code> function are only counted in the sum if in the <code>max</code> position.  
                Further, fractions that occur in the <code>min</code> position are treated as an absolute length of <code>0px</code>.
            </p>
            <p>
                When remaining space cannot be determined because the width or height of the <a href="#grid-element">Grid element</a> is undefined, fraction-sized <a href="#grid-track">Grid Track</a>s
                are sized to their contents while retaining their respective proportions.  In such cases the size of each fractional <a href="#grid-track">Grid Track</a> can
                be computed by determining the <code>max-content</code> size of each fractional <a href="#grid-track">Grid Track</a> and dividing that size by the respective
                <code>fraction</code>.  The maximum value of those results is treated as the <code>1fr</code> value, which is then multiplied
                by each <a href="#grid-track">Grid Track</a>'s <code>fraction</code> to determine its final size.
            </p>
        <!--End Section: Fraction Values: 'fr'-->
        </div>

        <div id="computed-values-grid-rows-and-columns" class="section">
        <h4><span class="secno">6.5.2 </span>Computed Values for Grid-rows and Grid-columns</h4>
            <p>
                The computed size of all <a href="#grid-track">Grid Track</a>s as returned for the <a href="#grid-rows-property"><code>grid-rows</code></a> and <a href="#grid-columns-property"><code>grid-columns</code></a> properties are normalized to used pixel values.
                All <a href="#grid-track">Grid Track</a>s are included in the computed value reported for <a href="#grid-rows-property"><code>grid-rows</code></a> and <a href="#grid-columns-property"><code>grid-columns</code></a> regardless of how the <a href="#grid-track">Grid Track</a>s were created, e.g. implicit tracks may be created by <a href="#grid-item">Grid Item</a>s referencing a <a href="#grid-line">Grid Line</a> not explicitly defined by a <a href="#grid-rows-property"><code>grid-rows</code></a> or <a href="#grid-columns-property"><code>grid-columns</code></a> property.
                
                The computed value includes any used values for named lines; any duplicate names must be removed. User agents may use the repeat syntax to avoid expansive string length due to implicit <a href="#grid-track">Grid Track</a> creation, 
                large spanning values or high repeat counts specified by the author.
            </p>
            <p>
                The algorithm used to apply repeat syntax to used <a href="#grid-track">Grid Track</a> values and <a href="#grid-line">Grid Line</a> names is user agent specific.  See below for example inputs and outputs.
            </p>
            <pre class="example">&lt;style type=&quot;text/css&quot;&gt;
    #grid {
        width: 500px;
        grid-columns: "a" auto "b" minmax(min-content, 1fr) "b" "c" "d" ("e" 40px)[2] (auto)[5];
    }
&lt;/style&gt;
&lt;div id=&quot;grid&quot;&gt;
    &lt;div style=&quot;grid-column:1; width:50px&quot;&gt;&lt;/div&gt;
    &lt;div style=&quot;grid-column:9; width:50px&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    // Returns '"a" 50px "b" 320px "c" "d" ("e" 40px)[2] (0px)[4] 50px'.
    window.getComputedStyle(document.getElementById("grid"), null).getPropertyValue("grid-columns")
&lt;/script&gt;</pre>
        <!--End Section: Fraction Values: 'fr'-->
        </div>
    <!--End Section: Defining Grid Rows and Columns-->



<p class=issue>Flex?



<h3>Computing the widths of the slots</h3>

<p class=issue>If a slot has a 'writing-mode' of 'vertical-rl' or
'vertical-lr', then the values 'max-content' and 'min-content' both
stand for the <em>block dimension</em> [[!CSS3-WRITING-MODES]] of the slot's content.

<p>[Solve set of constraints as in css3-layout]



<h3>Computing the height of the slots</h3>

<p class=issue>If a slot has a 'writing-mode' of 'horizontal', then
the values 'max-content' and 'min-content' both stand for
the <em>block dimension</em> [[!CSS3-WRITING-MODES]] of the slot's
content.

<p>[Solve set of constraints as in css3-layout]



<h3>The 'grid' shorthand property</h3>

<p>The 'grid' property is a shorthand for 'grid-template',
'grid-columns' and 'grid-rows'.

<table class=propdef>
    <tr>
      <th>Name:
      <td><dfn>grid</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td>none | [ [ <var>&lt;string&gt;</var> [ /
       <var>&lt;track-size&gt;</var> ]? ]+ ]
       <var>&lt;track-size&gt;</var>*
    <tr>
      <th>Initial:
      <td>none
    <tr>
      <th>Applies to:
      <td><a
      href="http://www.w3.org/TR/CSS21/visuren.html#block-boxes"
      >block container elements</a> [[!CSS21]]
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Animatable:
      <td>see individual properties
    <tr>
      <th>Percentages:
      <td>see individual properties
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>see individual properties
    <tr>
      <th>Canonical order:
      <td>N/A
</table>

<p>[Explain how a value is split into values for the three properties.]



<h2 id=positioning>
Positioning content into the template: the ‘position’ property</h2>

<p>The 'position' property is used to position elements into a slot.

<p class=issue>is it (row,column) or (column,row)?

<p class=issue>Use negative numbers to count backwards from the last
columns/rows?

<p class=issue>What if the numbers refer to a non-existing row or
column? Automatically created (see repeating below)? Ignored?

  <table class=propdef-extra>
    <tr>
      <th>Name:
      <td><dfn>position</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td><var>&lt;slot&gt;</var> | <var>&lt;integer&gt;</var>
      <var>&lt;integer&gt;</var> [ / <var>&lt;integer&gt;</var>
      <var>&lt;integer&gt;</var>? ]?
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td>All elements with a grid element as ancestor
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Animatable:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>specified value
    <tr>
      <th>Canonical order:
      <td><abbr title="follows order of property value definition">per
		grammar</abbr>
  </table>

<p>All content positioned into the same slot, whether positioned by
name ('position: slot(a)'), by coordinates ('position: 2 3') or implicitly
by flowing into the default slot, forms a single flow, with content in
document order.

<div class=issue>
<p>css3-grid-align allows to define a position either by saying how
many rows/columns it spans, or by saying  at which row and column
it ends. Some possible interpretations of four numbers:
<ol>
<li>'1 3 / 5 4' = start at column 1 row 3, span 5 columns and 4 rows
<pre>
. . . . . . .
. . . . . . .
x x x x x . .
x x x x x . .
x x x x x . .
x x x x x . .
. . . . . . .
</pre>
<li>'1 3 / 5 4' = start at column 1 row 3, end with column 5 row 4
<pre>
. . . . . . .
. . . . . . .
x x x x x . .
x x x x x . .
. . . . . . .
. . . . . . .
. . . . . . .
</pre>
<li>'1 3 / 5 4' = start at column 1 row 3, end <em>before</em> column
5 row 4
<pre>
. . . . . . .
. . . . . . .
x x x x . . .
. . . . . . .
. . . . . . .
. . . . . . .
. . . . . . .
</pre>
</ol>

<p>Do we need only one? Which one is the easiest to remember?
</div>

<p class=issue>If an element is a descendant of an absolutely
positioned element, does the position of this element refer to its own
nearest grid ancestor or to the nearest grid ancestor of its
positioned ancestor (because the absolutely positioned element may be
positioned relative to a containing block that is higher up in the
tree than the nearest ancestor grid)?

<p class=issue>Do we need keywords such as 'position: same' (position
into same slot as the preceding element with the same grid ancestor),
'position: next-row' (position into the next slot below the preceding
element with the same grid ancestor), 'position: next-column' or
'position: next'?



<h2 id=slot-pseudo>The ''::slot()'' pseudo-element</h2>

<p class=issue>Use two different pseudo-elements to refer to the slot
itself and to the fragment of an element that is inside that slot
('::fragment()'?) And then handle the latter in a separate module
(Regions?).

<p>The slots of a <em>template element</em> can be individually
addressed with the <dfn>''::slot()'' pseudo-element.</dfn>

<div class=example>
<p>For example, the following sets the background color and 
vertical alignment of some of the slots in a template:

<pre>
body { grid: "aaa"
             "bcd" }
body::slot(b) { background: #FF0 }
body::slot(c), body::slot(d) { vertical-align: bottom }
</pre>
</div>

<p class=issue>The ''::slot()'' pseudo-element can also be used to
create slots that overlap with other slots and to create alternative
(alias) names for slots.

<div class="example issue">
<p>For example, the following creates a slot that overlaps two other
slots. The slot z starts at the top left and is one column wide
and two rows high, overlapping the left third of the a slot and
the whole of the b slot.

<pre>
body { grid: "aaa"
             "bcd" }
body::slot(z) { position: 1 1 / 1 2 }
</pre>
</div>

<p>If a '::slot()' pseudo-element refers to a name that already exists
in the element's grid element, than any 'position' property on that
pseudo-element is ignored.

<p>If a '::slot()' pseudo-element defines a new slot that coincides
exactly with another slot in the element's grid element, then it is in
fact the same slot, and the new name is an alias for that
slot. <span class=issue>Unless it has a different 'z-index'?</span>

<p>Only the following properties apply to the ''slot()''
pseudo-element. Those marked with a * apply only to the ''slot()''
pseudo-element of a template element.

<div class=example>
<p>For example, if P is a child of DIV, then the 2nd rule below
specifies the alignment of content in slot a, but the 3rd rule has no
effect:

<pre>
DIV { grid: "a b b" }                    /* Rule 1 */
DIV::slot(a) { vertical-align: bottom }  /* Rule 2 */
P::slot(a) { vertical-align: bottom }    /* Rule 3 */
</pre>
</div>

<ul>
<li>background properties
<li>'vertical-align' (see <a href="#vertical-align">“vertical
alignment”</a> below)
<li>'overflow' (see the sections on <a
href="#vertical-align">vertical alignment</a> and <a
href="#paged">paged media</a> below)
<li class=issue>'writing-mode'
<li class=issue>'direction'
<li>'box-shadow'
<li>border properties <span class=issue
>(<a href="http://www.w3.org/Style/CSS/Tracker/issues/37"
>ISSUE-37:</a> Can a slot have a border and if so, where is it
drawn?)</span>
<li>padding properties
<li>'box-decoration-break'
<li>column properties
<li>'content' <span class=issue>Useful? Gives the first content for
the slot, more can be added by positioning other elements in the
slot.)</span>
<li class=issue>margins [to align the contents of the slot to sides or center
	with 'auto']
<li class=issue>'z-index' [if margins can be negative, slots can overlap]
</ul>

<p>The background of a slot is drawn immediately on top of the
background of the element itself. E.g., the background set on
''P::slot(a)'' is immediately in front of the background set on ''P''.

<p class=issue>Need to define the width when a slot has padding and
border, including when the width is too small.

<p class=note>Note that slots can have borders and padding, but no
margins (cf. table cells). <span class=issue>[still true?]</span>

<h2 id=vertical-align>Vertical alignment of elements in a slot</h2>

<p class=issue>Can use the margins of the '::slot()'' pseudo, or
re-use the 'vertical-align' property (bottom, top, middle, baseline),
or a new property ('flex-align'?) [Using 'margin' means there needs to
be another property if baseline alignment is required.]











<h2 id="conformance">
Conformance</h2>

<h3 id="conventions">
Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of
  descriptive assertions and RFC 2119 terminology. The key words “MUST”,
  “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
  “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
  document are to be interpreted as described in RFC 2119.
  However, for readability, these words do not appear in all uppercase
  letters in this specification.
  
  <p>All of the text of this specification is normative except sections
  explicitly marked as non-normative, examples, and notes. [[!RFC2119]]</p>
  
  <p>Examples in this specification are introduced with the words “for example”
  or are set apart from the normative text with <code>class="example"</code>,
  like this:
  
  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>
  
  <p>Informative notes begin with the word “Note” and are set apart from the
  normative text with <code>class="note"</code>, like this:
  
  <p class="note">Note, this is an informative note.</p>

<h3 id="conformance-classes">
Conformance classes</h3>

  <p>Conformance to <var class="replaceme">CSS TEMPLATE Module</var>
  is defined for three conformance classes:
  <dl>
    <dt><dfn title="style sheet!!as conformance class">style sheet</dfn>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
      style sheet</a>.
    <dt><dfn>renderer</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that interprets the semantics of a style sheet and renders
      documents that use them.
    <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that writes a style sheet.
  </dl>
  
  <p>A style sheet is conformant to <var class="replaceme">CSS TEMPLATE Module</var>
  if all of its statements that use syntax defined in this module are valid
  according to the generic CSS grammar and the individual grammars of each
  feature defined in this module.
  
  <p>A renderer is conformant to <var class="replaceme">CSS TEMPLATE Module</var>
  if, in addition to interpreting the style sheet as defined by the
  appropriate specifications, it supports all the features defined
  by <var class="replaceme">CSS TEMPLATE Module</var> by parsing them correctly
  and rendering the document accordingly. However, the inability of a
  UA to correctly render a document due to limitations of the device
  does not make the UA non-conformant. (For example, a UA is not
  required to render color on a monochrome monitor.)
  
  <p>An authoring tool is conformant to <var class="replaceme">CSS TEMPLATE Module</var>
  if it writes style sheets that are syntactically correct according to the
  generic CSS grammar and the individual grammars of each feature in
  this module, and meet all other conformance requirements of style sheets
  as described in this module.

<h3 id="partial">
Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
  assign fallback values, CSS renderers <strong>must</strong>
  treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
  as appropriate</a>) any at-rules, properties, property values, keywords,
  and other syntactic constructs for which they have no usable level of
  support. In particular, user agents <strong>must not</strong> selectively
  ignore unsupported component values and honor supported values in a single
  multi-value property declaration: if any value is considered invalid
  (as unsupported values must be), CSS requires that the entire declaration
  be ignored.</p>
  
<h3 id="experimental">
Experimental implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
  reserves a <a href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
  syntax</a> for proprietary and experimental extensions to CSS.
  
  <p>Prior to a specification reaching the Candidate Recommendation stage
  in the W3C process, all implementations of a CSS feature are considered
  experimental. The CSS Working Group recommends that implementations
  use a vendor-prefixed syntax for such features, including those in
  W3C Working Drafts. This avoids incompatibilities with future changes
  in the draft.
  </p>
 
<h3 id="testing">
Non-experimental implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
  non-experimental implementations are possible, and implementors should
  release an unprefixed implementation of any CR-level feature they
  can demonstrate to be correctly implemented according to spec.
  
  <p>To establish and maintain the interoperability of CSS across
  implementations, the CSS Working Group requests that non-experimental
  CSS renderers submit an implementation report (and, if necessary, the
  testcases used for that implementation report) to the W3C before
  releasing an unprefixed implementation of any CSS features. Testcases
  submitted to W3C are subject to review and correction by the CSS
  Working Group.
  
  <p>Further information on submitting testcases and implementation reports
  can be found from on the CSS Working Group's website at
  <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
  Questions should be directed to the
  <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
  mailing list.

<h3 id="cr-exit-criteria">
CR exit criteria</h3>

  <p class=issue>[Change or remove the following CR exit criteria if
  the spec is not a module, but, e.g., a Note or a profile. This text was <a
  href="http://www.w3.org/Style/CSS/Tracker/actions/44"> decided on 2008-06-04.</a>]</p>

  <p>
  For this specification to be advanced to Proposed Recommendation,
  there must be at least two independent, interoperable implementations
  of each feature. Each feature may be implemented by a different set of
  products, there is no requirement that all features be implemented by
  a single product. For the purposes of this criterion, we define the
  following terms:
  
  <dl>
    <dt>independent <dd>each implementation must be developed by a
    different party and cannot share, reuse, or derive from code
    used by another qualifying implementation. Sections of code that
    have no bearing on the implementation of this specification are
    exempt from this requirement.
  
    <dt>interoperable <dd>passing the respective test case(s) in the
    official CSS test suite, or, if the implementation is not a Web
    browser, an equivalent test. Every relevant test in the test
    suite should have an equivalent test created if such a user
    agent (UA) is to be used to claim interoperability. In addition
    if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those
    equivalent tests in the same way for the purpose of
    interoperability. The equivalent tests must be made publicly
    available for the purposes of peer review.
  
    <dt>implementation <dd>a user agent which:
  
    <ol class=inline>
      <li>implements the specification.
  
      <li>is available to the general public. The implementation may
      be a shipping product or other publicly available version
      (i.e., beta version, preview release, or “nightly build”). 
      Non-shipping product releases must have implemented the
      feature(s) for a period of at least one month in order to
      demonstrate stability.
  
      <li>is not experimental (i.e., a version specifically designed
      to pass the test suite and is not intended for normal usage
      going forward).
    </ol>
  </dl>
  
  <p>The specification will remain Candidate Recommendation for at least
  six months.

<h2 class=no-num id="acknowledgments">
Acknowledgments</h2>

  <p><var class="replaceme">[acknowledgments]</var></p>

<h2 class=no-num id="references">
References</h2>

<h3 class="no-num" id="normative-references">
Normative references</h3>
<!--normative-->

<h3 class="no-num" id="other-references">
Other references</h3>
<!--informative-->

<h2 class="no-num" id="index">
Index</h2>
<!--index-->

<h2 class="no-num" id="property-index">
Property index</h2>
<!-- properties -->

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
