<!DOCTYPE html>
<html><head>
	<title>CSS Lists and Counters Module Level 3</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
	<link rel="stylesheet" type="text/css" href="http://dev.w3.org/csswg/default.css">
	<style>
	code.inline { white-space: nowrap; }
	.alphabetic-example { font-family: monospace; font-size: 90%; margin: 1em 0 1em 2em; }
	.alphabetic-example > span { display: inline-block; width: 50px;}
	.alphabetic-example > span > img { width: 16px; height: 16px; }
	pre > code { white-space: pre-wrap; }
	.nobr { white-space: nowrap;}
	</style>
	<link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED">
</head><body>

<div class="head">
<!--logo-->

<h1>CSS Lists and Counters Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
	<dt>This version:
	<dd><!--<a href="http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]">http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]</a>-->
	<a href="http://dev.w3.org/csswg/css3-lists/">http://dev.w3.org/csswg/css3-lists/</a>

	<dt>Latest version:
	<dd><a href="http://www.w3.org/TR/css3-lists/">http://www.w3.org/TR/css3-lists/</a>

	<dt>Previous version:
	<dd><a href="http://www.w3.org/TR/2002/WD-css3-lists-20021107/">http://www.w3.org/TR/2002/WD-css3-lists-20021107/</a>

	<dt>Editor:
	<dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a>, Google Inc.

	<dt>Previous Editors: <!-- in the order tantek requested -->
	<dd>Ian Hickson, <a href="mailto:ian@hixie.ch">ian@hixie.ch</a>
	<dd><span lang="tr">Tantek &#x00C7;el&#x0131;&#x0307;k</span>, Microsoft Corporation,
	<a href="mailto:tantekc@microsoft.com">tantekc@microsoft.com</a>

	<dt>Contributors: <!-- in order of volume of input -->
	<dd>Simon Montagu, AOL-TW/Netscape, <a href="mailto:smontagu@netscape.com">smontagu@netscape.com</a>
	<dd>Daniel Yacob, <a href="mailto:yacob@geez.org">yacob@geez.org</a>
	<dd>Christopher Hoess, <a href="mailto:choess@stwing.upenn.edu">choess@stwing.upenn.edu</a>
	<dd>Daniel Glazman, AOL-TW/Netscape, <a href="mailto:glazman@netscape.com">glazman@netscape.com</a>
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>


<h2 class="no-num no-toc" id="abstract">
Abstract</h2>

	<p>CSS is a language for describing the rendering of structured documents
	(such as HTML and XML) on screen, on paper, in speech, etc.
	This draft contains the features of CSS level&nbsp;3 relating to
	list styling. It includes and extends the functionality of
	CSS level&nbsp;2 [[!CSS21]], which builds on CSS level&nbsp;1
	[[CSS1]]. The main extensions compared to level&nbsp;2 are a pseudo-element
	representing the list marker, 
	and a method for authors to define their own list-styles.


<h2 class="no-num no-toc" id="status">
Status of this document</h2>

<!--status-->


<h2 class="no-num no-toc" id="contents">
Table of contents</h2>

<!--toc-->

<hr>

<!-- ====================================================================== -->

<h2>
Introduction</h2>

	<p>
		This specification defines the ''::marker'' pseudo-element,
		the ''list-item'' and ''inline-list-item'' 'display' values that generate markers,
		and several properties controlling the placement and styling of markers.

	<p>
		It also defines <i>counters</i>,
		which are special numerical objects
		often used to generate the default contents of markers.

	<div class="example">
		<p>
			For instance, the following example illustrates how markers may be used to add parentheses around each numbered list item:

		<pre><!--
		-->&lt;style>&#xa;<!--
		-->li::marker { content: "(" counter(list-item, lower-roman) ")"; }&#xa;<!--
		-->li { display: list-item; }&#xa;<!--
		-->&lt;/style>&#xa;<!--
		-->&lt;ol>&#xa;<!--
		-->	&lt;li>This is the first item.&lt;/li>&#xa;<!--
		-->	&lt;li>This is the second item.&lt;/li>&#xa;<!--
		-->	&lt;li>This is the third item.&lt;/li>&#xa;<!--
		-->&lt;/ol></pre>

		<p>
			It should produce something like this: 

		<pre><!--
		-->  (i) This is the first item.&#xa;<!--
		--> (ii) This is the second item.&#xa;<!--
		-->(iii) This is the third item.</pre>

		<p class='note'>
			Note that this example is far more verbose than is usually needed in HTML,
			as the UA default style sheet takes care of most of the necessary styling.
	</div>

	<p>
		With descendant selectors and child selectors, 
		it's possible to specify different marker types depending on the depth of embedded lists.

	<p class="issue">
		A future release of this module will probably include ways to render tree lists.

<!-- ====================================================================== -->

<h2>
Declaring a List Item</h2>

	<p>
		A <dfn title="list item|list items">list item</dfn> is any element with its 'display' property set to ''list-item'' or ''inline-list-item''.
		<i>List items</i> generate ''::marker'' pseudo-elements;
		no other elements do.

	<p>
		Additionally, <i>list items</i> automatically increment the special ''list-item'' <i>counter</i>.
		Unless the 'counter-increment' property manually specifies a different increment for the ''list-item'' <i>counter</i>,
		it must be incremented by 1 on every <i>list item</i>, 
		at the same time that <i>counters</i> are normally incremented.
		(This has no effect on the values of the 'counter-*' properties.)

	<table class="propdef">
		<tbody>
			<tr>
				<th>Property:
				<td>'display'
			<tr>
				<th>New Value:
				<td><dfn>inline-list-item</dfn>
			<tr>
				<th>Initial:
				<td>same as CSS2.1
			<tr>
				<th>Applies to:
				<td>same as CSS2.1
			<tr>
				<th>Inherited:
				<td>same as CSS2.1
			<tr>
				<th>Percentages:
				<td>same as CSS2.1
			<tr>
				<th>Media:
				<td>same as CSS2.1
			<tr>
				<th>Computed&nbsp;value:
				<td>same as CSS2.1
		</tbody>
	</table>

	<p>
		The ''inline-list-item'' display value makes the element a <i>list item</i>,
		with the effects described above.
		Additionally, the ''outside'' value of 'list-style-position'
		computes to ''inside'' on this element.
		Otherwise, this display value is treated identically to ''inline''.

	<p class='note'>
		This display value is silly, 
		and only necessary because we haven't yet defined 'display' to be split into subproperties.  
		When that happens, 
		"being a list item" will just be a property value that can apply to block, inline, and other elements.

<!-- ====================================================================== -->

<h2 id='marker-content'>
Default Marker Contents: The 'list-style-image' and 'list-style-type' properties</h2>

	<p>
		The contents of a ''::marker'' pseudo-element can be generated automatically,
		rather than being specified explicitly with 'content'.
		The 'list-style-image' and 'list-style-type' properties control how these contents are generated.

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>list-style-image</dfn>
		<tr>
			<th>Value:
			<td>&lt;image> | none
		<tr>
			<th>Initial
			<td>none
		<tr>
			<th>Applies To:
			<td><i title="list item">list items</i>
		<tr>
			<th>Inherited:
			<td>yes
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>computed value of the &lt;image>, or ''none''
	</table>

	<p>
		The 'list-style-type' property specifies an image that will be used as the list marker's <i>default contents</i>.
		The values are defined as follows:

	<dl>
		<dt><dfn id='list-style-image-image'>&lt;image></dfn>
		<dd>
			If the <code>&lt;image></code> is not an <a href="http://www.w3.org/TR/css3-images/#invalid-image">invalid image</a>,
			the image is the <i>default contents</i> of the list item's marker.
			Otherwise, the <i>default contents</i> are given by 'list-style-type' instead.

		<dt><dfn id='list-style-image-none'>none</dfn>
		<dd>
			The <i>default contents</i> of the of the list item's marker are given by 'list-style-type' instead.
	</dl>

	<div class="example">
		<p>The following example sets the marker at the beginning of each list item to
		be the image "ellipse.png".

		<pre>li { list-style-image: url("http://www.example.com/ellipse.png") }</pre>
	</div>

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>list-style-type</dfn>
		<tr>
			<th>Value:
			<td>&lt;string> | &lt;counter-style-name> | &lt;symbols-function> | none
		<tr>
			<th>Initial:
			<td>disc
		<tr>
			<th>Applies To:
			<td><i>list items</i>
		<tr>
			<th>Inherited:
			<td>yes
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>specified value
	</table>

	<p>
		When the value of 'list-style-image' is ''none'' 
		or an <a href="http://www.w3.org/TR/css3-images/#invalid-image">invalid image</a>,
		the 'list-style-type' property is used to construct the default contents of a list item's marker;
		otherwise, 'list-style-type' is ignored.
		The values are defined as follows:

	<dl>
		<dt><dfn id='list-style-type-string'>&lt;string></dfn>
		<dd>
			The <code>&lt;string></code> is used as the list item's marker's <i>default contents</i>.

		<dt><dfn id='list-style-type-counter-style-name'>&lt;counter-style-name></dfn>
		<dd>
			If there is a counter style defined matching the <code>&lt;counter-style-name></code>,
			the list item's marker's <i>default contents</i> are that counter style.
			Otherwise, the list item's marker's <i>default contents</i> are ''none''.

		<dt><dfn id='list-style-type-symbols-function'>&lt;symbols-function></dfn>
		<dd>
			The list item's marker's <i>default contents</i> are the counter style
			represented by the <code>&lt;symbols-function></code>.

		<dt><dfn id='list-style-type-none'>none</dfn>
		<dd>
			The list item's marker's <i>default contents</I> are ''none''.
	</dl>

	<div class='example'>
		<p>The following examples illustrate how to set markers to various values:

		<pre><!--
		-->ul { list-style-type: "★"; }&#xa;<!--
		-->/* Sets the marker to a "star" character */&#xa;<!--
		-->&#xa;<!--
		-->p.note { &#xa;<!--
		-->	display: list-item; &#xa;<!--
		-->	list-style-type: "Note: "; &#xa;<!--
		-->	list-style-position: inside;&#xa;<!--
		-->}&#xa;<!--
		-->/* Gives note paragraphs a marker consisting of the string "Note: " */&#xa;<!--
		-->&#xa;<!--
		-->ol { list-style-type: upper-roman; }&#xa;<!--
		-->/* Sets all ordered lists to use the upper-roman counter-style &#xa;<!--
		-->   (<a href="#upper-roman">defined in this specification</a>) */&#xa;<!--
		-->&#xa;<!--
		-->ul { list-style-type: symbols(repeating '○' '●'); }&#xa;<!--
		-->/* Sets all unordered list items to alternate between empty and &#xa;<!--
		-->   filled circles for their markers. */&#xa;<!--
		-->&#xa;<!--
		-->ul { list-style-type: none; }&#xa;<!--
		-->/* Suppresses the marker entirely, unless list-style-image is specified&#xa;<!--
		-->   with a valid image, or the marker's contents are set explicitly via&#xa;<!--
		-->   the 'content' property. */</pre>
	</div>

<!-- ====================================================================== -->

<h2 id='list-style-position-property'>
Marker Position: The 'list-style-position' property</h2>

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>list-style-position</dfn>
		<tr>
			<th>Value:
			<td>inside | outside
		<tr>
			<th>Initial:
			<td>outside
		<tr>
			<th>Applies To:
			<td><i title="list item">list items</i>
		<tr>
			<th>Inherited:
			<td>yes
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>specified value
	</table>

	<p>
		This property helps control the position of the ''::marker'' pseudo-element in the <i>list item</i>. 
		The values are defined as follows:

	<dl>
		<dt><dfn id='list-style-position-inside'>inside</dfn>
		<dd>
			The ''::marker'' pseudo-element is an inline element placed immediately before where the ''::before'' pseudo-element would be placed in the <i>list item</i>.

		<dt><dfn id='list-style-position-outside'>outside</dfn>
		<dd>
			As ''inside'', plus the 'position' property on the marker computes to ''marker''.
			Additionally, the base directionality of the marker
			(used as an input to the bidi resolution algorithm)
			must be taken from the marker's <i>marker positioning reference element</i>.

			<p>
				If the <i>list item</i> is ''display: inline-list-item'',
				this value computes to ''inside''.
	</dl>

	<p class='note'>
		Note that a marker is only generated 
		if the used value of the 'content' property for the ''::marker'' pseudo-element is not ''none''.

	<div class=example>
		<p>For example:

		<pre><!--
		-->&lt;style>&#xa;<!--
		-->	ul.compact { list-style: inside; }&#xa;<!--
		-->	ul         { list-style: outside; }&#xa;<!--
		-->&lt;/style>&#xa;<!--
		-->&lt;ul class=compact>&#xa;<!--
		-->	&lt;li>first "inside" list item comes first&lt;/li>&#xa;<!--
		-->	&lt;li>second "inside" list item comes first&lt;/li>&#xa;<!--
		-->&lt;/ul>&#xa;<!--
		-->&lt;hr>&#xa;<!--
		-->&lt;ul>&#xa;<!--
		-->	&lt;li>first "outside" list item comes first&lt;/li>&#xa;<!--
		-->	&lt;li>second "outside" list item comes first&lt;/li>&#xa;<!--
		-->&lt;/ul></pre>

		<p>The above example may be formatted as:

		<pre>&#xa;<!--
		-->  * first "inside" list&#xa;<!--
		-->  item comes first&#xa;<!--
		-->  * second "inside" list&#xa;<!--
		-->  item comes second&#xa;<!--
		-->&#xa;<!--
		-->========================&#xa;<!--
		-->&#xa;<!--
		-->* first "outside" list&#xa;<!--
		-->  item comes first&#xa;<!--
		-->* second "outside" list&#xa;<!--
		-->  item comes second</pre>
	</div>

<!-- ====================================================================== -->

<h2 id='list-style-property'>
The 'list-style' shorthand property</h2>

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>list-style</dfn>
		<tr>
			<th>Value:
			<td>&lt;'list-style-type'> || &lt;'list-style-position'> || &lt;'list-style-image'>
		<tr>
			<th>Initial:
			<td>see individual properties
		<tr>
			<th>Applies To:
			<td><i title="list item">list items</i>
		<tr>
			<th>Inherited:
			<td>yes
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>see individual properties
	</table>

	<p>The 'list-style' property is a shorthand notation for setting the
	three properties 'list-style-type', 'list-style-image', and 'list-style-position'
	at the same place in the style sheet.

	<div class="example">
		<p>For example:

		<pre>
UL { list-style: upper-roman inside }  /* Any UL */
UL UL { list-style: circle outside } /* Any UL child of a UL */
		</pre>
	</div>

	<p>Using a value of ''none'' in the shorthand is potentially ambiguous, as ''none'' is a valid value for both 'list-style-image' and 'list-style-type'.  To resolve this ambiguity, a value of ''none'' in the shorthand must be applied to whichever of the two properties aren't otherwise set by the shorthand.

	<div class='example'>
		<pre>
list-style: none disc;
/* Sets the image to "none" and the type to "disc". */

list-style: none url(bullet.png);
/* Sets the image to "url(bullet.png)" and the type to "none". */

list-style: none;
/* Sets both image and type to "none". */

list-style: none disc url(bullet.png);
/* Syntax error */</pre>
	</div>

	<p>Although authors may specify 'list-style' information directly on list item elements (e.g., LI in HTML), they should do so with care.  Consider the following rules:
	
	<div class=example>
		<pre>
ol.alpha li { list-style: lower-alpha; }
ul li       { list-style: disc; }
/* These won't work as expected.  If you nest a &lt;ul>
into an &lt;ol class=alpha>, the first rule's specificity 
will make the &lt;ul>'s list items use the lower-alpha style. */

ol.alpha > li { list-style: lower-alpha; }
ul > li       { list-style: disc; }
/* These work as intended. */

ol.alpha { list-style: lower-alpha; }
ul       { list-style: disc; }
/* So do these, since inheritance will transfer the 
'list-style' value to the list items. */</pre>
	</div>


<!-- ====================================================================== -->

<h2 id='marker-pseudo-element'>
Markers: The <code class=css>::marker</code> pseudo-element</h2>

	<p>Markers are created by setting an element's 'display' property to
	''list-item'' or ''inline-list-item''.  The <code class=css>::marker</code> pseudo-element is only created if 
	the computed value of the 'content' property for the pseudo-element is not 
	''none''.

	<p>Just like other generated content, markers generate a box when they're created, which can be styled with the full range of properties and values.  Markers are placed at the beginning of their superior parent's content, before the ::before pseudo-element (if it exists).  <code class=css>::marker</code> pseudo-elements are inline by default, though certain values for 'list-style-position' on the list item can make the marker box positioned, which can have an effect on the computed value of display.

	<div class="example">
		<p>In the following example, the content is centered within a marker
		box of a fixed width. This document:

		<pre>
&lt;style>
li::marker { 
  content: "(" counter(counter) ")";
  width: 6em;
  text-align: center;
}
li {
  display: list-item;
  counter-increment: counter;
}
&lt;/style>
&lt;ol>
	&lt;li>This is the first item.&lt;/li>
	&lt;li>This is the second item.&lt;/li>
	&lt;li>This is the third item.&lt;/li>
&lt;/ol></pre>

		<p>should render something like this: 

		<pre>
  (1)    This is the 
         first item.
  (2)    This is the 
         second item.
  (3)    This is the 
         third item.</pre>
	</div>

	<div class="example">
		<p>In this example, markers are used to number paragraphs that are designated as "notes":

		<pre>
&lt;style>
p { margin-left: 12 em; }
p.note::marker { 
  content: "Note " counter(note-counter) ":";
  text-align: left;
  width: 10em;
}
p.note {
 display: list-item;
 counter-increment: note-counter;
}
&lt;/style>
&lt;p>This is the first paragraph in this document.&lt;/p>
&lt;p class="note">This is a very short document.&lt;/p>
&lt;p>This is the end.&lt;/p>
		</pre>

		<p>It should render something like this:

		<pre>
            This is the first paragraph 
            in this document.

  Note 1:   This is a very short 
            document.
           
            This is the end.</pre>
	</div>

	<div class="example">
		<p>By using the <code class=css>::marker</code> pseudo-element, a list's markers can be positioned much more flexibly, and even be styled independently from the text of the list item itself:

		<pre>
&lt;style>
p { margin-left: 8em } /* Make space for counters */
li { list-style-type: lower-roman; }
li::marker { margin: 0 3em 0 0; color: blue; }
&lt;/style>
&lt;p>This is a long preceding paragraph ...&lt;/p>
&lt;ol>
	&lt;li>This is the first item.&lt;/li>
	&lt;li>This is the second item.&lt;/li>
	&lt;li>This is the third item.&lt;/li>
&lt;/ol>
&lt;p>This is a long following paragraph ...&lt;/p></pre>

		<p>The preceding document should render something like this: 

		<pre>
        This is a long preceding
        paragraph ...
      
   <span style=color:blue>i.</span>   This is the first item.
  <span style=color:blue>ii.</span>   This is the second item.
 <span style=color:blue>iii.</span>   This is the third item.

        This is a long following
        paragraph ...</pre>

        <p>Previously the only way to style a marker was through inheritance; one had to put the desired marker styling on the list item, and then revert that on a wrapper element around the list item's actual contents.  Non-inherited properties like 'margin' couldn't be adjusted at all on the marker.
	</div>

<!-- ====================================================================== -->

<h3 id='content-property'>
Generating the computed value of the 'content' property</h3>

	<p>If a <code class=css>::marker</code> pseudo-element has its 'content' property set to ''normal'',
	the computed value of the marker's 'content' property must be determined
	according to the following algorithm:

	<ol>
		<li>If the computed value of 'list-style-image' is a valid &lt;image>, then 
		the computed value of the 'content' property is that image.

		<li>Otherwise, if the computed value of 'list-style-type' is a &lt;string>, then 
		the computed value of the 'content' property is that string.

		<li>Otherwise, if the computed value of 'list-style-type' is a valid <i>&lt;counter-style></i>, then the computed value of the 'content' property is <code>&lt;counter-prefix> counter(list-item, &lt;counter-style>) &lt;counter-suffix></code>, where <i>&lt;counter-prefix></i> and <i>&lt;counter-suffix></i> are the values of the <i title='counter-prefix'>prefix</i> and <i title='counter-suffix'>suffix</i> descriptors for the counter style.

		<li>Otherwise the computed value is ''none''.
	</ol>

	<div class="example">
		<p>Given the following style sheet:

		<pre>
li { display: list-item; list-style-type: decimal /* initial value */; }
li<code class=css>::marker</code> { content: normal /* initial value */; }</pre>

		<p>And the following document fragment:

		<pre>&lt;li>List Item&lt;/li></pre>

		<p>The computed value of the 'content' property on the <code class=css>::marker</code> pseudo-element of the list item element is:

		<pre>counter(list-item, decimal) "."</pre>
	</div>

<!-- ===================================================================== -->
<h2 id='positioning-markers'>
Positioning Markers</h2>

	<p>This section introduces a new positioning scheme, designed to model the 
	way in which "outside" list markers were traditionally positioned in CSS 2.1.  
	Outside list markers now have their positioning defined	in terms of this new 
	value.

	<p>The new positioning scheme defined in this section can be used on all 
	elements, not just <code class=css>::marker</code> pseudo-elements.  In some situations, such as 
	legal proceedings or official minutes, the precise form that the list marker 
	takes is a vital part of the content.  It's not acceptable for the marker to 
	change (from a custom-defined marker to a default bullet or alpha marker) 
	just because the UA is not rendering CSS, or a server error is temporarily 
	preventing the CSS file from being loaded, as the precise form of the marker 
	is used to officially refer to that segment. The only way to guarantee that 
	the marker will be rendered correctly, regardless of whether CSS is applied, 
	is to specify the marker outside of CSS, directly in the document's markup.  
	However, the page author may still want to style the marker in many of the 
	ways that are available to them when using ordinary CSS-generated markers.  
	To accomodate this, the new positioning scheme can be used to position the 
	marker-in-content as if it were an ordinary CSS-generated marker.

<h3 id='position-marker'>
The ''marker'' value for 'position'</h3>

	<table class="propdef">
		<tr>
			<th>Property:
			<td>'position'
		<tr>
			<th>New Value:
			<td>''marker''
		<tr>
			<th>Initial:
			<td>same as CSS2.1
		<tr>
			<th>Applies to:
			<td>same as CSS2.1
		<tr>
			<th>Inherited:
			<td>same as CSS2.1
		<tr>
			<th>Percentages:
			<td>same as CSS2.1
		<tr>
			<th>Media:
			<td>same as CSS2.1
		<tr>
			<th>Computed&nbsp;value:
			<td>see prose, otherwise same as CSS2.1
	</table>

	<p>The ''marker'' value for 'position' depends on the element it is set on having a list item ancestor.  If the specified value of 'position' is ''marker'' and the element does not have a list item ancestor, 'position' must compute to 'relative' on the element.  An element with <code class=css>position:marker</code> counts as <a href="http://www.w3.org/TR/CSS21/visuren.html#absolutely-positioned">absolutely positioned</a>.

	<p>To calculate the marker's position, we must first define a few terms:

	<dl>
		<dt><dfn title="ancestor list item|ancestor list item's">ancestor list item</dfn>
		<dd>The <i>ancestor list item</i> is the marker's nearest list item ancestor element.

		<dt><dfn>marker positioning reference element</dfn>
		<dd>
			<p>If the <i>ancestor list item</i> has ''marker-attachment:list-item'', the <i>marker positioning reference element</i> is the <i>ancestor list item</i>.

			<p>Otherwise, if the <i>ancestor list item</i> has ''marker-attachment:list-container'' and has a parent element, the <i>marker positioning reference element</i> is the <i>ancestor list item's</i> parent.
			
			<p>Otherwise, the <i>marker positioning reference element</i> is the <i>ancestor list item</i>.
		

		<dt><dfn>list item positioning edge</dfn>
		<dd>The border edge of the <i>ancestor list item</i> corresponding to the "start" or "before" edge of the <i>marker positioning reference element</i>, whichever is in the <i>ancestor list item's</i> inline axis.

		<dt><dfn>marker positioning edge</dfn>
		<dd>The opposing edge relative to the <i>list item positioning edge</i> on the marker's margin box.  For example, if the <i>list item positioning edge ended up being the left border edge of the <i>ancestor list item</i>, the <i>marker positioning edge</i> would be the right margin edge of the marker.
	</dl>

	<p>The marker's position in the <i>ancestor list item's</i> block axis is calculated according to the <a href="http://www.w3.org/TR/CSS21/visuren.html#normal-flow">normal flow</a>. <span class='note'>In the Positioned Layout Module this will be defined more precisely in terms of placeholders.</span>

	<p>The marker's position in the <i>ancestor list item's</i> inline axis must be set such that the <i>marker positioning edge</i> is flush with the <i>list item positioning edge</i>.

	<p class='note'>The purpose of this somewhat convoluted definition is to position the marker flush against its list item, and then when "marker-attachment:list-container", keep all the markers for a given list on the same side of their list items even in mixed-direction text, so that authors can specify padding on only one side and still ensure their markers are visible.  And on top of all that, do something sane in the face of potentially differing writing-modes on the marker, list item, and container.

	<p>All elements or pseudo-elements with <code class=css>"position:marker"</code> that share a common <i>ancestor list item</i> are known as <dfn title='associated-marker'>markers associated with that list item</dfn>.

	<p>The 'top', 'right', 'bottom', and 'left' properties specify offsets relative to the top, right, bottom, and left edges (respectively) of the element itself, similar to how relative positioning works.

	<div class='example'>
		<p>''position:marker'' can be used when the precise list marker is important for the content, not a stylistic choice, but the normal <em>appearance</em> of lists is still desired.  For example, this trimmed snippet of the US Code of Laws may be marked up as the following in HTML:

		<pre>
&lt;style>
ol { list-style: none; }
.marker { position: marker; }
&lt;/style>
&lt;ol>
   &lt;li>
      &lt;span class='marker'>(a)&lt;/span> Definitions.— For purposes of this section—
      &lt;ol>
         &lt;li>&lt;span class='marker'>(1)&lt;/span> the term “agency” means agency as...&lt;/li>
         &lt;li>&lt;span class='marker'>(2)&lt;/span> the term “individual” means a citizen...&lt;/li>
      &lt;/ol>
   &lt;/li>
   &lt;li>
      &lt;span class='marker'>(b)&lt;/span> Conditions of Disclosure.— No agency shall disclose...
      &lt;ol>
         &lt;li>&lt;span class='marker'>(1)&lt;/span> to those officers and employees of the agency which...&lt;/li>
         &lt;li>&lt;span class='marker'>(2)&lt;/span> required under section 552 of this title;&lt;/li>
      &lt;/ol>
   &lt;/li>
&lt;/ol></pre>

		<p>The preceding document should render something like this:

		<pre>
 (a) Definitions.— For purposes of this section—
     (1) the term “agency” means agency as...
     (2) the term “individual” means a citizen...
 (b) Conditions of Disclosure.— No agency shall disclose...
     (1) to those officers and employees of the agency which...
     (2) required under section 552 of this title;</pre>

		<p>Importantly, it will <strong>always</strong> be presented something like that, with those exact list markers, even if the stylesheet is unavailable, so other documents can refer to those list markers and be confident that the reference will always be resolvable.
	</div>

<h3 id='marker-attachment'>
The 'marker-attachment' property</h3>

	<p>By default, elements or <code class=css>::marker</code> pseudo-elements with ''position:marker'' position themselves according to their list item's directionality.  However, if the list item is grouped with several other list items which may have different directionality (for example, multiple &lt;li>s with different "dir" attributes in an &lt;ol> in HTML), it is sometimes more useful to have all the markers line up on one side, so the author can specify a single "gutter" on that side and be assured that all the markers will lie in that gutter and be visible.  The 'marker-attachment' property defined in this section allows an author to control this, switching list items to positioning their markers based off the list container's directionality instead.

	<table class="propdef">
		<tr>
			<th>Property:
			<td><dfn>marker-attachment</dfn>
		<tr>
			<th>Value:
			<td>list-item | list-container
		<tr>
			<th>Initial:
			<td>list-item
		<tr>
			<th>Applies to:
			<td><i title="list item">list items</i>
		<tr>
			<th>Inherited:
			<td>yes
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>visual
		<tr>
			<th>Computed Value:
			<td>specified value
	</table>

	<p>When a list item has ''marker-attachment:list-item'', any <i title='associated-marker'>markers associated with the list item</i> base their positioning off of the directionality of the list item.  When a list item has ''marker-attachment:list-container'', the <i title='associated-marker'>associated markers</i> instead base their positioning off of the directionality of the list item's parent element.  The normative meaning of this is specified in the section defining <a href="#position-marker">position:marker</a>.

	<div class='example'>
		<p>Here is a visual rendering of the effect that 'marker-attachment' can have on a list.  Both of the following renderings are generated from the following HTML, with the only difference being the value of 'marker-attachment' on the list:

		<pre>
&lt;ul>
	&lt;li>english one
	&lt;li dir=rtl>OWT WERBEH
	&lt;li>english three
	&lt;li dir=rtl>RUOF WERBEH
&lt;/ul></pre>

		<table class=data style="width: 35em;">
			<thead>
				<tr>
					<th>list-item
					<th>list-container
			<tbody>
				<tr>
					<td style="border-right: thin solid">
						<ul>
							<li>english one
							<li dir=rtl>OWT WERBEH
							<li>english three
							<li dir=rtl>RUOF WERBEH
						</ul>
					<td>
						<ul>
							<li>english one
							<li>OWT WERBEH
							<li>english three
							<li>RUOF WERBEH
						</ul>
		</table>
	</div>



<!-- ===================================================================== -->

<h2 id='counter'>
Automatic Counters and Numbering: the 'counter-increment', 'counter-set' and 'counter-reset' properties</h2>

	<p>Automatic numbering in CSS2 is controlled with three properties: 'counter-increment', 'counter-set' and 'counter-reset'. The <dfn title="list counter">counters</dfn> defined by these properties are used with the ''counter()'' and ''counters()'' functions.

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>counter-increment</dfn>
		<tr>
			<th>Value:
			<td>[ &lt;identifier> &lt;integer>? ]+ | none
		<tr>
			<th>Initial:
			<td>none
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>all
		<tr>
			<th>Computed&nbsp;value:
			<td>specified value
	</table>

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>counter-set</dfn>
		<tr>
			<th>Value:
			<td>[ &lt;identifier> &lt;integer>? ]+ | none
		<tr>
			<th>Initial:
			<td>none
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>all
		<tr>
			<th>Computed&nbsp;value:
			<td>specified value
	</table>

	<table class="propdef">
		<tr>
			<th>Name:
			<td><dfn>counter-reset</dfn>
		<tr>
			<th>Value:
			<td>[ &lt;identifier> &lt;integer>? ]+ | none
		<tr>
			<th>Initial:
			<td>none
		<tr>
			<th>Applies To:
			<td>all elements
		<tr>
			<th>Inherited:
			<td>no
		<tr>
			<th>Percentages:
			<td>N/A
		<tr>
			<th>Media:
			<td>all
		<tr>
			<th>Computed&nbsp;value:
			<td>specified value
	</table>

	<p>The 'counter-increment' property accepts one or more names of counters (identifiers), each one optionally followed by an integer. The integer indicates by how much the counter is incremented for the element it's set on. The default increment is ''1''.

	<p>The 'counter-set' and 'counter-reset' properties also contains a list of one or more names of counters, each one optionally followed by an integer. The integer gives the value that the counter is set to on the element it's set on. The default is ''0''.

	<p>On all of these properties, a value of 'none' means that no counters are incremented, set, or reset, respectively.  Counter names must not be 'initial', 'inherit', or 'none'; using one of these keywords as a counter name makes the property invalid.

	<p>'counter-reset' always establishes a new <i>counter scope</i> on the element it's set on.  'counter-increment' and 'counter-set' sometimes establish a new <i>counter scope</i> on the element they're set on.

	<div class="example">
		<p>This example shows a way to number chapters and sections with "Chapter 1", "1.1", "1.2", etc.

		<pre>
H1:before {
    content: "Chapter " counter(chapter) ". ";
    counter-increment: chapter;  /* Add 1 to chapter */
    counter-reset: section;      /* Set section to 0 */
}
H2:before {
    content: counter(chapter) "." counter(section) " ";
    counter-increment: section;
}</pre>
	</div>

	<p>Resetting a counter is done <em>before</em> setting a counter, which is done <em>before</em> incrementing a counter, which is done <em>before</em> using a counter (for example, in the 'content' property).

	<div class='note'>
		<p>The counter properties follow the cascading rules as normal. Thus, due to cascading, the following style sheet:

		<div class='example'>
			<pre>
H1 { counter-reset: section -1 }
H1 { counter-reset: imagenum 99 }</pre>
		</div>

		<p>will only reset 'imagenum'. To reset both counters, they have to be specified together:

		<div class='example'>
			<pre>H1 { counter-reset: section -1 imagenum 99 }</pre>
		</div>

		<p>The same principles apply to the 'counter-set' and 'counter-increment' properties.
	</div>


<h3 id="nested-counters">
Nested counters and scope</h3>

	<p>Counters are "self-nesting", in the sense that resetting a counter in a child element automatically creates a new instance of the counter. This is important for situations like lists in HTML, where lists can be nested inside lists to arbitrary depth. It would be impossible to define uniquely named counters for each level.

	<div class="example">
		<p>Thus, the following suffices to number nested list items. The result is very similar to that of setting 'display:list-item' and 'list-style: inside' on the LI element:

		<pre>
OL { counter-reset: item }
LI { display: block }
LI:before { content: counter(item) ". "; counter-increment: item }</pre>
	</div>

	<p>The self-nesting is based on the principle that every element or pseudo-element that has a 'counter-reset' for a counter X, creates a fresh counter X, the <dfn id="counter-scope" title="scope|counter scope">scope</dfn> of which is the element or pseudo-element, its following siblings up to but not including the first one that resets the same counter, and all the descendants of those elements.

	<p>Additionally, if an element has a 'counter-set' or 'counter-increment' for a counter that is not in scope for the element, it establishes a scope for that counter identically to if 'counter-reset' were used on the element to reset the counter to ''0''.

	<p>In the example above, an OL will create a counter, and all children of the OL will refer to that counter.

	<div class="html-example">

		<p>If we denote by item[<var>n</var>] the <var>n</var><sup>th</sup> instance of the "item" counter, and by "(" and ")"the beginning and end of a scope, then the following HTML fragment will use the indicated counters. (We assume the style sheet as given in the example above).

		<pre>
&lt;OL>               &lt;!-- (set item[0] to 0         -->
  &lt;LI>item         &lt;!--  increment item[0] to 1   -->
  &lt;LI>item         &lt;!--  increment item[0] to 2   -->
    &lt;OL>           &lt;!--  (set item[1] to 0        -->
      &lt;LI>item     &lt;!--   increment item[1] to 1  -->
      &lt;LI>item     &lt;!--   increment item[1] to 2  -->
      &lt;LI>item     &lt;!--   increment item[1] to 3  -->
        &lt;OL>       &lt;!--   (set item[2] to 0       -->
          &lt;LI>item &lt;!--    increment item[2] to 1 -->
        &lt;/OL>      &lt;!--   )                       -->
        &lt;OL>       &lt;!--   (set item[3] to 0       -->
          &lt;LI>     &lt;!--    increment item[3] to 1 -->
        &lt;/OL>      &lt;!--   )                       -->
      &lt;LI>item     &lt;!--  increment item[0] to 3   -->
  &lt;LI>item         &lt;!--  increment item[0] to 4   -->
&lt;/OL>              &lt;!-- )                         -->
&lt;OL>               &lt;!-- (set item[4] to 0         -->
  &lt;LI>item         &lt;!--  increment item[4] to 1   -->
  &lt;LI>item         &lt;!--  increment item[4] to 2   -->
&lt;/OL>              &lt;!-- )                         --></pre>
	</div>

	<p>As explained in a later section, the ''counter()'' function generates a string based off of the innermost scope of the named counter, while the ''counters()'' function generates a string based on the values of <em>all</em> the in-scope counters with a given name.

	<div class="example"><p>
		<p>The following style sheet numbers nested list items 
		as "1", "1.1", "1.1.1", etc.

		<pre>
OL { counter-reset: item }
LI { display: block }
LI:before { content: counters(item, "."); counter-increment: item }</pre>
	</div>


<h3 id='counters-without-boxes'>
Counters in elements that do not generate boxes</h3>

	<p>An element that does not generate a box (for example, an element with 'display' set to ''none'', or a pseudo-element with 'content' set to ''none'') cannot set, reset, or increment  a counter.  The counter properties are still valid on such an element, they simply must have no effect.

	<div class="example">
		<p>For example, with the following style sheet, H2s with class "secret" do not increment 'count2'.

		<pre>
h2 { counter-increment: count2; }
h2.secret { display: none; }</pre>
	</div>

	<p>Other methods of "hiding" elements, such as setting 'visibility' to ''hidden'', still cause the element to generate a box, and so do not apply here.


<h2 id='counter-function'>
Printing Counters: the ''counter()'' and ''counters()'' functions</h2>

	<p>Counters have no visible effect by themselves, but their values can be used in the ''counter()'' and ''counters()'' functions to generate counter representations.  This happens automatically in the default contents of ''::marker'' pseudo-elements, but can be used by an author anywhere that accepts a string.  Their syntax is:

	<pre>
<dfn>&lt;counter-function></dfn>  =  counter(name [, [ &lt;counter-style> | none ] ]? )
<dfn>&lt;counters-function></dfn> = counters(name, &lt;string>[, [ &lt;counter-style> | none ] ]? )</pre>

	<p>For both functions, if the ''&lt;counter-style>'' is omitted it defaults to ''decimal''.

	<p>A ''&lt;counter-function>'' represents the string obtained when one <i title='generate-a-counter'>generates a counter representation</i> of the named counter's value using the function's ''&lt;counter-style>''.  If there are multiple counters of that name in scope, the one whose scoping element is closest in document-order to the element on which ''counter()'' appears is used.  If there are no counters of that name in scope, use the value ''0'' to generate the counter representation.  If ''none'' is provided as the second argument, the ''&lt;counter-function>'' instead represents the empty string.

	<div class="example">
		<pre>
H1:before        { content: counter(chno, upper-latin) ". " }
/* Generates headings like "A. A History of Discontent" */

H2:before        { content: counter(section, upper-roman) " - " }
/* Generates headings like "II - The Discontent Part" */

BLOCKQUOTE:after { content: " [" counter(bq, decimal) "]" }
/* Generates blockquotes that end like "... [3]" */

DIV.note:before  { content: counter(notecntr, disc) " " }
/* Simply generates a bullet before every div.note */

P:before         { content: counter(p, none) } 
/* inserts nothing */</pre>
	</div>

	<p>A ''&lt;counters-function>'' represents the string obtained by the following algorithm:

	<ol>
		<li>Collect all counters of the given name that are in scope for the elements on which ''counters()'' appears, sorted by document-order of each scope's scoping element.  If there are no such counters, run the rest of this algorithm as if there were a single counter with the value ''0''.

		<li>Render each counter as a string by <i title='generate-a-counter'>generating a counter representation</i> of the counter's value using the function's &lt;counter-style>.  If ''none'' is provided as the third argument, instead render each counter as the empty string.

		<li>Concatenate all of the counter representations in order, placing a copy of the string provided as the second argument between each adjacent pair, and return the resulting string.
	</ol>

	<div class='example'>
		<p>The following example shows a simple use of the ''counters()'' function:

		<pre>
&lt;ul>
  &lt;li>one&lt;/li>
  &lt;li>two
    &lt;ul>
      &lt;li>nested one&lt;/li>
      &lt;li>nested two&lt;/li>
    &lt;/ul>
  &lt;/li>
  &lt;li>three&lt;/li>
&lt;/ul>
&lt;style>
ul { counter-reset: list-item; }
li { counter-increment: list-item; }
li::marker { content: '(' counters(list-item,'.') ') '; }
&lt;/style></pre>

		<p>The preceding document should render something like this:

		<pre>
(1) one
(2) two
   (2.1) nested one
   (2.2) nested two
(3) three</pre>
	</div>

	<div class='example'>
		<p>Because counter scopes extend to siblings as well, they can be used to number headings and subheadings, which aren't nested within each other.  Unfortunately, this precludes the use of ''counters()'' as the scopes of siblings won't nest, but one can create multiple counters and manually reference them instead:

		<pre>
&lt;h1>First H1&lt;/h1>
...
&lt;h2>First H2 in H1&lt;/h2>
...
&lt;h2>Second H2 in H1&lt;/h2>
...
&lt;h3>First H3 in H2&lt;/h3>
...
&lt;h1>Second H1&lt;/h1>
...
&lt;h2>First H2 in H1&lt;/h2>
...
&lt;style>
body { counter-reset: h1 h2 h3; }
h1   { counter-increment: h1; counter-reset: h2 h3;}
h2   { counter-increment: h2; counter-reset:    h3; }
h3   { counter-increment: h3; }
h1::before { content: counter(h1,upper-alpha) ' '; }
h2::before { content: counter(h1,upper-alpha) '.' 
                      counter(h2,decimal) ' '; }
h3::before { content: counter(h1,upper-alpha) '.' 
                      counter(h2,decimal) '.' 
                      counter(h3,lower-roman) ' '; }
&lt;/style></pre>

		<p>The preceding document should render something like this:

		<pre>
A First H1
...
A.1 First H2 in H1
...
A.2 Second H2 in H1 
...
A.2.i First H3 in H2
...
B Second H1
...
B.1 First H2 in H1
...</pre>
	</div>


<h2 id='counter-style'>
Defining Custom Counter Styles: the ''@counter-style'' rule</h2>

	<p>CSS 2.1 defined a handful of useful counter styles based on the styles that
	HTML traditionally allowed on ordered and unordered lists.  This tiny set, though,
	is quite inadequate for modern web pages; displaying an ordered list with markers 
	based on the latin alphabet while the content is Arabic seems quite incongruous!

	<p>Unfortunately, the set of potentially useful list styles is too large to
	specify ahead of time - the world contains thousands of languages and hundreds
	of scripts, not to mention the near-infinite stylistic variations found on the
	web that go beyond mere language-based variation.  The ''@counter-style'' rule
	allows CSS to address this in an open-ended manner, by allowing the author
	to define their own counter styles.  These styles can then be used in the
	'list-style-type' property or in the ''counter()'' and ''counters()'' functions.

	<p>A <dfn>counter style</dfn> defines how to construct the representation of a
	counter value.  Counter styles are composed of:
	
	<ul>
		<li>a <dfn title='counter-name'>name</dfn>, to identify the style
		
		<li>an <dfn title='counter-algorithm'>algorithm</dfn> that transforms counter 
		values into a string representation
		
		<li>a <dfn title='counter-negative'>negative sign</dfn>, which is prepended or
		appended to the representation of a negative counter value
		
		<li>a <dfn title='counter-prefix'>prefix</dfn>, to prepend to the representation
		
		<li>a <dfn title='counter-suffix'>suffix</dfn>, to append to the representation
		
		<li>a <dfn title='counter-range'>range</dfn>, which limits the values that a counter style can handle
		
		<li>and a <dfn title='counter-fallback'>fallback style</dfn>, to render the 
		representation with when the counter value is outside the counter style's 
		range or the counter style otherwise can't render the counter value
	</ul>
	
	<p>The algorithm is usually specified implicitly by a combination of the ''type'',
	''symbols'', and ''additive-symbols'' properties, but some counter styles
	instead have their algorithm explicitly defined in the 
	<a href='#predefined-counters'>Complex Counter Styles</a> section.

	<p>When asked to <dfn title='generate-a-counter'>generate a counter representation</dfn>
	using a particular counter style for a particular counter value, follow these steps:

	<ol>
		<li>If the counter value is outside the <i title='counter-range'>range</i> of the counter style, exit this algorithm and instead <i title='generate-a-counter'>generate a counter representation</i> using the counter style's fallback style and the same counter value.

		<li>Using the counter value and the <i title='counter-algorithm'>counter algorithm</i> 
		for the counter style, generate an initial representation for the counter value.

		<li>Return the representation.
	</ol>

	<p class='note'>Note that the prefix and suffix don't play a part in this algorithm.  This is intentional; the prefix and suffix aren't part of the string returned by the counter() or counters() functions.  Instead, the prefix and suffix are added by the algorithm that constructs the computed value of the 'contents' property for the <code class=css>::marker</code> pseudo-element.  This also implies that the prefix and suffix always come from the specified counter-style, even if the actual representation is constructed by a fallback style.

	<p>The general form of an ''@counter-style'' rule is:

	<pre>
@counter-style <i>&lt;counter-style-name></i> {
	[ descriptor: value; ]+
}
	</pre>

	<p>Each @counter-style rule specifies a value for every counter-style descriptor,
	either implicitly or explicitly.  Those not given explicit value in the rule
	take the initial value listed with each descriptor in this specification.
	These descriptors apply solely within the context of the @counter-style rule
	in which they are defined, and do not apply to document language elements.
	There is no notion of which elements the descriptors apply to or whether the
	values are inherited by child elements.  When a given descriptor occurs 
	multiple times in a given @counter-style rule, only the last specified value
	is used; all prior values for that descriptor must be ignored.  Unknown descriptors must be ignored; they must not make the ''@counter-style'' rule invalid.

	<p>Defining a ''@counter-style'' must make it available to the entire document in which it is included.  If multiple ''@counter-style'' rules are defined with the same name, standard cascade rules must be used to determine which declaration "wins": first, they are compared by origin, with author rules beating user rules, and user rules beating UA rules; second, they are compared by document order, with later rules beating earlier rules.  ''@counter-style'' rules cascade "atomically" - if one replaces another of the same name, it replaces it <em>entirely</em>, rather than just replacing the specific descriptors it specifies.

	<p>This at-rule conforms with the forward-compatible parsing requirement of CSS; parsers may ignore these rules without error. Any descriptors that are not recognized or implemented by a given user agent must be ignored.  The <i>&lt;counter-style-name></i> must be be a valid identifier and must not be "decimal", "default", "inherit", "initial", "inside", "none", or "outside"; otherwise the @counter-style is invalid and must be ignored.

<h3 id='counter-style-type'>
Counter algorithms: the 'type' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-type">type</dfn>
		<tr>
			<th>Value:
			<td>repeating | numeric | alphabetic | symbolic | additive | <span class=nobr>[non-repeating &lt;integer>?]</span> | <span class=nobr>[ override &lt;counter-style-name> ]</span>
		<tr>
			<th>Initial:
			<td>symbolic
	</table>

	<p>The 'type' descriptor specifies which algorithm will be used to construct
	the counter's representation based on the counter value.  For example, 
	''repeating'' type counter styles just cycle through their symbols repeatedly, 
	while <i>numeric</i> type counter styles interpret their symbols as digits and 
	build their representation accordingly.  The types are defined as follows:


<h4>
repeating</h4>

	<p>If the type is <a href=#repeating>repeating</a>, the 'symbols' descriptor must contain 
	at least one <i>counter symbol</i>. This type is defined over all counter 
	values.

	<p>The <i>repeating</i> counter type cycles repeatedly through its provided
	symbols, looping back to the beginning when it reaches the end of the
	list, similar to the default <i>disc</i> counter style.  It can be used for 
	simple bullets (just provide a single <i>counter symbol</i>), or for cycling 
	through multiple bullets.  The first <i>counter symbol</i> is used as the 
	representation of the value 1, the second <i>counter symbol</i> (if it exists) 
	is used as the representation of the value 2, etc.

	<p>In general, if there are <var>length</var> <i>counter symbols</i> and
	a representation is being constructed for the value <var>value</var>, 
	the representation is the <i>counter symbol</i> at index 
	( (<var>value</var>-1) mod <var>length</var>) of the list of <i>counter symbol</i>s
	(0-indexed).

	<div class=example>
		<p>A "triangle bullet" counter style can be defined as:

		<pre>
@counter-style <dfn>triangle</dfn> {
	type: repeating;
	symbols: '‣';
	suffix: '';
}
		</pre>

		<p>It will then produce lists that look like:

		<pre>
‣  One
‣  Two
‣  Three
		</pre>
	</div>

<h4>
numeric</h4>

	<p>If the type is <a href=#numeric>numeric</a>, the 'symbols' descriptor must contain at
	least two <i>counter symbol</i>s. This type is defined over all counter 
	values.

	<p>The <i>numeric</i> counter type cycles interprets the list of 
	<i>counter symbol</i>s as digits to a number system, similar to the default
	<i>decimal</i> counter style.  The first <i>counter symbol</i> in the list is 
	interpreted as the digit 0, the second as the digit 1, and so on.  If there 
	are <var>length</var> <i>counter symbol</i>s, the representation is a base 
	<var>length</var> number using the <i>counter symbol</i>s as digits.

	<p>To construct the representation, run the following algorithm. Let
	<var>length</var> be the length of the list of <i>counter symbols</i>, 
	<var>value</var> initially be the counter value, <var>S</var>
	initially be the empty string, <var>negative</var> be a boolean flag
	that is initially false, and <var>symbol(n)</var> be the nth
	<i>counter symbol</i> in the list of <i>counter symbol</i>s (0-indexed).

	<ol>
		<li>If <var>value</var> is 0, append <var>symbol(0)</var> to 
		<var>S</var> and return <var>S</var>.

		<li>If <var>value</var> is negative, run the next step of this algorithm with <var>value</var> being the absolute value of <var>value</var> instead.

		<li>While <var>value</var> is not equal to 0:

			<ol>
				<li>Prepend <var>symbol( <var>value</var> mod <var>length</var> )</var> 
				to <var>S</var>.

				<li>Set <var>value</var> to <code>floor( <var>value</var> / <var>length</var> )</code>.
			</ol>
		

		<li>If <var>value</var> was originally negative, wrap <var>S</var> in the counter style's <i title='counter-negative'>negative sign</i>, as specified in the section for the <a href='#counter-style-negative'>negative descriptor</a>.

		<li>Return <var>S</var>.
	</ol>

	<div class=example>
		<p>A "trinary" counter style can be defined as:

		<pre>
@counter-style <dfn>trinary</dfn> {
	type: numeric;
	symbols: '0' '1' '2';
}
		</pre>

		<p>It will then produce lists that look like:

		<pre>
1.   One
2.   Two
10.  Three
11.  Four
12.  Five
20.  Six
		</pre>
	</div>


<h4>
alphabetic</h4>

	<p>If the type is <a href=#alphabetic>alphabetic</a>, the 'symbols' descriptor must contain
	at least two <i>counter symbol</i>s.  This type is defined only over
	strictly positive counter values.

	<p>The <i>alphabetic</i> counter type interprets the list of <i>counter symbols</i>
	as digits to an <em>alphabetic</em> numbering system, similar to the default
	''lower-alpha'' counter style. Alphabetic numbering systems are commonly used 
	for lists, and also appear in many spreadsheet programs to number columns. 
	The first <i>counter symbol</i> in the list is interpreted as the digit 1, 
	the second as the digit 2, and so on.  If there are <var>length</var> 
	<i>counter symbol</i>s, the representation is a base <var>length</var> alphabetic 
	number using the <i>counter symbol</i>s as digits.  Alphabetic numbering 
	systems do not contain a digit representing 0.

	<p>To construct the representation, run the following algorithm.  Let
	<var>length</var> be the length of the list of <i>counter symbol</i>s,
	<var>value</var> initially be the counter value, <var>S</var> initially
	be the empty string, and <var>symbol(n)</var> be the nth <i>counter symbol</i>
	in the list of <i>counter symbol</i>s (0-indexed).

	<p>While <var>value</var> is not equal to 0:

	<ol>
		<li>Set <var>value</var> to <code><var>value</var> - 1</code>.

		<li>Prepend <var>symbol( <var>value</var> mod <var>length</var> )</var>
		to <var>S</var>.

		<li>Set <var>value</var> to <code>floor( <var>value</var> / <var>length</var> )</code>.
	</ol>

	<p>Finally, return <var>S</var>.

	<div class=example>
		<p>A counter style using go stones can be defined as:

		<pre>
@counter-style <dfn>go</dfn> {
	type: alphabetic;
	symbols: url(white.svg) url(black.svg);
	suffix: '';
}
		</pre>

		<p>It will then produce lists that look like:

		<div class='alphabetic-example'>
<span><img src=white.svg alt=''></span> One<br>
<span><img src=black.svg alt=''></span> Two<br>
<span><img src=white.svg alt=''><img src=white.svg alt=''></span>  Three<br>
<span><img src=white.svg alt=''><img src=black.svg alt=''></span>  Four<br>
<span><img src=black.svg alt=''><img src=white.svg alt=''></span>  Five<br>
<span><img src=black.svg alt=''><img src=black.svg alt=''></span>  Six<br>
<span><img src=white.svg alt=''><img src=white.svg alt=''><img src=white.svg alt=''></span> Seven
		</div>

		<p class='note'>This example requires support for SVG images to display
		correctly.
	</div>

	<div class='example'>
		<p>Alphabetic styles may also be used to simulate a fixed-width numeric
		style:

		<pre>
@counter-style <dfn>fixed-decimal</dfn> {
	type: alphabetic;
	symbols: '0' '1' '2' '3' '4' '5' '6' '7' '8' '9';
}

ol { 
	list-style: fixed-decimal;
	counter-reset: list-item 1111; 
}
		</pre>

		<p>This will produce lists that look like:

		<pre>
0001.  One
0002.  Two
0003.  Three
0004.  Four
0005.  Five
0006.  Six
		</pre>

		<p>Two-digit numbers start at value 11, three-digit numbers start at 
		value 111, etc..

		<p class='issue'>Should I instead explicitly provide a fixed-width numeric
		counter type?  I'd like to see if this sort of numbering is used in the
		wild first.
	</div>


<h4>
symbolic</h4>

	<p>If the type is <a href=#symbolic>symbolic</a>, the 'symbols' descriptor must contain at
	least one <i>counter symbol</i>.  This type is defined only over strictly positive
	counter values.

	<p>The <i>symbolic</i> counter type cycles repeatedly through its provided symbols,
	doubling, tripling, etc. the symbols on each successive pass through the list.
	For example, if the original symbols were "*" and "†", then on the second pass
	they would instead be "**" and "††", while on the third they would be "***"
	and "†††", etc.
	It can be used for footnote-style markers, and is also sometimes used for
	alphabetic-style lists for a slightly different presentation than what the
	<i>alphabetic</i> type presents.

	<p>To construct the representation, run the following algorithm.  Let
	<var>length</var> be the length of the list of <i>counter symbol</i>s,
	<var>value</var> initially be the counter value, <var>S</var> initially
	be the empty string, and <var>symbol(n)</var> be the nth <i>counter symbol</i>
	in the list of <i>counter symbol</i>s (0-indexed).

	<ol>
		<li>Let the <var>chosen symbol</var> be <code class='inline'>symbol(<var>value</var> mod <var>length</var>)</code>.

		<li>Let the <var>representation length</var> be <code class='inline'>floor( (<var>value</var> - 1) / <var>length</var> )</code>.

		<li>Append the <var>chosen symbol</var> to <var>S</var> a number of times equal to the <var>representation length</var>.
	</ol>

	<p>Finally, return <var>S</var>.

	<div class=example>
		<p>An "footnote" counter style can be defined as:

		<pre>
@counter-style <dfn>footnote</dfn> {
	type: symbolic;
	symbols: '*' '⁑' '†' '‡';
	suffix: '';
}
		</pre>

		<p>It will then produce lists that look like:

		<pre>
*.   One
⁑.   Two
†.   Three
‡.   Four
**.  Five
⁑⁑.  Six
		</pre>
	</div>

	<div class=example>
		<p>Some style guides mandate a list numbering that looks similar to ''upper-alpha'', but repeats differently after the first 26 values, instead going "AA", "BB", "CC", etc.  This can be achieved with the symbolic type:

		<pre>
@counter-style <dfn>upper-alpha-legal</dfn> {
	type: symbolic;
	symbols: 'A' 'B' 'C' 'D' 'E' 'F' 'G' 'H' 'I' 'J' 'K' 'L' 'M' 
	        'N' 'O' 'P' 'Q' 'R' 'S' 'T' 'U' 'V' 'W' 'X' 'Y' 'Z';
}</pre>

		<p>This style is identical to ''upper-alpha'' through the first 27 values, but they diverge after that, with ''upper-alpha'' going "AB", "AC", "AD", etc.  Starting at the 53rd value, ''upper-alpha'' goes "BA", "BB", "BC", etc., while this style jumps up to the triple digits with "AAA", "BBB", "CCC", etc.
	</div>

	<p>The <i>symbolic</i> type will produce representations with sizes that are 
	linear in the magnitude of the counter value.  This can potentially be abused
	to generate excessively large representations and consume undue amounts of
	the user's memory or even hang their browser.  User agents must support
	representations at least 20 characters long, but they may choose to instead
	use the fallback style for representations that would be longer than 20
	characters.


<h4>
non-repeating</h4>

	<p>If the type is <a href=#non-repeating>non-repeating</a>, the 'symbols' descriptor must contain
	at least one <i>counter symbol</i>.  This type is defined over counter
	values in a finite range, starting with the <i>first symbol value</i>
	and having a length equal to the length of the list of <i>counter symbol</i>s.

	<p>The <i>non-repeating</i> counter type is for representing counter styles
	that only have a finite number of representations.  For example, Unicode
	defines several limited-length runs of special characters meant for 
	lists, such as circled digits.

	<p>When this type is specified, it may optionally have an integer provided
	after it, which sets the <dfn>first symbol value</dfn>.  If it is omitted,
	the <i>first symbol value</i> is 1.

	<p>The first <i>counter symbol</i> is the representation for the 
	<i>first symbol value</i>, and subsequent counter values are represented
	by subsequent <i>counter symbol</i>s.  Once the list of <i>counter symbol</i>s
	is exhausted, further values cannot be represented by this type, and must
	instead be represented by the fallback counter style.

	<div class=example>
		<p>A "box-corner" counter style can be defined as:

		<pre>
@counter-style <dfn>box-corner</dfn> {
	type: non-repeating;
	symbols: '◰' '◳' '◲' '◱';
	suffix: ':';
}
		</pre>

		<p>It will then produce lists that look like:

		<pre>
◰:  One
◳:  Two
◲:  Three
◱:  Four
5:  Five
6:  Six
		</pre>
	</div>


<h4>
additive</h4>

	<p>If the type is <a href=#additive>additive</a>, the 'additive-symbols' descriptor must
	contain at least one <i>additive tuple</i>.  This type is nominally
	defined over all counter values (see algorithm, below, for exact details)

	<p>The <i>additive</i> counter type takes as many of the largest symbols that 
	it can, then as many of the next largest symbol, etc. until the sum of all 
	the symbols equals the counter value.  It can be used to implement roman 
	numerals, and additionally is used to represent the numbering system of 
	several languages which use different characters for the digits in differnt
	positions.

	<p>To construct the representation, run this algorithm.  Let <var>value</var> 
	initially be the counter value, <var>S</var> initially be the empty string, 
	and <var>symbol list</var> initially be the list of <i>additive tuple</i>s.

	<ol>
		<li>If <var>value</var> is initially 0, and there is an <i>additive tuple</i> with a weight of 0, append that tuple's <i>counter symbol</i> to S and return S.

		<li>If <var>value</var> is negative, run the next step of this algorithm with <var>value</var> being the absolute value of <var>value</var> instead.

		<li>While <var>value</var> is greater than 0 and there are elements left in the <var>symbol list</var>:

			<ol>
				<li>Pop the first <i>additive tuple</i> from the <var>symbol list</var>.
				This is the <dfn title="current tuple|current tuple's">current tuple</dfn>.

				<li>Append the <i>current tuple</i>'s <i>counter symbol</i> to <var>S</var> 
				<code>floor( <var>value</var> / <var><i>current tuple's</i> weight</var> )</code>
				times (this may be 0).

				<li>Decrement <var>value</var> by the <var><i>current tuple's</i> weight multiplied
				by the number of times the <i>current tuple</i> was appended to <var>S</var>
				in the previous step.
			</ol>
		

		<li>If <var>value</var> was originally negative, wrap <var>S</var> in the counter style's <i title='counter-negative'>negative sign</i>, as specified in the section for the <a href='#counter-style-negative'>negative descriptor</a>.

		<li>If the loop ended because <var>value</var> is 0, return S.  Otherwise, the given counter value cannot be represented by this counter style, and must instead be represented by the fallback counter style.
	</ol>

	<div class=example>
		<p>A "dice" counter style can be defined as:

		<pre>
@counter-style <dfn>dice</dfn> {
	type: additive;
	additive-symbols: 6 '⚅', 5 '⚄', 4 '⚃', 3 '⚂', 2 '⚁', 1 '⚀';
	suffix: '';
}
		</pre>

		<p>It will then produce lists that look like:

		<pre>
⚀    One
⚁    Two
⚂    Three
...
⚅⚄   Eleven
⚅⚅   Twelve
⚅⚅⚀  Thirteen
		</pre>
	</div>

	<p>The <i>additive</i> type will produce representations with sizes that are 
	linear in the magnitude of the counter value.  This can potentially be abused
	to generate excessively large representations and consume undue amounts of
	the user's memory or even hang their browser.  User agents must support
	representations at least 20 characters long, but they may choose to instead
	use the fallback style for representations that would be longer than 20
	characters.


<h4>
override</h4>

	<p>The <a href=#override>override</a> type allows an author to use the <i>algorithm</i> of another counter style, but alter other aspects, such as the negative sign or the suffix.  If a counter style uses the <i>override</i> type, any unspecified descriptors must be taken from the specified counter style, rather than taking their initial values.

	<p>If a @counter-style uses the <i>override</i> type, it must not contain a
	'symbols' or 'additive-symbols' descriptor; otherwise it is invalid and must
	be ignored.  If the specified counter style name isn't the name of any
	currently-defined counter style, it must be treated as if it was overriding
	the <i>decimal</i> counter style.


<h3 id='counter-style-negative'>
Formatting negative values: the 'negative' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-negative">negative</dfn>
		<tr>
			<th>Value:
			<td>&lt;string> &lt;string>?
		<tr>
			<th>Initial:
			<td>"\2D" ("-" hyphen-minus)
	</table>

	<p>The 'negative' descriptor defines how to alter the representation when
	the counter value is negative.  Not all counter types can render negative
	numbers.

	<p>The first string in the value is prepended to the representation when the
	counter value is negative.  The second string, if specified, is appended
	to the representation when the counter value is negative.

	<div class='example'>
		<p>For example, specifying ''negative: "(" ")";'' will make negative
		values be wrapped in parentheses, which is sometimes used in financial
		contexts, like "(2) (1) 0 1 2 3...".
	</div>


<h3 id='counter-style-prefix'>
Symbols before the marker: the 'prefix' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-prefix">prefix</dfn>
		<tr>
			<th>Value:
			<td>&lt;string>
		<tr>
			<th>Initial:
			<td>"" (the empty string)
	</table>

	<p>The 'prefix' descripter specifies a string that is prepended to the 
	marker representation.  Prefixes are only added by the algorithm for constructing
	the default contents of the <code class=css>::marker</code> pseudo-element; the prefix is not 
	added automatically when the counter() or counters() functions are used.  
	Prefixes are added to the representation after negative signs.


<h3 id='counter-style-suffix'>
Symbols after the marker: the 'suffix' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-suffix">suffix</dfn>
		<tr>
			<th>Value:
			<td>&lt;string>
		<tr>
			<th>Initial:
			<td>"\2E" ("." full stop)
	</table>

	<p>The 'suffix' descripter specifies a string that is appended to the 
	marker representation.  Suffixes are only added by the algorithm for constructing
	the default contents of the <code class=css>::marker</code> pseudo-element; the suffix is not 
	added automatically when the counter() or counters() functions are used.  
	Suffixes are added to the representation after negative signs.


<h3 id='counter-style-range'>
Limiting the counter scope: the 'range' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-range">range</dfn>
		<tr>
			<th>Value:
			<td>[ [ &lt;integer> | infinite ]{2} ]# | auto
		<tr>
			<th>Initial:
			<td>auto
	</table>

	<p>The 'range' descriptor defines the ranges over which the counter style is defined.
	If a counter style is used to represent a counter value outside of its ranges,
	the counter style instead drops down to its fallback counter style.

	<p>If the value is not ''auto'', the first value of each range in the list represents the lower bound of the range (with ''infinite'' representing negative infinity), and the second value represents the upper bound of the range (with 'infinite' representing positive infinity).  This is an inclusive range - it includes both the lower and upper bound numbers.  The range of the counter style as a whole is the union of the individual ranges.  If the lower bound of any range is higher than the higher bound, the entire descriptor is invalid and must be ignored.

	<p>If the value is ''auto'', the range depends on the counter type.  For ''repeating'', ''numeric'', and ''non-repeating'' types, it must be treated identically to specifying ''infinite infinite''.  For ''alphabetic'' and ''symbolic'', it must be treated identically to ''1 infinite''.  For ''additive'', it must be treated identically to ''0 infinite''.  For ''override'', it must be treated according to the type of the counter style it is overriding.

	<p>Some counter style types have their own implicit ranges, specified above in the individual descriptions for each type.  The explicit range given by the ‘<code class="css">range</code>’ descriptor applies at the same time as the implicit range given by the ‘<code class="css">type</code>’ descriptor - if the counter value is outside either range, the fallback style must instead be used to generate the representation.

	<p class=issue>There's also an implicit range coming from implementation 
	limits.  Should we require UAs to support all values in a signed 2-byte int,
	or a signed 4-byte int?


<h3 id='counter-style-fallback'>
Defining fallback: the 'fallback' descriptor</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-fallback">fallback</dfn>
		<tr>
			<th>Value:
			<td>&lt;counter-style-name>
		<tr>
			<th>Initial:
			<td>decimal
	</table>

	<p>The 'fallback' descriptor specifies a fallback counter style to be used
	when the current counter style can't create a representation for a given
	counter value.  For example, if a counter style defined with a range of 1-10
	is asked to represent a counter value of 11, the counter value's representation
	is instead constructed with the fallback counter style (or possibly the 
	fallback style's fallback style, if the fallback style can't represent that
	value, etc.).

	<p>If the value of the 'fallback' descriptor isn't the name of any 
	currently-defined counter style, the used value of the 'fallback' descriptor
	is <i>decimal</i> instead.  Similarly, while following fallbacks to find
	a counter style that can render the given counter value, if a loop in the 
	specified fallbacks is detected, the <i>decimal</i> style must be used instead.

	<p class='note'>Note that it is not necessarily an error to specify fallback
	loops.  For example, if an author desires a counter style with significantly
	different representations for even and odd counter values, they may find it 
	easiest to define one style that can only represent odd values and one that 
	can only represent even values, and specify each as the fallback for the 
	other one.  Though the fallback graph is circular, at no point do you encounter 
	a loop while following these fallbacks - every counter value is represented 
	by one or the other counter style.  <span class='issue'>Is it useful to allow
	this case?  If it would be significantly easier for implementations to just
	detect and reject circular fallback graphs, that would probably be acceptable.</span>


<h3 id='counter-style-symbols'>
Marker characters: the 'symbols' and 'additive-symbols' descriptors</h3>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-symbols">symbols</dfn>
		<tr>
			<th>Value:
			<td>[ &lt;string> | &lt;image> | &lt;identifier> ]+
		<tr>
			<th>Initial:
			<td>N/A
	</table>

	<table class='descdef'>
		<tr>
			<th>Name:
			<td><dfn id="descdef-additive-symbols">additive-symbols</dfn>
		<tr>
			<th>Value:
			<td>[ &lt;integer> && [ &lt;string> | &lt;image> | &lt;identifier> ] ]#
		<tr>
			<th>Initial:
			<td>N/A
	</table>

	<p>The 'symbols' and 'additive-symbols' descriptors specify the characters
	used by the marker-construction algorithm specified by the 'type' descriptor.
	The 'symbols' descriptor must be specified if the counter type is <i>repeating</i>,
	<i>numeric</i>, <i>alphabetic</i>, <i>symbolic</i>, or <i>non-repeating</i>, and the 
	'additive-symbols' descriptor must be specified if the counter type is
	<i>additive</i>; otherwise, the @counter-style is invalid and must be ignored.

	<p>Some counter styles specify that the 'symbols' descriptor must have at
	least two entries.  If the counter's style is such a type, and the 'symbols'
	descriptor has only a single entry, the counter style is invalid and must
	be ignored.

	<p>Each entry in the 'symbols' descriptor's value defines a <dfn>counter symbol</dfn>,
	which is interpreted differently based on the counter style's type.  Each
	entry in the 'additive-symbols' descriptor's value defines an <dfn>additive tuple</dfn>,
	which consists of a <i>counter symbol</i> and a non-negative integer weight.  
	Each weight must be a non-negative integer, and the <i>additive tuple</i>s
	must be specified in order of descending weight; otherwise, the @counter-style
	is invalid and must be ignored.

	<p>Counter symbols may be strings, images, or identifiers, and the three types can be mixed in a single descriptor.  Counter representations are constructed by concatenating counter symbols together.  Identifiers are rendered as strings containing the same characters.  Images are rendered as inline replaced elements.  The <a href="http://dev.w3.org/csswg/css3-images/#default-object-size">default object size</a> of an image counter symbol is a 1em by 1em square.


<!-- ====================================================================== -->

<h2 id='symbols-function'>
Defining Anonymous Counter Styles: the ''symbols()'' function</h2>

	<p>The previous chapter specified a way to define custom counter styles.  However, counter styles are sometimes used only once in a stylesheet, and defining a full ''@counter-style'' rule can be overkill for this case (not to mention the possibility of unintentional name collisions).  To address this case, the ''symbols()'' function provides a simple way to define an anonymous counter style as an inline value.  It does not provide the full feature-set of the ''@counter-style'' rule, but provides a sufficient subset to still be useful.  The syntax of the ''symbols()'' rule is:

	<pre><dfn id='type-symbols-function'>&lt;symbols-function></dfn> = symbols( &lt;type>? [ &lt;string> | &lt;image> ]+ )</pre>

	<p>Where &lt;type> is one of the following keywords: ''repeating'', ''numeric'', ''alphabetic'', ''symbolic'', or ''non-repeating''.

	<p>The ''symbols()'' function defines an anonymous counter style with no <i title="counter-name">name</i>, a <i title="counter-prefix">prefix</i> and <i title="counter-suffix">suffix</i> of ''""'' (the empty string), a <i title="counter-range">range</i> from negative infinity to positive infinity, an <i title="counter-fallback">fallback style</i> of ''decimal'', and a <i title="counter-negative">negative sign</i> of "\2D" ("-" hyphen-minus).  The counter style's <i title="counter-algorithm">algorithm</i> is constructed by consulting the previous chapter using the provided type - or ''symbolic'' if the type was omitted - and the provided &lt;string>s and &lt;image>s as the value of the 'symbols' property.  If the type is ''non-repeating'', the <i>first symbol value</i> is ''1''.

	<div class='example'>
		<p>This code:
		
		<pre>ol { list-style: symbols("*" "\2020" "\2021" "\A7"); }</pre>

		<p>will produce lists that look like:
		
		<pre>
*   One
†   Two
‡   Three
§   Four
**  Five
††  Six
‡‡  Seven</pre>

		<p>On the other hand, specifying the type of counter, like so:
		
		<pre>ol { list-style: symbols(repeating "*" "\2020" "\2021" "\A7"); }</pre>

		<p>will produce lists that look like:
		
		<pre>
*   One
†   Two
‡   Three
§   Four
*   Five
†   Six
‡   Seven</pre>
	</div>

	<p class='note'>Note that the ''symbols()'' function only allows strings and images, while the 'symbols' descriptor of a ''@counter-style'' rule also allows identifiers.

<h2 id='predefined-counters'>
Predefined Counter Styles</h2>

	<p>The following stylesheet redefines all of the counter styles defined in CSS 2.1 using the ''@counter-style'' rule.  This stylesheet is normative - UAs must include it in their UA stylesheet.

	<p>In addition to the 2.1 counter styles, a large number of additional counter styles are defined in the <a href="//dev.w3.org/csswg/css-counter-styles">Additional Predefined Counter Styles for CSS</a> document.  The majority of the additional counter styles are additional alphabetic or numeric styles for various world languages.  <span class='note'>The normative status of that document is currently undecided, but at minimum it provides a large resource of counter styles which can be copied into an author's stylesheet.</span>

	<pre style="white-space: pre-wrap;"><bdo>
@counter-style <dfn>decimal-leading-zero</dfn> {
	type: non-repeating -9;
	symbols: '-09' '-08' '-07' '-06' '-05' '-04' '-03' '-02' '-01' '00' '01' '02' '03' '04' '05' '06' '07' '08' '09';
}

@counter-style <dfn>lower-roman</dfn> {
	type: additive;
	range: 1 4999;
	additive-symbols: 1000 m, 900 cm, 500 d, 400 cd, 100 c, 90 xc, 50 l, 40 xl, 10 x, 9 ix, 5 v, 4 iv, 1 i;
}

@counter-style <dfn>upper-roman</dfn> {
	type: additive;
	range: 1 4999;
	additive-symbols: 1000 M, 900 CM, 500 D, 400 CD, 100 C, 90 XC, 50 L, 40 XL, 10 X, 9 IX, 5 V, 4 IV, 1 I;
}

@counter-style <dfn>georgian</dfn> {
	type: additive;
	range: 1 19999;
	additive-symbols: 10000 '\10F5', 9000 '\10F0', 8000 '\10EF', 7000 '\10F4', 6000 '\10EE', 5000 '\10ED', 4000 '\10EC', 3000 '\10EB', 2000 '\10EA', 1000 '\10E9', 900 '\10E8', 800 '\10E7', 700 '\10E6', 600 '\10E5', 500 '\10E4', 400 '\10F3', 300 '\10E2', 200 '\10E1', 100 '\10E0', 90 '\10DF', 80 '\10DE', 70 '\10DD', 60 '\10F2', 50 '\10DC', 40 '\10DB', 30 '\10DA', 20 '\10D9', 10 '\10D8', 9 '\10D7', 8 '\10F1', 7 '\10D6', 6 '\10D5', 5 '\10D4', 4 '\10D3', 3 '\10D2', 2 '\10D1', 1 '\10D0';
	/* 10000 'ჵ', 9000 'ჰ', 8000 'ჯ', 7000 'ჴ', 6000 'ხ', 5000 'ჭ', 4000 'წ', 3000 'ძ', 2000 'ც', 1000 'ჩ', 900 'შ', 800 'ყ', 700 'ღ', 600 'ქ', 500 'ფ', 400 'ჳ', 300 'ტ', 200 'ს', 100 'რ', 90 'ჟ', 80 'პ', 70 'ო', 60 'ჲ', 50 'ნ', 40 'მ', 30 'ლ', 20 'კ', 10 'ი', 9 'თ', 8 'ჱ', 7 'ზ', 6 'ვ', 5 'ე', 4 'დ', 3 'გ', 2 'ბ', 1 'ა' */
}

@counter-style <dfn>armenian</dfn> {
	type: additive;
	range: 1 9999;
	additive-symbols: 9000 '\554', 8000 '\553', 7000 '\552', 6000 '\551', 5000 '\550', 4000 '\54F', 3000 '\54E', 2000 '\54D', 1000 '\54C', 900 '\54B', 800 '\54A', 700 '\549', 600 '\548', 500 '\547', 400 '\546', 300 '\545', 200 '\544', 100 '\543', 90 '\542', 80 '\541', 70 '\540', 60 '\53F', 50 '\53E', 40 '\53D', 30 '\53C', 20 '\53B', 10 '\53A', 9 '\539', 8 '\538', 7 '\537', 6 '\536', 5 '\535', 4 '\534', 3 '\533', 2 '\532', 1 '\531';
	/* 9000 'Ք', 8000 'Փ', 7000 'Ւ', 6000 'Ց', 5000 'Ր', 4000 'Տ', 3000 'Վ', 2000 'Ս', 1000 'Ռ', 900 'Ջ', 800 'Պ', 700 'Չ', 600 'Ո', 500 'Շ', 400 'Ն', 300 'Յ', 200 'Մ', 100 'Ճ', 90 'Ղ', 80 'Ձ', 70 'Հ', 60 'Կ', 50 'Ծ', 40 'Խ', 30 'Լ', 20 'Ի', 10 'Ժ', 9 'Թ', 8 'Ը', 7 'Է', 6 'Զ', 5 'Ե', 4 'Դ', 3 'Գ', 2 'Բ', 1 'Ա' */
}

@counter-style <dfn>lower-alpha</dfn> {
	type: alphabetic;
	symbols: a b c d e f g h i j k l m n o p q r s t u v w x y z;
}

@counter-style <dfn>lower-latin</dfn> {
	type: override lower-alpha;
}

@counter-style <dfn>upper-alpha</dfn> {
	type: alphabetic;
	symbols: A B C D E F G H I J K L M N O P Q R S T U V W X Y Z;
}

@counter-style <dfn>upper-latin</dfn> {
	type: override upper-alpha;
}

@counter-style <dfn>lower-greek</dfn> {
	type: alphabetic;
	symbols: '\3B1' '\3B2' '\3B3' '\3B4' '\3B5' '\3B6' '\3B7' '\3B8' '\3B9' '\3BA' '\3BB' '\3BC' '\3BD' '\3BE' '\3BF' '\3C0' '\3C1' '\3C3' '\3C4' '\3C5' '\3C6' '\3C7' '\3C8' '\3C9';
	/* 'α' 'β' 'γ' 'δ' 'ε' 'ζ' 'η' 'θ' 'ι' 'κ' 'λ' 'μ' 'ν' 'ξ' 'ο' 'π' 'ρ' 'σ' 'τ' 'υ' 'φ' 'χ' 'ψ' 'ω' */
}</bdo></pre>

	<p>In addition to the above styles, UAs must define three counter styles named ''disc'', ''circle'', and ''square''.  They must do so either by including the following stylesheet in their UA stylesheet, or by rendering the bullets with a browser-generated image matching the descriptions below the stylesheet.

	<p>If a browser chooses to render these counter styles by generating images, the images must be sized to attractively fill a 1em by 1em rectangle.  As well, the styles must still be overrideable by a later ''@counter-style'' rule defining a counter style of the same name, as if they were defined by a ''@counter-style'' rule in the UA stylesheet.

	<pre>
@counter-style <dfn>disc</dfn> {
	type: repeating;
	symbols: '\2022';
	/* '•' */
	suffix: '';
}

@counter-style <dfn>circle</dfn> {
	type: repeating;
	symbols: '\25E6';
	/* '◦' */
	suffix: '';
}

@counter-style <dfn>square</dfn> {
	type: repeating;
	symbols: '\25FE';
	/* '◾' */
	suffix: '';
}</pre>

	<dl>
		<dt>disc
		<dd>A filled circle, similar to • U+2022 BULLET.

		<dt>circle
		<dd>A hollow circle, similar to ◦ U+25E6 WHITE BULLET.

		<dt>square
		<dd>A filled square, similar to ◾ U+25FE BLACK MEDIUM SMALL SQUARE.
	</dl>

	<p>Finally, UAs must define a 'decimal' style with behavior matching the following stylesheet fragment, as if it were defined by a ''@counter-style'' rule in the UA stylesheet.  <span class='note'>This style is defined specially because naming a counter style ''decimal'' is a syntax error, so it can't actually be defined just by including it in the UA stylesheet.  This restriction exists so that ''decimal'' is always present as a valid fallback type, regardless of what an author or user defines in their own stylesheets.</span>

	<pre>
@counter-style <dfn>decimal</dfn> {
	type: numeric;
	symbols: '0' '1' '2' '3' '4' '5' '6' '7' '8' '9';
}</pre>

	<p class='issue'>Do we need to predefine the styles that are present in CSS2 but didn't make it to CSS2.1?  They're all present in the "Additional Predefined Counter Styles" document.


<h2 id="apis">APIs</h2>

<h3 id='extentions-to-cssrule-interface'>
Extensions to the <code>CSSRule</code> interface</h3>

	<p>
		The <code>CSSRule</code> interface is extended as follows:

	<pre class='idl'><!--
	-->partial interface CSSRule {&#xa;<!--
	-->    const unsigned short COUNTER_STYLE_RULE = 11;&#xa;<!--
	-->}</pre>


<h3 id="the-csscounterstylerule-interface">
The <code>CSSCounterStyleRule</code> interface</h3>

	<p>
		The <dfn>CSSCounterStyleRule</dfn> interface represents a ''@counter-style'' rule.

	<pre class='idl'><!--
	-->interface CSSCounterStyleRule : CSSRule {&#xa;<!--
	-->  readonly attribute CSSStyleDeclaration style;&#xa;<!--
	-->}</pre>

	<dl class='idl-attributes'>
		<dt><code>style</code> of type <code>CSSStyleDeclaration</code>, readonly
		<dd>
			The <code>style</style> attribute must return a <code>CSSStyleDeclaration</code> block that contains the descriptors specified within the <code>@counter-style</code> rule.
	</dl>


<h2 id='ua-stylesheet'>
Sample style sheet for HTML</h2>

	<p>This section is informative, not normative.  HTML itself defines the
	actual default properties that apply to HTML lists.

	<pre>
/* Set up list items */
li { 
	display: list-item; 
	/* counter-increment: list-item; (implied by display: list-item) */ 
}

/* Set up ol and ul so that they reset the list-item counter */
ol, ul { 
	counter-reset: list-item; 
}

/* Default list style types for ordered lists */
ol { 
	list-style-type: decimal; 
}

/* Default list style types for unordered lists up to 3 deep */
ul { list-style-type: disc; }
ul ul { list-style-type: square; }
ul ul ul { list-style-type: circle; }
/* Alternately, if Values & Units Level 3 is supported, replace
   the above three lines with: */
ul { list-style-type: disc; }
ul ul { list-style-type: cycle(disc, square, circle); }

/* The type attribute on ol and ul elements */
ul[type="disc"] { list-style-type: disc; }
ul[type="circle"] { list-style-type: circle; }
ul[type="square"] { list-style-type: square; }
ol[type="1"] { list-style-type: decimal; }
ol[type="a"] { list-style-type: lower-alpha; }
ol[type="A"] { list-style-type: upper-alpha; }
ol[type="i"] { list-style-type: lower-roman; }
ol[type="I"] { list-style-type: upper-roman; }

/* The start attribute on ol elements */
ol[start] { 
	counter-reset: list-item attr(start integer, 1); 
	counter-increment: list-item -1; 
}

/* The value attribute on li elements */
li[value] { 
	counter-set: list-item attr(value integer, 1); 
	counter-increment: none; /* Turn off default increase */
}

/* Box Model Rules */
ol, ul { 
	display: block; 
	margin: 1em 0; 
	padding-left: 40px;
	marker-attachment: list-container;
}
 
ol ol, ol ul, ul ul, ul ol { 
	margin-top: 0; 
	margin-bottom: 0; 
}

li {
	text-align: match-parent;
}
 
li::marker { 
	display: inline;
	margin-right: 1em;
	text-align: end;
	unicode-bidi: isolate;
	/* 'position' computes to "static" or "marker" depending on list-style-position */
}
	</pre>

<!-- ====================================================================== -->

<h2 class="no-num" id="profiles">
Profiles</h2>

	<p>This module has two profiles: CSS Level 1 and Full. There is no
	CSS2 profile because this module is incompatible with the CSS2 list
	model.

	<p>The CSS Level 1 module consists of 'list-style', 'list-style-position', 
	'list-style-image', and 'list-style-type' (but only the following
	values: 'disc', 'circle, square', 'decimal', 'lower-roman',
	'upper-roman', 'lower-alpha', 'upper-alpha', 'none'). It does not
	include the <code class=css>::marker</code> pseudo element.

	<p>The Full profile contains everything.

<!-- ====================================================================== -->

<h2 class="no-num" id="acknowledgments">
Acknowledgments</h2>

	<p>The following people and documentation they wrote were very useful
	for defining the numbering systems: <!-- alphabetical by full name -->
	Alexander Savenkov,
	Arron Eicholz,
	Aryeh Gregor,
	Frank Tang,
	Jonathan Rosenne,
	Karl Ove Hufthammer,
	Musheg Arakelyan,
	Nariné Renard Karapetyan,
	Randall Bart,
	Richard Ishida,
	Simon Montagu (Mozilla, smontagu@smontagu.org)
	

	 <!-- see http://www.damowmow.com/temp/csswg/lists/part2.html 
		       http://www.qsm.co.il/Hebrew/Gimatria.htm
		       http://people.netscape.com/smontagu/writings/HebrewNumbers.html
		       http://www.ethiopic.org/Collation/OrderedLists.html
		       http://bugzilla.mozilla.org/show_bug.cgi?id=102252 -->

<!-- ====================================================================== -->

<h2 class="no-num" id="changes">
Changes From CSS2.1</h2>

	<p>As described in the introduction section, there are significant changes in this module when
	compared to CSS2.1.

	<ol>
		<li>The <code class=css>::marker</code> pseudo-element has been introduced to allow styling of the list marker directly.

		<li>The ''marker'' value for 'position' has been added, to allow elements in the document to position themselves similarly to how markers do.

		<li>Many new list style types have been added, along with explicit algorithms for each.

		<li>The list-item predefined counter identifier has been introduced.
	</ol>

<!-- ====================================================================== -->

<h2 class="no-num" id="references">References</h2>

<h3 class="no-num">Normative references</h3>
<!--normative-->

<h3 class="no-num">Other references</h3>
<!--informative-->

<h2 class="no-num">Property index</h2>
<!-- properties -->

<h2 class="no-num">Index</h2>
<!--index-->

</body>
</html>
