<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head profile="http://www.w3.org/2006/03/hcard"><meta
  content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Fragmentation Controls Module Level 3</title>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
  type="text/css">

 <body>
  <div class=head> <!--begin-logo-->
   <p id=x><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1 id=css-fragmentation-module>CSS Fragmentation Controls Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 25 January
    2012</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2012/ED-css3-break-20120125/">http://www.w3.org/csswg/css3-break/</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-break/">http://www.w3.org/csswg/css3-break/</a>

    <dt>Editor's Draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-break/">http://dev.w3.org/csswg/css3-break/</a>

    <dt>Previous version:

    <dd>None

    <dt>Editors:

    <dd class=vcard><span class=fn>Rossen Atanassov</span>, <span
     class=org><a class="fn org url"
     href="http://www.microsoft.com/">Microsoft Corporation</a></span>, <span
     class=email>ratan@microsoft.com</span>

    <dd class=vcard><span class=fn><a class=fn
     href="http://fantasai.inkedblade.net/contact">Elika J.
     Etemad</a></span>, <span class=org><a class="fn org url"
     href="http://www.mozilla.com/">Mozilla Corporation</a></span>

    <dt>Issues List:

    <dd><a
     href="http://wiki.csswg.org/spec/css3-break">http://wiki.csswg.org/spec/css3-break</a>

    <dt>Discussion:

    <dd><a
     href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a>
     with subject line "<code>[css3-break] …message topic…</code>"
   </dl>
   <!--begin-copyright-->
   <p class=copyright id=copyright-copy-year-2000-w3creg-mit-erci><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2012 <a
    href="http://www.w3.org/"><acronym
    title="World Wide Web Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym
    title="Massachusetts Institute of Technology">MIT</acronym></a>, <a
    href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract> Abstract</h2>

  <p id=this-module-describes-the-fragmentation-> This module describes the
   fragmentation model that partitions a flow into pages. It builds on the
   Page model module and introduces and defines the fragmentation model. It
   adds functionality for pagination, breaking variable fragment size and
   orientation, widows and orphans.

  <h2 class="no-num no-toc" id=status> Status of this document</h2>
  <!--begin-status-->

  <p id=this-is-a-public-copy-of-the-editors-dra>This is a public copy of the
   editors' draft. It is provided for discussion only and may change at any
   moment. Its publication here does not imply endorsement of its contents by
   W3C. Don't cite this document other than as work in progress.

  <p id=the-archived-public-mailing-list-www-sty>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-break%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-break&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-break<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p id=this-document-was-produced-by-the-css-wo>This document was produced
   by the <a href="/Style/CSS/members">CSS Working Group</a> (part of the <a
   href="/Style/">Style Activity</a>).

  <p id=this-document-was-produced-by-a-group-op>This document was produced
   by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->
  <!--<p>The following features are at risk: &hellip;</p>-->

  <h2 class="no-num no-toc" id=contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li id=introduction-1.1.-module-interactions-1.><a href="#intro"><span
    class=secno>1. </span> Introduction</a>
    <ul class=toc>
     <li id=module-interactions-><a href="#placement"><span class=secno>1.1.
      </span> Module Interactions</a>

     <li id=values-><a href="#values"><span class=secno>1.2. </span>
      Values</a>
    </ul>

   <li id=fragmentation-model-and-terminology-><a
    href="#fragmentation-model"><span class=secno>2. </span> Fragmentation
    Model and Terminology</a>

   <li id=breaking-controls-3.1.-breaking-before-a><a
    href="#breaking-controls"><span class=secno>3. </span> Breaking
    Controls</a>
    <ul class=toc>
     <li id=breaking-before-after-or-inside-elements><a
      href="#explicit-break-properties"><span class=secno>3.1. </span>
      Breaking before, after or inside elements: the &lsquo;<code
      class=property>break-before</code>&rsquo;, &lsquo;<code
      class=property>break-after</code>&rsquo;, &lsquo;<code
      class=property>break-inside</code>&rsquo; properties.</a>

     <li id=breaks-inside-elements-orphans-widows-><a
      href="#breaks-inside"><span class=secno>3.2. </span> Breaks inside
      elements: &lsquo;<code class=property>orphans</code>&rsquo;,
      &lsquo;<code class=property>widows</code>&rsquo;</a>
    </ul>

   <li id=rules-for-breaking-4.1.-allowed-page-bre><a
    href="#breaking-rules"><span class=secno>4. </span> Rules for
    Breaking</a>
    <ul class=toc>
     <li id=allowed-page-breaks-><a href="#allowed-pg-brk"><span
      class=secno>4.1. </span> Allowed page breaks</a>

     <li id=forced-page-breaks-><a href="#forced-pg-brk"><span
      class=secno>4.2. </span> Forced page breaks</a>

     <li id=best-page-breaks-><a href="#best-pg-brk"><span class=secno>4.3.
      </span> "Best" page breaks</a>
    </ul>

   <li id=conformance-5.1.-document-conventions-5.><a
    href="#conformance"><span class=secno>5. </span> Conformance</a>
    <ul class=toc>
     <li id=document-conventions-><a href="#conventions"><span
      class=secno>5.1. </span> Document Conventions</a>

     <li id=conformance-classes-><a href="#conformance-classes"><span
      class=secno>5.2. </span>Conformance Classes</a>

     <li id=partial-implementations-><a href="#partial"><span
      class=secno>5.3. </span> Partial Implementations</a>

     <li id=experimental-implementations-><a href="#experimental"><span
      class=secno>5.4. </span> Experimental Implementations</a>

     <li id=non-experimental-implementations-><a href="#testing"><span
      class=secno>5.5. </span> Non-Experimental Implementations</a>

     <li id=cr-exit-criteria-><a href="#cr-exit-criteria"><span
      class=secno>5.6. </span> CR Exit Criteria</a>
    </ul>

   <li class=no-num id=acknowledgments-><a href="#acknowledgments">
    Acknowledgments</a>

   <li class=no-num id=references-normative-references-other-re><a
    href="#references">References</a>
    <ul class=toc>
     <li class=no-num id=normative-references-><a
      href="#normative-references">Normative references</a>

     <li class=no-num id=other-references-><a href="#other-references">Other
      references</a>
    </ul>

   <li class=no-num id=index-><a href="#index">Index</a>

   <li class=no-num id=property-index0><a href="#property-index">Property
    index</a>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p id=this-section-is-not-normative.><em>This section is not
   normative.</em>

  <p id=in-paged-media-e.g.-paper-transparencies> In paged media (e.g.,
   paper, transparencies, photo album pages, pages displayed on computer
   screens as printed output simulations), as opposed to <a
   href="/TR/CSS2/media.html#continuous-media-group"> continuous media</a>,
   the content of the document is split into one or more discrete display
   surfaces. In order to avoid awkward breaks (such as halfway through a line
   of text), the layout engine must be able to shift around content that
   would fall across the page break. This process is called <dfn
   id=pagination>pagination</dfn>.

  <p id=in-css-in-addition-to-paged-media-certai> In CSS, in addition to
   paged media, certain layout features such as <a
   href="http://www.w3.org/TR/css3-regions/">regions</a> <a
   href="#CSS3-REGIONS"
   rel=biblioentry>[CSS3-REGIONS]<!--{{CSS3-REGIONS}}--></a> and <a
   href="http://www.w3.org/TR/css3-multicol/">multi-column layout</a> <a
   href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{CSS3COL}}--></a> create a
   similarly fragmented environment. The generic term for breaking content
   across containers is <dfn id=fragmentation>fragmentation</dfn>. This
   module explains how content breaks across <i>fragmentation containers</i>
   such as pages and columns and how such breaks can be <a
   href="#breaking-controls">controlled by the author</a>.

  <h3 id=placement><span class=secno>1.1. </span> Module Interactions</h3>

  <p id=this-module-replaces-and-extends-the-pag> This module replaces and
   extends the pagination controls defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{CSS21}}--></a> <a
   href="http://www.w3.org/TR/CSS21/page.html#page-breaks">section 13.3</a>
   and in <a href="#CSS3PAGE"
   rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a>.</p>
  <!-- End section "Modules Interactions" -->

  <h3 id=values><span class=secno>1.2. </span> Values</h3>

  <p id=this-specification-follows-the-css-prope> This specification follows
   the <a href="http://www.w3.org/TR/CSS21/about.html#property-defs"> CSS
   property definition conventions</a> from <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Value types not defined in
   this specification are defined in CSS Level 2 Revision 1 <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Other CSS modules may expand
   the definitions of these value types: for example <a href="#CSS3COLOR"
   rel=biblioentry>[CSS3COLOR]<!--{{CSS3COLOR}}--></a>, when combined with
   this module, expands the definition of the &lt;color&gt; value type as
   used in this specification.

  <p id=in-addition-to-the-property-specific-val> In addition to the
   property-specific values listed in their definitions, all properties
   defined in this specification also accept the <a
   href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">
   inherit</a> keyword as their property value. For readability it has not
   been repeated explicitly.

  <h2 id=fragmentation-model><span class=secno>2. </span> Fragmentation Model
   and Terminology</h2>

  <dl>
   <dt><dfn id=fragmented-flow>fragmented flow</dfn>

   <dd> A content flow that is being laid out in a <a
    href="#fragmentation-context"><i>fragmentation context</i></a>, such as a
    <a href="http://www.w3.org/TR/css3-multicol/">multi-column element</a>, a
    chain of <a href="http://www.w3.org/TR/css3-regions">CSS regions</a>, or
    a <a href="http://www.w3.org/TR/css3-page/">paged media display</a>.

   <dt><dfn id=fragmenter>fragmenter</dfn>

   <dd> A box&mdash;such as a page box, column box, or region&mdash;that
    contains a portion (or all) of a <a href="#fragmented-flow"><i>fragmented
    flow</i></a>. Fragmenters can be pre-defined, or generated as needed.
    When breakable content overflows a fragmenter in the block dimension,
    instead of overflowing it breaks into the next container in its <a
    href="#fragmentation-context"><i>fragmentation context</i></a>.

   <dt><dfn id=fragmentation-context>fragmentation context</dfn>

   <dd> An ordered series of <i>fragmenters</i>. A given fragmentation
    context can only have one block flow direction across all its
    fragmenters.

   <dt><dfn id=fragmentation0>fragmentation</dfn>

   <dd> The process of splitting a content flow across the <i>fragmenters</i>
    that form a <a href="#fragmentation-context"><i>fragmentation
    context</i></a>.

   <dt><dfn id=box-fragment>box fragment</dfn> or <dfn
    id=fragment>fragment</dfn>

   <dd> The portion of a box that belongs to exactly one <a
    href="#fragmenter"><i>fragmenter</i></a>. A box in continuous flow always
    consists of only one fragment. A box in a fragmented flow consists of one
    or more fragments.
  </dl>

  <p id=each-fragmentation-break-hereafter-break> Each <dfn
   id=fragmentation-break>fragmentation break</dfn> (hereafter, <dfn
   id=break>break</dfn>) ends layout in the current <a
   href="#fragmenter"><i>fragmenter</i></a> and causes the remaining content
   of the fragmented flow to be laid out in the next <i>fragmentation
   container</i>.

  <p class=note id=breaking-inline-content-into-lines-is-an> Breaking inline
   content into lines is another form of fragmentation, and similarly creates
   box fragments when it breaks <a
   href="http://www.w3.org/TR/CSS21/visuren.html#inline-boxes">inline
   boxes</a>. However, inline breaking is not covered here; see <a
   href="#CSS3TEXT" rel=biblioentry>[CSS3TEXT]<!--{{CSS3TEXT}}--></a> and the
   &lsquo;<code class=property>box-decoration-break</code>&rsquo; property in
   [[CSS3BACKGROUND]].

  <h2 id=breaking-controls><span class=secno>3. </span> Breaking Controls</h2>

  <p id=the-following-sections-explain-how-break> The following sections
   explain how breaks are controlled in a fragmented flow. Five properties
   indicate where the user agent may or should break the content flow. In the
   case of pagination, the author can also specify on which page (<a
   href="http://www.w3.org/TR/css3-page/#left-right-first">left or right</a>)
   the subsequent content should resume.

  <h3 id=explicit-break-properties><span class=secno>3.1. </span> Breaking
   before, after or inside elements: the &lsquo;<a href="#break-before"><code
   class=property>break-before</code></a>&rsquo;, &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo;,
   &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo; properties.</h3>

  <table class=propdef summary="property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-before>break-before</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | left | right | page | column | region | avoid |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements, table row groups, table rows (but see prose)

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-after>break-after</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | always | left | right | page | column | region | avoid |
      avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements, table row groups, table rows (but see prose)

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <table class=propdef summary="property definition">
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=break-inside>break-inside</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | avoid | avoid-page | avoid-column | avoid-region

    <tr>
     <td><em>Initial:</em>

     <td>auto

    <tr>
     <td><em>Applies to:</em>

     <td>block-level elements, block containers, table row groups, table rows
      (but see prose)

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>paged

    <tr>
     <td><em>Computed&nbsp;value:</em>

     <td>specified value
  </table>

  <p id=these-properties-describe-pagecolumnregi> These properties describe
   page/column/region break behavior before/after/inside the generated box.
   These values have the following meaning:

  <dl>
   <dt> auto

   <dd> Neither force nor forbid a break before/after/inside the principle
    box.

   <dt> always

   <dd> Always force a break before/after the principle box.

   <dt> avoid

   <dd> Avoid a break before/after/inside the principle box.

   <dt> left

   <dd> Force one or two page breaks before/after the principle box so that
    the next page is formatted as a left page.

   <dt> right

   <dd> Force one or two page breaks before/after the principle box so that
    the next page is formatted as a right page.

   <dt> page

   <dd> Always force a page break before/after the principle box.

   <dt> column

   <dd> Always force a column break before/after the principle box.

   <dt> region

   <dd> Always force a region break before/after the principle box.

   <dt> avoid-page

   <dd> Avoid a page break before/after/inside the principle box.

   <dt> avoid-column

   <dd> Avoid a column break before/after/inside the principle box.

   <dt> avoid-region

   <dd> Avoid a region break before/after/inside the principle box.
  </dl>

  <p id=a-potential-pagecolumnregion-break-locat> A potential
   page/column/region break location is typically under the influence of the
   parent element's &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo; property, the &lsquo;<a
   href="#break-after"><code class=property>break-after</code></a>&rsquo;
   property of the preceding element, and the &lsquo;<a
   href="#break-before"><code class=property>break-before</code></a>&rsquo;
   property of the following element. When these properties have values other
   than &lsquo;<code class=css>auto</code>&rsquo;, the forced break values
   (&lsquo;<code class=css>always</code>&rsquo;, &lsquo;<code
   class=css>left</code>&rsquo;, &lsquo;<code class=css>right</code>&rsquo;,
   &lsquo;<code class=css>page</code>&rsquo;, &lsquo;<code
   class=css>column</code>&rsquo; and &lsquo;<code
   class=css>region</code>&rsquo;) take precedence over the values
   (&lsquo;<code class=css>avoid-page</code>&rsquo;, &lsquo;<code
   class=css>avoid-column</code>&rsquo; and &lsquo;<code
   class=css>avoid-region</code>&rsquo;). See the section on <a
   href="#breaking-rules">rules for breaking</a> for the exact rules on how
   these properties affect forced breaks.

  <p id=user-agents-must-apply-these-properties-> User Agents must apply
   these properties to block-level boxes and to table rows, table row groups,
   and&#8212;in the case of &lsquo;<a href="#break-inside"><code
   class=property>break-inside</code></a>&rsquo;&#8212;block containers in
   the normal flow of the root element. User agents should also apply these
   properties to floated boxes whose containing block is in the normal flow
   of the root element. User agents may also apply these properties to other
   boxes.

  <h3 id=breaks-inside><span class=secno>3.2. </span> Breaks inside elements:
   &lsquo;<a href="#orphans"><code class=property>orphans</code></a>&rsquo;,
   &lsquo;<a href="#widows"><code class=property>widows</code></a>&rsquo;</h3>

  <table class=propdef summary="property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=orphans>orphans</dfn>

    <tr>
     <th>Value:

     <td>&lt;integer&gt;

    <tr>
     <th>Initial:

     <td>2

    <tr>
     <th>Applies to:

     <td>block containers

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value
  </table>

  <table class=propdef summary="property definition">
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=widows>widows</dfn>

    <tr>
     <th>Value:

     <td>&lt;integer&gt;

    <tr>
     <th>Initial:

     <td>2

    <tr>
     <th>Applies to:

     <td>block containers

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value
  </table>

  <p id=the-orphans-property-specifies-the-minim> The &lsquo;<a
   href="#orphans"><code class=property>orphans</code></a>&rsquo; property
   specifies the minimum number of line boxes in a block container that must
   be left at the end of a <a href="#fragment"><i>fragment</i></a>, unless
   this is the last <a href="#fragment"><i>fragment</i></a> of the box. The
   &lsquo;<a href="#widows"><code class=property>widows</code></a>&rsquo;
   property specifies the minimum number of line boxes of a block container
   that must be left at the start of a <a
   href="#fragment"><i>fragment</i></a>, unless this is the last <a
   href="#fragment"><i>fragment</i></a> of the box. Examples of how they are
   used to control <a href="#fragmenter"><i>fragmenter</i></a> breaks are
   given below.

  <p id=only-positive-integers-are-allowed-as-va> Only positive integers are
   allowed as values of &lsquo;<a href="#orphans"><code
   class=property>orphans</code></a>&rsquo; and &lsquo;<a
   href="#widows"><code class=property>widows</code></a>&rsquo;. Negative
   values and zero are invalid must cause the declaration to be <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignored</a>.

  <p id=if-a-block-contains-fewer-lines-than-the> If a block contains fewer
   lines than the value of &lsquo;<a href="#widows"><code
   class=property>widows</code></a>&rsquo; or &lsquo;<a href="#orphans"><code
   class=property>orphans</code></a>&rsquo;, the rule simply becomes that all
   lines in the block must be kept together.

  <h2 id=breaking-rules><span class=secno>4. </span> Rules for Breaking</h2>

  <p id=when-a-break-splits-a-box-the-boxs-botto> When a break splits a box,
   the box's bottom margins, borders, and padding have no visual effect where
   the split occurs; the box's background and left and right margins, border,
   and padding extend to the bottom of the page, through an ensuing blank
   page if one exists, and onto the top of the subsequent page.

  <h3 id=allowed-pg-brk><span class=secno>4.1. </span> Allowed page breaks</h3>

  <p id=in-the-normal-flow-page-breaks-may-occur>In the normal flow, page
   breaks may occur at the following places:

  <ol>
   <li id=brk-btw-blocks> In the vertical margin between sibling block boxes
    (or rows in a table). When an unforced page break occurs here, both the
    adjoining &lsquo;<code class=property>margin-top</code>&rsquo; and
    &lsquo;<code class=property>margin-bottom</code>&rsquo; are set to zero.

   <li id=brk-btw-lines>Between line boxes inside a block box.

   <li id=brk-end-block> Between the content edge of a block box and the
    outer edges of its child content (margin edges of block-level children or
    line box edges for inline-level children) <em>if</em> there is a
    (non-zero) gap between them.
  </ol>

  <p id=these-breaks-are-subject-to-the-followin>These breaks are subject to
   the following rules:

  <ul>
   <li id=rule-a-breaking-at-1-is-allowed-only-if-> <strong>Rule A:</strong>
    Breaking at <a href="#brk-btw-blocks">(1)</a> is allowed only if the
    &lsquo;<code class=property>page-break-after</code>&rsquo; and
    &lsquo;<code class=property>page-break-before</code>&rsquo; properties of
    all the elements generating boxes that meet at this margin allow it,
    which is when at least one of them has the value &lsquo;<code
    class=css>always</code>&rsquo;, &lsquo;<code
    class=css>left</code>&rsquo;, or &lsquo;<code
    class=css>right</code>&rsquo;, or when all of them are &lsquo;<code
    class=css>auto</code>&rsquo;.

   <li id=rule-b-however-if-all-of-them-are-auto-a> <strong>Rule B:</strong>
    However, if all of them are &lsquo;<code class=css>auto</code>&rsquo; and
    a common ancestor of all the elements has a &lsquo;<code
    class=property>page-break-inside</code>&rsquo; value of &lsquo;<code
    class=css>avoid</code>&rsquo;, then breaking here is not allowed.

   <li id=rule-c-breaking-at-2-is-allowed-only-if-> <strong>Rule C:</strong>
    Breaking at <a href="#brk-btw-lines">(2)</a> is allowed only if the
    number of line boxes between the break and the start of the enclosing
    block box is the value of &lsquo;<a href="#orphans"><code
    class=property>orphans</code></a>&rsquo; or more, and the number of line
    boxes between the break and the end of the box is the value of &lsquo;<a
    href="#widows"><code class=property>widows</code></a>&rsquo; or more.

   <li id=rule-d-in-addition-breaking-at-2-or-3-is> <strong>Rule D:</strong>
    In addition, breaking at <a href="#brk-btw-blocks">(2)</a> or <a
    href="#brk-end-block">(3)</a> is allowed only if the &lsquo;<code
    class=property>page-break-inside</code>&rsquo; property of all ancestors
    is &lsquo;<code class=css>auto</code>&rsquo;.
  </ul>

  <p id=if-the-above-doesnt-provide-enough-break> If the above doesn't
   provide enough break points to keep content from overflowing the page
   boxes, then rules A, B and D are dropped in order to find additional
   breakpoints. In this case the UA may use the &lsquo;<code
   class=property>avoid</code>&rsquo;s that are in effect at those points to
   weigh the appropriateness of the new breakpoints; however, this
   specification does not suggest a precise algorithm.

  <p id=if-that-still-does-not-lead-to-sufficien> If that still does not lead
   to sufficient break points, rule C is dropped as well, to find still more
   break points.

  <h3 id=forced-pg-brk><span class=secno>4.2. </span> Forced page breaks</h3>

  <p id=a-page-break-must-occur-at-1-if-among-th> A page break must occur at
   <a href="#brk-btw-blocks">(1)</a> if, among the'page-break-after' and
   &lsquo;<code class=property>page-break-before</code>&rsquo; properties of
   all the elements generating boxes that meet at this margin, there is at
   least one with the value &lsquo;<code class=css>always</code>&rsquo;,
   &lsquo;<code class=css>left</code>&rsquo;, or &lsquo;<code
   class=css>right</code>&rsquo;.

  <p id=when-multiple-page-break-before-andor-pa> When multiple &lsquo;<code
   class=property>page-break-before</code>&rsquo; and/or &lsquo;<code
   class=property>page-break-after</code>&rsquo; properties with values of
   "always", "left" or "right" apply at a margin, only one of them should
   generate page breaks. That is, no content-empty pages are generated by
   page-break properties, except for at most one content-empty page as may be
   required by &lsquo;<code class=property>right</code>&rsquo; and
   &lsquo;<code class=property>left</code>&rsquo; values to position ensuing
   content on a right- or left-facing page.

  <p id=a-page-break-must-also-occur-at-1-if-the> A page break must also
   occur at <a href="#brk-btw-blocks">(1)</a> if the last line box above this
   margin and the first one below it do not have the same value for
   &lsquo;<code class=property>page</code>&rsquo;.

  <p id=when-a-forced-page-break-occurs-at-1-the> When a forced page break
   occurs at <a href="#brk-btw-blocks">(1)</a>, the used values of any
   adjoining &lsquo;<code class=property>margin-bottom</code>&rsquo; are set
   to zero.

  <h3 id=best-pg-brk><span class=secno>4.3. </span> "Best" page breaks</h3>

  <p id=css3-does-not-define-which-of-a-set-of-a> CSS3 does <em>not</em>
   define which of a set of allowed page breaks must be used; except as
   defined earlier in the section, CSS3 does not forbid a user agent to break
   at every possible break point, or to not break at all. But CSS3 does
   recommend that user agents observe the following guidelines (while
   recognizing that they are sometimes contradictory):

  <ul>
   <li id=break-as-few-times-as-possible.>Break as few times as possible.

   <li id=make-all-pages-that-dont-end-with-a-forc>Make all pages that don't
    end with a forced break appear to have about the same height.

   <li id=avoid-breaking-inside-a-replaced-element>Avoid breaking inside a
    replaced element.
  </ul>

  <div class=example>
   <p id=suppose-for-example-that-the-style-sheet> Suppose, for example, that
    the style sheet contains &lsquo;<code class=css>orphans :
    4</code>&rsquo;, &lsquo;<code class=css>widows : 2</code>&rsquo;, and
    there are 20 lines (line boxes) available at the bottom of the current
    page, and the next block in normal flow is considered for placement:</p>

   <ul>
    <li id=if-the-block-contains-20-line-boxes-or-f> If the block contains 20
     line boxes or fewer, it should be placed on the current page.

    <li id=if-the-block-contains-21-or-22-line-boxe> If the block contains 21
     or 22 line boxes, the second part of the paragrap must not violate the
     &lsquo;<a href="#widows"><code class=property>widows</code></a>&rsquo;
     constraint, and so the second part must contain at least two line boxes;
     likewise the first part must contain at least four line boxes.

    <li id=if-the-block-contains-23-line-boxes-or-m> If the block contains 23
     line boxes or more, the first part should contain 20 lines and the
     second part the remaining lines. (But if any part of the block is placed
     on the current page, that part must contain at least four line boxes and
     the second part at least two line boxes.)
   </ul>

   <p id=now-suppose-that-orphans-is-10-widows-is> Now suppose that &lsquo;<a
    href="#orphans"><code class=property>orphans</code></a>&rsquo; is
    &lsquo;<code class=css>10</code>&rsquo;, &lsquo;<a href="#widows"><code
    class=property>widows</code></a>&rsquo; is &lsquo;<code
    class=css>20</code>&rsquo;, and there are 8 lines available at the bottom
    of the current page:</p>

   <ul>
    <li id=if-the-block-contains-8-lines-or-fewer-i> If the block contains 8
     lines or fewer, it should be placed on the current page.

    <li id=if-the-block-contains-9-lines-or-more-it> If the block contains 9
     lines or more, it may NOT be split (that would violate the orphan
     constraint), so it must move as a block to the next page.
   </ul>
  </div>
  <!-- End section "Page Breaks" -->

  <h2 id=conformance><span class=secno>5. </span> Conformance</h2>

  <h3 id=conventions><span class=secno>5.1. </span> Document Conventions</h3>

  <p id=conformance-requirements-are-expressed-w> Conformance requirements
   are expressed with a combination of descriptive assertions and RFC 2119
   terminology. The key words “must”, “must NOT”, “REQUIRED”,
   “SHALL”, “SHALL NOT”, “should”, “should NOT”,
   “RECOMMENDED”, “may”, and “OPTIONAL” in the normative parts of
   this document are to be interpreted as described in RFC 2119. However, for
   readability, these words do not appear in all uppercase letters in this
   specification.

  <p id=all-of-the-text-of-this-specification-is> All of the text of this
   specification is normative except sections explicitly marked as
   non-normative, examples, and notes. <a href="#RFC2119"
   rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p id=examples-in-this-specification-are-intro> Examples in this
   specification are introduced with the words “for example” or are set
   apart from the normative text with <code>class="example"</code>, like
   this:

  <div class=example>
   <p id=this-is-an-example-of-an-informative-exa>This is an example of an
    informative example.</p>
  </div>

  <p id=informative-notes-begin-with-the-word-no> Informative notes begin
   with the word “Note” and are set apart from the normative text with
   <code>class="note"</code>, like this:

  <p class=note id=note-this-is-an-informative-note.>Note, this is an
   informative note.

  <h3 id=conformance-classes><span class=secno>5.2. </span>Conformance
   Classes</h3>

  <p id=conformance-to-css-fragmentation-is-defi>Conformance to CSS
   Fragmentation is defined for three conformance classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd> A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd> A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd> A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p id=a-style-sheet-is-conformant-to-css-fragm> A style sheet is conformant
   to CSS Fragmentation if all of its declarations that use properties
   defined in this module have values that are valid according to the generic
   CSS grammar and the individual grammars of each property as given in this
   module.

  <p id=a-renderer-is-conformant-to-css-fragment> A renderer is conformant to
   CSS Fragmentation if, in addition to interpreting the style sheet as
   defined by the appropriate specifications, it supports all the features
   defined by CSS Fragmentation by parsing them correctly and rendering the
   document accordingly. However, the inability of a UA to correctly render a
   document due to limitations of the device does not make the UA
   non-conformant. (For example, a UA is not required to render color on a
   monochrome monitor.)

  <p id=an-authoring-tool-is-conformant-to-css-f> An authoring tool is
   conformant to CSS Fragmentation if it writes style sheets that are
   syntactically correct according to the generic CSS grammar and the
   individual grammars of each feature in this module, and meet all other
   conformance requirements of style sheets as described in this module.

  <h3 id=partial><span class=secno>5.3. </span> Partial Implementations</h3>

  <p id=so-that-authors-can-exploit-the-forward-> So that authors can exploit
   the forward-compatible parsing rules to assign fallback values, CSS
   renderers <strong>must</strong> treat as invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore"> ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 id=experimental><span class=secno>5.4. </span> Experimental
   Implementations</h3>

  <p id=to-avoid-clashes-with-future-css-feature> To avoid clashes with
   future CSS features, the CSS2.1 specification reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p id=prior-to-a-specification-reaching-the-ca> Prior to a specification
   reaching the Candidate Recommendation stage in the W3C process, all
   implementations of a CSS feature are considered experimental. The CSS
   Working Group recommends that implementations use a vendor-prefixed syntax
   for such features, including those in W3C Working Drafts. This avoids
   incompatibilities with future changes in the draft.

  <h3 id=testing><span class=secno>5.5. </span> Non-Experimental
   Implementations</h3>

  <p id=once-a-specification-reaches-the-candida> Once a specification
   reaches the Candidate Recommendation stage, non-experimental
   implementations are possible, and implementors should release an
   unprefixed implementation of any CR-level feature they can demonstrate to
   be correctly implemented according to spec.

  <p id=to-establish-and-maintain-the-interopera> To establish and maintain
   the interoperability of CSS across implementations, the CSS Working Group
   requests that non-experimental CSS renderers submit an implementation
   report (and, if necessary, the testcases used for that implementation
   report) to the W3C before releasing an unprefixed implementation of any
   CSS features. Testcases submitted to W3C are subject to review and
   correction by the CSS Working Group.

  <p id=further-information-on-submitting-testca> Further information on
   submitting testcases and implementation reports can be found from on the
   CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">
   http://www.w3.org/Style/CSS/Test/</a>. Questions should be directed to the
   <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">
   public-css-testsuite@w3.org</a> mailing list.

  <h3 id=cr-exit-criteria><span class=secno>5.6. </span> CR Exit Criteria</h3>

  <p id=for-this-specification-to-be-advanced-to> For this specification to
   be advanced to Proposed Recommendation, there must be at least two
   independent, interoperable implementations of each feature. Each feature
   may be implemented by a different set of products, there is no requirement
   that all features be implemented by a single product. For the purposes of
   this criterion, we define the following terms:

  <dl>
   <dt>independent

   <dd> each implementation must be developed by a different party and cannot
    share, reuse, or derive from code used by another qualifying
    implementation. Sections of code that have no bearing on the
    implementation of this specification are exempt from this requirement.

   <dt>interoperable

   <dd> passing the respective test case(s) in the official CSS test suite,
    or, if the implementation is not a Web browser, an equivalent test. Every
    relevant test in the test suite should have an equivalent test created if
    such a user agent (UA) is to be used to claim interoperability. In
    addition if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those equivalent
    tests in the same way for the purpose of interoperability. The equivalent
    tests must be made publicly available for the purposes of peer review.

   <dt>implementation

   <dd> a user agent which:
    <ol class=inline>
     <li id=implements-the-specification.>implements the specification.

     <li id=is-available-to-the-general-public.-the->is available to the
      general public. The implementation may be a shipping product or other
      publicly available version (i.e., beta version, preview release, or
      “nightly build”). Non-shipping product releases must have
      implemented the feature(s) for a period of at least one month in order
      to demonstrate stability.

     <li id=is-not-experimental-i.e.-a-version-speci>is not experimental
      (i.e., a version specifically designed to pass the test suite and is
      not intended for normal usage going forward).
    </ol>
  </dl>

  <p id=the-specification-will-remain-candidate-> The specification will
   remain Candidate Recommendation for at least six months.

  <h2 class=no-num id=acknowledgments> Acknowledgments</h2>

  <p id=the-editors-would-like-to-extend-special> The editors would like to
   extend special thanks to Michael Day, and the former <a href="#CSS3PAGE"
   rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a> editors Jim Bigelow
   (HP), Melinda Grant (HP), Håkon Wium Lie (Opera), and Jacob Refstrup (HP)
   for their contributions to this specification.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS3-REGIONS>[CSS3-REGIONS]

   <dd>Vincent Hardy; Alex Mogilevsky. <a
    href="http://www.w3.org/TR/2011/WD-css3-regions-20111129/"><cite>CSS
    Regions Module Level 3.</cite></a> 29 November 2011. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-regions-20111129/">http://www.w3.org/TR/2011/WD-css3-regions-20111129/</a>
    </dd>
   <!---->

   <dt id=CSS3COL>[CSS3COL]

   <dd>H&#229;kon Wium Lie. <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412"><cite>CSS
    Multi-column Layout Module.</cite></a> 12 April 2011. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412">http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a>
    </dd>
   <!---->

   <dt id=CSS3COLOR>[CSS3COLOR]

   <dd>Tantek &#199;elik; Chris Lilley; L. David Baron. <a
    href="http://www.w3.org/TR/2011/REC-css3-color-20110607"><cite>CSS Color
    Module Level 3.</cite></a> 7 June 2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-css3-color-20110607">http://www.w3.org/TR/2011/REC-css3-color-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3PAGE>[CSS3PAGE]

   <dd>H&#229;kon Wium Lie; Melinda Grant. <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010"><cite>CSS3 Module:
    Paged Media.</cite></a> 10 October 2006. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010">http://www.w3.org/TR/2006/WD-css3-page-20061010</a>
    </dd>
   <!---->

   <dt id=CSS3TEXT>[CSS3TEXT]

   <dd>Elika J. Etemad; Koji Ishii; Shinyu Murakami. <a
    href="http://www.w3.org/TR/2011/WD-css3-text-20110901/"><cite>CSS Text
    Level 3.</cite></a> 1 September 2011. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-text-20110901/">http://www.w3.org/TR/2011/WD-css3-text-20110901/</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>authoring tool, <a href="#authoring-tool"
    title="authoring tool"><strong>5.2.</strong></a>

   <li>box fragment, <a href="#box-fragment"
    title="box fragment"><strong>2.</strong></a>

   <li>break, <a href="#break" title=break><strong>2.</strong></a>

   <li>break-after, <a href="#break-after"
    title=break-after><strong>3.1.</strong></a>

   <li>break-before, <a href="#break-before"
    title=break-before><strong>3.1.</strong></a>

   <li>break-inside, <a href="#break-inside"
    title=break-inside><strong>3.1.</strong></a>

   <li>fragment, <a href="#fragment" title=fragment><strong>2.</strong></a>

   <li>fragmentation, <a href="#fragmentation"
    title=fragmentation><strong>1.</strong></a>, <a href="#fragmentation0"
    title=fragmentation><strong>2.</strong></a>

   <li>fragmentation break, <a href="#fragmentation-break"
    title="fragmentation break"><strong>2.</strong></a>

   <li>fragmentation context, <a href="#fragmentation-context"
    title="fragmentation context"><strong>2.</strong></a>

   <li>fragmented flow, <a href="#fragmented-flow"
    title="fragmented flow"><strong>2.</strong></a>

   <li>fragmenter, <a href="#fragmenter"
    title=fragmenter><strong>2.</strong></a>

   <li>orphans, <a href="#orphans" title=orphans><strong>3.2.</strong></a>

   <li>pagination, <a href="#pagination"
    title=pagination><strong>1.</strong></a>

   <li>renderer, <a href="#renderer" title=renderer><strong>5.2.</strong></a>
    

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="style sheet, as conformance class"><strong>5.2.</strong></a>
    </ul>

   <li>widows, <a href="#widows" title=widows><strong>3.2.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><a class=property href="#break-after">break-after</a>

     <td>auto | always | left | right | page | column | region | avoid |
      avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements, table row groups, table rows (but see prose)

     <td>no

     <td>N/A

     <td>paged

    <tr>
     <th><a class=property href="#break-before">break-before</a>

     <td>auto | always | left | right | page | column | region | avoid |
      avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements, table row groups, table rows (but see prose)

     <td>no

     <td>N/A

     <td>paged

    <tr>
     <th><a class=property href="#break-inside">break-inside</a>

     <td>auto | avoid | avoid-page | avoid-column | avoid-region

     <td>auto

     <td>block-level elements, block containers, table row groups, table rows
      (but see prose)

     <td>no

     <td>N/A

     <td>paged

    <tr>
     <th><a class=property href="#orphans">orphans</a>

     <td>&lt;integer&gt;

     <td>2

     <td>block containers

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#widows">widows</a>

     <td>&lt;integer&gt;

     <td>2

     <td>block containers

     <td>yes

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
