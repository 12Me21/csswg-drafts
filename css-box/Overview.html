<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
 <head
  profile="http://dublincore.org/documents/2008/08/04/dc-html/  http://microformats.org/profile/h-card http://microformats.org/profile/hcard http://microformats.org/profile/rel-license "><!-- Note: the h-card profile is for a "microformats 2" vocabulary and
is experimental as of September 2012 -->

  <meta content="text/html; charset=utf-8" http-equiv=content-type>
  <title>CSS basic box model</title>

  <link href="http://purl.org/dc/terms/" rel=schema.dcterms>
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
   rel=dcterms.rights>
  <meta content="CSS basic box model" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2013-10-12 name=dcterms.date>
  <meta content="Bert Bos" name=dcterms.creator>
  <meta content="Anton Prowse" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://dev.w3.org/csswg/css3-box/" name=dcterms.identifier>
  <link href="../default.css" rel=stylesheet title=Default type="text/css">
  <style type="text/css">
  ol.stack p {margin-top: 0}
  img.small {max-width: 100%}
  .equiv-table tr {vertical-align: baseline}
  .equiv-table img {max-width: 12em; max-width: 100%}
  .minidiagram {height: 5em; vertical-align: middle}
  dt {display: inline}
  dt + dt::before {content: ", "}
  /* Undo the max-width in the 2012 style for editor's drafts: */
  body {max-width: none}
</style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
   title=Default type="text/css">
  <link href="#contents" rel=contents>
  <link href="#index" rel=index>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS basic box model</h1>

   <h2 class="no-num no-toc">Editor's Draft 12 October 2013</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://dev.w3.org/csswg/css3-box/">http://dev.w3.org/csswg/css3-box/</a>

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-box">http://www.w3.org/TR/css3-box</a>

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2002/WD-css3-box-20021024">http://www.w3.org/TR/2002/WD-css3-box-20021024</a>

    <dt>Feedback:

    <dd><a
     href="mailto:www-style@w3.org?subject=%5Bcss3-box%5D%20feedback">www-style@w3.org</a>
     with subject line “[css3-box] <var>… message topic …</var>” (<a
     href="http://lists.w3.org/Archives/Public/www-style/"
     rel=discussion>archives</a>)

    <dt>Editors:

    <dd class="h-card vcard"><a class="p-name fn u-url url"
     href="http://www.w3.org/People/Bos/" rel=author>Bert Bos</a>, <span
     class="p-org org">W3C</span>, <a class="u-email email"
     href="mailto:bert@w3.org">&lt;bert@w3.org&gt;</a>

    <dd class="h-card vcard"><span class="p-name fn">Anton Prowse</span>,
     <span class="p-org org">Invited Expert</span>, <a class="u-email email"
     href="mailto:prowse@moonhenge.net">&lt;prowse@moonhenge.net&gt;</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2013 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>, <a
    href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc">Abstract</h2>

  <p><abbr title="Cascading Style Sheets">CSS</abbr> describes the rendering
   of documents on various media. When textual documents (e.g., HTML) are
   laid out on visual media (e.g., screen or print), CSS models their layout
   as a collection of rectangular boxes containing words, lines, paragraphs,
   tables, etc., each with properties such as size, color and font.

  <p>This module describes the basic types of boxes: block, list item,
   inline, etc.; and some of their properties, including margins, padding and
   width/height. It defines a layout called a “flow,” in which a series
   of boxes is laid out one after the other, and it defines “floating”
   boxes. Other kinds of layout, such as tables, absolute positioning, ruby
   annotations, grid layouts, columns and page boxes, are described by other
   modules. Also, the layout of text inside a line (including the handling of
   left-to-right and right-to-left scripts) is defined elsewhere.

  <p>In CSS level 3, boxes may contain either horizontal or vertical text.
   Different orientations can be mixed.

  <h2 class="no-toc no-num">Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-box%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css3-box” in the subject, preferably like this:
   “[<!---->css3-box<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a
   href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part of
   the <a href="http://www.w3.org/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>The CSS Working Group plans to ask for W3C Recommendation status for
   this specification only when there are sufficiently many implementations.
   See the section <a href="#exit">“CR exit criteria” </a> for details.

  <p class=mtb>The terminology and the order of the sections is currently in
   flux. This working draft is published to show the features that are being
   discussed in the context of this module, but it is likely that some of the
   names of the features will change.

  <p>This module should eventually replace corresponding parts of the revised
   CSS level 2 specification <a href="#ref-CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. But this is an early draft
   and any differences to level 2 are most likely unintentional, unless they
   concern new features, such as vertical text or float displacement.
   <em>Please help us improve the next draft by pointing out such
   differences.</em>

  <p>Some issues that affect multiple sections in this document:

  <div class=issue>
   <p>Horizontal centering (more precisely: centering in the inline
    direction). The draft contains several suggestions:

   <ol>
    <li>Setting ‘<a href="#margin"><code
     class=property>margin</code></a>’ to ‘<a href="#fill"><code
     class=css>fill</code></a>’. ‘<a href="#fill"><code
     class=css>Fill</code></a>’ is similar to ‘<code
     class=css>auto</code>’, but allowed to be negative:
     <pre>P {margin: 1em fill}</pre>

    <li>Setting a property ‘<a href="#alignment"><code
     class=property>alignment</code></a>’ on the element to center:
     <pre>P {alignment: center}</pre>

    <li>Setting a property ‘<a href="#child-align"><code
     class=property>child-align</code></a>’ on the parent of the element to
     center:
     <pre>DIV {child-align: middle}</pre>

    <li>Rely on grid templates <a href="#ref-CSS3LAYOUT"
     rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>. You set a
     template on the parent or on the element itself. One or the other may be
     easier. E.g., to horizontally center the single child of a <a
     href="#horizontal">horizontal</a> DIV):
     <pre>DIV {grid: ". @ ." }</pre>

     <p>To horizontally center a P with a template on the P itself requires
      that the width of the P isn't set with the ‘<a href="#width"><code
      class=property>width</code></a>’ property, but with the ‘<code
      class=property>grid-columns</code>’ property (or the ‘<code
      class=property>grid</code>’ shorthand). In the example below the
      width is set to ‘<code class=property>fit-content</code>’:

     <pre>P {grid: * fit-content *  ".  @ ."}</pre>

     <p>To vertically center the single child of a <a
      href="#vertical.">vertical</a> DIV:

     <pre>DIV {grid: "@"}
DIV:slot(@) {vertical-align: middle}</pre>

     <p>To vertically center a P inside a vertical parent by means of a
      template on the P itself requires that the height of the P isn't set
      with ‘<a href="#height"><code class=property>height</code></a>’,
      but with ‘<code class=property>grid-rows</code>’ (or the ‘<code
      class=property>grid</code>’ shorthand). Below, the height is set to
      10em:

     <pre>P {grid: "." *
         "@" 10em
         "." * }</pre>

     <p>See also <a href="/Style/CSS/Tracker/actions/18">ACTION-18</a>
      (especially <a
      href="http://lists.w3.org/Archives/Public/www-style/2008May/0045.html">the
      ideas at end of Bert's comment</a> ), which is continued in <a
      href="/Style/CSS/Tracker/issues/53">ISSUE-53.</a>
   </ol>
  </div>

  <div class=issue id=contain-floats>
   <p>Ensuring that the bottom padding (more precisely: the foot padding)
    starts after any preceding and descendant floats.

   <p>The main use case is to make sure an element is at least as high as all
    its floating descendants. I.e., at the end of the element, clear the
    floats that are descendants of the element. That may or may not also
    clear any floats that were declared before the element. Some possible
    approaches:

   <ol>
    <li>Set ‘<a href="#overflow1"><code
     class=property>overflow</code></a>’ to anything else than ‘<code
     class=property>visible</code>’ (and ‘<a href="#height"><code
     class=property>height</code></a>’ to ‘<code
     class=property>auto</code>’). This requires no new property, but has
     the side effect of influencing the scrolling mechanism. It also doesn't
     clear any floats that occurred before the element and doesn't
     distinguish left, right or other floats. [2004-02-29 ftf]

    <li>A new property ‘<a href="#clear-after"><code
     class=property>clear-after</code></a>’.

    <li>Use the value ‘<code class=css>shrink-wrap</code>’ (or some other
     name, e.g., ‘<code class=css>contain</code>’) on ‘<a
     href="#height"><code class=property>height</code></a>’ (and ‘<a
     href="#width"><code class=property>width</code></a>’, in case of
     vertical text) to make an element into a <a href="#flow-root"><em>flow
     root.</em></a> This requires no new property, only a new value, but
     doesn't clear any floats before the element and doesn't distinguish
     left, right or other floats. [The idea to add the functionality to ‘<a
     href="#height"><code class=property>height</code></a>’ is due to IanH
     2004-02-29]

    <li>The same, but only allow the new keyword on the ‘<a
     href="#min-height"><code class=property>min-height</code></a>’ and
     ‘<a href="#min-width"><code class=property>min-width</code></a>’
     properties. [The idea to add the functionality to ‘<a
     href="#min-height"><code class=property>min-height</code></a>’ is due
     to Fantasai, 2012-09]

    <li>A new value ‘<code class=css>container</code>’ on ‘<a
     href="#display0"><code class=property>display</code></a>’. This
     doesn't allow a ‘<code class=css>list-item</code>’ to clear its
     floats.
   </ol>
  </div>

  <div class=issue>
   <p>Vertical centering and alignment (more precisely: in the block flow
    direction).

   <p>The use cases are centering a single child vertically in its parent,
    centering all content of an element vertically (e.g., all text on a
    slide) and aligning only the last child (or the last <var>n</var>
    children) against the bottom of the parent.

   <p>Possible solutions include:

   <ol>
    <li>Extending ‘<code class=property>vertical-align</code>’ to apply
     to block elements:
     <pre>DIV {vertical-align: middle}</pre>

     <p>This centers or aligns all content, it cannot top-align the first
      child and bottom-align the last.

    <li>Allowing ‘<code class=property>vertical-align</code>’ on a new
     type of box called ‘<code class=css>container</code>’. (The main
     function of ‘<code class=css>container</code>’ is to contain its
     floating descendants.) This wouldn't allow a ‘<code
     class=css>list-item</code>’, a ‘<code
     class=css>table-caption</code>’ or an ‘<code
     class=property>inline-block</code>’‘<code class=css> to center its
     content.</code>’)

    <li>Setting ‘<a href="#margin"><code
     class=property>margin</code></a>’ to ‘<a href="#fill"><code
     class=css>fill</code></a>’:
     <pre>P {margin-top: fill}</pre>

     <p>This works to center an element in its parent, but not to center the
      content of an element with only text.

    <li>Relying on grid templates <a href="#ref-CSS3LAYOUT"
     rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>. If there are
     enough elements, that could work:
     <pre>
&lt;STYLE>
 BODY {grid: "a . b"} /* 3 columns */
 SECTION.a {flow: a; grid: "@" "." "z"} /* 3 rows */
 SECTION.b {flow: b; grid: "@" "." "z"} /* 3 rows */
 P.note {flow: z}
&lt;/STYLE>
&lt;SECTION CLASS=a>
 &lt;H1>...&lt;/H1>
 &lt;P>...
 &lt;P CLASS=note>...
&lt;/SECTION>
&lt;SECTION CLASS=b>
 &lt;H1 ID=b>...&lt;/H1>
 &lt;P>...
 &lt;P CLASS=note>...
&lt;/SECTION>
</pre>

     <p>And assuming ‘<code class=property>vertical-align</code>’ applies
      to slots, then that also vertically centers the contents of an element.
      (This centers horizontally if the element is <a
      href="#vertical.">vertical,</a> because ‘<code
      class=property>vertical-align</code>’ is relative to the writing
      mode.)

     <pre>P {grid: "@"}
P:slot(@) {vertical-align: center}</pre>

     <p>But it is not enough to bottom-align the two paragraphs with class
      “note” in this example:

     <pre>
&lt;STYLE>
 BODY {grid: "a . b"}
 H1#a, H1#a ~ P {flow: a}
 H1#b, H1#b ~ P {flow: b}
 P.note {/* align to bottom?? */}
&lt;/STYLE>
&lt;H1 ID=>...&lt;/H1>
&lt;P>...
&lt;P CLASS=note>...
&lt;H1 ID=b>...&lt;/H1>
&lt;P>...
&lt;P CLASS=note>...
</pre>

    <li>
     <p>Use centering in the inline direction after switching the parent to
      an orthogonal block flow direction. E.g., if the document is <a
      href="#horizontal">horizontal</a> and we want to vertically center the
      single child of a DIV:

     <pre>DIV {writing-mode: vertical-rl}
DIV > * {writing-mode: horizontal; width: 100%;
  margin-top: auto; margin-bottom: auto}</pre>

     <p>This cannot top-align the first child and bottom-align the second.

    <li>
     <p>Vertically centering a single element could also be modeled as a
      float with an offset. A draft of <a href="#ref-CSS-PAGE-FLOATS"
      rel=biblioentry>[CSS-PAGE-FLOATS]<!--{{CSS-PAGE-FLOATS}}--></a> from
      2013 suggests the following to center a P vertically inside its parent
      DIV:

     <pre>DIV {height: 15em;
  colums: 1}            /* Make the DIV act like a "page" */
P {float: top left;     /* Place the P in the corner of the DIV... */
  float-offset: 0 50%}  /* ... and add 50% offset vertically */</pre>

     <p>Floats like this also allow to put all children at the top and the
      last child against the bottom. But only one child: trying to push
      multiple children down to the bottom results in their order being
      reversed.
   </ol>
  </div>

  <h2 class="no-num no-toc">Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#how-to-read-this-specification"><span class=secno>1.
    </span>How to read this specification</a>

   <li><a href="#dependencies-on-other-modules"><span class=secno>2.
    </span>Dependencies on other modules</a>

   <li><a href="#introduction-amp-definitions"><span class=secno>3.
    </span>Introduction &amp; definitions</a>

   <li><a href="#the-viewport-and-the-canvas"><span class=secno>4. </span>The
    viewport and the canvas</a>

   <li><a href="#flows"><span class=secno>5. </span>Flows</a>

   <li><a href="#types-of-boxes"><span class=secno>6. </span>Types of
    boxes</a>
    <ul class=toc>
     <li><a href="#display"><span class=secno>6.1. </span>The display
      property</a>

     <li><a href="#block-level-boxes-containing-blocks-flow"><span
      class=secno>6.2. </span>Block-level boxes, containing blocks, flows and
      anonymous boxes</a>

     <li><a href="#run-in-boxes"><span class=secno>6.3. </span>Run-in
      boxes</a>

     <li><a href="#compact-boxes"><span class=secno>6.4. </span>Compact
      boxes</a>

     <li><a href="#container-box"><span class=secno>6.5. </span>Container
      box</a>

     <li><a href="#mixing-the-box-model-with-other-formatti"><span
      class=secno>6.6. </span>Mixing the box model with other formatting
      models</a>
    </ul>

   <li><a href="#the-padding-properties"><span class=secno>7. </span>The
    padding properties</a>

   <li><a href="#the-margin-properties"><span class=secno>8. </span>The
    margin properties</a>

   <li><a href="#the-width-and-height-properties"><span class=secno>9.
    </span>The width and height properties</a>

   <li><a href="#min-max"><span class=secno>10. </span>The min-width,
    max-width, min-height and max-height properties</a>

   <li><a href="#intrinsic"><span class=secno>11. </span>Definition of
    min-content/max-content</a>

   <li><a href="#aspect-ratios-of-replaced-elements"><span class=secno>12.
    </span>Aspect ratios of replaced elements</a>

   <li><a href="#block-level-formatting"><span class=secno>13.
    </span>Block-level formatting</a>
    <ul class=toc>
     <li><a href="#collapsing-margins"><span class=secno>13.1.
      </span>Collapsing margins</a>
    </ul>

   <li><a href="#inline-level-formatting"><span class=secno>14.
    </span>Inline-level formatting</a>

   <li><a href="#Calculating"><span class=secno>15. </span>Calculating
    widths, heights and margins</a>
    <ul class=toc>
     <li><a href="#inline-non-replaced"><span class=secno>15.1.
      </span>Inline, non-replaced elements</a>

     <li><a href="#inline-replaced"><span class=secno>15.2. </span>Inline or
      floating, replaced elements</a>

     <li><a href="#blockwidth"><span class=secno>15.3. </span>Block-level,
      non-replaced elements in normal flow when ‘<code
      class=property>overflow</code>’ computes to ‘<code
      class=css>visible</code>’</a>

     <li><a href="#other-block-level-non-replaced-elements-"><span
      class=secno>15.4. </span>Other block-level, non-replaced elements in
      normal flow</a>

     <li><a href="#inline-block-or-floating-non-replaced-el"><span
      class=secno>15.5. </span>‘<code class=property>Inline-block</code>’
      or floating, non-replaced elements</a>

     <li><a href="#abs-non-replaced-width"><span class=secno>15.6.
      </span>Absolutely positioned, non-replaced elements</a>

     <li><a href="#abs-replaced"><span class=secno>15.7. </span>Absolutely
      positioned, replaced elements</a>

     <li><a href="#block-level-replaced-elements-in-normal-"><span
      class=secno>15.8. </span>Block-level, replaced elements in normal
      flow</a>

     <li><a href="#floating-non-replaced-elements"><span class=secno>15.9.
      </span>Floating, non-replaced elements</a>

     <li><a href="#root-height"><span class=secno>15.10. </span>Auto heights
      for flow roots</a>
    </ul>

   <li><a href="#the-float-property"><span class=secno>16. </span>The float
    property</a>
    <ul class=toc>
     <li><a href="#introduction-to-floats"><span class=secno>16.1.
      </span>Introduction to floats</a>

     <li><a href="#rules-for-positioning-floats"><span class=secno>16.2.
      </span>Rules for positioning floats</a>
    </ul>

   <li><a href="#the-clear-property"><span class=secno>17. </span>The clear
    property</a>

   <li><a href="#the-clear-after-property"><span class=secno>18. </span>The
    clear-after property</a>

   <li><a href="#overflow0"><span class=secno>19. </span>Overflow</a>
    <ul class=toc>
     <li><a href="#overflow"><span class=secno>19.1. </span>The overflow,
      overflow-x and overflow-y properties</a>
    </ul>

   <li><a href="#the-visibility-property"><span class=secno>20. </span>The
    visibility property</a>

   <li><a href="#the-alignment-property"><span class=secno>21. </span>The
    alignment property</a>

   <li><a href="#the-child-align-property"><span class=secno>22. </span>The
    child-align property</a>

   <li><a href="#stacking-contexts"><span class=secno>23. </span>Stacking
    contexts</a>
    <ul class=toc>
     <li><a href="#definitions"><span class=secno>23.1.
      </span>Definitions</a>

     <li><a href="#painting-order"><span class=secno>23.2. </span>Painting
      order</a>

     <li><a href="#notes"><span class=secno>23.3. </span>Notes</a>

     <li><a href="#the-ltnumbergt-value"><span class=secno>23.4. </span>The
      &lt;number&gt; value</a>

     <li><a href="#auto"><span class=secno>23.5. </span>The auto value</a>

     <li><a href="#complex-size"><span class=secno>23.6. </span>Algorithm for
      shrink-wrapping replaced elements with complex width/height</a>
    </ul>

   <li><a href="#the-float-displace-and-indent-edge-reset"><span
    class=secno>24. </span>The ‘<code
    class=property>float-displace</code>’ and ‘<code
    class=property>indent-edge-reset</code>’ properties
    [alternative 1]</a>
    <ul class=toc>
     <li><a href="#the-float-displace-property"><span class=secno>24.1.
      </span>The ‘<code class=property>float-displace</code>’
      property</a>

     <li><a href="#the-indent-edge-reset-property"><span class=secno>24.2.
      </span>The ‘<code class=property>indent-edge-reset</code>’
      property</a>
    </ul>

   <li class=no-num><a href="#the-float-displace-property-alternative2">The
    ‘float-displace’ property [alternative 2]</a>

   <li class=no-num><a href="#the-float-displace-property-alternative3">The
    ‘float-displace’ property [alternative 3]</a>

   <li><a href="#conformance"><span class=secno>25. </span>Conformance</a>

   <li><a href="#acknowledgments"><span class=secno>26.
    </span>Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#informative-references">Informative
      references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=how-to-read-this-specification><span class=secno>1. </span>How to
   read this specification</h2>

  <p>All sections are normative, unless stated otherwise.

  <div class=example>
   <p>Examples look like this and normally start with the word “Example.”
    Examples are not normative.
  </div>

  <p class=note>Notes look like this and normally start with the word
   “Note.” Notes are not normative.

  <p class=issue>Editorial notes look like this. They will be removed before
   the document becomes Candidate Recommendation.

  <p>Each property is defined in part in the text and in part by a table that
   groups together a number of facts about the property, including a regular
   expression to restrict its syntax. See <span class=issue>[where?]</span>
   for the meaning. The “Inherited” and “Initial” rows in the table
   are used by the Cascading and Inheritance module <a
   href="#ref-CSS3CASCADE"
   rel=biblioentry>[CSS3CASCADE]<!--{{CSS3CASCADE}}--></a> and “Media” by
   the Media Queries specification <a href="#ref-MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a>.

  <p>The specification may refer to the <a href="#used-value."><em>used
   value</em></a> and the <a href="#computed-value"><em>computed
   value</em></a> of a property. Unless stated explicitly, the short form
   “value” means the computed value.

  <h2 id=dependencies-on-other-modules><span class=secno>2.
   </span>Dependencies on other modules</h2>

  <p>This CSS module depends on the following other CSS modules:

  <ul>
   <li><cite>CSS Writing Modes Module</cite> <a
    href="#ref-CSS3-WRITING-MODES"
    rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>
    – switch between vertical and horizontal text, properties <dfn
    id=writing-mode>writing-mode</dfn> and <dfn id=direction>direction</dfn>,
    definitions of the terms <dfn id=block-flow-direction>block flow
    direction</dfn> and <dfn id=inline-base-direction.>inline base
    direction.</dfn>

   <li><cite>CSS Syntax Module</cite> <a href="#ref-CSS3SYN"
    rel=biblioentry>[CSS3SYN]<!--{{!CSS3SYN}}--></a> – syntax of properties
    and values

   <li><cite>CSS Values and Units Module</cite> <a href="#ref-CSS3VAL"
    rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a> – definitions of value
    types <dfn id=ltnumbergt><var>&lt;number&gt;</var></dfn>, <dfn
    id=ltpercentagegt><var>&lt;percentage&gt;</var></dfn>, <dfn
    id=ltanglegt><var>&lt;angle&gt;</var></dfn> and <dfn
    id=ltlengthgt><var>&lt;length&gt;</var></dfn>; defines the terms <dfn
    id=computed-value>computed value</dfn> and <dfn id=used-value.>used
    value.</dfn>

   <li><cite>CSS Text Module</cite> <a href="#ref-CSS3TEXT"
    rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a> – inline layout and
    definition of <dfn id=line-box.>line box.</dfn>

   <li><cite>CSS Generated and Replaced Content module</cite> <a
    href="#ref-CSS3GENCON"
    rel=biblioentry>[CSS3GENCON]<!--{{!CSS3GENCON}}--></a> – defines the
    terms <dfn id=replaced-element>replaced element</dfn> and <dfn
    id=intrinsic0>intrinsic</dfn> size (and intrinsic ratio).

   <li><cite>CSS Backgrounds and Borders Module</cite> <a href="#ref-CSS3BG"
    rel=biblioentry>[CSS3BG]<!--{{!CSS3BG}}--></a> – defines <dfn
    id=ltbg-positiongt><var>&lt;bg-position&gt;</var></dfn>

   <li><cite>CSS Basic User Interface Module</cite> <a href="#ref-CSS3UI"
    rel=biblioentry>[CSS3UI]<!--{{!CSS3UI}}--></a> – defines <dfn
    id=box-sizing>box-sizing</dfn>

   <li><cite>CSS 2D Transforms</cite> <a href="#ref-CSS3-2D-TRANSFORMS"
    rel=biblioentry>[CSS3-2D-TRANSFORMS]<!--{{!CSS3-2D-TRANSFORMS}}--></a>
    – defines <dfn id=transform>transform</dfn>
  </ul>

  <h2 id=introduction-amp-definitions><span class=secno>3.
   </span>Introduction &amp; definitions</h2>

  <p class=issue>Investigate if it is possible to make a pseudo-element to
   select anonymous boxes (‘<code class=css>::paragraph</code>’). See
   minutes of 10 Aug 2011.

  <p class=note>Note: The model in this specification differs from the model
   described in the CSS level 2 specification <a href="#ref-CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>, because it is generalized to
   apply also to vertical text. A document using only features from level 2
   renders exactly as described there, (except possibly for features that are
   undefined in that specification and have become defined since).

  <p>CSS assumes that the document to lay out is modeled as a <span
   class=index id=tree
   title="tree!!of elements|document tree|element tree">tree</span> of <dfn
   id=elements. title=element>elements.</dfn> Each element has an ordered
   list of zero or more child elements, with an optional string of text
   before the list, in-between the children and after the list. Each child
   has one parent, except for the unique element that has no parent, which is
   called the <dfn id=root-element.>root element.</dfn>

  <p class=note>Note that such a tree can be described in XML or SGML, but
   also in other notations and that it is the definition of that notation,
   not CSS, that determines the equivalence between the abstract tree and the
   concrete notation. E.g., SGML often allows white space to be added between
   elements for readability, which does not result in a string of spaces in
   the abstract tree.

  <p>CSS describes how each element and each string of text is laid out by
   transforming the document tree into a set of rectangular boxes, whose
   size, position, and stacking level on the <a
   href="#canvas"><em>canvas</em></a> depend on their properties. We say that
   an element <dfn id=generates title="generated box">generates</dfn> one or
   more boxes. There are numerous different types of boxes. <span
   class=issue>[Or maybe only one? I.e., a block-level box is just a normal
   box that happens to be generated by a block-level element?]</span> A block
   box is like a paragraph; a line box is like a single line of text; and
   inline boxes are like words inside a line.

  <div class=issue>
   <p>Define the <dfn id=box-tree. title="box tree|tree!!of boxes">box
    tree.</dfn> (Is the space between words a kind of box as well, or a
    spacer item? Is the current selection a box? Is there a defined order
    among sibling boxes? If so, are bidi inline boxes ordered in reading
    order or in visual order?)

   <p>[Define the box tree before pagination and then describe how pagination
    can break one box into two?] <!--
<ul>
<li>If the parent element is a list item, the boxes go into the
parent's block box, not the marker box.

<li>If the element is run-in, its boxes go either into a box of its
parent element, or into a box of a later sibling.

<li>The order of sibling boxes is always such that boxes that belong
to elements earlier in the document come before boxes of elements that
come later in the document.

<li>Note that 'position' can put a box into the box of an ancestor
(the one establishing the containing block) rather than a parent.

<li>Note that 'flow' puts boxes into a named flow root.
</ul>
-->
  </div>

  <p>When the specification says a box <var>A</var> <dfn
   id=contains>contains</dfn> a box <var>B</var> it means <var>B</var> is a
   child of <var>A</var> in the <a href="#box-tree."><em>box tree.</em></a>
   Typically, box <var>B</var> is geometrically contained within box
   <var>A</var> as well, but that need not be the case, because of, e.g.,
   overflow or negative margins.

  <p class=note>Note: The precise rules are below and in other modules, but
   in summary, <span class=issue>[write something that helps convey the idea
   of a flow, e.g.:]</span> a block-level box contains either other
   block-level boxes (e.g., a section containing paragraphs, or a table
   containing rows), or it contains line boxes (e.g., a paragraph containing
   lines of text). A line box contains inline-level boxes (e.g., a line with
   words in different styles). An inline-level box may contain either text
   interspersed with more inline-level boxes, or it may contain a block-level
   box (e.g., a small table that is rendered inline).

  <div class=figure>
   <p><img
    alt="Each generated box in the rendering   has a link to the element that generated it."
    src=box-intro.png>

   <p class=caption>Relation between four displayed boxes in the rendered
    document (on the right) and the three corresponding elements in the
    source document on the (left).
  </div>

  <div class=example>
   <p>For example, a fragment of HTML such as

   <pre>&lt;ul&gt;
 &lt;li&gt;The first item in the list.
 &lt;li&gt;The second item.
&lt;/ul&gt;</pre>

   <p>may result in <span class=issue>[rewrite the following
    sentence?]</span> one block-level box for the <code>ul</code> element,
    containing two block-level boxes for the two <code>li</code> elements,
    each of which has one line box (i.e., one line of text). Both line boxes
    contain two inline-level boxes: one that contains the list bullet and one
    that contains the text.

   <p>Note how the <code>li</code> is transformed into multiple boxes,
    including one that contains “generated content,” viz., the list
    bullet, which is not present in the source document.

   <p>If the document is rendered in a narrow window, it may be that the
    <code>li</code> elements get transformed into even more boxes, because
    the text requires multiple lines. And if the document is rendered on
    paper or in multiple columns, it may be that a page break falls in the
    middle of the <code>ul</code> element, so that it is not transformed into
    a single block-level box, but into two smaller ones, each on a different
    page or column.
  </div>

  <p>Each box belongs to exactly one element. It is either <a
   href="#generates" title="generated box">generated</a> directly by the
   element, or it is an <a href="#anonymous-box"><em>anonymous box,</em></a>
   which has been inserted to ensure that every box and its parent are of
   mutually compatible types as defined by the layout rules of CSS. An
   anonymous box is defined to belong to whichever element generates the
   box's closest element-generated ancestor box. When we need to be precise,
   we say that the anonymous box is <dfn id=induced>induced,</dfn> rather
   than generated, by the element it belongs to.

  <p class=note>For example, an anonymous table wrapper box that is created
   around a table cell because the table cell element doesn't have a table
   element as parent, belongs to the parent element of the table cell, not to
   the table cell itself.

  <p class=note>An anonymous box is never a <em>principal</em> box. Except
   for that, an anonymous box cannot be distinguished by its property values
   and characteristics from a box generated by some hypothetical document
   element. <span class=issue>Remove this note? Do we actually use the
   concept of “principal box” anywhere?</span>

  <p>Properties are set on elements <a href="#ref-CSS3CASCADE"
   rel=biblioentry>[CSS3CASCADE]<!--{{!CSS3CASCADE}}--></a> and influence how
   the element is turned into boxes. Every box has the same properties with
   the same values as the element to which it belongs, except for anonymous
   boxes: inheritable properties on anonymous boxes have the same value as
   the element, while non-inheritable properties have the initial value. The
   only property that boxes do not have is the ‘<a href="#display0"><code
   class=property>display</code></a>’ property. <span class=issue>[Is this
   useful? Or is it better to say that boxes are just rectangles with a
   border, a background, a position, a bunch of other boxes inside, and a
   reference to the element they belong to? They don't really have properties
   then and it is only a convenience to say the “the box has a font
   <var>X.</var>”</span>

  <p>Boxes do not have specified values <a href="#ref-CSS3CASCADE"
   rel=biblioentry>[CSS3CASCADE]<!--{{!CSS3CASCADE}}--></a>, but they do have
   computed, used and actual values.

  <p class=note>Boxes are frequently referred to by their property values.
   For example, a “floated box” is a box whose computed value of ‘<a
   href="#float"><code class=property>float</code></a>’ is not ‘<code
   class=css>none</code>’, and a “positioned box” is a box whose
   computed value of ‘<code class=property>position</code>’ is not
   ‘<code class=css>static</code>’. However, terms such as
   <em>block-level box,</em> <a href="#block-container-box"><em>block
   container box</em></a> and <em>table box</em> describe characteristics
   which cannot be deduced solely from a box's property values.

  <div class=figure id=various>
   <p><img
    alt="Diagram of a typical box, showing the   content, padding, border and margin areas"
    src=box.png>

   <p class=caption>The various areas and edges of a typical box
  </div>

  <p>Boxes have padding, a border and margins (see the <a
   href="#various">figure</a>). Different properties determine the thickness
   of each of these (which may be zero). The margins of adjacent boxes are
   also subject to <a href="#collapse."><em
   title=collapse>collapsing</em></a> (i.e., the actual margin between
   adjacent boxes may be less than the sum of the boxes' individual margins).

  <p>Each box has a <dfn id=content-area>content area</dfn> (a.k.a. <dfn
   id=content-box>content box</dfn>). The rectangle that bounds this area is
   the <dfn id=content-edge.>content edge.</dfn> Around the content area is
   the <dfn id=padding-area>padding area</dfn> and its outside bounds are
   called the <dfn id=padding-edge.>padding edge.</dfn> The padding area and
   content area together form the <dfn id=padding-box.>padding box.</dfn>
   Outside the padding is the <dfn id=border-area>border area</dfn> and the
   outside boundary of that area is the <dfn id=border-edge.>border
   edge.</dfn> The border area, padding area and content area together form
   the <dfn id=border-box.>border box.</dfn> Finally, outside the border is
   the <dfn id=margin-area>margin area</dfn> and its outer edge is the <dfn
   id=margin-edge.>margin edge.</dfn>

  <p>When the specification says that the padding or border is <dfn id=absent
   title="absent|padding!!absent|border!!absent">“absent”</dfn> on some
   side of the box, that means that its thickness is zero.

  <p><a href="#line-box."><em title="line box">Line boxes</em></a> cannot
   have any padding, border or margin, and therefore their margin edge,
   border edge, padding edge and content edge all coincide.

  <p class=note>Note that the margin, unlike the border and padding, may have
   a negative thickness. That is one way to make adjacent boxes overlap each
   other.

  <p class=note>Note that the edges always form rectangles, even if there is
   a ‘<code class=property>border-radius</code>’ <a href="#ref-CSS3BG"
   rel=biblioentry>[CSS3BG]<!--{{CSS3BG}}--></a> or a shape <a
   href="#ref-CSS3-EXCLUSIONS"
   rel=biblioentry>[CSS3-EXCLUSIONS]<!--{{CSS3-EXCLUSIONS}}--></a>.

  <p>We say that a box or element is <dfn id=horizontal>horizontal</dfn> if
   its ‘<a href="#writing-mode"><code
   class=property>writing-mode</code></a>’ property is ‘<code
   class=css>horizontal-tb</code>’, otherwise it is <dfn
   id=vertical.>vertical.</dfn>

  <div class=note>
   <p>Note that there are theoretically eight possible orientations for text,
    but CSS only defines six:

   <table class=equiv-table style="table-layout: fixed; width: 100%">
    <thead>
     <tr>
      <th>

      <th>‘<code class=css>writing-mode: horizontal-tb</code>’

      <th>‘<code class=css>writing-mode: vertical-rl</code>’

      <th>‘<code class=css>writing-mode: vertical-lr</code>’

    <tbody>
     <tr>
      <th>‘<code class=css>direction: ltr</code>’

      <td>
       <p>Text is written from left to right and paragraphs grow downwards

       <p><img alt="" class=small src=horizontal.png>

      <td>
       <p>Text is written top to bottom and paragraphs grow to the left

       <p><img alt="" class=small src=vertical.png>

      <td>
       <p>Text is written top to bottom and paragraphs grow to the right

       <p><img alt="" class=small src=vertical-lr.png>

     <tr>
      <th>‘<code class=css>direction: rtl</code>’

      <td>
       <p>Text is written from right to left and paragraphs grow downwards

       <p><img alt="" class=small src=horizontal-rtl.png>

      <td>
       <p>Text is written bottom to top and paragraphs grow to the left

       <p><img alt="" class=small src=vertical-rtl.png>

      <td>
       <p>Text is written bottom to top and paragraphs grow to the right

       <p><img alt="" class=small src=vertical-lr-rtl.png>
   </table>

   <p>There is no “horizontal-bt.” More information about ‘<a
    href="#writing-mode"><code class=property>writing-mode</code></a>’ and
    ‘<a href="#direction"><code class=property>direction</code></a>’ can
    be found in <a href="#ref-CSS3-WRITING-MODES"
    rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>.
  </div>

  <p class=mtb>Calculations of the size and position of boxes are usually
   very similar for horizontal and vertical boxes, except that the horizontal
   and vertical directions are interchanged. To avoid many almost identical
   definitions, this specification therefore often uses abstract terms
   instead of top, right, bottom, left, width and height: four terms (head
   edge, foot edge, start edge and end edge) for the four edges of a box,
   four terms (A edge, B edge, C edge and D edge) for the edges of the
   children of a box and two terms (block dimension and inline dimension) for
   the width and height of a box.

  <p class=issue>The names head and foot are under discussion. There is an
   issue in <a href="#ref-CSS3-WRITING-MODES"
   rel=biblioentry>[CSS3-WRITING-MODES]<!--{{!CSS3-WRITING-MODES}}--></a>
   that suggests some possible names: “head,” “before,”
   “before-block,” “foot,” “tail,” “after” and
   “after-block.”

  <p>The <dfn id=head>head,</dfn> <dfn id=foot>foot,</dfn> <dfn
   id=start>start</dfn> and <dfn id=end>end</dfn> edge of a box refer to the
   top, right, bottom and left edges, depending on the ‘<a
   href="#writing-mode"><code class=property>writing-mode</code></a>’ and
   ‘<a href="#direction"><code class=property>direction</code></a>’
   properties of that box, as follows:

  <table class=equiv-table>
   <thead>
    <tr>
     <th rowspan=2>Value of<br>
      ‘<a href="#writing-mode"><code
      class=property>writing-mode</code></a>’

     <th rowspan=2>Value of<br>
      ‘<a href="#direction"><code class=property>direction</code></a>’

     <th colspan=4>Meaning of…

     <th rowspan=2>

    <tr>
     <th>“head”

     <th>“end”

     <th>“foot”

     <th>“start”

   <tbody>
    <tr>
     <th rowspan=2>‘<code class=css>horizontal-tb</code>’

     <th>‘<code class=css>ltr</code>’

     <td>top

     <td>right

     <td>bottom

     <td>left

     <td><img alt="" class=minidiagram src=box-tb-ltr.svg>

    <tr><!-- horizontal-tb -->

     <th>‘<code class=css>rtl</code>’

     <td>top

     <td>left

     <td>bottom

     <td>right

     <td><img alt="" class=minidiagram src=box-tb-rtl.svg>

    <tr>
     <th rowspan=2>‘<code class=css>vertical-rl</code>’

     <th>‘<code class=css>ltr</code>’

     <td>right

     <td>bottom

     <td>left

     <td>top

     <td><img alt="" class=minidiagram src=box-rl-ltr.svg>

    <tr><!-- vertical-rl'' -->

     <th>‘<code class=css>rtl</code>’

     <td>right

     <td>top

     <td>left

     <td>bottom

     <td><img alt="" class=minidiagram src=box-rl-rtl.svg>

    <tr>
     <th rowspan=2>‘<code class=css>vertical-lr</code>’

     <th>‘<code class=css>ltr</code>’

     <td>left

     <td>bottom

     <td>right

     <td>top

     <td><img alt="" class=minidiagram src=box-lr-ltr.svg>

    <tr><!-- vertical-lr -->

     <th>‘<code class=css>rtl</code>’

     <td>left

     <td>top

     <td>right

     <td>bottom

     <td><img alt="" class=minidiagram src=box-lr-rtl.svg>
  </table>

  <p class=note>For example, the “head padding” by default refers to the
   ‘<a href="#padding-top"><code class=property>padding-top</code></a>’
   and the “end border” is by default the ‘<code
   class=property>border-right</code>’.

  <p>Similarly, the specification sometimes refers to the <dfn
   id=inline-dimension>inline dimension</dfn> and <dfn
   id=block-dimension>block dimension</dfn> of a box, instead of width and
   height, as follows:

  <table class=equiv-table>
   <tbody>
    <tr>
     <th>‘<code class=css>Writing mode</code>’

     <th>Meaning of “inline dimension”

     <th>Meaning of “block dimension”

    <tr>
     <td>‘<code class=css>horizontal-tb</code>’

     <td>width

     <td>height

    <tr>
     <td>‘<code class=css>vertical-rl</code>’

     <td>height

     <td>width

    <tr>
     <td>‘<code class=css>vertical-lr</code>’

     <td>height

     <td>width
  </table>

  <p>These correspond to the dimensions in the <a
   href="#inline-base-direction."><em>inline base direction</em></a> and the
   <a href="#block-flow-direction"><em>block flow direction,</em></a>
   respectively.

  <p>An alternative term for the inline dimension is <dfn id=logical-width
   title="logical width|width!!logical">logical width</dfn> and an
   alternative term for block dimension is <dfn id=logical-height.
   title="logical height|height!!logical">logical height.</dfn> These terms
   occasionally occur in other CSS modules.

  <p class=note>The block dimension of a box is thus the distance between the
   head and foot edges, while the inline dimension of the box is the distance
   between the start and end edges.

  <p>When boxes are laid out in sequence to form a <a href="#flow"><em
   class=index id=flow0>flow</em></a> (see below), their edges play different
   roles in the alignment of the boxes within that flow. The orientation of
   the flow determines which edge of a box is aligned to which edge of
   another box. These roles are independent of the orientation of the box
   itself. We distinguish four roles for the edges of a box, called <dfn
   id=a-edge>A edge,</dfn> <dfn id=b-edge>B edge,</dfn> <dfn id=c-edge>C
   edge</dfn> and <dfn id=d-edge.>D edge.</dfn> They depend on the ‘<a
   href="#writing-mode"><code class=property>writing-mode</code></a>’ and
   ‘<a href="#direction"><code class=property>direction</code></a>’
   properties of the box's <a href="#containing-block"><em class=index
   id=containing-block0>containing block</em></a> (defined below), and map to
   the four sides as follows:

  <table class=equiv-table>
   <thead>
    <tr>
     <th rowspan=2>‘<a href="#writing-mode"><code
      class=property>writing-mode</code></a>’ of<br>
      <a href="#containing-block"><em>containing block</em></a>

     <th rowspan=2>‘<a href="#direction"><code
      class=property>direction</code></a>’ of<br>
      <a href="#containing-block"><em>containing block</em></a>

     <th colspan=4>Meaning of…

    <tr>
     <th>“A”

     <th>“B”

     <th>“C”

     <th>“D”

   <tbody>
    <tr>
     <th rowspan=2>‘<code class=css>horizontal-tb</code>’

     <th>‘<code class=css>ltr</code>’

     <td>top

     <td>right

     <td>bottom

     <td>left

    <tr><!-- horizontal-tb -->

     <th>‘<code class=css>rtl</code>’

     <td>top

     <td>left

     <td>bottom

     <td>right

    <tr>
     <th rowspan=2>‘<code class=css>vertical-rl</code>’

     <th>‘<code class=css>ltr</code>’

     <td>right

     <td>bottom

     <td>left

     <td>top

    <tr><!-- vertical-rl -->

     <th>‘<code class=css>rtl</code>’

     <td>right

     <td>top

     <td>left

     <td>bottom

    <tr>
     <th rowspan=2>‘<code class=css>vertical-lr</code>’

     <th>‘<code class=css>rtl</code>’

     <td>left

     <td>bottom

     <td>right

     <td>top

    <tr><!-- vertical-lr -->

     <th>‘<code class=css>ltr</code>’

     <td>left

     <td>top

     <td>right

     <td>bottom
  </table>

  <p class=note>For example, block-level boxes in a flow are laid out such
   that the A edge of the first box is against the head edge of the
   containing block and then the A edge of each subsequent box is put against
   the C edge of its predecessor. For typical English text (i.e., <a
   href="#horizontal"><em>horizontal</em></a> text), this means the top edge
   (= A edge) of the first paragraph is at the top edge (= head edge) of the
   document, the top (A edge) of the second paragraph is against the bottom
   (C edge) of the first paragraph, and so on, until the bottom (C edge) of
   the last paragraph becomes the bottom (foot edge) of the document.

  <h2 id=the-viewport-and-the-canvas><span class=secno>4. </span>The viewport
   and the canvas</h2>

  <p>User agents for continuous media generally offer users a <dfn
   id=viewport>viewport</dfn> (a window or other viewing area on the screen)
   through which users consult a document. User agents may change the
   document's layout when the viewport is resized (see the <a
   href="#initial-containing-block."><em>initial containing block</em></a>).

  <p>When the viewport is smaller than the area of the <a
   href="#canvas"><em>canvas</em></a> (see below) on which the document is
   rendered, the user agent should offer a scrolling mechanism. There is at
   most one viewport per canvas, but user agents may render to more than one
   canvas (i.e., provide different views of the same document).

  <p>For all media, the term <dfn id=canvas>canvas</dfn> describes the space
   where the formatting structure is rendered. The canvas is infinite for
   each dimension of the space.

  <h2 id=flows><span class=secno>5. </span>Flows</h2>

  <p>The <dfn id=flow>flow</dfn> (sometimes called <dfn id=normal-flow>normal
   flow</dfn>) is one of the two basic kinds of layout in CSS, together with
   line layout <a href="#ref-CSS3LINE"
   rel=biblioentry>[CSS3LINE]<!--{{CSS3LINE}}--></a>. It can be used, e.g.,
   to layout a sequence of paragraphs, headings, lists and floated elements
   in a single column. Other CSS modules, such as tables <a
   href="#ref-CSS3TBL" rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>,
   positioning <a href="#ref-CSS3POS"
   rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>, flex boxes <a
   href="#ref-CSS3-FLEXBOX"
   rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a> and grid
   templates <a href="#ref-CSS3LAYOUT"
   rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>, build on the flow
   model by defining ways to split a document into more than one flow and
   positioning and aligning those flows in various ways on the canvas.

  <p>A flow is constructed starting from a <span class=index id=box
   title="flow root!!box">box</span> called the <dfn id=flow-root>flow
   root</dfn> by the <a href="#construct-flow">rules below.</a> We say the
   flow is <dfn id=channeled>channeled</dfn> by the flow root.

  <p class=issue>Are there more intuitive names than flow root?

  <p>The <dfn id=initial-flow title="initial flow|flow!!initial">initial
   flow</dfn> is the flow that contains the root of the box tree.

  <p>Despite not being a box, the <a
   href="#initial-containing-block."><em>initial containing block</em></a> is
   said to be the flow root of the initial flow.

  <p class=issue id=pagination-issue>How do we model pagination? If a flow is
   broken over two pages or columns, do we call it a single flow or two
   flows? I.e., is the page box the flow root of the flow, or is the page box
   something else, more like the viewport, which influences the layout of a
   flow but isn't part of it?

  <p>Only <a href="#block-container-box"><em
   title="block container box">block container boxes</em></a> (defined below)
   can be flow roots. (Which implies that the children of a flow root are
   laid out in a <a href="#block-formatting-context"><em>block formatting
   context.</em></a>)

  <p>Several (combinations of) properties cause an element to generate boxes
   that are flow roots. This module defines a few. Other modules may define
   more.

  <div class=note>
   <p>For example, this module defines that any of the following make a box
    into a flow root:

   <ul>
    <li>The value of ‘<a href="#float"><code
     class=property>float</code></a>’ is not ‘<code
     class=property>none</code>’.

    <li>The used value of ‘<a href="#overflow1"><code
     class=property>overflow</code></a>’ is not ‘<code
     class=property>visible</code>’.
     <!-- <li>The box is a table wrapper, a table cell, an inline block, or an
  align box. -->
     <!-- <li>The value of 'position' is 'absolute' or 'fixed' (see
  [CSS3POS]). -->

    <li>The box is vertical and its parent is horizontal. <span
     class=issue>[Add link to the relevant section.]</span>

    <li>The box is horizontal and its parent is vertical.
     <!-- <li>The value of 'transform' is not 'none'. -->

    <li>The value of ‘<a href="#child-align"><code
     class=property>child-align</code></a>’ is not ‘<code
     class=property>auto</code>’. <span class=issue>[If ‘<a
     href="#child-align"><code class=property>child-align</code></a>’ is
     adopted, rather than, say, ‘<code class=css>margin:
     fill</code>’]</span>
   </ul>

   <p>The table layout module <a href="#ref-CSS3TBL"
    rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a> defines that a table cell
    generates a box that is a flow root; the positioning module <a
    href="#ref-CSS3POS" rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>
    defines that an absolutely positioned element generates a flow root; the
    grid template module <a href="#ref-CSS3LAYOUT"
    rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a> defines that a
    template element generate several flow roots; and the transforms module
    <a href="#ref-CSS3-TRANSFORMS"
    rel=biblioentry>[CSS3-TRANSFORMS]<!--{{CSS3-TRANSFORMS}}--></a> defines
    that an element with a transform generates a flow root
  </div>

  <p class=mtb id=construct-flow>The flow of a given <a
   href="#flow-root"><em>flow root</em></a> is a set of boxes. A box belongs
   to the flow if all of the following are true:

  <ol>
   <li>The used value of its ‘<a href="#display0"><code
    class=property>display</code></a>’ is ‘<code
    class=css>block</code>’, ‘<code class=css>list-item</code>’ or
    ‘<code class=css>table</code>’.

   <li>The used value of its ‘<a href="#float"><code
    class=property>float</code></a>’ is ‘<code class=css>none</code>’.

   <li>The used value of its ‘<code class=property>position</code>’ is
    ‘<code class=css>static</code>’ or ‘<code
    class=css>relative</code>’.

   <li>It is either a child of the flow root or a child of a box that belongs
    to the flow.
  </ol>

  <p class=note>Note that the flow root is itself not part of the flow it
   channels and that each flow root channels at most one flow.

  <p class=note>Note that the last rule above implies that a flow with its
   flow root together are always a connected subset of the box tree. In other
   words; together, they form a subtree of the box tree with possibly some
   branches removed.

  <p class=note>Note that the element tree and the box tree are not
   necessarily parallel: the element a box belongs to need not be the child
   of the element that generated the box's parent. E.g., run-in elements may
   generate boxes that become children of boxes from sibling elements; and
   the ‘<a href="#flow"><code class=property>flow</code></a>’ property <a
   href="#ref-CSS3LAYOUT"
   rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a> and the ‘<code
   class=property>position</code>’ property <a href="#ref-CSS3POS"
   rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a> may cause an element to
   generate a box that becomes the child of a box from a grandparent or other
   ancestor element. E.g., ‘<code class=css>DIV {flow: b}</code>’ (see <a
   href="#ref-CSS3LAYOUT"
   rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>) makes the DIV
   generate boxes that become children of the box generated by slot b in some
   ancestor. And ‘<code class=css>DIV {position: absolute}</code>’ causes
   the DIV to generate a box that becomes a child of the box generated by the
   ancestor that established the DIV's <a
   href="#containing-block"><em>containing block.</em></a>

  <div class=example>
   <p>For example, the fragment

   <pre>&lt;div class=sidebar&gt;
 &lt;p&gt;Text in a sidebar.
 &lt;p&gt;Here is quote:
 &lt;blockquote lang=ja&gt;
  &lt;p&gt;...
 &lt;/blockquote&gt;
 &lt;p&gt;Etc. etc.
&lt;/div&gt; </pre>

   <p>with the style

   <pre>div.sidebar { writing-mode: tb; float: left }
blockquote[lang|=ja] { writing-mode: rl; height: 10em }</pre>

   <p>defines two flows:

   <ol>
    <li>The <code>div</code> is a flow root, because it floats. Its flow
     consist of the 1st, 2nd and 4th <code>p</code> and the
     <code>blockquote</code>.

    <li>The <code>blockquote</code> is a <a
     href="#vertical."><em>vertical</em></a> box inside a <a
     href="#horizontal"><em>horizontal</em></a> parent and it is thus a flow
     root. Its flow is formed by the 3rd <code>p</code>.
   </ol>

   <p>(The <code>div</code> itself belongs to a third flow, but its flow root
    is not shown in the fragment.)
  </div>

  <p class=note>Note that a flow root is not necessarily block-level, it may
   be an ‘<code class=css>inline-block</code>’, e.g.

  <p class=note>Note that a box belongs to at most one flow. (Some boxes do
   not belong to any flow, because they are part of a different kind of
   layout, such as table layout.)

  <p>An element that generates a flow root box is itself also called a <span
   class=index id=flow-root. title="flow root!!element">flow root.</span>

  <p class=note>Note: The terminology in the CSS level 2 specification is
   different. A flow root is called “an element that establishes a <span
   class=index id=new-formatting-context.
   title="formatting context|new formatting context">new formatting
   context.</span>”

  <p class=note>A consequence of this terminology is that an <a
   href="#elements."><em>element,</em></a> unlike a box, can be the flow root
   of several flows. E.g., template elements <a href="#ref-CSS3LAYOUT"
   rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a> generate several
   flow root boxes. Depending on what properties are set on a list item and
   on its marker pseudo-element, a list item can also generate zero, one or
   two flow roots. <!--
<p class=mtb>The following rules define the position of
<em>block-level</em> boxes relative to the box that is their <em>flow
root.</em> Other sections and other modules describe how other boxes
are laid out. E.g., floating boxes are described further down in this
module and absolutely positioned boxes are described in the Absolute
Positioning module [[CSS3POS]].

<p>Before applying these rules, the width, height and margins of each
box must be computed as described in the sections <a
href="#Calculating">“Calculating widths, heights and margins”</a>
and <a href="#Collapsing">“Collapsing margins.”</a>

<ul>
  <li>
    <p>Consider the first box (in document order) of a set of sibling
    boxes that all belong to the same flow. There are four cases:
    <ol>
      <li>
        <p>If none of its margins <span>collapse</span> with its
        parent's <span>head</span> margin and the box is not
        <span>collapsed through,</span> then the box is placed such
        that the box's margin <span>A edge</span> coincides with the
        parent's <span>head</span> <span>content edge</span>, the
        margin <span>D edge</span> touches the parent's
        <span>start</span> <span>content edge</span> and the margin
        <span>B edge</span> touches the parent's <span>end</span>
        <span>content edge.</span>

	<div class=figure>
	  <p><img src="flow1.png" alt="For example:">

	  <p class=caption>In a <em>horizontal</em> <em>containing
	  block,</em> the top edge (<em>head</em> edge) is used to
	  position the top edge (<em>A edge</em>) of the first
	  block-level box. Its left and right edges coincide with the
	  left and right edges of the block-level box.
	</div>

      <li>
        <p>If none of its margins <span>collapse</span> with its
        parent's <span>head</span> margin but the box
        is <span>collapsed through,</span> then its <span>content
        edge</span> (which is also its <span>border edge</span>
        and <span>padding edge</span>) is defined as what it would
        have been if the box had a non-zero <span>footside</span>
        border. (I.e., recompute the margins given that border and
        then apply the previous rule.)

        <p class=note>Note that the box is effectively invisible, but
        the edges have to be defined to position any descendants, such
        as floating or absolutely positioned children.

      <li>
        <p>If its <span title="A edge">A</span> margin collapses with
        its parent's <span>head</span> margin, then the box is placed
        such that the <span>A edge</span> of the box's border touches
        the parent's <span>head</span> <span>content edge,</span> the
        <span>D edge</span> of the box's margin touches the parent's
        <span>start</span> <span>content edge</span> and the <span>B
        edge</span> of the box's margin touches the parent's
        <span>end</span> <span>content edge.</span>

        <p class=issue>[Add illustration.]

      <li>
        <p>If two of its margins collapse with its parent's
        <span>head</span> margin, then its position is such that its
        <span>content edge</span> (which is also its <span>border
        edge</span>) touches its parent's <span>head</span>
        <span>border edge</span> and that the <span>D edge</span> of
        its margin touches its parent's <span>start</span>
        <span>content edge</span> and the <span>B edge</span> of its
        margin touches the parent's <span>end</span> <span>content
        edge.</span>

        <p class=note>Note that the box is effectively invisible, but
        the edges have to be defined to position any descendants.
    </ol>

  <li>
    <p>For a box that has a preceding sibling in the same flow there
    are two cases:
    <ol>
      <li>
        <p>If the box is not <span>collapsed through,</span> it is
        positioned such that the <span>D edge</span> of its margin
        touches the parent's <span>start</span> <span>content
        edge,</span> the <span>B edge</span> of its margin touches the
        parent's <span>end</span> <span>content edge</span> and the
        <span>A edge</span> of its border box is at a distance from
        the <span>C edge</span> of the preceding sibling's border box
        equal to the combined thickness of the margins that collapse
        at that edge.

    <li>
      <p>A box that has a preceding sibling in the same flow and that
      is <span>collapsed
      through,</span> <span class=issue>[...]</span>
  </ol>
</ul>
-->

  <h2 id=types-of-boxes><span class=secno>6. </span>Types of boxes</h2>

  <p>The layout of boxes in the flow is in large part determined by the
   interplay of the ‘<a href="#display0"><code
   class=property>display</code></a>’ properties of an element and its
   parent, and then fine-tuned with margins and padding.

  <h3 id=display><span class=secno>6.1. </span>The display property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=display0>display</dfn>

    <tr>
     <th>Value:

     <td>inline | block | inline-block | list-item | run-in | compact | table
      | inline-table | table-row-group | table-header-group |
      table-footer-group | table-row | table-column-group | table-column |
      table-cell | table-caption | ruby | ruby-base | ruby-text |
      ruby-base-group | ruby-text-group | container | flex | inline-flex |
      none

    <tr>
     <th>Initial:

     <td>inline

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual (‘<code class=css>none</code>’ applies to all media)

    <tr>
     <th>Computed value:

     <td>specified value, except for floats, root elements and positioned
      elements; see text

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p class=issue>There is an old proposal to split ‘<a
   href="#display0"><code class=property>display</code></a>’ into
   display-role (the function of the element in its parent) and display-model
   (how the element lays out it children). That allows some combinations that
   have no keyword, such as a table cell (‘<code class=css>display-role:
   table-cell</code>’) that is itself a table (‘<code
   class=css>display-model: table</code>’), without the need for an extra
   wrapper element. It allows certain things (for math layout, e.g.), but is
   not easy to use. An alternative proposal is an ‘<code
   class=css>::outside</code>’ pseudo-element to create an extra box on
   which to set a different ‘<a href="#display0"><code
   class=property>display</code></a>’ value. That is not easy either, and
   doesn't cascade well. And a third proposal is to allow two values on ‘<a
   href="#display0"><code class=property>display</code></a>’: if there are
   two (in any order), one is the role and the other the model, unless the
   pair makes no sense. That doesn't make the concept any easier, but it
   hides the complexity better.

  <p>This property, in combination with ‘<a href="#float"><code
   class=property>float</code></a>’ and ‘<code
   class=property>position</code>’, determines the type of box or boxes
   that are generated for an element. The values are as follows:

  <dl>
   <dt>inline

   <dd>One or more <a href="#inline-level"><em>inline-level,</em></a>
    <em>inline container</em> boxes. (There may be more than one, e.g., if
    the element is broken over two lines or if bidi reordering causes some of
    the text in the content to be displayed after the text of some other
    element.)

   <dt>block

   <dd>One or more <a href="#block-level"><em>block-level,</em></a> <em>block
    container</em> boxes. (There may be more than one box, e.g., if the
    element is broken over two columns or pages.)

   <dt>inline-block

   <dd>An <em>atomic,</em> <a href="#inline-level"><em>inline-level,</em></a>
    <em>block container</em> box. (In other words: the inside of an
    inline-block is formatted as a block box, and the box itself is formatted
    as an inline box.) The box is a <a href="#flow-root"><em>flow
    root.</em></a>

   <dt>list-item

   <dd>One or more <a href="#block-level"><em>block-level,</em></a> <em>block
    container</em> boxes and an optional marker box. Marker boxes are defined
    in the Lists module <a href="#ref-CSS3LIST"
    rel=biblioentry>[CSS3LIST]<!--{{CSS3LIST}}--></a>. <span class=issue>If
    the Lists module is not ready, define the position of the marker and the
    list-style property here? Or refer to CSS 2.1 instead?</span>

   <dt>run-in

   <dd>Either one or more <a href="#block-level"><em>block-level,</em></a>
    <em>block container</em> boxes, or one or more <a
    href="#inline-level"><em>inline-level,</em></a> <em>inline container</em>
    boxes, depending on context (see <a href="#run-in-boxes">Run-in
    boxes</a>). Properties apply to run-in boxes based on their final status
    (<a href="#inline-level">inline-level</a> or <a
    href="#block-level">block-level</a>).

   <dt>compact

   <dd>Either one or more <a href="#block-level"><em>block-level,</em></a>
    <em>block container</em> boxes or a single marker box, depending on
    context (see <a href="#compact-boxes">Compact boxes</a>). Properties
    apply to compact boxes based on their final status.

   <dt>table, inline-table, table-row-group, table-header-group,
    table-footer-group, table-row, table-column-group, table-column,
    table-cell, table-caption

   <dd>See the Tables module <a href="#ref-CSS3TBL"
    rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>.

   <dt>ruby

   <dt>ruby-base

   <dt>ruby-text

   <dt>ruby-base-group

   <dt>ruby-text-group

   <dd>See the Ruby module <a href="#ref-CSS3RUBY"
    rel=biblioentry>[CSS3RUBY]<!--{{CSS3RUBY}}--></a>.

   <dt>container <span class=issue>or align-box?</span>

   <dd>Like ‘<code class=css>block</code>’, but forces the element to be
    a <a href="#flow-root"><em>flow root,</em></a>, which, e.g., stops its
    margins from collapsing with margins of child elements and includes
    floating children in its height. <span class=issue>[C.f. the <a
    href="#contain-floats">discussion of how to force an element to contain
    floats.</a>]</span>

   <dt>flex

   <dt>inline-flex

   <dd>See the Flexible Box Layout Module <a href="#ref-CSS3-FLEXBOX"
    rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>.

   <dt>none

   <dd>This value causes an element to not appear in the formatting structure
    (i.e., in visual media, the element generates no boxes and has no effect
    on layout). Descendant elements do not generate any boxes either; the
    element and its content are removed from the formatting structure
    entirely. This behavior <strong>cannot</strong> be overridden by setting
    the ‘<a href="#display0"><code class=property>display</code></a>’
    property on the descendants.
  </dl>

  <p class=note>Note that ‘<code class=css>none</code>’ does not create
   an invisible box; it creates no box at all. See ‘<a
   href="#visibility"><code class=property>visibility</code></a>’ for a
   mechanisms that enables an element to generate boxes that affect
   formatting but are not visible themselves.

  <p>The computed value of ‘<a href="#display0"><code
   class=property>display</code></a>’ depends on ‘<code
   class=property>position</code>’ <a href="#ref-CSS3POS"
   rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>, ‘<a href="#float"><code
   class=property>float</code></a>’ and ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’:

  <ol>
   <li>If the specified value of ‘<a href="#display0"><code
    class=property>display</code></a>’ is ‘<code
    class=css>none</code>’, then the computed value is ‘<code
    class=css>none</code>’ (and ‘<a href="#overflow1"><code
    class=property>overflow</code></a>’, ‘<a href="#float"><code
    class=property>float</code></a>’ and ‘<code
    class=property>position</code>’ do not apply).

   <li>Otherwise, if ‘<code class=property>position</code>’ is ‘<code
    class=css>absolute</code>’ or ‘<code class=css>fixed</code>’, or if
    ‘<a href="#float"><code class=property>float</code></a>’ is not
    ‘<code class=css>none</code>’, or if ‘<a href="#overflow1"><code
    class=property>overflow</code></a>’ is not ‘<code
    class=css>visible</code>’, or if the element is the root element, then
    the computed value of ‘<a href="#display0"><code
    class=property>display</code></a>’ is set according to the following
    table:
    <table class=equiv-table>
     <thead>
      <tr>
       <th>Specified value

       <th>Computed value

     <tbody>
      <tr>
       <td>inline-table

       <td>table

      <tr>
       <td>inline, run-in, table-row-group, table-column, table-column-group,
        table-header-group, table-footer-group, table-row, table-cell,
        table-caption, inline-block

       <td>block

      <tr>
       <td>others

       <td>same as specified
    </table>

   <li>Otherwise, the computed value of ‘<a href="#display0"><code
    class=property>display</code></a>’ is the same as the specified value.
  </ol>

  <h3 id=block-level-boxes-containing-blocks-flow><span class=secno>6.2.
   </span>Block-level boxes, containing blocks, flows and anonymous boxes</h3>

  <p class=issue>Split this section. Put the definition of containing block
   in its own section and move it to right after the <a
   href="#flows">Flows</a> section above.

  <p>A <dfn id=block-level>block-level</dfn> box is a box that has a <a
   href="#computed-value">computed value</a> for ‘<a href="#display0"><code
   class=property>display</code></a>’ of ‘<code
   class=css>block</code>’, ‘<code class=css>container</code>’,
   ‘<code class=css>list-item</code>’, ‘<code
   class=css>table</code>’, ‘<code class=css>table-*</code>’ (i.e., all
   table boxes, see <a href="#ref-CSS3TBL"
   rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>), ‘<code
   class=css>run-in</code>’ (under certain circumstances, see <a
   href="#run-in-boxes">“Run-in boxes” </a>), or ‘<code
   class=css>compact</code>’ (under certain circumstances, see <a
   href="#compact-boxes">“Compact boxes”</a>).

  <p>An <dfn id=inline-level>inline-level</dfn> box is a box that has a <a
   href="#computed-value">computed value</a> for ‘<a href="#display0"><code
   class=property>display</code></a>’ of ‘<code
   class=css>inline</code>’, ‘<code class=css>inline-block</code>’,
   ‘<code class=css>inline-table</code>’, ‘<code
   class=css>ruby</code>’, ‘<code class=css>run-in</code>’ (under
   certain circumstances), or ‘<code class=css>compact</code>’ (under
   certain circumstances).

  <p class=issue>[What about the other ruby values?]

  <p>An <dfn id=anonymous-box>anonymous box,</dfn> informally, is a box that
   cannot be addressed with CSS selectors. All its properties, except for
   ‘<a href="#display0"><code class=property>display</code></a>’, have
   their default values (either the initial value or inherited). Anonymous
   boxes are created when the CSS box model requires a child box with a
   certain value for ‘<a href="#display0"><code
   class=property>display</code></a>’, but the child actually has a
   different value. In that case an anonymous box of the right kind is
   created and wraps the child (or children). Other modules (e.g., <a
   href="#ref-CSS3TBL" rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>, <a
   href="#ref-CSS3TEXT" rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>)
   may also define anonymous boxes. The anonymous boxes defined by this
   module are the following:

  <ul><!--
  <li>An ''inline-table'' element creates one box with ''inline-table'' as
    the value for 'display', which contains one anonymous box with ''table''
    as the value.
  <li>An ''inline-block'' element creates one box with ''inline-block'' as
    the value for 'display', containing one anonymous box with ''block'' as
    the value.
  <li>A <span>block-level</span> element that has a
    'writing-mode' of ''lr'' or
    ''rl'' and a parent with a 'writing-mode' of ''tb'' (or vice-versa)
    generates one or more block-level boxes with the same 'writing-mode'
    as the parent, each of which has one anonymous child box with a 'display'
    of ''block'' and the 'writing-mode' of the element itself. <span
    class=issue>[Coordinate this with CSS3-WRITING-MODES]</span>
  -->

   <li>A <span>block-level box</span> may contain either <a href="#line-box."
    title="line box">line boxes</a> or <a href="#block-level">block-level</a>
    boxes, but not both. If necessary, any line boxes that belong to this
    box's element are wrapped in one or more (as few as possible) anonymous
    boxes with a ‘<a href="#display0"><code
    class=property>display</code></a>’ of ‘<code
    class=css>block</code>’.
  </ul>

  <p class=note>Note that the anonymous boxes defined in this module are all
   <a href="#block-level">block-level,</a> but anonymous boxes defined in
   other modules may be different.

  <p class=mtb>The <dfn id=containing-block>containing block</dfn> of a box
   is a rectangle that is associated with the box and that is used in various
   definitions in this specification. Apart from a size and a position, the
   rectangle also has ‘<a href="#direction"><code
   class=property>direction</code></a>’ and ‘<a
   href="#writing-mode"><code class=property>writing-mode</code></a>’
   properties. The containing block of a box is defined as follows:

  <ul>
   <li>The containing block of the <a href="#root-element."
    title="root element">root element's</a> top-level boxes is a rectangle
    with the dimensions of the <a href="#viewport"><em>viewport,</em></a>
    anchored at the <a href="#canvas"><em title=canvas>canvas's</em></a>
    origin for continuous media and the page area for paged media. (See <a
    href="#ref-MEDIAQ" rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a> and <a
    href="#ref-CSS3PAGE" rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a>
    for definitions of continuous and paged media.) This containing block is
    called the <dfn id=initial-containing-block.>initial containing
    block.</dfn> The ‘<a href="#direction"><code
    class=property>direction</code></a>’ and ‘<a
    href="#writing-mode"><code class=property>writing-mode</code></a>’ of
    the initial containing block are the same as those of the root element.

   <li>For other elements, the containing block is one of the following:
    <ol>
     <li>If the element is a ‘<code class=css>run-in</code>’ that is
      rendered inline in a sibling element, then its containing block is the
      <a href="#content-edge.">content edge</a> of the <a
      href="#principal-box">principal box</a> of that sibling.

     <li>Otherwise, if the parent has a <a href="#principal-box">principal
      box</a> that is a <a href="#block-container-box">block container
      box</a> (e.g., if the parent is a ‘<code
      class=property>table-cell</code>’ or a ‘<code
      class=property>block</code>’), then the containing block is the
      content edge of the parent's <a href="#principal-box">principal
      box.</a>

     <li>Otherwise the containing block is the same as that of the parent.
    </ol>
  </ul>

  <p class=issue>Other modules may introduce other types of boxes with other
   rules for how to find their containing block. E.g., the containing block
   of an absolutely positioned element.

  <p>In the above, a <dfn id=block-container-box>block container box</dfn>
   is, informally, a box that can contain block boxes. More precisely: any
   box generated by a (pseudo-)element with a computed value for ‘<a
   href="#display0"><code class=property>display</code></a>’ of ‘<code
   class=css>block</code>’, ‘<code class=css>inline-block</code>’,
   ‘<code class=css>table-caption</code>’, ‘<code
   class=css>table-cell</code>’ or ‘<code class=css>list-item</code>’.
   <span class=note>Note that most floating and absolutely positioned
   elements have a computed ‘<a href="#display0"><code
   class=property>display</code></a>’ of ‘<code
   class=css>block</code>’. Also, a <a href="#flow-root"><em>flow
   root</em></a> has a computed ‘<a href="#display0"><code
   class=property>display</code></a>’ of ‘<code
   class=css>block</code>’.</span> <span class=issue>Or insert the
   definition of block container box from CSS 2.1 here?</span>

  <p class=issue>Also define <dfn id=principal-box>principal box</dfn>
   somewhere.

  <p class=issue><a
   href="http://wiki.csswg.org/spec/css2.1#issue-142">Issue 142 of
   CSS 2.1</a> suggests that an anonymous cell box, unlike anonymous block
   boxes, <em>can</em> establish the containing block for its children. If
   that is accepted, make sure the table module modifies the above
   definition.

  <p class=note>Note that the above is modified by the Absolute Positioning
   module <a href="#ref-CSS3POS"
   rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>: in particular, if a box's
   ‘<code class=property>position</code>’ property is neither ‘<code
   class=css>static</code>’ nor ‘<code class=css>relative</code>’, its
   containing block is established differently.

  <p>If an element <span class=issue>[or a viewport?]</span> has scrollbars
   (see ‘<a href="#overflow1"><code class=property>overflow</code></a>’),
   then any space taken up by the scrollbars should be excluded from
   (subtracted from the dimensions of) any containing block formed by that
   element.

  <h3 id=run-in-boxes><span class=secno>6.3. </span>Run-in boxes</h3>

  <div class=issue>
   <p>Compare the rules below with <a
    href="http://lists.w3.org/Archives/Public/www-style/2012Jul/0450.html">Elika's
    idea:</a>

   <p>Model is this:

   <ul>
    <li>run-ins are always treated like elements with ‘<code
     class=css>display: inline</code>’

    <li>except that they mangle the box tree thus:
     <ul>
      <li>If a run-in is preceded by an inline box (ignoring any anonymous
       inline boxes containing only collapsed white space), then it forces
       the creation of an anonymous block boundary between it and the
       preceding inline.

      <li>If the last run-in in a sequence of run-ins, out-of-flows, and
       anonymous inlines containing only white space is immediately followed
       (ignoring out-of-flows and white space) by a block box, the entire
       sequence (including any descendants) from the first run-in to the last
       run-in gets shifted into that block, becoming the first boxes in that
       block as if originally parented there.
     </ul>
   </ul>

   <p>This solves several problems:

   <ul>
    <li>
     <p>The behavior of the run-in is no longer determined by its contents.

    <li>
     <p>We don't have the weird discrepency between

     <pre>&lt;run-in>some&lt;/run-in>
&lt;p>text&lt;/p></pre>

     <p>where "some text" appears on one line but

     <pre>&lt;run-in>some&lt;/run-in>
text</pre>

     <p>appears on two lines.

    <li>
     <p>Multiple run-ins still run-in, so something like

     <pre>&lt;dt>implementer
&lt;dt>implementor
&lt;dd>(n.) Someone or something that implements.</pre>

     <p>can render as

     <blockquote>
      <p>*implementer, implementor* (n) Someone or something that implements.
     </blockquote>
   </ul>
  </div>

  <p>A ‘<code class=css>run-in</code>’ element (or pseudo-element)
   <var>A</var> behaves as follows:

  <ol>
   <li>If <var>A</var> has any children that <span>inhibit run-in
    behavior</span> (see below), then <var>A</var> is rendered as if it had
    ‘<code class=css>display: block</code>’.

   <li>Let <var>B</var> be the first of <var>A's</var> following siblings
    that is neither floating nor absolutely positioned nor has ‘<code
    class=css>display: none</code>’. If <var>B</var> exists and has a
    specified value for ‘<a href="#display0"><code
    class=property>display</code></a>’ of ‘<code
    class=css>block</code>’ or ‘<code class=css>list-item</code>’ and
    is not replaced, then <var>A</var> is rendered as an ‘<code
    class=css>inline</code>’ element at the start of <var>B's</var>
    principal box. <span class=note>Note: <var>A</var> is rendered before
    <var>B's</var> ‘<code class=css>:before</code>’ pseudo-element, if
    any. See <a href="#ref-CSS3GENCON"
    rel=biblioentry>[CSS3GENCON]<!--{{CSS3GENCON}}--></a>.</span>

   <li>Otherwise, <var>A</var> is rendered as if it had ‘<code
    class=css>display: block</code>’.
  </ol>

  <p>In the above, “siblings” and “children” include both normal
   elements and :before/:after pseudo-elements.

  <p>An element or pseudo-element <var>C</var> <dfn
   id=inhibits-run-in-behavior>inhibits run-in behavior</dfn> if one or more
   of the following are true. <span class=note>(Note that the definition is
   recursive.)</span>

  <ul>
   <li><var>C</var> is not floating and not absolutely positioned and the
    computed value of its ‘<a href="#display0"><code
    class=property>display</code></a>’ is one of ‘<code
    class=css>block</code>’, ‘<code class=css>list-item</code>’,
    ‘<code class=css>table</code>’ or ‘<code
    class=css>run-in</code>’.

   <li><var>C</var> has a computed value for ‘<a href="#display0"><code
    class=property>display</code></a>’ of ‘<code
    class=property>inline</code>’ and it has one or more children that
    inhibit run-in behavior. (Where “children” includes both normal
    elements and :before/:after pseudo-elements.)
  </ul>

  <div class=example>
   <p>A ‘<code class=css>run-in</code>’ box is useful for run-in headers,
    as in this example:

   <pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
&lt;HTML>
  &lt;HEAD>
    &lt;TITLE>A run-in box example&lt;/TITLE>
    &lt;STYLE type="text/css">
      H3 { display: run-in }
    &lt;/STYLE>
  &lt;/HEAD>
  &lt;BODY>
    &lt;H3>A run-in heading.&lt;/H3>
    &lt;P>And a paragraph of text that
       follows it.
  &lt;/BODY>
&lt;/HTML>
</pre>

   <p>This example might be formatted as:

   <pre>
<b>A run-in heading.</b> And a
paragraph of text that 
follows it.
</pre>
  </div>

  <p>Despite appearing visually as part of the following block box, a run-in
   element still inherits properties from its parent in the source tree.
   <span class=issue>It is undefined in level 2 if a run-in inherits from a
   ‘<code class=css>:first-line</code>’ pseudo-element. How about in
   level 3?</span>

  <h3 id=compact-boxes><span class=secno>6.4. </span>Compact boxes</h3>

  <p class=issue>Define here or in extended box module?

  <p>A compact box is a box that is either put in the margin of the next box
   or becomes a block of its own, depending on whether it is small enough to
   fit in the margin or not. The typical use case is for lists where most
   labels are small enough to fit in the margin, except for a few.

  <div class=example>
   <p>An example is the DL list in HTML. Its COMPACT attribute indicates to
    the formatter that the labels of the list are good candidates for display
    as compact boxes:

   <pre>
&lt;h3>Farm animals&lt;/h3>
&lt;dl compact>
 &lt;dt>cat
 &lt;dd>Lorem ipsum dolor sit amet, consectetaur adipisicing elit…
 &lt;dt>dog
 &lt;dd>Ut enim ad minim veniam, quis nostrud exercitation…
 &lt;dt>hippopotamus
 &lt;dd>Duis aute irure dolor in reprehenderit in voluptate velit…
 &lt;dt>fly
 &lt;dd>Excepteur sint occaecat cupidatat non proident, sunt in…
&lt;/dl>
</pre>

   <p>With a style rule like

   <pre>dl[compact] dt {display: compact}</pre>

   <p>this might be rendered as in the figure below.

   <div class=figure>
    <p><img alt="[sample rendering]" src=compact style="max-width: 24em">

    <p class=caption>Three of the four labels are narrow enough to fit in the
     left margin. The one that is too wide is converted into a block.
   </div>
  </div>

  <p>Whether a compact box <var>C</var> is displayed as a block or in the
   margin is determined as follows. Let <var>N</var> be the next sibling
   element in document order in the same flow as <var>C</var>, if any. Let
   <var>W</var> be the hypothetical distance between the <em>startside</em>
   margin edge and <em>endside</em> margin edge of <var>C</var> if the ‘<a
   href="#display0"><code class=property>display</code></a>’ property of
   <var>C</var> were set to ‘<code class=css>block</code>’ and any
   ‘<code class=css>auto</code>’ on its <a
   href="#inline-dimension"><em>inline dimension</em></a> were replaced by
   ‘<code class=css>fit-content</code>’.

  <ul>
   <li>If there is no such <var>N</var>, then <var>C</var> is displayed as a
    block.

   <li>If <var>N</var> has a ‘<a href="#display0"><code
    class=property>display</code></a>’ of ‘<code
    class=css>list-item</code>’, then <var>C</var> is displayed as a block.

   <li>If <var>N</var> is not <a
    href="#block-level"><em>block-level</em></a>, then <var>C</var> is
    displayed as a block.

   <li>If the <em>startside</em> margin of <var>N</var> is less than
    <var>W</var>, then <var>C</var> is displayed as a block.

   <li>Otherwise, <var>C</var> is displayed in the margin.
  </ul>

  <p>If <var>C</var> is displayed as a block, it is a <a
   href="#block-level"><em>block-level</em></a> element and it is sized and
   positioned exactly as if its ‘<a href="#display0"><code
   class=property>display</code></a>’ had been ‘<code
   class=css>block</code>’.

  <p>Otherwise, <var>C</var> is placed such that its <em>startside</em>
   margin edge aligns with the <a href="#start"><em>start</em></a> margin
   edge of its <a href="#containing-block"><em>containing block</em></a> and
   its <em>headside</em> border edge aligns with the <em>headside</em> border
   edge of <var>N</var>. It is in this case an <a
   href="#inline-level"><em>inline-level</em></a> element.

  <p class=issue>Do we do anything to avoid that floats overlap with
   <var>C</var>? Do we do anything if <var>C</var> is taller than
   <var>N</var>? E.g., adjust the ‘<a href="#min-height"><code
   class=property>min-height</code></a>’ of <var>N</var>?

  <div class=example>
   <p>Simple example...
  </div>

  <div class=example>
   <p>This example shows a compact box that has a different <em>writing
    mode</em> than its containing block:

   <pre>
dl {writing-mode: tb; direction: ltr}
dd {margin-left: 3em}
dt {display: compact; writing-mode: rl}
...
&lt;dl>
 &lt;dt>cat
 &lt;dd>Lorem ipsum dolor sit amet, consectetaur adipisicing elit…
&lt;/dl>
</pre>

   <p>The margin that is considered is the left margin of the DD, because the
    containing block (established by the DL) is top-to-bottom/left-to-right.
    That margin is thus compared to the width of the DT and it is large
    enough, which leads to a rendering similar to the figure below.

   <div class=figure>
    <p><img alt="[Sample rendering]" src=compact-vert
     style="max-width: 24em">

    <p class=caption>The word “cat” written sideways fits to the left of
     the definition.
   </div>
  </div>

  <h3 id=container-box><span class=secno>6.5. </span>Container box</h3>

  <p class=issue>or: Align-box

  <p class=note>Note that both ‘<a href="#clear-after"><code
   class=property>clear-after</code></a>’ and ‘<code
   class=css>container</code>’ can be used to force the next element after
   this one to start after any floats inside this element, but the effect is
   not exactly the same. E.g., ‘<code class=css>display:
   container</code>’ also affects certain forms of margin collapsing.

  <p class=note>Note that ‘<code class=property>vertical-align</code>’
   applies to ‘<code class=css>container</code>’ elements. The ‘<code
   class=property>vertical-align</code>’ property doesn't apply to other
   block-level elements, except ‘<code class=css>table-cell</code>’
   elements.

  <p class=issue>Any sense in vertically spreading out the contents,
   something like ‘<code class=css>vertical-align: justify</code>’?

  <p class=issue>Simpler to not use ‘<code
   class=property>vertical-align</code>’, but creating ‘<code
   class=css>top-box</code>’, ‘<code class=css>middle-box</code>’ and
   ‘<code class=css>bottom-box</code>’?

  <div class=example>
   <p>The ‘<code class=property>vertical-align</code>’ property applies
    to ‘<code class=css>container</code>’ elements <span
    class=issue>[check in <a href="#ref-CSS3TEXT"
    rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>!]</span>, and can thus
    be used to create vertically centered content, without wrapping the
    content in a table (which may not be always possible, and also causes the
    ‘<a href="#width"><code class=property>width</code></a>’ property to
    behave differently).

   <pre>
div.slide {
  display: container;
  height: 15em;
  vertical-align: middle;
  border: thin solid }
</pre>

   <p>with a document fragment like this:

   <pre>
&lt;div class=slide>
  &lt;ul>
    &lt;li>Bullet lists are boring
    &lt;li>They distract from the speaker
    &lt;li>Don't use them!
  &lt;/ul>
&lt;/div>
</pre>

   <p>might look like this figure:

   <div class=figure>
    <p><img alt="A 15 em high box with three bullet   items in the center"
     src=align-box.png>

    <p class=caption>The ‘<code class=css>vertical-align: middle</code>’
     causes the content of the ‘<code class=css>container</code>’ to be
     vertically centered.
   </div>
  </div>

  <h3 id=mixing-the-box-model-with-other-formatti><span class=secno>6.6.
   </span>Mixing the box model with other formatting models</h3>

  <p>There may be documents that combine different layout models, such as
   documents that combine HTML (typically rendered with the CSS box model)
   and <span class=index id=svg>SVG</span> (rendered with its own graphics
   model). If an element that is rendered according to the CSS box model has
   a child that is to be rendered with a different model, that child needs to
   have a ‘<a href="#display0"><code class=property>display</code></a>’
   property with a value that indicates that the child is not in the box
   model.

  <p>Such a child is treated as a <a href="#replaced-element"><em>replaced
   element</em></a> for the purposes of determining its size, position,
   margins, padding and border.

  <p class=issue>Should we allow a more complex model, where such a child may
   negotiate with the CSS environment to have several boxes and several
   baselines, so that it can take part in line breaking and page breaking?

  <p>This specification defines no value(s) for the ‘<a
   href="#display0"><code class=property>display</code></a>’ property that
   indicate that an element is formatted according to a different model than
   the box model, but separate specifications may do so.

  <h2 id=the-padding-properties><span class=secno>7. </span>The padding
   properties</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=padding>padding</dfn>

    <tr>
     <th>Value:

     <td>[ <a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a> | auto ]{1,4}

    <tr>
     <th>Initial:

     <td>(see individual properties)

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>width* of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>see individual properties

    <tr>
     <th>Canonical order:

     <td>N/A

    <tr>
     <td class=footnote colspan=2>*) if the <a
      href="#containing-block"><em>containing block</em></a> is <a
      href="#horizontal"><em>horizontal,</em></a> otherwise the height

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=padding-top>padding-top</dfn> , <dfn
      id=padding-right>padding-right</dfn>, <dfn
      id=padding-bottom>padding-bottom</dfn>, <dfn
      id=padding-left>padding-left</dfn>

    <tr>
     <th>Value:

     <td>[ <a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a> | auto ]

    <tr>
     <th>Initial:

     <td>0

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>width* of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>&lt;length&gt;

    <tr>
     <th>Canonical order:

     <td>N/A

    <tr>
     <td class=footnote colspan=2>*) if the <a
      href="#containing-block"><em>containing block</em></a> is <a
      href="#horizontal"><em>horizontal,</em></a> otherwise the height

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>Sets the thickness of the <a href="#padding-area"><em>padding
   area.</em></a> The value may not be negative.

  <p class=issue>Allow negative padding?

  <p class=issue>Define ‘<code class=property>auto</code>’ or remove it.
   (Probably define it: it seems useful for stretching the padding, like
   ‘<code class=css>margin: auto</code>’ strectches the margin.)

  <p>‘<a href="#padding"><code class=property>Padding</code></a>’ is a
   shorthand for the other four properties. If ‘<a href="#padding"><code
   class=property>padding</code></a>’ has four values, they are for top,
   right, bottom and left in that order. If left is omitted, it is the same
   as right. If bottom is omitted it is the same as top, if right is omitted
   it is the same as top.

  <p class=note>Note that percentages on ‘<a href="#padding-top"><code
   class=property>padding-top</code></a>’ and ‘<a
   href="#padding-bottom"><code class=property>padding-bottom</code></a>’
   are relative to the <a href="#width"><em>width</em></a> of the containing
   block, not the height (at least in a horizontal flow; in a vertical flow
   they are relative to the height).

  <p class=note>Note that percentages are not required for CSS level 2.

  <div class=example>
   <p>For example, the following two ways to set the padding of
    <code>h1</code> are equivalent:

   <pre>h1 { padding: 0.5em }
h1 { padding-top: 0.5em;
     padding-right: 0.5em;
     padding-bottom: 0.5em;
     padding-left: 0.5em }</pre>
  </div>

  <div class=issue>
   <p>Values may not be negative, thus the third line is ignored, but what
    about the fourth?

   <pre>
p { font-size: 10pt;
    padding-left: 2em;
    padding: -11pt;
    padding-left: calc(1em - 11pt)
}
</pre>
  </div>

  <h2 id=the-margin-properties><span class=secno>8. </span>The margin
   properties</h2>

  <p>Margins in CSS serve to add both horizontal and vertical space between
   boxes.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=margin-top>margin-top</dfn>, <dfn
      id=margin-right>margin-right</dfn>, <dfn
      id=margin-bottom>margin-bottom</dfn>, <dfn
      id=margin-left>margin-left</dfn>

    <tr>
     <th>Value:

     <td><a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a> | fill | auto

    <tr>
     <th>Initial:

     <td>0

    <tr>
     <th>Applies to:

     <td>see text

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>width* of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the percentage as specified or the absolute length or ‘<code
      class=css>auto</code>’

    <tr>
     <th>Canonical order:

     <td>N/A

    <tr>
     <td class=footnote colspan=2>*) if the <a
      href="#containing-block"><em>containing block</em></a> is <a
      href="#horizontal"><em>horizontal,</em></a> otherwise the height

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=margin>margin</dfn>

    <tr>
     <th>Value:

     <td>[ <a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a> | fill |
      auto]{1,4}

    <tr>
     <th>Initial:

     <td>(see individual properties)

    <tr>
     <th>Applies to:

     <td>see text

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>width* of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>see individual properties

    <tr>
     <th>Canonical order:

     <td>N/A

    <tr>
     <td class=footnote colspan=2>*) if the <a
      href="#containing-block"><em>containing block</em></a> is <a
      href="#horizontal"><em>horizontal,</em></a> otherwise the height

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>These properties set the thickness of the <a
   href="#margin-area"><em>margin area</em></a>. The value may be negative.

  <p>‘<a href="#margin"><code class=property>Margin</code></a>’ is a
   shorthand for the other four. If ‘<a href="#margin"><code
   class=property>margin</code></a>’ has four values, they set top, right,
   bottom and left in that order. If left is omitted, it is the same as
   right. If bottom is omitted, it is the same as top. If right is omitted it
   is the same as top.

  <div class=example>
   <p>For example, the following two ways of setting the margins of
    <code>p</code> are equivalent:

   <pre>p { margin: 1em 2em }
p { margin-top: 1em;
    margin-right: 2em;
    margin-bottom: 1em;
    margin-left: 2em }</pre>
  </div>

  <p>The values are as follows:

  <dl>
   <dt><a href="#ltlengthgt"><var>&lt;length&gt;</var></a>

   <dd>Sets the margin to the given length. Note that the actual distance to
    the next element may be different, due to <a href="#collapse."
    title=collapse>margin collapsing.</a>

   <dt><a href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a>

   <dd>Sets the margin to the given percentage of the <a
    href="#block-dimension">block dimension</a> of the <a
    href="#containing-block">containing block.</a> If that dimension depends
    on the value of this percentage, then the percentage is taken relative to
    ‘<code class=css>100vw</code>’ or ‘<code class=css>100vh</code>’
    instead, depending on whether the containing block is <a
    href="#horizontal">horizontal,</a> respectively <a
    href="#vertical.">vertical.</a>

   <dt><dfn id=fill>fill</dfn>

   <dd>Makes the margin depend on the available space, as defined in <a
    href="#Calculating">“Calculating widths, heights and margins”</a> and
    in <span class=issue>[the section that defines how block-level boxes are
    laid out in a flow]</span>

   <dt>auto

   <dd>On the <a href="#a-edge"><em>A edge</em></a> and <a
    href="#c-edge"><em>C edge</em></a>, the used value of ‘<code
    class=css>auto</code>’ is 0. On the <a href="#b-edge"><em>B
    edge</em></a> and <a href="#d-edge."><em>D edge</em></a>, the used value
    depends on the available space, as defined in <a
    href="#Calculating">“Calculating widths, heights and margins.”</a>
  </dl>

  <p class=note>Note that inside flexboxes <a href="#ref-CSS3-FLEXBOX"
   rel=biblioentry>[CSS3-FLEXBOX]<!--{{CSS3-FLEXBOX}}--></a>, the meaning of
   ‘<code class=css>auto</code>’ is different, because there it also has
   an effect on the <a href="#a-edge"><em>A edge</em></a> and <a
   href="#c-edge"><em>C edge.</em></a>

  <p class=issue>Another option is to combine a length/percentage with ‘<a
   href="#fill"><code class=css>fill</code></a>’, to set a desired margin
   in case there is no space to distribute, e.g. ‘<code class=css>1.2em +
   fill</code>’ or ‘<code class=css>fill(1.2em)</code>’. Is that ever
   needed?

  <p class=issue>‘<a href="#fill"><code class=property>Fill</code></a>’
   could also be a unit, like ‘<code class=css>%</code>’ or ‘<code
   class=property>fr</code>’, so that some fills can get more space than
   others. Is that useful?

  <p class=issue>Andrew Fedoniouk proposed the ‘<code
   class=css>%%</code>’ unit. ‘<code class=css>50%%</code>’ is 50% of
   the remaining space. This allows fills to sum up to more or less than
   100%. More than 100% is probably not useful, it guarantees overflow. But
   less than 100% might be.

  <p class=issue>The keywords ‘<a href="#min-content"><code
   class=property>min-content</code></a>’, ‘<a href="#max-content"><code
   class=property>max-content</code></a>’ and ‘<code
   class=property>available</code>’ could also be useful, at least for the
   start and end margin of a box. Then you can make a box that takes up no
   space by setting ‘<code class=css>width: available; margin-right: calc(0
   - available)</code>’

  <p>The properties apply to all boxes except certain table-* boxes (see <a
   href="#ref-CSS3TBL" rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>) and
   certain inline-level boxes (see <a href="#ref-CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>). <!--

<p>To find the size of such a collapsed margin, find the nearest
enclosing containing block in the same flow that has a fixed height,
call that height <var>H1</var>. Compute the height of the content in
that containing block (while treating 'fill(<var>P</var>)' as if it
was simply <var>P</var>) and call that height <var>H2</var>. Count the
number <var>N</var> of stretchable margins. If <var>H2</var> &lt;
<var>H1</var>, then increase all the stretchable margins by
(<var>H1</var> - <var>H2</var>)/<var>N</var>. If there is no such
enclosing block, 'fill(<var>P</var>)' simply means <var>P</var>.

<p>In a multi-column element, each column box is a separate containing
block for the purpose of stretching the margins.

-->

  <p class=note>Note that in a <span>horizontal flow,</span> percentages on
   ‘<a href="#margin-top"><code class=property>margin-top</code></a>’ and
   ‘<a href="#margin-bottom"><code
   class=property>margin-bottom</code></a>’ are relative to the <a
   href="#width"><em>width</em></a> of the containing block, not the height
   (and in vertical flow, ‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’ and ‘<a
   href="#margin-right"><code class=property>margin-right</code></a>’ are
   relative to the height, not the width).

  <h2 id=the-width-and-height-properties><span class=secno>9. </span>The
   width and height properties</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=width>width</dfn>

    <tr>
     <th>Value:

     <td>[<var>&lt;length></var> | <var>&lt;percentage></var>] &amp;&amp;
      [border-box | content-box]? | available | min-content | max-content |
      fit-content | auto

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>refer to width of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the specified keyword; or the specified percentage (with ‘<code
      class=css>border-box</code>’ or ‘<code
      class=css>content-box</code>’ if present); or the absolute length
      (with ‘<code class=css>border-box</code>’ or ‘<code
      class=css>content-box</code>’ if present); or ‘<code
      class=css>auto</code>’ if the property does not apply; (also see
      prose under &lt;percentage>)

    <tr>
     <th>Canonical order:

     <td>the length or percentage before the keyword, if both are present
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=height>height</dfn>

    <tr>
     <th>Value:

     <td>[<var>&lt;length></var> | <var>&lt;percentage></var>] &amp;&amp;
      [border-box | content-box]? | available | min-content | max-content |
      fit-content | complex | auto

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>all elements but non-replaced inline elements, table columns, and
      column groups

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>see prose

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the specified keywords, the specified percentage (see prose under
      &lt;percentage>) or the absolute length; ‘<code
      class=css>auto</code>’ if the property does not apply

    <tr>
     <th>Canonical order:

     <td>the length or percentage before the keyword, if both are present
  </table>
  <!-- Nov 2007, ftf: add four keywords and Jason's example of image + caption -->

  <p>These properties specify the width and height of the <a
   href="#content-area"><em>content area</em></a> or <a
   href="#border-area"><em>border area</em></a> (depending on ‘<a
   href="#box-sizing"><code class=property>box-sizing</code></a>’) of
   certain boxes.

  <p>Values have the following meanings:

  <dl>
   <dt><var>&lt;length></var>

   <dd>Specifies the size using a length unit. Negative values are illegal.
    If the keyword ‘<code class=css>border-box</code>’ is present, the
    length sets the size of the border box; if ‘<code
    class=css>content-box</code>’ is present, it sets the size of the
    content box; if neither is present, the ‘<a href="#box-sizing"><code
    class=property>box-sizing</code></a>’ property determines which size is
    set.

   <dt><var>&lt;percentage></var>

   <dd>Specifies a percentage width or height. The percentage is calculated
    with respect to the width (in the case of ‘<a href="#width"><code
    class=property>width</code></a>’) or height (for ‘<a
    href="#height"><code class=property>height</code></a>’) of the
    generated box's <a href="#containing-block">containing block.</a>
    Negative percentages are illegal. If the containing block's width, resp.
    height depends on this element, <span class=issue>then the percentage is
    relative to ‘<code class=css>100vw</code>’, resp. ‘<code
    class=css>100vh</code>’.</span> If the keyword ‘<code
    class=css>border-box</code>’ is present, the percentage sets the size
    of the border box; if ‘<code class=css>content-box</code>’ is
    present, it sets the size of the content box; if neither is present, the
    ‘<a href="#box-sizing"><code class=property>box-sizing</code></a>’
    property determines which size is set.

   <dt>available

   <dd>Equal to the <a href="#containing-block"><em>containing block</em></a>
    width or height minus the current element's margin, border, and padding.
    <span class=issue>If the required width, resp. height of the containing
    block is unknown (depends on this element), then ‘<code
    class=css>available</code>’ is equal to ‘<code
    class=css>100vw</code>’, resp. ‘<code
    class=css>100vh</code>’.</span>

   <dt>max-content

   <dd>The <a href="#max-content"><em>max-content</em></a> width or height.

   <dt>min-content

   <dd>The <a href="#min-content"><em>min-content</em></a> width or height.

   <dt>fit-content

   <dd>Equal to max(‘<a href="#min-content"><code
    class=css>min-content</code></a>’, min(‘<a href="#max-content"><code
    class=css>max-content</code></a>’, ‘<code
    class=css>available</code>’)).

   <dt>auto

   <dd>The width or height depends on the values of other properties. See <a
    href="#Calculating">Calculating widths, heights and margins</a> below.

   <dt>complex

   <dd>(Only on ‘<a href="#height"><code
    class=property>height</code></a>’.) The same as ‘<code
    class=css>auto</code>’, except that elements with a <a
    href="#complex-aspect-ratio"><em>complex aspect ratio</em></a> are
    considered to have an <em>intrinsic ratio.</em> More precisely: for the
    purposes of the section on <a href="#Calculating">“Calculating widths,
    heights and margins,”</a> the element is treated as if its height was
    ‘<code class=css>auto</code>’ and it had an <em>intrinsic ratio.</em>
  </dl>

  <p class=issue>Another possible value is
   <var>&lt;non-negative-number&gt;</var>, which would mean ‘<a
   href="#min-content"><code class=css>min-content</code></a>’ times that
   number.

  <p class=issue>The width property of ‘<code class=css>@viewport</code>’
   <a href="#ref-CSS-DEVICE-ADAPT"
   rel=biblioentry>[CSS-DEVICE-ADAPT]<!--{{CSS-DEVICE-ADAPT}}--></a> is a
   shorthand for min-width and max-width and can have either one or two
   values. Anything we can do to alleviate risk of the confusion?

  <p class=note>Note that ‘<code class=css>available</code>’, ‘<a
   href="#max-content"><code class=css>max-content</code></a>’, ‘<a
   href="#min-content"><code class=css>min-content</code></a>’, ‘<code
   class=css>fit-content</code>’, ‘<code class=css>border-box</code>’,
   ‘<code class=css>content-box</code>’ and ‘<code
   class=css>complex</code>’ do not exist in level 2.

  <p>The keyword values (in contrast to length and percentage values) are not
   influenced by the ‘<a href="#box-sizing"><code
   class=property>box-sizing</code></a>’ property, they always set the size
   of the content box.

  <p>‘<code class=css>Available</code>’, ‘<a href="#max-content"><code
   class=css>max-content</code></a>’, ‘<a href="#min-content"><code
   class=css>min-content</code></a>’ and ‘<code
   class=css>fit-content</code>’ only have effect in the inline progression
   direction: they are equivalent to ‘<code class=css>auto</code>’ when
   set on the ‘<a href="#height"><code class=property>height</code></a>’
   of <a href="#horizontal"><em>horizontal</em></a> elements or on the ‘<a
   href="#width"><code class=property>width</code></a>’ of <a
   href="#vertical."><em>vertical</em></a> elements.

  <p class=note>Note that ‘<code class=css>width: fit-content</code>’ is
   the same as ‘<code class=css>width: auto</code>’ for floats and
   tables, and ‘<code class=css>width: available</code>’ is the same as
   ‘<code class=css>width: auto</code>’ for blocks in the normal flow.

  <div class=example>
   <p>For example, the following rule fixes the content width of paragraphs
    at 100 px:

   <pre>p { width: 100px }</pre>
  </div>

  <div class=example>
   <p>This example shows the use of the keyword values. Assume these style
    rules:

   <pre>
div {width: 20em}
p.available {width: available}
p.min-content {width: min-content}
p.max-content {width: max-content}
p.fit-content {width: fit-content}
p.float {float: left; width: auto}
p.auto {width: auto}
* {outline: thin solid red}
</pre>

   <p>Then a document like this might be rendered as in the figure below:

   <pre>
<b>&lt;div></b>
  <b>&lt;p class=available></b>available: as wide as parent.
  <b>&lt;p class=min-content></b>min-content: as narrow as possible.
  <b>&lt;p class=max-content></b>max-content: As wide as needed, even
    if that means wider than the parent.
  <b>&lt;p class=fit-content></b>fit-content: As wide as needed.
  <b>&lt;p class=fit-content></b>fit-content: As wide as needed, but
    no wider than the parent.
  <b>&lt;p class=float></b>auto: depends on flow (=float).
  <b>&lt;p class=auto></b>auto: depends on flow (=normal).
<b>&lt;/div></b>
</pre>
  </div>

  <div class=figure>
   <p><img alt="Image: paragraphs of different   widths" src=width-keywords>

   <p class=caption>Rendering of the example: ‘<a href="#min-content"><code
    class=css>min-content</code></a>’ and ‘<a href="#max-content"><code
    class=css>max-content</code></a>’ depend only on the content; ‘<code
    class=css>available</code>’ depends only on the containing block;
    ‘<code class=css>fit-content</code>’ depends on both; and ‘<code
    class=css>auto</code>’ acts either like ‘<code
    class=css>available</code>’ or like ‘<code
    class=css>fit-content</code>’, depending on the type of box.
  </div>

  <div class=example>
   <p>This example sets the width of the border box of an element to 50%. It
    includes a fallback (48%) for UA that do not support the ‘<code
    class=css>border-box</code>’ keyword, such as level 2 UAs:

   <pre>
div.side {
    width: 48%;
    width: 50% border-box }
</pre>

   <p>It is equivalent to

   <pre>
div.side {
    width: 50%;
    box-sizing: border-box }
</pre>

   <p>except that the latter doesn't have a fallback for level 2 UAs (which
    don't support the ‘<a href="#box-sizing"><code
    class=property>box-sizing</code></a>’ property).
  </div>

  <h2 id=min-max><span class=secno>10. </span>The min-width, max-width,
   min-height and max-height properties</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=min-width>min-width</dfn>, <dfn
      id=min-height>min-height</dfn>

    <tr>
     <th>Value:

     <td>[ [<a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a>] &amp;&amp;
      [border-box | content-box]? ] | available | min-content | max-content |
      fit-content

    <tr>
     <th>Initial:

     <td>0

    <tr>
     <th>Applies to:

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>refer to width, resp. height of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the percentage as specified (with ‘<code
      class=css>border-box</code>’ or ‘<code
      class=css>content-box</code>’, if present), the keyword as specified,
      or the absolute length (with ‘<code class=css>border-box</code>’ or
      ‘<code class=css>content-box</code>’, if present)

    <tr>
     <th>Canonical order:

     <td>the length or percentage before the keyword, if both are present
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=max-width>max-width</dfn>, <dfn
      id=max-height>max-height</dfn>

    <tr>
     <th>Value:

     <td>[ [<a href="#ltlengthgt"><var>&lt;length&gt;</var></a> | <a
      href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a>] &amp;&amp;
      [border-box | content-box]? ] | available | min-content | max-content |
      fit-content | none

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>yes

    <tr>
     <th>Percentages:

     <td>refer to width, resp. height of containing block

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the percentage as specified (with ‘<code
      class=css>border-box</code>’ or ‘<code
      class=css>content-box</code>’, if present); the keyword as specified;
      the absolute length (with ‘<code class=css>border-box</code>’ or
      ‘<code class=css>content-box</code>’, if present); or none

    <tr>
     <th>Canonical order:

     <td>the length or percentage before the keyword, if both are present
  </table>

  <p>These properties allow authors to constrain content widths and heights
   to a certain range. Values have the following meanings:

  <dl>
   <dt><a href="#ltlengthgt"><var>&lt;length&gt;</var></a>

   <dd>Specifies a fixed minimum or maximum for ‘<a href="#width"><code
    class=property>width</code></a>’ or ‘<a href="#height"><code
    class=property>height</code></a>’. Negative values are illegal.

   <dt><a href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a>

   <dd>Specifies a minimum or maximum for ‘<a href="#width"><code
    class=property>width</code></a>’ or ‘<a href="#height"><code
    class=property>height</code></a>’ as a percentage of the corresponding
    dimension of the <a href="#containing-block"><em>containing
    block.</em></a> Negative percentages are illegal. If the containing
    block's dimension is negative, the used value is zero. If that containing
    block's dimension depends on this element's dimension, then the resulting
    layout is undefined. <span class=issue>Or: use the initial value?</span>

   <dt>max-content

   <dd>The <a href="#max-content"><em>max-content</em></a> width or height.

   <dt>min-content

   <dd>The <a href="#min-content"><em>min-content</em></a> width or height.

   <dt>available

   <dd>The containing block width or height minus margin, border, and
    padding.

   <dt>fit-content

   <dd>For ‘<a href="#max-width"><code
    class=property>max-width</code></a>’/‘<a href="#max-height"><code
    class=property>max-height</code></a>’, same as ‘<a
    href="#max-content"><code class=css>max-content</code></a>’. For ‘<a
    href="#min-width"><code class=property>min-width</code></a>’/‘<a
    href="#min-height"><code class=property>min-height</code></a>’, same as
    ‘<a href="#min-content"><code class=css>min-content</code></a>’.

   <dt>none

   <dd>No limit on the width or height of the box.
  </dl>

  <p>The keyword values (in contrast to length and percentage values) are not
   influenced by the ‘<a href="#box-sizing"><code
   class=property>box-sizing</code></a>’ property, they always set the size
   of the content box.

  <p>‘<code class=css>Available</code>’, ‘<a href="#max-content"><code
   class=css>max-content</code></a>’, ‘<a href="#min-content"><code
   class=css>min-content</code></a>’ and ‘<code
   class=css>fit-content</code>’ only have effect in the inline progression
   direction: they are equivalent to 0 when set on the ‘<a
   href="#min-height"><code class=property>min-height</code></a>’ of <a
   href="#horizontal"><em>horizontal</em></a> elements or on the ‘<a
   href="#min-width"><code class=property>min-width</code></a>’ of <a
   href="#vertical."><em>vertical</em></a> elements; they are equivalent to
   ‘<code class=css>none</code>’ when set on the ‘<a
   href="#max-height"><code class=property>max-height</code></a>’ of <a
   href="#horizontal"><em>horizontal</em></a> elements or on the ‘<a
   href="#max-width"><code class=property>max-width</code></a>’ of <a
   href="#vertical."><em>vertical</em></a> elements.

  <h2 id=intrinsic><span class=secno>11. </span>Definition of
   min-content/max-content</h2>

  <p>The size of a box often depends on the intrinsic width or height of its
   content. This section defines two characteristics of a box: the <a
   href="#max-content"><em>max-content</em></a> size and the <a
   href="#min-content"><em>min-content</em></a> size. They refer to the <a
   href="#inline-dimension"><em>inline dimension.</em></a>

  <p>For <a href="#horizontal">horizontal</a> boxes, the max-content width
   is, roughly, the size the content would have if no “soft” line breaks
   were inserted, i.e., if each paragaph is one long line; the min-content
   width is, roughly, the narrowest the box can get by breaking all lines at
   all possible break points. Another way of thinking about them is that they
   are, respectively, the width that minimizes the height; and the narrowest
   the content can get without unintended overflow.

  <div class=figure>
   <p><img alt="" src=width-intrinsic>

   <p class=caption>For example, in a simple paragraph with just text the
    max-content width is the width of the line if all words are laid out on
    one line; and the min-content width is the width of the longest word (or
    the longest syllable, if hyphenation is turned on).
  </div>

  <p>The <dfn id=min-content>min-content</dfn> width of a <a
   href="#horizontal"><em>horizontal,</em></a> non-replaced element
   <var>E</var> is defined as the smallest length <var>M</var> ≥ 0 such
   that

  <blockquote>
   <p>OVERFLOW(<var>E</var>,<var>M</var>) ≤
    OVERFLOW(<var>E</var>,<var>w</var>) for all <var>w</var> ≥ 0
  </blockquote>

  <p>where the function OVERFLOW(<var>E</var>,<var>w</var>) is defined as
   follows. Set the ‘<a href="#display0"><code
   class=property>display</code></a>’ of <var>E</var> to ‘<code
   class=css>block</code>’, ‘<a href="#float"><code
   class=property>float</code></a>’ to ‘<code class=css>none</code>’,
   ‘<code class=property>position</code>’ to ‘<code
   class=css>static</code>’, ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ to ‘<code
   class=css>visible</code>’, ‘<a href="#min-width"><code
   class=property>min-width</code></a>’ to ‘<code class=css>0</code>’,
   ‘<a href="#max-width"><code class=property>max-width</code></a>’ to
   ‘<code class=css>none</code>’, ‘<a href="#height"><code
   class=property>height</code></a>’ to ‘<code class=css>auto</code>’,
   ‘<a href="#min-height"><code class=property>min-height</code></a>’ to
   ‘<code class=css>0</code>’, ‘<a href="#max-height"><code
   class=property>max-height</code></a>’ to ‘<code
   class=css>none</code>’ and ‘<a href="#width"><code
   class=property>width</code></a>’ to <var>w</var>. Then measure the total
   width <var>W</var> of <var>E</var> including all overflow, considering
   <var>E</var> and all its descendants in the same flow and all floats of
   which <var>E</var> is the <a href="#containing-block">containing
   block.</a> Then

  <blockquote>
   <p>OVERFLOW(<var>E</var>,<var>w</var>) = <var>W</var> - <var>w</var>
  </blockquote>

  <p>The <dfn id=max-content>max-content</dfn> width of a <a
   href="#horizontal"><em>horizontal,</em></a> non-replaced element
   <var>E</var> is defined as the smallest length <var>M</var> ≥ 0 such
   that

  <blockquote>
   <p>HEIGHT(<var>E</var>,<var>M</var>) ≤ HEIGHT(<var>E</var>,<var>w</var>)
    for all <var>w</var> ≥ 0
  </blockquote>

  <p>where HEIGHT(<var>E</var>,<var>w</var>) is defined as follows. Set the
   ‘<a href="#display0"><code class=property>display</code></a>’ of
   <var>E</var> to ‘<code class=css>block</code>’, ‘<a
   href="#float"><code class=property>float</code></a>’ to ‘<code
   class=css>none</code>’, ‘<code class=property>position</code>’ to
   ‘<code class=css>static</code>’, ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ to ‘<code
   class=css>visible</code>’, ‘<a href="#min-width"><code
   class=property>min-width</code></a>’ to ‘<code class=css>0</code>’,
   ‘<a href="#max-width"><code class=property>max-width</code></a>’ to
   ‘<code class=css>none</code>’, ‘<a href="#height"><code
   class=property>height</code></a>’ to ‘<code class=css>auto</code>’,
   ‘<a href="#min-height"><code class=property>min-height</code></a>’ to
   ‘<code class=css>0</code>’, ‘<a href="#max-height"><code
   class=property>max-height</code></a>’ to ‘<code
   class=css>none</code>’, ‘<a href="#width"><code
   class=property>width</code></a>’ to <var>w</var> and lay out
   <var>E</var> as a flow root. Then HEIGHT(<var>E</var>,<var>w</var>) is the
   height as defined below in <a href="#root-height">“Auto heights for flow
   roots.”</a>

  <p>The corresponding definitions for vertical elements are analogous, with
   width and height swapped.

  <p class=note>OVERFLOW is not necessarily monotonic in <var>w</var> and a
   binary search for min-content and max-content may thus fail.

  <p class=issue>Say something about acceptable near-optimal results?

  <p class=note>Note that the ‘<a href="#min-content"><code
   class=css>min-content</code></a>’ width of a block may be larger than
   the ‘<a href="#min-content"><code class=css>min-content</code></a>’ of
   all its children, because it may be impossible to break a line between two
   children.

  <p class=note>The intrinsic sizes of <em>replaced elements</em> are defined
   in <a href="#ref-CSS3-IMAGES"
   rel=biblioentry>[CSS3-IMAGES]<!--{{!CSS3-IMAGES}}--></a>.

  <h2 id=aspect-ratios-of-replaced-elements><span class=secno>12.
   </span><span class=index id=aspect-ratios>Aspect ratios</span> of replaced
   elements</h2>

  <p>For the purposes of the width and height calculations below, CSS
   distinguishes four kinds of <a href="#replaced-element"><em class=index
   id=replaced-elements title="replaced element">replaced elements</em></a>:

  <dl>
   <dt>Type 1: replaced elements with both <em class=index
    id=intrinsic-width>intrinsic width</em> and <em class=index
    id=intrinsic-height.>intrinsic height.</em>

   <dd>These are replaced elements that are meant to be displayed with a
    certain fixed factor (the <em class=index id=intrinsic-ratio>intrinsic
    ratio</em>) between their width and height and also have a default size.
    Different formats may have different ways of specifying the size, e.g., a
    width and a ratio, or a raster and a resolution in dots per inch. Raster
    images fall in this category.

   <dt>Type 2: replaced elements with only an <em class=index
    id=intrinsic-ratio0>intrinsic ratio</em>

   <dd>These are replaced elements that are meant to be displayed with a
    certain fixed factor between their width and height, but without a
    default size. <span class=index id=svg0>SVG</span> images often fall in
    the this category.

   <dt>Type 3: replaced elements with a <dfn id=complex-aspect-ratio>complex
    aspect ratio</dfn>

   <dd>These are replaced elements that do not have a <em>fixed</em> ratio
    between their width and height, but that do have a functional relation
    between them in the sense that to every width corresponds a certain
    height and vice-versa. HTML documents are examples of this: the width can
    be chosen freely, but at every width there is a definite intrinsic
    height.

   <dt>Type 4: replaced elements without an intrinsic ratio

   <dd>These are replaced elements that have no relation between their width
    and height. Certain <span class=index id=svg1>SVG</span> images are
    examples of this.
  </dl>

  <p>For <span class=index id=raster-images>raster images</span> without
   reliable resolution information, a size of 1 px unit per image source
   pixel must be assumed. These images thus are of type 1.

  <div class=example>
   <p>E.g., according to the section on <a href="#inline-replaced">inline
    replaced elements</a> below, if the replaced element is an HTML document
    and the height is specified as ‘<code class=css>auto</code>’, e.g.:

   <pre>
... &lt;object data="example.html"
      style="width: 30em; height: auto">&lt;/object>...
</pre>

   <p>then the used height will be 150px, which is unlikely to be the real
    height of the example.html document. But if the height is specified as
    ‘<code class=css>complex</code>’, e.g.:

   <pre>
... &lt;object data="example.html"
      style="width: 30em; height: complex">&lt;/object>...
</pre>

   <p>then the height will be the height the example.html document normally
    has when displayed on its own with the given width. This enables almost
    seamless integration of external text in a document, without a scrollbar
    or other scrolling mechanism. (The external text is still displayed with
    its own style sheet.)
  </div>

  <div class=example>
   <p>An external mathematical formula in MathML is an example of replaced
    content with an intrinsic width and height. Assume the file m.mml
    contains a formula, then the HTML fragment

   <pre>
... derive &lt;img src="m.mml"
alt="that the sum of p(i) for i greater than 0 equals N">
for the case...
</pre>

   <p>renders the formula at its intrinsic size.
  </div>

  <p class=issue>The mathematical formula would however benefit from a way to
   negotiate available space against intrinsic size, or even negotiate
   available space against the number of boxes, so that the formula could be
   broken in two or more boxes and occupy space on two or more lines (similar
   to how lines of text are broken or words are hyphenated). HTML5, unlike
   HTML4, has math elements, so formulas can be embedded instead of
   transcluded, which would solve the problem… if CSS had properties for
   math typography…

  <h2 id=block-level-formatting><span class=secno>13. </span>Block-level
   formatting</h2>

  <p>In a <dfn id=block-formatting-context>block formatting context,</dfn>
   block-level boxes are laid out in the manner of a series of paragraphs.

  <p>The boxes of a <a href="#flow">flow</a> are laid out one after the other
   in the direction of the ‘<a href="#writing-mode"><code
   class=property>writing-mode</code></a>’ property of the <a
   href="#flow-root">flow root</a> and in the same order as in the source
   document. Their position is given by how much their margins overlap (see
   <a href="#collapsing-margins">“Collapsing margins”</a>) and by the
   fact that their side margin edges coincide with the edges of their
   containing block. More precisely: Each box's <a href="#d-edge."
   title="D edge">D</a> and <a href="#b-edge">B edge</a> coincide with
   respectively the <a href="#start">start</a> and <a href="#end">end</a>
   edges of its <a href="#containing-block">containing block.</a>

  <p class=issue>When is a block formatting context established?

  <p class=issue>TODO: Need to deal with anonymous block boxes.

  <div class=example>
   <p>An example of the last point above is this document fragment:

   <pre>&lt;p&gt;Somebody whose name I have
forgotten, said, long ago: &lt;q&gt;a box is
a box,&lt;/q&gt; and he probably meant it.&lt;/p&gt;</pre>

   <p>with these style rules:

   <pre>p { display: block }
q { display: block; margin: 1em }</pre>

   <p>The <code>p</code> element has both line boxes and a child box for the
    <code>q</code> element, which is a block-level element. The line boxes
    before the <code>q</code> are wrapped in an anonymous block-level box and
    so are the line boxes after the <code>q</code>. The resulting tree of
    boxes might be as follows (refer to the <a href="#When">figure</a>):

   <ul>
    <li>block-level box [p]
     <ul>
      <li>block-level box [anonymous]
       <ul>
        <li>line box: “Somebody…”

        <li>line box: “forgotten…”
       </ul>

      <li>block-level box [q]
       <ul>
        <li>line box: “a box…”
       </ul>

      <li>block-level box [anonymous]
       <ul>
        <li>line box: “and he…”
       </ul>
     </ul>
   </ul>

   <div class=figure id=When>
    <p><img
     alt="The P element has two line boxes before the q and one   after. The first two are wrapped in an anonymous box, the last one   is wrapped in another anonymous box."
     src=anonymous.png>

    <p class=caption>When the fragment is rendered, the text before the q is
     wrapped in an anonymous block and the text after the q in another.
   </div>
  </div>
  <!--example-->

  <h3 id=collapsing-margins><span class=secno>13.1. </span>Collapsing margins</h3>

  <p>Certain adjoining margins, as defined in this section, combine to form a
   single margin. Those margins are said to <dfn id=collapse.>collapse.</dfn>
   Margins are <dfn id=adjoining>adjoining</dfn> if there are no nonempty
   content, <a href="#padding-area" title="padding area">padding</a> or <a
   href="#border-area" title="border area">border areas</a> or <a
   href="#clearance."><em>clearance</em></a> to separate them.

  <div class=example>
   <p>For example, in the following fragment with the given style rules:

   <pre>p { display: block; margin-bottom: 2em 0 1em 0 }
div { display: block; margin: 2.5em 0 }
...
&lt;p&gt;First paragraph&lt;/p&gt;
&lt;div&gt;
  &lt;p&gt;Second paragraph&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>the bottom margin of the first <code>p</code> (=1em), the top margin of
    the <code>div</code> (=2.5em) and the top margin of the second
    <code>p</code> (=2em) collapse. The result is a single margin of 2.5em
    (the maximum of the three) between the bottom of the first <code>p</code>
    and the top of the second.
  </div>

  <div class=figure>
   <p><img alt="Three margins collapse: 1em + 2.5em + 2em" src=collapse1.png>

   <p class=caption>Schematic representation of the previous example.
  </div>

  <div class=example>
   <p>In the following fragment,

   <pre>p { display: block; margin: 2em 0 1em 0 }
div { display: block; margin: 2.5em 0;
      border: thin solid }
...
&lt;p&gt;First paragraph&lt;/p&gt;
&lt;div&gt;
  &lt;p&gt;Second paragraph&lt;/p&gt;
&lt;/div&gt;</pre>

   <p>the bottom margin of the first <code>p</code> and the top margin of the
    <code>div</code> collapse, but the top margin of the second
    <code>p</code> does not collapse with them, because it is not <a
    href="#adjoining"><em>adjoining;</em></a> the border of the
    <code>div</code> separates them.
  </div>

  <div class=figure>
   <p><img alt="Only two margins collapse: 1em + 2.5em" src=collapse2.png>

   <p class=caption>Schematic representation of the previous example.
  </div>

  <p>If a set of adjoining margins collapses, then the width of the resulting
   margin is <var>M</var> - <var>N</var>, where <var>M</var> is the maximum
   of the adjoining margins that are positive, or zero if there are none; and
   <var>N</var> is the minimum of the adjoining margins that are negative, or
   zero if there are none. But if any of the margins is <a
   href="#fill">‘<code class=css>fill</code>’</a>, then the resulting
   margin is also ‘<a href="#fill"><code class=css>fill</code></a>’.

  <p>We call an element or box <dfn id=collapsed-through>collapsed
   through</dfn> if two of its margins collapse with each other.

  <div class=example>
   <p>The most common use of collapsing through elements is that empty
    paragraphs don't cause extra white space:

   <pre>&lt;p>First paragraph
&lt;p>Second paragraph
&lt;p>
&lt;p>Last paragraph</pre>

   <p>There is equal space between the first and the second paragraphs as
    between the second and the last.
  </div>

  <p>The following two sets of rules determine which margins collapse.

  <ul>
   <li>Only margins of <a href="#block-level"><em>block-level</em></a> boxes
    can collapse.

   <li>Margins of a floated box do not collapse with any other margins.

   <li>Margins of a <a href="#flow-root"><em>flow root</em></a> do not
    collapse with its children's margins.

   <li>Margins of an absolutely positioned box (see <a href="#ref-CSS3POS"
    rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>) do not collapse with any
    other margins. <!--
  <li>Margins of an ''inline-block'' box do not collapse (not even
  with its in-flow children). <span class=issue>Assuming the first
  rule above (“only block-level”) is correct, this rule seems
  redundant, because an inline block is not block-level.</span>
  -->

   <li>Margins of the root element's box do not collapse with any other
    margins. <!-- Note: the root element is not a flow root, because we
  defined the initial containing block to its flow root -->

   <li>If a box is <a href="#collapsed-through"><em>collapsed
    through</em></a> and it has <a href="#clearance."><em>clearance</em></a>
    applied to one of its two collapsed margins, then those two margins do
    not collapse with certain of the parent's margins, as follows: If
    clearance is applied to, respectively, the top, right, bottom or left
    margin, then the two margins do not collapse with the parent's bottom,
    left, top or right margin, respectively.
    <!-- The CSS 2.1 rule for all-horizontal text -->

   <li>If the top margin of a box with non-zero computed ‘<a
    href="#min-height"><code class=property>min-height</code></a>’ and
    ‘<code class=property>auto</code>’ computed ‘<a
    href="#height"><code class=property>height</code></a>’ collapses with
    the bottom margin of its last in-flow child, then the child's bottom
    margin does not collapse with the parent's bottom margin.
    <!-- The following can happen in vertical-rl text -->

   <li>If the right margin of a box with non-zero computed ‘<a
    href="#min-width"><code class=property>min-width</code></a>’ and
    ‘<code class=property>auto</code>’ computed ‘<a href="#width"><code
    class=property>width</code></a>’ collapses with the left margin of its
    last in-flow child, then the child's left margin does not collapse with
    the parent's left margin.
    <!-- The following can happen in vertical-lr text -->

   <li>If the left margin of a box with non-zero computed ‘<a
    href="#min-width"><code class=property>min-width</code></a>’ and
    ‘<code class=property>auto</code>’ computed ‘<a href="#width"><code
    class=property>width</code></a>’ collapses with the right margin of its
    last in-flow child, then the child's right margin does not collapse with
    the parent's right margin.
  </ul>

  <p>Except when forbidden by the list above, the following margins collapse:

  <ul><!-- transitive -->

   <li>
    <p>If a margin P collapses with a margin Q and margin Q with a margin R,
     then P, Q and R collapse together. (“Collapsing is transitive”)
     <!-- parent-child / head -->

   <li>
    <p>A margin of a box collapses with the <a href="#head"><em>head</em></a>
     margin of its parent box if those two margins are <a
     href="#adjoining"><em>adjoining.</em></a> <!-- parent-child / foot -->

   <li>
    <p>A margin of a box collapses with the <a href="#foot"><em>foot</em></a>
     margin of its parent box if those two margins are <a
     href="#adjoining"><em>adjoining.</em></a> <!-- sibling -->

   <li>
    <p>The <a href="#c-edge"><em title="C edge">C</em></a> margin of a box
     collapses with the <a href="#a-edge"><em title="A edge">A</em></a>
     margin of a sibling box if the two margins are <a
     href="#adjoining"><em>adjoining.</em></a> <!-- self -->

   <li>
    <p>The <a href="#a-edge"><em title="A edge">A</em></a> and <a
     href="#c-edge"><em title="C edge">C</em></a> margins of a box collapse
     with each other if the two margins are <a
     href="#adjoining"><em>adjoining.</em></a> (The box is <a
     href="#collapsed-through"><em>“collapsed through.”</em></a>)
  </ul>

  <p>If a box X is <a href="#collapsed-through"><em>collapsed
   through</em></a> then the position of its <a href="#a-edge"><em
   title="A edge">A</em></a> border edge is defined as follows.

  <ul>
   <li>If X's margins are collapsed with its parent's <a
    href="#head"><em>head</em></a> margin, the A border edge of X is defined
    to be the same as the parent's head border edge.

   <li>Otherwise, either the parent is not taking part in the margin
    collapsing, or only the parent's <a href="#foot"><em>foot</em></a> margin
    is involved. The position of X's A border edge is defined to be the same
    as it would have been if X had a nonzero <a href="#c-edge"><em
    title="C edge">C</em></a> border.
  </ul>

  <p class=note>Note that box X itself is invisible and its position has no
   effect on the positions of the other elements with whose margins it is
   being collapsed; the border edge position is only required for laying out
   descendants of X.

  <div class=example>
   <p>In a horizontal flow, the bottom margin of an in-flow <a
    href="#block-level">block-level</a> element is adjoining to the top
    margin of its next in-flow block-level sibling, unless that sibling has
    clearance:

   <pre>
&lt;p style="margin-bottom: 2em">The bottom margin of this
box…&lt;/p>

&lt;p style="margin-top: 3em">… collapses with the top margin
of this box, to yield max(2em, 3em) = 3em margin.&lt;/p>
</pre>

   <p>The top margin of an in-flow block-level element is adjoining to its
    first in-flow block-level child's top margin if the element has no top
    border, no top padding, and the child has no clearance:

   <pre>
&lt;div style="margin-top: 2em; padding: 0; border: 0">
  &lt;p style="margin-top: 3em">
    The top margin of the DIV and the P
    collapse, to yield max(2em, 3em) = 3em margin.
  &lt;/p>
&lt;/div>
</pre>

   <p>The bottom margin of an in-flow block-level element with a ‘<a
    href="#height"><code class=property>height</code></a>’ of ‘<code
    class=css>auto</code>’ and ‘<a href="#min-height"><code
    class=property>min-height</code></a>’ less than the element's used
    height and ‘<a href="#max-height"><code
    class=property>max-height</code></a>’ greater than the element's used
    height is adjoining to its last in-flow block-level child's bottom margin
    if the element has no bottom padding or border:

   <pre>
&lt;div style="margin-bottom: 2em; padding: 0; border: 0;
    height: auto; min-height: 0; max-height: 100em">
  &lt;p style="margin-bottom: 3em">
    The bottom margin of the DIV and the P collapse, to yield max(2em,
    3em) = 3em margin.
  &lt;/p>
&lt;/div>
</pre>

   <p>An element's own margins are adjoining if the ‘<a
    href="#min-height"><code class=property>min-height</code></a>’ property
    is zero, and it has neither vertical borders nor vertical padding, and it
    has a ‘<a href="#height"><code class=property>height</code></a>’ of
    either 0 or ‘<code class=css>auto</code>’, and it does not contain a
    line box, and all of its in-flow children's margins (if any) are
    adjoining:

   <pre>
&lt;div style="margin-top: 2em; margin-bottom: 3em">
  &lt;p style="position: absolute">
    The DIV is empty and its top and bottom margins collapse.
  &lt;/p>
&lt;/div>
</pre>

   <p>When an element's own margins collapse, and that element has had
    clearance applied to it, its top margin collapses with the adjoining
    margins of subsequent siblings but that resulting margin does not
    collapse with the bottom margin of the parent block:

   <pre>
&lt;div style="margin-bottom: 2em">
  &lt;p style="float: left">
    The margins of the next two Ps collapse
  &lt;p style="clear: left; margin-top: 4em; margin-bottom: 3em">
    <!-- empty -->
  &lt;/p>
  &lt;p style="margin-top: 1em; margin-bottom: 1em">
    <!-- empty -->
  &lt;/p>
&lt;/div>
</pre>

   <p>The top and bottom margins of the two empty Ps collapse all together.
    But they can't collapse with the bottom of the DIV, because one of the
    two empty P's has clearance.

   <p class=issue>Check this. This is probably the only possible
    interpretation of the rules, but it is certainly not obvious that the
    clearance of one element may stop later elements from collapsing…
  </div>

  <p>Collapsing is based on the used value of ‘<a href="#padding"><code
   class=property>padding</code></a>’, ‘<a href="#margin"><code
   class=property>margin</code></a>’, and ‘<code
   class=property>border</code>’ (i.e., after resolving any percentages).
   The collapsed margin is calculated over the used value of the various
   margins.

  <h2 id=inline-level-formatting><span class=secno>14. </span>Inline-level
   formatting</h2>

  <p>In an inline formatting context, inline-level boxes are laid out in the
   manner of a run of words and sentences. Inline-level formatting, and the
   behavior of inline-level boxes, is specified in the text specification <a
   href="#ref-CSS3TEXT" rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>.

  <h2 id=Calculating><span class=secno>15. </span>Calculating widths, heights
   and margins</h2>

  <p>The following two algorithms define the <a href="#used-value."><em>used
   value</em></a> of ‘<a href="#width"><code
   class=property>width</code></a>’ and ‘<a href="#height"><code
   class=property>height</code></a>’ respectively and also the used values
   of the ‘<a href="#margin"><code class=property>margin</code></a>’
   properties and of ‘<code class=property>top</code>’, ‘<code
   class=property>right</code>’ ‘<code class=property>bottom</code>’
   and ‘<code class=property>left</code>’.

  <p class=note>Note that they do not affect the computed values of ‘<a
   href="#width"><code class=property>width</code></a>’ and ‘<a
   href="#height"><code class=property>height</code></a>’. Also note that
   in some cases the used width has to be known in order to calculate the
   used height, or vice versa,

  <p>For ‘<a href="#width"><code class=property>width</code></a>’:

  <ol>
   <li>The tentative used width is calculated following the rules in the
    subsections below. If ‘<a href="#transform"><code
    class=property>transform</code></a>’ is not ‘<code
    class=css>none</code>’, it is assumed to be ‘<code
    class=css>rotate(0)</code>’ (i.e., the identity transform) for the
    purposes of this calcutlation.

   <li>If the tentative used width is greater than ‘<a
    href="#max-width"><code class=property>max-width</code></a>’, the same
    rules are applied again, but this time using the computed value of ‘<a
    href="#max-width"><code class=property>max-width</code></a>’ as the
    computed value for ‘<a href="#width"><code
    class=property>width</code></a>’.

   <li>If the resulting width is smaller than ‘<a href="#min-width"><code
    class=property>min-width</code></a>’, the same rules are applied again,
    but this time using the computed value of ‘<a href="#min-width"><code
    class=property>min-width</code></a>’ as the computed value for ‘<a
    href="#width"><code class=property>width</code></a>’.
  </ol>

  <p>For ‘<a href="#height"><code class=property>height</code></a>’:

  <ol>
   <li>The tentative used height is calculated following the rules in the
    sections below. If ‘<a href="#transform"><code
    class=property>transform</code></a>’ is not ‘<code
    class=css>none</code>’, it is assumed to be ‘<code
    class=css>rotate(0)</code>’ (i.e., the identity transform) for the
    purposes of this calcutlation.

   <li>If the tentative used height is greater than ‘<a
    href="#max-height"><code class=property>max-height</code></a>’, the
    same rules are applied again, but this time using the computed value of
    ‘<a href="#max-height"><code class=property>max-height</code></a>’ as
    the computed value for ‘<a href="#height"><code
    class=property>height</code></a>’.

   <li>If the resulting height is smaller than ‘<a href="#min-height"><code
    class=property>min-height</code></a>’, the same rules are applied
    again, but this time using the computed value of ‘<a
    href="#min-height"><code class=property>min-height</code></a>’ as the
    computed value for ‘<a href="#height"><code
    class=property>height</code></a>’.
  </ol>

  <p>If ‘<a href="#transform"><code class=property>transform</code></a>’
   is not ‘<code class=css>none</code>’, the used width or height is
   further modified as follows:

  <ul>
   <li>If the element is <a href="#horizontal"><em>horizontal</em></a> and
    ‘<a href="#height"><code class=property>height</code></a>’ is
    ‘<code class=css>auto</code>’, then the used height is the height of
    the content box after the transformation is applied.

   <li>If the element is <a href="#vertical."><em>vertical</em></a> and ‘<a
    href="#width"><code class=property>width</code></a>’ is ‘<code
    class=css>auto</code>’, then the used width is the width of the content
    box after the transformation is applied.
  </ul>

  <p class=note>Note that translations <a href="#ref-CSS3-2D-TRANSFORMS"
   rel=biblioentry>[CSS3-2D-TRANSFORMS]<!--{{!CSS3-2D-TRANSFORMS}}--></a> do
   not affect the width or height and also do not affect the placement of
   boxes in the normal flow (see <a href="#basic">“Basic flow layout”
   </a>).

  <p>However, for <em>replaced elements</em> with an <em>intrinsic ratio</em>
   and both ‘<a href="#width"><code class=property>width</code></a>’ and
   ‘<a href="#height"><code class=property>height</code></a>’ specified
   as ‘<code class=css>auto</code>’, the algorithm is as follows:

  <p>Select from the table the resolved height and width values for the
   appropriate constraint violation. Take the <a
   href="#max-width"><var>max-width</var></a> and <a
   href="#max-height"><var>max-height</var></a> as max(min, max) so that
   <var>min</var> ≤ <var>max</var> holds true. In this table <var>w</var>
   and <var>h</var> stand for the results of the width and height
   computations ignoring the ‘<a href="#min-width"><code
   class=property>min-width</code></a>’, ‘<a href="#min-height"><code
   class=property>min-height</code></a>’, ‘<a href="#max-width"><code
   class=property>max-width</code></a>’ and ‘<a href="#max-height"><code
   class=property>max-height</code></a>’ properties. Normally these are the
   intrinsic width and height, but they may not be in the case of replaced
   elements with intrinsic ratios.

  <table class=equiv-table>
   <thead>
    <tr>
     <th>Constraint violation

     <th>Resolved width

     <th>Resolved height

   <tbody>
    <tr>
     <td>none

     <td><var>w</var>

     <td><var>h</var>

    <tr>
     <td><var>w > max-width</var>

     <td><a href="#max-width"><var>max-width</var></a>

     <td><var>max(max-width * h/w, min-height)</var>

    <tr>
     <td><var>w &lt; min-width</var>

     <td><a href="#min-width"><var>min-width</var></a>

     <td><var>min(min-width * h/w, max-height)</var>

    <tr>
     <td><var>h > max-height</var>

     <td><var>max(max-height * w/h, min-width)</var>

     <td><a href="#max-height"><var>max-height</var></a>

    <tr>
     <td><var>h &lt; min-height</var>

     <td><var>min(min-height * w/h, max-width)</var>

     <td><a href="#min-height"><var>min-height</var></a>

    <tr>
     <td>(<var>w > max-width</var>) and (<var>h > max-height</var>),
      where (<var>max-width/w ≤ max-height/h</var>)

     <td><a href="#max-width"><var>max-width</var></a>

     <td><var>max(min-height, max-width * h/w)</var>

    <tr>
     <td>(<var>w > max-width</var>) and (<var>h > max-height</var>),
      where (<var>max-width/w > max-height/h</var>)

     <td><var>max(min-width, max-height * w/h)</var>

     <td><a href="#max-height"><var>max-height</var></a>

    <tr>
     <td>(<var>w &lt; min-width</var>) and
      (<var>h &lt; min-height</var>), where
      (<var>min-width/w ≤ min-height/h</var>)

     <td><var>min(max-width, min-height * w/h)</var>

     <td><a href="#min-height"><var>min-height</var></a>

    <tr>
     <td>(<var>w &lt; min-width</var>) and
      (<var>h &lt; min-height</var>), where
      (<var>min-width/w > min-height/h</var>)

     <td><a href="#min-width"><var>min-width</var></a>

     <td><var>min(max-height, min-width * h/w)</var>

    <tr>
     <td>(<var>w &lt; min-width</var>) and (<var>h > max-height</var>)

     <td><a href="#min-width"><var>min-width</var></a>

     <td><a href="#max-height"><var>max-height</var></a>

    <tr>
     <td>(<var>w > max-width</var>) and (<var>h &lt; min-height</var>)

     <td><a href="#max-width"><var>max-width</var></a>

     <td><a href="#min-height"><var>min-height</var></a>
  </table>

  <p>Then apply the appropriate rules in the subsections below, as if ‘<a
   href="#width"><code class=property>width</code></a>’ and ‘<a
   href="#height"><code class=property>height</code></a>’ were computed as
   these values.

  <p>The following subsections apply if the element's <a
   href="#containing-block"><em>containing block</em></a> is <a
   href="#horizontal"><em>horizontal.</em></a> If it is <a
   href="#vertical."><em>vertical,</em></a> the same rules apply, but with
   every occurrence of “left” replaced by “top,” “right” by
   “bottom,” “top” by “right,” “bottom” by “left”,
   “height” by “width” and “width” by “height.”
   <!-- '100vw' decided at ftf Sep 10, 2007. '100vh' is my sugggestion
[BB] -->

  <p>For the purposes of evaluating percentages in the following subsections,
   if the width of the containing block is unknown, then assume the width is
   ‘<code class=css>100vw</code>’. Likewise, if the height of the
   containing block is unknown, then assume it is ‘<code
   class=css>100vh</code>’.

  <h3 id=inline-non-replaced><span class=secno>15.1. </span>Inline,
   non-replaced elements</h3>

  <p>The ‘<a href="#width"><code class=property>width</code></a>’ and
   ‘<a href="#height"><code class=property>height</code></a>’ properties
   do not apply. For each of ‘<code class=property>left</code>’, ‘<code
   class=property>right</code>’, ‘<code class=property>top</code>’,
   ‘<code class=property>bottom</code>’, ‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’, ‘<a href="#margin-right"><code
   class=property>margin-right</code></a>’, ‘<a href="#margin-top"><code
   class=property>margin-top</code></a>’ and ‘<a
   href="#margin-bottom"><code class=property>margin-bottom</code></a>’,
   the used value is calculated from the computed value by evaluating
   percentages and replacing ‘<code class=css>auto</code>’ and ‘<a
   href="#fill"><code class=css>fill</code></a>’ by 0.

  <p class=note>Note that this section applies equally when the <a
   href="#containing-block"><em>containing block</em></a> is <a
   href="#horizontal"><em>horizontal</em></a> as when it is <a
   href="#vertical."><em>vertical.</em></a>

  <h3 id=inline-replaced><span class=secno>15.2. </span>Inline or floating,
   replaced elements</h3>

  <p>The used values of ‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’, ‘<a href="#margin-right"><code
   class=property>margin-right</code></a>’, ‘<a href="#margin-top"><code
   class=property>margin-top</code></a>’ and ‘<a
   href="#margin-bottom"><code class=property>margin-bottom</code></a>’
   derive from the computed value, except that a computed value of ‘<code
   class=css>auto</code>’ becomes a used value of ‘<code
   class=css>0</code>’.

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ and
   ‘<a href="#width"><code class=property>width</code></a>’ both have
   computed values of ‘<code class=css>auto</code>’ and the element also
   has an intrinsic width, then that intrinsic width is the used value of
   ‘<a href="#width"><code class=property>width</code></a>’.

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ and
   ‘<a href="#width"><code class=property>width</code></a>’ both have
   computed values of ‘<code class=css>auto</code>’ and the element also
   has an intrinsic height, then that intrinsic height is the used value of
   ‘<a href="#height"><code class=property>height</code></a>’.

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ and
   ‘<a href="#width"><code class=property>width</code></a>’ both have
   computed values of ‘<code class=css>auto</code>’ and the element has
   no intrinsic width, but does have an intrinsic height and intrinsic ratio;
   or if ‘<a href="#width"><code class=property>width</code></a>’ has a
   computed value of ‘<code class=css>auto</code>’, ‘<a
   href="#height"><code class=property>height</code></a>’ has some other
   computed value, and the element has an intrinsic ratio; then the used
   value of ‘<a href="#width"><code class=property>width</code></a>’ is:

  <blockquote>
   <p>(used height) * (intrinsic ratio)
  </blockquote>

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ and
   ‘<a href="#width"><code class=property>width</code></a>’ both have
   computed values of ‘<code class=css>auto</code>’ and the element has
   no intrinsic height, but does have an intrinsic width and intrinsic ratio;
   or if ‘<a href="#height"><code class=property>height</code></a>’ has a
   computed value of ‘<code class=css>auto</code>’, ‘<a
   href="#width"><code class=property>width</code></a>’ has some other
   computed value, and the element has an intrinsic ratio; then the used
   value of ‘<a href="#height"><code class=property>height</code></a>’
   is:

  <blockquote>
   <p>(used width) / (intrinsic ratio)
  </blockquote>

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ and
   ‘<a href="#width"><code class=property>width</code></a>’ both have
   computed values of ‘<code class=css>auto</code>’ and the element has
   an intrinsic ratio but no intrinsic height or width and the containing
   block's width doesn't itself depend on the replaced element's width, then
   the used value of ‘<a href="#width"><code
   class=property>width</code></a>’ is calculated from the <a
   href="#width-constraints">constraint equation</a> used for block-level,
   non-replaced elements in normal flow. The used value for ‘<a
   href="#height"><code class=property>height</code></a>’ is: (used width)
   / (intrinsic ratio).

  <p>If ‘<a href="#width"><code class=property>width</code></a>’ has a
   computed value of ‘<code class=property>auto</code>’, and the element
   has an intrinsic width but no intrinsic ratio, then that intrinsic width
   is the used value of ‘<a href="#width"><code
   class=property>width</code></a>’.

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ has a
   computed value of ‘<code class=property>auto</code>’, and the element
   has an intrinsic height but no intrinsic ratio, then that intrinsic width
   is the used value of ‘<a href="#width"><code
   class=property>width</code></a>’.

  <p>If ‘<a href="#width"><code class=property>width</code></a>’ has a
   computed value of ‘<code class=css>auto</code>’, but none of the
   conditions above are met, then the used value of ‘<a href="#width"><code
   class=property>width</code></a>’ becomes 300px. If 300px is too wide to
   fit the device, UAs should use the width of the largest rectangle that has
   a 2:1 ratio and fits the device instead.

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ has a
   computed value of ‘<code class=css>auto</code>’ and none of the rules
   above define its used value, then the used value of ‘<a
   href="#height"><code class=property>height</code></a>’ must be set to
   the height of the largest rectangle that has a 2:1 ratio, has a height not
   greater than 150px, and has a width not greater than the device width.

  <p class=issue>Theoretically, a device may be wider than than 300px but not
   tall enough for 150px. In that case the resulting replaced element will be
   too tall. But this is the formulation in CSS 2.1 and it seems not worth
   improving such an edge case.

  <p>Percentage intrinsic widths are first evaluated with respect to the
   containing block's width, if that width doesn't itself depend on the
   replaced element's width. If it does, then a percentage intrinsic width on
   that element can't be resolved and the element is assumed to have no
   intrinsic width.

  <p class=note>Note that this section applies equally when the <a
   href="#containing-block"><em>containing block</em></a> is <a
   href="#horizontal"><em>horizontal</em></a> as when it is <a
   href="#vertical."><em>vertical.</em></a>

  <h3 id=blockwidth><span class=secno>15.3. </span>Block-level, non-replaced
   elements in normal flow when ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ computes to ‘<code
   class=css>visible</code>’</h3>

  <p>This section also applies to <a href="#block-level">block-level</a>
   non-replaced elements in normal flow when ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ does not compute to ‘<code
   class=css>visible</code>’ but has been propagated to the viewport.

  <p>The used values of the <a href="#head">head</a> padding, <a
   href="#foot">foot</a> padding, <a href="#head">head</a> margin and <a
   href="#foot">foot</a> margin are calculated from their computed values,
   with any ‘<code class=css>auto</code>’ values replaced by 0.

  <p>If the computed value of the <span>block flow dimension</span> is not
   ‘<code class=css>auto</code>’, then the used value is calculated by
   evaluating the computed value. Otherwise, the <span>block flow
   dimension</span> is the distance between two edges that are defined as
   follows:

  <ul>
   <li>For the first edge: If the element is the <a
    href="#root-element.">root element</a> or if it has a non-zero <a
    href="#head">head</a> padding or a non-zero <a href="#head">head</a>
    border, then the first edge is the <span>headside</span> <a
    href="#margin-edge."><em>margin edge</em></a> of the first <a
    href="#line-box.">line box</a> or <span>block-level box</span> (whichever
    comes first); otherwise the first edge is the <span>headside</span> <a
    href="#border-edge."><em>border edge</em></a> of the first <a
    href="#line-box.">line box</a> or <span>block-level box</span> (whichever
    comes first) that doesn't have its margins <a
    href="#collapsed-through">collapsed through.</a>

   <li>For the second edge: If the element is the <a
    href="#root-element.">root element</a> or if it has a non-zero <a
    href="#foot">foot</a> padding or a non-zero <a href="#foot">foot</a>
    border, then the second edge is the <span>footside</span> <a
    href="#margin-edge."><em>margin edge</em></a> of the last <a
    href="#line-box.">line box</a> or <span>block-level box</span> (whichever
    comes last); otherwise the second edge is the <span>footside</span> <a
    href="#border-edge."><em>border edge</em></a> of the last <a
    href="#line-box.">line box</a> or <span>block-level box</span> (whichever
    comes last) that doesn't have its margins <a
    href="#collapsed-through">collapsed through.</a>
  </ul>

  <p class=note>The above reflects the fact that the margins of the element
   may collapse with the margins of its first and last children (unless the
   element has a border or padding). In that case the children's margins fall
   outside the block flow dimension.

  <p>The position of the edges is calculated without applying relative
   positioning, if any, to the children. And only children in the normal flow
   are taken into account, i.e., floating boxes and absolutely positioned
   boxes are ignored.

  <div class=example>
   <p>For example, the DIV in this fragment has a bottom border but no
    padding or border at the top. The height is thus calculated from the
    <em>border</em> edge of the first child (img1) to the <a
    href="#margin"><em>margin</em></a> edge of the last child (img2). The
    result is 8em.

   <pre>
div {border-bottom: 0.2em dashed}
img {height: 3em; display: block; margin: 1em}
...
&lt;div>
  &lt;img src="img1" alt=...>
  &lt;img src="img2" alt=...>
&lt;/div>
</pre>

   <div class=figure>
    <p><img
     alt="The top margin of the first IMG does     not contribute to the height of the DIV."
     src=height.png>

    <p class=caption>The height is measured from the top border edge of the
     first IMG to the bottom margin edge of the last.
   </div>
  </div>

  <p>With respect to the <a href="#inline-dimension">inline dimension,</a>
   one of the following constraints must hold among the used values of the
   given properties.

  <ul id=width-constraints>
   <li>If the element has the same orientation as its containing block (i.e.,
    both are <a href="#horizontal"><em>horizontal</em></a> or both are <a
    href="#vertical."><em>vertical</em></a>):
    <blockquote>
     <p>start margin + start border + start padding + inline dimension + end
      padding + end border + end margin = inline dimension of containing
      block
    </blockquote>

   <li>Otherwise the constraint is relative to the height or width of the <a
    href="#initial-containing-block."><em>initial containing block,</em></a>
    depending on whether the element is <a href="#horizontal">horizontal</a>
    or <a href="#vertical.">vertical,</a> respectively:
    <blockquote>
     <p>start margin + start border + start padding + inline dimension + end
      padding + end border + end margin = width or height of <a
      href="#initial-containing-block."><em>initial containing block</em></a>
    </blockquote>
  </ul>

  <p>The used values of the above properties, except for any values that are
   ‘<code class=css>auto</code>’, are calculated from the computed
   values, evaluating percentages. If this makes the inline dimension
   negative, then set its used value to 0. Ditto for start padding and end
   padding. <span class=note>Note that such negative values can only happen
   when the specified value includes ‘<code
   class=css>calc()</code>’.</span> Then apply one of the following cases:

  <ol>
   <li id=case1>
    <p>If none of the values is ‘<code class=css>auto</code>’, then there
     are three sub-cases:

    <ol>
     <li>If the current element's ‘<a href="#alignment"><code
      class=property>alignment</code></a>’ is ‘<code
      class=css>center</code>’, then the used values of start margin and
      end margin are set so that they are the same and the constraint is
      satisfied.

     <li>If ‘<a href="#alignment"><code
      class=property>alignment</code></a>’ corresponds to the <a
      href="#end"><em>end</em></a> edge, then the used value of the end
      margin is set to the value that satisfies the constraint.

     <li>If ‘<a href="#alignment"><code
      class=property>alignment</code></a>’ has any other value, then the
      used value of the start margin is set to the value that satisfies the
      constraint.
    </ol>

   <li>If the <a href="#inline-dimension">inline dimension</a> is ‘<code
    class=css>auto</code>’, then set the used value of all other properties
    in the constraint that are ‘<code class=css>auto</code>’ to 0 and set
    the used value of the inline dimension so that the constraint is
    satisfied. If that makes the used value negative, then set it to 0
    instead and apply <a href="#case1">case 1 above.</a>

   <li>If both the <a href="#start">start</a> and <a href="#end">end</a>
    margins are ‘<code class=css>auto</code>’, and ‘<a
    href="#alignment"><code class=property>alignment</code></a>’ is
    ‘<code class=property>center</code>’, then solve the constraint under
    the extra condition that the start and end margin are equal.

   <li>If both the <a href="#start">start</a> and <a href="#end">end</a>
    margins are ‘<code class=css>auto</code>’, and ‘<a
    href="#alignment"><code class=property>alignment</code></a>’ is not
    ‘<code class=property>center</code>’, then solve the constraint under
    the extra condition that the start and end margins are equal. But if that
    makes them negative, then set both to 0 and apply <a
    href="#case1">case 1 above.</a>

   <li>If only the <a href="#start">start</a> margin is ‘<code
    class=css>auto</code>’ and ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ corresponds to the <a
    href="#end">end</a> edge, then set the start margin to the value that
    satisfies the constraint.

   <li>If only the <a href="#start">start</a> margin is ‘<code
    class=css>auto</code>’ and ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ does not correspond to the <a
    href="#end">end</a> edge, then set the start margin to the value that
    satisfies the constraint. But if that makes it negative, then set it to 0
    instead and apply <a href="#case1">case 1 above.</a>

   <li>If only the <a href="#end">end</a> margin is ‘<code
    class=css>auto</code>’ and ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ corresponds to the <a
    href="#start">start</a> edge, then set the end margin to the value that
    satisfies the constraint.

   <li>If only the <a href="#end">end</a> margin is ‘<code
    class=css>auto</code>’ and ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ does not correspond to the <a
    href="#start">start</a> edge, then set the <a href="#end">end</a> margin
    to the value that satisfies the constraint. But if that makes it
    negative, then set it to 0 instead and apply <a href="#case1">case 1
    above.</a>
  </ol>

  <p class=note>Note that the best way to center a block is ‘<code
   class=css>margin-left: auto; margin-right: auto; alignment:
   center</code>’. Setting the margins to ‘<code
   class=css>auto</code>’, instead of leaving them at 0, provides a
   fallback for UAs that do not support ‘<a href="#alignment"><code
   class=property>alignment</code></a>’ (which is a level 3 feature).

  <p class=note>Note also that only ‘<code class=css>alignment:
   center</code>’ guarantees proper centering. Setting the margins to
   ‘<code class=css>auto</code>’ only centers blocks if they are narrower
   than their containing block, because only one of the two margins is
   allowed to become negative.

  <div class=example>
   <p>The following examples illustrate different ways of aligning a
    fixed-width block in its parent. Assume English text, default values for
    ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’ and ‘<a
    href="#direction"><code class=property>direction</code></a>’, a P of
    fixed with (e.g., ‘<code class=css>width: 30em</code>’), and the
    following HTML mark-up:

   <pre>
&lt;div>
  &lt;p>A paragraph here.
&lt;/div>
</pre>

   <p>The following aligns the right border edge of the P with the right
    content edge of the DIV:

   <pre>p {alignment: right}</pre>

   <p>The following centers the P:

   <pre>p {alignment: center}</pre>

   <p>Adding ‘<code class=css>auto</code>’ margins provides a fallback
    for UAs that do not support ‘<a href="#alignment"><code
    class=property>alignment</code></a>’. (The fallback has the desired
    effect as long as the DIV is wider than the P.)

   <pre>p {margin-left: auto; margin-right: auto; alignment: center}</pre>

   <p>“Conflicting” combinations of ‘<code class=css>auto</code>’
    margins and ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ are well-defined, but not very
    useful. They cause ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ to be all but ignored. The
    following right-aligns the P (unless it is too wide for the DIV):

   <pre>p {margin-left: auto; alignment: left}</pre>

   <p>Similarly, the following left-aligns the P in the DIV:

   <pre>p {margin-right: auto; alignment: right}</pre>

   <p>Fixed or percentage margins can be combined with alignment. The
    following puts the right border edge of the P at 2em inside the right
    content edge of the DIV:

   <pre>p {margin-right: 2em; alignment: right}</pre>

   <p>The following does the same. The value of ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ is
    ignored in a right-aligned block:

   <pre>p {margin-right: 2em; margin-left: 4em; alignment: right}</pre>
  </div>

  <h3 id=other-block-level-non-replaced-elements-><span class=secno>15.4.
   </span>Other block-level, non-replaced elements in normal flow</h3>

  <p>This section applies to <a href="#block-level">block-level,</a>
   non-replaced elements when ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ does not compute to ‘<code
   class=css>visible</code>’ (except if the ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ property's value has been propagated
   to the viewport).

  <p>The used values of <a href="#head">head</a> padding, <a
   href="#foot">foot</a> padding, <a href="#head">head</a> margin and <a
   href="#foot">foot</a> margin are calculated from the computed values, with
   any ‘<code class=css>auto</code>’ values replaced by 0.

  <p>If the <span>block flow dimension</span> is ‘<code
   class=css>auto</code>’, the used value is defined by <a
   href="#root-height">“‘<code class=css>Auto</code>’ heights for flow
   roots.”</a> Otherwise, the used value is evaluated from the computed
   value.

  <p>Apply the rules for <a href="#start">start</a> margin, <a
   href="#start">start</a> padding, <a href="#inline-dimension">inline
   dimension,</a> <a href="#end">end</a> padding and <a href="#end">end</a>
   margin as given above in <a href="#blockwidth"> “Block-level,
   non-replaced elements in normal flow when ‘<code
   class=property>overflow</code>’ computes to ‘<code
   class=css>visible</code>’.”</a>

  <h3 id=inline-block-or-floating-non-replaced-el><span class=secno>15.5.
   </span>‘<code class=property>Inline-block</code>’ or floating,
   non-replaced elements</h3>

  <p class=issue>Not yet generalized with head, foot, etc.

  <p>The used values of ‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’, ‘<a href="#margin-right"><code
   class=property>margin-right</code></a>’, ‘<a href="#margin-top"><code
   class=property>margin-top</code></a>’ and ‘<a
   href="#margin-bottom"><code class=property>margin-bottom</code></a>’ are
   derived from their computed values, except that a computed value of
   ‘<code class=css>auto</code>’ gives a used value of 0.

  <p>If the computed value of ‘<a href="#width"><code
   class=property>width</code></a>’ is ‘<code class=css>auto</code>’,
   the used value is the same as for ‘<code
   class=css>fit-content</code>’. Otherwise the computed value is evaluated
   to give the used value.

  <p>If the computed value of ‘<a href="#height"><code
   class=property>height</code></a>’ is ‘<code class=css>auto</code>’,
   the used value is defined by <a href="#root-height">“‘<code
   class=css>Auto</code>’ heights for flow roots.” </a> If it contains a
   percentage and the height of the containing block is not known (depends on
   this element), then the used value is also defined by <a
   href="#root-height">“‘<code class=css>Auto</code>’ heights for flow
   roots.”</a> Otherwise it is calculated by evaluating the computed value.

  <p>For inline-block boxes, the margin box is used when calculating the
   height of the line box. <span class=issue>Does this belong here?</span>

  <h3 id=abs-non-replaced-width><span class=secno>15.6. </span>Absolutely
   positioned, non-replaced elements</h3>

  <p>For the purposes of this section and the next, the term <dfn
   id=static-position>static position</dfn> (of an element) refers, roughly,
   to the position an element would have had in the normal flow. More
   precisely:

  <ul>
   <li>The static position for ‘<code class=property>left</code>’ is the
    distance from the left edge of the containing block to the left margin
    edge of a hypothetical box that would have been the first box of the
    element if its ‘<code class=property>position</code>’ property had
    been ‘<code class=css>static</code>’ and ‘<a href="#float"><code
    class=property>float</code></a>’ had been ‘<code
    class=property>none</code>’. The value is negative if the box's margin
    is to the left of the containing block's edge.

   <li>The static position for ‘<code class=property>right</code>’ is the
    distance from the right edge of the containing block to the right margin
    edge of the same hypothetical box as above. The value is positive if the
    box's margin is to the left of the containing block's edge.

   <li>The static position for ‘<code class=property>top</code>’ is the
    distance from the top edge of the containing block to the top margin edge
    of the same hypothetical box as above. The value is negative if the box's
    margin is above the containing block's edge.

   <li>The static position for ‘<code class=property>bottom</code>’ is
    the distance from the bottom edge of the containing block to the bottom
    margin edge of the same hypothetical box as above. The value is positive
    if the box's margin is above the containing block's edge.
  </ul>

  <p>But rather than actually calculating the dimensions of that hypothetical
   box, user agents are free to make a guess at its probable position.

  <p>For the purposes of calculating the static position, the containing
   block of fixed positioned elements is the initial containing block instead
   of the viewport, and all scrollable boxes should be assumed to be scrolled
   to their origin.

  <p>This constraint must hold among the used values:

  <blockquote>
   <p>‘<code class=property>left</code>’ + ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ +
    ‘<code class=property>border-left-width</code>’ + ‘<a
    href="#padding-left"><code class=property>padding-left</code></a>’ +
    ‘<a href="#width"><code class=property>width</code></a>’ + ‘<a
    href="#padding-right"><code class=property>padding-right</code></a>’ +
    ‘<code class=property>border-right-width</code>’ + ‘<a
    href="#margin-right"><code class=property>margin-right</code></a>’ +
    ‘<code class=property>right</code>’ = width of containing block
  </blockquote>

  <p>If all three of ‘<code class=property>left</code>’, ‘<a
   href="#width"><code class=property>width</code></a>’, and ‘<code
   class=property>right</code>’ are ‘<code class=css>auto</code>’:
   First set any ‘<code class=css>auto</code>’ values for ‘<a
   href="#margin-left"><code class=property>margin-left</code></a>’ and
   ‘<a href="#margin-right"><code class=property>margin-right</code></a>’
   to 0. Then, if the ‘<a href="#direction"><code
   class=property>direction</code></a>’ property of the containing block is
   ‘<code class=css>ltr</code>’ set ‘<code
   class=property>left</code>’ to the <a href="#static-position"><em>static
   position</em></a> and apply rule number three below; otherwise, set
   ‘<code class=property>right</code>’ to the <a
   href="#static-position"><em>static position</em></a> and apply rule number
   one below.

  <p>If none of the three is ‘<code class=css>auto</code>’: If both ‘<a
   href="#margin-left"><code class=property>margin-left</code></a>’ and
   ‘<a href="#margin-right"><code class=property>margin-right</code></a>’
   are ‘<code class=css>auto</code>’, solve the equation under the extra
   constraint that the two margins get equal values, unless this would make
   them negative, in which case when direction of the containing block is
   ‘<code class=css>ltr</code>’ (‘<code class=css>rtl</code>’), set
   ‘<a href="#margin-left"><code class=property>margin-left</code></a>’
   (‘<a href="#margin-right"><code
   class=property>margin-right</code></a>’) to zero and solve for ‘<a
   href="#margin-right"><code class=property>margin-right</code></a>’
   (‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’). <span class=issue>Should we
   remove the phrase starting with “unless”?</span> If one of ‘<a
   href="#margin-left"><code class=property>margin-left</code></a>’ or
   ‘<a href="#margin-right"><code class=property>margin-right</code></a>’
   is ‘<code class=css>auto</code>’, solve the equation for that value.
   If the values are over-constrained, ignore the value for ‘<code
   class=property>left</code>’ (in case the ‘<a href="#direction"><code
   class=property>direction</code></a>’ property of the containing block is
   ‘<code class=css>rtl</code>’) or ‘<code
   class=property>right</code>’ (in case ‘<a href="#direction"><code
   class=property>direction</code></a>’ is ‘<code
   class=css>ltr</code>’) and solve for that value.

  <p>Otherwise, set ‘<code class=css>auto</code>’ values for ‘<a
   href="#margin-left"><code class=property>margin-left</code></a>’ and
   ‘<a href="#margin-right"><code class=property>margin-right</code></a>’
   to 0, and pick the one of the following six rules that applies.

  <ol>
   <li>‘<code class=property>left</code>’ and ‘<a href="#width"><code
    class=property>width</code></a>’ are ‘<code class=css>auto</code>’
    and ‘<code class=property>right</code>’ is not ‘<code
    class=css>auto</code>’, then the width is as for ‘<code
    class=css>fit-content</code>’. Then solve for ‘<code
    class=property>left</code>’.

   <li>‘<code class=property>left</code>’ and ‘<code
    class=property>right</code>’ are ‘<code class=css>auto</code>’ and
    ‘<a href="#width"><code class=property>width</code></a>’ is not
    ‘<code class=css>auto</code>’, then if the ‘<a
    href="#direction"><code class=property>direction</code></a>’ property
    of the containing block is ‘<code class=css>ltr</code>’ set ‘<code
    class=property>left</code>’ to the <a
    href="#static-position"><em>static position</em></a>, otherwise set
    ‘<code class=property>right</code>’ to the <a
    href="#static-position"><em>static position</em></a>. Then solve for
    ‘<code class=property>left</code>’ (if ‘<a href="#direction"><code
    class=property>direction</code></a>’ is ‘<code
    class=css>rtl</code>’) or ‘<code class=property>right</code>’ (if
    ‘<a href="#direction"><code class=property>direction</code></a>’ is
    ‘<code class=css>ltr</code>’).

   <li>‘<a href="#width"><code class=property>width</code></a>’ and
    ‘<code class=property>right</code>’ are ‘<code
    class=css>auto</code>’ and ‘<code class=property>left</code>’ is
    not ‘<code class=css>auto</code>’, then the width is ‘<code
    class=css>fit-content</code>’. Then solve for ‘<code
    class=property>right</code>’.

   <li>‘<code class=property>left</code>’ is ‘<code
    class=css>auto</code>’, ‘<a href="#width"><code
    class=property>width</code></a>’ and ‘<code
    class=property>right</code>’ are not ‘<code class=css>auto</code>’,
    then solve for ‘<code class=property>left</code>’.

   <li>‘<a href="#width"><code class=property>width</code></a>’ is
    ‘<code class=css>auto</code>’, ‘<code class=property>left</code>’
    and ‘<code class=property>right</code>’ are not ‘<code
    class=css>auto</code>’, then solve for ‘<a href="#width"><code
    class=property>width</code></a>’.

   <li>‘<code class=property>right</code>’ is ‘<code
    class=css>auto</code>’, ‘<code class=property>left</code>’ and
    ‘<a href="#width"><code class=property>width</code></a>’ are not
    ‘<code class=css>auto</code>’, then solve for ‘<code
    class=property>right</code>’.
  </ol>

  <p>This constraint must also hold among the used values:

  <blockquote>
   <p>‘<code class=property>top</code>’ + ‘<a href="#margin-top"><code
    class=property>margin-top</code></a>’ + ‘<code
    class=property>border-top-width</code>’ + ‘<a
    href="#padding-top"><code class=property>padding-top</code></a>’ +
    ‘<a href="#height"><code class=property>height</code></a>’ + ‘<a
    href="#padding-bottom"><code class=property>padding-bottom</code></a>’
    + ‘<code class=property>border-bottom-width</code>’ + ‘<a
    href="#margin-bottom"><code class=property>margin-bottom</code></a>’ +
    ‘<code class=property>bottom</code>’ = height of containing block
  </blockquote>

  <p>If all three of ‘<code class=property>top</code>’, ‘<a
   href="#height"><code class=property>height</code></a>’, and ‘<code
   class=property>bottom</code>’ are ‘<code class=css>auto</code>’, set
   ‘<code class=property>top</code>’ to the static position and apply
   rule number three below.

  <p>If none of the three are ‘<code class=css>auto</code>’: If both
   ‘<a href="#margin-top"><code class=property>margin-top</code></a>’ and
   ‘<a href="#margin-bottom"><code
   class=property>margin-bottom</code></a>’ are ‘<code
   class=css>auto</code>’, solve the equation under the extra constraint
   that the two margins get equal values. If one of ‘<a
   href="#margin-top"><code class=property>margin-top</code></a>’ or ‘<a
   href="#margin-bottom"><code class=property>margin-bottom</code></a>’ is
   ‘<code class=css>auto</code>’, solve the equation for that value. If
   the values are over-constrained, ignore the value for ‘<code
   class=property>bottom</code>’ and solve for that value.

  <p>Otherwise, pick the one of the following six rules that applies.

  <ol>
   <li>‘<code class=property>top</code>’ and ‘<a href="#height"><code
    class=property>height</code></a>’ are ‘<code class=css>auto</code>’
    and ‘<code class=property>bottom</code>’ is not ‘<code
    class=css>auto</code>’: The used value of ‘<code
    class=property>bottom</code>’ is its computed value. The used height is
    defined by <a href="#root-height">“‘<code class=css>Auto</code>’
    heights for flow roots.” </a> The used values of ‘<a
    href="#margin-top"><code class=property>margin-top</code></a>’ and
    ‘<a href="#margin-bottom"><code
    class=property>margin-bottom</code></a>’ are their computed values,
    except that any ‘<code class=css>auto</code>’ gives a used value of
    0. Finally, the constraint gives the used value of ‘<code
    class=property>top</code>’.

   <li>‘<code class=property>top</code>’ and ‘<code
    class=property>bottom</code>’ are ‘<code class=css>auto</code>’ and
    ‘<a href="#height"><code class=property>height</code></a>’ is not
    ‘<code class=css>auto</code>’: The used value of ‘<code
    class=property>top</code>’ is its <a href="#static-position"><em>static
    position.</em></a> The used values of ‘<a href="#margin-top"><code
    class=property>margin-top</code></a>’ and ‘<a
    href="#margin-bottom"><code class=property>margin-bottom</code></a>’
    are their computed values, except that any ‘<code
    class=css>auto</code>’ gives a used value of 0. Finally, the constraint
    gives the used value for ‘<code class=property>bottom</code>’.

   <li>‘<a href="#height"><code class=property>height</code></a>’ and
    ‘<code class=property>bottom</code>’ are ‘<code
    class=css>auto</code>’ and ‘<code class=property>top</code>’ is not
    ‘<code class=css>auto</code>’: The used height is defined by <a
    href="#root-height">“‘<code class=css>Auto</code>’ heights for flow
    roots.”</a> The used values of ‘<a href="#margin-top"><code
    class=property>margin-top</code></a>’ and ‘<a
    href="#margin-bottom"><code class=property>margin-bottom</code></a>’
    are their computed values, except that any ‘<code
    class=css>auto</code>’ gives a used value of 0. Finally, the constraint
    gives the used value of ‘<code class=property>bottom</code>’.

   <li>‘<code class=property>top</code>’ is ‘<code
    class=css>auto</code>’, ‘<a href="#height"><code
    class=property>height</code></a>’ and ‘<code
    class=property>bottom</code>’ are not ‘<code
    class=css>auto</code>’: The used values of ‘<a
    href="#margin-top"><code class=property>margin-top</code></a>’ and
    ‘<a href="#margin-bottom"><code
    class=property>margin-bottom</code></a>’ are their computed values,
    except that any ‘<code class=css>auto</code>’ gives a used value of
    0. The constraint gives the used value for ‘<code
    class=property>top</code>’.

   <li>‘<a href="#height"><code class=property>height</code></a>’ is
    ‘<code class=css>auto</code>’, ‘<code class=property>top</code>’
    and ‘<code class=property>bottom</code>’ are not ‘<code
    class=css>auto</code>’: The used values of ‘<a
    href="#margin-top"><code class=property>margin-top</code></a>’ and
    ‘<a href="#margin-bottom"><code
    class=property>margin-bottom</code></a>’ are their computed values,
    except that any ‘<code class=css>auto</code>’ gives a used value of
    0. The constraint gives the used value for ‘<a href="#height"><code
    class=property>height</code></a>’.

   <li>‘<code class=property>bottom</code>’ is ‘<code
    class=css>auto</code>’, ‘<code class=property>top</code>’ and ‘<a
    href="#height"><code class=property>height</code></a>’ are not ‘<code
    class=css>auto</code>’: The used values of ‘<a
    href="#margin-top"><code class=property>margin-top</code></a>’ and
    ‘<a href="#margin-bottom"><code
    class=property>margin-bottom</code></a>’ are their computed values,
    except that any ‘<code class=css>auto</code>’ gives a used value of
    0. The constraint gives the used value for ‘<code
    class=property>bottom</code>’.
  </ol>

  <h3 id=abs-replaced><span class=secno>15.7. </span>Absolutely positioned,
   replaced elements</h3>

  <p>This situation is similar to the previous one, except that the element
   may have an intrinsic size or ratio. The sequence of substitutions is now:

  <ol>
   <li>The used value of ‘<a href="#width"><code
    class=property>width</code></a>’ and ‘<a href="#height"><code
    class=property>height</code></a>’ is determined as for <a
    href="#inline-replaced">inline replaced elements</a>.

   <li>For each of ‘<code class=property>top</code>’, ‘<code
    class=property>right</code>’, ‘<code class=property>bottom</code>’,
    ‘<code class=property>left</code>’, ‘<a href="#margin-top"><code
    class=property>margin-top</code></a>’, ‘<a href="#margin-right"><code
    class=property>margin-right</code></a>’, ‘<a
    href="#margin-bottom"><code class=property>margin-bottom</code></a>’
    and ‘<a href="#margin-left"><code
    class=property>margin-left</code></a>’, if the computed value is not
    ‘<code class=css>auto</code>’, the used value is equal to the
    computed value.

   <li>If both ‘<code class=property>left</code>’ and ‘<code
    class=property>right</code>’ have the value ‘<code
    class=css>auto</code>’, then if ‘<a href="#direction"><code
    class=property>direction</code></a>’ of the containing block is
    ‘<code class=css>ltr</code>’, the used value of ‘<code
    class=property>left</code>’ is its <a
    href="#static-position"><em>static position;</em></a> else if ‘<a
    href="#direction"><code class=property>direction</code></a>’ is
    ‘<code class=css>rtl</code>’, the used value of ‘<code
    class=property>right</code>’ is its <a
    href="#static-position"><em>static position.</em></a>

   <li>If both ‘<code class=property>top</code>’ and ‘<code
    class=property>bottom</code>’ have the value ‘<code
    class=css>auto</code>’, then the used value of ‘<code
    class=property>top</code>’ is its <a href="#static-position"><em>static
    position.</em></a>

   <li>If ‘<code class=property>left</code>’ or ‘<code
    class=property>right</code>’ (or both) are ‘<code
    class=css>auto</code>’, and ‘<a href="#margin-left"><code
    class=property>margin-left</code></a>’ is ‘<code
    class=css>auto</code>’, then the used value of ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ is 0.

   <li>If ‘<code class=property>left</code>’ or ‘<code
    class=property>right</code>’ (or both) are ‘<code
    class=css>auto</code>’, and ‘<a href="#margin-right"><code
    class=property>margin-right</code></a>’ is ‘<code
    class=css>auto</code>’, then the used value of ‘<a
    href="#margin-right"><code class=property>margin-right</code></a>’ is
    0.

   <li>If neither ‘<code class=property>left</code>’ nor ‘<code
    class=property>right</code>’ are ‘<code class=css>auto</code>’ and
    both ‘<a href="#margin-left"><code
    class=property>margin-left</code></a>’ and ‘<a
    href="#margin-right"><code class=property>margin-right</code></a>’ are
    ‘<code class=css>auto</code>’, then the used values satisfy the extra
    constraint that ‘<a href="#margin-right"><code
    class=property>margin-right</code></a>’ and ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ are
    equal, unless this would make them negative, in which case when the
    direction of the containing block is ‘<code class=css>ltr</code>’
    (‘<code class=css>rtl</code>’), the used value of ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ (‘<a
    href="#margin-right"><code class=property>margin-right</code></a>’) is
    0. <span class=issue>Remove the part starting with “unless”? It looks
    better to center the image.</span>
  </ol>

  <p>The remaining used values, if any, follows from these two constraints:

  <blockquote>
   <p>‘<code class=property>left</code>’ + ‘<a
    href="#margin-left"><code class=property>margin-left</code></a>’ +
    ‘<code class=property>border-left-width</code>’ + ‘<a
    href="#padding-left"><code class=property>padding-left</code></a>’ +
    ‘<a href="#width"><code class=property>width</code></a>’ + ‘<a
    href="#padding-right"><code class=property>padding-right</code></a>’ +
    ‘<code class=property>border-right-width</code>’ + ‘<a
    href="#margin-right"><code class=property>margin-right</code></a>’ +
    ‘<code class=property>right</code>’ = width of containing block

   <p>‘<code class=property>top</code>’ + ‘<a href="#margin-top"><code
    class=property>margin-top</code></a>’ + ‘<code
    class=property>border-top-width</code>’ + ‘<a
    href="#padding-top"><code class=property>padding-top</code></a>’ +
    ‘<a href="#height"><code class=property>height</code></a>’ + ‘<a
    href="#padding-bottom"><code class=property>padding-bottom</code></a>’
    + ‘<code class=property>border-bottom-width</code>’ + ‘<a
    href="#margin-bottom"><code class=property>margin-bottom</code></a>’ +
    ‘<code class=property>bottom</code>’ = height of containing block
  </blockquote>

  <p>If the first equation is over-constrained, ignore the value for either
   ‘<code class=property>left</code>’ (in case the ‘<a
   href="#direction"><code class=property>direction</code></a>’ property of
   the containing block is ‘<code class=css>rtl</code>’) or ‘<code
   class=property>right</code>’ (in case ‘<a href="#direction"><code
   class=property>direction</code></a>’ is ‘<code
   class=css>ltr</code>’) and solve for that value.

  <p>If the second equation is over-constrained, ignore the value for
   ‘<code class=property>bottom</code>’ and solve for that value.

  <h3 id=block-level-replaced-elements-in-normal-><span class=secno>15.8.
   </span>Block-level, replaced elements in normal flow</h3>

  <p>Apply the rules for <a href="#inline-replaced">inline replaced
   elements</a>, but ignore the resulting values for ‘<a
   href="#margin-left"><code class=property>margin-left</code></a>’ and
   ‘<a href="#margin-right"><code
   class=property>margin-right</code></a>’. To compute the used value of
   those, apply the rules for <a href="#blockwidth">block-level, non-replaced
   elements</a> using the used values just found for ‘<a
   href="#width"><code class=property>width</code></a>’, ‘<code
   class=property>border</code>’ and ‘<a href="#padding"><code
   class=property>padding</code></a>’ as if they were the computed values.

  <h3 id=floating-non-replaced-elements><span class=secno>15.9.
   </span>Floating, non-replaced elements</h3>

  <p>The used values of the margins are derived from the computed values,
   except that the used values of any margins computed as ‘<code
   class=css>auto</code>’ are ‘<code class=css>0</code>’.

  <p>The used value of ‘<a href="#width"><code
   class=property>width</code></a>’ is derived from the computed value,
   except that if ‘<a href="#width"><code
   class=property>width</code></a>’ is computed as ‘<code
   class=css>auto</code>’, the used value is the same as for ‘<code
   class=css>fit-content</code>’.

  <p>If the computed value of ‘<a href="#height"><code
   class=property>height</code></a>’ is ‘<code class=css>auto</code>’,
   the used value is given by <a href="#root-height">“‘<code
   class=css>Auto</code>’ heights for flow roots.” </a> If the computed
   value includes a percentage and the height of the containing block is not
   known (depends on this element), then the used value is computed as if the
   computed value were ‘<code class=css>auto</code>’. Otherwise the
   computed value is evaluated to give the used value.

  <h3 id=root-height><span class=secno>15.10. </span>Auto heights for flow
   roots</h3>

  <p>In certain cases (see the preceding sections), the height of an element
   is computed as follows:

  <p>If it only has inline-level children, the height is the distance between
   the top of the topmost line box and the bottom of the bottommost line box.

  <p>If it has <a href="#block-level">block-level</a> children, the height is
   the distance between the top margin-edge of the topmost block-level child
   box and the bottom margin-edge of the bottommost block-level child box.

  <p>Absolutely positioned children are ignored, and relatively positioned
   boxes are considered without their offset. Note that the child box may be
   an <em>anonymous block box.</em>

  <p>In addition, if the element has any floating descendants whose bottom
   margin edge is below the bottom, then the height is increased to include
   those edges. Only floats that are children of the element itself or of
   descendants in the normal flow are taken into account, e.g., floats inside
   absolutely positioned descendants or other floats are not.

  <h2 id=the-float-property><span class=secno>16. </span>The float property</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=float>float</dfn>

    <tr>
     <th>Value:

     <td>[ left | right | top | bottom | start | end | none |
      <var>&lt;page-floats&gt;</var> ] &amp;&amp; contour?

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>all, but see text

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified

    <tr>
     <th>Canonical order:

     <td>order of grammar
  </table>

  <p class=issue>Adding ‘<a href="#start"><code
   class=css>start</code></a>’ and ‘<a href="#end"><code
   class=css>end</code></a>’ was decided at 2009-12-02 telcon. Precise
   definitions not yet decided: does it depend on ‘<a
   href="#direction"><code class=property>direction</code></a>’ of the
   element itself or its parent?

  <p>This property specifies whether a box should float to the left, right,
   or not at all. It only applies if the element has a ‘<a
   href="#display0"><code class=property>display</code></a>’ other than
   ‘<code class=css>none</code>’ and a ‘<code
   class=property>position</code>’ of ‘<code class=css>static</code>’
   or ‘<code class=css>relative</code>’.

  <p class=note>The ‘<a href="#float"><code
   class=property>float</code></a>’ property in turn influences the
   computed value of ‘<a href="#display0"><code
   class=property>display</code></a>’. See <a href="#display">“The
   display property.”</a>

  <p>The values of this property have the following meanings:

  <dl>
   <dt>top

   <dd>Same as ‘<code class=css>left</code>’

   <dt>left

   <dd>If ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’ is ‘<code
    class=css>tb</code>’, the element generates a box that is floated to
    the left and content flows on the right side of the box (subject to the
    ‘<a href="#clear"><code class=property>clear</code></a>’ property).
    If ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’ has a different value, the
    element generates a box that is floated to the top and content flows on
    the bottom side of the box (subject to the ‘<a href="#clear"><code
    class=property>clear</code></a>’ property).

   <dt>bottom

   <dd>same as ‘<code class=css>right</code>’

   <dt>right

   <dd>Similar to ‘<code class=css>left</code>’, except the box is
    floated to the right (if ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’ is ‘<code
    class=css>tb</code>’) or to the bottom (otherwise), and content flows
    on the left or top side of the box.

   <dt>start

   <dd>If the ‘<a href="#direction"><code
    class=property>direction</code></a>’ property is ‘<code
    class=css>ltr</code>’, the same as ‘<code class=css>left</code>’;
    otherwise the same as ‘<code class=css>right</code>’.

   <dt>end

   <dd>If the ‘<a href="#direction"><code
    class=property>direction</code></a>’ property is ‘<code
    class=css>rtl</code>’, the same as ‘<code class=css>right</code>’;
    otherwise the same as ‘<code class=css>left</code>’.

   <dt>none

   <dd>The box is not floated.

   <dt><var>&lt;page-floats&gt;</var>

   <dd>See Generated Content for Paged Media <a href="#ref-CSS3GCPM"
    rel=biblioentry>[CSS3GCPM]<!--{{CSS3GCPM}}--></a>. <span
    class=issue>Check that the names page-top, page-bottom, next-top, or
    otherwise do not clash with top and bottom</span>

   <dt>contour

   <dd>Text is flowed around the actual shape of the element rather than
    around its margin box. Only applies if the element is a replaced element
    without a border and without padding. See under ‘<a
    href="#float-displace1"><code class=property>float-displace</code></a>’
    for how it affects text flow.
  </dl>

  <p class=issue><cite>Exclusions and shapes</cite> <a
   href="#ref-CSS3-EXCLUSIONS"
   rel=biblioentry>[CSS3-EXCLUSIONS]<!--{{CSS3-EXCLUSIONS}}--></a> suggests a
   separate property ‘<code class=property>shape-outside</code>’ instead
   of ‘<code class=css>contour</code>’, to allow an arbitrary shape
   independent of the image that is displayed. ‘<code class=css>IMG {float:
   left contour}</code>’ would then be written ‘<code class=css>IMG
   {float: left; shape-outside: attr(src url)}</code>’.

  <p>User agents may treat float as ‘<code class=css>none</code>’ on the
   root element.

  <p>The <dfn id=exclusion-zone>exclusion zone</dfn> of a floating element
   is, roughly, the area that text may not intrude into when it flows around
   a float. More precisely, given a point <var>P</var> and a floating element
   <var>F</var>, the following determines if <var>P</var> is inside or
   outside the exclusion zone of <var>F</var>:

  <ul>
   <li>
    <p>If <var>F</var> is a replaced element and its value of ‘<a
     href="#float"><code class=property>float</code></a>’ includes the
     keyword ‘<code class=css>contour</code>’ and <var>F</var> has no
     border and no padding:

    <ul>
     <li>
      <p>If <var>F</var> is a <a href="#horizontal">horizontal</a> element:

      <ul>
       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>left</code>’ or ‘<code
         class=css>top</code>’, then <var>P</var> is inside the exclusion
         zone of <var>F</var> iff <var>P</var> or any point to the right of
         <var>P</var> on a horizontal line through <var>P</var> is a in a
         non-transparent area of <var>F</var>.

       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>right</code>’ or ‘<code
         class=css>bottom</code>’, then <var>P</var> is inside the
         exclusion zone of <var>F</var> iff <var>P</var> or any point to the
         left of <var>P</var> on a horizontal line through <var>P</var> is a
         in a non-transparent area of <var>F</var>.
      </ul>

     <li>
      <p>If <var>F</var> is <a href="#vertical.">vertical</a>:

      <ul>
       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>left</code>’ or ‘<code
         class=css>top</code>’, then <var>P</var> is inside the exclusion
         zone of <var>F</var> iff <var>P</var> or any point below
         <var>P</var> on a vertical line through <var>P</var> is a in a
         non-transparent area of <var>F</var>.

       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>right</code>’ or ‘<code
         class=css>bottom</code>’, then <var>P</var> is inside the
         exclusion zone of <var>F</var> iff <var>P</var> or any point above
         <var>P</var> on a vertical line through <var>P</var> is a in a
         non-transparent area of <var>F</var>.
      </ul>
    </ul>

   <li>
    <p>If <var>F</var> is not a replaced element, or if ‘<a
     href="#float"><code class=property>float</code></a>’ does not include
     the keyword ‘<code class=css>contour</code>’, or if <var>F</var> has
     a border or a padding:

    <ul>
     <li>
      <p>If <var>F</var> is <a href="#horizontal">horizontal</a>:

      <ul>
       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>left</code>’ or ‘<code
         class=css>top</code>’, then <var>P</var> is inside the exclusion
         zone of <var>F</var> iff <var>P</var> or any point to the right of
         <var>P</var> on a horizontal line through <var>P</var> is inside the
         <a href="#margin-area">margin area</a> of <var>F</var>.

       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>right</code>’ or ‘<code
         class=css>bottom</code>’, then <var>P</var> is inside the
         exclusion zone of <var>F</var> iff <var>P</var> or any point to the
         left of <var>P</var> on a horizontal line through <var>P</var> is
         inside the <a href="#margin-area">margin area</a> of <var>F</var>.
      </ul>

     <li>
      <p>If <var>F</var> is <a href="#vertical.">vertical</a>:

      <ul>
       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>left</code>’ or ‘<code
         class=css>top</code>’, then <var>P</var> is inside the exclusion
         zone of <var>F</var> iff <var>P</var> or any point below
         <var>P</var> on a vertical line through <var>P</var> is inside the
         <a href="#margin-area">margin area</a> of <var>F</var>.

       <li>
        <p>If ‘<a href="#float"><code class=property>float</code></a>’ is
         ‘<code class=css>right</code>’ or ‘<code
         class=css>bottom</code>’, then <var>P</var> is inside the
         exclusion zone of <var>F</var> iff <var>P</var> or any point above
         <var>P</var> on a vertical line through <var>P</var> is inside the
         <a href="#margin-area">margin area</a> of <var>F</var>.
      </ul>
    </ul>
  </ul>

  <p><dfn id=non-transparent>Non-transparent</dfn> in this case means
   anything other than fully transparent. E.g., an area that is 90%
   transparent is non-transparent.

  <div class=figure>
   <p><img
    alt="The contour of a left-floating image   includes all points that have a non-transparent part of the image to   their right."
    src=contour.png>

   <p class=caption>When ‘<a href="#float"><code
    class=property>float</code></a>’ is ‘<code class=css>left
    contour</code>’, then the exclusion zone of the element includes all
    non-transparent parts (blue) and all points that are to the left of a
    non-transparent part (grey).
  </div>

  <p class=note>Note that the ‘<a href="#margin"><code
   class=property>margin</code></a>’ is ignored for the purposes of
   determining the exclusion zone if ‘<code class=css>contour</code>’ is
   used. To create a visual “margin” around an image, an author can
   instead include an area in the image that is 99% transparent.

  <p class=issue>It might occasionally be nice to be able to give that
   “margin” a thickness in em without scaling the whole image, but that
   is a difficult operation…

  <p class=issue>Replaced elements can be handled by plug-ins and the plug-in
   API may not provide access to the contour of the object. Should there be a
   sentence about UAs not having to compute a contour in such a case?

  <h3 id=introduction-to-floats><span class=secno>16.1. </span>Introduction
   to floats</h3>

  <p>(This section is not normative.)

  <p>A float is a box that is shifted to the left or right on the current
   line. The most interesting characteristic of a float (or “floating”
   box) is that content may flow along its side (or be prohibited from doing
   so by the ‘<a href="#clear"><code class=property>clear</code></a>’
   property). Content flows down the right side of a left-floated box and
   down the left side of a right-floated box. The following is a
   (non-normative) introduction to float positioning and content flow; the
   exact rules governing float positioning are given in the next section.

  <p>A floated box is shifted to the left or right until its margin edge
   touches the containing block edge or the margin edge of another float. If
   there is a line box, the top of the floated box is aligned with the top of
   the current line box.

  <p>If there isn't enough horizontal room for the float, it is shifted
   downward until either it fits or there are no more floats present.

  <p>Since a float is not in the flow, non-positioned block boxes created
   before and after the float box flow vertically as if the float didn't
   exist. However, <em>line boxes</em> created next to the float are
   shortened to make room for the margin box of the float. If a shortened
   line box is too small to contain any further content, then it is shifted
   downward until either it fits or there are no more floats present. Any
   content in the current line before a floated box is re-flowed in the first
   available line on the other side of the float. In other words, if inline
   boxes are placed on the line before a left float is encountered that fits
   in the remaining line box space, the left float is placed on that line,
   aligned with the top of the line box, and then the inline boxes already on
   the line are moved accordingly to the right of the float (the right being
   the other side of the left float) and vice versa for rtl and right floats.

  <div class=example>
   <p>In the following document fragment, the containing block is too narrow
    to contain the content next to the float, so the content gets moved to
    below the floats where it is aligned in the line box according to the
    text-align property.

   <pre>
p { width: 10em; border: solid aqua; }
span { float: left; width: 5em; height: 5em; border: solid blue; }

...

&lt;p&gt;
  &lt;span&gt; &lt;/span&gt;
  Supercalifragilisticexpialidocious
&lt;/p&gt;
</pre>

   <p>This fragment might look like this:

   <div class=figure>
    <p><img
     alt="Image illustrating the effect of an   unbreakable piece of content being reflowed to just after a float   which left insufficient room next to it for the content to fit."
     src=supercal.png>

    <p class=caption>The text is too long to fit in a shortened line box next
     to the float (dark blue box) and so it is pushed down until it is passed
     the float.
   </div>
  </div>

  <p>Several floats may be adjacent, and this model also applies to adjacent
   floats in the same line.

  <div class=example>
   <p>The following rule floats all IMG boxes with <code>class="icon"</code>
    to the left (and sets the left margin to ‘<code class=css>0</code>’):

   <pre>
img.icon { 
  float: left;
  margin-left: 0;
}
</pre>
  </div>

  <div class=example>
   <p>Consider the following HTML source and style sheet:

   <pre>
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
    &lt;TITLE&gt;Float example&lt;/TITLE&gt;
    &lt;STYLE type="text/css"&gt;
      IMG { float: left }
      BODY, P, IMG { margin: 2em }
    &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;P&gt;&lt;IMG src=img.png alt="This image will illustrate floats"&gt;
       Some sample text that has no other...
  &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>

   <p>The IMG box is floated to the left. The content that follows is
    formatted to the right of the float, starting on the same line as the
    float. The line boxes to the right of the float are shortened due to the
    float's presence, but resume their “normal” width (that of the
    containing block established by the P element) after the float. This
    document might be formatted as:

   <div class=figure>
    <p><img
     alt="Image illustrating how floating boxes interact with margins."
     src=floateg.png>

    <p class=caption>An image showing the various margins of the BODY, P and
     IMG element. Not that the top margin of the floating IMG does not
     collapse with the top margins of the P and BODY elements.
   </div>

   <p>Formatting would have been exactly the same if the document had been:

   <pre>
&lt;BODY&gt;
  &lt;P&gt;Some sample text 
  &lt;IMG src=img.png alt="This image will illustrate floats"&gt;
           that has no other...
&lt;/BODY&gt;
</pre>

   <p>because the content to the left of the float is displaced by the float
    and re-flowed down its right side.
  </div>

  <p>As stated in <a href="#collapsing-margins">“Collapsing margins,”
   </a> the margins of floating boxes never <a
   href="#collapse."><em>collapse</em></a> with margins of adjacent boxes.
   Thus, in the previous example, vertical margins do not collapse between
   the P box and the floated IMG box.

  <p>The contents of floats are stacked as if floats generated new stacking
   contexts, except that any elements that actually create new stacking
   contexts take part in the float's parent's stacking context. A float can
   overlap other boxes in the normal flow (e.g., when a normal flow box next
   to a float has negative margins). When this happens, floats are rendered
   in front of non-positioned in-flow blocks, but behind in-flow inlines.

  <div class=example>
   <p>Here is another illustration, showing what happens when a float
    overlaps borders of elements in the normal flow.

   <div class=figure>
    <p><img
     alt="Image showing a floating image   that overlaps the borders of two paragraphs: the borders are   interrupted by the image."
     src=float2p.png>

    <p class=caption>A floating image obscures borders of block boxes it
     overlaps.
   </div>
  </div>

  <p>The following example illustrates the use of the ‘<a
   href="#clear"><code class=property>clear</code></a>’ property to prevent
   content from flowing next to a float.

  <div class=example>
   <p>Assuming a rule such as this:

   <pre>
p { clear: left }
</pre>

   <p>formatting might look like this:

   <div class=figure>
    <p><img
     alt="Image showing a floating   image and the effect of 'clear: left' on the two paragraphs."
     src=floatclear.png>

    <p class=caption>Both paragraphs have set ‘<code class=css>clear:
     left</code>’, which causes the second paragraph to be “pushed
     down” to a position below the float – <a
     href="#clearance."><em>clearance</em></a> is added above its top margin
     to accomplish this (see the ‘<a href="#clear"><code
     class=property>clear</code></a>’ property).
   </div>
  </div>

  <h3 id=rules-for-positioning-floats><span class=secno>16.2. </span>Rules
   for positioning floats</h3>

  <p>Here are the precise rules that govern the positions of floats with a <a
   href="#horizontal"><em>horizontal</em></a> containing block. References to
   other elements in these rules refer only to other elements in the same <a
   href="#flow"><em>flow</em></a> as the float's parent.

  <ol>
   <li>The left <a href="#margin-edge.">margin edge</a> of a left-floating
    box may not be to the left of the left edge of its <a
    href="#containing-block">containing block</a>. An analogous rule holds
    for right-floating elements.
    <!-- The A margin edge of box that floats to the A may not be to A of
the A edge of its containing block -->

   <li>If the current box is left-floating, and there are any left-floating
    boxes generated by elements earlier in the source document, then for each
    such earlier box, either the left <a href="#margin-edge.">margin edge</a>
    of the current box must be to the right of the right <a
    href="#margin-edge.">margin edge</a> of the earlier box, or its top must
    be lower than the bottom of the earlier box. Analogous rules hold for
    right-floating boxes.

   <li>The right <a href="#margin-edge.">margin edge</a> of a left-floating
    box may not be to the right of the left <a href="#margin-edge.">margin
    edge</a> of any right-floating box that is to the right of it. Analogous
    rules hold for right-floating elements.

   <li>A floating box's top <a href="#margin-edge.">margin edge</a> may not
    be higher than the top of its <a href="#containing-block">containing
    block</a>. When the float occurs between two collapsing margins, the
    float is positioned as if it had an otherwise empty <a
    href="#anonymous-box" title="anonymous box">anonymous block parent</a>
    taking part in the flow. The position of such a parent is defined by <a
    href="#collapsed-through" title="collapsed through">the rules</a> in the
    section on margin collapsing.

   <li>The top <a href="#margin-edge.">margin edge</a> of a floating box may
    not be higher than the margin top of any <a
    href="#block-level">block-level</a> or <span>floated</span> box generated
    by an element earlier in the source document.

   <li>The top <a href="#margin-edge.">margin edge</a> of an element's
    floating box may not be higher than the top of any <span>line-box</span>
    containing a box generated by an element earlier in the source document.

   <li>A left-floating box that has another left-floating box to its left may
    not have its right margin edge to the right of its containing block's
    right edge. (Loosely: a left float may not stick out at the right edge,
    unless it is already as far to the left as possible.) An analogous rule
    holds for right-floating elements.

   <li>A floating box must be placed as high as possible.

   <li>A left-floating box must be put as far to the left as possible, a
    right-floating box as far to the right as possible. A higher position is
    preferred over one that is further to the left/right.
  </ol>

  <div class=example>
   <p>This HTML fragment results in the b floating to the right.

   <pre>&lt;P>a&lt;SPAN style="float: right">b&lt;/SPAN>&lt;/P></pre>

   <p>If the P element's width is enough, the a and the b will be side by
    side. It might look like this:

   <div class=figure>
    <p><img alt="An a at the left side of a box and a b at the right side"
     src=float-right.png>
   </div>
  </div>

  <p>The rules for a float with a containing block with ‘<code
   class=css>writing-mode: rl</code>’ are exactly the same after replacing
   left with top, right with bottom, top with right, bottom with left and
   adjusting the text accordingly. Here they are:

  <p class=issue>[Still some words like lower and higher to replace...]

  <ol>
   <li>The top <a href="#margin-edge.">margin edge</a> of a top-floating box
    may not be above the top edge of its <a
    href="#containing-block">containing block</a>. An analogous rule holds
    for bottom-floating elements.

   <li>If the current box is top-floating, and there are any top-floating
    boxes generated by elements earlier in the source document, then for each
    such earlier box, either the top <a href="#margin-edge.">margin edge</a>
    of the current box must be below the bottom <a
    href="#margin-edge.">margin edge</a> of the earlier box, or its right
    must be to the left of the left margin edge of the earlier box. Analogous
    rules hold for bottom-floating boxes.

   <li>The bottom <a href="#margin-edge.">margin edge</a> of a top-floating
    box may not be below the top <a href="#margin-edge.">margin edge</a> of
    any bottom-floating box that is below it. Analogous rules hold for
    bottom-floating elements.

   <li>A floating box's right <a href="#margin-edge.">margin edge</a> may not
    be to the right of the right edge of its <a
    href="#containing-block">containing block</a>. When the float occurs
    between two collapsing margins, the float is positioned as if it had an
    otherwise empty <a href="#anonymous-box" title="anonymous box">anonymous
    block parent</a> taking part in the flow. The position of such a parent
    is defined by <a href="#collapsed-through" title="collapsed through">the
    rules</a> in the section on margin collapsing.

   <li>The right <a href="#margin-edge.">margin edge</a> of a floating box
    may not be to the right of the right margin edge of any <a
    href="#block-level">block-level</a> or <span>floated</span> box generated
    by an element earlier in the source document.

   <li>The right <a href="#margin-edge.">margin edge</a> of an element's
    floating box may not be to the right of the right edge of any
    <span>line-box</span> containing a box generated by an element earlier in
    the source document.

   <li>A top-floating box that has another top-floating box above it may not
    have its bottom margin edge below its containing block's bottom edge.
    (Loosely: a top float may not stick out at the bottom edge, unless it is
    already as far to the top as possible.) An analogous rule holds for
    bottom-floating elements.

   <li>A floating box must be placed as far to the right as possible.

   <li>A top-floating box must be put as far to the top as possible, a
    bottom-floating box as far to the bottom as possible. A position further
    to the right is preferred over one that is further to the top/bottom.
  </ol>

  <p>The rules for a float with a containing block with ‘<code
   class=css>writing-mode: lr</code>’ are exactly the same after replacing
   left with top, right with bottom, top with left and bottom with right.
   They are given here for completeness:

  <p class=issue>[...]

  <p class=note>Note that a box with a value of ‘<a href="#float"><code
   class=property>float</code></a>’ other than ‘<code
   class=css>none</code>’ is a <a href="#flow-root"><em>flow root.</em></a>

  <p>The border box of a table, a <a href="#block-level">block-level</a>
   replaced element, or an element in the normal flow that is a <a
   href="#flow-root"><em>flow root</em></a> (such as an element with ‘<a
   href="#overflow1"><code class=property>overflow</code></a>’ other than
   ‘<code class=css>visible</code>’) must not overlap any floats in the
   same flow as the element itself. If necessary, implementations should
   clear the said element by placing it below any preceding floats, but may
   place it adjacent to such floats if there is sufficient space, <span
   class=issue>by increasing one margin and decreasing the opposite margin.
   (“Sufficient space” means that the opposite margin does not become
   negative.)</span>

  <h2 id=the-clear-property><span class=secno>17. </span>The clear property</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=clear>clear</dfn>

    <tr>
     <th>Value:

     <td>none | left | right | both

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td><a href="#block-level">block-level</a> elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p class=issue>[To do: copy from CSS2 <a href="#ref-CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> and generalize to vertical
   text, define <dfn id=clearance.>clearance.</dfn>]

  <h2 id=the-clear-after-property><span class=secno>18. </span>The
   clear-after property</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=clear-after>clear-after</dfn>

    <tr valign=baseline>
     <td>Value:

     <td>none | left | right | top | bottom | inside | outside | start | end
      | both | descendants

    <tr valign=baseline>
     <td>Initial:

     <td>none

    <tr valign=baseline>
     <td>Applies to:

     <td>block-level elements

    <tr valign=baseline>
     <td>Inherited:

     <td>no

    <tr>
     <td>Animatable:

     <td>no

    <tr valign=baseline>
     <td>Percentages:

     <td>N/A

    <tr valign=baseline>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed value:

     <td>specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>It is sometimes useful to make sure that the bottom border of a
   block-level element goes below floating elements. The ‘<a
   href="#clear-after"><code class=property>clear-after</code></a>’
   property increases the element's padding as needed. More precisely: If the
   element has a <a href="#foot">foot</a> padding or <a href="#foot">foot</a>
   border, and there are any floats on the indicated side(s) in the current
   <a href="#flow"><em>flow</em></a> up to and including the end of this
   element, then find the one whose <a href="#c-edge"><em
   title="C edge">C</em></a> <a href="#margin-edge."><em>margin edge</em></a>
   is furthest away from the <a href="#head"><em>head</em></a> <a
   href="#content-edge."><em>content edge</em></a> of the <a
   href="#containing-block"><em>containing block.</em></a> If that C margin
   edge is further from the containing block's head than the element's foot
   content edge is, then increase the element's foot padding by the
   difference.

  <div class=figure>
   <p><img alt=" " src=clear-after.png>

   <p class=caption>The effect of ‘<code class=css>clear-after:
    left</code>’ on a paragraph next to a floating image: the bottom
    padding of the paragraph is stretched, so that the original padding and
    the border go below the float.
  </div>

  <p class=note>Note: Since a floating element is a <a
   href="#flow-root"><em>flow root,</em></a> setting ‘<a
   href="#clear-after"><code class=property>clear-after</code></a>’ on such
   an element only takes into account any descendant floats in the flow
   established by the element itself.

  <div class=example>
   <p>These four images illustrate the effect of ‘<a
    href="#clear-after"><code class=property>clear-after</code></a>’ on
    elements with and without padding or border. They show two documents,
    both have two paragraphs and the top paragraph contains a floating image.
    In the document on the left, the first paragraph does not have any bottom
    padding or border. In the document on the right it does. The top row
    shows the layout without any ‘<a href="#clear-after"><code
    class=property>clear-after</code></a>’, the bottom row shows the effect
    of setting ‘<code class=css>clear-after: left</code>’ on the first
    paragraph.

   <table class=xequiv-table>
    <thead>
     <tr>
      <th>‘<a href="#clear-after"><code
       class=property>clear-after</code></a>’

      <th>Without padding or border

      <th>With padding and border

    <tbody>
     <tr>
      <th> ‘<code class=css>none</code>’

      <td>
       <div class=figure>
        <p><img alt="" src=clear-after1.png>

        <p class=caption>The text of the second paragraph wraps around the
         floating image that started in the first paragraph.
       </div>

      <td>
       <div class=figure>
        <p><img alt="" src=clear-after2.png>

        <p class=caption>The floating image that starts in the first
         paragraph overlaps the bottom border of that paragraph. The text of
         second paragraph wraps around the image as well.
       </div>

     <tr>
      <th> ‘<code class=css>left</code>’

      <td>
       <div class=figure>
        <p><img alt="" src=clear-after1.png>

        <p class=caption>As the first paragraph has no padding that can be
         stretched or border that can be moved, the ‘<a
         href="#clear-after"><code class=property>clear-after</code></a>’
         has no effect on it and the layout is exactly the same as in the
         first image.
       </div>

      <td>
       <div class=figure>
        <p><img alt="" src=clear-after3.png>

        <p class=caption>The effect of ‘<a href="#clear-after"><code
         class=property>clear-after</code></a>’ on the first paragraph is
         to increase the bottom padding so that the bottom border is now
         below the floating image. The second paragraph thus starts lower as
         well and doesn't have to wrap around the image.
       </div>
   </table>
  </div>

  <p>The value of the property determines which kinds of floats are taken
   into account:

  <dl>
   <dt><dfn id=none title="none!!value of 'clear-after'">none</dfn>

   <dd>No effect.

   <dt>left, top

   <dd>Only left and top floating elements are considered.

   <dt>right, bottom

   <dd>Only right and bottom floating elements are considered,

   <dt>inside

   <dd>If the bottom of the element occurs on a right-hand page, only left
    floating elements are considered. On a left-hand page, only right
    floating elements. On media that are not paged, ‘<code
    class=property>inside</code>’ means the same as ‘<code
    class=property>left</code>’.

   <dt>outside

   <dd>Analogous

   <dt>start

   <dd>If the ‘<a href="#direction"><code
    class=property>direction</code></a>’ of the element is ‘<code
    class=property>ltr</code>’, same as ‘<code
    class=property>left</code>’, otherwise same as ‘<code
    class=property>right</code>’.

   <dt>end

   <dd>If the ‘<a href="#direction"><code
    class=property>direction</code></a>’ of the element is ‘<code
    class=property>ltr</code>’, same as ‘<code
    class=property>right</code>’, otherwise same as ‘<code
    class=property>left</code>’.

   <dt><dfn id=both title="both!!value of 'clear-after'">both</dfn>

   <dd>Both left/top and right/bottom floats are considered.

   <dt>descendants

   <dd>All floats in the element's flow that are descendants of the element
    are considered, but not any other floats.
  </dl>

  <p class=issue>Use only two values: height-includes-floats and
   height-does-not-include floats? [DavidB 2004-02-29]

  <div class=issue>
   <p>Instead of a new property ‘<a href="#clear-after"><code
    class=property>clear-after</code></a>’, another idea is to add one or
    more values to ‘<a href="#clear"><code
    class=property>clear</code></a>’. If ‘<a href="#clear"><code
    class=property>clear</code></a>’ is turned into a set, instead of a
    single value, one could add the value ‘<code
    class=property>after</code>’ (clears both left and right floats) or
    several values like ‘<code class=property>left-after</code>’ and
    ‘<code class=property>right-after</code>’:

   <table class=propdef-extra>
    <tbody>
     <tr>
      <td>Name:

      <td>clear

     <tr valign=baseline>
      <td>Value:

      <td>none | [ left | right | top | bottom | inside | outside | start |
       end | both | after]+

     <tr valign=baseline>
      <td>Initial:

      <td>none

     <tr valign=baseline>
      <td>Applies to:

      <td>block-level elements

     <tr valign=baseline>
      <td>Inherited:

      <td>no

     <tr>
      <td>Animatable:

      <td>no

     <tr valign=baseline>
      <td>Percentages:

      <td>N/A

     <tr valign=baseline>
      <td>Media:

      <td>visual

     <tr>
      <td>Computed value:

      <td>specified value

     <tr>
      <th>Canonical order:

      <td>order of keywords as in grammar
   </table>

   <p>The following rule would ensure that a SECTION starts below all
    preceding floats and doesn't end until after all floats it contains:

   <pre>section {clear: left right after}</pre>
  </div>

  <p class=issue>Daniel Beardsmore <a
   href="http://lists.w3.org/Archives/Public/www-style/2007Feb/0120.html">
   proposed</a> a property ‘<code class=css>underhang-limit: &lt;count of
   full lines></code>’ to protect against the case that the last line of a
   paragraph (or the last few lines) is shown under a float. In that case it
   looks better to indent that line like the other lines of the paragraph.
   The default is ‘<code class=css>1</code>’, i.e., no protection.

  <h2 id=overflow0><span class=secno>19. </span>Overflow</h2>
  <!-- As per 2009-08-12 telcon, define more precisely what causes
overflow and what doesn't. E.g., exclude shadows and anti-aliasing
from causing overflow, but relatively and absolutely positioned
descendants do cause overflow. -->

  <p>When some content of an element is placed outside the element's content
   box, the element is said to overflow. This module allows overflow to be
   clipped, other modules may add other treatments, e.g., scale it down or to
   scroll it (“marquee,” see <a href="#ref-CSS3-MARQUEE"
   rel=biblioentry>[CSS3-MARQUEE]<!--{{CSS3-MARQUEE}}--></a>).

  <h3 id=overflow><span class=secno>19.1. </span>The overflow, overflow-x and
   overflow-y properties</h3>

  <p class=issue>In the preceding sections, several things (such as flow
   roots) depend on the value of ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’. We probably need to rewrite them in
   terms of “overflow-x and/or -y” or similar.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=overflow-x>overflow-x</dfn>, <dfn
      id=overflow-y>overflow-y</dfn>,

    <tr>
     <th>Value:

     <td>visible | hidden | scroll | auto | no-display | no-content

    <tr>
     <th>Initial:

     <td>visible

    <tr>
     <th>Applies to:

     <td>non-replaced <a href="#block-level"><em>block-level</em></a>
      elements and non-replaced ‘<code class=css>inline-block</code>’
      elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified, except ‘<code class=property>visible</code>’, see
      text

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=overflow1>overflow</dfn>

    <tr>
     <th>Value:

     <td>[ visible | hidden | scroll | auto | no-display | no-content ]{1,2}

    <tr>
     <th>Initial:

     <td>see individual properties

    <tr>
     <th>Applies to:

     <td>non-replaced <a href="#block-level"><em>block-level</em></a>
      elements and non-replaced ‘<code class=css>inline-block</code>’
      elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified, except ‘<code class=property>visible</code>’, see
      text

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>These properties specify whether content is clipped when it overflows
   the element's <a href="#content-area"><em>content area.</em></a> It
   affects the clipping of all of the element's content except any descendant
   elements (and their respective content and descendants) whose containing
   block is the viewport or an ancestor of the element. ‘<a
   href="#overflow-x"><code class=property>Overflow-x</code></a>’
   determines clipping at the left and right edges, ‘<a
   href="#overflow-y"><code class=property>overflow-y</code></a>’ at the
   top and bottom edges.

  <p>‘<a href="#overflow1"><code class=property>Overflow</code></a>’ is a
   shorthand. If it has one keyword, it sets both ‘<a
   href="#overflow-x"><code class=property>overflow-x</code></a>’ and ‘<a
   href="#overflow-y"><code class=property>overflow-y</code></a>’ to that
   keyword; if it has two, it sets ‘<a href="#overflow-x"><code
   class=property>overflow-x</code></a>’ to the first and ‘<a
   href="#overflow-y"><code class=property>overflow-y</code></a>’ to the
   second. Keywords have the following meanings:

  <dl>
   <dt>visible

   <dd>This value indicates that content is not clipped, i.e., it may be
    rendered outside the content box.

   <dt>hidden

   <dd>This value indicates that the content is clipped and that no <a
    href="#scrolling-mechanism"><em>scrolling mechanism</em></a> should be
    provided to view the content outside the clipping region.

   <dt>scroll

   <dd>This value indicates that the content is clipped and that if the user
    agent uses a <a href="#scrolling-mechanism"><em>scrolling
    mechanism</em></a> that is visible on the screen (such as a scroll bar or
    a panner), that mechanism should be displayed for a box whether or not
    any of its content is clipped. This avoids any problem with scrollbars
    appearing and disappearing in a dynamic environment. When this value is
    specified and the target medium is ‘<code class=css>print</code>’,
    overflowing content may be printed.

   <dt>auto

   <dd>The behavior of the ‘<code class=css>auto</code>’ value is
    UA-dependent, but should cause a <a
    href="#scrolling-mechanism"><em>scrolling mechanism</em></a> to be
    provided for overflowing boxes.

   <dt><dfn id=no-display>no-display</dfn>

   <dd class=issue>When the content doesn't fit in the content box, the whole
    box is removed, as if ‘<code class=css>display: none</code>’ were
    specified. [This idea is due to Till Halbach &lt;tillh@opera.com&gt;,
    July 21, 2005]

   <dt><dfn id=no-content>no-content</dfn>

   <dd class=issue>When the content doesn't fit in the content box, the whole
    content is hidden, as if ‘<code class=css>visibility: hidden</code>’
    were specified. [This idea is due to Till Halbach
    &lt;tillh@opera.com&gt;, July 21, 2005]
  </dl>

  <p>Even if ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ is set to ‘<code
   class=css>visible</code>’, content may be clipped to a UA's document
   window by the native operating environment.

  <p>UAs must apply the ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ property set on the root element to
   the viewport. HTML UAs must instead apply the ‘<a
   href="#overflow1"><code class=property>overflow</code></a>’ property
   from the BODY element to the viewport, if the value on the HTML element is
   ‘<code class=css>visible</code>’. The ‘<code
   class=css>visible</code>’ value when used for the viewport must be
   interpreted as ‘<code class=css>auto</code>’. The element from which
   the value is propagated must have a used value for ‘<a
   href="#overflow1"><code class=property>overflow</code></a>’ of ‘<code
   class=css>visible</code>’.

  <p class=issue>The para above is from CSS 2.1. Need to check if the
   introduction of overflow-x/y changes anything.

  <p>In the case of a scrollbar being placed on an edge of the element's box,
   it should be inserted between the inner border edge and the outer padding
   edge. The space taken up by the scrollbars affects the computation of the
   dimensions in the rendering model.

  <p>A UA may use multiple scrolling mechanisms at the same time. E.g., if
   content overflows both to the right and to the bottom, it may use a
   marquee effect for the overflow to the right and a scrollbar for the
   overflow to the bottom.

  <p class=note>Note that a box with ‘<a href="#overflow1"><code
   class=property>overflow</code></a>’ other than ‘<code
   class=css>visible</code>’ is a <a href="#flow-root"><em>flow
   root.</em></a>

  <div class=example>
   <p>Consider the following example of a block quotation (&lt;blockquote>)
    that is too big for its containing block (established by a &lt;div>).
    Here is the source:

   <pre>
&lt;div>
&lt;blockquote>
&lt;p>I didn't like the play, but then I saw
it under adverse conditions - the curtain was up.&lt;/p>
&lt;cite>- Groucho Marx&lt;/cite>
&lt;/blockquote>
&lt;/div>
</pre>

   <p>Here is the style sheet controlling the sizes and style of the
    generated boxes:

   <pre>
div { width : 100px; height: 100px;
      border: thin solid red;
      }

blockquote   { width : 125px; height : 100px;
      margin-top: 50px; margin-left: 50px; 
      border: thin dashed black
      }

cite { display: block;
       text-align : right; 
       border: none
       }
</pre>

   <p>The initial value of ‘<a href="#overflow1"><code
    class=property>overflow</code></a>’ is ‘<code
    class=css>visible</code>’, so the &lt;blockquote> would be formatted
    without clipping, something like this:

   <div class=figure>
    <p><img alt="[image: Rendered overflow]" src=overflow1>

    <p class=caption>Possible rendering with ‘<code class=css>overflow:
     visible</code>’
   </div>

   <p>Setting ‘<a href="#overflow1"><code
    class=property>overflow</code></a>’ to ‘<code
    class=css>hidden</code>’ for the &lt;div>, on the other hand, causes
    the &lt;blockquote> to be clipped by the containing block:

   <div class=figure>
    <p><img alt="[image: Rendered overflow]" src=overflow2>

    <p class=caption>Possible rendering with ‘<code class=css>overflow:
     hidden</code>’
   </div>

   <p>A value of ‘<code class=css>scroll</code>’ would tell UAs that
    support a visible scrolling mechanism to display one so that users could
    access the clipped content.
  </div>

  <div class=example>
   <p>Consider this case where an absolutely positioned element is mixed with
    an overflow parent. Style sheet:

   <pre>
container { position: relative; border: solid; }
scroller { overflow: scroll; height: 5em; margin: 5em; }
satellite { position: absolute; top: 0; }
body { height: 10em; }
</pre>

   <p>Document fragment:

   <pre>
&lt;container>
 &lt;scroller>
  &lt;satellite/>
  &lt;body/>
 &lt;/scroller>
&lt;/container>
</pre>

   <p>In this example, the “scroller” element will not scroll the
    “satellite” element, because the latter's containing block is outside
    the element whose overflow is being clipped and scrolled.
  </div>

  <p id=collapse-scroll>The combination of collapsing margins, ‘<a
   href="#max-height"><code class=property>max-height</code></a>’ and
   ‘<code class=css>overflow: auto</code>’ can lead to subtle differences
   in implementations, unless special care is taken. A UA should assume that
   an element can be rendered <em>without</em> a scrolling mechanism first,
   perform all the collapsing of margins, and check that the content height
   is indeed less than the ‘<a href="#max-height"><code
   class=property>max-height</code></a>’. If it is not, the process is
   repeated under the assumption that a scrolling mechanism <em>is</em>
   needed.

  <div class=example>
   <p>In the following document fragment, the outer DIV has ‘<code
    class=css>height: auto</code>’, but ‘<code class=css>max-height:
    5em</code>’. The inner DIV has large margins and would normally just
    fit:

   <pre>
...
    #d1 { overflow: auto; max-height: 5em }
    #d2 { margin: 2em; line-height: 1 }
...
&lt;div id=d1&gt;
  &lt;div id=d2&gt;
    This DIV has big margins.
  &lt;/DIV&gt;
&lt;/DIV&gt;
</pre>

   <p>If we assume that d1 needs scroll bars, then the height of d1,
    including the single line of text and twice 2em of margins, adds up to
    5em plus a scrollbar. Since that is greater than 5em, the maximum allowed
    height, it seems we made the right assumption and d1 indeed needs
    scrollbars.

   <p>However, we should have started by assuming that no scrollbars are
    needed. In that case the content height of d1 is exactly the maximum
    height of 5em, proving that the assumption was correct and d1 indeed
    should not have scrollbars.
  </div>

  <p>The computed values of ‘<a href="#overflow-x"><code
   class=property>overflow-x</code></a>’ and ‘<a href="#overflow-y"><code
   class=property>overflow-y</code></a>’ are the same as their specified
   values, except that some combinations with ‘<code
   class=property>visible</code>’ are not possible: if one is specified as
   ‘<code class=property>visible</code>’ and the other is ‘<code
   class=property>scroll</code>’ or ‘<code class=property>auto</code>’,
   then ‘<code class=property>visible</code>’ is set to ‘<code
   class=property>auto</code>’. <span class=issue>The computed value of
   ‘<a href="#overflow1"><code class=property>overflow</code></a>’ is
   equal to the computed value of ‘<a href="#overflow-x"><code
   class=property>overflow-x</code></a>’ if ‘<a href="#overflow-y"><code
   class=property>overflow-y</code></a>’ is the same; otherwise it is the
   pair of computed values of ‘<a href="#overflow-x"><code
   class=property>overflow-x</code></a>’ and ‘<a href="#overflow-y"><code
   class=property>overflow-y</code></a>’.</span>

  <p>The <dfn id=scrolling-mechanism>scrolling mechanism</dfn> depends on the
   UA. The most common mechanism is a scrollbar, but panners, hand cursors,
   page flickers, etc. are also possible. A value of ‘<code
   class=property>scroll</code>’ would tell UAs that support a visible
   scrolling mechanism to display one so that users can access the clipped
   content. The ‘<code class=property>overflow-style</code>’ property
   lets an author specify one or more preferred scrolling mechanism.

  <p class=note>Note that ‘<a href="#overflow-x"><code
   class=property>overflow-x</code></a>’ and ‘<a href="#overflow-y"><code
   class=property>overflow-y</code></a>’ did not exist in CSS2.

  <p class=note>Note that ‘<code class=property>text-overflow</code>’
   (see <a href="#ref-CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>) can be used to give a
   visual indication where text has been clipped.

  <h2 id=the-visibility-property><span class=secno>20. </span>The visibility
   property</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=visibility>visibility</dfn>

    <tr>
     <th>Value:

     <td>visible | hidden | collapse

    <tr>
     <th>Initial:

     <td> visible

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>as specified

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>This property specifies whether the boxes generated by an element are
   rendered. Invisible boxes still affect layout (set the ‘<a
   href="#display0"><code class=property>display</code></a>’ property to
   ‘<code class=css>none</code>’ to suppress box generation altogether).
   Values have the following meanings:

  <dl>
   <dt>visible

   <dd>The generated box is visible.

   <dt>hidden

   <dd>The generated box is invisible (fully transparent, nothing is drawn),
    but still affects layout. Furthermore, descendants of the element will be
    visible if they have ‘<code class=css>visibility: visible</code>’.

   <dt>collapse

   <dd>See the Tables module <a href="#ref-CSS3TBL"
    rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a>. If used on elements
    other than rows, row groups, columns, or column groups, ‘<a
    href="#collapse."><code class=css>collapse</code></a>’ has the same
    meaning as ‘<code class=css>hidden</code>’.
  </dl>

  <h2 id=the-alignment-property><span class=secno>21. </span>The alignment
   property</h2>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=alignment>alignment</dfn>

    <tr>
     <th>Value:

     <td>top | right | bottom | left | center

    <tr>
     <th>Initial:

     <td>see text

    <tr>
     <th>Applies to:

     <td><a href="#block-level">block-level</a> elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p class=issue>For consistency with ‘<code
   class=property>text-align</code>’, maybe this should be called ‘<code
   class=property>block-align</code>’.

  <p>This property influences how a block in the normal flow is aligned in
   its parent in the inline progression direction. It affects the used values
   of ‘<a href="#margin-left"><code
   class=property>margin-left</code></a>’ and ‘<a
   href="#margin-right"><code class=property>margin-right</code></a>’ (for
   <a href="#horizontal"><em>horizontal</em></a> blocks) or ‘<a
   href="#margin-top"><code class=property>margin-top</code></a>’ and ‘<a
   href="#margin-bottom"><code class=property>margin-bottom</code></a>’
   (for <a href="#vertical."><em>vertical</em></a> blocks), as defined in <a
   href="#Calculating">“Calculating widths, heights and margins.”</a>

  <p>The initial value depends on both ‘<a href="#writing-mode"><code
   class=property>writing-mode</code></a>’ and ‘<a
   href="#direction"><code class=property>direction</code></a>’, as
   follows:

  <table class=equiv-table>
   <tbody>
    <tr>
     <th>

     <th>tb

     <th>rl

     <th>lr

    <tr>
     <th>ltr

     <td>left

     <td>top

     <td>top

    <tr>
     <th>rtl

     <td>right

     <td>bottom

     <td>bottom
  </table>

  <p class=note>Note that this property doesn't exist in level 2.

  <div class=example>
   <p>The ‘<a href="#alignment"><code
    class=property>alignment</code></a>’ property in combination with the
    ‘<code class=css>fit-content</code>’ value of ‘<a
    href="#width"><code class=property>width</code></a>’ can be used to
    make borders that enclose just the content of a heading, without the need
    for an additional element:

   <pre>
h2 {
  margin-top: 1em;
  margin-bottom: 1em;
  border: solid;
  padding: 0.5em;
  alignment: center;
  width: fit-content}
</pre>

   <pre>
<b>&lt;p></b>Lorem ipsum dolor sit amet...
<b>&lt;h2></b>A section heading<b>&lt;/h2></b>
<b>&lt;p></b>Lorem ipsum dolor sit amet...
<b>&lt;h2></b>Another section heading<b>&lt;/h2></b>
<b>&lt;p></b>Lorem ipsum dolor sit amet...
</pre>

   <p>See the figure below for a possible rendering.
  </div>

  <div class=figure> <img
   alt="Image: centered headings with border tightly   around the text"
   src=alignment>
   <p class=caption>A possible rendering of the example.
  </div>

  <h2 id=the-child-align-property><span class=secno>22. </span>The
   child-align property</h2>

  <p class=issue>Other names: block-align (but note that it influences the
   children of the block, not the block itself), block-vertical-align (but
   note that it really means horizontal if the block's ‘<a
   href="#writing-mode"><code class=property>writing-mode</code></a>’ is
   ‘<code class=css>lr</code>’ or ‘<code class=css>rl</code>’), and
   align-content (current name in <a href="#ref-CSS3-ALIGN"
   rel=biblioentry>[CSS3-ALIGN]<!--{{CSS3-ALIGN}}--></a>).

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=child-align>child-align</dfn>

    <tr>
     <th>Value:

     <td>top | middle | bottom | left | right | auto

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>block-level elements, table cells and inline blocks

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Animatable:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>the initial value or as specified

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>This property describes how block-level content of a block is aligned
   vertically, or more precisely: in the block progression direction. Values
   have the following meanings:

  <dl>
   <dt>top, bottom, left, right

   <dd>Child blocks are aligned in the current block depending on the ‘<a
    href="#child-align"><code class=property>child-align</code></a>’ and
    ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’ as follows:
    <table class=equiv-table>
     <tbody>
      <tr>
       <th>

       <th>top

       <th>bottom

       <th>left

       <th>right

      <tr>
       <th>tb

       <td>top

       <td>bottom

       <td>top

       <td>top

      <tr>
       <th>rl

       <td>right

       <td>right

       <td>left

       <td>right

      <tr>
       <th>lr

       <td>left

       <td>left

       <td>left

       <td>right
    </table>

   <dt>middle

   <dd>Child blocks are centered in the block progression direction.

   <dt>auto

   <dd>Child blocks are aligned according to ‘<a href="#writing-mode"><code
    class=property>writing-mode</code></a>’: at the top if ‘<code
    class=css>tb</code>’, at the right if ‘<code class=css>rl</code>’
    and at the left if ‘<code class=css>lr</code>’.
  </dl>

  <p>An element with ‘<a href="#child-align"><code
   class=property>child-align</code></a>’ values other than ‘<code
   class=css>auto</code>’ is a <a href="#flow-root"><em>flow root.</em></a>
   Content of such a block is formatted as follows:

  <ol>
   <li>Content is laid out as a regular sequence of blocks.

   <li class=issue>To be discussed: If the smallest rectangle that encloses
    all margin boxes of the children (excluding absolutely positioned
    children and counting relatively positioned children as if they had zero
    offset) is bigger in the block progression direction than the content box
    of the current element, then the content is placed in that content box as
    if ‘<a href="#child-align"><code
    class=property>child-align</code></a>’ were ‘<code
    class=css>top</code>’.

   <li>The content is shifted such that the rectangle that encloses all
    margin boxes of the children (excluding absolutely positioned children
    and counting relatively positioned children as if they had zero offset)
    touches an edge of the content box. Which edge of the rectangle and which
    edge of the content box is determined by the table above. But if ‘<a
    href="#child-align"><code class=property>child-align</code></a>’ is
    ‘<code class=property>middle</code>’, the rectangle is instead
    centered in the content box.
  </ol>

  <div class=note>
   <p>Note that the effect of ‘<a href="#child-align"><code
    class=property>child-align</code></a>’ can also be achieved with
    template layout <a href="#ref-CSS3LAYOUT"
    rel=biblioentry>[CSS3LAYOUT]<!--{{CSS3LAYOUT}}--></a>. E.g.,

   <pre>div {child-align: bottom}</pre>

   <p>is the same as

   <pre>div {grid: "a"};
div::slot(a) {vertical-align: bottom}</pre>

   <p>except that the latter forces the DIV to be a block, while the former
    leaves the ‘<a href="#display0"><code
    class=property>display</code></a>’ value of the DIV unchanged (but has
    no effect unless the DIV is block-level).
  </div>

  <p>When this property applies and is not ‘<code class=css>auto</code>’,
   then ‘<code class=property>vertical-align</code>’ does not apply.
   E.g., the placement of the content of a table cell is determined by
   ‘<code class=property>vertical-align</code>’ only if ‘<a
   href="#child-align"><code class=property>child-align</code></a>’ is
   ‘<code class=css>auto</code>’, otherwise ‘<a
   href="#child-align"><code class=property>child-align</code></a>’
   determines the placement.

  <p class=issue>Or, alternatively, ‘<a href="#child-align"><code
   class=property>child-align</code></a>’ doesn't apply to elements that
   ‘<code class=property>vertical-align</code>’ applies to, i.e., only to
   ‘<code class=css>block</code>’, ‘<code
   class=css>list-item</code>’, ‘<code class=css>inline-block</code>’
   and ‘<code class=css>run-in</code>’ (under circumstances).

  <p>In paged media and in multi-column layout, page breaks and column breaks
   are calculated first, then the content is vertically aligned according to
   the property within each portion of the parent block.

  <h2 id=stacking-contexts><span class=secno>23. </span>Stacking contexts</h2>

  <p>This section defines the painting order in more detail than described in
   the rest of the specification.

  <h3 id=definitions><span class=secno>23.1. </span>Definitions</h3>

  <dl>
   <dt>Tree Order

   <dd>Preorder depth-first traversal of the <em>rendering</em> tree, in
    logical (not visual) order for bidirectional content, after taking into
    account properties that move boxes around such as the ‘<code
    class=property>run-in</code>’ value of ‘<a href="#display0"><code
    class=property>display</code></a>’.

   <dt>Element

   <dd>In this description, “element” refers to actual elements,
    pseudo-elements, and anonymous boxes. Pseudo-elements and anonymous boxes
    are treated as descendants in the appropriate places. For example, an
    outside list marker comes before an adjoining ‘<code
    class=css>::before</code>’ box in the line box, which comes before the
    content of the box, and so forth.
  </dl>

  <h3 id=painting-order><span class=secno>23.2. </span>Painting order</h3>

  <p>The bottom of the stack is the furthest from the user, the top of the
   stack is the nearest to the user:

  <div class=figure>
   <p><img alt="All layers are between the canvas       and the user"
    src=stack.png>

   <p class=caption>Schematic diagram of a stacking context with four layers.
  </div>
  <!--
<pre>
	     |	   |	     |	  |
	     |		|    |	  |	⇦ ☻
	     |		|	  |	user
z-index:  canvas  -1	0    1	  2
</pre>
-->

  <p>The stacking context background and most negative positioned stacking
   contexts are at the bottom of the stack, while the most positive
   positioned stacking contexts are at the top of the stack.

  <p>The canvas is transparent if contained within another, and given a
   UA-defined color if it is not. It is infinite in extent and contains the
   root element. Initially, the viewport is anchored with its top left corner
   at the canvas origin.

  <p>The stacking order for an element generating a stacking context (see the
   ‘<code class=property>z-index</code>’ property) is:

  <ol class=stack>
   <li>
    <p>If the element is a root element:

    <ol>
     <li>background color of element over the entire canvas.

     <li>background image of element, over the entire canvas, anchored at the
      origin that would be used if it was painted for the root element.
    </ol>

   <li>
    <p>If the element is a block, list-item, or other block equivalent:

    <ol>
     <li>background color of element unless it is the root element.

     <li>background image of element unless it is the root element.

     <li>border of element.
    </ol>

    <p>Otherwise, if the element is a block level table:

    <ol>
     <li>table backgrounds (color then image) unless it is the root element.

     <li>column group backgrounds (color then image).

     <li>column backgrounds (color then image).

     <li>row group backgrounds (color then image).

     <li>row backgrounds (color then image).

     <li>cell backgrounds (color then image).

     <li>all table borders (in tree order for separated borders).
    </ol>

   <li>
    <p>Stacking contexts formed by positioned descendants with negative
     z-indices (excluding 0) in z-index order (most negative first) then tree
     order.

   <li>
    <p>For all its in-flow, non-positioned, <a
     href="#block-level">block-level</a> descendants in tree order: If the
     element is a block, list-item, or other block equivalent:

    <ol>
     <li>background color of element.

     <li>background image of element.

     <li>border of element.
    </ol>

    <p>Otherwise, the element is a table:

    <ol>
     <li>table backgrounds (color then image).

     <li>column group backgrounds (color then image).

     <li>column backgrounds (color then image).

     <li>row group backgrounds (color then image).

     <li>row backgrounds (color then image).

     <li>cell backgrounds (color then image).

     <li>all table borders (in tree order for separated borders).
    </ol>

   <li>
    <p>All non-positioned floating descendants, in tree order. For each one
     of these, treat the element as if it created a new stacking context, but
     any positioned descendants and descendants which actually create a new
     stacking context should be considered part of the parent stacking
     context, not this new one.

   <li>
    <p>If the element is an inline element that generates a stacking context,
     then:

    <ol>
     <li>
      <p>For each line box that the element is in:

      <ol>
       <li>Jump to <a href="#each-box">7.2.1</a> for the box(es) of the
        element in that line box (in tree order).
      </ol>
    </ol>

   <li>
    <p>Otherwise: first for the element, then for all its in-flow,
     non-positioned, <a href="#block-level">block-level</a> descendants in
     tree order:

    <ol>
     <li>
      <p>If the element is a <a href="#block-level">block-level</a> replaced
       element, then: the replaced content, atomically.

     <li>
      <p>Otherwise, for each line box of that element:

      <ol>
       <li id=each-box>
        <p>For each box that is a child of that element, in that line box, in
         tree order:

        <ol>
         <li>
          <p>background color of element.

         <li>
          <p>background image of element.

         <li>
          <p>border of element.

         <li>
          <p>For inline elements:

          <ol>
           <li>
            <p>For all the element's in-flow, non-positioned, inline-level
             children that are in this line box, and all runs of text inside
             the element that is on this line box, in tree order:

            <ol>
             <li>
              <p>If this is a run of text, then:

              <ol>
               <li>any underlining affecting the text of the element, in tree
                order of the elements applying the underlining (such that the
                deepest element's underlining, if any, is painted topmost and
                the root element's underlining, if any, is drawn bottommost).

               <li>any overlining affecting the text of the element, in tree
                order of the elements applying the overlining (such that the
                deepest element's overlining, if any, is painted topmost and
                the root element's overlining, if any, is drawn bottommost).

               <li>the text.

               <li>any line-through affecting the text of the element, in
                tree order of the elements applying the line-through (such
                that the deepest element's line-through, if any, is painted
                topmost and the root element's line-through, if any, is drawn
                bottommost).
              </ol>

             <li>
              <p>Otherwise, jump to <a href="#each-box">7.2.1</a> for that
               element.
            </ol>
          </ol>

          <p>For inline-block and inline-table elements:

          <ol>
           <li>For each one of these, treat the element as if it created a
            new stacking context, but any positioned descendants and
            descendants which actually create a new stacking context should
            be considered part of the parent stacking context, not this new
            one.
          </ol>

          <p>For inline-level replaced elements:

          <ol>
           <li>the replaced content, atomically.
          </ol>
        </ol>

        <p class=note>Some of the boxes may have been generated by line
         splitting or the Unicode bidirectional algorithm.

       <li>
        <p>Optionally, the outline of the element (see <a href="#outlines">10
         below</a>).
      </ol>

     <li>
      <p>Optionally, if the element is <a
       href="#block-level">block-level,</a> the outline of the element (see
       <a href="#outlines">10 below</a>).
    </ol>

   <li>
    <p>All positioned descendants with ‘<code class=css>z-index:
     auto</code>’ or ‘<code class=css>z-index: 0</code>’, in tree
     order. For those with ‘<code class=css>z-index: auto</code>’, treat
     the element as if it created a new stacking context, but any positioned
     descendants and descendants which actually create a new stacking context
     should be considered part of the parent stacking context, not this new
     one. For those with ‘<code class=css>z-index: 0</code>’, treat the
     stacking context generated atomically.

   <li>
    <p>Stacking contexts formed by positioned descendants with z-indices
     greater than or equal to 1 in z-index order (smallest first) then tree
     order.

   <li id=outlines>
    <p>Finally, implementations that do not draw outlines in steps above must
     draw outlines from this stacking context at this stage. (It is
     recommended to draw outlines in this step and not in the steps above.)
  </ol>

  <h3 id=notes><span class=secno>23.3. </span>Notes</h3>

  <p>The background of the root element is only painted once, over the whole
   canvas.

  <p>While the backgrounds of bidirectional inlines are painted in tree
   order, they are positioned in visual order. Since the positioning of
   inline backgrounds is unspecified in CSS 2.1, the exact result of these
   two requirements is UA-defined. CSS3 may define this in more detail. <span
   class=issue>[Replace 2.1 by 3. Check if inline backgrounds are still
   undefined, otherwise say result is UA-dependent.]</span>

  <h3 id=the-ltnumbergt-value><span class=secno>23.4. </span>The
   &lt;number&gt; value</h3>

  <p>A <a href="#ltnumbergt"><var>&lt;number&gt;</var></a> value sets the
   width or height to that many times the <em>intrinsic width</em> resp.
   height of the element. The computed value is the number itself.

  <p>If a replaced element does not have an intrinsic size or if it has a
   <span title="complex width/height">complex relation between width and
   height,</span> the used value for ‘<code class=css>width:
   <var>N</var></code>’ is <var>N</var> × <var>W</var>, where <var>W</var>
   is 300px or the <span>largest width that fits the device</span>, whichever
   is smaller; the used value for ‘<code class=css>height:
   <var>N</var></code>’ is <var>N</var> × <var>W/2</var>.

  <div class=example>
   <p>Here are some examples. Compare the following rules to set the size of
    an image, assuming ‘<a href="#height"><code
    class=property>height</code></a>’ is ‘<code class=css>auto</code>’
    in each case:

   <pre>img {width: 50px}  /* exactly 50px wide */
img {width: 50%}   /* half as wide as the containing block */
img {width: 50em}  /* 50× the current font size */
img {width: auto}  /* the intrinsic size */
img {width: 1}     /* ditto, i.e., the intrinsic size */
img {width: 0.5}   /* half the intrinsic width */</pre>
  </div>

  <p class=note>Note that <a href="#ltnumbergt"><var>&lt;number&gt;</var></a>
   does not exist in CSS level 2.

  <h3 id=auto><span class=secno>23.5. </span>The <dfn id=auto0
   title="auto!!value of 'width' or 'height'">auto</dfn> value</h3>

  <p>We describe the meaning of ‘<code class=css>auto</code>’ on elements
   that have <em>horizontal flow</em>. Vertical flow is analogous, but with
   the roles of ‘<a href="#width"><code class=property>width</code></a>’
   and ‘<a href="#height"><code class=property>height</code></a>’
   interchanged.

  <p>On a <a href="#replaced-element"><em>replaced element,</em></a> the
   meaning of ‘<code class=css>auto</code>’ depends on whether the
   element has an intrinsic size or not, as follows.

  <ol>
   <li>
    <p>If the replaced element has an intrinsic width and an intrinsic
     height, then the used value for ‘<code class=css>width: auto</code>’
     is

    <blockquote>
     <p>(intrinsic width)/(intrinsic height) × (used value for height),
    </blockquote>

    <p>The used value for ‘<code class=css>height: auto</code>’ is

    <blockquote>
     <p>(intrinsic height)/(intrinsic width) × (used value for width),
    </blockquote>

    <p>unless both ‘<a href="#width"><code
     class=property>width</code></a>’ and ‘<a href="#height"><code
     class=property>height</code></a>’ are ‘<code
     class=css>auto</code>’, in which case the used value of the former is
     the intrinsic width and the used value of the latter is the intrinsic
     height.

   <li>
    <p>If the element has an aspect ratio (but no intrinsic width or height,
     because then it would fall under the preceding case), then the used
     value for ‘<code class=css>width: auto</code>’ is

    <blockquote>
     <p>(aspect ratio) × (used value for height),
    </blockquote>

    <p>The used value for ‘<code class=css>height: auto</code>’ is

    <blockquote>
     <p>(used value for width) / (aspect ratio),
    </blockquote>

    <p>unless both ‘<a href="#width"><code
     class=property>width</code></a>’ and ‘<a href="#height"><code
     class=property>height</code></a>’ are ‘<code
     class=css>auto</code>’, in which case the used width is 300px or the
     maximum width that fits the device, whichever is smaller; and the used
     height is (aspect ratio) × (used width).

   <li>
    <p>If the element has an intrinsic width, but no intrinsic height and no
     aspect ratio (i.e., the height can be chosen freely), then the value
     used for ‘<code class=css>width: auto</code>’ is the intrinsic width
     and the value used for ‘<code class=css>height: auto</code>’ is
     150px or half the maximum width that fits the device, whichever is
     smaller.

   <li>
    <p>If the element has an intrinsic height, but no intrinsic width and no
     aspect ratio, then the value used for ‘<code class=css>height:
     auto</code>’ is the intrinsic height and the value used for ‘<code
     class=css>width: auto</code>’ is 300px or the maximum width that fits
     the device, whichever is smaller.

   <li>
    <p>If the element has a <em title="complex width/height">complex relation
     between width and height,</em> then the used value of ‘<code
     class=css>auto</code>’ is the result of the <a
     href="#complex-size">algorithm</a> below.

   <li>
    <p>If the element has no intrinsic width, no intrinsic height, no aspect
     ratio and no relation between width and height, then the value used for
     ‘<code class=css>width: auto</code>’ is 300px or the <span>largest
     width that fits the device</span>, whichever is smaller; and the value
     used for ‘<code class=css>height: auto</code>’ is 150px or half the
     largest width that fits the device, whichever is smaller.
  </ol>

  <p class=note>Examples of replaced elements with an intrinsic size are most
   raster images (PNG, JPEG, etc.) and certain <span class=index
   id=svg2>SVG</span> graphics. SVG graphics and other scalable images may
   also have just an aspect ratio and no intrinsic width or height. Certain
   SVG graphics may have neither an intrinsic size nor an aspect ratio; they
   adapt to any width and height. Examples of replaced elements with a <span
   title="complex width/height">complex relation between width and
   height</span> are HTML files and objects that can only take certain
   discrete sizes, such as a command a line that must be a whole number of
   characters wide and high.

  <p>For non-replaced elements, ‘<code class=css>auto</code>’ on ‘<a
   href="#height"><code class=property>height</code></a>’ is always the
   <em>intrinsic height</em> that corresponds to the element's computed
   width. The computed value of ‘<code class=css>auto</code>’ on ‘<a
   href="#width"><code class=property>width</code></a>’ depends on the type
   of box:

  <ol>
   <li>If the element is a <a href="#flow-root"><em>flow root</em></a> other
    than the <a href="#root-element."><em>root element</em></a>, width is the
    <em>intrinsic width</em>.

   <li>If the element is the <a href="#root-element."><em>root
    element</em></a> on paged media, the value is the computed width value of
    the ‘<code class=property>size</code>’ property.

   <li>Otherwise, if the element is a <em>block-level element</em> and its <a
    href="#containing-block"><em>containing block</em></a> also has a
    <em>horizontal flow</em>, <a href="#eq1">equation (1)</a> below
    determines the width.

   <li>Otherwise, if the element is block-level and the containing block has
    a different <em>orientation</em>, the computed value is the <em>intrinsic
    width</em>.

   <li>Otherwise (i.e., the element is positioned, is a table element or a
    ruby), see the positioning <a href="#ref-CSS3POS"
    rel=biblioentry>[CSS3POS]<!--{{CSS3POS}}--></a>, table <a
    href="#ref-CSS3TBL" rel=biblioentry>[CSS3TBL]<!--{{CSS3TBL}}--></a> or
    ruby <a href="#ref-CSS3RUBY"
    rel=biblioentry>[CSS3RUBY]<!--{{CSS3RUBY}}--></a> modules.
  </ol>

  <p class=note>Note that in CSS2, floating elements (case 1) were given a
   certain small, UA-dependent width, but in CSS3 they are given their
   intrinsic width (often referred to as <dfn
   id=shrink-wrapped>"shrink-wrapped"</dfn>).

  <p>‘<a href="#min-width"><code class=property>Min-width</code></a>’,
   ‘<a href="#max-width"><code class=property>max-width</code></a>’,
   ‘<a href="#min-height"><code class=property>min-height</code></a>’ and
   ‘<a href="#max-height"><code class=property>max-height</code></a>’
   impose further constraints on the computed value. See <a
   href="#min-width">below</a>.

  <h3 id=complex-size><span class=secno>23.6. </span>Algorithm for
   shrink-wrapping replaced elements with complex width/height</h3>

  <p class=issue>Should this algorithm be defined by CDF/WICD instead? Or by
   some plug-in API?

  <p>If the replaced object has a <em title="complex width/height">complex
   relation between width and height,</em> then the CSS UA cannot itself
   compute the value to use for ‘<code class=css>auto</code>’ or ‘<code
   class=css>shrink-wrap</code>’. Instead, the UA has to ask an external
   “oracle”. We assume there is a function that the CSS UA can call,
   which takes as input the following parameters:

  <ul>
   <li>the object to compute the size of

   <li>the computed value of ‘<a href="#min-width"><code
    class=property>min-width</code></a>’

   <li>the computed value of ‘<a href="#min-height"><code
    class=property>min-height</code></a>’

   <li>the computed value of ‘<a href="#max-width"><code
    class=property>max-width</code></a>’

   <li>the computed value of ‘<a href="#max-height"><code
    class=property>max-height</code></a>’

   <li>the computed value of ‘<a href="#width"><code
    class=property>width</code></a>’

   <li>the computed value of ‘<a href="#height"><code
    class=property>height</code></a>’

   <li>an auxiliary width

   <li>an auxiliary height
  </ul>

  <p class=note>Note that most can be of various types: <a
   href="#ltlengthgt"><var>&lt;length&gt;</var></a>, <a
   href="#ltpercentagegt"><var>&lt;percentage&gt;</var></a>, ‘<code
   class=css>auto</code>’, ‘<code class=css>shrink-wrap</code>’ or
   ‘<code class=css>none</code>’.

  <p>The auxiliary width is the width of the <a
   href="#containing-block">containing block</a> minus this element's margin,
   padding and border, unless the containing block's width depends on this
   element's width, in which case the width of the viewport is given. The
   suggested height is analogous, but using the containing block's height.

  <p>The returned values are

  <ul>
   <li>The object's preferred width (a <a
    href="#ltlengthgt"><var>&lt;length&gt;</var></a>)

   <li>The object's preferred height (a <a
    href="#ltlengthgt"><var>&lt;length&gt;</var></a>)
  </ul>

  <p>If ‘<a href="#width"><code class=property>width</code></a>’ is
   ‘<code class=css>auto</code>’ or ‘<code
   class=css>shrink-wrap</code>’, the used width will be

  <blockquote>
   <p>max(min-width, min(preferred-width, max(min-width, max-width)))
  </blockquote>

  <p>If ‘<a href="#height"><code class=property>height</code></a>’ is
   ‘<code class=css>auto</code>’ or ‘<code
   class=css>shrink-wrap</code>’, the used height will be

  <blockquote>
   <p>max(min-height, min(preferred-height, max(min-height, max-height)))
  </blockquote>

  <p>If the used width is different from the preferred width, the UA may call
   the oracle again with the used width instead of the computed width in
   order to get a new value for the preferred height.

  <p class=note>Note that the size of the box may still be different from the
   object's preferred size. Whether the object resizes to the box's size or
   not depends on the object. The ‘<code class=property>fit</code>’
   property determines how the object is positioned relative to the box if
   their sizes differ.

  <p>If a CSS UA is used as an oracle, it should behave as follows: The
   parameters should be interpreted as the corresponding style rules on the
   root element of the object (‘<code class=css>:root</code>’) with
   specificity 1 at the start of the author style sheet. The auxiliary width
   and height should be interpreted as the size of the viewport.

  <div class=example>
   <p>The following example of an HTML file with another HTML file
    transcluded is rendered with the transclusion taking its full height. The
    visual result will be very much as if the trancluded document was simply
    a block element in the outer document (except that it doesn't share its
    style).

   <pre>
...
&lt;style type="text/css">
  object {display: block; width: 100%; height: shrink-wrap}
&lt;/style>
...
&lt;object data="other.html">
  &lt;p>See &lt;a href="other.html">other&lt;/a> document.
&lt;/object>
...
</pre>
  </div>

  <p class=note>Note that the oracle may need to have access to the whole
   object before computing its width and height. E.g., the height of a
   transcluded HTML file is only known after the whole file has been
   downloaded and formatted. Thus the use of ‘<code
   class=css>shrink-wrap</code>’ may cause a delay in the rendering of a
   document, or may cause reflow if the oracle is called asynchronously.

  <p class=note>Note that there was no concept of “complex width/height”
   in CSS level 2, so UAs that understand level 3 will use a different size
   for transcluded HTML files than UAs for level 2. In particular, level 2
   UAs will render a 300 by 150px block with scrollbars instead of a block
   that is as big as neeeded to contain the transclusion.

  <h2 id=the-float-displace-and-indent-edge-reset><span class=secno>24.
   </span>The ‘<a href="#float-displace1"><code
   class=property>float-displace</code></a>’ and ‘<a
   href="#indent-edge-reset"><code
   class=property>indent-edge-reset</code></a>’ properties [alternative 1]</h2>

  <p>The ‘<a href="#float-displace1"><code
   class=property>float-displace</code></a>’ property defines different
   ways in which text can wrap around a float.

  <p class=issue>Could this property be merged with ‘<code
   class=property>wrap-flow</code>’ in <a href="#ref-CSS3-EXCLUSIONS"
   rel=biblioentry>[CSS3-EXCLUSIONS]<!--{{CSS3-EXCLUSIONS}}--></a>?

  <h3 id=the-float-displace-property><span class=secno>24.1. </span>The ‘<a
   href="#float-displace1"><code class=property>float-displace</code></a>’
   property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=float-displace>float-displace</dfn>

    <tr>
     <td><em>Value:</em>

     <td>line | indent | block | block-within-page

    <tr>
     <td><em>Initial:</em>

     <td>line

    <tr>
     <td><em>Applies to:</em>

     <td>all block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>yes

    <tr>
     <td>Animatable:

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed value:</em>

     <td>Same as specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>This property determines the line wrapping policy in the presence of
   floats. Values have the following meanings:

  <dl>
   <dt>line

   <dd>Line boxes should be shortened and moved so as to avoid floats. The
    margin, border, padding and background of the element are not affected by
    floats. (This is the behavior as described in CSS2.) <span
    class=issue>[add description or image?]</span>

   <dt>indent

   <dd>The distance between the margin edge of the floats and the start of
    the line box is set to the distance between the active <a
    href="#reference-indent-edge"><em>reference indent edge</em></a> (see the
    ‘<a href="#indent-edge-reset"><code
    class=property>indent-edge-reset</code></a>’ property) and the content
    edge of the block box. This ensures that relative indents are preserved
    in the presence of floats.
    <div class=figure>
     <p><img alt="Example of lines wrapping around a float individually."
      src=float-displace-indent.png>

     <p class=caption>Example of ‘<code class=css>float-displace:
      indent</code>’. Note that the “bar” paragraph has the same indent
      (green arrow) next to the float as below it .
    </div>

   <dt><dfn id=block title="block!!value of 'float-displace'">block</dfn>

   <dd>
    <p>The containing block's width as used by the horizontal formatting
     model is reduced by the width of the floats intruding upon its content
     area (not taking into account floating descendants or floating elements
     that appear later in the document tree). The block is then flowed in
     this reduced containing block width.

    <p>If the effective containing block width is, by the algorithm given
     above, reduced to a value smaller than the sum of the margin-left,
     border-width-left, padding-left, width, padding-right,
     border-width-right, and margin-right values (treating any ‘<code
     class=property>auto</code>’ values as zero) then the margin-top of the
     block is increased until the effective containing block width is no
     longer so constrained or until all floats have been cleared, whichever
     occurs first.

    <div class=figure>
     <p><img alt="Example of blocks being made narrower because of floats"
      src=float-displace-block.png>

     <p class=caption>Example of ‘<code class=css>float-displace:
      block</code>’
    </div>

   <dt>block-within-page

   <dd>As for the ‘<code class=css>block</code>’ value, but the
    determination of intrusions that adjust the width of the block is done
    separately on each page on which the block appears. Thus, the block may
    be narrowed on the first page due to one or more intrusions, but may
    expand (or contract) its width on subsequent pages with different
    intrusions. The computed value of the ‘<a href="#width"><code
    class=property>width</code></a>’ property for this case is...?
  </dl>

  <div class=example>
   <p>A set of rules for HTML might look like this:

   <pre>OL, UL, LI {float-displace: indent}
TABLE {float-displace: block}</pre>

   <p>Lines in a list will get extra indentation when they are next to a
    float, so you can still see that they are part of the list, and tables
    will be made narrower as a whole.
  </div>

  <h3 id=the-indent-edge-reset-property><span class=secno>24.2. </span>The
   ‘<a href="#indent-edge-reset"><code
   class=property>indent-edge-reset</code></a>’ property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=indent-edge-reset>indent-edge-reset</dfn>

    <tr>
     <td><em>Value:</em>

     <td>none | margin-edge | border-edge | padding-edge | content-edge

    <tr>
     <td><em>Initial:</em>

     <td>none

    <tr>
     <td><em>Applies to:</em>

     <td>all elements with a block-level inner formatting context.

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td>Animatable:

     <td>yes

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><a href="#computed-value"><em>Computed value:</em></a>

     <td>specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <p>This property determines which edge to use as the <dfn
   id=reference-indent-edge>reference indent edge</dfn> when calculating the
   amount of indent to preserve when the value of ‘<a
   href="#float-displace1"><code class=property>float-displace</code></a>’
   is set to ‘<code class=css>indent</code>’.

  <dl>
   <dt><dfn id=none0 title="none!!value of 'indent-edge-reset'">none</dfn>

   <dd>This block does not introduce a new reference edge.

   <dt>margin-edge

   <dt>border-edge

   <dt>padding-edge

   <dt>content-edge

   <dd>A new reference indent edge is introduced by this block. Which edge is
    used as the reference indent edge is determined by which value is given.
  </dl>

  <p>The reference indent edge is the nearest ancestor in the same formatting
   context which has a non-none value for ‘<a
   href="#indent-edge-reset"><code
   class=property>indent-edge-reset</code></a>’. If no ancestor in the
   formatting context has a value specified for this property, then the
   content edge of the root of the formatting context is used.

  <h2 class=no-num id=the-float-displace-property-alternative2>The
   ‘float-displace’ property [alternative 2]</h2>

  <p class=issue>Alternative definition, that (1) avoids the need for ‘<a
   href="#indent-edge-reset"><code
   class=property>indent-edge-reset</code></a>’ and (2) changes not just
   the line boxes, but also the content edge, so that list markers stay close
   to the content:

  <table class=propdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=float-displace0>float-displace</dfn>

    <tr>
     <td><em>Value:</em>

     <td>line | indent | block | block-within-page

    <tr>
     <td><em>Initial:</em>

     <td>line

    <tr>
     <td><em>Applies to:</em>

     <td>all block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>yes

    <tr>
     <td>Animatable:

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed value:</em>

     <td>Same as specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <dl>
   <dt>line

   <dd>
    <p>Line boxes are shortened so they don't overlap floats. See <a
     href="#contour">below</a> for the details. The element's margin, border
     or padding are not influenced by the presence of floats. (This is the
     only behavior in CSS level 2.)

   <dt>indent

   <dd>
    <p>Line boxes are first shortened as for ‘<code
     class=css>line</code>’. If the distance between the start edge of the
     content box and the start edge of the line box is then not zero, then
     that distance is further increased by the element's <a
     href="#relative-indent"><em>relative indent</em></a> (defined below).
     Ditto for the end edge. The element's margin, border or padding are not
     influenced by the presence of floats.

   <dt>block

   <dd>
    <p>The margins of the element are increased (and the width thus reduced)
     by the amount necessary so that the border box of the element doesn't
     overlap any floats in the same flow that are created by elements earlier
     in the document; and then the margins are increased even more by the
     amount of the <a href="#relative-indent"><em>relative indent</em></a> on
     the relevant side of the element. If that causes the element to have
     more overflow than it would have had with a value of ‘<code
     class=css>line</code>’, the element is moved down instead (by adding
     clearance) just enough that it doesn't have more overflow, or that its
     top border edge is just below the bottom margin edge of all floats.

    <p>Line boxes inside the element are shortened and/or moved as needed the
     same way as for ‘<code class=css>line</code>’.

    <p>Note that floats that are descendants of the element do not influence
     the element's margins, but they may influence the line boxes.

   <dt>block-within-page

   <dd>
    <p>Like block, except that the parts of the element on different pages
     are treated as separate blocks for the purpose of this property and are
     only indented as necessary to avoid floats on the same page.
  </dl>

  <p class=note>Note that centered text (‘<code
   class=property>text-align</code>’ is ‘<code
   class=css>center</code>’) is centered relative to the content edges, not
   relative to the edges of the line box.

  <p class=note>Note also that ‘<code class=css>block</code>’ and
   ‘<code class=css>block-within-page</code>’ influence the position of
   the element's list marker (if any), because list markers are positioned
   relative to the content edge. Indeed, this may be the main reason for
   using ‘<a href="#float-displace1"><code
   class=property>float-displace</code></a>’: to move the list markers from
   one side of the float (or on top of the float) to the other side.

  <p>A <a href="#line-box.">line box</a> normally stretches from an element's
   <a href="#content-edge.">content edge</a> to the opposite content edge,
   unless it overflows (see <a href="#ref-CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>), but if the element's
   ‘<a href="#float-displace1"><code
   class=property>float-displace</code></a>’ is ‘<code
   class=css>line</code>’ or ‘<code class=css>indent</code>’ it may
   fall short of either or both content edges. The following defines how line
   boxes are shortened in the case of ‘<code class=css>line</code>’:

  <p>For all elements <var>E</var>, and all floats <var>F</var> whose parent
   is in the same <a href="#flow">flow</a> as <var>E</var>, and all <a
   href="#line-box." title="line box">line boxes</a> <var>L</var> of
   <var>E</var>: if <var>L</var> contains any inline boxes that are generated
   by elements that come after <var>F</var> in the document, then
   <var>L</var> must may not overlap the <a
   href="#exclusion-zone"><em>exclusion zone</em></a> of <var>F</var>.

  <p class=note>Note that a line box next to a float cannot overflow: if an
   inline box is too wide for a shortened line box, the line box is left
   empty and the inline box is put in the next line box in which it fits, or
   the next one that is not shortened by floats. <span class=issue>[Is this
   indeed correctly defined in <a href="#ref-CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>?]</span>

  <p class=note>Implementation note: Note that the height of a line box
   depends on its content. It may be, e.g., that a line box next to a float
   has enough room horizontally for three words, but adding the third word
   would increase the height of the line box and make it overlap the next
   float further down. In that case the third word cannot be added to that
   line box and must be put in the next line box (or even further down).

  <p class=mtb>The <dfn id=relative-indent>relative indent</dfn> on side
   <var>S</var> of an element <var>E</var> is defined recursively as follows:

  <ul>
   <li>If <var>E</var> has no parent, or the parent is not in the same flow,
    or the parent's ‘<a href="#float-displace1"><code
    class=property>float-displace</code></a>’ has a different value than
    <var>E's</var>, then the value is 0.

   <li>Otherwise, the value is the relative indent on side <var>S</var> of
    the parent, plus the computed values of the parent's margin, padding and
    border-width on side <var>S</var>.
  </ul>

  <p>How <a href="#line-box."><em title="line box">line boxes</em></a> are
   constructed is explained in the CSS Text Module <a href="#ref-CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{!CSS3TEXT}}--></a>. The presence of a
   float modifies that construction in two ways: the length of the line box
   can become shorter (i.e., shorter than the distance between the element's
   content edges) and, unlike a normal line box, such a shorter line box may
   be empty. The following describes these effects in detail.

  <p>We consider construction of line boxes in <a
   href="#horizontal">horizontal</a> elements first. (Vertical elements are
   analogous and are defined below.) Let <var>L</var> be a line box

  <h2 class=no-num id=the-float-displace-property-alternative3>The
   ‘float-displace’ property [alternative 3]</h2>

  <p class=issue>Yet another alternative. This one adds a fixed indent rather
   than one that depends on the context:

  <table class=propdef>
   <tbody>
    <tr>
     <td><em>Name:</em>

     <td><dfn id=float-displace1>float-displace</dfn>

    <tr>
     <td><em>Value:</em>

     <td>auto | &lt;length> &amp;&amp; [ block | block-within-page ]?

    <tr>
     <td><em>Initial:</em>

     <td>line

    <tr>
     <td><em>Applies to:</em>

     <td>all block-level elements

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td>Animatable:

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>N/A

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed value:</em>

     <td>Same as specified value

    <tr>
     <th>Canonical order:

     <td>N/A
  </table>

  <dl>
   <dt>auto

   <dd>
    <p>Line boxes are shortened and/or moved so they don't overlap floats.
     (This is the only behavior in CSS level 2.)

   <dt>&lt;length>

   <dd>
    <p>Line boxes are shortened and/or moved as for ‘<code
     class=css>auto</code>’, except that the amount they are shortened by,
     if possible, is equal to the amount necessary to not overlap any float
     plus the given &lt;length>.

   <dt>block

   <dd>
    <p>If the keyword ‘<code class=css>block</code>’ is present in
     addition to a &lt;length>, the margins of the element are increased (and
     the width thus reduced) by the amount necessary so that the border box
     of the element doesn't overlap any floats in the same flow that are
     created by elements earlier in the document; and then the margins are
     increased even more by the given &lt;length>. If that causes the element
     to have more overflow than it would have had with a value of ‘<code
     class=css>auto</code>’, the element is moved down instead (by adding
     clearance) just enough that it doesn't have more overflow, or that its
     top border edge is just below the bottom margin edge of all earlier
     floats in the same flow.

    <p>Line boxes inside the element are shortened and/or moved as needed the
     same was as for ‘<code class=css>auto</code>’.

    <p class=note>Note that floats that are descendants of the element do not
     influence the element's margins, but they may influence the line boxes.

   <dt>block-within-page

   <dd>
    <p>Like block, except that the parts of the element on different pages
     are treated as separate blocks for the purpose of this property and are
     only indented as necessary to avoid floats on the same page.
  </dl>

  <p class=note>Note that all values, except ‘<code
   class=css>auto</code>’, also cause centered lines to no longer be
   centered if they are next to a float.

  <p class=note>Note also that ‘<code class=css>block</code>’ and
   ‘<code class=css>block-within-page</code>’ influence the position of
   the element's list marker (if any), because list markers are positioned
   relative to the content edge. Indeed, this may be the main reasons for
   using ‘<a href="#float-displace1"><code
   class=property>float-displace</code></a>’: to move the list markers from
   one side of the float (or on top of the float) to the other side.

  <div class=example>
   <p>Example: Assume that the floating image is tall than the paragraph it
    is part of.

   <pre>img {float: left}
ul {float-displace: 2em block}
li {margin-left: 2em}</pre>

   <p>with document fragment

   <pre>
&lt;p>
  &lt;img src=... alt=... style="float: left">
  Paragraph before the list.

&lt;ul>
  &lt;li>First item
  &lt;li>Second item
&lt;/ul>
</pre>

   <p>Without the image, the rendering might look like this:

   <pre>
Paragraph before the list.

  * First item
  * Second item
</pre>

   <p>With the image, but without the rule for ‘<a
    href="#float-displace1"><code
    class=property>float-displace</code></a>’, the output might look like
    this:

   <pre>
+----+Paragraph before the list.
|\  /|
| */ |First item
| *\ |Second item
|/  \|
+----+
</pre>

   <p>With the ‘<a href="#float-displace1"><code
    class=property>float-displace</code></a>’ rule, the UL is indented
    extra to avoid the image, plus 2em more:

   <pre>
+----+Paragraph before the list.
|\  /|
| \/ |  * First item
| /\ |  * Second item
|/  \|
+----+
</pre>
  </div>

  <h2 id=conformance><span class=secno>25. </span>Conformance</h2>
  <!--begin-conformance-->

  <h3 class=no-ref id=conventions> Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#ref-RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 class=no-ref id=conformance-classes> Conformance classes</h3>

  <p>Conformance to this specification is defined for three conformance
   classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to this specification if all of its
   statements that use syntax defined in this module are valid according to
   the generic CSS grammar and the individual grammars of each feature
   defined in this module.

  <p>A renderer is conformant to this specification if, in addition to
   interpreting the style sheet as defined by the appropriate specifications,
   it supports all the features defined by this specification by parsing them
   correctly and rendering the document accordingly. However, the inability
   of a UA to correctly render a document due to limitations of the device
   does not make the UA non-conformant. (For example, a UA is not required to
   render color on a monochrome monitor.)

  <p>An authoring tool is conformant to this specification if it writes style
   sheets that are syntactically correct according to the generic CSS grammar
   and the individual grammars of each feature in this module, and meet all
   other conformance requirements of style sheets as described in this
   module.

  <h3 class=no-ref id=partial> Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
   assign fallback values, CSS renderers <strong>must</strong> treat as
   invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 class=no-ref id=experimental> Experimental implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS 2.1 specification
   reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage in
   the W3C process, all implementations of a CSS feature are considered
   experimental. The CSS Working Group recommends that implementations use a
   vendor-prefixed syntax for such features, including those in W3C Working
   Drafts. This avoids incompatibilities with future changes in the draft.

  <h3 class=no-ref id=testing> Non-experimental implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
   non-experimental implementations are possible, and implementors should
   release an unprefixed implementation of any CR-level feature they can
   demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
   implementations, the CSS Working Group requests that non-experimental CSS
   renderers submit an implementation report (and, if necessary, the
   testcases used for that implementation report) to the W3C before releasing
   an unprefixed implementation of any CSS features. Testcases submitted to
   W3C are subject to review and correction by the CSS Working Group.

  <p>Further information on submitting testcases and implementation reports
   can be found from on the CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
   Questions should be directed to the <a
   href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
   mailing list. <!--end-conformance-->

  <h2 id=acknowledgments><span class=secno>26. </span>Acknowledgments</h2>

  <p class=issue>To do… <!--
<p>[acknowledgments. David Baron, Ian Hickson]

<p>David Baron discovered that the assumption about whether a scrolling
mechanism is needed can influence whether it is indeed needed or not. See the
<a href="#collapse-scroll">explanation</a> under <a href="#overflow">"The
overflow property"</a>.

<p>Many people on the www-style@w3.org mailing list provided valuable
reviews, corrections and proposals. Among them, Björn Höhrmann deserves
special mention.

<p>[Comments:
<ul>
  <li><a
    href="http://lists.w3.org/Archives/Public/www-style/2001Jul/0167.html">Björn
    Höhrmann</a>
  <li><a
    href="http://lists.w3.org/Archives/Public/www-style/2001Jul/0169.html">Jeffrey
    Yasskin</a>
  <li><a
    href="http://lists.w3.org/Archives/Public/www-style/2001Sep/0041.html">Valerie
    G. Sharp</a>
</ul>

<p>]
-->

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=ref-CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-2D-TRANSFORMS>[CSS3-2D-TRANSFORMS]

   <dd>Simon Fraser; et al. <a
    href="http://www.w3.org/TR/2011/WD-css3-2d-transforms-20111215/"><cite>CSS
    2D Transforms.</cite></a> 15 December 2011. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-2d-transforms-20111215/">http://www.w3.org/TR/2011/WD-css3-2d-transforms-20111215/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-IMAGES>[CSS3-IMAGES]

   <dd>Elika J. Etemad; Tab Atkins Jr. <a
    href="http://www.w3.org/TR/2012/CR-css3-images-20120417/"><cite>CSS Image
    Values and Replaced Content Module Level 3.</cite></a> 17 April 2012. W3C
    Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/CR-css3-images-20120417/">http://www.w3.org/TR/2012/CR-css3-images-20120417/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-WRITING-MODES>[CSS3-WRITING-MODES]

   <dd>Elika J. Etemad; Koji Ishii. <a
    href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/"><cite>CSS
    Writing Modes Module Level 3.</cite></a> 15 November 2012. W3C Working
    Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/">http://www.w3.org/TR/2012/WD-css3-writing-modes-20121115/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3BG>[CSS3BG]

   <dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a
    href="http://www.w3.org/TR/2012/CR-css3-background-20120724/"><cite>CSS
    Backgrounds and Borders Module Level 3.</cite></a> 24 July 2012. W3C
    Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/CR-css3-background-20120724/">http://www.w3.org/TR/2012/CR-css3-background-20120724/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3CASCADE>[CSS3CASCADE]

   <dd>Håkon Wium Lie; fantasai; Tab Atkins Jr. <a
    href="http://www.w3.org/TR/2013/CR-css-cascade-3-20131003/"><cite>CSS
    Cascading and Inheritance Level 3.</cite></a> 3 October 2013. W3C
    Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/CR-css-cascade-3-20131003/">http://www.w3.org/TR/2013/CR-css-cascade-3-20131003/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3GENCON>[CSS3GENCON]

   <dd>Ian Hickson. <a
    href="http://www.w3.org/TR/2003/WD-css3-content-20030514"><cite>CSS3
    Generated and Replaced Content Module.</cite></a> 14 May 2003. W3C
    Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2003/WD-css3-content-20030514">http://www.w3.org/TR/2003/WD-css3-content-20030514</a>
   </dd>
   <!---->

   <dt id=ref-CSS3SYN>[CSS3SYN]

   <dd>Tab Atkins Jr.; Simon Sapin. <a
    href="http://www.w3.org/TR/2013/WD-css-syntax-3-20130919/"><cite>CSS
    Syntax Module Level 3.</cite></a> 19 September 2013. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css-syntax-3-20130919/">http://www.w3.org/TR/2013/WD-css-syntax-3-20130919/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3TEXT>[CSS3TEXT]

   <dd>Elika J. Etemad; Koji Ishii. <a
    href="http://www.w3.org/TR/2012/WD-css3-text-20121113/"><cite>CSS Text
    Module Level 3.</cite></a> 13 November 2012. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-text-20121113/">http://www.w3.org/TR/2012/WD-css3-text-20121113/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3UI>[CSS3UI]

   <dd>Tantek Çelik. <a
    href="http://www.w3.org/TR/2012/WD-css3-ui-20120117/"><cite>CSS Basic
    User Interface Module Level 3 (CSS3 UI).</cite></a> 17 January 2012. W3C
    Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-ui-20120117/">http://www.w3.org/TR/2012/WD-css3-ui-20120117/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3VAL>[CSS3VAL]

   <dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a
    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/"><cite>CSS
    Values and Units Module Level 3.</cite></a> 30 July 2013. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/CR-css3-values-20130730/">http://www.w3.org/TR/2013/CR-css3-values-20130730/</a>
   </dd>
   <!---->

   <dt id=ref-RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=informative-references>Informative references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dd style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=ref-CSS-DEVICE-ADAPT>[CSS-DEVICE-ADAPT]

   <dd>Rune Lillesveen. <a
    href="http://www.w3.org/TR/2011/WD-css-device-adapt-20110915/"><cite>CSS
    Device Adaptation.</cite></a> 15 September 2011. W3C Working Draft. (Work
    in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css-device-adapt-20110915/">http://www.w3.org/TR/2011/WD-css-device-adapt-20110915/</a>
   </dd>
   <!---->

   <dt id=ref-CSS-PAGE-FLOATS>[CSS-PAGE-FLOATS]

   <dd>Håkon Wium Lie. <cite>CSS Page Floats.</cite> (forthcoming). W3C
    Working Draft. (Work in progress)</dd>
   <!---->

   <dt id=ref-CSS3-ALIGN>[CSS3-ALIGN]

   <dd>Elika J. Etemad; Tab Atkins Jr. <a
    href="http://www.w3.org/TR/2013/WD-css3-align-20130514/"><cite>CSS Box
    Alignment Module Level 3.</cite></a> 14 May 2013. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css3-align-20130514/">http://www.w3.org/TR/2013/WD-css3-align-20130514/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-EXCLUSIONS>[CSS3-EXCLUSIONS]

   <dd>Vincent Hardy; Rossen Atanassov; Alan Stearns. <a
    href="http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/"><cite>CSS
    Exclusions Module Level 1.</cite></a> 28 May 2013. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/">http://www.w3.org/TR/2013/WD-css3-exclusions-20130528/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-FLEXBOX>[CSS3-FLEXBOX]

   <dd>Tab Atkins Jr.; Elika J. Etemad; Alex Mogilevsky. <a
    href="http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/"><cite>CSS
    Flexible Box Layout Module.</cite></a> 18 September 2012. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/">http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-MARQUEE>[CSS3-MARQUEE]

   <dd>Bert Bos. <a
    href="http://www.w3.org/TR/2008/CR-css3-marquee-20081205"><cite>CSS
    Marquee Module Level 3.</cite></a> 5 December 2008. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2008/CR-css3-marquee-20081205">http://www.w3.org/TR/2008/CR-css3-marquee-20081205</a>
   </dd>
   <!---->

   <dt id=ref-CSS3-TRANSFORMS>[CSS3-TRANSFORMS]

   <dd>Simon Fraser; et al. <a
    href="http://www.w3.org/TR/2012/WD-css3-transforms-20120911/"><cite>CSS
    Transforms.</cite></a> 11 September 2012. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2012/WD-css3-transforms-20120911/">http://www.w3.org/TR/2012/WD-css3-transforms-20120911/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3GCPM>[CSS3GCPM]

   <dd>Håkon Wium Lie. <a
    href="http://www.w3.org/TR/2011/WD-css3-gcpm-20111129/"><cite>CSS
    Generated Content for Paged Media Module.</cite></a> 29 November 2011.
    W3C Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-gcpm-20111129/">http://www.w3.org/TR/2011/WD-css3-gcpm-20111129/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3LAYOUT>[CSS3LAYOUT]

   <dd>Bert Bos; César Acebal. <a
    href="http://www.w3.org/TR/2011/WD-css3-layout-20111129/"><cite>CSS
    Template Layout Module.</cite></a> 29 November 2011. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-layout-20111129/">http://www.w3.org/TR/2011/WD-css3-layout-20111129/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3LINE>[CSS3LINE]

   <dd>Michel Suignard; Eric A. Meyer. <a
    href="http://www.w3.org/TR/2002/WD-css3-linebox-20020515"><cite>CSS3
    module: line.</cite></a> 15 May 2002. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2002/WD-css3-linebox-20020515">http://www.w3.org/TR/2002/WD-css3-linebox-20020515</a>
   </dd>
   <!---->

   <dt id=ref-CSS3LIST>[CSS3LIST]

   <dd>Tab Atkins Jr. <a
    href="http://www.w3.org/TR/2011/WD-css3-lists-20110524"><cite>CSS Lists
    and Counters Module Level 3.</cite></a> 24 May 2011. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-lists-20110524">http://www.w3.org/TR/2011/WD-css3-lists-20110524</a>
   </dd>
   <!---->

   <dt id=ref-CSS3PAGE>[CSS3PAGE]

   <dd>Melinda Grant; et al. <a
    href="http://www.w3.org/TR/2013/WD-css3-page-20130314/"><cite>CSS Paged
    Media Module Level 3.</cite></a> 14 March 2013. W3C Working Draft. (Work
    in progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css3-page-20130314/">http://www.w3.org/TR/2013/WD-css3-page-20130314/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3POS>[CSS3POS]

   <dd>Bert Bos. <cite>CSS3 Positioning Module.</cite> (forthcoming). W3C
    Working Draft. (Work in progress.)</dd>
   <!---->

   <dt id=ref-CSS3RUBY>[CSS3RUBY]

   <dd>Elika J. Etemad; Koji Ishii; Richard Ishida. <a
    href="http://www.w3.org/TR/2013/WD-css3-ruby-20130919/"><cite>CSS Ruby
    Module Level 1.</cite></a> 19 September 2013. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2013/WD-css3-ruby-20130919/">http://www.w3.org/TR/2013/WD-css3-ruby-20130919/</a>
   </dd>
   <!---->

   <dt id=ref-CSS3TBL>[CSS3TBL]

   <dd>Bert Bos; David Hyatt. <cite>CSS3 Tables Module.</cite> (forthcoming).
    W3C Working Draft. (Work in progress.)</dd>
   <!---->

   <dt id=ref-MEDIAQ>[MEDIAQ]

   <dd>Florian Rivoal. <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/"><cite>Media
    Queries.</cite></a> 19 June 2012. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/">http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/</a>
   </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>absent, <a href="#absent" title="section 3."><strong>3.</strong></a>

   <li>adjoining, <a href="#adjoining"
    title="section 13.1."><strong>13.1.</strong></a>

   <li>A edge,, <a href="#a-edge" title="section 3."><strong>3.</strong></a>

   <li>alignment, <a href="#alignment"
    title="section 21."><strong>21.</strong></a>

   <li><var>&lt;angle&gt;</var>, <a href="#ltanglegt"
    title="section 2."><strong>2.</strong></a>

   <li>anonymous box,, <a href="#anonymous-box"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>Aspect ratios, <a href="#aspect-ratios" title="section 12.">12.</a>

   <li>authoring tool, <a href="#authoring-tool"
    title="section 25."><strong>25.</strong></a>

   <li>auto
    <ul>
     <li>value of 'width' or 'height', <a href="#auto0"
      title="section 23.5."><strong>23.5.</strong></a>
    </ul>

   <li>B edge,, <a href="#b-edge" title="section 3."><strong>3.</strong></a>

   <li><var>&lt;bg-position&gt;</var>, <a href="#ltbg-positiongt"
    title="section 2."><strong>2.</strong></a>

   <li>block
    <ul>
     <li>value of 'float-displace', <a href="#block"
      title="section 24.1."><strong>24.1.</strong></a>
    </ul>

   <li>block container box, <a href="#block-container-box"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>block dimension, <a href="#block-dimension"
    title="section 3."><strong>3.</strong></a>

   <li>block flow direction, <a href="#block-flow-direction"
    title="section 2."><strong>2.</strong></a>

   <li>block formatting context,, <a href="#block-formatting-context"
    title="section 13."><strong>13.</strong></a>

   <li>block-level, <a href="#block-level"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>border
    <ul>
     <li>absent, <a href="#absent" title="section 3."><strong>3.</strong></a>
    </ul>

   <li>border area, <a href="#border-area"
    title="section 3."><strong>3.</strong></a>

   <li>border box., <a href="#border-box."
    title="section 3."><strong>3.</strong></a>

   <li>border edge., <a href="#border-edge."
    title="section 3."><strong>3.</strong></a>

   <li>both
    <ul>
     <li>value of 'clear-after', <a href="#both"
      title="section 18."><strong>18.</strong></a>
    </ul>

   <li>box-sizing, <a href="#box-sizing"
    title="section 2."><strong>2.</strong></a>

   <li>box tree, <a href="#box-tree."
    title="section 3."><strong>3.</strong></a>

   <li>canvas, <a href="#canvas" title="section 4."><strong>4.</strong></a>

   <li>C edge, <a href="#c-edge" title="section 3."><strong>3.</strong></a>

   <li>channeled, <a href="#channeled"
    title="section 5."><strong>5.</strong></a>

   <li>child-align, <a href="#child-align"
    title="section 22."><strong>22.</strong></a>

   <li>clear, <a href="#clear" title="section 17."><strong>17.</strong></a>

   <li>clear-after, <a href="#clear-after"
    title="section 18."><strong>18.</strong></a>

   <li>clearance., <a href="#clearance."
    title="section 17."><strong>17.</strong></a>

   <li>collapse., <a href="#collapse."
    title="section 13.1."><strong>13.1.</strong></a>

   <li>collapsed through, <a href="#collapsed-through"
    title="section 13.1."><strong>13.1.</strong></a>

   <li>complex aspect ratio, <a href="#complex-aspect-ratio"
    title="section 12."><strong>12.</strong></a>

   <li>computed value, <a href="#computed-value"
    title="section 2."><strong>2.</strong></a>

   <li>containing block, <a href="#containing-block"
    title="section 6.2."><strong>6.2.</strong></a>, <a
    href="#containing-block0" title="section 3.">3.</a>

   <li>contains, <a href="#contains"
    title="section 3."><strong>3.</strong></a>

   <li>content area, <a href="#content-area"
    title="section 3."><strong>3.</strong></a>

   <li>content box, <a href="#content-box"
    title="section 3."><strong>3.</strong></a>

   <li>content edge., <a href="#content-edge."
    title="section 3."><strong>3.</strong></a>

   <li>D edge., <a href="#d-edge." title="section 3."><strong>3.</strong></a>

   <li>direction, <a href="#direction"
    title="section 2."><strong>2.</strong></a>

   <li>display, <a href="#display0"
    title="section 6.1."><strong>6.1.</strong></a>

   <li>document tree, <a href="#tree" title="section 3.">3.</a>

   <li>element, <a href="#elements."
    title="section 3."><strong>3.</strong></a>

   <li>element tree, <a href="#tree" title="section 3.">3.</a>

   <li>end, <a href="#end" title="section 3."><strong>3.</strong></a>

   <li>exclusion zone, <a href="#exclusion-zone"
    title="section 16."><strong>16.</strong></a>

   <li>fill, <a href="#fill" title="section 8."><strong>8.</strong></a>

   <li>float, <a href="#float" title="section 16."><strong>16.</strong></a>

   <li>float-displace, <a href="#float-displace"
    title="section 24.1."><strong>24.1.</strong></a>, <a
    href="#float-displace0" title="section ??"><strong>??</strong></a>, <a
    href="#float-displace1" title="section ??"><strong>??</strong></a>

   <li>flow, <a href="#flow" title="section 5."><strong>5.</strong></a>, <a
    href="#flow0" title="section 3.">3.</a>
    <ul>
     <li>initial, <a href="#initial-flow"
      title="section 5."><strong>5.</strong></a>
    </ul>

   <li>flow root, <a href="#flow-root"
    title="section 5."><strong>5.</strong></a>
    <ul>
     <li>box, <a href="#box" title="section 5.">5.</a>

     <li>element, <a href="#flow-root." title="section 5.">5.</a>
    </ul>

   <li>foot,, <a href="#foot" title="section 3."><strong>3.</strong></a>

   <li>formatting context, <a href="#new-formatting-context."
    title="section 5.">5.</a>

   <li>generated box, <a href="#generates"
    title="section 3."><strong>3.</strong></a>

   <li>head,, <a href="#head" title="section 3."><strong>3.</strong></a>

   <li>height, <a href="#height" title="section 9."><strong>9.</strong></a>
    <ul>
     <li>logical, <a href="#logical-height."
      title="section 3."><strong>3.</strong></a>
    </ul>

   <li>horizontal, <a href="#horizontal"
    title="section 3."><strong>3.</strong></a>

   <li>indent-edge-reset, <a href="#indent-edge-reset"
    title="section 24.2."><strong>24.2.</strong></a>

   <li>induced,, <a href="#induced"
    title="section 3."><strong>3.</strong></a>

   <li>inhibits run-in behavior, <a href="#inhibits-run-in-behavior"
    title="section 6.3."><strong>6.3.</strong></a>

   <li>initial containing block., <a href="#initial-containing-block."
    title="section 6.2."><strong>6.2.</strong></a>

   <li>initial flow, <a href="#initial-flow"
    title="section 5."><strong>5.</strong></a>

   <li>inline base direction., <a href="#inline-base-direction."
    title="section 2."><strong>2.</strong></a>

   <li>inline dimension, <a href="#inline-dimension"
    title="section 3."><strong>3.</strong></a>

   <li>inline-level, <a href="#inline-level"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>intrinsic, <a href="#intrinsic0"
    title="section 2."><strong>2.</strong></a>

   <li>intrinsic height., <a href="#intrinsic-height."
    title="section 12.">12.</a>

   <li>intrinsic ratio, <a href="#intrinsic-ratio"
    title="section 12.">12.</a>, <a href="#intrinsic-ratio0"
    title="section 12.">12.</a>

   <li>intrinsic width, <a href="#intrinsic-width"
    title="section 12.">12.</a>

   <li><var>&lt;length&gt;</var>, <a href="#ltlengthgt"
    title="section 2."><strong>2.</strong></a>

   <li>line box., <a href="#line-box."
    title="section 2."><strong>2.</strong></a>

   <li>logical height, <a href="#logical-height."
    title="section 3."><strong>3.</strong></a>

   <li>logical width, <a href="#logical-width"
    title="section 3."><strong>3.</strong></a>

   <li>margin, <a href="#margin" title="section 8."><strong>8.</strong></a>

   <li>margin area, <a href="#margin-area"
    title="section 3."><strong>3.</strong></a>

   <li>margin-bottom, <a href="#margin-bottom"
    title="section 8."><strong>8.</strong></a>

   <li>margin edge., <a href="#margin-edge."
    title="section 3."><strong>3.</strong></a>

   <li>margin-left, <a href="#margin-left"
    title="section 8."><strong>8.</strong></a>

   <li>margin-right, <a href="#margin-right"
    title="section 8."><strong>8.</strong></a>

   <li>margin-top, <a href="#margin-top"
    title="section 8."><strong>8.</strong></a>

   <li>max-content, <a href="#max-content"
    title="section 11."><strong>11.</strong></a>

   <li>max-height, <a href="#max-height"
    title="section 10."><strong>10.</strong></a>

   <li>max-width, <a href="#max-width"
    title="section 10."><strong>10.</strong></a>

   <li>min-content, <a href="#min-content"
    title="section 11."><strong>11.</strong></a>

   <li>min-height, <a href="#min-height"
    title="section 10."><strong>10.</strong></a>

   <li>min-width, <a href="#min-width"
    title="section 10."><strong>10.</strong></a>

   <li>new formatting context, <a href="#new-formatting-context."
    title="section 5.">5.</a>

   <li>no-content, <a href="#no-content"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>no-display, <a href="#no-display"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>none
    <ul>
     <li>value of 'clear-after', <a href="#none"
      title="section 18."><strong>18.</strong></a>

     <li>value of 'indent-edge-reset', <a href="#none0"
      title="section 24.2."><strong>24.2.</strong></a>
    </ul>

   <li>Non-transparent, <a href="#non-transparent"
    title="section 16."><strong>16.</strong></a>

   <li>normal flow, <a href="#normal-flow"
    title="section 5."><strong>5.</strong></a>

   <li><var>&lt;number&gt;</var>, <a href="#ltnumbergt"
    title="section 2."><strong>2.</strong></a>

   <li>overflow, <a href="#overflow1"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>overflow-x, <a href="#overflow-x"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>overflow-y, <a href="#overflow-y"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>padding, <a href="#padding" title="section 7."><strong>7.</strong></a>

    <ul>
     <li>absent, <a href="#absent" title="section 3."><strong>3.</strong></a>
    </ul>

   <li>padding area, <a href="#padding-area"
    title="section 3."><strong>3.</strong></a>

   <li>padding-bottom, <a href="#padding-bottom"
    title="section 7."><strong>7.</strong></a>

   <li>padding box., <a href="#padding-box."
    title="section 3."><strong>3.</strong></a>

   <li>padding edge., <a href="#padding-edge."
    title="section 3."><strong>3.</strong></a>

   <li>padding-left, <a href="#padding-left"
    title="section 7."><strong>7.</strong></a>

   <li>padding-right, <a href="#padding-right"
    title="section 7."><strong>7.</strong></a>

   <li>padding-top, <a href="#padding-top"
    title="section 7."><strong>7.</strong></a>

   <li><var>&lt;percentage&gt;</var>, <a href="#ltpercentagegt"
    title="section 2."><strong>2.</strong></a>

   <li>principal box, <a href="#principal-box"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>raster images, <a href="#raster-images" title="section 12.">12.</a>

   <li>reference indent edge, <a href="#reference-indent-edge"
    title="section 24.2."><strong>24.2.</strong></a>

   <li>relative indent, <a href="#relative-indent"
    title="section ??"><strong>??</strong></a>

   <li>renderer, <a href="#renderer"
    title="section 25."><strong>25.</strong></a>

   <li>replaced element, <a href="#replaced-element"
    title="section 2."><strong>2.</strong></a>, <a href="#replaced-elements"
    title="section 12.">12.</a>

   <li>root element., <a href="#root-element."
    title="section 3."><strong>3.</strong></a>

   <li>scrolling mechanism, <a href="#scrolling-mechanism"
    title="section 19.1."><strong>19.1.</strong></a>

   <li>"shrink-wrapped", <a href="#shrink-wrapped"
    title="section 23.5."><strong>23.5.</strong></a>

   <li>start, <a href="#start" title="section 3."><strong>3.</strong></a>

   <li>static position, <a href="#static-position"
    title="section 15.6."><strong>15.6.</strong></a>

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="section 25."><strong>25.</strong></a>
    </ul>

   <li>SVG, <a href="#svg" title="section 6.6.">6.6.</a>, <a href="#svg0"
    title="section 12.">12.</a>, <a href="#svg1" title="section 12.">12.</a>,
    <a href="#svg2" title="section 23.5.">23.5.</a>

   <li>transform, <a href="#transform"
    title="section 2."><strong>2.</strong></a>

   <li>tree
    <ul>
     <li>of boxes, <a href="#box-tree."
      title="section 3."><strong>3.</strong></a>

     <li>of elements, <a href="#tree" title="section 3.">3.</a>
    </ul>

   <li>used value., <a href="#used-value."
    title="section 2."><strong>2.</strong></a>

   <li>vertical., <a href="#vertical."
    title="section 3."><strong>3.</strong></a>

   <li>viewport, <a href="#viewport"
    title="section 4."><strong>4.</strong></a>

   <li>visibility, <a href="#visibility"
    title="section 20."><strong>20.</strong></a>

   <li>width, <a href="#width" title="section 9."><strong>9.</strong></a>
    <ul>
     <li>logical, <a href="#logical-width"
      title="section 3."><strong>3.</strong></a>
    </ul>

   <li>writing-mode, <a href="#writing-mode"
    title="section 2."><strong>2.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><a class=property href="#alignment">alignment</a>

     <td>top | right | bottom | left | center

     <td>see text

     <td>

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#child-align">child-align</a>

     <td>top | middle | bottom | left | right | auto

     <td>auto

     <td>block-level elements, table cells and inline blocks

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#clear">clear</a>

     <td>none | left | right | both

     <td>none

     <td>block-level elements

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#clear-after">clear-after</a>

     <td>none | left | right | top | bottom | inside | outside | start | end
      | both | descendants

     <td>none

     <td>block-level elements

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#display0">display</a>

     <td>inline | block | inline-block | list-item | run-in | compact | table
      | inline-table | table-row-group | table-header-group |
      table-footer-group | table-row | table-column-group | table-column |
      table-cell | table-caption | ruby | ruby-base | ruby-text |
      ruby-base-group | ruby-text-group | container | flex | inline-flex |
      none

     <td>inline

     <td>all elements

     <td>no

     <td>N/A

     <td>visual (‘none’ applies to all media)

    <tr>
     <th><a class=property href="#float">float</a>

     <td>[ left | right | top | bottom | start | end | none |
      &lt;page-floats&gt; ] &amp;&amp; contour?

     <td>none

     <td>all, but see text

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#float-displace">float-displace</a>

     <td>line | indent | block | block-within-page

     <td>line

     <td>

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#float-displace0">float-displace</a>

     <td>line | indent | block | block-within-page

     <td>line

     <td>

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#float-displace1">float-displace</a>

     <td>auto | &lt;length> &amp;&amp; [ block | block-within-page ]?

     <td>line

     <td>

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#height">height</a>

     <td>[&lt;length> | &lt;percentage>] &amp;&amp; [border-box |
      content-box]? | available | min-content | max-content | fit-content |
      complex | auto

     <td>auto

     <td>all elements but non-replaced inline elements, table columns, and
      column groups

     <td>no

     <td>see prose

     <td>visual

    <tr>
     <th><a class=property href="#indent-edge-reset">indent-edge-reset</a>

     <td>none | margin-edge | border-edge | padding-edge | content-edge

     <td>none

     <td>all elements with a block-level inner formatting context.

     <td>no

     <td>n/a

     <td>visual

    <tr>
     <th><a class=property href="#margin">margin</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | fill | auto]{1,4}

     <td>(see individual properties)

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#margin-bottom">margin-bottom</a>

     <td>&lt;length&gt; | &lt;percentage&gt; | fill | auto

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#margin-left">margin-left</a>

     <td>&lt;length&gt; | &lt;percentage&gt; | fill | auto

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#margin-right">margin-right</a>

     <td>&lt;length&gt; | &lt;percentage&gt; | fill | auto

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#margin-top">margin-top</a>

     <td>&lt;length&gt; | &lt;percentage&gt; | fill | auto

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#max-height">max-height</a>

     <td>[ [&lt;length&gt; | &lt;percentage&gt;] &amp;&amp; [border-box |
      content-box]? ] | available | min-content | max-content | fit-content |
      none

     <td>none

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

     <td>no

     <td>refer to width, resp. height of containing block

     <td>visual

    <tr>
     <th><a class=property href="#max-width">max-width</a>

     <td>[ [&lt;length&gt; | &lt;percentage&gt;] &amp;&amp; [border-box |
      content-box]? ] | available | min-content | max-content | fit-content |
      none

     <td>none

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

     <td>no

     <td>refer to width, resp. height of containing block

     <td>visual

    <tr>
     <th><a class=property href="#min-height">min-height</a>

     <td>[ [&lt;length&gt; | &lt;percentage&gt;] &amp;&amp; [border-box |
      content-box]? ] | available | min-content | max-content | fit-content

     <td>0

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

     <td>no

     <td>refer to width, resp. height of containing block

     <td>visual

    <tr>
     <th><a class=property href="#min-width">min-width</a>

     <td>[ [&lt;length&gt; | &lt;percentage&gt;] &amp;&amp; [border-box |
      content-box]? ] | available | min-content | max-content | fit-content

     <td>0

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

     <td>no

     <td>refer to width, resp. height of containing block

     <td>visual

    <tr>
     <th><a class=property href="#overflow1">overflow</a>

     <td>[ visible | hidden | scroll | auto | no-display | no-content ]{1,2}

     <td>see individual properties

     <td>non-replaced block-level elements and non-replaced
      ‘inline-block’ elements

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#overflow-x">overflow-x</a>

     <td>visible | hidden | scroll | auto | no-display | no-content

     <td>visible

     <td>non-replaced block-level elements and non-replaced
      ‘inline-block’ elements

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#overflow-y">overflow-y</a>

     <td>visible | hidden | scroll | auto | no-display | no-content

     <td>visible

     <td>non-replaced block-level elements and non-replaced
      ‘inline-block’ elements

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#padding">padding</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | auto ]{1,4}

     <td>(see individual properties)

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#padding-bottom">padding-bottom</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | auto ]

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#padding-left">padding-left</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | auto ]

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#padding-right">padding-right</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | auto ]

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#padding-top">padding-top</a>

     <td>[ &lt;length&gt; | &lt;percentage&gt; | auto ]

     <td>0

     <td>

     <td>no

     <td>width* of containing block

     <td>visual

    <tr>
     <th><a class=property href="#visibility">visibility</a>

     <td>visible | hidden | collapse

     <td>visible

     <td>

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#width">width</a>

     <td>[&lt;length> | &lt;percentage>] &amp;&amp; [border-box |
      content-box]? | available | min-content | max-content | fit-content |
      auto

     <td>auto

     <td>all elements but non-replaced inline elements, table rows, and row
      groups

     <td>no

     <td>refer to width of containing block

     <td>visual
  </table>
  <!--end-properties-->
  <!-- Keep this comment at the end of the file
Local variables:
mode: html
sgml-minimize-attributes:t
End:
-->
