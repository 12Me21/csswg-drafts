<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html dir="ltr" lang="en">
  <head>
    <title>CSS Positioned Layout Level 3</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src='http://dev.w3.org/2009/dap/ReSpec.js/js/respec.js' class='remove'>
    </script>
    <script class='remove'>
      var respecConfig = {
          // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
          specStatus:           "ED",
          
          // the specification's short name, as in http://www.w3.org/TR/short-name/
          shortName:            "TBD",

          // if your specification has a subtitle that goes below the main
          // formal title, define it here
          // subtitle   :  "an excellent document",

          // if you wish the publication date to be other than today, set this
           publishDate:  "2011-07-25",

          // if the specification's copyright date is a range of years, specify
          // the start date here:
          // copyrightStart: "2005"

          // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
          // and its maturity status
          // previousPublishDate:  "1977-03-15",
          // previousMaturity:  "WD",

          // if there a publicly available Editor's Draft, this is the link
          edDraftURI:           "TBD",

          // if this is a LCWD, uncomment and set the end of its review period
          // lcEnd: "2009-08-05",

          // if you want to have extra CSS, append them to this list
          // it is recommended that the respec.css stylesheet be kept
          extraCSS:             ["http://dev.w3.org/2009/dap/ReSpec.js/css/respec.css"] ["http://dev.w3.org/csswg/default.css"], 

          // editors, add as many as you like
          // only "name" is required
          editors:  [
              { name: "Arron Eicholz", url: "mailto:arronei@microsoft.com",
                company: "Microsoft Corporation",  },
              { name: "Sylvain Galineau", url: "mailto:sylvaing@microsoft.com",
                company: "Microsoft Corporation",  },
          ],

          // authors, add as many as you like. 
          // This is optional, uncomment if you have authors as well as editors.
          // only "name" is required. Same format as editors.
          // authors:  [
          //    { name: "Some Writer", url: "mailto:someone@example.com",
          //      company: "Example, Inc.", },
          // ],
          
          // name of the WG
          wg:           "CSS Working Group",
          
          // URI of the public WG page
          wgURI:        "http://www.w3.org/Style/CSS/members",
          
          // name (with the @w3c.org) of the public mailing to which comments are due
          wgPublicList: "www-style",
          
          // URI of the patent status for this WG, for Rec-track documents
          // !!!! IMPORTANT !!!!
          // This is important for Rec-track documents, do not copy a patent URI from a random
          // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
          // Team Contact.
          wgPatentURI:  "http://www.w3.org/Consortium/Patent-Policy-20040205/",
      };
    </script>
    <link href="http://dev.w3.org/csswg/default.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <section id='abstract'>
        <p>
            CSS is a language for describing the rendering of structured documents 
            (such as HTML and XML) on screen, on paper, in speech, etc. 
            This module contains the features of CSS level 3 relating to positioned type boxes with 
            their margins, positioning properties, and the "out-of-flow" layout of boxes. 
            Also included in the document are sections that are relevant to 
            properly positioning elements using absolute positioning. 
            It includes and extends the functionality of CSS level 2 [[!CSS21]].
        </p>
        <p>
            Other kinds of layout, such as tables, "floating" boxes, ruby annotations, 
            grid layouts, columns and basic handling of normal "flow" content, 
            are described in other modules. 
            Also, the layout of text inside each line is defined elsewhere.
        </p>

    </section>

    <section id="sotd">
    <!-- XXX TODO determine if there's content here!!!
        <p>
            The following features are at-risk and may be dropped at the end of the CR period if there has not been enough interest from implementers:
            <ul>
                <li></li>
            </ul>
        </p>
    -->
        <p>
            The CSS WG maintains an <a href="http://www.w3.org/Style/CSS/Tracker/products/11">issues list</a> for this module. 
            A <a href="http://www.w3.org/Style/CSS/Test/">test suite</a> and implementation report for CSS Positioning Level 3 
            will be developed during the Candidate Recommendation phase, 
            which will last a minimum of three months, i.e., at least until 15 December 2011. 
            See the section <a href="http://dev.w3.org/csswg/css3-background/Overview.src.html#exit">"CR exit criteria"</a> for more details.
        </p>
    </section>

        
    <section id="introduction" class="secno">
        <h2>Introduction</h2>
        <p class="note">
            Note, the model in this specification extends and clarifies the model described in the CSS level 2 revision 1 specification [[!CSS21]].
        </p>	
        <p>
            CSS assumes the document layout is modeled as a tree of <dfn id="element" title="element">elements</dfn>. 
            Each element has an ordered list of zero or more child elements, 
            with an optional string of text before the list, 
            in-between the children and after the list. 
            The unique element that has no parent is called the <dfn id="rootelement">root element</dfn>.
        </p>
        <p>
            This module describes how any of the <a title="element">elements</a> from the tree of <a title="element">elements</a> 
            can be arranged independent of document order (i.e. taken out of "flow").
        </p>
        <!-- XXX TODO: add example image -->
        <p>
            With a positioned element the element may be placed anywhere within 
            the content not specifically respecting the tree of <a title="element">elements</a> order.
        </p>
        <!-- XXX TODO: add source for example 1 -->
        <p>
            In [[!CSS21]], the visual formatting model explained how each element in the document tree 
            generates zero or more boxes according to the <a href="http://www.w3.org/TR/CSS2/box.html">box model</a>. 
            This module further explains and extends the positioning scheme. 
            The layout of these boxes is governed by:
        </p>
        <ul>
            <li>
                <a href="http://www.w3.org/TR/CSS2/box.html#box-dimensions">box dimensions</a> 
                and <a href="http://www.w3.org/TR/CSS2/visuren.html#box-gen">type</a>.
            </li>
            <li>
                <a href="http://www.w3.org/TR/CSS2/visuren.html#positioning-scheme">positioning scheme</a> 
                (normal flow, float, and absolute positioning).
            </li>
            <li>relationships between elements in the <a href="http://www.w3.org/TR/CSS2/conform.html#doctree">document tree</a>.</li>
            <li>external information (e.g., viewport size, intrinsic dimensions of images, etc.).</li>
        </ul>
        <p>
            The properties defined in this module apply to both <a href="http://www.w3.org/TR/CSS2/media.html#continuous-media-group">continuous media</a> and 
            <a href="http://www.w3.org/TR/CSS2/media.html#paged-media-group">paged media</a>.
        </p>
        
        <section class="section" id="module-interactions">
        <h3>Module Interactions</h3>
            <p>
                This module replaced and extends the positioning scheme features defined in [[!CSS21]] sections:
            </p>
            <ul>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#viewport">9.1.1 The viewport</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block">9.1.2 Containing blocks</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#positioning-scheme">9.3 Positioning schemes</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#relative-positioning">9.4.3 Relative positioning</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">9.6 Absolute positioning</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo">9.7 Relationships between 'display', 'position', and 'float'</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#comparison">9.8 Comparison of normal flow, floats, and absolute positioning</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visuren.html#layers">9.9 Layered presentation</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">10.1 Definition of "containing block"</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width">10.3.7 Absolutely positioned, non-replaced elements</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-replaced-width">10.3.8 Absolutely positioned, replaced elements</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height">10.6.4 Absolutely positioned, non-replaced elements</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-replaced-height">10.6.5 Absolutely positioned replaced elements</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">10.6.7 'Auto' heights for block formatting context roots</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/visufx.html#clipping">11.1.2 Clipping: the 'clip' property</a></li>
                <li><a href="http://www.w3.org/TR/CSS2/zindex.html">Appendix E. Elaborate description of Stacking Contexts</a></li>
            </ul>
        
        </section>
        <!-- End section" Module Interactions -->
        
    </section>
    <!-- End section Introduction -->

    
    <section class="section" id="values">
    <h2>Values</h2>
        <p>
            This specification follows the CSS property definition conventions from [[!CSS21]].
        </p>
        <p>
            All other values are defined in CSS Level 2 Revision 1 [[!CSS21]].
        </p>
        <p>
            All properties defined in this specification also accept the <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a> 
            keyword as their property value, but for readability it has not been listed explicitly.
        </p>
    
    </section>
    <!-- End section: Values -->


    <section class="section" id="viewport">
    <h2>The Viewport</h2>
        <p>
            User agents for <a href="http://www.w3.org/TR/CSS2/media.html#continuous-media-group">continuous media</a> 
            generally offer users a viewport (a window or other viewing area on the screen) through which users consult a document. 
            User agents may change the document's layout when the viewport is resized 
            (see the <a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing block</a>).
        </p>
        <p>
            When the viewport is smaller than the area of the canvas on which the document is rendered, 
            the user agent may offer a scrolling mechanism. 
            There is at most one viewport per <a href="http://www.w3.org/TR/CSS2/intro.html#canvas">canvas</a>, 
            but user agents may render to more than one canvas (i.e., provide different views of the same document).
        </p>		

    </section>
    <!-- End section: The Viewport -->

    <section class="section" id="containing-blocks">
    <h2>Containing Blocks</h2>
        <p>
            In CSS, many box positions and sizes are calculated with respect to 
            the edges of a rectangular box called a <em>containing block</em>. 
            In general, generated boxes act as containing blocks for descendant boxes; 
            we say that a box "establishes" the containing block for its descendants. 
            The phrase "a box's containing block" means "the containing block in which the box lives," 
            not the one it generates.
        </p>
        <p>
            Each box is given a position with respect to its containing block, 
            but it is not confined by this containing block; it may <a href="http://www.w3.org/TR/CSS2/visufx.html#overflow">overflow</a>.
        </p>
        
        <section class="section" id="def-containing-blocks">
        <h3>Definition of containing block</h3>
            <p>
                The position and size of an element's box(es) are sometimes calculated relative to a certain rectangle, 
                called the containing block of the element. 
                The containing block of an element is defined as follows:
            </p>
            <ol>
                <li>
                    The containing block in which the <a href="http://www.w3.org/TR/CSS2/conform.html#root">root element</a> lives 
                    is a rectangle called the <em>initial containing block</em>. 
                    For continuous media, it has the dimensions of the <a href="http://www.w3.org/TR/CSS2/visuren.html#viewport">viewport</a> 
                    and is anchored at the canvas origin; it is the <a href="http://www.w3.org/TR/CSS2/page.html#page-area">page area</a> for paged media. 
                    The 'direction' property of the initial containing block is the same as for the root element.	
                </li>	
                <li>
                    For other elements, if the element's position is 'relative' or 'static', 
                    the containing block is formed by the content edge of the nearest 
                    <a href="http://www.w3.org/TR/CSS2/visuren.html#block-boxes">block container</a> ancestor box.
                </li>	
                <li>
                    If the element has 'position: fixed', the containing block is established by the 
                    <a href="http://www.w3.org/TR/CSS2/visuren.html#viewport">viewport</a> in the case of continuous media 
                    or the page area in the case of paged media.
                </li>	
                <li>
                    If the element has 'position: page', the containing block is the initial containing block. 
                    Typically this is the viewport or the page area when in paged media. 
                    In the case of <a href="http://www.w3.org/TR/css3-regions/">CSS Regions</a> this is the individual region.
                </li>	
                <li>
                    If the element has <code>'position: absolute'</code>, the containing block is established 
                    by the nearest ancestor with a 
                    '<a href="http://www.w3.org/Style/Group/css3-src/css3-positioning/Overview.html#position">position</a>' other than <code>'static'</code>, in the following way:
                    <ol>
                        <li>
                            In the case that the ancestor is block-level, the containing block is formed by the padding edge of the ancestor.	
                        </li>	
                        <li>
                            In the case that the ancestor is inline-level, 
                            the containing block depends on the 'direction' property of the ancestor: 
                            <ol>
                                <li>
                                    If the 'direction' is <code>'ltr'</code>, 
                                    the top and left of the containing block are the top and left content edges of the first box generated by the ancestor, 
                                    and the bottom and right are the bottom and right content edges of the last box of the ancestor.
                                </li>	
                                <li>
                                    If the 'direction' is <code>'rtl'</code>, 
                                    the top and right are the top and right edges of the first box generated by the ancestor, 
                                    and the bottom and left are the bottom and left content edges of the last box of the ancestor.
                                    <p class="note">
                                        Note, in some cases when a line wraps it may seem as if the left and right positions are swapped.
                                    </p> 
                                </li>
                            </ol>	
                        </li>
                    </ol>
                    <p>
                        If there is no such ancestor, the containing block is the initial containing block.
                    </p>	
                </li>	
            </ol>
            <p>
                In paged media, an absolutely positioned element is positioned relative to its containing block 
                ignoring any page breaks (as if the document were continuous). 
                The element may subsequently be broken over several pages.
            </p>
            <p>
                For absolutely positioned content that resolves to a position on a page other than the page being laid out (the current page), 
                or resolves to a position on the current page which has already been rendered for printing, printers may place the content:
            </p>
            <ul>
                <li>on another location on the current page,</li>
                <li>on a subsequent page, or</li>
                <li>may omit it.</li>
            </ul>
            <p class="note">
                Note, a block-level element that is split over several pages may have a different width on each page and that there may be device-specific limits.
            </p>
<div class="example"><p style="display:none">Example(s):</p>
<p>With no positioning, the containing blocks (C.B.) in the
following document:</p>

<pre class="html-example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
   &lt;HEAD&gt;
      &lt;TITLE&gt;Illustration of containing blocks&lt;/TITLE&gt;
   &lt;/HEAD&gt;
   &lt;BODY id="body"&gt;
      &lt;DIV id="div1"&gt;
      &lt;P id="p1"&gt;This is text in the first paragraph...&lt;/P&gt;
      &lt;P id="p2"&gt;This is text &lt;EM id="em1"&gt; in the 
      &lt;STRONG id="strong1"&gt;second&lt;/STRONG&gt; paragraph.&lt;/EM&gt;&lt;/P&gt;
      &lt;/DIV&gt;
   &lt;/BODY&gt;
&lt;/HTML&gt;
</pre>

            <p>are established as follows:</p>
        
            <table border="1">
                <tr><th>For box generated by </th>
                <td><strong>C.B. is established by</strong></td></tr>
                <tr><td>html</td><td>initial C.B. (UA-dependent)</td></tr>
                <tr><td>body</td><td>html</td></tr>
                <tr><td>div1</td><td>body</td></tr>
                <tr><td>p1</td><td>div1</td></tr>
                <tr><td>p2</td><td>div1</td></tr>
                <tr><td>em1</td><td>p2</td></tr>
                <tr><td>strong1</td><td>p2</td></tr>
            </table>

            <p>If we position "div1":</p>
            
<pre class="example">
   #div1 { position: absolute; left: 50px; top: 50px }
</pre>

            <p>
                its containing block is no longer "body"; 
                it becomes the initial containing block 
                (since there are no other positioned ancestor boxes).
            </p>
            <p>If we position "em1" as well:</p>

<pre class="example">
   #div1 { position: absolute; left: 50px; top: 50px }
   #em1  { position: absolute; left: 100px; top: 100px }
</pre>

<p>the table of containing blocks becomes:</p>

            <table border="1">
                <tr><th>For box generated by</th>
                <td><strong>C.B. is established by</strong></td></tr>
                <tr><td>html</td><td>initial C.B. (UA-dependent)</td></tr>
                <tr><td>body</td><td>html</td></tr>
                <tr><td>div1</td><td>initial C.B.</td></tr>
                <tr><td>p1</td><td>div1</td></tr>
                <tr><td>p2</td><td>div1</td></tr>
                <tr><td>em1</td><td>div1</td></tr>
                <tr><td>strong1</td><td>em1</td></tr>
            </table>

            <p>By positioning "em1", its containing block becomes
            the nearest positioned ancestor box (i.e., that generated
            by "div1"). 
            </p>
        </div>
        

        </section>
        
    </section>
    <!-- End section: Containing blocks -->

    <section class="section" id="normal-flow">
    <h2>Normal Flow</h2>
        <p>
            Boxes in the normal flow belong to a formatting context, 
            which may be block or inline, but not both simultaneously. 
            See the CSS Basic Box Model module [[!CSS3BOX]] for further details about <a href="http://www.w3.org/TR/2007/WD-css3-box-20070809/#normal">normal flow</a>.
        </p>
    
    </section>
    <!-- End section: Normal Flow -->
    
    <section class="section" id="floats">
    <h2>Floats</h2>
        <p>
            A float is a box that is positioned within content, often left or right on the current line. 
            The most interesting characteristic of a float (or "floated" or "floating" box) 
            is that content may flow along its side (or be prohibited from doing so by the 'clear' property) 
            or around the floated box. 
            See the <a href="http://dev.w3.org/csswg/css3-exclusions/">CSS Floats and Exclusions</a> spec for more details about Floats.
        </p>
    
    </section>
    <!-- End section: FLoats -->
    
    <section class="section" id="positioning-schemes">
    <h2>Positioning schemes</h2>
        <p>
            In CSS, a box may be laid out according to three <em>positioning schemes</em>:
        </p>
        <ol>
            <li>
                <a href="http://www.w3.org/TR/CSS2/visuren.html#normal-flow">Normal flow</a>. 
                In CSS, normal flow includes <a href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting">block formatting</a> of block-level boxes, 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#inline-formatting">inline formatting</a> of inline-level boxes, 
                and <a href="http://www.w3.org/TR/CSS2/visuren.html#relative-positioning">relative positioning</a> of block-level and inline-level boxes.
            </li>
            <li>
                <a href="http://www.w3.org/TR/CSS2/visuren.html#floats">Floats</a>. 
                In the float model, a box is first laid out according to the normal flow, then taken out of the flow and positioined, typically to the left or right. Content may flow along the side of a float.
            </li>
            <li>
                <a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">Absolute positioning.</a> 
                In the absolute positioning model, a box is removed from the normal flow entirely 
                (it has no impact on later siblings) and assigned a position with respect to a containing block.		
            </li>
        </ol>
        <p>
            An element is called <em>out of flow</em> if it is floated, absolutely positioned, or is the root element. 
            An element is called <em>in-flow</em> if it is not out-of-flow. 
            The <em>flow of an element</em> A is the set consisting of A and all in-flow elements whose nearest out-of-flow ancestor is A.
        </p>
    
        <section class="section" id="relative-positioning">
        <h3>Relative Positioning</h3>
            <p>
                Once a box has been laid out according to the <a href="http://www.w3.org/TR/CSS2/visuren.html#normal-flow">normal flow</a> or floated, 
                it may be shifted relative to this position. 
                This is called <em>relative positioning</em>. 
                Offsetting a box (B1) in this way has no effect on the box (B2) that follows: 
                B2 is given a position as if B1 were not offset and B2 is not re-positioned after B1's offset is applied. 
                This implies that relative positioning may cause boxes to overlap. 
                However, if relative positioning causes an 'overflow: auto' or 'overflow: scroll' box to have overflow, 
                the UA must allow the user to access this content (at its offset position), which, through the creation of scrollbars, may affect layout.
            </p>
            <p>
                A relatively positioned box keeps its normal flow size, 
                including line breaks and the space originally reserved for it.
            </p>
            <p>
                A relatively positioned box establishes a new a new containing block for absolutely positioned descendants. 
                (This is a common use of relatively positioned boxes.) 
                The section on <a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block">containing blocks</a> 
                explains when a relatively positioned box establishes a new containing block.
            </p>
            <p>
                For relatively positioned elements, 'left' and 'right' move the box(es) horizontally, 
                without changing their size. 
                'Left' moves the boxes to the right, and 'right' moves them to the left. 
                Since boxes are not split or stretched as a result of 'left' or 'right', the used values are always: left = -right.
            </p>
            <p>
                If both 'left' and 'right' are 'auto' (their initial values), 
                the used values are '0' (i.e., the boxes stay in their original position).
            </p>
            <p>
                If 'left' is 'auto', its used value is minus the value of 'right' 
                (i.e., the boxes move to the left by the value of 'right').
            </p>
            <p>
                If 'right' is specified as 'auto', its used value is minus the value of 'left'.
            </p>
            <p>
                If neither 'left' nor 'right' is 'auto', the position is over-constrained, 
                and one of them has to be ignored. 
                If the 'direction' property of the containing block is 'ltr', the value of 'left' wins and 'right' becomes -'left'. 
                If 'direction' of the containing block is 'rtl', 'right' wins and 'left' is ignored.
            </p>
<div class="example"><p style="display:none">Example(s):</p>
<p>The following three rules are equivalent:</p>

<pre class="html-example">
div.a8 { position: relative; direction: ltr; left: -1em; right: auto }
div.a8 { position: relative; direction: ltr; left: auto; right: 1em }
div.a8 { position: relative; direction: ltr; left: -1em; right: 5em }
</pre>
        </div>
        <p>
            The 'top' and 'bottom' properties move relatively positioned element(s) up or down without changing their size. 
            'Top' moves the boxes down, and 'bottom' moves them up. 
            Since boxes are not split or stretched as a result of 'top' or 'bottom', the used values are always: top = -bottom.
        </p>
        <p>
            If 'top' and 'bottom' are 'auto', their used values are both '0'.
        </p>
        <p>
            If one of them, 'top' or 'bottom', is 'auto', the 'auto' value becomes the negative of the other.
        </p>
        <p>
            If neither 'top' and 'bottom' is 'auto', 'bottom' is ignored (i.e., the used value of 'bottom' will be minus the value of 'top').
        </p>
        <p class="note">
            Note, dynamic movement of relatively positioned boxes can produce animation effects in scripting environments 
            (see also the '<a href="http://www.w3.org/TR/CSS2/visufx.html#propdef-visibility">visibility</a>' property). 
            Although relative positioning may be used as a form of superscripting and subscripting, 
            the line height is not automatically adjusted to take the positioning into consideration. 
            See the description of <a href="http://www.w3.org/TR/CSS2/visudet.html#line-height">line height calculations</a> for more information.
        </p>
        <p>
            Examples of relative positioning are provided in the section 
            <a href="http://www.w3.org/TR/CSS2/visuren.html#comparison">comparing normal flow, floats, and absolute positioning</a>.
        </p>
            
        </section>
        <!-- End section: Relative positioning  -->
    
        <section class="section" id="absolute-positioning">
        <h3>Absolute positioning</h3>
            <p>
                In the absolute positioning model, a box is explicitly offset with respect to its containing block. 
                It is removed from the normal flow entirely (it has no impact on later siblings). 
                An absolutely positioned box establishes a new containing block for normal flow children and absolutely 
                (but not fixed) positioned descendants. 
                However, the contents of an absolutely positioned element do not flow around any other boxes. 
                They may obscure the contents of another box (or be obscured themselves), 
                depending on the <a href="http://www.w3.org/TR/CSS2/visuren.html#stack-level">stack levels</a> of the overlapping boxes.
            </p>
            <p>
                References in this specification to an <em>absolutely positioned element</em> 
                (or its box) imply that the element's '<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-position">position</a>' property 
                has the value 'absolute' or 'fixed'.
            </p>
        
        </section>
        <!-- End section: Absolute positioning -->
        
        <section class="section" id="page-positioning">
        <h3>Page positioning</h3>
            <p>
                In the page positioning model, a box is explicitly offset with respect to its initial containing block. 
                It is removed from the normal flow entirely (it has no impact on later siblings). 
                A page positioned box establishes a new containing block for normal flow children and absolutely 
                (but not fixed, or page) positioned descendants. 
                However, the contents of a page positioned element do not flow around any other boxes. 
                They may obscure the contents of another box (or be obscured themselves), 
                depending on the <a href="http://www.w3.org/TR/CSS2/visuren.html#stack-level">stack levels</a> of the overlapping boxes. 
                For <a href="http://www.w3.org/TR/CSS2/page.html">paged media</a>, 
                boxes with page positions are only generated on the initial page where the page position element exists. 
                Boxes with page position that are larger than the page area are clipped and the remaining part of the box is placed on the following page.
            </p>
            <p>
                References in this specification to a <em>page positioned element</em> (or its box) imply that the element's 
                '<a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-position">position</a>' property has the value 'page'.
            </p>
        </section>
        <!-- End section: Page positioning -->
        
        
        <section class="section" id="fixed-positioning">
        <h3>Fixed positioning</h3>
            <p>
                Fixed positioning is a subcategory of absolute positioning. 
                The only difference is that for a fixed positioned box, the containing block is established by the <a href="http://www.w3.org/TR/CSS2/visuren.html#viewport">viewport</a>. 
                For <a href="http://www.w3.org/TR/CSS2/media.html#continuous-media-group">continuous media</a>, 
                fixed boxes do not move when the document is scrolled. 
                In this respect, they are similar to <a href="http://www.w3.org/TR/CSS2/colors.html#background-properties">fixed background images</a>. 
                For <a href="http://www.w3.org/TR/CSS2/media.html#paged-media-group">paged media</a>, boxes with fixed positions are repeated on every page. 
                This is useful for placing, for instance, a signature at the bottom of each page. 
                Boxes with fixed position that are larger than the page area are clipped. 
                Parts of the fixed position box that are not visible in the initial containing block will not print.
            </p>
            <div class="example"><p style="display:none">Example(s):</p>
                <p>Authors may use fixed positioning to create frame-like presentations. Consider the following frame layout:</p>
                <div class="figure">
                    <p><img src="frame.png" alt="Example of frame layout">
                    <span class="dlink">&nbsp;&nbsp;&nbsp;
                        <a name="img-anon-block" href="http://www.w3.org/TR/CSS2/images/longdesc/frame-desc.html" title="Long description for frame layout example">[D]</a></span> 
                    </p>
                </div>
                <p>
                    This might be achieved with the following HTML document and style rules:
                </p>
                <pre class="html-example">
&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;HTML&gt;
  &lt;HEAD&gt;
    &lt;TITLE&gt;A frame document with CSS 2.1&lt;/TITLE&gt;
    &lt;STYLE type="text/css" media="screen"&gt;
      BODY { height: 8.5in } /* Required for percentage heights below */
      #header {
        position: fixed;
        width: 100%;
        height: 15%;
        top: 0;
        right: 0;
        bottom: auto;
        left: 0;
      }
      #sidebar {
        position: fixed;
        width: 10em;
        height: auto;
        top: 15%;
        right: auto;
        bottom: 100px;
        left: 0;
      }
      #main {
        position: fixed;
        width: auto;
        height: auto;
        top: 15%;
        right: 0;
        bottom: 100px;
        left: 10em;
      }
      #footer {
        position: fixed;
        width: 100%;
        height: 100px;
        top: auto;
        right: 0;
        bottom: 0;
        left: 0;
      }
    &lt;/STYLE&gt;
  &lt;/HEAD&gt;
  &lt;BODY&gt;
    &lt;DIV id="header"&gt; ...  &lt;/DIV&gt;
    &lt;DIV id="sidebar"&gt; ...  &lt;/DIV&gt;
    &lt;DIV id="main"&gt; ...  &lt;/DIV&gt;
    &lt;DIV id="footer"&gt; ...  &lt;/DIV&gt;
  &lt;/BODY&gt;
&lt;/HTML&gt;
                
                </pre>
            </div>
        </section>
        <!-- End section: Fixed positioning -->
        

    </section>
    <!-- End section: Positioning schemes -->
    
    <section class="section" id="position-property">
    <h2>Choosing a positioning scheme: <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-position">'position'</a> property</h2>
        <p>The <a href="visuren.html#propdef-position" class="noxref"><span class="propinst-position">'position'</span></a> and <a href="visuren.html#propdef-float" class="noxref"><span class="propinst-float">'float'</span></a> properties determine which 
        of the CSS&nbsp;2.1 positioning algorithms is used to calculate 
        the position of a box.
        </p>
        
        <div class="propdef">
        <dl><dt>
        <span class="index-def" title="'position'"><a name="propdef-position" class="propdef-title"><strong>'position'</strong></a></span>
        </dt><dd>
        <table class="propinfo" cellpadding="0" cellspacing="0">
        
        <tbody><tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td>static | relative | absolute | page | fixed 
        </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>static
        </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>all elements except table-column-group and table-column
        </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
        </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>N/A
        </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
        </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td><td>as specified
        
        </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>The values of this property have the following meanings:</p>
        
        <dl>
        <dt><strong>static</strong></dt>
        
        <dd>The box is a normal box, laid out according to the <a href="#normal-flow">normal flow</a>. The 
        <a href="visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a>, 
        
        <a href="visuren.html#propdef-right" class="noxref"><span class="propinst-right">'right'</span></a>, 
        <a href="visuren.html#propdef-bottom" class="noxref"><span class="propinst-bottom">'bottom'</span></a>,
        and <a href="visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a>
        properties do not apply. 
        </dd>
        <dt><strong>relative</strong></dt>
        
        <dd>
            The box's position is calculated according to the <a href="#normal-flow">normal flow</a> (this is called the position in
            normal flow). Then the box is offset <a href="#relative-positioning">relative</a> to its normal position 
            and in all cases, including table elements, does not affect the position of any following boxes. 
            When a box B is relatively positioned, the position of the following box is calculated as though B were not offset.
            The effect of 'position: relative' on table elements is defined as follows:
                <ul>
                    <li>table-row-group, table-header-group, table-footer-group and table-row offset relative to its normal position within the table. 
                        If table-cells span multiple rows, only the cells originating in the relative positioned row is offset.</li>
                    <li>
                        table-column-group, table-column do not offset the respective column and has no visual affect when 'position: relative' is applied.
                    </li>
                    <li>
                        table-caption and table-cell offset relative to its normal position within the table. 
                        If a table cell spans multiple columns or rows the full spanned cell is offset.
                    </li>
                </ul>
        
        </dd>
        <dt><strong>absolute</strong></dt>
        <dd> The box's position (and possibly size) is specified
        with the <a href="visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a>,
        <a href="visuren.html#propdef-right" class="noxref"><span class="propinst-right">'right'</span></a>, 
        <a href="visuren.html#propdef-bottom" class="noxref"><span class="propinst-bottom">'bottom'</span></a>, and
        <a href="visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a>
        properties.
        These properties specify offsets with respect to the box's 
        <a href="#containing-block">containing block</a>. Absolutely
        positioned boxes are taken out of the normal flow. This means
        they have no impact on the layout of later siblings. Also,
        though <a href="#absolutely-positioned">absolutely positioned</a> 
        
        boxes have margins, they
        do not <a href="box.html#collapsing-margins">collapse</a>
        with any other margins.
        </dd>
        <dt><strong>page</strong></dt>
        <dd>
            The box's position is calculated according to the 'absolute' model, 
            but in addition, the box containing block is always the 
            <a href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">initial containing block</a>. 
            As with the 'absolute' model, the box's margins do not collapse with any other margins. 
            In the case of the print media type, the box is rendered only on the initial page. 
            UAs may paginate the content of paged boxes. 
            Note that CSS Regions are also <a href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">initial containing blocks</a>, 
            in accordance with <a href="http://dev.w3.org/csswg/css3-regions/Overview.html#the-flow-property">section 3.1</a> of the 
            <a href="http://dev.w3.org/csswg/css3-regions/Overview.html">CSS Regions Module</a>.
        </dd>
        
        <dt><strong>fixed</strong></dt>
        <dd> The box's position is calculated according to the 'absolute'
        model, but in addition, the box is <a href="#fixed-positioning">fixed</a> with respect to some reference.  
        As with the 'absolute' model, the box's margins do not collapse with any other margins.
        In the case of handheld, projection, screen, tty, and tv media types, 
        the box is fixed with respect to the <a href="#viewport">viewport</a> 
        and does not move when 
        scrolled. In the case of the print media type, the box is rendered on every page, and is fixed with respect to the page box, even if the page is seen through a <a href="#viewport">viewport</a> 
        
        (in the case of a print-preview, for example). For other media 
        types, the presentation is undefined. 
        Authors may wish to specify 'fixed' in a
        media-dependent way.  For instance, an author may want a box to remain
        at the top of the <a href="#viewport">viewport</a> on the screen, but
        not at the top of each printed page. The two specifications may be
        separated by using an <a href="media.html#at-media-rule">@media
        rule</a>, as in:
        
        <div class="example"><p style="display: none;">Example(s):</p>
        <pre><code class="css">   
        @media screen { 
          h1#first { position: fixed } 
        }
        @media print { 
          h1#first { position: static }
        }
        </code></pre>   
        </div>
        <p>UAs must not paginate the content of fixed boxes. <span class="note">Note that UAs may print invisible content in other
        ways. See <a href="page.html#outside-page-box">"Content outside the
        page box"</a> in chapter&nbsp;13.</span>
        
        </p></dd>
        </dl>
        <p>
            In previous versions of CSS user agents may treat position 'fixed' as 'static' on the root element. 
            This specification removes that option and it is now required that the root element is 'fixed' as defined.
        </p>	
        </section>
    <!-- End section: Choosing a positioning scheme: 'position' property -->

    <section class="section" id="box-offsets-trbl">
    <h2>Box offsets: 'top', 'right', 'bottom', 'left'</h2>
    
        <p>An element is said to be <span class="index-def" title="positioned
        element/box"><a name="positioned-element"><dfn>positioned</dfn></a></span>
        if its <a href="visuren.html#propdef-position" class="noxref"><span class="propinst-position">'position'</span></a> property has
        a value other than 'static'. Positioned elements generate
        positioned boxes, laid out according to four properties:</p>
        
        <div class="propdef">
        <dl><dt>
        <span class="index-def" title="'top'"><a name="propdef-top" class="propdef-title"><strong>'top'</strong></a></span>
        </dt><dd>
        <table class="propinfo" cellpadding="0" cellspacing="0">
        <tbody>
            <tr valign="baseline">
                <td><em>Value:</em>&nbsp;&nbsp;</td>
                <td><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage" class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | auto
        
        </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
        </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>positioned elements
        </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
        </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>refer to height of containing block
        </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
        </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td>
            <td>
                for <code>'position: relative'</code>, see <a href="http://www.w3.org/Style/Group/css3-src/css3-positioning/Overview.html#relative-positioning">Relative Positioning</a>. 
                For <code>'position: static'</code>, <code>'auto'</code>. 
                Otherwise: if specified as a length, the corresponding absolute length; if specified as a percentage, the specified value; otherwise, <code>'auto'</code>.
        </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>This property specifies how far an <a href="#absolutely-positioned">absolutely positioned</a> box's top
        margin edge is offset below the top edge of the box's <a href="#containing-block">containing block</a>. For relatively
        positioned boxes, the offset is with respect to the top edges of the
        box itself (i.e., the box is given a position in the normal flow, then
        offset from that position according to these properties).
        For page positioned boxes, the offset is with respect to the top edge of the initial containing box itself. 
        For absolutely positioned elements whose containing block is based on a block-level element, 
        these properties are an offset from the padding edge of that element.
        </p>
        
        <div class="propdef">
        <dl><dt>
        <span class="index-def" title="'right'"><a name="propdef-right" class="propdef-title"><strong>'right'</strong></a></span>
        </dt><dd>
        <table class="propinfo" cellpadding="0" cellspacing="0">
        <tbody><tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage" class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | auto
        
        </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
        </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>positioned elements
        </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
        </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>refer to width of containing block
        </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
        </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td>
        <td>
            for <code>'position: relative'</code>, see <a href="http://www.w3.org/Style/Group/css3-src/css3-positioning/Overview.html#relative-positioning">Relative Positioning</a>. 
            For <code>'position: static'</code>, <code>'auto'</code>. 
            Otherwise: if specified as a length, the corresponding absolute length; if specified as a percentage, the specified value; otherwise, <code>'auto'</code>.
        </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>Like 'top', but specifies how far a box's right margin edge is
        offset to the left of the right edge of the box's <a href="#containing-block">containing block</a>.  For relatively
        positioned boxes, the offset is with respect to the right edge of the
        box itself.
        For page positioned boxes, the offset is with respect to the right edge of the initial containing box itself. 
        For absolutely positioned elements whose containing block is based on a block-level element, 
        these properties are an offset from the padding edge of that element.
        </p>
        
        <div class="propdef">
        <dl><dt>
        <span class="index-def" title="'bottom'"><a name="propdef-bottom" class="propdef-title"><strong>'bottom'</strong></a></span>
        </dt><dd>
        <table class="propinfo" cellpadding="0" cellspacing="0">
        <tbody><tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage" class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | auto
        
        </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
        </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>positioned elements
        </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
        </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>refer to height of containing block
        </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
        </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td><td>
            for <code>'position: relative'</code>, see <a href="http://www.w3.org/Style/Group/css3-src/css3-positioning/Overview.html#relative-positioning">Relative Positioning</a>. 
            For <code>'position: static'</code>, <code>'auto'</code>. 
            Otherwise: if specified as a length, the corresponding absolute length; if specified as a percentage, the specified value; otherwise, <code>'auto'</code>.
        </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>Like 'top', but specifies how far a box's bottom margin edge is
        offset above the bottom of the box's <a href="#containing-block">containing block</a>. For relatively
        positioned boxes, the offset is with respect to the bottom edge of the
        box itself.
        For page positioned boxes, the offset is with respect to the bottom edge of the initial containing box itself. 
        For absolutely positioned elements whose containing block is based on a block-level element, these properties are an offset from the padding edge of that element.
        </p>
        
        <div class="propdef">
        <dl><dt>
        <span class="index-def" title="'left'"><a name="propdef-left" class="propdef-title"><strong>'left'</strong></a></span>
        </dt><dd>
        <table class="propinfo" cellpadding="0" cellspacing="0">
        <tbody><tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a> | <a href="syndata.html#value-def-percentage" class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a> | auto
        
        </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
        </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>positioned elements
        </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
        </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>refer to width of containing block
        </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
        </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td>
        <td>
            for <code>'position: relative'</code>, see <a href="http://www.w3.org/Style/Group/css3-src/css3-positioning/Overview.html#relative-positioning">Relative Positioning</a>. 
            For <code>'position: static'</code>, <code>'auto'</code>. 
            Otherwise: if specified as a length, the corresponding absolute length; if specified as a percentage, the specified value; otherwise, <code>'auto'</code>.
        </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>Like 'top', but specifies how far a box's left margin edge is
        offset to the right of the left edge of the box's <a href="#containing-block">containing block</a>.  For relatively
        positioned boxes, the offset is with respect to the left edge of the
        box itself.
        </p>
        
        <p>The values for the four properties have the following meanings:</p>
        
        <dl>
        <dt><strong><a href="syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a></strong></dt>
        <dd>The offset is a fixed distance from the reference edge. Negative values are allowed.
        </dd>
        <dt><strong><a href="syndata.html#value-def-percentage" class="noxref"><span class="value-inst-percentage">&lt;percentage&gt;</span></a></strong></dt>
        
        <dd>The offset is a percentage of the containing block's width (for <a href="visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a> or <a href="visuren.html#propdef-right" class="noxref"><span class="propinst-right">'right'</span></a>) or height (for <a href="visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a> and <a href="visuren.html#propdef-bottom" class="noxref"><span class="propinst-bottom">'bottom'</span></a>). Negative values are allowed.
        </dd>
        <dt><strong>auto</strong></dt>
        <dd>For non-replaced elements, the effect of this value 
        depends on which of related properties have the value 'auto' as
        well. See the sections on the 
        <a href="visudet.html#abs-non-replaced-width">width</a>
        
        and <a href="visudet.html#abs-non-replaced-height">height</a>
        of <a href="#absolutely-positioned">absolutely positioned</a>, 
        non-replaced elements for details.  For replaced elements, the
        effect of this value depends only on the intrinsic dimensions of the
        replaced content. See the sections on the <a href="visudet.html#abs-replaced-width">width</a> and <a href="visudet.html#abs-replaced-height">height</a> of absolutely
        positioned, replaced elements for details.
        </dd>
        </dl>
        <p class="note">
            Note for 'page' and 'fixed' positioned elements using large values or negative values may easily move elements 
            outside the viewport and make the contents unreachable through scrolling or other means. 
            Authors should be aware that page and fixed position elements are always relative to the initial containing block.
        </p>
    
    </section>
    <!-- End section: Box offsets: 'top', 'right', 'bottom', 'left'  -->
    
    <section class="section" id="size-and-position-details">
    <h2>Sizing and positioning details</h2>
        
        <section class="section" id="width-of-absolute-non-replaced-element">
        <h3>The width of absolute, page or fixed positioned, non-replaced element</h3>
            <p>The constraint that determines the used values for these elements is:</p>
            <br/>
            <p><code>'left' + 'margin-left' + 'border-left-width' + 'padding-left' + 'width' + 'padding-right' + 'border-right-width' + 'margin-right' + 'right' = width of containing block </code></p>
            <br/>
            <p>
                If all three of 'left', 'width', and 'right' are 'auto': 
                First set any 'auto' values for 'margin-left' and 'margin-right' to 0. 
                Then, if the 'direction' property of the element establishing the <a href="http://www.w3.org/TR/CSS2/visudet.html#static-position">static-position</a> containing block is 
                'ltr' set 'left' to the static position and apply rule number <em>three</em> below; otherwise, set 'right' to the 
                <a href="http://www.w3.org/TR/CSS2/visudet.html#static-position">static-position</a> and apply rule number <em>one</em> below.
            </p>
            <p>
                If none of the three is 'auto': If both 'margin-left' and 'margin-right' are 'auto', 
                solve the equation under the extra constraint that the two margins get equal values, 
                unless this would make them negative, in which case when direction of the containing block is 'ltr' ('rtl'), 
                set 'margin-left' ('margin-right') to zero and solve for 'margin-right' ('margin-left'). 
                If one of 'margin-left' or 'margin-right' is 'auto', solve the equation for that value. 
                If the values are over-constrained, ignore the value for 'left' (in case the 'direction' property of the containing block is 'rtl') 
                or 'right' (in case 'direction' is 'ltr') and solve for that value.
            </p>
            <p>
                Otherwise, set 'auto' values for 'margin-left' and 'margin-right' to 0, and pick one of the following six rules that apply.
            </p>
            <ol>
                <li>	
                    If 'left' and 'width' are 'auto' and 'right' is not 'auto', then the width is shrink-to-fit. Then solve for 'left'</li>
                <li>
                    If 'left' and 'right' are 'auto' and 'width' is not 'auto', 
                    then if the 'direction' property of the element establishing the static-position 
                    containing block is 'ltr' set 'left' to the <a href="http://www.w3.org/TR/CSS2/visudet.html#static-position">static-position</a>, 
                    otherwise set 'right' to the <a href="http://www.w3.org/TR/CSS2/visudet.html#static-position">static-position</a>. Then solve for 'left' (if 'direction is 'rtl') or 'right' (if 'direction' is 'ltr').</li>
                <li>If 'width' and 'right' are 'auto' and 'left' is not 'auto', then the width is shrink-to-fit. Then solve for 'right'</li>
                <li>If 'left' is 'auto', 'width' and 'right' are not 'auto', then solve for 'left'</li>
                <li>If 'width' is 'auto', 'left' and 'right' are not 'auto', then solve for 'width'</li>
                <li>If 'right' is 'auto', 'left' and 'width' are not 'auto', then solve for 'right'</li>
            </ol>
            
        </section>
        <!-- End section: The width of absolute, page or fixed positioned, non-replaced element -->
        
        <section class="section" id="width-of-absolute-replaced-element">
        <h3>The width of absolute, page or fixed positioned, replaced element</h3>
            <p>
                If <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> and <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> 
                both have computed values of 'auto' and the element also has an intrinsic width, 
                then that intrinsic width is the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a>.
            </p>
            <p>
                If <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> and <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> 
                both have computed values of 'auto' and the element has no intrinsic width, but does have an intrinsic height and intrinsic ratio; 
                or if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> has a computed value of 'auto', 
                <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> has some other computed value, 
                and the element does have an intrinsic ratio; then the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> is:
            </p>
            <br/>
            <p><code>(used height) * (intrinsic ratio)</code></p>
            <br/>
            <p>
                If <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> 
                and <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> both have computed values of 'auto', 
                the element has an intrinsic ratio but no intrinsic height or width, 
                and the containing block's width does not itself depend on the replaced element's width, 
                then the used value of 'width' is calculated from the constraint equation used for 
                <a href="http://www.w3.org/TR/CSS21/visudet.html#blockwidth">block-level, non-replaced elements in normal flow</a>.
            </p>
            <p>
                Otherwise, if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> has a computed value of 'auto', 
                and the element has an intrinsic width, then that intrinsic width is the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a>.
            </p>
            <p>
                Otherwise, if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> has a computed value of 'auto', 
                but none of the conditions above are met, and then the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> 
                becomes 300px. If 300px is too wide to fit the device, UAs should use the width of the largest rectangle that has a 2:1 ratio and fits the device instead.
            </p>
            <p>
                After establishing the <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a>, 
                in order to position the replaced element, apply the following rules as appropriate.
            </p>
            <ol>
                <li>
                    If both <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left">'left'</a> and 
                    <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-right">'right'</a> have the value 'auto', and if the 'direction' property 
                    of the element establishing the static-position containing block is 'ltr', 
                    set <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left">'left'</a> to the static position 
                    and solve for <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-right">'right'</a>; 
                    else if 'direction' is 'rtl', set <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-right">'right'</a> to the static position 
                    and solve for <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left">'left'</a>.
                </li>
                <li>
                    If 'left' is 'auto' and 'right' is not 'auto', replace any 'auto' on <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-left">'margin-left'</a> 
                    or <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-right">'margin-right'</a> with '0', then solve for 'left'
                </li>
                <li>
                    If 'right' is 'auto' and 'left' is not 'auto', replace any 'auto' on <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-left">'margin-left'</a> 
                    or <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-right">'margin-right'</a> with '0', then solve for 'right'
                </li>
                <li>
                    If at this point both <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-left">'margin-left'</a> 
                    and <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-right">'margin-right'</a> are still 'auto', 
                    solve the equation under the extra constraint that the two margins must get equal values, 
                    unless this would make them negative, in which case when the direction of the containing block is 'ltr' ('rtl'), 
                    set <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-left">'margin-left'</a> (<a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-right">'margin-right'</a>) 
                    to zero and solve for <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-right">'margin-right'</a> 
                    (<a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-left">'margin-left'</a>).
                </li>
                <li>
                    If at this point there is an 'auto' left, solve the equation for that value.
                </li>
                <li>
                    If at this point the values are over-constrained, 
                    ignore the value for either <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left">'left'</a> 
                    (in case the <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-direction">'direction'</a> property of the containing block is 'rtl') 
                    or <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-right">'right'</a> 
                    (in case <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-direction">'direction'</a> is 'ltr') and solve for that value.
                </li>
            </ol>
        </section>
        <!-- End section: The width of absolute, page or fixed positioned, replaced element -->

        <section class="section" id="height-of-absolute-non-replaced-elements">
        <h3>The height of absolute, page or fixed positioned, non-replaced element</h3>
            <p>
                For absolutely positioned elements, the used values of the vertical dimensions must satisfy this constraint:
            </p>
            <br/>
            <p><code>
                'top' + 'margin-top' + 'border-top-width' + 'padding-top' + 'height' + 'padding-bottom' + 'border-bottom-width' + 'margin-bottom' + 'bottom' = height of containing block
            </code></p>
            <br/>
            <p>
                If all three of 'top', 'height', and 'bottom' are auto, set 'top' to the static position and apply rule number <em>three</em> below.
            </p>
            <p>
                If none of the three are 'auto': If both 'margin-top' and 'margin-bottom' are 'auto', 
                solve the equation under the extra constraint that the two margins get equal values. 
                If one of 'margin-top' or 'margin-bottom' is 'auto', solve the equation for that value. 
                If the values are over-constrained, ignore the value for 'bottom' and solve for that value.
            </p>
            <p>
                Otherwise, pick the one of the following six rules that applies.
            </p>
            <ol>
                <li>
                    'top' and 'height' are 'auto' and 'bottom' is not 'auto', then the height is based on the 
                    <a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">'Auto' heights for block formatting context roots</a>, 
                    set 'auto' values for 'margin-top' and 'margin-bottom' to 0, and solve for 'top'
                </li>
                <li>
                    'top' and 'bottom' are 'auto' and 'height' is not 'auto', 
                    then set 'top' to the static position, 
                    set 'auto' values for 'margin-top' and 'margin-bottom' to 0, and solve for 'bottom'
                </li>
                <li>
                    'height' and 'bottom' are 'auto' and 'top' is not 'auto', 
                    then the height is based on the <a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">'Auto' heights for block formatting context roots</a>, 
                    set 'auto' values for 'margin-top' and 'margin-bottom' to 0, and solve for 'bottom'
                </li>
                <li>
                    'top' is 'auto', 'height' and 'bottom' are not 'auto', 
                    then set 'auto' values for 'margin-top' and 'margin-bottom' to 0, and solve for 'top'
                </li>
                <li>
                    'height' is 'auto', 'top' and 'bottom' are not 'auto', 
                    then 'auto' values for 'margin-top' and 'margin-bottom' are set to 0 and solve for 'height'
                </li>
                <li>
                    'bottom' is 'auto', 'top' and 'height' are not 'auto', 
                    then set 'auto' values for 'margin-top' and 'margin-bottom' to 0 and solve for 'bottom'
                </li>
            </ol>
        </section>
        <!-- End section: The height of absolute, page or fixed positioned, non-replaced element -->
        
        <section class="section" id="height-of-absolute-replaced-elements">
        <h3>The height of absolute, page or fixed positioned, replaced element</h3>
            <p>
                If <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> and 
                <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width">'width'</a> both have computed values of 'auto' and the element also has an intrinsic height, 
                then that intrinsic height is the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a>.
            </p>
            <p>
                Otherwise, if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> has a computed value of 'auto' and the element has an intrinsic ratio 
                then the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> is:
            </p>
            <br/>
            <p><code>(used width) / (intrinsic ratio)</code></p>
            <br/>
            <p>
                Otherwise, if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> has a computed value of 'auto' and the element has an intrinsic height, 
                then that intrinsic height is the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a>.
            </p>
            <p>
                Otherwise, if <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> has a computed value of 'auto', 
                but none of the conditions above are met, 
                then the used value of <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a> must be set to the height of the largest rectangle that has a 2:1 ratio, 
                has a height not greater than 150px, and has a width not greater than the device width.	
            </p>
            <p>
                After establishing the <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-height">'height'</a>, in order to position the replaced element, apply the following rules as appropriate.
            </p>
            <ol>
                <li>
                    If both <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top">'top'</a> and <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom">'bottom'</a> have the value 'auto', 
                    replace <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top">'top'</a> with the element's static position.
                </li>
                <li>
                    If <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom">'bottom'</a> is 'auto', 
                    replace any 'auto' on <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-top">'margin-top'</a> or <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-bottom">'margin-bottom'</a> with '0'.
                </li>
                <li>
                    If at this point both <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-top">'margin-top'</a> and 
                    <a href="http://www.w3.org/TR/CSS2/box.html#propdef-margin-bottom">'margin-bottom'</a> 
                    are still 'auto', solve the equation under the extra constraint that the two margins must get equal values.
                </li>
                <li>
                    If at this point there is only one 'auto' left, solve the equation for that value.
                </li>
                <li>
                    If at this point the values are over-constrained, ignore the value for <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom">'bottom'</a> and solve for that value.
                </li>
            </ol>
            
            
        </section>
        <!-- End section: The height of absolute, page or fixed positioned, replaced element -->
        
        <section class="section" id="auto-height-for-block-formatting-context-roots">
        <h3>'Auto' heights for block formatting context roots</h3>
            <p>
                In certain cases (see, e.g., <a href="#height-of-absolute-non-replaced-elements">The height of absolute, page or fixed positioned, non-replaced element</a> above), 
                the height of an element that establishes a block formatting context is computed as follows:
            </p>
            <p>
                If it only has inline-level children, 
                the height is the distance between the top of the topmost line box and the bottom of the bottommost line box.
            </p>
            <p>
                If it has block-level children, 
                the height is the distance between the top margin-edge of the topmost block-level child box 
                and the bottom margin-edge of the bottommost block-level child box.
            </p>
            <p>
                Absolutely positioned children are ignored, and relatively positioned boxes are considered without their offset. 
                Note that the child box may be an <a href="http://www.w3.org/TR/CSS2/visuren.html#anonymous-block-level">anonymous block box</a>.
            </p>
            <p>
                In addition, if the element has any floating descendants whose bottom margin edge is below the element's bottom content edge, 
                then the height is increased to include those edges. 
                Only non-positioned floats that participate in this block formatting context are taken into account, 
                e.g., floats inside absolutely positioned descendants or other floats are not.
            </p>
        </section>
        <!-- End section: 'Auto' heights for block formatting context roots -->
        
    
    </section>
    <!-- End section: Sizing and positioning details -->
    
    
    <section class="section" id="relationship-bet-display-position-float">
    <h2>Relationships between 'display', 'position', and 'float'</h2>
        <p>
            The three properties that affect box generation and layout &#x2014; <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-display">'display'</a>, 
            <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-position">'position'</a>, and 
            <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float">'float'</a> &#x2014; interact as follows:
        </p>
        <ol>
            <li>
                If <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-display">'display'</a> has the value 'none', 
                then <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-position">'position'</a> and 
                <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float">'float'</a> do not apply. In this case, the element generates no box.
            </li>
            <li>
                Otherwise, if <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-position">'position'</a> has the value 'absolute', 
                'page' or 'fixed', and the value of <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float">'float'</a> is 'left' or 'right', 
                the box is <em>absolutely positioned</em> and 
                the computed value of <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float">'float'</a> is 'none'. 
                The 'display' is set according to the table below. 
                Positioning of the box will determined by the 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top">'top'</a>, <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-right">'right'</a>, 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom">'bottom'</a> and <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-left">'left'</a> properties 
                and the box's containing block.
            </li>
            <li>
                Otherwise, if <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-position">'position'</a> has the value 'absolute', 
                'page' or 'fixed', 
                and the value of <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-float">'float'</a> is not 'none', 
                the box is <a href="http://www.interoperabilitybridges.com/css3-floats/#absolutely-positioned">absolutely positioned</a> and floated. 
                The 'display' is set according to the table below. 
                Positioning of the box will determined by the 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top">'top'</a>, <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-right">'right'</a>, 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-bottom">'bottom'</a> and <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-left">'left'</a> properties 
                and the box's containing block. 
            </li>
            <li>
                Otherwise, if 'float' is other than 'none', 
                the box is floated and 'display' is set according to the table below. 
            </li>
            <li>
                Otherwise, if the element is the root element, 'display' is set according to the table below. 
            </li>
            <li>
                Otherwise, the remaining <a href="http://www.w3.org/TR/CSS21/visuren.html#propdef-display">'display'</a> property values apply as specified. 
            </li>
        </ol>
            <table border="1">
                <tr><th>Specified value</th>
                <td><strong>Computed value</strong></td></tr>
                <tr><td>inline-table </td><td>table</td></tr>
                <tr><td>inline, table-row-group, table-column, table-column-group, table-header-group, table-footer-group, table-row, table-cell, table-caption, inline-block </td><td>block</td></tr>
                <tr><td>others </td><td>same as specified</td></tr>
            </table>
        
    </section>
    <!-- End section: Relationships between 'display', 'position', and 'float' -->


    <section class="section informative" id="comparison-of-flow-floats-absolute-positioning">
    <h2>Comparison of normal flow, floats, and absolute positioning</h2>
        <br/>
        <p>To illustrate the differences between normal flow, relative
        positioning, floats, and absolute positioning, we provide a series of
        examples based on the following HTML:
        </p>
        <pre class="html-example"><code class="html">
        &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
        &lt;HTML&gt;
          &lt;HEAD&gt;
            &lt;TITLE&gt;Comparison of positioning schemes&lt;/TITLE&gt;
          &lt;/HEAD&gt;
        
          &lt;BODY&gt;
            &lt;P&gt;Beginning of body contents.
              &lt;SPAN id="outer"&gt; Start of outer contents.
              &lt;SPAN id="inner"&gt; Inner contents.&lt;/SPAN&gt;
              End of outer contents.&lt;/SPAN&gt;
        
              End of body contents.
            &lt;/P&gt;
          &lt;/BODY&gt;
        &lt;/HTML&gt;
        </code></pre>
        
        <p>In this document, we assume the following rules:</p>
        
        <pre class="example"><code class="css">
        body { display: block; font-size:12px; line-height: 200%; 
               width: 400px; height: 400px }
        p    { display: block }
        span { display: inline }
        </code></pre>
        
        <p>The final positions of boxes generated by the <em>outer</em> and
        <em>inner</em> elements vary in each example. In each illustration,
        the numbers to the left of the illustration indicate the <a href="http://www.w3.org/TR/CSS2/visuren.html#normal-flow">normal flow</a> position of the double-spaced (for
        clarity) lines. </p>
        
        <p class="note">
        Note. The diagrams in this section are illustrative and not to 
        scale. They are meant to highlight the differences between the 
        various positioning schemes in CSS 2.1, and are not intended to be 
        reference renderings of the examples given.
        </p>
        
        <section class="section" id="normal-flow">
        <h3>Normal flow</h3>
            <p>Consider the following CSS declarations for <em>outer</em> and
            <em>inner</em> that do not alter the <a href="#normal-flow">normal
            flow</a> of boxes:</p>
            
            <pre class="example"><code class="css">
            
            #outer { color: red }
            #inner { color: blue }
            </code></pre>
            
            <p>The P element contains all inline content: <a href="http://www.w3.org/TR/CSS2/visuren.html#anonymous">anonymous inline text</a> and two SPAN
            elements. Therefore, all of the content will be laid out
            in an inline formatting context, within a containing block
            established by the P element, producing something like:</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-generic.png" alt="Image illustrating the normal flow of text between parent and sibling boxes.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-generic" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-generic-desc.html" title="Long description for normal flow example">[D]</a></span></p>
            </div>
            
        </section>
        <!-- End section: Normal flow -->
        
        <section class="section" id="rel-position">
        <h3>Relative positioning</h3>
            <p>To see the effect of <a href="http://www.w3.org/TR/CSS2/visuren.html#relative-positioning">relative
            positioning</a>, we specify:</p>
            
            <pre class="example"><code class="css">
            #outer { position: relative; top: -12px; color: red }
            #inner { position: relative; top: 12px; color: blue }
            </code></pre>
            
            <p>Text flows normally up to the <em>outer</em> element.  The
            <em>outer</em> text is then flowed into its normal flow position and
            dimensions at the end of line 1. Then, the inline boxes containing the
            text (distributed over three lines) are shifted as a unit by '-12px'
            (upwards).
            
            </p>
            
            <p>The contents of <em>inner</em>, as a child of <em>outer</em>, would
            normally flow immediately after the words "of outer contents" (on line
            1.5). However, the <em>inner</em> contents are themselves offset
            relative to the <em>outer</em> contents by '12px' (downwards), back to
            their original position on line 2.
            </p>
            
            <p>Note that the content following <em>outer</em> is not affected by the
            relative positioning of <em>outer</em>.</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-relative.png" alt="Image illustrating the effects of relative positioning on a
            box's content."><span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-relative" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-relative-desc.html" title="Long description for relative flow example">[D]</a></span></p>
            </div>
            
            <p>Note also that had the offset of <em>outer</em> been '-24px', the
            text of <em>outer</em> and the body text would have overlapped.
            </p>			
        </section>
        <!-- End section: Relative positioning -->
        
        <section class="section" id="floating-box">
        <h3>Floating a box</h3>
            <p>Now consider the effect of <a href="http://www.w3.org/TR/CSS2/visuren.html#floats">floating</a> the
            <em>inner</em> element's text to the right by means of the following
            rules:
            </p>
            <pre class="example"><code class="css">
            #outer { color: red }
            #inner { float: right; width: 130px; color: blue }
            </code></pre>
            
            <p>Text flows normally up to the <em>inner</em> box, which is pulled
            out of the flow and floated to the right margin (its <a href="http://www.w3.org/TR/CSS2/visudet.html#propdef-width" class="noxref"><span class="propinst-width">'width'</span></a> has been assigned explicitly).
            Line boxes to the left of the float are shortened, and the 
            document's remaining text flows into them.</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-float.png" alt="Image illustrating the effects of floating a box."><span class="dlink">&nbsp;&nbsp;&nbsp;
            <a name="img-flow-float" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-float-desc.html" title="Long description of example illustrating floating">[D]</a></span></p>
            </div>
            
            <p>To show the effect of the <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-clear" class="noxref"><span class="propinst-clear">'clear'</span></a> property, we add a <em>sibling</em>
            element to the example:
            </p>
            <pre class="html-example"><code class="html">
            &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
            
            &lt;HTML&gt;
              &lt;HEAD&gt;
                &lt;TITLE&gt;Comparison of positioning schemes II&lt;/TITLE&gt;
              &lt;/HEAD&gt;
              &lt;BODY&gt;
                &lt;P&gt;Beginning of body contents.
                  &lt;SPAN id=outer&gt; Start of outer contents.
                  &lt;SPAN id=inner&gt; Inner contents.&lt;/SPAN&gt;
            
                  &lt;SPAN id=sibling&gt; Sibling contents.&lt;/SPAN&gt;
                  End of outer contents.&lt;/SPAN&gt;
                  End of body contents.
                &lt;/P&gt;
              &lt;/BODY&gt;
            
            &lt;/HTML&gt;
            </code></pre>
            
            <p>The following rules:
            </p>
            <pre class="example"><code class="css">
            #inner { float: right; width: 130px; color: blue }
            #sibling { color: red }
            </code></pre>
            
            <p>cause the <em>inner</em> box to float to the right as before and the
            document's remaining text to flow into the vacated space:</p>
            
            <div class="figure">
            
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-clear.png" alt="Image illustrating the effects of floating a box without
            setting the clear property to control the flow of text around the
            box."><span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-clear" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-clear-desc.html" title="Long description of example illustrating floating
            without clear">[D]</a></span></p>
            </div>
            
            <p>However, if the <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-clear" class="noxref"><span class="propinst-clear">'clear'</span></a>
            property on the <em>sibling</em> element is set to 'right' (i.e., the
            generated <em>sibling</em> box will not accept a position next to
            floating boxes to its right), the <em>sibling</em> content begins to
            flow below the float:
            
            </p>
            <pre class="example"><code class="css">
            #inner { float: right; width: 130px; color: blue }
            #sibling { clear: right; color: red }
            </code></pre>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-clear2.png" alt="Image illustrating the effects of floating an element with setting the clear property to control the flow of text around the element.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-clear2" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-clear2-desc.html" title="Long description of example illustrating floating
            with clear">[D]</a></span></p>
            </div>
                    
        </section>
        <!-- End section: floating a box -->
        
        <section class="section" id="absolute-positioning">
        <h3>Absolute positioning</h3>
            <p>Next, we consider the effect of <a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">absolute positioning</a>.
            Consider the following CSS declarations for <em>outer</em> and
            
            <em>inner</em>:</p>
            
            <pre class="example"><code class="css">
            #outer { 
                position: absolute; 
                top: 200px; left: 200px; 
                width: 200px; 
                color: red;
            }
            #inner { color: blue }
            </code></pre>
            
            <p>which cause the top of the <em>outer</em> box to be positioned with
            respect to its containing block. The containing block for a positioned
            box is established by the nearest positioned ancestor (or, if none
            exists, the <a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing
            block</a>, as in our example). The top side of the <em>outer</em> box
            is '200px' below the top of the containing block and the left side is
            '200px' from the left side. The child box of <em>outer</em> is flowed
            normally with respect to its parent.</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-absolute.png" alt="Image illustrating the effects of absolutely positioning a box.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-absolute" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-absolute-desc.html" title="Long description for example illustrating absolute positioning">[D]</a></span></p>
            </div>
            
            <p>The following example shows an absolutely positioned box that is a
            child of a relatively positioned box. Although the parent
            <em>outer</em> box is not actually offset, setting its <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-position" class="noxref"><span class="propinst-position">'position'</span></a> property to 'relative'
            means that its box may serve as the containing block for positioned
            descendants. Since the <em>outer</em> box is an inline box that is
            split across several lines, the first inline box's top and left edges
            (depicted by thick dashed lines in the illustration below)
            serve as references for <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top" class="noxref"><span class="propinst-top">'top'</span></a> and
            
            <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left" class="noxref"><span class="propinst-left">'left'</span></a> offsets.
            </p>
            <pre class="example"><code class="css">
            #outer { 
              position: relative; 
              color: red 
            }
            #inner { 
              position: absolute; 
              top: 200px; left: -100px; 
              height: 130px; width: 130px; 
              color: blue;
            }
            </code></pre>
            
            <p>This results in something like the following:</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-abs-rel.png" alt="Image illustrating the effects of absolutely positioning a
            box with respect to a containing block."><span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-abs-rel" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-abs-rel-desc.html" title="Long description for example illustrating positioning
            with respect to a positioned ancestor">[D]</a></span></p>
            </div>
            
            <p>If we do not position the <em>outer</em> box:</p>
            
            <pre class="example"><code class="css">
            #outer { color: red }
            #inner {
              position: absolute; 
              top: 200px; left: -100px; 
              height: 130px; width: 130px; 
              color: blue;
            }
            </code></pre>
            
            <p>the containing block for <em>inner</em> becomes the <a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block-details">initial containing block</a> (in our
            example). The following illustration shows where the <em>inner</em>
            box would end up in this case.</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-static.png" alt="Image illustrating the effects of absolutely positioning a box with respect to a containing block established by a normally positioned parent.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-static-desc.html" title="Long description illustrating absolute positioning
            with respect to the initial containing block">[D]</a></span></p>
            </div>
            
            <div class="html-example"><p>
            Relative and absolute positioning may be used to implement change
            bars, as shown in the following example. The following fragment:
            </p>
            <pre><code class="html">
            &lt;P style="position: relative; margin-right: 10px; left: 10px;"&gt;
            I used two red hyphens to serve as a change bar. They
            will "float" to the left of the line containing THIS
            &lt;SPAN style="position: absolute; top: auto; left: -1em; color: red;"&gt;--&lt;/SPAN&gt;
            
            word.&lt;/P&gt;
            </code></pre>
            
            <p>might result in something like:</p>
            
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/changebar.png" alt="Image illustrating the use of floats to create a changebar effect.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-changebar" href="http://www.w3.org/TR/CSS2/images/longdesc/changebar-desc.html" title="Long description for change bar example">[D]</a></span></p>
            </div>
            
            <p>First, the paragraph (whose containing block sides are shown in the
            illustration) is flowed normally. Then it is offset '10px' from the
            left edge of the containing block (thus, a right margin of '10px' has
            been reserved in anticipation of the offset).  The two hyphens acting
            as change bars are taken out of the flow and positioned at the current
            line (due to 'top: auto'), '-1em' from the left edge of its containing
            block (established by the P in its final position).  The result is
            that the change bars seem to "float" to the left of the current
            line.</p>
            </div>

        
        </section>
        <!-- End section: Absolute positoining -->
        
        
        <section class="section" id="page-pos">
        <h3>Page positioning</h3>
            <p>
                Finally, we consider the effect of <a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">page positioning</a>. 
                Consider the following CSS declarations for <em>outer</em> and <em>inner</em>:
            </p>
            <pre class="example"><code class="css">
            #outer { 
                position: page; 
                top: 200px; left: 200px; 
                width: 200px; 
                color: red;
            }
            #inner { color: blue }
            </code></pre>
            <p>
                which cause the top of the <em>outer</em> box to be positioned with respect to its containing block. 
                The containing block for a page positioned box is always established by the <a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">initial containing block</a>. 
                The top side of the <em>outer</em> box is '200px' below the top of the initial containing block and 
                the left side is '200px' from the left side. 
                The child box of <em>outer</em> is flowed normally with respect to its parent.
            </p>
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-absolute.png" alt="Image illustrating the effects of absolutely positioning a box.">
            <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-absolute" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-absolute-desc.html" title="Long description for example illustrating absolute positioning">[D]</a></span></p>
            </div>
            <p>
                The following example shows a page positioned box that is a child of a relatively positioned box. 
                Although the parent <em>outer box</em> is setting its 'position' property to 'relative' 
                this <em>outer box</em> box does not serve as the containing block for page positioned descendants. 
                Since the <em>inner</em> box is a page positioned element its containing block is not the relative positioned <em>outer box</em> box, 
                page positioned elements are positioned from the initial containing block, 
                in this case the top and left edges (depicted by thick dashed lines in the illustration below) 
                serve as references for <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-top">'top'</a> and <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-left">'left'</a> offsets.
            </p>
            <pre class="example"><code class="css">
            #outer { 
              position: relative; 
              color: red 
            }
            #inner { 
              position: page; 
              top: 200px; left: -100px; 
              height: 130px; width: 130px; 
              color: blue;
            }
            </code></pre>
            <p>
                This results in something like the following:
            </p>
            <div class="figure">
            <p><img src="http://www.w3.org/TR/CSS2/images/flow-abs-rel.png" alt="Image illustrating the effects of absolutely positioning a
            box with respect to a containing block."><span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-abs-rel" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-abs-rel-desc.html" title="Long description for example illustrating positioning
            with respect to a positioned ancestor">[D]</a></span></p>
            <p class="issue">The previous image is incorrect. Need to create a new image.</p>
            </div>
            
            
            <p>If we do not position the <em>outer</em> box:</p>
            
            <pre class="example"><code class="css">
            #outer { color: red }
            #inner {
              position: page; 
              top: 200px; left: -100px; 
              height: 130px; width: 130px; 
              color: blue;
            }
            </code></pre>
            
            <p>
                the containing block for <em>inner</em> becomes the <a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block-details">initial containing block</a>. 
                The following illustration shows where the <em>inner</em> box would end up in this case.
            </p>			
            <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-static.png" alt="Image illustrating the effects of absolutely positioning a box with respect to a containing block established by a normally positioned parent.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-static-desc.html" title="Long description illustrating absolute positioning
                with respect to the initial containing block">[D]</a></span>
            </p>
            </div>
            
        </section>
        <!-- End section: Page positioning -->
        
    </section>
    <!-- End section: Comparison of normal flow, floats, and absolute positioning -->
    



        <section class="section" id="clip-property">
        <h3>Clipping: the <a href="http://www.w3.org/TR/CSS2/visufx.html#propdef-clip">clip property</a></h3>

            <p>A <a name="x3"><span class="index-def" title="clipping region"><dfn>clipping
            region</dfn></span></a> defines what portion of an element's 
            border box 
             
            is visible. By default, the element is not clipped. However, the clipping region may be explicitly set with the <a href="visufx.html#propdef-clip" class="noxref"><span class="propinst-clip">'clip'</span></a> property.
            </p>
            
            <div class="propdef">
            <dl><dt>
            <span class="index-def" title="'clip'"><a name="propdef-clip" class="propdef-title"><strong>'clip'</strong></a></span>
            </dt><dd>
            <table class="propinfo" cellpadding="0" cellspacing="0">
            
            <tbody><tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td><a href="visufx.html#value-def-shape" class="noxref"><span class="value-inst-shape">&lt;shape&gt;</span></a> | auto | 
            </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
            </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>absolutely positioned elements
            </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
            </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>N/A
            </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
            
            </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td><td>'auto' if specified as 'auto', otherwise a rectangle with four
              values, each of which is 'auto' if specified as 'auto' and the
              computed length otherwise
            </td></tr></tbody></table>
            </dd></dl>
            </div>
            
            
            <p>The 'clip' property applies only to absolutely positioned elements.
            Values have the following meanings:</p>
            
            <dl>
            <dt><strong>auto</strong></dt>
            <dd>The element does not clip.</dd>
            
            <dt>&lt;shape&gt;</dt>
            <dd>
                <dl>
                    <dt>rect(&lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;, &lt;left&gt;)</dt>
                    <dd>
                        <p>
                            Each of the arguments &lt;top&gt; and &lt;bottom&gt; specify offsets from the top border edge of the box, 
                            and &lt;right&gt;, and &lt;left&gt; specify offsets from the left border edge of the box. 
                            Authors should separate offset values with commas. 
                            User agents must support separation with commas, but may also support separation without commas 
                            (but not a combination), because a previous revision of this specification was ambiguous in this respect.
                        </p>
                        <p>
                            &lt;top&gt;, &lt;right&gt;,&lt;bottom&gt;, and &lt;left&gt; may either have a <a href="http://www.w3.org/TR/CSS2/syndata.html#value-def-length">&lt;length&gt;</a> value or 'auto'. 
                            Negative lengths are permitted. 
                            The value 'auto' means that a given edge of the clipping region will be the same as the edge of the element's generated border box 
                            (i.e., 'auto' means the same as '0' for <a href="http://www.w3.org/TR/CSS2/visufx.html#value-def-top">&lt;top&gt;</a> and 
                            <a href="http://www.w3.org/TR/CSS2/visufx.html#value-def-left">&lt;left&gt;</a>, 
                            the same as the used value of the height plus the sum of vertical padding and border widths for <a href="http://www.w3.org/TR/CSS2/visufx.html#value-def-right">&lt;bottom&gt;</a>, 
                            and the same as the used value of the width plus the sum of the horizontal padding and border widths for <a href="http://www.w3.org/TR/CSS2/visufx.html#value-def-right">&lt;right&gt;</a>, 
                            such that four 'auto' values result in the clipping region being the same as the element's border box).
                        </p>
                        <p>
                            When coordinates are rounded to pixel coordinates, care should be taken that no pixels remain visible when 
                            &lt;left&gt; and &lt;right&gt; have the same value (or &lt;top&gt; and &lt;bottom&gt; have the same value), 
                            and conversely that no pixels within the element's border box remain hidden when these values are 'auto'.
                        </p>
                    </dd>
                    <dt>inset(&lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;, &lt;left&gt;)</dt>
                    <dd>
                        <p>Like rect(), except that the values are offsets relative to the respective edges of the element.</p>
                        <div class="figure">
                        <p>
                            <img alt="diagram of rect vs inset-rect" src="http://www.w3.org/TR/2002/WD-css3-box-20021024/clip.png">
                        </p>
                        <p class="caption">
                            Diagram of the rectangles defined by rect() and inset-rect().
                        </p>
                        </div>
                    </dd>
                </dl>
            </dd>
            </dl>
            
            <p>An element's clipping region clips out any aspect of the element (e.g., content, children, background, borders, text decoration, outline and visible scrolling mechanism — if any) that is outside the clipping region.
            Content that has been clipped does not cause overflow.
            </p>
            <p>The element's ancestors may also clip portions of their content (e.g., via their own <a href="visufx.html#propdef-clip" class="noxref"><span class="propinst-clip">'clip'</span></a> property and/or if 
            their <a href="visufx.html#propdef-overflow" class="noxref"><span class="propinst-overflow">'overflow'</span></a> property is
            not 'visible'); what is rendered is the cumulative intersection.
            </p>
            <p>If the clipping region exceeds the bounds of the UA's
            document window, content may be clipped to that window by the
            native operating environment.
            </p>
            <div class="example"><p style="display: none;">Example(s):</p><p>Example:
                The following two rules:</p>
                <pre><code class="css">
        p#one { clip: rect(5px, 40px, 45px, 5px); }
        p#two { clip: rect(5px, 55px, 45px, 5px); }</code></pre>
                
                <p>and assuming both Ps are 50 by 55 px, will create, respectively,
                the rectangular clipping regions delimited
                by the dashed lines in the following illustrations:</p>
                
                <div class="figure">
                    <p><img src="http://www.w3.org/TR/CSS2/images/clip.png" alt="Two clipping regions">
                    <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-clip" href="http://www.w3.org/TR/CSS2/images/longdesc/clip-desc.html" title="Long description for example of clipping region">[D]</a></span></p>
                </div>
                <p>The following rule:</p>
                <pre><code class="css">
        IMG { clip: rect(5px, 40px, 45px, 5px); }
                </code></pre>
                <p>
                    will create the rectangular clipping region delimited by the dashed line in the following illustration:
                </p>
                <div class="figure">
                    <p><img alt="A clipping region" src="http://www.w3.org/TR/2001/WD-css3-box-20010726/clip2.png">
                        <span class="dlink"><a name="img-clip" href="http://www.w3.org/TR/CSS2/images/longdesc/clip-desc.html" title="Long description for example of clipping region">[D]</a></span>
                    </p>
                    <p class="caption">An image of 50 by 55 pixels is clipped with a clipping mask of 35 by 40 pixels.</p>
                </div>				
            </div>
            
            <div class="note"><p> <em><strong>Note.</strong> In CSS&nbsp;2.1, all clipping
            regions are rectangular. We anticipate future extensions to permit
            non-rectangular clipping.</em></p></div>
        
        </section>
        <!-- End section: Clipping: the clip property -->


    
    <section class="section" id="layered-presentation">
    <h2>Layered presentation</h2>
        <p>
            <em>In the following sections, the expression "in front of" means closer to the user as the user faces the screen.</em>
        </p>
        <p>
            In CSS, each box has a position in three dimensions. 
            In addition to their horizontal and vertical positions, boxes lie along a "z-axis" and are formatted one on top of the other. 
            Z-axis positions are particularly relevant when boxes overlap visually. 
            This section discusses how boxes may be positioned along the z-axis.
        </p>
        <p>Each box belongs to one <a class="index-def" href="#stacking" id="stacking0" title="stacking context"><dfn id="stacking">stacking
         context</dfn></a> . Each box in a given stacking context has an integer
         <a class="index-def" href="#stack" id="stack0" title="stack level"><dfn id="stack">stack level</dfn></a> , which is its position on the z-axis
         relative to other boxes in the same stacking context. Boxes with greater
         stack levels are always formatted in front of boxes with lower stack
         levels. Boxes may have negative stack levels. Boxes with the same stack
         level in a stacking context are stacked bottom-to-top according to
         document tree order.</p>
    
        <p>The rootelement creates a <a class="index-def" href="#root-stacking" id="root-stacking0" title="root stacking context"><dfn id="root-stacking">root stacking context</dfn></a> , but other elements
         may establish <span class="index-def" id="local0" title="local stacking
         context"><dfn id="local">local stacking contexts</dfn></span> . Stacking
         contexts are inherited. A local stacking context is atomic; boxes in
         other stacking contexts may not come between any of its boxes.</p>
    
        <p>An element that establishes a local stacking context generates a box
         that has two stack levels: one for the stacking context it creates
         (always '<code class="css">0</code>') and one for the stacking
         context to which it belongs (given by the <span class="property">'<a class="property" href="#z-index">z-index</a>'</span> property).</p>
    
        <p>An element's box has the same stack level as its parent's box unless
         given a different stack level with the <span class="property">'<a class="property" href="#z-index">z-index</a>'</span> property.</p>		
        <div class="propdef">
        <dl>
            <dt><span class="index-def" title="'z-index'"><a name="propdef-z-index" class="propdef-title"><strong>'z-index'</strong></a></span></dt>
            <dd>	
                <table class="propinfo" cellpadding="0" cellspacing="0">
                    <tbody>
                        <tr valign="baseline"><td><em>Value:</em>&nbsp;&nbsp;</td><td>auto | <a href="syndata.html#value-def-integer" class="noxref"><span class="value-inst-integer">&lt;integer&gt;</span></a> 
                    </td></tr><tr valign="baseline"><td><em>Initial:</em>&nbsp;&nbsp;</td><td>auto
                    </td></tr><tr valign="baseline"><td><em>Applies to:</em>&nbsp;&nbsp;</td><td>positioned elements
                    </td></tr><tr valign="baseline"><td><em>Inherited:</em>&nbsp;&nbsp;</td><td>no
                    </td></tr><tr valign="baseline"><td><em>Percentages:</em>&nbsp;&nbsp;</td><td>N/A
                    </td></tr><tr valign="baseline"><td><em>Media:</em>&nbsp;&nbsp;</td><td><a href="media.html#visual-media-group" class="noxref">visual</a>
                    
                    </td></tr><tr valign="baseline"><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;</td><td>as specified
                    </td></tr></tbody></table>
        </dd></dl>
        </div>
        
        
        <p>For a positioned box, the <a href="visuren.html#propdef-z-index" class="noxref"><span class="propinst-z-index">'z-index'</span></a> property specifies:
        
        </p><ol>
          <li>The stack level of the box in the current stacking context.
        
          </li><li>Whether the box establishes a stacking context.
        </li></ol>
        
        <p>Values have the following meanings:
        
        </p><dl>
          <dt><span class="index-inst" title="&lt;integer&gt;"><a name="x42" href="syndata.html#value-def-integer" class="noxref"><span class="value-inst-integer"><strong>&lt;integer&gt;</strong></span></a></span>
        
          </dt><dd>This integer is the stack level of the generated box in the
          current stacking context. The box also establishes a new stacking
          context.
        
          </dd><dt><strong>auto</strong>
        
          </dt><dd>The stack level of the generated box in the current stacking
          context is 0. The box does not establish a new stacking context
          unless it is the root element.
        </dd></dl>
        
        </p><div class="html-example">
        <p>In the following example, the stack levels of
        the boxes (named with their "id" attributes) are:
        "text2"=0, "image"=1, "text3"=2, and "text1"=3. The
        "text2" stack level is inherited from the root box. The
        others are specified with the <a href="visuren.html#propdef-z-index" class="noxref"><span class="propinst-z-index">'z-index'</span></a> property.
        </p>
        <pre><code class="html">
        &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"&gt;
        &lt;HTML&gt;
          &lt;HEAD&gt;
        
            &lt;TITLE&gt;Z-order positioning&lt;/TITLE&gt;
            &lt;STYLE type="text/css"&gt;
              .pile { 
                position: absolute; 
                left: 2in; 
                top: 2in; 
                width: 3in; 
                height: 3in; 
              }
            &lt;/STYLE&gt;
          &lt;/HEAD&gt;
          &lt;BODY&gt;
        
            &lt;P&gt;
              &lt;IMG id="image" class="pile" 
                   src="butterfly.png" alt="A butterfly image"
                   style="z-index: 1"&gt;
        
            &lt;DIV id="text1" class="pile" 
                 style="z-index: 3"&gt;
              This text will overlay the butterfly image.
            &lt;/DIV&gt;
        
            &lt;DIV id="text2"&gt;
              This text will be beneath everything.
            &lt;/DIV&gt;
        
            &lt;DIV id="text3" class="pile" 
                 style="z-index: 2"&gt;
              This text will underlay text1, but overlay the butterfly image
            &lt;/DIV&gt;
          &lt;/BODY&gt;
        &lt;/HTML&gt;
        
        </code></pre>
        </div>
        
        
        <p>This example demonstrates the notion of
        <em>transparency</em>. The default behavior of the background is to allow boxes behind it to be visible. 
        In the example, each box transparently overlays the boxes below it. This
        behavior can be overridden by using one of the existing
        <a href="colors.html#background-properties">
        background properties</a>.
        </p>
        
    <section class="section" id="det-stacking-context">
    <h2>Detailed stacking context</h2>
    
        <section class="section" id="definitions-stack">
        <h3>Definitions</h3>
            <dl>
                <dt>Tree Order</dt>
                <dd>Preorder depth-first traversal of the <em>rendering</em> tree, 
                in logical (not visual) order for bidirectional content, after taking into account properties that move boxes around.</dd>
                
                <dt>Element</dt>
                <dd>In this description, "element" refers to actual elements, pseudo-elements, and anonymous boxes. 
                Pseudo-elements and anonymous boxes are treated as descendants in the appropriate places. 
                For example, an outside list marker comes before an adjoining 'before' box in the line box, which comes before the content of the box, and so forth.</dd>
            </dl>
            
        </section>
        <!-- End section: Definitions -->
        
        <section class="section" id="painting-order">
        <h3>Painting order</h3>
            <p>The bottom of the stack is the furthest from the user, the top of the
            stack is the nearest to the user:</p>
                <div class="figure">
                    <p><img alt="A stacking context with four layers" src="stack.png">
                    </p>
                    <p class="caption">Schematic diagram of a stacking context with four layers.</p>
                </div>				
            <p>The stacking context background and most negative positioned
            stacking contexts are at the bottom of the stack, while the most
            positive positioned stacking contexts are at the top of the stack.</p>
            
            <p>The canvas is transparent if contained within another, and given a
            UA-defined color if it is not. It is infinite in extent and contains
            the root element. Initially, the viewport is anchored with its top
            left corner at the canvas origin.</p>
            
            <p>The painting order order for the descendants of an element generating a stacking context  (see
            the <a href="http://www.w3.org/TR/CSS2/visuren.html#propdef-z-index">'z-index'</a> property) is:</p>
            
            <ol>
                <li> If the element is a root element:
                    <ol>
                        <li>background color of element over the entire canvas.</li>
                        <li>background image of element, over the entire canvas, anchored at the origin that would be used if it was painted for the root element.</li>
                    </ol>
                </li>
                <li>
                    If the element is a block, list-item, or other block equivalent:
                    <ol>
                        <li>background color of element unless it is the root element.</li>
                        <li>background image of element unless it is the root element.</li>
                        <li>border of element.</li>
                    </ol>
                    Otherwise, if the element is a block level table:
                    <ol>
                        <li>table backgrounds (color then image) unless it is the root element.</li>
                        <li>column group backgrounds (color then image).</li>
                        <li>column backgrounds (color then image).</li>
                        <li>row group backgrounds (color then image).</li>
                        <li>row backgrounds (color then image).</li>
                        <li>cell backgrounds (color then image).</li>
                        <li>all table borders (in tree order for separated borders).</li>
                    </ol>
                </li>
                <li>
                        Stacking contexts formed by positioned descendants with negative z-indices (excluding 0) in z-index order (most negative first) then tree order.
                </li>
                <li>
                    For all its in-flow, non-positioned, block-level descendants in tree order: If the element is a block, list-item, or other block equivalent:
                    <ol>
                        <li>background color of element.</li>
                        <li>background image of element.</li>
                        <li>border of element.</li>
                    </ol>
                    Otherwise, the element is a table:
                    <ol>
                        <li>table backgrounds (color then image).</li>
                        <li>column group backgrounds (color then image).</li>
                        <li>column backgrounds (color then image).</li>
                        <li>row group backgrounds (color then image).</li>
                        <li>row backgrounds (color then image).</li>
                        <li>cell backgrounds (color then image).</li>
                        <li>all table borders (in tree order for separated borders).</li>
                    </ol>
                </li>
                <li>
                    All non-positioned floating descendants, in tree order. 
                    For each one of these, treat the element as if it created a new stacking context, 
                    but any positioned descendants and descendants which actually create a new stacking context 
                    should be considered part of the parent stacking context, not this new one.
                </li>
                <li>If the element is an inline element that generates a stacking context, then: 
                    <ol>
                        <li>For each line box that the element is in:
                            <ol>
                                <li>Jump to <a href="http://www.w3.org/TR/CSS2/zindex.html#each-box">7.2.1</a> for the box(es) of the element in that line box (in tree order).</li>
                            </ol>
                        </li>
                    </ol>
                </li>
                <li>Otherwise: first for the element, then for all its in-flow, non-positioned, block-level descendants in tree order:
                    <ol>
                        <li>If the element is a block-level replaced element, then: the replaced content, atomically.</li>
                        <li>Otherwise, for each line box of that element:
                            <ol>
                                <li>For each box that is a child of that element, in that line box, in tree order:
                                    <ol>
                                        <li>background color of element. </li>
                                        <li>background image of element</li>
                                        <li>border of element. </li>
                                        <li>For inline elements:
                                            <ol>
                                                <li>
                                                    For all the elements in-flow, non-positioned, 
                                                    inline-level children that are in this line box, 
                                                    and all runs of text inside the element that is on this line box, in tree order: 
                                                    <ol>
                                                        <li>If this is a run of text, then:
                                                            <ol>
                                                                <li>
                                                                    any underlining affecting the text of the element, 
                                                                    in tree order of the elements applying the underlining 
                                                                    (such that the deepest element's underlining, if any, is painted topmost and the root element's underlining, 
                                                                    if any, is drawn bottommost).
                                                                </li>
                                                                <li>
                                                                    any overlining affecting the text of the element, 
                                                                    in tree order of the elements applying the overlining 
                                                                    (such that the deepest element's overlining, if any, is painted topmost and the root element's overlining, if any, is drawn bottommost). 
                                                                </li>
                                                                <li>the text</li>
                                                                <li>
                                                                    any line-through affecting the text of the element, 
                                                                    in tree order of the elements applying the line-through (such that the deepest element's line-through, 
                                                                    if any, is painted topmost and the root element's line-through, if any, is drawn bottommost).
                                                                </li>
                                                            </ol>
                                                        </li>
                                                        <li>Otherwise, jump to <a href="http://www.w3.org/TR/CSS2/zindex.html#each-box">7.2.1</a> for that element</li>
                                                    </ol>
                                                </li>
                                            </ol>
                                        For inline-block and inline-table elements:
                                            <ol>
                                                <li>
                                                    For each one of these, treat the element as if it created a new stacking context, 
                                                    but any positioned descendants and descendants which actually create a new stacking 
                                                    context should be considered part of the parent stacking context, not this new one. 
                                                </li>
                                            </ol>
                                        For inline-level replaced elements: 
                                            <ol>
                                                <li>
                                                    the replaced content, atomically. 
                                                </li>
                                            </ol>
                                        </li>
                                    </ol>
                                    <p class="note">Note, some of the boxes may have been generated by line splitting or the Unicode bidirectional algorithm.</p>
                                </li>
                                <li>Optionally, the outline of the element (see <a href="#stack-order-step-ten">10 below</a>).</li>
                            </ol>
                        </li>
                        <li>Optionally, if the element is block-level, the outline of the element (see <a href="#stack-order-step-ten">10 below</a>).</li>
                    </ol>
                </li>
                <li>
                    All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order. 
                    For those with 'z-index: auto', treat the element as if it created a new stacking context, 
                    but any positioned descendants and descendants which actually create a new stacking context should be considered part of the parent stacking context, 
                    not this new one. For those with 'z-index: 0' treat the stacking context generated atomically.
                </li>
                <li>
                    Stacking contexts formed by positioned descendants with z-indices greater than or equal to 1 in z-index order (smallest first) then tree order.
                </li>
                <li id="stack-order-step-ten">
                    Finally, implementations that do not draw outlines in steps above must draw outlines from this stacking context at this stage. 
                    (It is recommended to draw outlines in this step and not in the steps above.)
                </li>
            </ol>
            <p class="issue">Need to account for new stacking context creation by opacity and transforms.</p>
            <br/>
            </section>
        <!-- End section: Painting order -->
        
        <section class="section" id="stacking-notes">
        <h3>Notes</h3>
            <p>
                The background of the root element is only painted once, over the whole canvas. 
            </p>
            <p>
                While the backgrounds of bidirectional in lines are painted in tree order, 
                they are positioned in visual order. Since the positioning of inline backgrounds is unspecified in CSS, 
                the exact result of these two requirements is UA-defined. A future version of CSS may define this in more detail.
            </p>
        </section>
        <!-- End section: Notes -->

    </section>
    <!-- End section: Detailed stacking context -->
    
        </section>
    <!-- End section: Layered presentation -->
    

    
    <section class="section" id="spec-conformance">
    <h2>Conformance</h2>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification. All of the text of this specification is
   normative except sections explicitly marked as non-normative, examples,
   and notes. [[!RFC2119]]

  </p><p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  </p><div class="example">
   <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  </p><p class="note">Note, this is an informative note.

  </p><p>Conformance to CSS Backgrounds and Borders Level 3 is defined for three
   classes:

  </p><dl>

   <dt><dfn id="style-sheet0" title="style sheet!!as conformance class">style
    sheet</dfn>

   </dt><dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   </dd><dt><dfn id="renderer">renderer</dfn>

   </dt><dd>A UA that interprets the semantics of a style sheet and renders <a href="#document">documents</a> that use them.

   </dd><dt><dfn id="authoring-tool">authoring tool</dfn>

   </dt><dd>A UA that writes a style sheet.
  </dd></dl>

  <p>A style sheet is conformant to CSS Backgrounds and Borders Level 3 if
   all of its declarations that use properties defined in this module have
   values that are valid according to the generic CSS grammar and the
   individual grammars of each property as given in this module.

  </p><p>A renderer is conformant to CSS Backgrounds and Borders Level 3 if, in
   addition to interpreting the style sheet as defined by the appropriate
   specifications, it supports all the properties defined by CSS Backgrounds
   and Borders Level 3 by parsing them correctly and rendering the document
   accordingly. However the inability of a UA to correctly render a document
   due to limitations of the device does not make the UA non-conformant. (For
   example, a UA is not required to render color on a monochrome monitor.)

  </p><p>An authoring tool is conformant to CSS Backgrounds and Borders Level 3
   if it writes syntactically correct style sheets, according to the generic
   CSS grammar and the individual grammars of each property in this module.
  </p>

        <section class="section informative" id="conformance-levels">
            <h3>Levels</h3>
                  <p>
                    CSS has different levels of features, each a subset of the other. 
                    (See [[!CSSBEIJING]] for a full explanation.) The lists below describe which features from this specification are in each level.
                  </p>
                  
                <section class="section" id="css-lev-1">
                    <h4>CSS Level 1</h4>
                </section>
                <!-- End section: CSS Level 1 -->

                <section class="section" id="css-lev-2">
                    <h4>CSS Level 2</h4>
                        <ul>
                            <li>'position'</li>
                            <li>'top'</li>
                            <li>'right'</li>
                            <li>'bottom'</li>
                            <li>'left'</li>
                            <li>'clip'</li>
                            <li>'z-index'</li>
                        </ul>

                </section>
                <!-- End section: CSS Level 2 -->
                
                <section class="section" id="css-lev-3">
                    <h4>CSS Level 3</h4>
                        <p>
                            All features described in the CSS Positioning Module Level 3
                        </p>
                </section>
                <!-- End section: CSS Level 3 -->
        </section>
        <!-- End section: Levels -->

        <section class="section" id="cr-exit">
        <h3>CR exit criteria</h3>
          <p>As described in the W3C process document, a <a href="http://www.w3.org/2005/10/Process-20051014/tr.html#cfi">Candidate
           Recommendation</a> (CR) is a specification that W3C recommends for use on
           the Web. The next stage is “Recommendation,” when the specification is
           sufficiently implemented.
        
          </p><p>For this specification to be proposed as a W3C Recommendation, the
           following conditions shall be met. There must be at least two independent,
           interoperable implementations of each feature. Each feature may be
           implemented by a different set of products, there is no requirement that
           all features be implemented by a single product. For the purposes of this
           criterion, we define the following terms:
        
          </p><dl>
           <dt>independent

           </dt><dd>each implementation must be developed by a different party and cannot
            share, reuse, or derive from code used by another qualifying
            implementation. Sections of code that have no bearing on the
            implementation of this specification are exempt from this requirement.

           </dd><dt>interoperable

           </dt><dd>passing the respective test case(s) in the official CSS test suite,
            or, if the implementation is not a Web browser, an equivalent test. Every
            relevant test in the test suite should have an equivalent test created if
            such a user agent (UA) is to be used to claim interoperability. In
            addition if such a UA is to be used to claim interoperability, then there
            must one or more additional UAs which can also pass those equivalent
            tests in the same way for the purpose of interoperability. The equivalent
            tests must be made publicly available for the purposes of peer review.

           </dd><dt>implementation

           </dt><dd>a user agent which:
            <ol class="inline">
             <li>implements the specification.
        
             </li><li>is available to the general public. The implementation may be a
              shipping product or other publicly available version (i.e., beta
              version, preview release, or “nightly build”). Non-shipping product
              releases must have implemented the feature(s) for a period of at least
              one month in order to demonstrate stability.

             </li><li>is not experimental (i.e., a version specifically designed to pass
              the test suite and is not intended for normal usage going forward).
            </li></ol>

          </dd></dl>

          <p>A minimum of three months of the CR period must have elapsed. This is to
           ensure that enough time is given for any remaining major errors to be
           caught.

          </p><p>Features will be dropped if two or more interoperable implementations
           are not found by the end of the CR period.
        
          </p><p>Features may/will also be dropped if adequate/sufficient (by judgment of
           CSS WG) tests have not been produced for those feature(s) by the end of
           the CR period.

          </p>
        </section>
        <!-- End section: CR exit criteria -->

    </section>
    <!-- End section: Conformance -->

    <section class='appendix'>
      <h2>Acknowledgements</h2>
      <p>
        This spec would not have been possible without input and support from many helpful people. Special thanks to Bert Bos, Rossen Atanassov, Chris Jones, John Jansen. Thanks to Eliot Graff for editorial assistance.
      </p>
    </section>
  </body>
</html>