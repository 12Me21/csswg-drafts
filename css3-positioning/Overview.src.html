<!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head profile="http://www.w3.org/2006/03/hcard">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>CSS Positioned Layout Module Level 3</title>
        <link rel="stylesheet" type="text/css" href="default.css">
        <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css">
        <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED.css">
        <style type="text/css">
            .cb-example-table
            {
                border: 1px solid;
                border-collapse: collapse;
                font-size: smaller;
                text-align: center;
                margin: 0 2em;
            }
            .cb-example-table td, .cb-example-table th
            {
                border: 1px solid;
                padding: 0 3px;
            }
            code span, td span
            {
                white-space: nowrap;
            }
            .relationship-table
            {
                border: 1px solid;
                border-collapse: collapse;
                font-size: smaller;
                margin: 0 6em;
            }
            .relationship-table th
            {
                text-align: center;
                white-space:nowrap;
            }
            .relationship-table td, .relationship-table th
            {
                border: 1px solid;
                padding: 0 3px;
            }
            h2 dfn, h3 dfn
            {
                font: inherit;
            }
        </style>
    </head>
    <body>
        <div class="head">
            <!--logo-->
            <h1>CSS Positioned Layout Module Level 3</h1>
            <h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
            <dl>
                <dt>This version:</dt>
                <dd><a href="[VERSION]">http://dev.w3.org/csswg/css3-positioning/</a></dd>
                <!--<dt>Latest version:</dt>
                    <dd><a href="http://www.w3.org/TR/[SHORTNAME]/">http://www.w3.org/TR/[SHORTNAME]/</a></dd>-->
                <dt>Editor&#39;s draft:
                <dd><a href="http://dev.w3.org/csswg/[SHORTNAME]/">http://dev.w3.org/csswg/[SHORTNAME]/</a></dd>
                <dt>Previous version:</dt>
                <dd>None</dd>
                <dt>Editors:</dt>
                <dd class="vcard"><span class="fn">Arron Eicholz</span>, <span class="org">Microsoft Corporation</span>
                <dd class="vcard"><span class="fn">Sylvain Galineau</span>, <span class="org">Microsoft Corporation</span>
            </dl>
            <!--copyright-->
            <hr title="Separator for header">
        </div>
        <h2 class="no-num no-toc" id="abstract">Abstract</h2>
        <p>
            CSS is a language for describing the rendering of structured documents (such as HTML and 
            XML) on screen, on paper, in speech, etc. This module contains the features of CSS level&nbsp;3 
            relating to positioning and stacking of elements. It includes and extends the 
            functionality of CSS level&nbsp;2 [[!CSS21]], which builds on CSS level&nbsp;1 [[CSS1]]. 
            The main extensions compared to level&nbsp;2 are the ability to position elements based 
            on CSS Region boxes, and the ability to specify a different containing blocks for elements.
        </p>
        <p>
            Other kinds of layout, such as tables, "floating" boxes, ruby annotations, grid layouts, 
            columns and basic handling of normal "flow" content, are described in other modules. 
            Also, the layout of text inside each line is defined elsewhere.
        </p>
        <h2 class="no-num no-toc" id="status">Status of this document</h2>
        <!--status-->
        <!--<p>The following features are at risk:</p>-->

        <h2 class="no-num no-toc" id="contents">Table of contents</h2>
        <!--toc-->

        <h2 id="intro">Introduction</h2>
        <p><em>This section is not normative.</em></p>
        <p>
            CSS assumes the document layout is modeled as a tree of elements. Each element has an 
            ordered list of zero or more child elements, with an optional string of text before the 
            list, in-between the children and after the list. The unique element that has no parent 
            is called the root element. This module describes how any of the elements from the tree 
            of elements can be arranged independent of document order (i.e. taken out of "flow"). 
            With a positioned element the element may be placed anywhere within the content not 
            specifically respecting the tree of elements order. 
        </p>
        <p>
            In [[!CSS21]], the visual formatting model explained how each element in the document 
            tree generates zero or more boxes according to the box model. This module further 
            explains and extends the positioning scheme. The layout of these boxes is governed by:
        </p>
        <ul>
            <li><a href="http://www.w3.org/TR/CSS2/box.html#box-dimensions">box dimensions</a> and <a href="http://www.w3.org/TR/CSS2/visuren.html#box-gen">type</a>.</li>
            <li>positioning scheme (<span>normal flow</span>, float, and absolute positioning). </li>
            <li>relationships between elements in the <a href="http://www.w3.org/TR/CSS2/conform.html#doctree">document tree</a>.</li>
            <li>external information (e.g., viewport size, intrinsic dimensions of images, etc.).</li>
        </ul>
        <p>The properties defined in this module apply to both continuous media and paged media. </p>

        <h3 id="placement">Module Interactions</h3>
        <p>This module replaced and extends the positioning scheme features defined in [[!CSS21]] sections:</p>
        <ul>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#viewport">9.1.1 The viewport</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#containing-block">9.1.2 Containing blocks</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#positioning-scheme">9.3 Positioning schemes</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#relative-positioning">9.4.3 Relative positioning</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning">9.6 Absolute positioning</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo">9.7 Relationships between 'display', 'position', and 'float'</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#comparison">9.8 Comparison of normal flow, floats, and absolute positioning</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visuren.html#layers">9.9 Layered presentation</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">10.1 Definition of "containing block"</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width">10.3.7 Absolutely positioned, non-replaced elements</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-replaced-width">10.3.8 Absolutely positioned, replaced elements</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height">10.6.4 Absolutely positioned, non-replaced elements</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#abs-replaced-height">10.6.5 Absolutely positioned replaced elements</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">10.6.7 ''Auto'' heights for block formatting context roots</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/visufx.html#clipping">11.1.2 Clipping: the 'clip' property</a></li>
            <li><a href="http://www.w3.org/TR/CSS2/zindex.html">Appendix E. Elaborate description of Stacking Contexts</a></li>
        </ul>
        <!-- End section" Module Interactions -->

        <h3 id="values">Values</h3>
        <p>This specification follows the CSS property definition conventions from [[!CSS21]].</p>
        <p>
            Value types not defined in this specification are defined in CSS Level 2 Revision 1 
            [[!CSS21]]. Other CSS modules may expand the definitions of these value types: for 
            example [[CSS3VAL]], when combined with this module, expands the definition of the &lt;length&gt; 
            value type as used in this specification.
        </p>
        <p>
            In addition to the property-specific values listed in their definitions, all properties 
            defined in this specification also accept the <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a> keyword as their 
            property value. For readability it has not been repeated explicitly.
        </p>
        <!-- End section: Values -->
        <!-- End section Introduction -->

        <h2 id="viewport">The <dfn title="viewport">Viewport</dfn></h2>
        <p>
            User agents for <a href="http://www.w3.org/TR/CSS2/media.html#continuous-media-group">continuous media</a> 
            generally offer users a viewport (a window or other viewing area on the screen) through 
            which users consult a document. User agents may change the document&#39;s layout when the 
            viewport is resized (see the <span>initial containing block</span>).
        </p>
        <p>
            When the viewport is smaller than the area of the canvas on which the document is 
            rendered, the user agent may offer a scrolling mechanism. There is at most one viewport 
            per <a href="http://www.w3.org/TR/CSS2/intro.html#canvas">canvas</a>, but user agents 
            may render to more than one canvas (i.e., provide different views of the same document).
        </p>
        <!-- End section: The Viewport -->

        <h2 id="containing-block">Containing Blocks</h2>
        <p>
            In CSS, many box positions and sizes are calculated with respect to the edges of a 
            rectangular box called a containing block. In general, generated boxes act as 
            containing blocks for descendant boxes; we say that a box "establishes" the containing 
            block for its descendants. The phrase "a box&#39;s containing block" means "the containing 
            block in which the box lives," not the one it generates.
        </p>
        <p>
            Each box is given a position with respect to its containing block, 
            but it is not confined by this containing block; it may <a href="http://www.w3.org/TR/CSS2/visufx.html#overflow">overflow</a>.
        </p>

        <h3 id="def-containing-blocks">Definition of <dfn>containing block</dfn></h3>
        <p>
            The position and size of an element&#39;s box(es) are sometimes calculated relative to a 
            certain rectangle, called the containing block of the element. The containing block of 
            an element is defined as follows:
        </p>
        <ol>
            <li>
                The containing block in which the <a href="http://www.w3.org/TR/CSS2/conform.html#root">root element</a> lives 
                is a rectangle called the <dfn>initial containing block</dfn>. For continuous media, 
                it has the dimensions of the <span>viewport</span> and is anchored at 
                the canvas origin; it is the <a href="http://www.w3.org/TR/CSS2/page.html#page-area">page area</a> for paged media. 
                The 'direction' property of the initial containing block is the same as for the root element.
            </li>
            <li>
                For other elements, if the element&#39;s position is <span title="'position'!!''relative''">''relative''</span> or <span title="'position'!!''static''">''static''</span>, the 
                containing block is formed by the content edge of the nearest <a href="http://www.w3.org/TR/CSS2/visuren.html#block-boxes">block container</a> 
                ancestor box.
            </li>
            <li>
                If the element has <span title="'position'!!''fixed''">'positioned: fixed'</span>, the containing block is established by the 
                <span>viewport</span> in the case of continuous media or the page area in 
                the case of paged media.
            </li>
            <li>
                If the element has <span title="'position'!!''page''">'position: page'</span>, the containing block is the <span>initial 
                containing block</span>. Typically this is the <span>viewport</span> or the page area when in paged 
                media. In the case of CSS Regions [[!CSS3-REGIONS]] this is the individual region.
            </li>
            <li>
                If the element has <span title="'position'!!''absolute''">'position: absolute'</span>, the containing block is established 
                by the nearest ancestor with a 'position' other than <span title="'position'!!''static''">''static''</span>, in the following way:
                <ol>
                    <li>
                        In the case that the ancestor is block-level, the containing block is formed 
                        by the padding edge of the ancestor.
                    </li>
                    <li>
                        In the case that the ancestor is inline-level, the containing block depends 
                        on the 'direction' property of the ancestor:
                        <ol>
                            <li>
                                If the 'direction' is ''ltr'', the top and left of the containing 
                                block are the top and left content edges of the first box generated 
                                by the ancestor, and the bottom and right are the bottom and right 
                                content edges of the last box of the ancestor.
                            </li>
                            <li>
                                If the 'direction' is ''rtl'', the top and right are the 
                                top and right edges of the first box generated by the ancestor, and 
                                the bottom and left are the bottom and left content edges of the 
                                last box of the ancestor.
                                <p class="note">
                                    Note, in some cases when a line wraps it may seem as if the left 
                                    and right positions are swapped.
                                </p>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>If there is no such ancestor, the containing block is the <span>initial containing block</span>.</li>
        </ol>
        <p>
            In paged media, an absolutely positioned element is positioned relative to its 
            containing block ignoring any page breaks (as if the document were continuous). The 
            element may subsequently be broken over several pages.
        </p>
        <p>
            For absolutely positioned content that resolves to a position on a page other than the 
            page being laid out (the current page), or resolves to a position on the current page 
            which has already been rendered for printing, printers may place the content:
        </p>
        <ul>
            <li>on the current page,</li>
            <li>on a subsequent page, or</li>
            <li>may omit it alltogether.</li>
        </ul>
        <p class="note">
            Note, a block-level element that is split over several pages may have a different width 
            on each page and that there may be device-specific limits.
        </p>
        <div class="example">
            <p>With no positioning, the containing blocks (C.B.) in the following document:</p>
<pre><code class="html">
&lt;!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Illustration of containing blocks&lt;/title&gt;
    &lt;/head&gt;
    &lt;body id="body"&gt;
        &lt;div id="div1"&gt;
        &lt;p id="p1"&gt;This is text in the first paragraph...&lt;/p&gt;
        &lt;p id="p2"&gt;This is text &lt;em id="em1"&gt; in the 
        &lt;strong id="strong1"&gt;second&lt;/strong&gt; paragraph.&lt;/em&gt;&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
            <p>are established as follows:</p>
            <table class="cb-example-table">
                <tr><th>For box generated by </th>
                <th>C.B. is established by</th></tr>
                <tr><td>html</td><td>initial C.B. (UA-dependent)</td></tr>
                <tr><td>body</td><td>html</td></tr>
                <tr><td>div1</td><td>body</td></tr>
                <tr><td>p1</td><td>div1</td></tr>
                <tr><td>p2</td><td>div1</td></tr>
                <tr><td>em1</td><td>p2</td></tr>
                <tr><td>strong1</td><td>p2</td></tr>
            </table>
            <p>If we position "div1":</p>
<pre><code class="css">
#div1 { position: absolute; left: 50px; top: 50px }
</code></pre>
            <p>
                its containing block is no longer "body"; it becomes the <span>initial containing block</span> 
                (since there are no other positioned ancestor boxes).
            </p>
            <p>If we position "em1" as well:</p>
<pre><code class="css">
#div1 { position: absolute; left: 50px; top: 50px }
#em1  { position: absolute; left: 100px; top: 100px }
</code></pre>
            <p>the table of containing blocks becomes:</p>
            <table class="cb-example-table">
                <tr><th>For box generated by</th>
                <th>C.B. is established by</th></tr>
                <tr><td>html</td><td>initial C.B. (UA-dependent)</td></tr>
                <tr><td>body</td><td>html</td></tr>
                <tr><td>div1</td><td>initial C.B.</td></tr>
                <tr><td>p1</td><td>div1</td></tr>
                <tr><td>p2</td><td>div1</td></tr>
                <tr><td>em1</td><td>div1</td></tr>
                <tr><td>strong1</td><td>em1</td></tr>
            </table>
            <p>
                By positioning "em1", its containing block becomes the nearest positioned ancestor box 
                (i.e., that generated by "div1").
            </p>
        </div>
        <!-- End section: Containing blocks -->

        <h2 id="normal-flow"><dfn title="normal flow">Normal Flow</dfn></h2>
        <p>
            Boxes in the normal flow belong to a formatting context, which may be block or inline, 
            but not both simultaneously. See the CSS Basic Box Model module [[!CSS3BOX]] for further 
            details about <a href="http://www.w3.org/TR/CSS2/visuren.html#normal-flow">normal flow</a>.
        </p>
        <!-- End section: Normal Flow -->

        <h2 id="floats"><dfn title="float|floated box|floating box">Floats</dfn></h2>
        <p>
            A float is a box that is positioned within content, often left or right on the current 
            line. The most interesting characteristic of a float (or "floated" or "floating" box) 
            is that content may flow along its side (or be prohibited from doing so by the 'clear' 
            property) or around the floated box. See the CSS 2.1 [[!CSS21]]<!--CSS Floats module [[CSS3FLOATS]]--> for 
            details about <a href="http://www.w3.org/TR/CSS2/visuren.html#floats">floating boxes</a>.
        </p>
        <!-- End section: Floats -->

        <h2 id="positioning-schemes"><dfn title="positioning schemes">Positioning schemes</dfn></h2>
        <p>In CSS, a box may be laid out according to three positioning schemes:</p>
        <ol>
            <li>
                Normal flow<br>
                In CSS, <span>normal flow</span> includes <a href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting">block formatting</a> of block-level boxes, 
                <a href="http://www.w3.org/TR/CSS2/visuren.html#inline-formatting">inline formatting</a> of inline-level boxes, 
                and <span title="relative positioning">relative positioning</span> of block-level and inline-level boxes.
            </li>
            <li>
                Floats<br>
                In the <span title="floats">float</span> model, a box is first laid out according to the <span>normal flow</span>, then taken 
                out of the flow and positioned, typically to the left or right. Content may flow 
                along the side of a <span title="floats">float</span>.
            </li>
            <li>
                Absolute positioning<br>
                In the absolute positioning model, a box is removed from the <span>normal flow</span> entirely 
                (it has no impact on later siblings) and assigned a position with respect to a 
                <span>containing block</span>.
            </li>
        </ol>
        <p>
            An element is called <em>out-of-flow</em> if it is <span title="floats">floated</span>, absolutely positioned, or is 
            the root element. An element is called <em>in-flow</em> if it is not out-of-flow. The 
            <em>flow of an element</em> A is the set consisting of A and all in-flow elements whose 
            nearest out-of-flow ancestor is A.
        </p>

        <h3 id="relative-positioning"><dfn title="relative positioning|relative position|relatively positioned">Relative Positioning</dfn></h3>
        <p>
            Once a box has been laid out according to the <span>normal flow</span> or <span title="floats">floated</span>, 
            it may be shifted relative to this position. This is called relative positioning. 
            Offsetting a box (B1) in this way has no effect on the box (B2) that follows: B2 is 
            given a position as if B1 were not offset and B2 is not re-positioned after B1&#39;s offset 
            is applied. This implies that relative positioning may cause boxes to overlap. However, 
            if relative positioning causes an 'overflow: auto' or 'overflow: scroll' box to have 
            overflow, the user agent must allow the user to access this content (at its offset 
            position), which, through the creation of scrollbars, may affect layout.
        </p>
        <p>
            A relatively positioned box keeps its <span>normal flow</span> size, including line breaks and the 
            space originally reserved for it.
        </p>
        <p>
            A relatively positioned box establishes a new a new <span>containing block</span> for absolutely 
            positioned descendants. (This is a common use of relatively positioned boxes.) The 
            section on <span title="containing block">containing blocks</span> 
            explains when a relatively positioned box establishes a new <span>containing block</span>.
        </p>
        <p>
            For relatively positioned elements, 'left' and 'right' move the box(es) horizontally, 
            without changing their size. 'Left' moves the boxes to the right, and 'right' moves 
            them to the left. Since boxes are not split or stretched as a result of 'left' or 
            'right', the used values are always: left = -right.
        </p>
        <p>
            If both 'left' and 'right' are ''auto'' (their initial values), the used values are ''0'' 
            (i.e., the boxes stay in their original position).
        </p>
        <p>
            If 'left' is ''auto'', its used value is minus the value of 'right' (i.e., the boxes move 
            to the left by the value of 'right').
        </p>
        <p>If 'right' is specified as ''auto'', its used value is minus the value of 'left'.</p>
        <p>
            If neither 'left' nor 'right' is ''auto'', the position is over-constrained, and one of 
            them has to be ignored. If the 'direction' property of the <span>containing block</span> is ''ltr'', 
            the value of 'left' wins and 'right' becomes -'left'. If 'direction' of the containing 
            block is ''rtl'', 'right' wins and 'left' is ignored.
        </p>
        <div class="example">
            <p>The following three rules are equivalent:</p>
<pre><code class="css">
div.a8 { position: relative; direction: ltr; left: -1em; right: auto }
div.a8 { position: relative; direction: ltr; left: auto; right: 1em }
div.a8 { position: relative; direction: ltr; left: -1em; right: 5em }
</code></pre>
        </div>
        <p>
            The 'top' and 'bottom' properties move relatively positioned element(s) up or down 
            without changing their size. 'Top' moves the boxes down, and 'bottom' moves them up. 
            Since boxes are not split or stretched as a result of 'top' or 'bottom', the used values 
            are always: top = -bottom.
        </p>
        <p>If 'top' and 'bottom' are ''auto'', their used values are both ''0''.</p>
        <p>
            If one of them, 'top' or 'bottom', is ''auto'', the ''auto'' value becomes the negative of 
            the other.
        </p>
        <p>
            If neither 'top' and 'bottom' is ''auto'', 'bottom' is ignored (i.e., the used value of 
            'bottom' will be minus the value of 'top').
        </p>
        <p class="note">
            Note, dynamic movement of relatively positioned boxes can produce animation effects in 
            scripting environments (see also the 'visibility' property). 
            Although relative positioning may be used as a form of superscripting and subscripting, 
            the line height is not automatically adjusted to take the positioning into consideration. 
            See the description of <a href="http://www.w3.org/TR/CSS2/visudet.html#line-height">line height calculations</a> for more information.
        </p>
        <p>
            Examples of relative positioning are provided in the section comparing <span>normal flow</span>, 
            <span title="floats">floats</span>, and absolute positioning.
        </p>
        <!-- End section: Relative positioning  -->

        <h3 id="absolute-positioning"><span class="index-def" title="absolute positioning|absolute position|absolutely positioned">Absolute positioning</span></h3>
        <p>
            In the absolute positioning model, a box is explicitly offset with respect to its 
            <span>containing block</span>. It is removed from the <span>normal flow</span> entirely (it has no impact on later 
            siblings). An absolutely positioned box establishes a new <span>containing block</span> for normal 
            flow children and absolutely (but not fixed) positioned descendants. However, the 
            contents of an absolutely positioned element do not flow around any other boxes. They 
            may obscure the contents of another box (or be obscured themselves), depending on the 
            stack levels of the overlapping boxes.
        </p>
        <p>
            References in this specification to an <span class="index-def" title="absolute positioned element/box">absolutely positioned element</span> (or its box) 
            imply that the element&#39;s 'position' property has the value <span title="'position'!!''absolute''">''absolute''</span> or <span title="'position'!!''fixed''">''fixed''</span>.
        </p>
        <!-- End section: Absolute positioning -->

        <h3 id="page-positioning"><span class="index-def" title="page positioning|page position|page positioned">Page positioning</span></h3>
        <p>
            In the page positioning model, a box is explicitly offset with respect to its <span>initial 
            containing block</span>. It is removed from the <span>normal flow</span> entirely (it has no impact on later 
            siblings). A page positioned box establishes a new <span>containing block</span> for <span>normal flow</span> 
            children and absolutely (but not fixed, or page) positioned descendants. However, the 
            contents of a page positioned element do not flow around any other boxes. They may 
            obscure the contents of another box (or be obscured themselves), depending on the 
            stack levels of the overlapping boxes.
        </p>
        <p>
            For <a href="http://www.w3.org/TR/CSS2/page.html">paged media</a>, 
            boxes with page positions are only generated on the initial page where the page position 
            element exists. Boxes with page position that are larger than the page area are clipped 
            and the remaining part of the box is placed on the following page.
        </p>
        <p>
            References in this specification to a <span class="index-def" title="page positioned element/box">page positioned element</span> (or its box) imply 
            that the element&#39;s 'position' property has the value <span title="'position'!!''page''">''page''</span>.
        </p>
        <p class="note">
            When a page positioned element is not within a CSS Region [[!CSS3-REGIONS]] the <span>initial 
            containing block</span> is the <span>viewport</span>. This can cause odd behavior for layout of page 
            positioned elements where they will all be laid out from the <span>viewport</span> and potentially 
            overlap from that location. Authors should be aware how their content will be consumed 
            when using page postioning.
        </p>
        <!-- End section: Page positioning -->

        <h3 id="fixed-positioning"><span class="index-def" title="fixed positioning|fixed position|fixed positioned">Fixed positioning</span></h3>
        <p>
            Fixed positioning is a subcategory of absolute positioning. The only difference is that 
            for a fixed positioned box, the <span>containing block</span> is established by the <span>viewport</span>. 
            For <a href="http://www.w3.org/TR/CSS2/media.html#continuous-media-group">continuous media</a>, 
            fixed boxes do not move when the document is scrolled. In this respect, they are similar 
            to <a href="http://www.w3.org/TR/CSS2/colors.html#background-properties">fixed background images</a>. 
            For <a href="http://www.w3.org/TR/CSS2/media.html#paged-media-group">paged media</a>, boxes 
            with fixed positions are repeated on every page. This is useful for placing, for 
            instance, a signature at the bottom of each page. Boxes with fixed position that are 
            larger than the page area are clipped. Parts of the fixed position box that are not 
            visible in the <span>initial containing block</span> will not print.
        </p>
        <div class="example">
            <p>
                Authors may use fixed positioning to create frame-like presentations. Consider the 
                following frame layout:
            </p>
            <div class="figure">
                <p>
                    <img src="frame.png" alt="Example of frame layout">
                    <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-anon-block" href="http://www.w3.org/TR/CSS2/images/longdesc/frame-desc.html" title="Long description for frame layout example">[D]</a></span>
                </p>
            </div>
            <p>This might be achieved with the following HTML document and style rules:</p>
<pre><code class="html">
&lt;!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;A frame document with CSS 2.1&lt;/title&gt;
    &lt;style type="text/css" media="screen"&gt;
      body { height: 8.5in } /* Required for percentage heights below */
      #header {
        position: fixed;
        width: 100%;
        height: 15%;
        top: 0;
        right: 0;
        bottom: auto;
        left: 0;
      }
      #sidebar {
        position: fixed;
        width: 10em;
        height: auto;
        top: 15%;
        right: auto;
        bottom: 100px;
        left: 0;
      }
      #main {
        position: fixed;
        width: auto;
        height: auto;
        top: 15%;
        right: 0;
        bottom: 100px;
        left: 10em;
      }
      #footer {
        position: fixed;
        width: 100%;
        height: 100px;
        top: auto;
        right: 0;
        bottom: 0;
        left: 0;
      }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="header"&gt; ...  &lt;/div&gt;
    &lt;div id="sidebar"&gt; ...  &lt;/div&gt;
    &lt;div id="main"&gt; ...  &lt;/div&gt;
    &lt;div id="footer"&gt; ...  &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
        </div>
        <!-- End section: Fixed positioning -->
        <!-- End section: Positioning schemes -->

        <h3 id="position-property">Choosing a positioning scheme: 'position' property</h3>
        <p>
            The 'position' property determine which of the positioning algorithms is used to 
            calculate the position of a box.
        </p>
        <table id="propdef-position" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'position'">position</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>static</var> | <var>relative</var> | <var>absolute</var> | <var>page</var> | <var>fixed</var> | <var>center</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>static</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>all elements except table-column-group and table-column</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>specified value</td>
            </tr>
        </table>
        <p>The values of this property have the following meanings:</p>
        <dl>
            <dt><dfn title="'position'!!''static''">static</dfn></dt>
            <dd>
                The box is a normal box, laid out according to the <span>normal flow</span>. The 
                'top', 'right', 'bottom', and 'left' properties do not apply.
            </dd>
            <dt><dfn title="'position'!!''relative''">relative</dfn></dt>
            <dd>
                The box&#39;s position is calculated according to the <span>normal flow</span> 
                (this is called the position in <span>normal flow</span>). Then the box is offset relative 
                to its normal position and in all cases, including table elements, does not affect 
                the position of any following boxes. When a box B is relatively positioned, the 
                position of the following box is calculated as though B were not offset. The effect 
                of <span title="'position'!!''relative''">'position: relative'</span> on table elements is defined as follows:
                <ul>
                    <li>
                        table-row-group, table-header-group, table-footer-group and table-row offset 
                        relative to its normal position within the table. If table-cells span 
                        multiple rows, only the cells originating in the <span title="relative positioning">relative positioned</span> row is 
                        offset.
                    </li>
                    <li>
                        table-column-group, table-column do not offset the respective column and has 
                        no visual affect when <span title="'position'!!''relative''">'position: relative'</span> is applied.
                    </li>
                    <li>
                        table-caption and table-cell offset relative to its normal position within 
                        the table. If a table cell spans multiple columns or rows the full spanned 
                        cell is offset.
                    </li>
                </ul>
            </dd>
            <dt><dfn title="'position'!!''absolute''">absolute</dfn></dt>
            <dd>
                The box&#39;s position (and possibly size) is specified with the 'top', 'right', 
                'bottom', and 'left' properties. These properties specify offsets with respect to 
                the box&#39;s <span>containing block</span>. Absolutely positioned boxes are taken out of the normal 
                flow. This means they have no impact on the layout of later siblings. Though 
                absolutely positioned boxes may have margins, those margins do not <a href="http://www.w3.org/TR/CSS2/box.html#collapsing-margins">collapse</a>
                with any other margins.
            </dd>
            <dt><dfn title="'position'!!''page''">page</dfn></dt>
            <dd>
                <p>
                    The box&#39;s position is calculated according to the "absolute" model, but in 
                    addition, the box <span>containing block</span> is always the <span>initial containing block</span>. As 
                    with the "absolute" model, the box&#39;s margins do not collapse with any other 
                    margins. In the case of the print media type, the box is rendered only on the 
                    initial page where the page positioned element originated. User agents may 
                    paginate the content of paged boxes.
                </p>
                <p class="note">
                    Note, that CSS Regions are also <span title="initial containing block">initial containing blocks</span>, in accordance with 
                    <a href="http://dev.w3.org/csswg/css3-regions/Overview.html#flow-into">'flow-into'</a> property 
                    of the CSS Regions Module [[!CSS3-REGIONS]].
                </p>
                <p class="issue">
                    There have been some discussions about the naming of the propery value name <span title="'position'!!''page''">''page''</span>. 
                    If you have any suggestions please email the mailing list.
                </p>
            </dd>
            <dt><dfn title="'position'!!''fixed''">fixed</dfn></dt>
            <dd>
                The box&#39;s position is calculated according to the "absolute" model, but in addition, 
                the box is fixed with respect to some reference. As with the "absolute" model, the 
                box&#39;s margins do not collapse with any other margins. In the case of handheld, 
                projection, screen, tty, and tv media types, the box is fixed with respect to the 
                <span>viewport</span> and does not move when scrolled. In the case of the print media type, the 
                box is rendered on every page, and is fixed with respect to the page box, even if 
                the page is seen through a <span>viewport</span> (in the case of a print-preview, for example). 
                For other media types, the presentation is undefined. Authors may wish to specify 
                <span title="'position'!!''fixed''">''fixed''</span> in a media-dependent way. For instance, an author may want a box to remain 
                at the top of the <span>viewport</span> on the screen, but not at the top of each printed page. 
                The two specifications may be separated by using an <a href="http://www.w3.org/TR/CSS2/media.html#at-media-rule">'@media'</a> 
                rule, as in:
                <div class="example">
<pre><code class="css">
@media screen {
    h1#first { position: fixed }
}
@media print {
    h1#first { position: static }
}
</code></pre>
                </div>
                <p>User agents must not paginate the content of fixed boxes.</p>
                <p class="note">
                    Note that user agents may print invisible content in other ways. See 
                    <a href="http://www.w3.org/TR/CSS2/page.html#outside-page-box">"Content outside the page box"</a>.
                </p>
            </dd>
            <dt><dfn title="'position'!!''center''">center</dfn></dt>
            <dd>
                The box&#39;s position (and possibly size) is specified with the 'top', 'right', 
                'bottom', and 'left' properties. The box is vertically and horizontally centered 
                within its <span>containing block</span> and these properties specify offsets with respect to 
                the box&#39;s centered position withing its <span>containing block</span>. Center 
                positioned boxes are taken out of the normal flow. This means they have no impact on 
                the layout of later siblings. Though center positioned boxes may have margins, those 
                margins do not <a href="http://www.w3.org/TR/CSS2/box.html#collapsing-margins">collapse</a>
                with any other margins.
                <div class="issue">
                    Need a better, more clear, defintion for center.
                </div>
            </dd>
        </dl>
        <p>
            In previous versions of CSS user agents may treat position <span title="'position'!!''fixed''">''fixed''</span> as <span title="'position'!!''static''">''static''</span> on 
            the root element. This specification removes that option and it is now required that 
            newer user agents treat <span title="'position'!!''fixed''">''fixed''</span> value on the root element as defined for all other 
            elements.
        </p>
        <!-- End section: Choosing a positioning scheme: 'position' property -->

        <!--
        <h3 id="position-root">Choosing a different containing block for positioning: 'position-reference' property</h3>
        <p>The 'position-reference' property determines what element to use as a containing block for the current element.</p>
        <table id="propdef-position-reference" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'position-reference'">position-reference</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>parent</var> | <var>container</var> | <var>root</var> | <var>viewport</var> | <var>nth-parent()</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>specified value</td>
            </tr>
        </table>
        <p>The values of this property have the following meanings:</p>
        <dl>
            <dt><dfn title="'position-reference'!!''auto''">auto</dfn></dt>
            <dd>
                
            </dd>
            <dt><dfn title="'position-reference'!!''parent''">parent</dfn></dt>
            <dd>
                
            </dd>
            <dt><dfn title="'position-reference'!!''container''">container</dfn></dt>
            <dd>
                
            </dd>
            <dt><dfn title="'position-reference'!!''root''">root</dfn></dt>
            <dd>
                
            </dd>
            <dt><dfn title="'position-reference'!!''viewport''">viewport</dfn></dt>
            <dd>
                
            </dd>
            <dt><dfn title="'position-reference'!!''nth-parent()''">nth-parent()</dfn></dt>
            <dd>
                
                <p class="issue">
                    Inserting and removing elements from the tree may cause odd behavior with 
                    'nth-parent()'. Is this really a good concept?
                </p>
            </dd>
        </dl>
        -->
        <p class="issue">
            Ideas have been raised to allow changing the positioning containing block or allowing 
            positioining and sizing to use different containing blocks.
        </p>
        <!-- End section: Choosing a different containing block for positioning: 'position-reference' property -->

        <h3 id="box-offsets-trbl">Box offsets: 'top', 'right', 'bottom', 'left'</h3>
        <p>
            An element is said to be <span class="index-def" title="positioned element/box">positioned</span> if its 'position' property has a value 
            other than <span title="'position'!!''static''">''static''</span>. Positioned elements generate positioned boxes, laid out according 
            to four properties:
        </p>
        <table id="propdef-top" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'top'">top</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>refer to height of <span>containing block</span></td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>
                    for <span title="'position'!!''relative''">'position: relative'</span>, see <span title="relative positioning">Relative Positioning</span>. For <span title="'position'!!''static''">'position: static'</span>, 
                    ''auto''. Otherwise: if specified as a '&lt;length&gt;', the corresponding absolute length; 
                    if specified as a '&lt;percentage&gt;', the specified value; otherwise, ''auto''.
                </td>
            </tr>
        </table>
        <p>
            This property specifies how far an absolutely positioned box&#39;s top margin edge is offset 
            below the top edge of the box&#39;s <span>containing block</span>. For relatively positioned boxes, the 
            offset is with respect to the top edges of the box itself (i.e., the box is given a 
            position in the <span>normal flow</span>, then offset from that position according to these 
            properties). For page positioned boxes, the offset is with respect to the top edge of 
            the <span>initial containing block</span> itself. For absolutely positioned elements whose containing 
            block is based on a block-level element, these properties are an offset from the padding 
            edge of that element.
        </p>
        <table id="propdef-right" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'right'">right</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>refer to height of <span>containing block</span></td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>
                    for <span title="'position'!!''relative''">'position: relative'</span>, see <span title="relative positioning">Relative Positioning</span>. For <span title="'position'!!''static''">'position: static'</span>, 
                    ''auto''. Otherwise: if specified as a '&lt;length&gt;', the corresponding absolute length; 
                    if specified as a '&lt;percentage&gt;', the specified value; otherwise, ''auto''.
                </td>
            </tr>
        </table>
        <p>
            Like 'top', but specifies how far a box&#39;s right margin edge is offset to the left of the 
            right edge of the box&#39;s <span>containing block</span>. For relatively positioned boxes, the offset is 
            with respect to the right edge of the box itself. For page positioned boxes, the offset 
            is with respect to the right edge of the <span>initial containing block</span> itself. For absolutely 
            positioned elements whose <span>containing block</span> is based on a block-level element, these 
            properties are an offset from the padding edge of that element.
        </p>
        <table id="propdef-bottom" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'bottom'">bottom</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>refer to height of <span>containing block</span></td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>
                    for <span title="'position'!!''relative''">'position: relative'</span>, see <span title="relative positioning">Relative Positioning</span>. For <span title="'position'!!''static''">'position: static'</span>, 
                    ''auto''. Otherwise: if specified as a '&lt;length&gt;', the corresponding absolute length; 
                    if specified as a '&lt;percentage&gt;', the specified value; otherwise, ''auto''.
                </td>
            </tr>
        </table>
        <p>
            Like 'top', but specifies how far a box&#39;s bottom margin edge is offset above the bottom 
            of the box&#39;s <span>containing block</span>. For relatively positioned boxes, the offset is with 
            respect to the bottom edge of the box itself. For page positioned boxes, the offset is 
            with respect to the bottom edge of the <span>initial containing block</span> itself. For absolutely 
            positioned elements whose <span>containing block</span> is based on a block-level element, these 
            properties are an offset from the padding edge of that element.
        </p>
        <table id="propdef-left" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'left'">left</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>refer to height of <span>containing block</span></td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>
                    for <span title="'position'!!''relative''">'position: relative'</span>, see <span title="relative positioning">Relative Positioning</span>. For <span title="'position'!!''static''">'position: static'</span>, 
                    ''auto''. Otherwise: if specified as a '&lt;length&gt;', the corresponding absolute length; 
                    if specified as a '&lt;percentage&gt;', the specified value; otherwise, ''auto''.
                </td>
            </tr>
        </table>
        <p>
            Like 'top', but specifies how far a box&#39;s left margin edge is offset to the right of the 
            left edge of the box&#39;s <span>containing block</span>. For relatively positioned boxes, the offset is 
            with respect to the left edge of the box itself.
        </p>
        <p>The values for the four properties have the following meanings:</p>
        <dl>
            <dt><dfn class="index-def" title="'top'!!''&lt;length&gt;''|'right'!!''&lt;length&gt;''|'bottom'!!''&lt;length&gt;''|'left'!!''&lt;length&gt;''">&lt;length&gt;</dfn></dt>
            <dd>The offset is a fixed distance from the reference edge. Negative values are allowed.</dd>
            <dt><dfn class="index-def" title="'top'!!''&lt;percentage&gt;''|'right'!!''&lt;percentage&gt;''|'bottom'!!''&lt;percentage&gt;''|'left'!!''&lt;percentage&gt;''">&lt;percentage&gt;</dfn></dt>
            <dd>
                The offset is a percentage of the <span title="containing block">containing block&#39;s</span> width (for 'left' or 'right') 
                or height (for 'top' and 'bottom'). Negative values are allowed.
            </dd>
            <dt><dfn class="index-def" title="'top'!!''auto''|'right'!!''auto''|'bottom'!!''auto''|'left'!!''auto''">auto</dfn></dt>
            <dd>
                For non-replaced elements, the effect of this value depends on which of related 
                properties have the value ''auto'' as well. See the sections on the <a href="#abs-non-replaced-width">width</a> and <a href="#abs-non-replaced-height">height</a> 
                of absolutely positioned, non-replaced elements for details.  For replaced elements, 
                the effect of this value depends only on the intrinsic dimensions of the replaced 
                content. See the sections on the <a href="#abs-replaced-width">width</a> and <a href="#abs-replaced-height">height</a> of absolutely
                positioned, replaced elements for details.
            </dd>
        </dl>
        <p class="note">
            Note, for page positioned elements and fixed positioned elements using large values or negative values may easily move elements 
            outside the <span>viewport</span> and make the contents unreachable through scrolling or other means. 
            Authors should be aware that page positioned elements and fixed position elements are always relative to the <span>initial containing block</span>.
        </p>
        <!-- End section: Box offsets: 'top', 'right', 'bottom', 'left'  -->

        <h2 id="size-and-position-details">Sizing and positioning details</h2>
        <h3 id="width-of-absolute-non-replaced-elements">The width of absolute, page or fixed positioned, non-replaced element</h3>
        <p>The constraint that determines the used values for these elements is:</p>
        <p>
            <code>
                'left' + <span>'margin-left'</span> + <span>'border-left-width'</span> + <span>'padding-left'</span> + 'width' + 
                <span>'padding-right'</span> + <span>'border-right-width'</span> + <span>'margin-right'</span> + 
                'right' = <span>width of containing block</span>
           </code>
        </p>
        <p>
            If all three of 'left', 'width', and 'right' are ''auto'': First set any ''auto'' values for 
            'margin-left' and 'margin-right' to ''0''. Then, if the 'direction' property of the element 
            establishing the static-position <span>containing block</span> is ''ltr'' set 'left' to the static 
            position and apply rule number <em>three</em> below; otherwise, set 'right' to the 
            static-position and apply rule number <em>one</em> below.
        </p>
        <p>
            If none of the three is ''auto'': If both 'margin-left' and 'margin-right' are ''auto'', 
            solve the equation under the extra constraint that the two margins get equal values, 
            unless this would make them negative, in which case when direction of the containing 
            block is ''ltr'' (''rtl''), set 'margin-left' ('margin-right') to zero and solve for 
            'margin-right' ('margin-left'). If one of 'margin-left' or 'margin-right' is ''auto'', 
            solve the equation for that value. If the values are over-constrained, ignore the value 
            for 'left' (in case the 'direction' property of the <span>containing block</span> is ''rtl'') or 
            'right' (in case 'direction' is ''ltr'') and solve for that value.
        </p>
        <p>
            Otherwise, set ''auto'' values for 'margin-left' and 'margin-right' to ''0'', and pick one of 
            the following six rules that apply.
        </p>
        <ol>
            <li>
                If 'left' and 'width' are ''auto'' and 'right' is not ''auto'', then the width is 
                shrink-to-fit. Then solve for 'left'
            </li>
            <li>
                If 'left' and 'right' are ''auto'' and 'width' is not ''auto'', then if the 'direction' 
                property of the element establishing the static-position <span>containing block</span> is ''ltr'' 
                set 'left' to the static-position, otherwise set 'right' to the static-position. 
                Then solve for 'left' (if 'direction is ''rtl'') or 'right' (if 'direction' is ''ltr'').
            </li>
            <li>
                If 'width' and 'right' are ''auto'' and 'left' is not ''auto'', then the width is 
                shrink-to-fit. Then solve for 'right'
            </li>
            <li>If 'left' is ''auto'', 'width' and 'right' are not ''auto'', then solve for 'left'</li>
            <li>If 'width' is ''auto'', 'left' and 'right' are not ''auto'', then solve for 'width'</li>
            <li>If 'right' is ''auto'', 'left' and 'width' are not ''auto'', then solve for 'right'</li>
        </ol>
        <!-- End section: The width of absolute, page or fixed positioned, non-replaced element -->

        <h3 id="width-of-center-positioned-non-replaced-elements">The width of a center positioned, non-replaced element</h3>
        <p>The constraint that determines the used values for these elements is:</p>
        <p>
            <code>
                'left' + <span>'margin-left'</span> + <span>'border-left-width'</span> + <span>'padding-left'</span> +
                'width' + <span>'padding-right'</span> + <span>'border-right-width'</span> + <span>'margin-right'</span> +
                'right' = <span>width of containing block</span>
           </code>
        </p>
        <p>First set any ''auto'' values for 'margin-left' and 'margin-right' to ''0''.</p>
        <p>If any of 'left' or 'right' are ''auto'', set them to ''50%''.</p>
        <p>If neither 'left' nor 'right' are set to a percentage:</p>
        <ul>
            <li>If 'width' is ''auto'', 'width' is determined using the equation above.</li>
            <li>
                Otherwise, if 'direction' is ''ltr'' (''rtl''), the values are over-constrained. 
                Ignore the value for 'right' ('left'). Then solve for 'right' ('left').
            </li>
        </ul>
        <p>Otherwise, if both 'left' and 'right' are set to a percentage:</p>
        <ul>
            <li>
                If 'width' is ''auto'', then the width is shrink-to-fit. If this results in an 
                outer width wider than the containing block width, then set the width so that the 
                outer width is the containing block width.
            </li>
            <li>
                If 'direction' is ''ltr'' set 'left' and 'right' as follows:
                <p>
                    <code>
                        computed value of 'left' = 'left' percentage * width of containing block - 
                        'left' percentage * (<span>'margin-left'</span> + <span>'border-left-width'</span> 
                        + <span>'padding-left'</span> + 'width' + <span>'padding-right'</span> + 
                        <span>'border-right-width'</span> + <span>'margin-right'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        computed value of 'right' = width of containing block - computed value of 'left' 
                        - <span>'margin-left'</span> - <span>'border-left-width'</span> - 
                        <span>'padding-left'</span> - 'width' - <span>'padding-right'</span> - 
                        <span>'border-right-width'</span> - <span>'margin-right'</span>
                    </code>
                </p>
            </li>
            <li>
                Otherwise, if 'direction' is ''rtl'' set 'left' and 'right' as follows:
                <p>
                    <code>
                        computed value of 'right' = 'right' percentage * width of containing block - 
                        'right' percentage * (<span>'margin-left'</span> + 
                        <span>'border-left-width'</span> + <span>'padding-left'</span> + 'width' + 
                        <span>'padding-right'</span> + <span>'border-right-width'</span> + 
                        <span>'margin-right'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        computed value of 'left' = width of containing block - computed value of 
                        'right' - <span>'margin-left'</span> - <span>'border-left-width'</span> - 
                        <span>'padding-left'</span> - 'width' - <span>'padding-right'</span> - 
                        <span>'border-right-width'</span> - <span>'margin-right'</span>
                    </code>
                </p>
            </li>
        </ul>
        <p>Otherwise, if 'left' is set to a percentage, 'right' is a length:</p>
        <ul>
            <li>
                If 'width' is not ''auto'', the values are over constrained. Ignore 'left' 
                (regardless of 'direction') and use the equality at the beginning of this section to 
                derive the computed value for 'width'.
            </li>
            <li>
                Otherwise, 'width' is ''auto''. Derive 'left' and 'width' under the following constraints:
                <p>
                    <code>
                        computed value of 'left' = 'left' percentage * width of containing block - 
                        'left' percentage * (<span>'margin-left'</span> + <span>'border-left-width'</span> 
                        + <span>'padding-left'</span> + 'width' + <span>'padding-right'</span> + 
                        <span>'border-right-width'</span> + <span>'margin-right'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        'left' + (<span>'margin-left'</span> + <span>'border-left-width'</span> + 
                        <span>'padding-left'</span> + 'width' + <span>'padding-right'</span> + 
                        <span>'border-right-width'</span> + <span>'margin-right'</span>) + 'right' = 
                        width of containing block
                    </code>
                </p>
            </li>
        </ul>
        <p>otherwise, 'right' is a percentage and 'left' is a length:</p>
        <ul>
            <li>
                If 'width' is not ''auto'', the values are over constrained. Ignore 'right' 
                (regardless of 'direction') and use the equality at the beginning of this section to 
                derive the computed value for 'width'.
            </li>
            <li>
                Otherwise, 'width' is ''auto''. Derive 'right' and 'width' under the following constraints:
                <p>
                    <code>
                        computed value of 'right' = 'right' percentage * width of containing block - 
                        'right' percentage * (<span>'margin-left'</span> + <span>'border-left'</span> 
                        + <span>'padding-left'</span> + 'width' + <span>'padding-right'</span> + 
                        <span>'border-right'</span> + <span>'margin-right'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        'left' + (<span>'margin-left'</span> + <span>'border-left'</span> + 
                        <span>'padding-left'</span> + 'width' + <span>'padding-right'</span> + 
                        <span>'border-right'</span> + <span>'margin-right'</span>) + 'right' = 
                        width of containing block
                    </code>
                </p>
            </li>
        </ul>
        <!-- End section: The width of a center positioned, non-replaced element -->

        <h3 id="width-of-absolute-replaced-elements">The width of absolute, page or fixed positioned, replaced element</h3>
        <p>
            If 'height' and 'width' both have computed values of ''auto'' and the element also has an 
            intrinsic width, then that intrinsic width is the used value of 'width'.
        </p>
        <p>
            If 'height' and 'width' both have computed values of ''auto'' and the element has no 
            intrinsic width, but does have an intrinsic height and intrinsic ratio; or if 'width' 
            has a computed value of ''auto'', 'height' has some other computed value, and the element 
            does have an intrinsic ratio; then the used value of 'width' is:
        </p>
        <p><code>(used height) * (intrinsic ratio)</code></p>
        <p>
            If 'height' and 'width' both have computed values of ''auto'', the element has an 
            intrinsic ratio but no intrinsic height or width, and the <span title="containing block">containing block&#39;s</span> width does 
            not itself depend on the replaced element&#39;s width, then the used value of 'width' is 
            calculated from the constraint equation used for 
            <a href="http://www.w3.org/TR/CSS21/visudet.html#blockwidth">block-level, non-replaced elements in <span>normal flow</span></a>.
        </p>
        <p>
            Otherwise, if 'width' has a computed value of ''auto'', and the element has an intrinsic 
            width, then that intrinsic width is the used value of 'width'.
        </p>
        <p>
            Otherwise, if 'width' has a computed value of ''auto'', but none of the conditions above 
            are met, and then the used value of 'width' becomes ''300px''. If ''300px'' is too wide to fit 
            the device, user agents should use the width of the largest rectangle that has a 2:1 
            ratio and fits the device instead.
        </p>
        <p>
            After establishing the 'width', in order to position the replaced element, apply the 
            following rules as appropriate.
        </p>
        <ol>
            <li>
                If both 'left' and 'right' have the value ''auto'', and if the 'direction' property of 
                the element establishing the static-position <span>containing block</span> is ''ltr'', set 'left' 
                to the static position and solve for 'right'; else if 'direction' is ''rtl'', set 
                'right' to the static position and solve for 'left'.
            </li>
            <li>
                If 'left' is ''auto'' and 'right' is not ''auto'', replace any ''auto'' on 'margin-left' 
                or 'margin-right' with ''0'', then solve for 'left'.
            </li>
            <li>
                If 'right' is ''auto'' and 'left' is not ''auto'', replace any ''auto'' on 'margin-left' 
                or 'margin-right' with ''0'', then solve for 'right'.
            </li>
            <li>
                If at this point both 'margin-left' and 'margin-right' are still ''auto'', solve the 
                equation under the extra constraint that the two margins must get equal values, 
                unless this would make them negative, in which case when the direction of the 
                <span>containing block</span> is ''ltr'' (''rtl''), set 'margin-left' ('margin-right') to ''0'' and 
                solve for 'margin-right' ('margin-left').
            </li>
            <li>If at this point there is an ''auto'' remaining, solve the equation for that value.</li>
            <li>
                If at this point the values are over-constrained, ignore the value for either 'left' 
                (in case the 'direction' property of the <span>containing block</span> is ''rtl'') or 'right' (in 
                case 'direction' is ''ltr'') and solve for that value.
            </li>
        </ol>
        <!-- End section: The width of absolute, page or fixed positioned, replaced element -->

        <h3 id="width-of-center-replaced-elements">The width of a 'center' positioned, replaced element</h3>
        <p></p>
        <!-- End section: The width of a 'center' positioned, replaced element -->


        <h3 id="height-of-absolute-non-replaced-elements">The height of absolute, page or fixed positioned, non-replaced element</h3>
        <p>
            For absolutely positioned elements, the used values of the vertical dimensions must 
            satisfy this constraint:
        </p>
        <p>
            <code>
                'top' + <span>'margin-top'</span> + <span>'border-top-width'</span> + <span>'padding-top'</span> + 'height' + 
                <span>'padding-bottom'</span> + <span>'border-bottom-width'</span> + <span>'margin-bottom'</span> + 'bottom' 
                = <span>height of containing block</span>
            </code>
        </p>
        <p>
            If all three of 'top', 'height', and 'bottom' are ''auto'', set 'top' to the static position 
            and apply rule number <em>three</em> below.
        </p>
        <p>
            If none of the three are ''auto'': If both 'margin-top' and 'margin-bottom' are ''auto'', 
            solve the equation under the extra constraint that the two margins get equal values. If 
            one of 'margin-top' or 'margin-bottom' is ''auto'', solve the equation for that value. If 
            the values are over-constrained, ignore the value for 'bottom' and solve for that value.
        </p>
        <p>Otherwise, pick the one of the following six rules that applies.</p>
        <ol>
            <li>
                'top' and 'height' are ''auto'' and 'bottom' is not ''auto'', then the height is based on the 
                <a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">''Auto'' heights for block formatting context roots</a>, 
                set ''auto'' values for 'margin-top' and 'margin-bottom' to ''0'', and solve for 'top'.
            </li>
            <li>
                'top' and 'bottom' are ''auto'' and 'height' is not ''auto'', then set 'top' to the 
                static position, set ''auto'' values for 'margin-top' and 'margin-bottom' to ''0'', and 
                solve for 'bottom'.
            </li>
            <li>
                'height' and 'bottom' are ''auto'' and 'top' is not ''auto'', then the height is based 
                on the <a href="http://www.w3.org/TR/CSS2/visudet.html#root-height">''Auto'' heights for block formatting context roots</a>, 
                set ''auto'' values for 'margin-top' and 'margin-bottom' to ''0'', and solve for 'bottom'.
            </li>
            <li>
                'top' is ''auto'', 'height' and 'bottom' are not ''auto'', then set ''auto'' values for 
                'margin-top' and 'margin-bottom' to ''0'', and solve for 'top'.
            </li>
            <li>
                'height' is ''auto'', 'top' and 'bottom' are not ''auto'', then ''auto'' values for 
                'margin-top' and 'margin-bottom' are set to ''0'' and solve for 'height'.
            </li>
            <li>
                'bottom' is ''auto'', 'top' and 'height' are not ''auto'', then set ''auto'' values for 
                'margin-top' and 'margin-bottom' to ''0'' and solve for 'bottom'.
            </li>
        </ol>
        <!-- End section: The height of absolute, page or fixed positioned, non-replaced element -->

        <h3 id="height-of-center-non-replaced-elements">The height of a center positioned, non-replaced element</h3>
        <p>The constraint that determines the used values for these elements is:</p>
        <p>
            <code>
                'top' + <span>'margin-top'</span> + <span>'border-top-width'</span> + <span>'padding-top'</span> +
                'height' + <span>'padding-bottom'</span> + <span>'border-bottom-width'</span> + <span>'margin-bottom'</span> +
                'bottom' = <span>height of containing block</span>
           </code>
        </p>
        <p>First set any ''auto'' values for 'margin-top' and 'margin-bottom' to ''0''.</p>
        <p>If any of 'top' or 'bottom' are ''auto'', set them to ''50%''.</p>
        <p>If neither 'top' nor 'bottom' are set to a percentage:</p>
        <ul>
            <li>If 'height' is ''auto'', 'height' is determined using the equation above.</li>
            <li>
                Otherwise, the values are over-constrained. Ignore the value for 'bottom'. Then 
                solve for 'bottom'.
            </li>
        </ul>
        <p>Otherwise, if both 'top' and 'bottom' are set to a percentage:</p>
        <ul>
            <li>
                If 'height' is ''auto'', then the height is shrink-to-fit. If this results in an 
                outer height taller than the containing block height, then set the height so that the 
                outer height is the containing block height.
            </li>
            <li>
                Set 'top' and 'bottom' as follows:
                <p>
                    <code>
                        computed value of 'top' = 'top' percentage * height of containing block - 
                        'top' percentage * (<span>'margin-top'</span> + <span>'border-top-width'</span> 
                        + <span>'padding-top'</span> + 'height' + <span>'padding-bottom'</span> + 
                        <span>'border-bottom-width'</span> + <span>'margin-bottom'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        computed value of 'bottom' = height of containing block - computed value of 'top' 
                        - <span>'margin-top'</span> - <span>'border-top-width'</span> - 
                        <span>'padding-top'</span> - 'height' - <span>'padding-bottom'</span> - 
                        <span>'border-bottom-width'</span> - <span>'margin-bottom'</span>
                    </code>
                </p>
            </li>
        </ul>
        <p>Otherwise, if 'top' is set to a percentage and 'bottom' is a length:</p>
        <ul>
            <li>
                If 'height' is not ''auto'', the values are over constrained. Ignore 'top' and use 
                the equality at the beginning of this section to derive the computed value for 'height'.
            </li>
            <li>
                Otherwise, 'height' is ''auto''. Derive 'top' and 'height' under the following constraints:
                <p>
                    <code>
                        computed value of 'top' = 'top' percentage * height of containing block - 
                        'top' percentage * (<span>'margin-top'</span> + <span>'border-top-width'</span> 
                        + <span>'padding-top'</span> + 'height' + <span>'padding-bottom'</span> + 
                        <span>'border-bottom-width'</span> + <span>'margin-bottom'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        'top' + (<span>'margin-top'</span> + <span>'border-top-width'</span> + 
                        <span>'padding-top'</span> + 'height' + <span>'padding-bottom'</span> + 
                        <span>'border-bottom-width'</span> + <span>'margin-bottom'</span>) + 'right' = 
                        height of containing block
                    </code>
                </p>
            </li>
        </ul>
        <p>otherwise, 'bottom' is a percentage and 'top' is a length:</p>
        <ul>
            <li>
                If 'height' is not ''auto'', the values are over constrained. Ignore 'bottom' and 
                use the equality at the beginning of this section to derive the computed value for 'height'.
            </li>
            <li>
                Otherwise, 'height' is ''auto''. Derive 'bottom' and 'height' under the following constraints:
                <p>
                    <code>
                        computed value of 'bottom' = 'bottom' percentage * height of containing block - 
                        'bottom' percentage * (<span>'margin-top'</span> + <span>'border-top-width'</span> 
                        + <span>'padding-top'</span> + 'height' + <span>'padding-bottom'</span> + 
                        <span>'border-bottom-width'</span> + <span>'margin-bottom'</span>)
                    </code>
                </p>
                <p>
                    <code>
                        'top' + (<span>'margin-top'</span> + <span>'border-top-width'</span> + 
                        <span>'padding-top'</span> + 'height' + <span>'padding-bottom'</span> + 
                        <span>'border-bottom-width'</span> + <span>'margin-bottom'</span>) + 'bottom' = 
                        height of containing block
                    </code>
                </p>
            </li>
        </ul>
        <!-- End section: The height of a 'center' positioned, non-replaced element -->

        <h3 id="height-of-absolute-replaced-elements">The height of absolute, page or fixed positioned, replaced element</h3>
        <p>
            If 'height' and 'width' both have computed values of ''auto'' and the element also has an 
            intrinsic height, then that intrinsic height is the used value of 'height'.
        </p>
        <p>
            Otherwise, if 'height' has a computed value of ''auto'' and the element has an intrinsic 
            ratio then the used value of 'height' is:
        </p>
        <p><code>(used width) / (intrinsic ratio)</code></p>
        <p>
            Otherwise, if 'height' has a computed value of ''auto'' and the element has an intrinsic 
            height, then that intrinsic height is the used value of 'height'.
        </p>
        <p>
            Otherwise, if 'height' has a computed value of ''auto'', but none of the conditions above 
            are met, then the used value of 'height' must be set to the height of the largest 
            rectangle that has a 2:1 ratio, has a height not greater than ''150px'', and has a width not 
            greater than the device width.
        </p>
        <p>
            After establishing the 'height', in order to position the replaced element, apply the 
            following rules as appropriate.
        </p>
        <ol>
            <li>
                If both 'top' and 'bottom' have the value ''auto'', replace 'top' with the element&#39;s 
                static position.
            </li>
            <li>If 'bottom' is ''auto'', replace any ''auto'' on 'margin-top' or 'margin-bottom' with ''0''.</li>
            <li>
                If at this point both 'margin-top' and 'margin-bottom' are still ''auto'', solve the 
                equation under the extra constraint that the two margins must get equal values.
            </li>
            <li>If at this point there is only one ''auto'' remaining, solve the equation for that value.</li>
            <li>
                If at this point the values are over-constrained, ignore the value for 'bottom' and 
                solve for that value.
            </li>
        </ol>
        <!-- End section: The height of absolute, page or fixed positioned, replaced element -->

        <h3 id="height-of-center-replaced-elements">The height of a center positioned, replaced element</h3>
        <p></p>
        <!-- End section: The height of a 'center' positioned, replaced element -->

        <h3 id="auto-height-for-block-formatting-context-roots">'Auto' heights for block formatting context roots</h3>
        <p>
            In certain cases (see, e.g., <a href="#height-of-absolute-non-replaced-elements">The height of absolute, page or fixed positioned, non-replaced element</a> above), 
            the height of an element that establishes a block formatting context is computed as follows:
        </p>
        <p>
            If it only has inline-level children, the height is the distance between the top of the 
            topmost line box and the bottom of the bottommost line box.
        </p>
        <p>
            If it has block-level children, 
            the height is the distance between the top margin-edge of the topmost block-level child box 
            and the bottom margin-edge of the bottommost block-level child box.
        </p>
        <p>
            Absolutely positioned children are ignored, and relatively positioned boxes are considered without their offset. 
            Note that the child box may be an <a href="http://www.w3.org/TR/CSS2/visuren.html#anonymous-block-level">anonymous block box</a>.
        </p>
        <p>
            In addition, if the element has any floating descendants whose bottom margin edge is 
            below the element&#39;s bottom content edge, then the height is increased to include those 
            edges. Only non-positioned <span title="floats">floats</span> that participate in this block formatting context are 
            taken into account, e.g., <span title="floats">floats</span> inside absolutely positioned descendants or other 
            <span title="floats">floats</span> are not.
        </p>
        <!-- End section: 'Auto' heights for block formatting context roots -->
        <!-- End section: Sizing and positioning details -->

        <h2 id="relationship-between-display-position-float">Relationships between 'display', 'position', and 'float'</h2>
        <p>
            The three properties that affect box generation and layout &mdash; 'display', 
            'position', and 'float' &mdash; interact as follows:
        </p>
        <ol>
            <li>
                If 'display' has the value ''none'', then 'position' and 'float' do not apply. In this 
                case, the element generates no box.
            </li>
            <li>
                Otherwise, if 'position' has the value <span title="'position'!!''absolute''">''absolute''</span>, <span title="'position'!!''page''">''page''</span> or <span title="'position'!!''fixed''">''fixed''</span>, and the value 
                of 'float' is ''left'' or ''right'', the box is absolutely positioned and the 
                computed value of 'float' is ''none''. The 'display' is set according to the table 
                below. Positioning of the box will determined by the 'top', 'right', 'bottom' and 
                'left' properties and the box&#39;s <span>containing block</span>.
            </li>
            <li>
                Otherwise, if 'float' is other than ''none'', the box is <span title="floats">floated</span> and 'display' is set 
                according to the table below.
            </li>
            <li>
                Otherwise, if the element is the root element, 'display' is set according to the 
                table below. 
            </li>
            <li>
                Otherwise, the remaining 'display' property values apply as specified. 
            </li>
        </ol>
        <table class="relationship-table">
            <tr>
                <th>Specified value</th>
                <th>Computed value</th>
            </tr>
            <tr>
                <td>inline-table </td>
                <td>table</td>
            </tr>
            <tr>
                <td>
                    inline, <span>table-row-group</span>, <span>table-column</span>, <span>table-column-group</span>, 
                    <span>table-header-group</span>, <span>table-footer-group</span>, <span>table-row</span>, 
                    <span>table-cell</span>, <span>table-caption</span>, <span>inline-block</span>
                </td>
                <td>block</td>
            </tr>
            <tr>
                <td>others </td>
                <td><span>same as specified</span></td>
            </tr>
        </table>
        <!-- End section: Relationships between 'display', 'position', and 'float' -->

        <h2 id="comparison-of-flow-floats-absolute-positioning">Comparison of normal flow, floats, and absolute positioning</h2>
        <p><em>This section is not normative.</em></p>
        <p>
            To illustrate the differences between <span>normal flow</span>, <span title="relative positioning">relative positioning</span>, <span>floats</span>, and 
            absolute positioning, we provide a series of examples based on the following HTML:
        </p>
        <div class="example">
<pre><code class="html">
&lt;!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Comparison of positioning schemes&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Beginning of p contents.
        &lt;span id="outer"&gt; Start of outer contents.
        &lt;span id="inner"&gt; Inner contents.&lt;/span&gt;
        End of outer contents.&lt;/span&gt;
        End of p contents.
    &lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
        <p>In this document, we assume the following rules:</p>
<pre><code class="css">
body { display: block; font-size:12px; line-height: 200%; 
        width: 400px; height: 400px }
p    { display: block }
span { display: inline }
</code></pre>
        </div>
        <p>
            The final positions of boxes generated by the <em>outer</em> and <em>inner</em> elements 
            vary in each example. In each illustration, the numbers to the left of the illustration 
            indicate the <span>normal flow</span> position of the double-spaced (for clarity) lines.
        </p>
        <p class="note">
            Note. The diagrams in this section are illustrative and not to scale. They are meant to 
            highlight the differences between the various <span>positioning schemes</span>, and are 
            not intended to be reference renderings of the examples given.
        </p>
        <h3 id="normal-flow-example">Normal flow</h3>
        <p>
            Consider the following CSS declarations for <em>outer</em> and <em>inner</em> that do 
            not alter the <span>normal flow</span> of boxes:
        </p>
        <div class="example">
<pre><code class="css">
#outer { color: red }
#inner { color: blue }
</code></pre>
        </div>
        <p>
            The P element contains all inline content: <a href="http://www.w3.org/TR/CSS2/visuren.html#anonymous">anonymous inline text</a> and 
            two SPAN elements. Therefore, all of the content will be laid out in an inline 
            formatting context, within a <span>containing block</span> established by the P element, producing 
            something like:
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-generic.png" alt="Image illustrating the normal flow of text between parent and sibling boxes.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-generic" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-generic-desc.html" title="Long description for normal flow example">[D]</a></span>
            </p>
        </div>
        <!-- End section: Normal flow -->
        
        <h3 id="rel-position">Relative positioning</h3>
        <p>To see the effect of <span title="relative positioning">relative positioning</span>, we specify:</p>
        <div class="example">
<pre><code class="css">
#outer { position: relative; top: -12px; color: red }
#inner { position: relative; top: 12px; color: blue }
</code></pre>
            </div>
            <p>
                Text flows normally up to the <em>outer</em> element. The <em>outer</em> text is 
                then flowed into its <span>normal flow</span> position and dimensions at the end of line 1. Then, 
                the inline boxes containing the text (distributed over three lines) are shifted as a 
                unit by ''-12px'' (upwards).
            </p>
            <p>
                The contents of <em>inner</em>, as a child of <em>outer</em>, would normally flow 
                immediately after the words "of outer contents" (on line 1.5). However, the <em>inner</em> 
                contents are themselves offset relative to the <em>outer</em> contents by ''12px'' 
                (downwards), back to their original position on line 2.
            </p>
            <p class="note">
                Note that the content following <em>outer</em> is not affected by the relative 
                positioning of <em>outer</em>.
            </p>
            <div class="figure">
                <p>
                    <img src="http://www.w3.org/TR/CSS2/images/flow-relative.png" alt="Image illustrating the effects of relative positioning on a box's content.">
                    <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-relative" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-relative-desc.html" title="Long description for relative positioning example">[D]</a></span>
                </p>
            </div>
            <p class="note">
                Note also that had the offset of <em>outer</em> been ''-24px'', the text  of <em>outer</em> 
                and the body text would have overlapped.
            </p>
        <!-- End section: Relative positioning -->
        
        <h3 id="floating-box">Floating a box</h3>
        <p>
            Now consider the effect of <a href="http://www.w3.org/TR/CSS2/visuren.html#floats">floating</a> the 
            <em>inner</em> element&#39;s text to the right by means of the following rules:
        </p>
        <div class="example">
<pre><code class="css">
#outer { color: red }
#inner { float: right; width: 130px; color: blue }
</code></pre>
        </div>
        <p>
            Text flows normally up to the <em>inner</em> box, which is pulled out of the flow 
            and <span title="floats">floated</span> to the right margin (its 'width' has been assigned explicitly). Line 
            boxes to the left of the float are shortened, and the document&#39;s remaining text 
            flows into them.
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-float.png" alt="Image illustrating the effects of floating a box.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-float" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-float-desc.html" title="Long description of example illustrating floating">[D]</a></span>
            </p>
        </div>
        <p>
            To show the effect of the 'clear' property, we add a <em>sibling</em> element to the 
            example:
        </p>
        <div class="example">
<pre><code class="html">
&lt;!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Comparison of positioning schemes II&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;p&gt;
        Beginning of p contents.
        &lt;span id="outer"&gt; Start of outer contents.
        &lt;span id="inner"&gt; Inner contents.&lt;/span&gt;
        &lt;span id="sibling"&gt; Sibling contents.&lt;/span&gt;
        End of outer contents.&lt;/span&gt;
        End of p contents.
    &lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
            <p>The following rules:</p>
<pre><code class="css">
#inner { float: right; width: 130px; color: blue }
#sibling { color: red }
</code></pre>
        <p>
            cause the <em>inner</em> box to float to the right as before and the document&#39;s 
            remaining text to flow into the vacated space:
        </p>
        </div>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-clear.png" alt="Image illustrating the effects of floating a box without setting the clear property to control the flow of text around the box.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-clear" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-clear-desc.html" title="Long description of example illustrating floating without clear">[D]</a></span>
            </p>
        </div>
        <p>
            However, if the 'clear' property on the <em>sibling</em> element is set to 'right' 
            (i.e., the generated <em>sibling</em> box will not accept a position next to 
            <span title="floats">floating boxes</span> to its right), the <em>sibling</em> content begins to flow below the 
            float:
        </p>
        <div class="example">
<pre><code class="css">
#inner { float: right; width: 130px; color: blue }
#sibling { clear: right; color: red }
</code></pre>
        </div>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-clear2.png" alt="Image illustrating the effects of floating an element with setting the clear property to control the flow of text around the element.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-clear2" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-clear2-desc.html" title="Long description of example illustrating floating with clear">[D]</a></span>
            </p>
        </div>
        <!-- End section: floating a box -->

        <h3 id="abs-positioning">Absolute positioning</h3>
        <p>
            Next, we consider the effect of absolute positioning. Consider the following CSS 
            declarations for <em>outer</em> and <em>inner</em>:
        </p>
        <div class="example">
<pre><code class="css">
#outer {
    position: absolute;
    top: 200px; left: 200px;
    width: 200px;
    color: red;
}
#inner { color: blue }
</code></pre>
        </div>
        <p>
            which cause the top of the <em>outer</em> box to be positioned with respect to its 
            <span>containing block</span>. The <span>containing block</span> for a positioned box is established by the 
            nearest positioned ancestor (or, if none exists, the <span>initial containing block</span>, as in 
            our example). The top side of the <em>outer</em> box is ''200px'' below the top of the 
            <span>containing block</span> and the left side is ''200px'' from the left side. The child box of 
            <em>outer</em> is flowed normally with respect to its parent.
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-absolute.png" alt="Image illustrating the effects of absolutely positioning a box.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-absolute" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-absolute-desc.html" title="Long description for example illustrating absolute positioning">[D]</a></span>
            </p>
        </div>
        <p>
            The following example shows an absolutely positioned box that is a child of a relatively 
            positioned box. Although the parent <em>outer</em> box is not actually offset, setting 
            its 'position' property to <span title="'position'!!''relative''">''relative''</span> means that its box may serve as the containing 
            block for positioned descendants. Since the <em>outer</em> box is an inline box that is 
            split across several lines, the first inline box&#39;s top and left edges (depicted by thick 
            dashed lines in the illustration below) serve as references for 'top' and 'left' offsets.
        </p>
        <div class="example">
<pre><code class="css">
#outer {
    position: relative;
    color: red
}
#inner {
    position: absolute;
    top: 200px; left: -100px;
    height: 130px; width: 130px;
    color: blue;
}
</code></pre>
        </div>
        <p>This results in something like the following:</p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-abs-rel.png" alt="Image illustrating the effects of absolutely positioning a box with respect to a containing block.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-abs-rel" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-abs-rel-desc.html" title="Long description for example illustrating positioning with respect to a positioned ancestor">[D]</a></span>
            </p>
        </div>
        <p>If we do not position the <em>outer</em> box:</p>
        <div class="example">
<pre><code class="css">
#outer { color: red }
#inner {
    position: absolute;
    top: 200px; left: -100px;
    height: 130px; width: 130px;
    color: blue;
}
</code></pre>
        </div>
        <p>
            the <span>containing block</span> for <em>inner</em> becomes the <span>initial containing block</span> (in our
            example). The following illustration shows where the <em>inner</em> box would end up in 
            this case.
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-static.png" alt="Image illustrating the effects of absolutely positioning a box with respect to a containing block established by a normally positioned parent.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-static-desc.html" title="Long description illustrating absolute positioning with respect to the initial containing block">[D]</a></span>
            </p>
        </div>
        <p>
            Relative and absolute positioning may be used to implement change bars, as shown in 
            the following example. The following fragment:
        </p>
        <div class="example">
<pre><code class="html">
&lt;p style="position: relative; margin-right: 10px; left: 10px;"&gt;
I used two red hyphens to serve as a change bar. They
will "float" to the left of the line containing THIS
&lt;span style="position: absolute; top: auto; left: -1em; color: red;"&gt;--&lt;/span&gt;
word.&lt;/p&gt;
</code></pre>
        </div>
        <p>might result in something like:</p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/changebar.png" alt="Image illustrating the use of floats to create a changebar effect.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-changebar" href="http://www.w3.org/TR/CSS2/images/longdesc/changebar-desc.html" title="Long description for change bar example">[D]</a></span>
            </p>
        </div>
        <p>
            First, the paragraph (whose <span>containing block</span> sides are shown in the illustration) is 
            flowed normally. Then it is offset ''10px'' from the left edge of the <span>containing block</span> 
            (thus, a right margin of ''10px'' has been reserved in anticipation of the offset). 
            The two hyphens acting as change bars are taken out of the flow and positioned at 
            the current line (due to 'top: auto'), ''-1em'' from the left edge of its containing 
            block (established by the P in its final position).  The result is that the change 
            bars seem to "float" to the left of the current line.
        </p>
        <!-- End section: Absolute positoining -->

        <h3 id="page-pos">Page positioning</h3>
        <p>
            Finally, we consider the effect of page positioning. Consider the following CSS 
            declarations for <em>outer</em> and <em>inner</em>:
        </p>
        <div class="example">
<pre><code class="css">
#outer { 
    position: page;
    top: 200px; left: 200px;
    width: 200px;
    color: red;
}
#inner { color: blue }
</code></pre>
        </div>
        <p>
            which cause the top of the <em>outer</em> box to be positioned with respect to its 
            <span>containing block</span>. The <span>containing block</span> for a page positioned box is always established 
            by the <span>initial containing block</span>. The top side of the <em>outer</em> box is ''200px'' below 
            the top of the <span>initial containing block</span> and the left side is ''200px'' from the left side. 
            The child box of <em>outer</em> is flowed normally with respect to its parent.
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-absolute.png" alt="Image illustrating the effects of absolutely positioning a box.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-absolute" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-absolute-desc.html" title="Long description for example illustrating absolute positioning">[D]</a></span>
            </p>
        </div>
        <p>
            The following example shows a page positioned box that is a child of a relatively 
            positioned box. Although the parent <em>outer box</em> is setting its 'position' 
            property to <span title="'position'!!''relative''">''relative''</span> this <em>outer box</em> box does not serve as the containing 
            block for page positioned descendants. Since the <em>inner</em> box is a page positioned 
            element its <span>containing block</span> is not the <span title="relative positioning">relative positioned</span> <em>outer box</em> box, page 
            positioned elements are positioned from the <span>initial containing block</span>, in this case the 
            top and left edges of the illustration itself.
        </p>
        <div class="example">
<pre><code class="css">
#outer { 
    position: relative;
    color: red
}
#inner { 
    position: page;
    top: 200px; left: -100px;
    height: 130px; width: 130px;
    color: blue;
}
</code></pre>
        </div>
        <p>This results in something like the following:</p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-static.png" alt="Image illustrating the effects of page positioning a box with respect to the initial containing block.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-static-desc.html" title="Long description illustrating page positioning with respect to the initial containing block.">[D]</a></span>
            </p>
        </div>
        <p>If we do not position the <em>outer</em> box:</p>
        <div class="example">
<pre><code class="css">
#outer { color: red }
#inner {
    position: page;
    top: 200px; left: -100px;
    height: 130px; width: 130px;
    color: blue;
}
</code></pre>
        </div>
        <p>
            the <span>containing block</span> for <em>inner</em> becomes the <span>initial containing block</span>. The 
            following illustration shows where the <em>inner</em> box would end up in this case.
        </p>
        <div class="figure">
            <p>
                <img src="http://www.w3.org/TR/CSS2/images/flow-static.png" alt="Image illustrating the effects of page positioning a box with respect to the initial containing block.">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/flow-static-desc.html" title="Long description illustrating page positioning with respect to the initial containing block.">[D]</a></span>
            </p>
        </div>
        <!-- End section: Page positioning -->
        <!-- End section: Comparison of normal flow, floats, and absolute positioning -->

        <h2 id="clip-property">Clipping: the 'clip' property</h2>
        <p>
            A <span class="index-def">clipping region</span> defines what portion of an element&#39;s border box is 
            visible. By default, the element is not clipped. However, the clipping region may be 
            explicitly set with the 'clip' property.
        </p>
        <table id="propdef-clip" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'clip'">clip</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;shape&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>absolutely positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>
                    ''auto'' if specified as ''auto'', otherwise a rectangle with four values, each of 
                    which is ''auto'' if specified as ''auto'' and the computed length otherwise
                </td>
            </tr>
        </table>
        <p>
            The 'clip' property applies only to absolutely positioned elements. Values have the 
            following meanings:
        </p>
        <dl>
            <dt><dfn title="'clip'!!''auto''">auto</dfn></dt>
            <dd>The element does not clip.</dd>
            <dt>&lt;shape&gt;</dt>
            <dd>
                <dl>
                    <dt><dfn title="'clip'!!''rect()''">rect(&lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;, &lt;left&gt;)</dfn></dt>
                    <dd>
                        <p>
                            Each of the arguments &lt;top&gt; and &lt;bottom&gt; specify offsets 
                            from the top border edge of the box, and &lt;right&gt;, and &lt;left&gt; 
                            specify offsets from the left border edge of the box. Authors should 
                            separate offset values with commas. User agents must support separation 
                            with commas, but may also support separation without commas (but not a 
                            combination), because a previous revision of this specification was 
                            ambiguous in this respect.
                        </p>
                        <p>
                            &lt;top&gt;, &lt;right&gt;,&lt;bottom&gt;, and &lt;left&gt; may either 
                            have a &lt;length&gt; value or ''auto''. Negative lengths are permitted. 
                            The value ''auto'' means that a given edge of the clipping region will be 
                            the same as the edge of the element&#39;s generated border box (i.e., ''auto'' 
                            means the same as ''0'' for &lt;top&gt; and &lt;left&gt;, the same as the 
                            used value of the height plus the sum of vertical padding and border 
                            widths for &lt;bottom&gt;, and the same as the used value of the width 
                            plus the sum of the horizontal padding and border widths for &lt;right&gt;, 
                            such that four ''auto'' values result in the clipping region being the 
                            same as the element&#39;s border box).
                        </p>
                        <p>
                            When coordinates are rounded to pixel coordinates, care should be taken 
                            that no pixels remain visible when &lt;left&gt; and &lt;right&gt; have 
                            the same value (or &lt;top&gt; and &lt;bottom&gt; have the same value), 
                            and conversely that no pixels within the element&#39;s border box remain 
                            hidden when these values are ''auto''.
                        </p>
                    </dd>
                    <dt><dfn title="'clip'!!''inset()''">inset(&lt;top&gt;, &lt;right&gt;, &lt;bottom&gt;, &lt;left&gt;)</dfn></dt>
                    <dd>
                        <p>
                            Similar to ''rect()'', except that the values are offsets relative to the 
                            respective edges of the element.
                        </p>
                        <div class="figure">
                            <p>
                                <img alt="diagram of rect() vs inset-rect()" src="http://www.w3.org/TR/2002/WD-css3-box-20021024/clip.png">
                                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-flow-static" href="http://www.w3.org/TR/CSS2/images/longdesc/rect-inset-rect-desc.html" title="Long description illustrating the differences between the rect() and inset() values.">[D]</a></span>
                            </p>
                            <p class="caption">Diagram of the rectangles defined by ''rect()'' and ''inset()''.</p>
                        </div>
                    </dd>
                </dl>
            </dd>
        </dl>
        <p>
            An element&#39;s clipping region clips out any aspect of the element (e.g., content, 
            children, background, borders, text decoration, outline and visible scrolling 
            mechanism &ndash; if any) that is outside the clipping region. Content that has been 
            clipped does not cause overflow.
        </p>
        <p>
            The element&#39;s ancestors may also clip portions of their content (e.g., via their own 
            'clip' property and/or if their 'overflow' property is not ''visible''); what is 
            rendered is the cumulative intersection.
        </p>
        <p>
            If the clipping region exceeds the bounds of the user agent&#39;s document window, 
            content may be clipped to that window by the native operating environment.
        </p>
        <div class="example">
            <p>The following two rules:</p>
<pre><code class="css">
p#one { clip: rect(5px, 40px, 45px, 5px); }
p#two { clip: rect(5px, 55px, 45px, 5px); }
</code></pre>
            <p>
                and assuming both Ps are 50 by 55 px, will create, respectively, the rectangular 
                clipping regions delimited by the dashed lines in the following illustrations:
            </p>
            <div class="figure">
                <p><img src="http://www.w3.org/TR/CSS2/images/clip.png" alt="Two clipping regions">
                <span class="dlink">&nbsp;&nbsp;&nbsp;<a name="img-clip" href="http://www.w3.org/TR/CSS2/images/longdesc/clip-desc.html" title="Long description for example of clipping region">[D]</a></span></p>
            </div>
            <p>The following rule:</p>
<pre><code class="css">
img { clip: rect(5px, 40px, 45px, 5px); }
</code></pre>
            <p>
                will create the rectangular clipping region delimited by the dashed line in the 
                following illustration:
            </p>
            <div class="figure">
                <p><img alt="A clipping region" src="http://www.w3.org/TR/2001/WD-css3-box-20010726/clip2.png">
                    <span class="dlink"><a name="img-clip" href="http://www.w3.org/TR/CSS2/images/longdesc/clip-desc.html" title="Long description for example of clipping region">[D]</a></span>
                </p>
                <p class="caption">An image of 50 by 55 pixels is clipped with a clipping mask of 35 by 40 pixels.</p>
            </div>
        </div>
        <p class="note">
            Note in CSS, all clipping regions are rectangular. We anticipate future extensions 
            to permit non-rectangular clipping.
        </p>
        <!-- End section: Clipping: the clip property -->

        <h2 id="layered-presentation">Layered presentation</h2>
        <p>
            <em>In the following sections, the expression "in front of" means closer to the user as the 
            user faces the screen.</em>
        </p>
        <p>
            In CSS, each box has a position in three dimensions. In addition to their horizontal and 
            vertical positions, boxes lie along a "z-axis" and are formatted one on top of the other. 
            Z-axis positions are particularly relevant when boxes overlap visually. This section 
            discusses how boxes may be positioned along the z-axis.
        </p>
        <p>
            Each box belongs to one <dfn>stacking context</dfn>. Each box in a given stacking context 
            has an integer <dfn>stack level</dfn>, which is its position on the z-axis 
            relative to other boxes in the same stacking context. Boxes with greater stack levels are 
            always formatted in front of boxes with lower stack levels. Boxes may have negative stack 
            levels. Boxes with the same stack level in a stacking context are stacked bottom-to-top 
            according to document tree order.
        </p>
        <p>
            The root element creates a <dfn>root stacking context</dfn>, but other elements may establish 
            <dfn>local stacking contexts</dfn>. Stacking contexts are inherited. A local stacking 
            context is atomic; boxes in other stacking contexts may not come between any of its boxes.
        </p>
        <p>
            An element that establishes a local stacking context generates a box that has two stack 
            levels: one for the stacking context it creates (always ''0'') and 
            one for the stacking context to which it belongs (given by the 'z-index' property).
        </p>
        <p>
            An element&#39;s box has the same stack level as its parent&#39;s box unless given a different stack 
            level with the 'z-index' property.
        </p>
        <table id="propdef-z-index" class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'z-index'">z-index</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;integer&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>positioned elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>as specified</td>
            </tr>
        </table>
        <p>For a positioned box, the 'z-index' property specifies:</p>
        <ol>
            <li>The stack level of the box in the current stacking context.</li>
            <li>Whether the box establishes a stacking context.</li>
        </ol>
        <p>Values have the following meanings:</p>
        <dl>
            <dt><dfn title="'z-index'!!''&lt;integer&gt;''">&lt;integer&gt;</dfn></dt>
            <dd>
                This integer is the stack level of the generated box in the current stacking 
                context. The box also establishes a new stacking context.</dd>
            <dt><dfn title="'z-index'!!''auto''">auto</dfn></dt>
            <dd>
                The stack level of the generated box in the current stacking context is 0. The box 
                does not establish a new stacking context unless it is the root element.
            </dd>
        </dl>
        <p>
            In the following example, the stack levels of the boxes (named with their "id" 
            attributes) are: "text2"=0, "image"=1, "text3"=2, and "text1"=3. The "text2" stack level 
            is inherited from the root box. The others are specified with the 'z-index' property.
        </p>
        <div class="example">
<pre><code class="html">
&lt;!DOCTYPE html public "-//W3C//DTD HTML 4.01//EN"&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Z-order positioning&lt;/title&gt;
        &lt;style type="text/css"&gt;
            .pile {
            position: absolute;
            left: 2in;
            top: 2in;
            width: 3in;
            height: 3in;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;
            &lt;img id="image" class="pile" 
                src="butterfly.png" alt="A butterfly image"
                style="z-index: 1"&gt;
        &lt;div id="text1" class="pile" 
                style="z-index: 3"&gt;
            This text will overlay the butterfly image.
        &lt;/div&gt;
        &lt;div id="text2"&gt;
            This text will be beneath everything.
        &lt;/div&gt;
        &lt;div id="text3" class="pile" 
                style="z-index: 2"&gt;
            This text will underlay text1, but overlay the butterfly image
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
            <p>
                This example demonstrates the notion of <em>transparency</em>. The default behavior of 
                the background is to allow boxes behind it to be visible. In the example, each box 
                transparently overlays the boxes below it. This behavior can be overridden by using one 
                of the existing <a href="http://www.w3.org/TR/CSS2/colors.html#background-properties">background properties</a>.
            </p>
        </div>
        <!-- End section: Layered presentation -->

        <h2 id="det-stacking-context">Detailed stacking context</h2>
        <h3 id="definitions-stack">Definitions</h3>
        <dl>
            <dt>Tree Order</dt>
            <dd>
                Preorder depth-first traversal of the <em>rendering</em> tree, in logical (not 
                visual) order for bidirectional content, after taking into account properties 
                that move boxes around.
            </dd>
            <dt>Element</dt>
            <dd>
                In this description, "element" refers to actual elements, pseudo-elements, and 
                anonymous boxes. Pseudo-elements and anonymous boxes are treated as descendants 
                in the appropriate places. For example, an outside list marker comes before an 
                adjoining '::before' box in the line box, which comes before the content of the 
                box, and so forth.
            </dd>
        </dl>
        <!-- End section: Definitions -->

        <h3 id="painting-order">Painting order</h3>
        <p>
            The bottom of the stack is the furthest from the user, the top of the stack is the 
            nearest to the user:
        </p>
        <div class="figure">
            <p><img alt="A stacking context with four layers" src="stack.png"></p>
            <p class="caption">Schematic diagram of a stacking context with four layers.</p>
        </div>
        <p>
            The stacking context background and most negative positioned stacking contexts are at 
            the bottom of the stack, while the most positive positioned stacking contexts are at the 
            top of the stack.
        </p>
        <p>
            The canvas is transparent if contained within another, and given a UA-defined color if 
            it is not. It is infinite in extent and contains the root element. Initially, the 
            <span>viewport</span> is anchored with its top left corner at the canvas origin.
        </p>
        <p>
            The painting order order for the descendants of an element generating a stacking context 
            (see the 'z-index' property) is:
        </p>
        <ol>
            <li>If the element is a root element:
                <ol>
                    <li>background color of element over the entire canvas.</li>
                    <li>
                        background image of element, over the entire canvas, anchored at the origin 
                        that would be used if it was painted for the root element.
                    </li>
                </ol>
            </li>
            <li>
                If the element is a block, list-item, or other block equivalent:
                <ol>
                    <li>background color of element unless it is the root element.</li>
                    <li>background image of element unless it is the root element.</li>
                    <li>border of element.</li>
                </ol>
                Otherwise, if the element is a block-level table:
                <ol>
                    <li>table backgrounds (color then image) unless it is the root element.</li>
                    <li>column group backgrounds (color then image).</li>
                    <li>column backgrounds (color then image).</li>
                    <li>row group backgrounds (color then image).</li>
                    <li>row backgrounds (color then image).</li>
                    <li>cell backgrounds (color then image).</li>
                    <li>all table borders (in tree order for separated borders).</li>
                </ol>
            </li>
            <li>
                Stacking contexts formed by positioned descendants with negative z-indices 
                (excluding 0) in z-index order (most negative first) then tree order.
            </li>
            <li>
                For all its in-flow, non-positioned, block-level descendants in tree order: If the 
                element is a block, list-item, or other block equivalent:
                <ol>
                    <li>background color of element.</li>
                    <li>background image of element.</li>
                    <li>border of element.</li>
                </ol>
                Otherwise, the element is a table:
                <ol>
                    <li>table backgrounds (color then image).</li>
                    <li>column group backgrounds (color then image).</li>
                    <li>column backgrounds (color then image).</li>
                    <li>row group backgrounds (color then image).</li>
                    <li>row backgrounds (color then image).</li>
                    <li>cell backgrounds (color then image).</li>
                    <li>all table borders (in tree order for separated borders).</li>
                </ol>
            </li>
            <li>
                All non-positioned <span title="floats">floating</span> descendants, in tree order. For each one of these, treat 
                the element as if it created a new stacking context, but any positioned descendants 
                and descendants which actually create a new stacking context are considered 
                part of the parent stacking context, not this new one.
            </li>
            <li>If the element is an inline element that generates a stacking context, then:
                <ol>
                    <li>For each line box that the element is in:
                        <ol>
                            <li>
                                Jump to <a href="#each-box">7.2.1</a> for the box(es) of the element 
                                in that line box (in tree order).
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
            <li>
                Otherwise: first for the element, then for all its in-flow, non-positioned, 
                block-level descendants in tree order:
                <ol>
                    <li>
                        If the element is a block-level replaced element, then: the replaced 
                        content, atomically.
                    </li>
                    <li>Otherwise, for each line box of that element:
                        <ol>
                            <li id="each-box">
                                For each box that is a child of that element, in that line box, in 
                                tree order:
                                <ol>
                                    <li>background color of element. </li>
                                    <li>background image of element</li>
                                    <li>border of element. </li>
                                    <li>For inline elements:
                                        <ol>
                                            <li>
                                                For all the elements in-flow, non-positioned, 
                                                inline-level children that are in this line box, and 
                                                all runs of text inside the element that is on this 
                                                line box, in tree order:
                                                <ol>
                                                    <li>If this is a run of text, then:
                                                        <ol>
                                                            <li>
                                                                any underlining affecting the text 
                                                                of the element, in tree order of the 
                                                                elements applying the underlining 
                                                                (such that the deepest element&#39;s 
                                                                underlining, if any, is painted 
                                                                topmost and the root element&#39;s 
                                                                underlining, if any, is drawn 
                                                                bottommost).
                                                            </li>
                                                            <li>
                                                                any overlining affecting the text of 
                                                                the element, in tree order of the 
                                                                elements applying the overlining 
                                                                (such that the deepest element&#39;s 
                                                                overlining, if any, is painted 
                                                                topmost and the root element&#39;s 
                                                                overlining, if any, is drawn 
                                                                bottommost). 
                                                            </li>
                                                            <li>the text</li>
                                                            <li>
                                                                any line-through affecting the text 
                                                                of the element, in tree order of the 
                                                                elements applying the line-through 
                                                                (such that the deepest element&#39;s 
                                                                line-through, if any, is painted 
                                                                topmost and the root element&#39;s 
                                                                line-through, if any, is drawn 
                                                                bottommost).
                                                            </li>
                                                        </ol>
                                                    </li>
                                                    <li>
                                                        Otherwise, jump to <a href="#each-box">7.2.1</a> 
                                                        for that element
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                        For inline-block and inline-table elements:
                                        <ol>
                                            <li>
                                                For each one of these, treat the element as if it 
                                                created a new stacking context, but any positioned 
                                                descendants and descendants which actually create a 
                                                new stacking context are considered part of the 
                                                parent stacking context, not this new one. 
                                            </li>
                                        </ol>
                                        For inline-level replaced elements: 
                                        <ol>
                                            <li>the replaced content, atomically.</li>
                                        </ol>
                                    </li>
                                </ol>
                                <p class="note">
                                    Note, some of the boxes may have been generated by line 
                                    splitting or the Unicode bidirectional algorithm.
                                </p>
                            </li>
                            <li>Optionally, the outline of the element (see <a href="#stack-order-step-ten">10 below</a>).</li>
                        </ol>
                    </li>
                    <li>Optionally, if the element is block-level, the outline of the element (see <a href="#stack-order-step-ten">10 below</a>).</li>
                </ol>
            </li>
            <li>
                All positioned descendants with 'z-index: auto' or 'z-index: 0', in tree order. For 
                those with 'z-index: auto', treat the element as if it created a new stacking 
                context, but any positioned descendants and descendants which actually create a new 
                stacking context should be considered part of the parent stacking context, not this 
                new one. For those with 'z-index: 0' treat the stacking context generated atomically.
            </li>
            <li>
                Stacking contexts formed by positioned descendants with z-indices greater than or 
                equal to 1 in z-index order (smallest first) then tree order.
            </li>
            <li id="stack-order-step-ten">
                Finally, implementations that do not draw outlines in steps above must draw outlines 
                from this stacking context at this stage. (It is recommended to draw outlines in 
                this step and not in the steps above.)
            </li>
        </ol>
        <p class="issue">Need to account for new stacking context creation by opacity and transforms.</p>
        <!-- End section: Painting order -->

        <h3 id="stacking-notes">Notes</h3>
        <p>The background of the root element is only painted once, over the whole canvas.</p>
        <p>
            While the backgrounds of bidirectional inlines are painted in tree order, they are 
            positioned in visual order. Since the positioning of inline backgrounds is unspecified 
            in CSS, the exact result of these two requirements is UA-defined. A future version of 
            CSS may define this in more detail.
        </p>
        <!-- End section: Notes -->
        <!-- End section: Detailed stacking context -->

        <h2 id="conformance">Conformance</h2>
        <h3 id="conventions">Document Conventions</h3>
        <p>
            Conformance requirements are expressed with a combination of descriptive assertions and 
            RFC 2119 terminology. The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", 
            "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in the 
            normative parts of this document are to be interpreted as described in RFC 2119. 
            However, for readability, these words do not appear in all uppercase letters in this 
            specification.
        </p>
        <p>
            All of the text of this specification is normative except sections explicitly marked as 
            non-normative, examples, and notes. [[!RFC2119]]
        </p>
        <p>
            Examples in this specification are introduced with the words “for example” or are set 
            apart from the normative text like this:
        </p>
        <div class="example">
            <p>This is an example of an informative example.</p>
        </div>
        <p>
            Informative notes begin with the word “Note” and are set apart from the normative text 
            like this:
        </p>
        <p class="note">Note, this is an informative note.</p>

        <h3 id="conformance-classes">Conformance Classes</h3>
        <p>Conformance to CSS Positioned Layout Module Level 3 is defined for three conformance classes:</p>
        <dl>
            <dt><dfn title="style sheet!!as conformance class">style sheet</dfn></dt>
            <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style sheet</a>.</dd>
            <dt><dfn>renderer</dfn></dt>
            <dd>
                A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that 
                interprets the semantics of a style sheet and renders documents that use them.
            </dd>
            <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
            <dd>
                A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes a 
                style sheet.
            </dd>
        </dl>
            <p>A style sheet is conformant to CSS Positioned Layout Module Level 3 if all of its 
            declarations that use properties defined in this module have values that are valid 
            according to the generic CSS grammar and the individual grammars of each property as 
            given in this module.
        </p>
        <p>
            A renderer is conformant to CSS Positioned Layout Module Level 3 if, in addition to 
            interpreting the style sheet as defined by the appropriate specifications, it supports 
            all the features defined by CSS Positioned Layout Module Level 3 by parsing them 
            correctly and rendering the document accordingly. However, the inability of a UA to 
            correctly render a document due to limitations of the device does not make the UA 
            non-conformant. (For example, a UA is not required to render color on a monochrome 
            monitor.)
        </p>
        <p>
            An authoring tool is conformant to CSS Positioned Layout Module Level 3 if it writes 
            style sheets that are syntactically correct according to the generic CSS grammar and the 
            individual grammars of each feature in this module, and meet all other conformance 
            requirements of style sheets as described in this module.
        </p>

        <h3 id="partial">Partial Implementations</h3>
        <p>
            So that authors can exploit the forward-compatible parsing rules to assign fallback 
            values, CSS renderers <strong>must</strong> treat as invalid (and 
            <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as appropriate</a>) any 
            at-rules, properties, property values, keywords, and other syntactic constructs for 
            which they have no usable level of support. In particular, user agents <strong>must 
            not</strong> selectively ignore unsupported component values and honor supported values 
            in a single multi-value property declaration: if any value is considered invalid (as 
            unsupported values must be), CSS requires that the entire declaration be ignored.
        </p>

        <h3 id="experimental">Experimental Implementations</h3>
        <p>
            To avoid clashes with future CSS features, the CSS2.1 specification reserves a 
            <a href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed syntax</a>
            for proprietary and experimental extensions to CSS.
        </p>
        <p>
            Prior to a specification reaching the Candidate Recommendation stage in the W3C process, 
            all implementations of a CSS feature are considered experimental. The CSS Working Group 
            recommends that implementations use a vendor-prefixed syntax for such features, 
            including those in W3C Working Drafts. This avoids incompatibilities with future changes 
            in the draft.
        </p>

        <h3 id="testing">Non-Experimental Implementations</h3>
        <p>
            Once a specification reaches the Candidate Recommendation stage, non-experimental 
            implementations are possible, and implementors should release an unprefixed 
            implementation of any CR-level feature they can demonstrate to be correctly implemented 
            according to spec.
        </p>
        <p>
            To establish and maintain the interoperability of CSS across implementations, the CSS 
            Working Group requests that non-experimental CSS renderers submit an implementation 
            report (and, if necessary, the testcases used for that implementation report) to the W3C 
            before releasing an unprefixed implementation of any CSS features. Testcases submitted 
            to W3C are subject to review and correction by the CSS Working Group.
        </p>
        <p>
            Further information on submitting testcases and implementation reports can be found from 
            on the CSS Working Group&#39;s website at <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>. 
            Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a> mailing list.
        </p>

        <h3 id="cr-exit-criteria">CR Exit Criteria</h3>
        <p>
            For this specification to be advanced to Proposed Recommendation, there must be at least 
            two independent, interoperable implementations of each feature. Each feature may be 
            implemented by a different set of products, there is no requirement that all features be 
            implemented by a single product. For the purposes of this criterion, we define the 
            following terms:
        </p>
        <dl>
            <dt>independent</dt>
            <dd>
                each implementation must be developed by a different party and cannot share, reuse, 
                or derive from code used by another qualifying implementation. Sections of code that 
                have no bearing on the implementation of this specification are exempt from this 
                requirement.
            </dd>
            <dt>interoperable</dt>
            <dd>
                passing the respective test case(s) in the official CSS test suite, or, if the 
                implementation is not a Web browser, an equivalent test. Every relevant test in the 
                test suite should have an equivalent test created if such a user agent (UA) is to be 
                used to claim interoperability. In addition if such a UA is to be used to claim 
                interoperability, then there must one or more additional UAs which can also pass 
                those equivalent tests in the same way for the purpose of interoperability. The 
                equivalent tests must be made publicly available for the purposes of peer review.
            </dd>
            <dt>implementation</dt>
            <dd>a user agent which:
                <ol class="inline">
                    <li>implements the specification.</li>
                    <li>
                        is available to the general public. The implementation may be a shipping 
                        product or other publicly available version (i.e., beta version, preview 
                        release, or “nightly build”). Non-shipping product releases must have 
                        implemented the feature(s) for a period of at least one month in order to 
                        demonstrate stability.
                    </li>
                    <li>
                        is not experimental (i.e., a version specifically designed to pass the test 
                        suite and is not intended for normal usage going forward).
                    </li>
                </ol>
            </dd>
        </dl>
        <p>The specification will remain Candidate Recommendation for at least six months.</p>

        <h2 class="no-num" id="acknowledgments">Acknowledgments</h2>
        <p>
            This spec would not have been possible without input and support from many helpful 
            people. Thanks to Bert Bos, Anton Prowse, Rossen Atanassov, Chris Jones, John Jansen. 
        </p>

        <h2 class="no-num" id="references">References</h2>
        <h3 class="no-num" id="normative-references">Normative references</h3>
        <!--normative-->
        <h3 class="no-num" id="other-references">Other references</h3>
        <!--informative-->
        <h2 class="no-num" id="index">Index</h2>
        <!--index-->
        <h2 class="no-num" id="property-index">Property index</h2>
        <!-- properties -->
    </body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
