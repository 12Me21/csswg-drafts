<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Text Module Level 3 (CSS3 Text)</title>
  <link rel=contents href="#contents">
  <!--<link rel=index href="#index">-->
  <link rel="stylesheet" type="text/css" href="../default.css">

  <style type="text/css">
    .egbidiwsaA,.egbidiwsbB,.egbidiwsaB,.egbidiwsbC
      { white-space:pre;font-size:80%;font-family:monospace; vertical-align:2px; margin:1px }
    .egbidiwsaA { background:lime;padding:2px; }
    .egbidiwsbB { border:2px solid blue }
    .egbidiwsaB { background:yellow;border:2px dotted white }
    .egbidiwsbC { border:2px dotted red }

    /* Start Letter-spacing Tutorial */
    .ls-ex {
      font-size: 200%;
      margin-left: 1em;
      margin-right: 1em;
    }
    .ls-fixed-width {
      width: 10em;
    }
    .color-box { background: rgb(224, 203, 82); }
    .bad { color: red; }
    .good { color: green; }
    /* End Letter-spacing Tutorial */

    .char { border: 1px dotted gray; }
    .quarter { font-size: 25%; }
    tt[lang="ja"] { font-family: "MS Gothic", "Osaka", monospace }
    div.figure table {
      margin :auto;
    }
    .feedback {
      background: #FFEECC;
      border-color: orange;
    }
    .feedback:before {
      content: "Info Needed";
      color: #FF8800;
    }
  </style>

  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED.css">
  <script src='http://test.csswg.org/harness/annotate.js#CSS3-TEXT_DEV' type='text/javascript' defer></script>
</head>

<body>

<div class="head">

<!--logo-->

<h1>CSS Text Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>

<dl>
  <dt>This version:</dt>
<!--
    <dd><a href="http://www.w3.org/TR/[YEAR]/WD-css3-text-[CDATE]/">http://www.w3.org/TR/[YEAR]/WD-css3-text-[CDATE]/</a></dd>
-->
    <dd><a href="http://dev.w3.org/csswg/css3-text/">http://dev.w3.org/csswg/css3-text/</a>


  <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/css3-text/">http://www.w3.org/TR/css3-text/</a></dd>
  <dt>Latest editor's draft:</dt>
    <dd><a href="http://dev.w3.org/csswg/css3-text/">http://dev.w3.org/csswg/css3-text/</a></dd>
  <dt>Previous version:</dt>
    <dd><a
      href="http://www.w3.org/TR/2012/WD-css3-text-20121113/">http://www.w3.org/TR/2012/WD-css3-text-20121113/</a>

  <dt>Issues List:</dt>
    <dd><a href="http://www.w3.org/Style/CSS/Tracker/products/10">http://www.w3.org/Style/CSS/Tracker/products/10</a>

  <dt>Feedback:</dt>
    <dd><a href="mailto:www-style@w3.org?subject=%5Bcss-text%5D%20feedback">www-style@w3.org</a>
        with subject line &ldquo;<kbd>[css-text] <var>&hellip; message topic &hellip;</var></kbd>&rdquo;
        (<a rel="discussion" href="http://lists.w3.org/Archives/Public/www-style/">archives</a>)

  <dt>Editors:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a> (Mozilla)</dd>
    <dd><a href="mailto:koji.a.ishii@mail.rakuten.com">Koji Ishii</a> (Rakuten, Inc.)</dd>
    
  <dt>Test Suite:</dt>
    <dd><a
        href="http://test.csswg.org/suites/css3-text/nightly-unstable/">http://test.csswg.org/suites/css3-text/nightly-unstable/</a>
</dl>

<!--begin-copyright-->
<p>[Here will be included the file "../copyright.inc"]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS3 module defines properties for text manipulation and
    specifies their processing model. It covers line breaking, justification
    and alignment, white space handling, and text
    transformation.</p>

<h2 class="no-num no-toc" id="status">Status of This Document</h2>

  <p><em>This section describes the status of this document at the time of
   its publication. Other documents may supersede this document. A list of
   current W3C publications and the latest revision of this technical report
   can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
   index at http://www.w3.org/TR/.</a></em>

  <p>Publication as a Working Draft does not imply endorsement by the W3C
   Membership. This is a draft document and may be updated, replaced or
   obsoleted by other documents at any time. It is inappropriate to cite this
   document as other than work in progress.

  <p>This CSS module has been produced as a combined effort of the <a
    href="http://www.w3.org/International/Activity">W3C Internationalization Activity</a>,
    and the <a href="http://www.w3.org/Style/Activity">Style Activity</a> and is maintained
    by the <a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a>. It also
    includes contributions made by participants in the <a
    href="http://www.w3.org/Style/XSL/Group/">XSL Working Group</a> (<a
    href="http://cgi.w3.org/MemberAccess/AccessRequest">members
    only</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>

  <p><strong>Feedback on this draft should be posted to the
    (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>)
    public mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a></strong>
    (see <a href="http://www.w3.org/Mail/Request">instructions</a>) <strong>with
    <kbd>[css3-text]</kbd> in the subject line.</strong>
    You are strongly encouraged to complain if you see something stupid
    in this draft. The editors will do their best to respond to all feedback.</p>

  <p>The following features are at risk and may be cut from the spec during
    its CR period if there are no (correct) implementations:</p>
    <ul>
      <li>the ''full-width'' value of 'text-transform'
      <li>the &lt;length> values of the 'tab-size' property
      <li>the ''start end'' value of 'text-align'
      <li>the 'text-justify' property
      <li>the percentage values of 'word-spacing'
      <li>minimum and maximum limits of 'word-spacing'
      <li>the 'hanging-punctuation' property
    </ul>

<h2 class="no-num no-toc" id="contents">
Table of Contents</h2>

<!--toc-->

<h2 id="intro">
Introduction</h2>

  <p>This module describes the typesetting controls of CSS;
  that is, the features of CSS that control the translation of
  source text to formatted, line-wrapped text.
  Various CSS properties provide control over
  <a href="#transforming">case transformation</a>,
  <a href="#white-space">white space collapsing</a>,
  <a href="#white-space">text wrapping</a>,
  <a href="#line-breaking">line breaking rules</a>
  and <a href="#hyphenation">hyphenation</a>,
  <a href="#justification">alignment and justification</a>,
  <a href="#spacing">spacing</a>,
  and <a href="#edge-effects">indentation</a>.

  <div class="note">
    <p>Font selection is covered in <a href="http://www.w3.org/TR/css3-fonts/">CSS Fonts Level 3</a> [[CSS3-FONTS]].

    <p>
    <a name="decoration"></a>
    <a name="text-decoration"></a>
    <a name="line-decoration"></a>
    <a name="text-decoration-line"></a>
    <a name="text-decoration-color"></a>
    <a name="text-decoration-style"></a>
    <a name="text-decoration-skip"></a>
    <a name="text-underline-position"></a>
    <a name="emphasis-marks"></a>
    <a name="text-emphasis-style"></a>
    <a name="text-emphasis-color"></a>
    <a name="text-emphasis"></a>
    <a name="text-emphasis-position"></a>
    <a name="text-shadow"></a>
    Features for decorating text,
    such as <a href="http://www.w3.org/TR/css-text-decor-3/#line-decoration">underlines</a>,
    <a href="http://www.w3.org/TR/css-text-decor-3/#emphasis-marks">emphasis marks</a>,
    and <a href="http://www.w3.org/TR/css-text-decor-3/#text-shadow-property">shadows</a>,
    (previously part of this module)
    are covered in
    <a href="http://www.w3.org/TR/css-text-decor-3/">CSS Text Decoration Level 3</a> [[CSS3-TEXT-DECOR]].

    <p><a href="http://www.w3.org/TR/css3-writing-modes/#text-direction">Bidirectional</a> and
    <a href="http://www.w3.org/TR/css3-writing-modes/#vertical-intro">vertical</a> text
    are addressed in
    <a href="http://www.w3.org/TR/css3-writing-modes/">CSS Writing Modes Level 3</a> [[CSS3-WRITING-MODES]].
  </div>

  <p class="issue">This draft describes features that are specific to certain scripts.
  There is an ongoing discussion about where these features belong: in
  existing CSS properties, in new CSS properties, or perhaps in other
  specifications.

<h3 id="placement">
Module Interactions</h3>

  <p>This module, together with [[CSS3-TEXT-DECOR]],
  replaces and extends the text-level features defined in [[!CSS21]] chapter 16.

<h3 id="values">
Values</h3>

  <p>This specification follows the
  <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
  definition conventions</a> from [[!CSS21]]. Value types not defined in
  this specification are defined in CSS Level 2 Revision 1 [[!CSS21]].
  Other CSS modules may expand the definitions of these value types: for
  example [[CSS3VAL]], when combined with this module, expands the
  definition of the <var>&lt;length&gt;</var> value type as used in this specification.</p>

  <p>In addition to the property-specific values listed in their definitions,
  all properties defined in this specification also accept the
  <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>
  keyword as their property value. For readability it has not been repeated
  explicitly.

<h3 id="terms">
Terminology</h3>

  <p id="grapheme-cluster">A <dfn>grapheme cluster</dfn> is what
    a language user considers to be a character or a basic unit of the
    script. The term is described in detail in the Unicode Technical
    Report: Text Boundaries [[!UAX29]]. This specification uses the
    <em>extended grapheme cluster</em> definition in [[!UAX29]] (not
    the <em>legacy grapheme cluster</em> definition). The UA may further
    tailor the definition as allowed by Unicode. Within this specification,
    the ambiguous term <dfn>character</dfn> is used as a friendlier synonym
    for <i>grapheme cluster</i>.
    See <a href="http://www.w3.org/TR/css3-writing-modes/#character-properties">Characters and Properties</a>
    for how to determine the Unicode properties of a character.

  <p id="letter">A <dfn>letter</dfn> for the purpose of this specification
    is a <i>character</i> belonging to one of the Letter or Number general
    categories in Unicode. [[!UAX44]]

  <p>The rendering characteristics of a <i>character</i> divided by an
    element boundary is undefined: it may be rendered as belonging to
    either side of the boundary, or as some approximation of belonging
    to both. Authors are forewarned that dividing grapheme clusters by
    element boundaries may give inconsistent or undesired results.

  <p>The <dfn>content language</dfn> of an element is the (human) language
    the element is declared to be in, according to the rules of the
    <a href="http://www.w3.org/TR/CSS21/conform.html#doclanguage">document language</a>.
    For example, the rules for determining the <i>content language</i> of an HTML
    element use the <code>lang</code> attribute and are defined in [[HTML5]],
    and the rules for determining the <i>content language</i> of an XML element use
    the <code>xml:lang</code> attribute and are
    <a href="http://www.w3.org/TR/REC-xml/#sec-lang-tag">defined</a> in [[XML10]].
    Note that it is possible for the <i>content language</i> of an element
    to be unknown.

  <p>Other terminology and concepts used in this specification are defined
    in [[!CSS21]] and [[!CSS3-WRITING-MODES]].

<h2 id="transforming">
  Transforming Text</h2>

  <h3 id="text-transform">
    <a name="caps-prop"></a>
    Case Transforms: the 'text-transform' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>text-transform</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>none | capitalize | uppercase | lowercase | full-width
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
    </table>

    <p>This property transforms text for styling purposes.
      (It has no effect on the underlying content.)
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-transform:none">''none''</dfn></dt>
        <dd>No effects.</dd>
      <dt><dfn title="text-transform:capitalize">''capitalize''</dfn></dt>
        <dd>Puts the first <i>letter</i> of each word in titlecase; other characters
          are unaffected.</dd>
      <dt><dfn title="text-transform:uppercase">''uppercase''</dfn></dt>
        <dd>Puts all <i>letters</i> in uppercase.
      <dt><dfn title="text-transform:lowercase">''lowercase''</dfn></dt>
        <dd>Puts all <i>letters</i> in lowercase.</dd>
      <dt><dfn title="text-transform:full-width">''full-width''</dfn></dt>
        <dd>Puts all characters in fullwidth form.
          If the character does not have a corresponding fullwidth form,
          it is left as is.
          This value is typically used to typeset Latin characters and digits
          like ideographic characters.
<!--
      <dt><dfn title="text-transform:full-size-kana">''full-size-kana''</dfn></dt>
        <dd>Converts all small Kana characters to normal Kana.
          The mappings for small Kana to normal Kana are defined in
          <a href="#small-kana">Small Kana Mappings</a>.</p>
        <p class=note>
          This value is typically used for ruby annotation text, 
          where due to the small type size, small Kana
          is often drawn as large Kana.
          This value allows such underlying text to use correct orthography
          so that it is accessible and can be styled correctly
          when not presented as ruby.
-->
    </dl>

    <p>The definition of “word“ used for ''capitalize'' is UA-dependent;
      [[!UAX29]] is suggested (but not required) for determining such word
      boundaries. Authors should not expect ''capitalize'' to follow
      language-specific titlecasing conventions (such as skipping articles
      in English).

    <div class="example">
      <p>The following example converts the ASCII characters
        used in abbreviations in Japanese text to their fullwidth variants
        so that they lay out and line break like ideographs:
      <pre>abbr:lang(ja) { text-transform: full-width; }</pre>
    </div>

    <p>The case mapping rules for the character repertoire specified by the
      Unicode Standard can be found on the Unicode Consortium Web site
      [[!UNICODE]]. The UA must use the full case mappings for Unicode
      characters, including any conditional casing rules, as defined in
      Default Case Algorithm section. If (and only if) the <i>content language</i>
      of the element is, according to the rules of the
      <a href="http://www.w3.org/TR/CSS21/conform.html#doclanguage">document language</a>,
      known,
      then any appropriate language-specific rules must be applied as well.
      These minimally include, but are not limited to, the language-specific
      rules in Unicode's
      <a href="http://www.unicode.org/Public/UNIDATA/SpecialCasing.txt">SpecialCasing.txt</a>.

    <div class="example">
      <p>For example, in Turkish there are two &ldquo;i&rdquo;s, one with
        a dot&mdash;&ldquo;İ&rdquo; and &ldquo;i&rdquo;&mdash; and one
        without&mdash;&ldquo;I&rdquo; and &ldquo;ı&rdquo;. Thus the usual
        case mappings between &ldquo;I&rdquo; and &ldquo;i&rdquo; are
        replaced with a different set of mappings to their respective
        undotted/dotted counterparts, which do not exist in English. This
        mapping must only take effect if the <i>content language</i> is Turkish
        (or another Turkic language that uses Turkish casing rules);
        in other languages, the usual mapping of &ldquo;I&rdquo;
        and &ldquo;i&rdquo; is required. This rule is thus conditionally
        defined in Unicode's SpecialCasing.txt file.
    </div>

<!--
    <div class="example">
      <p>An example where the UA may choose to include rules beyond those
        in Unicode is Greek. In Greek, if the entire word is in upper case
        (''text-transform: capitalize'' vs. ''text-transform: uppercase''),
        accents are dropped or transformed according to language-specific rules.
        http://blogs.msdn.com/b/michkap/archive/2006/08/18/706383.aspx
    </div>
-->

    <p>The definition of fullwidth and halfwidth forms can be found on the
      Unicode consortium web site at [[!UAX11]].
      The mapping to fullwidth form is defined by taking code points with
      the <code>&lt;wide&gt;</code> or the <code>&lt;narrow&gt;</code> tag
      in their <code>Decomposition_Mapping</code> in [[!UAX44]].
      For the <code>&lt;narrow&gt;</code> tag, 
      the mapping is from the code point to the decomposition (minus <code>&lt;narrow&gt;</code> tag),
      and for the <code>&lt;wide&gt;</code> tag,
      the mapping is from the decomposition (minus the <code>&lt;wide&gt;</code> tag)
      back to the original code point.

    <p>Text transformation happens after <a href="#white-space-rules">white
      space processing</a>, which means that ''full-width'' transforms
      only preserved U+0020 spaces to U+3000.

    <p class="note">
      A future level of CSS may introduce the ability to create custom mapping
      tables for less common text transforms, such as by an ''@text-transform''
      rule similar to ''@counter-style'' from [[CSS-COUNTER-STYLES-3]].
<!--
      This mechanism may be used to replace ''full-size-kana''. This would
      require authors needing this functionality to copy out the conversion
      tables, however.
-->


<h2 id="white-space"><a id="white-space-collapsing"></a><a id='text-wrap'></a>
  White Space and Wrapping: the 'white-space' property</h2>

  <table class="propdef">
      <tr>
        <th>Name:</th>
        <td><dfn>white-space</dfn></td>
      </tr>
      <tr>
        <th><a href="#values">Value</a>:
        <td>normal | pre | nowrap | pre-wrap | pre-line</td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>not defined for shorthand properties</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>yes</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>see individual properties</td>
      </tr>
  </table>

  <p>This property specifies two things:
  <ul>
    <li>whether and how <a href="#white-space-processing">white space</a> inside the element is collapsed
    <li>whether lines may <i>wrap</i> at unforced <i>soft wrap opportunities</i>
  </ul>

  <p>Values have the following meanings, which must be interpreted
    according to
    the <a href="#white-space-rules">White Space Processing</a> and
    <a href="#line-breaking">Line Breaking</a> rules:</p>

  <dl>
    <dt><dfn title="white-space:normal">''normal''</dfn></dt>
    <dd>This value directs user agents to collapse sequences of white space
      into a single character (or <a href="#line-break-transform">in some
      cases</a>, no character).
      Lines may wrap at allowed <i>soft wrap opportunities</i>,
      as determined by the line-breaking rules in effect,
      in order to minimize inline-axis overflow.
    <dt><dfn title="white-space:pre">''pre''</dfn></dt>
    <dd>This value prevents user agents from collapsing sequences of white space.
      <i>Segment breaks</i> such as line feeds and carriage returns are preserved as <i>forced line breaks</i>.
      Lines only break at <i>forced line breaks</i>;
      content that does not fit within the block container overflows it.
    <dt><dfn title="white-space:nowrap">''nowrap''</dfn>
    <dd>Like ''normal'', this value collapses white space;
      but like ''pre'', it does not allow wrapping.
    <dt><dfn title="white-space:pre-wrap">''pre-wrap''</dfn></dt>
    <dd>Like ''pre'', this value preserves white space;
      but like ''normal'', it allows wrapping.
    <dt><dfn title="white-space:pre-line">''pre-line''</dfn></dt>
    <dd>Like ''normal'', this value collapses consecutive spaces and allows wrapping,
      but preserves <i>segment breaks</i> in the source as <i>forced line breaks</i>.
  </dl>

  <p>The following informative table summarizes the behavior of various
    'white-space' values:</p>

  <table class="data">
    <colgroup class="header"></colgroup>
    <colgroup span=3></colgroup>
    <thead>
      <tr>
        <th></th>
        <th>New Lines</th>
        <th>Spaces and Tabs</th>
        <th>Text Wrapping</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th>''normal''</th>
        <td>Collapse</td>
        <td>Collapse</td>
        <td>Wrap</td>
      </tr>
      <tr>
        <th>''pre''</th>
        <td>Preserve</td>
        <td>Preserve</td>
        <td>No wrap</td>
      </tr>
      <tr>
        <th>''nowrap''</th>
        <td>Collapse</td>
        <td>Collapse</td>
        <td>No wrap</td>
      </tr>
      <tr>
        <th>''pre-wrap''</th>
        <td>Preserve</td>
        <td>Preserve</td>
        <td>Wrap</td>
      </tr>
      <tr>
        <th>''pre-line''</th>
        <td>Preserve</td>
        <td>Collapse</td>
        <td>Wrap</td>
    </tbody>
  </table>

  <p>See <a href="#white-space-processing">White Space Processing Rules</a>
    for details on how white space collapses. An informative summary of
    collapsing (''normal'' and ''nowrap'') is presented below:
    <ul>
      <li>A sequence of segment breaks and other white space between two
        Chinese, Japanese, or Yi characters collapses into nothing.
      <li>A zero width space before or after a white space sequence
        containing a segment break causes the entire sequence of white space
        to collapse into a zero width space.
      <li>Otherwise, consecutive white space collapses into a single space.
    </ul>

  <p>See <a href="#line-breaking">Line Breaking</a>
    for details on wrapping behavior.

<h2 id="white-space-processing">
  White Space Processing Details</h2>

  <p>The source text of a document often contains formatting
    that is not relevant to the final rendering: for example,
    <a href="http://rhodesmill.org/brandon/2012/one-sentence-per-line/"
    >breaking the source into segments</a> (lines) for ease of editing
    or adding white space characters such as tabs and spaces to indent the source code.
    CSS white space processing allows the author to control interpretation of such formatting:
    to preserve or collapse it away when rendering the document.
    White space processing in CSS interprets white space characters only for rendering:
    it has no effect on the underlying document data.

  <p>White space processing in CSS is controlled with the 'white-space' property.

  <p id="segment-normalization">
    CSS does not define document segmentation rules. Segments could be
    separated by a particular newline seqence (such as a line feed or
    CRLF pair), or delimited by some other mechanism, such as the SGML
    <code>RECORD-START</code> and <code>RECORD-END</code> tokens.
    For CSS processing, each document language&ndash;defined segment break,
    CRLF sequence (U+000D U+000A), carriage return (U+000D), and line feed (U+000A)
    in the text is treated as a <dfn>segment break</dfn>,
    which is then interpreted for rendering as specified by the 'white-space' property.

  <p class="note">Note that the document parser may have not only normalized
    any segment breaks, but also collapsed other space characters or
    otherwise processed white space according to markup rules. Because CSS
    processing occurs <em>after</em> the parsing stage, it is not possible
    to restore these characters for styling. Therefore, some of the
    behavior specified below can be affected by these limitations and
    may be user agent dependent.</p>

  <p class="note">Note that anonymous inlines consisting entirely of
    <i>collapsible</i> white space are removed from the rendering tree.
    See [[CSS21]] section
    <a href="http://www.w3.org/TR/CSS21/visuren.html#anonymous">9.2.2.1</a></p>

  <p>Control characters (Unicode class Cc) other than tab (U+0009), line feed
    (U+000A), and carriage return (U+000D)
    are ignored for the purpose of rendering.

  <h3 id="white-space-rules">
    The White Space Processing Rules</h3>

    <p>White space processing affects only spaces (U+0020), tabs (U+0009),
      and <a href="#segment-normalization">segment breaks</a>.

    <h4 id="white-space-phase-1">Phase I: Collapsing and Transformation</h4>

    <p>For each inline (including anonymous inlines) within an inline
      formatting context, white space characters are handled as follows,
      ignoring bidi formatting characters as if they were not there:</p>

    <ul>
    <li id="collapse"><p>If 'white-space' is set to
      ''normal'', ''nowrap'', or ''pre-line'',
      white space characters are considered <dfn>collapsible</dfn>
      and are processed by performing the following steps:</p>
      <ol>
        <li>All spaces and tabs immediately preceding or following a segment
          break are removed.</li>
        <li>Segment breaks are transformed for
          rendering according to the <a href="#line-break-transform">segment break transformation rules</a>.
        </li>
        <li>Every tab is converted to a space (U+0020).</li>
        <li>Any space immediately following another collapsible space&mdash;even
          one outside the boundary of the inline containing that space,
          provided they are both within the same inline formatting
          context&mdash;is collapsed to have zero advance width. (It is
          invisible, but retains its <i>soft wrap opportunity</i>, if any.)</li>
      </ol>
    </li>
    <li><p>If 'white-space' is set to ''pre-wrap'', any sequence of
      spaces is treated as a sequence of non-breaking spaces. However,
      a <i>soft wrap opportunity</i> exists at the end of the sequence.</p></li>
    </ul>

    <p>Then, the entire block is rendered. Inlines are laid out, taking bidi
      reordering into account, and <i>wrapping</i> as specified by the
      'white-space' property.</p>

    <div class="example" id="egbidiwscollapse">
      <p>The following example illustrates
        the interaction of white-space collapsing and bidirectionality.
        Consider the following markup fragment, taking special note of spaces
        (with varied backgrounds and borders for emphasis and identification):

      <pre><code>&lt;ltr&gt;A<span class="egbidiwsaA">&#160;</span>&lt;rtl&gt;<span class="egbidiwsbB">&#160;</span>B<span class="egbidiwsaB">&#160;</span>&lt;/rtl&gt;<span class="egbidiwsbC">&#160;</span>C&lt;/ltr&gt;</code></pre>

      <p>where the <code>&lt;ltr&gt;</code> element represents a left-to-right embedding
        and the <code>&lt;rtl&gt;</code> element represents a right-to-left embedding.
        If the 'white-space' property is set to ''normal'',
        the white-space processing model would result in the following:

      <ul style="line-height:1.3">
        <li>The space before the B (<span class="egbidiwsbB">&#160;</span>)
          would collapse with the space after the A (<span class="egbidiwsaA">&#160;</span>).
        <li>The space before the C (<span class="egbidiwsbC">&#160;</span>)
          would collapse with the space after the B (<span class="egbidiwsaB">&#160;</span>).
      </ul>

      <p>This would leave two spaces,
        one after the A in the left-to-right embedding level,
        and one after the B in the right-to-left embedding level.
        This is then ordered according to the Unicode bidirectional algorithm,
        with the end result being:

      <pre>A<span class="egbidiwsaA">&#160;</span><span class="egbidiwsaB">&#160;</span>BC</pre>

      <p>Note that there are two spaces between A and B,
        and none between B and C.
        This is best avoided by putting spaces outside the element
        instead of just inside the opening and closing tags and, where practical,
        by relying on implicit bidirectionality instead of explicit embedding levels.
    </div>

    <h4 id="line-break-transform">
      Segment Break Transformation Rules</h4>

      <p>When 'white-space' is ''pre'', ''pre-wrap'', or ''pre-line'',
      <i>segment breaks</i> are not <i>collapsible</i>
      and are instead transformed into a preserved line feed (U+000A).

      <p>For other values of 'white-space', <i>segment breaks</i> are <i>collapsible</i>,
        and are either transformed into a space (U+0020) or removed
        depending on the context before and after the break:</p>

      <ul>
        <li>If the character immediately before or immediately after the segment
          break is the zero-width space character (U+200B), then the break
          is removed, leaving behind the zero-width space.
        <li>Otherwise, if the East Asian Width property [[!UAX11]] of both
          the character before and after the line feed is F, W, or H (not A),
          and neither side is Hangul, then the segment break is removed.
        <li>Otherwise, the segment break is converted to a space (U+0020).
      </ul>

      <p class="note">Note that the white space processing rules have already
        removed any tabs and spaces after the segment break before these checks
        take place.</p>

      <p class="feedback issue">Comments on how well this would work in practice would
        be very much appreciated, particularly from people who work with
        Thai and similar scripts.
        Note that browser implementations do not currently follow these rules
        (although IE does in some cases transform the break).</p>

    <h4 id="white-space-phase-2">Phase II: Trimming and Positioning</h4>

    <p>As each line is laid out,</p>
    <ol>
      <li>A sequence of collapsible spaces at the beginning of a line is
        removed.
      <li>Each tab is rendered as a horizontal shift
        that lines up the start edge of the next glyph with the next tab stop.
        <dfn>Tab stops</dfn> occur at points that are multiples of the <i>tab size</i>
        from the block's starting content edge.
        The <dfn>tab size</dfn> is given by the 'tab-size' property.
      <li>A sequence of <i>collapsible</i> spaces at the end of a line is removed.
      <li>If spaces or tabs at the end of a line are non-collapsible but
         have 'white-space' set to 'pre-wrap' the UA may visually
         collapse their character advance widths.
    </ol>

    <p>White space that was not removed or collapsed during the white space
      processing steps is called <dfn>preserved</dfn> white space.</p>

  <h3 id="tab-size">
    Tab Character Size: the 'tab-size' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>tab-size</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>&lt;integer&gt; | &lt;length&gt;</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>8</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>the specified integer or length made absolute</td>
        </tr>
    </table>

    <p>This property determines the <i>tab size</i> used to render preserved tab characters (U+0009).
      Integers represent the measure as multiples of the space character's advance width (U+0020).
      Negative values are not allowed.

<h2 id="line-breaking">
  Line Breaking and Word Boundaries</h2>

  <p>When inline-level content is laid out into lines, it is broken across line boxes.
    Such a break is called a <dfn>line break</dfn>.
    When a line is broken due to explicit line-breaking controls,
    or due to the start or end of a block,
    it is a <dfn>forced line break</dfn>.
    When a line is broken due to content <dfn title="wrapping|wrap">wrapping</dfn>
    (i.e. when the UA creates unforced line breaks in order to fit the content within the measure),
    it is a <dfn>soft wrap break</dfn>.
    The process of breaking inline-level content into lines is called <dfn>line breaking</dfn>.

  <p>Wrapping is only performed at an allowed break point, called a <dfn>soft wrap opportunity</dfn>.

  <p>In most writing systems,
    in the absence of hyphenation a <i>soft wrap opportunity</i> occurs only at word boundaries.
    Many such systems use spaces or punctuation to explicitly separate words,
    and <i>soft wrap opportunities</i> can be identified by these characters.
    Scripts such as Thai, Lao, and Khmer, however,
    do not use spaces or punctuation to separate words.
    Although the zero width space (U+200B) can be used as an explicit word delimiter in these scripts,
    this practice is not common.
    As a result, a lexical resource is needed to correctly identify <i>soft wrap opportunities</i> in such texts.

  <p>In several other writing systems, (including Chinese, Japanese, Yi, and sometimes also Korean)
    a <i>soft wrap opportunity</i> is based on syllable boundaries, not word boundaries.
    In these systems a line can break anywhere <em>except</em> between certain character combinations.
    Additionally the level of strictness in these restrictions can vary with the typesetting style.</p>

  <p>CSS does not fully define where <i>soft wrap opportunities</i> occur,
    however some controls are provided to distinguish common variations.

  <div class="note">
    <p>Further information on line breaking conventions can be found in
      [[JLREQ]] and [[JIS4051]] for Japanese,
      [[ZHMARK]] for Chinese, and
      in [[!UAX14]] for all scripts in Unicode.
      <!-- The CSS Working Group notes that although UAX 14 contains a wealth of
      information about line breaking conventions, a literal implementation
      of its algorithm has been found to be inadequate in multiple situations. -->

    <p class="feedback issue">Any guidance for appropriate references here would be
      much appreciated.
      <!-- Additionally, some guidance could be provided on how
      to break or not break Southeast Asian in the absence of a dictionary.
      (See e.g. <a href="http://lists.w3.org/Archives/Public/www-style/2011Feb/0126.html">notes on Thai</a>.) -->
  </div>

<h3 id="line-break-details">
Line Breaking Details</h3>

  <p>When determining <i>line breaks</i>:
  <ul>
    <li>Regardless of the 'white-space' value,
      lines always break at each <i>preserved</i> forced break character:
      for all values, line-breaking behavior defined for
      the BK, CR, LF, CM, NL, and SG line breaking classes in [[!UAX14]]
      must be honored.
    <li>When 'white-space' allows wrapping,
      line breaking behavior defined for the WJ, ZW, and GL line-breaking classes in [[!UAX14]]
      must be honored.
    <li>UAs that allow wrapping at punctuation other than spaces should prioritize breakpoints.
      For example, if breaks after slashes are given a lower priority than spaces,
      the sequence "check /etc" will never break between the '/' and the 'e'.
      The UA may use the width of the containing block, the text's language,
      and other factors in assigning priorities.
      As long as care is taken to avoid such awkward breaks, allowing breaks at
      appropriate punctuation other than spaces is recommended, as it results
      in more even-looking margins, particularly in narrow measures.
    <li>Out-of-flow elements do not introduce a <i>forced line break</i>
      or <i>soft wrap opportunity</i> in the flow.
    <li>The line breaking behavior of a replaced element or other atomic inline
      is equivalent to that of the Object Replacement Character (U+FFFC).
    <li>For <i>soft wrap opportunities</i> created by characters that disappear at the line break (e.g. U+0020 SPACE),
      properties on the element containing that character control the line breaking at that opportunity.
      For <i>soft wrap opportunities</i> defined by the boundary between two characters,
      the properties on the element containing the boundary control breaking.
      <!-- http://lists.w3.org/Archives/Public/www-style/2008Dec/0043.html -->
    <li>For <i>soft wrap opportunities</i> before the first or after the last character of a box,
      the break occurs immediately before/after the box (at its margin edge)
      rather than breaking the box between its content edge and the content.
    <li>For line breaking in/around <a href="http://www.w3.org/TR/css3-ruby/">ruby</a>,
      the base text is considered part of the same inline formatting context as its surrouding content,
      but the ruby text is not:
      i.e. line breaking opportunities between the ruby element and its surrounding content
      are determined as if the ruby base were inline and the ruby text were not there.
  </ul>

  <h3 id="line-break">
    Breaking Rules for Punctuation: the 'line-break' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>line-break</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>auto | loose | normal | strict</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
    </table>

    <p>This property specifies the strictness of line-breaking rules applied
      within an element:
      particularly how <i>wrapping</i> interacts with punctuation and symbols.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="line-break:auto">''auto''</dfn></dt>
      <dd>The UA determines the set of line-breaking restrictions to use,
        and it may vary the restrictions based on the length of the line; e.g.,
        use a less restrictive set of line-break rules for short lines.
<!--
        However, if 'word-break' is ''keep-all'',
        then all the line-breaking restrictions listed below for ''line-break: strict''
        must be applied.
-->
      <dt><dfn title="line-break:loose">''loose''</dfn></dt>
      <dd>Breaks text using the least restrictive set of line-breaking
        rules. Typically used for short lines, such as in newspapers.</dd>
      <dt><dfn title="line-break:normal">''normal''</dfn></dt>
      <dd>Breaks text using the most common set of line-breaking rules.</dd>
      <dt><dfn title="line-break:strict">''strict''</dfn></dt>
      <dd>Breaks text using the most stringent set of line-breaking
        rules.</dd>
    </dl>

    <p class="issue">
      It is unclear how Korean should be handled here.
      It should perhaps not be included in the lists below (alongside Chinese and Japanese).
      Also, the behavior of ''word-break: keep-all'' may be more appropriate
      if it also triggered ''strict'' line-breaking here, at least in the case of ''auto''.
      See <a href="http://lists.w3.org/Archives/Public/public-i18n-cjk/2013AprJun/0001.html">this thread</a>
      for further discussion of these issues.

    <p>CSS distinguishes between three levels of strictness in the rules for
      text wrapping.
      The precise set of rules in effect for each level is up to the UA
      and should follow language conventions.
      However, this specification does require that:</p>

    <ul>
      <li>Following breaks be forbidden in ''strict'' line breaking and
        allowed in ''normal'' and ''loose'':
        <ul>
          <li>breaks before Japanese small kana or the Katakana-Hiragana prolonged sound mark:
            i.e. characters with the Unicode Line Break property <code>CJ</code>.
            (See <a href="http://www.unicode.org/Public/UNIDATA/LineBreak.txt">LineBreak.txt</a> in [[!UNICODE]].)
        </ul>
        If the <i>content language</i> is Chinese, Japanese, or Korean, then additionally:
        <ul>
          <li>breaks before hyphens:<br>
            &#x2010;&nbsp;U+2010,  &#x2013;&nbsp;U+2013,  &#x301C;&nbsp;U+301C,
            &#x30A0;&nbsp;U+30A0
        </ul>
      <li>Following breaks be forbidden in ''normal'' and ''strict'' line
        breaking and allowed in ''loose'':
        <ul>
          <li>breaks before iteration marks:<br>
            &#x3005;&nbsp;U+3005,  &#x303B;&nbsp;U+303B,  &#x309D;&nbsp;U+309D,
            &#x309E;&nbsp;U+309E,  &#x30FD;&nbsp;U+30FD,  &#x30FE;&nbsp;U+30FE
          <li>breaks between inseparable characters
            such as &#x2025;&nbsp;U+2025,  &#x2026;&nbsp;U+2026
            i.e. characters with the Unicode Line Break property <code>IN</code>.
            (See <a href="http://www.unicode.org/Public/UNIDATA/LineBreak.txt">LineBreak.txt</a> in [[!UNICODE]].)
        </ul>
        If the <i>content language</i> is Chinese, Japanese, or Korean, then additionally:
        <ul>
          <li>breaks before certain centered punctuation marks:<br>
            &#x003A;&nbsp;U+003A,  &#x003B;&nbsp;U+003B,  &#x30FB;&nbsp;U+30FB,
            &#xFF1A;&nbsp;U+FF1A,  &#xFF1B;&nbsp;U+FF1B,  &#xFF65;&nbsp;U+FF65,
            &#x0021;&nbsp;U+0021,  &#x003F;&nbsp;U+003F,  &#x203C;&nbsp;U+203C,
            &#x2047;&nbsp;U+2047,  &#x2048;&nbsp;U+2048,  &#x2049;&nbsp;U+2049,
            &#xFF01;&nbsp;U+FF01,  &#xFF1F;&nbsp;U+FF1F
          <li>breaks before suffixes:<br>
            &#x0025;&nbsp;U+0025,  &#x00A2;&nbsp;U+00A2,  &#x00B0;&nbsp;U+00B0,
            &#x2030;&nbsp;U+2030,  &#x2032;&nbsp;U+2032,  &#x2033;&nbsp;U+2033,
            &#x2103;&nbsp;U+2103,  &#xFF05;&nbsp;U+FF05,  &#xFFE0;&nbsp;U+FFE0
          <li>breaks after prefixes:<br>
            &#x2116;&nbsp;U+2116
            and all currency symbols (Unicode general category Sc) other than
            &#x00A2;&nbsp;U+00A2 and &#xFFE0;&nbsp;U+FFE0
        </ul>
    </ul>

<p class="issue">
  These rules should be cross-checked against <a href="http://www.w3.org/TR/jlreq/#possibilities_for_linebreaking_between_characters">JLREQ</a>
  and any differences verified.

    <p class="note">In the recommended list above, no distinction is made among the levels of
      strictness in non-CJK text: only CJK codepoints are affected, unless
      the text is marked as Chinese or Japanese, in which case some additional
      common codepoints are affected. However a future level of CSS may add
      behaviors affecting non-CJK text.

    <p class="note">The CSSWG recognizes that in a future edition of the
      specification finer control over line breaking may be necessary to
      satisfy high-end publishing requirements.

  <h3 id="word-break">
    Breaking Rules for Letters: the 'word-break' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>word-break</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>normal | keep-all | break-all</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
    </table>

    <p>This property specifies <i>soft wrap opportunities</i> between letters,
      i.e. where it is “normal” and permissible to break lines of text.

    <div class="example">
      <p>For example, in some styles of CJK typesetting, English words are allowed
        to break between any two letters, rather than only at spaces or hyphenation points;
        this can be enabled with ''word-break:break-all''.

      <div class="figure">
        <img src="break-all.png" alt="A snippet of Japanese text with English in it. The word 'caption' is broken into 'capt' and 'ion' across two lines.">
        <p class="caption">An example of English text embedded in Japanese
          being broken at an arbitrary point in the word.
      </div>

      <p>As another example, Korean has two styles of line-breaking:
        between any two Korean syllables (''word-break: normal'')
        or, like English, mainly at spaces (''word-break: keep-all'').
      <pre>각 줄의 마지막에 한글이 올 때 줄 나눔 기 /* break between syllables */
<!--    -->준을 “글자” 또는 “어절” 단위로 한다.</pre>
      <pre>각 줄의 마지막에 한글이 올 때 줄 나눔   /* break only at spaces */
<!--    -->기준을 “글자” 또는 “어절” 단위로 한다.</pre>
    </div>

    <p class="note">
      To enable additional break opportunities only in the case of overflow,
      see 'overflow-wrap'.

    <p>Values have the following meanings:</p>

    <dl>
      <dt><dfn title="word-break:normal">''normal''</dfn></dt>
      <dd>Words break according to their usual rules.</dd>
      <dt><dfn title="word-break:break-all">''break-all''</dfn></dt>
      <dd>In addition to ''normal'' <i>soft wrap opportunities</i>,
        lines may break between any two <i>letters</i>
        (except where forbidden by the 'line-break' property).
        Hyphenation is not applied. This option is used mostly in a context where
        the text is predominantly using CJK characters with few non-CJK excerpts
        and it is desired that the text be better distributed on each line.</dd>
      <dt><dfn title="word-break:keep-all">''keep-all''</dfn></dt>
      <dd>
        Implicit <i>soft wrap opportunities</i> between <i>letters</i> are suppressed,
        i.e. breaks are prohibited between pairs of letters
        (including those explicitly allowed by 'line-break')
        except where opportunities exist due to dictionary-based breaking.
        Otherwise this option is equivalent to ''normal''.
        In this style, sequences of CJK characters do not break.
        <p class=note>This is sometimes seen in Korean (which uses spaces between words),
        and is also useful for mixed-script text where CJK snippets are mixed
        into another language that uses spaces for separation.</dd>
    </dl>

    <p>Symbols that line-break the same way as letters of a particular category
    are affected the same way as those letters.

     <div class="example">
      <p>Here's a mixed-script sample text:
      <pre>这是一些汉字, and some Latin,<!--
        --> &#x0648; &#x06A9;&#x0645;&#x06CC; &#x0646;&#x0648;&#x0634;&#x062A;&#x0646;&#x0646; &#x0639;&#x0631;&#x0628;&#x06CC;, <!--
        -->และตัวอย่างการเขียนภาษาไทย.</pre>
      <p>The break-points are determined as follows (indicated by &lsquo;&middot;&rsquo;):
      <dl>
        <dt>''word-break: normal''</dt>
        <dd>
      <pre>这·是·一·些·汉·字,·and·some·Latin,<!--
        -->·&#x0648;·&#x06A9;&#x0645;&#x06CC;·&#x0646;&#x0648;&#x0634;&#x062A;&#x0646;&#x0646;·&#x0639;&#x0631;&#x0628;&#x06CC;·<!--
        -->และ·ตัวอย่าง·การเขียน·ภาษาไทย.</pre>
        <dt>''word-break: break-all''</dt>
        <dd>
      <pre>这·是·一·些·汉·字,·a·n·d·s·o·m·e·L·a·t·i·n,<!--
        -->·&#x0648;·&#xFB90;·&#xFEE4;·&#xFEF0;·&#xFEE7;·&#xFEEE;·&#xFEB7;·&#xFE98;·&#xFEE6;·&#xFECB;·&#xFEAE;·&#xFE91;·&#xFEF0;,·<!--
        -->แ·ล·ะ·ตั·ว·อ·ย่·า·ง·ก·า·ร·เ·ขี·ย·น·ภ·า·ษ·า·ไ·ท·ย.</pre>
        <dt>''word-break: keep-all''</dt>
        <dd>
      <pre>这是一些汉字,·and·some·Latin,<!--
        -->·&#x0648;·&#x06A9;&#x0645;&#x06CC;·&#x0646;&#x0648;&#x0634;&#x062A;&#x0646;&#x0646;·&#x0639;&#x0631;&#x0628;&#x06CC;,·<!--
        -->และตัวอย่างการเขียนภาษาไทย.</pre>
      </dl>
    </div>

    <p>When shaping scripts such as Arabic are allowed to break within words
      due to ''break-all'', the characters must still be shaped as if the
      word were not broken.</p>

<h2 id="hyphenation">Breaking Within Words</h2>

    <p><dfn title="hyphenation|hyphenate">Hyphenation</dfn>
      allows the controlled splitting of words
      to improve the layout of paragraphs,
      typically splitting words at syllabic or morphemic boundaries
      and visually indicating the split (usually by inserting a hyphen, U+2010).
      In some cases, hyphenation may also alter the spelling of a word.
      Regardless, hyphenation is a rendering effect only:
      it must have no effect on the underlying document content
      or on text selection or searching.

    <p>Hyphenation occurs when the line breaks at a valid <dfn>hyphenation opportunity</dfn>,
      which creates a <i>soft wrap opportunity</i> within the word.
      In CSS it is controlled with the 'hyphens' property.
      CSS Text Level 3 does not define the exact rules for hyphenation,
      however UAs are strongly encouraged to optimize their line-breaking implementation
      to choose good break points and appropriate hyphenation points.
      Hyphenation opportunities <em>are</em> considered when calculating
      ''min-content'' intrinsic sizes.
    <!-- This is because it allows tables to hyphenate instead of overflowing,
         which is particularly important in long-word languages like German.
         https://bugzilla.mozilla.org/show_bug.cgi?id=418975 -->

    <p>CSS also provides the 'overflow-wrap' property, which can allow
      arbitrary breaking within words when the text would otherwise overflow
      its container.

  <h3 id="hyphens">Hyphenation Control: the 'hyphens' property</h3>

    <table class=propdef>
      <tr>
        <td>Name:
        <td><dfn>hyphens</dfn>
      <tr>
        <th><a href="#values">Value:</a>
        <td>none | manual | auto
      <tr>
        <th>Initial:
        <td>manual
      <tr>
        <th>Applies to:
        <td>all elements
      <tr>
        <th>Inherited:
        <td>yes
      <tr>
        <th>Percentages:
        <td>N/A
      <tr>
        <th>Media:
        <td>visual
      <tr>
        <th>Computed&nbsp;value:
        <td>specified value
    </table>

    <p>This property controls whether hyphenation is allowed to create more
      <i>soft wrap opportunities</i> within a line of text.
      Values have the following meanings:

    <dl>
      <dt><dfn title="hyphens:none">''none''</dfn>
        <dd>Words are not hyphenated, even if characters inside
          the word explicitly define hyphenation opportunities.
      <dt><dfn title="hyphens:manual">''manual''</dfn>
        <dd>Words are only hyphenated where there are characters inside the word
          that explicitly suggest hyphenation opportunities.
          <!-- Characters can be <del>explicit</del><ins>???</ins> or conditional. -->
        <div class="example">
        <p>In Unicode, U+00AD is a conditional "soft hyphen" and U+2010 is an
          unconditional hyphen. Unicode Standard Annex #14 describes the
          <a href="http://unicode.org/reports/tr14/#SoftHyphen">role of soft hyphens in</a>
          Unicode line breaking. [[!UAX14]]
          In HTML, &amp;shy; represents the soft hyphen character which
          suggests a hyphenation opportunity.
          <pre>ex&amp;shy;ample</pre>
        </div>
      <dt><dfn title="hyphens:auto">''auto''</dfn>
        <dd>Words may be broken at appropriate hyphenation points either
          as determined by hyphenation characters inside the word or
          as determined automatically by a language-appropriate hyphenation resource.
          Conditional hyphenation characters inside a word, if present,
          take priority over automatic resources when determining
          hyphenation opportunities within the word.
    </dl>

    <p>Correct automatic hyphenation requires a hyphenation resource
      appropriate to the language of the text being broken. The UA is
      therefore only required to automatically hyphenate text for which
      the author has declared a language (e.g. via HTML <code>lang</code>
      or XML <code>xml:lang</code>) and for which it has an appropriate
      hyphenation resource.

    <p>When shaping scripts such as Arabic are allowed to break within words
      due to hyphenation, the characters must still be shaped as if the word
      were not broken.</p>

    <div class="example">
      <p>For example, if the word &ldquo;&#x0646;&#x0648;&#x0634;&#x062A;&#x0646;&#x0646;&rdquo;
      were hyphenated, it would appear as &ldquo;&#xFEE7;&#xFEEE;&#xFEB7;-&#xFE98;&#xFEE6;&rdquo;
      not as &ldquo;&#xFEE7;&#xFEEE;&#xFEB5;-&#xFE97;&#xFEE6;&rdquo;.
    </div>

    <!-- add a sample prioritization algorithm -->

  <h3 id="overflow-wrap">
    Overflow Wrapping: the 'word-wrap'/'overflow-wrap' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>overflow-wrap</dfn>/<dfn>word-wrap</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>normal | break-word </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
    </table>

    <p>This property specifies whether the UA may arbitrarily break within a word
      to prevent overflow when an otherwise-unbreakable string is too
      long to fit within the line box. It only has an effect when
      'white-space' allows <i>wrapping</i>. Possible values:</p>

    <dl>
    <dt><dfn title="overflow-wrap:normal">''normal''</dfn></dt>
    <dd>Lines may break only at allowed break points. However, the restrictions
      introduced by ''word-break: keep-all'' may be relaxed to match
      ''word-break: normal'' <!-- and the various hyphenation limit properties
      may be ignored --> if there are no otherwise-acceptable break points in
      the line.</dd>
    <dt><dfn title="overflow-wrap:break-word">''break-word''</dfn></dt>
    <dd>An unbreakable "word" may be broken at an arbitrary point if
      there are no otherwise-acceptable break points in the line.
      Shaping characters are still shaped as if the word were not
      broken, and grapheme clusters must together stay as one unit.
      No hyphenation character is inserted at the break point.
    </dl>

    <p><i>Soft wrap opportunities</i> introduced by ''overflow-wrap: break-word''
       are not considered when calculating ''min-content'' intrinsic sizes.

    <p>For legacy reasons, UAs must treat 'word-wrap' as an alternate name
      for the 'overflow-wrap' property, as if it were a shorthand of 'overflow-wrap'.

<h2 id="justification">
  Alignment and Justification</h2>

  <p>Alignment and justification controls how inline content is distributed within a line box.

  <h3 id="text-align">
    Text Alignment: the 'text-align' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>text-align</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>start | end | left | right | center |
              justify | match-parent | start end
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>start</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value, except for 'match-parent' which computes as defined below</td>
        </tr>
    </table>

    <p>This property describes how the inline-level content of a block
      is aligned along the inline axis
      if the content does not completely fill the line box.
      Values have the following meanings:</p>

    <dl>
    <dt><dfn title="text-align:start">''start''</dfn></dt>
      <dd>Inline-level content is aligned to the <i>start</i> edge of the line box.
    <dt><dfn title="text-align:end">''end''</dfn></dt>
      <dd>Inline-level content is aligned to the <i>end</i> edge of the line box.
    <dt><dfn title="text-align:left">''left''</dfn></dt>
      <dd>Inline-level content is aligned to the
        <a href="http://www.w3.org/TR/css3-writing-modes/#line-left">line left</a>
        edge of the line box.
        (In vertical writing modes,
         this will be either the physical top or bottom,
         depending on 'text-orientation'.) [[CSS3-WRITING-MODES]]
    <dt><dfn title="text-align:right">''right''</dfn></dt>
      <dd>Inline-level content is aligned to the 
        <a href="http://www.w3.org/TR/css3-writing-modes/#line-right">line right</a>
        edge of the line box.
        (In vertical writing modes,
         this will be either the physical top or bottom,
         depending on 'text-orientation'.) [[CSS3-WRITING-MODES]]
    <dt><dfn title="text-align:center">''center''</dfn></dt>
      <dd>Inline-level content is centered within the line box.
    <dt><dfn title="text-align:justify">''justify''</dfn></dt>
      <dd>Text is justified according to the method specified by the 'text-justify' property,
        in order to exactly fill the line box.
<!--
    <dt><dfn title="text-align:&lt;string>">''<span title="&lt;string&gt;"><a
      class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"
      ><span class="value-inst-string">&lt;string&gt;</span></a></span>''</dfn></dt>
      <dd>The string must be a single <i>character</i>; otherwise the declaration
        must be <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignored</a>.
        When applied to a table cell, specifies the <dfn>alignment character</dfn>
        around which the cell's contents will align. See
        <a href="#character-alignment">below</a> for further details and
        how this value combines with keywords.
      </dd>
-->
    <dt><dfn title="text-align:match-parent">''match-parent''</dfn></dt>
      <dd>This value behaves the same as 'inherit'
        (computes to its parent's computed value)
        except that an inherited 'start' or 'end' keyword
        is interpreted against its parent's 'direction' value
        and results in a computed value of either 'left' or 'right'.
    <dt><dfn title="text-align:start end">''start end''</dfn>
      <dd>Specifies ''start'' alignment of the first line and any line
        immediately after a <i>forced line break</i>; 
        and ''end'' alignment of any remaining lines.
    </dl>

    <p>A block of text is a stack of
      <a href="http://www.w3.org/TR/CSS21/visuren.html#line-box">line boxes</a>.
      This property specifies how the inline-level boxes within each line box
      align with respect to the start and end sides of the line box.
      Alignment is not with respect to the
      <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a>
      or containing block.

    <p>In the case of ''justify'', the UA may stretch or shrink any inline boxes
      by <a href="#text-justify">adjusting</a> their text. (See 'text-justify'.)
      If an element's white space is not <a href="#collapse">collapsible</a>,
      then the UA is not required to adjust its text for the purpose of justification
      and may instead treat the text as having no <i>expansion opportunities</i>.
      If the UA chooses to adjust the text, then it must ensure
      that tab stops continue to line up as required by the
      <a href="#white-space-rules">white space processing rules</a>.

    <p>If (after justification, if any) the inline contents of a line box are too long to fit within it,
      then the contents are <i>start</i>-aligned:
      any content that doesn't fit overflows the line box's <i>end</i> edge.

    <p>See <a href="#bidi-linebox">Bidirectionality and line boxes</a>
      for details on how to determine the <i>start</i> and <i>end</i> edges of a line box.

  <h3 id="text-align-last">
    Last Line Alignment: the 'text-align-last' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>text-align-last</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>auto | start | end | left | right | center | justify
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
    </table>

    <p>This property describes how the last line of a block or a line
      right before a <i>forced line break</i> is aligned.
      If a line is also the first line of the block
      or the first line after a <i>forced line break</i>,
      then, unless 'text-align' assigns an explicit first line alignment (via ''start end''),
      'text-align-last' takes precedence over 'text-align'.

    <p>If <dfn>''auto''</dfn> is specified, content on the affected line is aligned
      per 'text-align' unless 'text-align' is set to ''justify''. In
      this case, content is justified if 'text-justify' is ''distribute''
      and start-aligned otherwise.
      All other values have the same meanings as in 'text-align'.</p>

  <h3 id="text-justify">
    Justification Method: the 'text-justify' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>text-justify</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>auto | none | inter-word | distribute
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers and, optionally, inline elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
    </table>

    <p>This property selects the justification method used when a line's
      alignment is set to ''justify'' (see 'text-align').
      The property applies to block containers, but the UA may (but
      is not required to) also support it on inline elements.
      It takes the following values:</p>

    <dl>
      <dt><dfn title="text-justify:auto">''auto''</dfn></dt>
        <dd>The UA determines the justification algorithm to follow, based
          on a balance between performance and adequate presentation quality.
          <p class="note">One possible algorithm is to choose the appropriate justification behavior
          based on the language of the paragraph
          e.g. following [[JLREQ]] for Japanese,
          using cursive elongation for Arabic,
          using ''inter-word'' for English,
          etc.
          Another possibility is to use a justification method that is a
          simple universal compromise for all writing systems,
          such as primarily expanding <i>word separators</i>
          along with secondarily expanding between CJK and Southeast Asian <i>letters</i>.

        <div class="figure" id="fig-text-justify-cursive">
          <p>
            <img alt="Two lines of calligraphic Arabic end together due to a mix of compressed and swash forms."
                 title="Swash forms elongate the first line while a compressed contextual ligature shortens the second, allowing both to end precisely together."
                 src="text-justify-cursive.png"></p>
          <p class="caption">An example of cursively-justified Arabic text rendered by <a href="http://www.decotype.com/">Tasmeem</a>.
        </div>

        <div class="figure" id="fig-text-justify-compromise">
          <p>
            <img alt="Extra space is partly to spaces and partly among CJK and Thai letters."
                 src="text-justify-compromise.png"></p>
          <p class="caption">Mixed-script text with ''text-justify: auto'':
            this interpretation uses a universal-compromise justification method,
            expanding at spaces as well as between CJK and Southeast Asian letters.
        </div>

      <dt><dfn title="text-justify:none">''none''</dfn></dt>
        <dd>Justification is disabled: there are no expansion opportunities within the text.
          <p class="note">This value is intended for use in user stylesheets
          to improve readability or for accessibility purposes.

      <dt><dfn title="text-justify:inter-word">''inter-word''</dfn></dt>
        <dd>Justification adjusts spacing at <i>word separators</i>
          (effectively varying the used 'word-spacing' on the line).
          This behavior is typical for languages that separate words using spaces,
          like English or Korean.
          <div class="figure" id="fig-text-justify-interword">
            <p>
              <img alt="Extra space is equally distributed mainly to spaces."
                   src="text-justify-interword.png"></p>
            <p class="caption">Mixed-script text with ''text-justify: inter-word''
          </div>
<!--
      <dt><dfn title="text-justify:inter-ideographic">''inter-ideograph''</dfn></dt>
        <dd>Justification primarily changes spacing at word separators and
          between characters in <a href="#block-scripts">block scripts</a>.
          This value is typically used for <abbr title="Chinese/Japanese/Korean">CJK</abbr>
          languages.</dd>
      <dt><dfn title="text-justify:inter-cluster">''inter-cluster''</dfn></dt>
        <dd>Justification primarily changes spacing at word separators and
          between characters in <a href="#clustered-scripts">clustered
          scripts</a>.
          This value is typically used for Southeast Asian scripts such as Thai.</dd>
-->
      <dt><dfn title="text-justify:distribute">''distribute''</dfn></dt>
        <dd>Justification adjusts spacing between each pair of adjacent <i>characters</i>
          (effectively varying the used 'letter-spacing' on the line).
          This value is sometimes used in e.g. Japanese.
          <div class="figure" id="fig-text-justify-distribute">
            <p>
              <img alt="Extra space is equally distributed at points between spaces and letters of all writing systems."
                   src="text-justify-distribute.png"></p>
            <p class="caption">Mixed-script text with ''text-justify: distribute''
          </div>
<!--
      <dt><a name="kashida-prop"></a><a name="text-kashida-space"></a>
        <dfn title="text-justify:kashida">''kashida''</dfn></dt>
        <dd>Justification primarily stretches
          <a href="#cursive-scripts">cursive scripts</a> through the use of
          kashida or other calligraphic elongation.
          This value is <em>optional</em> for conformance to CSS3 Text.
          (UAs that do not support cursive elongation must
          <a href="http://www.w3.org/TR/css-2010/#partial">treat the value
          as invalid</a>.)
-->
    </dl>

<!--
      <div class="figure" id="fig-text-justify">
        <p>
          <img alt="Examples of text-justify values commonly used in East Asian scripts"
               src="text-justify-east-asia.png" height="376" width="491"></p>
        <p class="caption">Values of 'text-justify': ''inter-word'', ''auto'', and ''distribute''</p>
      </div>
-->

    <p>The exact justification algorithm is UA-dependent;
      however, CSS provides some general guidelines...

<h4 id="expanding-text">
Expanding and Compressing Text</h4>

  <p>When justifying text, the user agent takes the remaining space between
    the ends of a line's contents and the edges of its line box, and
    distributes that space throughout its contents so that the contents
    exactly fill the line box.
    The user agent may alternatively distribute negative space,
    putting more content on the line than would otherwise fit under normal spacing conditions.

  <p>An <dfn>expansion opportunity</dfn> is
    a point where the justification algorithm may alter spacing within the text.
    An expansion opportunity can be provided by a single <i>character</i>
    (such as a <i>word separator</i>),
    or by the juxtaposition of two <i>characters</i>.
    Space distributed by justification is <em>in addition to</em>
    the optimal spacing defined by the 'letter-spacing' or 'word-spacing' properties.
    However, when space is distributed to a <i>word separator</i> <i>expansion opportunity</i>,
    it is applied under the same rules as for 'word-spacing'.
    Similarly, when space is distributed an <i>expansion opportunity</i> between two <i>characters</i>,
    it is applied under the same rules as for 'letter-spacing'.

  <p>A justification algorithm may divide <i>expansion opportunities</i> into different priority levels.
    All <i>expansion opportunities</i> within a given level
    are expanded or compressed at the same priority,
    regardless of which <i>characters</i> created that opportunity.
    For example, if <i>expansion opportunities</i> between two Han characters
    and between two Latin <i>letters</i> are defined to be at the same level
    (as they are in the ''distribute'' justification style),
    they are not treated differently because they originate from different <i>characters</i>.

<h4 id="justify-symbols">
Handling Symbols and Punctuation</h4>

    <p>When determining <i>expansion opportunities</i>,
      characters from the Unicode Symbols (S*) and Punctuation (P*) classes
      are generally treated the same as a <i>letter</i>:
      in the case of ''inter-word'', as a Latin <i>letter</i>;
      in the case of ''distribute'', as a Han <i>letter</i>;
      and in the case of ''auto'', as a <i>letter</i> of the dominant script.

    <p>However, by typographic tradition there may be additional rules 
      controlling the justification of symbols and punctuation.
      Therefore, the UA may reassign specific characters
      or introduce additional levels of prioritization
      to handle <i>expansion opportunities</i> involving symbols and punctuation.

    <p class="example">
      For example, there are traditionally no <i>expansion opportunities</i>
      between consecutive EM DASH U+2014, HORIZONTAL BAR U+2015, HORIZONTAL
      ELLIPSIS U+2026, or TWO DOT LEADER U+2025 characters [[JLREQ]]; thus
      a UA might assign these characters to a “never” prioritization level.
      As another example, certain fullwidth punctuation characters are
      considered to contain an <i>expansion opportunity</i> in Japanese.
      The UA might therefore assign these characters to a higher prioritization
      level than the opportunities between ideographic characters.

<h4 id="justify-limits">
Unexpandable Text</h4>

    <p>The 'word-spacing' property can specify limits on
      <i>expansion opportunities</i> introduced by <i>word separators</i>.
      How any remaining space is distributed once all <i>expansion opportunities</i>
      reach their specified limits is up to the UA.
    
    <p>If the inline contents of a line cannot be stretched to the full width of the line box,
      then they must be aligned as specified by the 'text-align-last' property.
      (If 'text-align-last' is ''justify'', then
       they must be aligned as for ''center'' if 'text-justify' is ''distribute'',
       and as ''start'' otherwise.)

<h4 id="justify-cursive">
Cursive Scripts</h4>

    <p>Justification <em>must not</em> introduce gaps between <i>letters</i>
      of <i>cursive scripts</i> such as Arabic.
      If it is able, the UA <em>may</em>
      translate space distributed to <i>expansion opportunities</i> within a run of such <i>letters</i>
      into some form of cursive elongation for that run.
      It otherwise <em>must</em> assume that no <i>expansion opportunity</i> exists
      between any pair of <i>cursive script</i> <i>letters</i>.

<h4 id="justify-algos">
Possible Algorithms</h4>

  <p>The guidelines in this level of CSS do not describe a complete
  justification algorithm. They are merely a minimum set of requirements
  that a complete algorithm should meet. Limiting the set of requirements
  gives UAs some latitude in choosing a justification algorithm that
  meets their needs and desired balance of quality, speed, and complexity.


  <div class="example">
    <p>For instance, a basic but fast ''inter-word'' justification algorithm
    might use a simple greedy method for determining line breaks,
    then distribute leftover space.
    This algorithm could follow the guidelines by expanding word spaces first,
    expanding between letters only if 'word-spacing' hit a limit.

    <p>A more sophisticated but slower ''inter-word'' justification algorithm
    might use a Knuth/Plass method
    where <i>expansion opportunities</i> and limits were assigned weights
    and assessed with other line breaking considerations.
    This algorithm could follow the guidelines by giving more weight
    to <i>word separators</i> than letter spacing.
  </div>

  <div class="example">
    <p>A UA can also tailor its justification rules by language,
    to produce results more closely aligned to the typography of that language.
    For example, it's not defined whether expansion or compression is preferred,
    so a UA may, for example, bias towards compression for CJK languages
    but towards expansion for Western alphabetic languages.

    <p>As another example, 
    3.8 Line Adjustment in [[JLREQ]] gives an example of a set of rules for
    how a text formatter can justify Japanese text.
    A UA could use this algorithm when the 'text-justify' property is ''auto''.
    However, since the rules described in the document specifically target Japanese,
    they may produce non-optimal results
    when used to justify other languages such as English.
    The UA could adapt the rules to accommodate other scripts by, for instance,
    omitting the rule to compress half-width spaces (rule a. of 3.8.3).
    Or it could keep the rule, but only enable it when the content language is known to be Japanese.
  </div>

  <p>The UA may enable or break optional ligatures or use other font features
  such as alternate glyphs or glyph compression
  to help justify the text under any method.
  This behavior is not controlled by this level of CSS.
  However, UAs <em>must not</em> break required ligatures
  or otherwise disable features required to correctly shape complex scripts.

<h2 id="spacing">
  Spacing</h2>

  <p>CSS offers control over text spacing
  via the 'word-spacing' and 'letter-spacing' properties, which specify additional space
  around <i>word separators</i> or between <i>characters</i>, respectively.
  Level 3 offers the ability to control the justification behavior of 'word-spacing'.
  In addition the 'word-spacing' property can now be specified in percentages,
  making it possible to, for example, double or eliminate word spacing.

  <div class="example">
    <p>In the following example, word spacing is halved, but may expand up
    to its full amount if needed for text justification.
    <pre>p { word-spacing: -50% 0%; }</pre>
  </div>

<h3 id="word-spacing">
Word Spacing: the 'word-spacing' property</h3>

  <table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>word-spacing</dfn>
    <tr>
      <th><a href="#values">Value</a>:
      <td>[ normal | <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var>]{1,3}
    <tr>
      <th>Initial:
      <td>normal
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>yes
    <tr>
      <th>Percentages:
      <td>refers to width of the affected glyph
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&#160;value:
      <td>an optimum, minimum, and maximum value,
        each consisting of either an absolute length, a percentage, or the keyword ''normal''
  </table>

    <p>This property specifies the optimum, maximum, and minimum spacing
      (in that order) between &ldquo;words&rdquo;.
      Missing values are assumed to be ''normal''.
      Values are interpreted as defined below:

  <dl>
    <dt><dfn title="word-spacing:normal">''normal''</dfn>
      <dd>Specifies normal spacing
        as defined by the current font and/or the user agent;
        see <a href="#normal-spacing">below</a>.
        A ''normal'' optimum spacing value computes to zero.
    <dt><dfn title="word-spacing:&lt;length&gt;">''&lt;length&gt;''</dfn>
      <dd>Specifies extra spacing <em>in addition to</em>
        the intrinsic inter-word spacing defined by the font.
        Values may be negative, but there may be implementation-dependent limits.
    <dt><dfn title="word-spacing:&lt;percentage&gt;">''&lt;percentage&gt;''</dfn>
      <dd>Specifies the additional spacing as a percentage of the affected
        character's <i>advance measure</i>.
  </dl>

  <p>Additional spacing is applied to each <i>word separator</i>
    left in the text after the <a href="#white-space-rules">white space processing rules</a> have been applied,
    and should be applied half on each side of the character
    unless otherwise dictated by typographic tradition.

  <div class="example">
    <p>The following example will make all the spaces between words in Arabic
    be rendered as zero-width, and double the width of each space in English:

    <pre>:lang(ar) { word-spacing: -100%; }
<!--  -->:lang(en) { word-spacing: 100%; }</pre>

    <p>The following example will <em>add</em> half the the width of the
      &ldquo;0&rdquo; glyph to word spacing character [[CSS3VAL]]:
    <pre>p { word-spacing: 0.5ch; }</pre>
  </div>

  <p>In the absence of justification the optimum spacing must be used.
    The text justification process may alter the spacing from its optimum
    (see the <a href="#text-justify">'text-justify'</a> property, above)
    but must not violate the minimum spacing limit
    and should also avoid exceeding the maximum.
    The UA may also use the difference between the minimum/maximum limits
    and the optimum as input into a weighting algorithm for justification.

  <p>The used optimum and maximum spacing is floored at the minimum.
    Similarly if the maximum is less than the optimum,
    then the used optimum is limited to the used maximum.

  <p><dfn id="normal-spacing">Normal spacing</dfn>:
    Although ''normal'' minimum and maximum spacing limits are UA-defined,
    they must be defined relative to the optimum
    so that the limits increase and decrease with changes to the optimum spacing.
    Normal limits may also vary according to
    the value of the <a href="#text-justify">'text-justify'</a> property,
    the element's language,
    some measure of the amount of text on a line (e.g. block width divided by font size),
    and/or other factors.

    <p><dfn id="word-separator" title="word-separator character | word separator">Word-separator characters</dfn> include 
      the space (U+0020), the no-break space (U+00A0), the Ethiopic word space (U+1361),
      the Aegean word separators (U+10100,U+10101), the Ugaritic word divider (U+1039F),
      and the Phoenician Word Separator (U+1091F).

      If there are no word-separator characters, or if a word-separating
      character has a zero advance width (such as the zero width space U+200B)
      then the user agent must not create an additional spacing between words.

      General punctuation and fixed-width spaces (such as U+3000 and U+2000
      through U+200A) are not considered word-separator characters.</p>

  <h3 id="letter-spacing">
    Tracking: the 'letter-spacing' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>letter-spacing</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>normal | <var>&lt;length&gt;</var>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>an absolute length or the keyword ''normal''
        </tr>
    </table>

    <p>This property specifies additional spacing (tracking)
      between adjacent <i>characters</i>.
      Letter-spacing is applied after
      <a href="http://www.w3.org/TR/css3-writing-modes/#text-direction">bidi reordering</a>
      and is in addition to any 'word-spacing'.
      Values have the following meanings:

  <dl>
    <dt><dfn title="word-spacing:normal">''normal''</dfn>
      <dd>Specifies normal spacing between <i>characters</i>
        as defined by the current font.
        Typically this is zero.
    <dt><dfn title="word-spacing:&lt;length&gt;">''&lt;length&gt;''</dfn>
      <dd>Specifies <em>additional</em> spacing between <i>characters</i>.
        Values may be negative, but there may be implementation-dependent limits.
  </dl>

    <p class="issue">CSS2.1 defines that 'letter-spacing' values other than ''normal''
     forbid the adjustment of letter-spacing during justification.
     This means that tracking can't be used in conjunction with, e.g. CJK justification methods.
     However, allowing it would mean we need a control for disabling it;
     German, for example, avoids letter-spacing for justification because it's used for emphasis.
     See <a href="http://lists.w3.org/Archives/Public/www-style/2013May/0280.html">this thread</a>.

    <p>For the purpose of 'letter-spacing', each consecutive run of atomic
      inlines (such as images and inline blocks) is treated as a single
      <i>character</i>.

    <p>Letter-spacing must not be applied at the beginning or at the end of a line.

  <div class="example">
    <p>Because letter-spacing is not applied at the beginning or end of a line,
    text always fits flush with the edge of the block.
    <pre>
<!-- -->p    { letter-spacing: 1em; }

<!-- -->&lt;p>abc&lt;/p></pre>

    <p class="ls-ex good ls-fixed-width color-box" style="text-align: left">a&emsp;b&emsp;c</p>
    <p class="ls-ex good ls-fixed-width color-box" style="text-align: right">a&emsp;b&emsp;c</p>

    <p>UAs therefore must not append letter spacing to the right or trailing edge of a line:</p>

    <p class="ls-ex bad ls-fixed-width color-box" style="text-align: right">a&emsp;b&emsp;c&emsp;</p>
  </div>

       Letter spacing between two <i>characters</i> effectively “belongs”
       to the innermost element element that contains the two <i>characters</i>:
       the total letter spacing between two adjacent <i>characters</i> (after bidi reordering)
       is specified by and rendered within
       the innermost element that <em>contains</em> the boundary between the two <i>characters</i>.

  <div class="example">
    <p>A given value of 'letter-spacing' only affects the spacing
    between characters completely contained within the element for which it is specified:

    <pre>
<!-- -->p    { letter-spacing: 1em; }
<!-- -->span { letter-spacing: 2em; }

<!-- -->&lt;p>a&lt;span>bb&lt;/span>c&lt;/p></pre>

    <p class="ls-ex">a&emsp;<span class="color-box">b&emsp;&emsp;b</span>&emsp;c</p>

    <p>This also means that applying 'letter-spacing' to
    an element containing only a single character
    has no effect on the rendered result:

    <pre>
<!-- -->p    { letter-spacing: 1em; }
<!-- -->span { letter-spacing: 2em; }

<!-- -->&lt;p>a&lt;span>b&lt;/span>c&lt;/p></pre>

    <p class="ls-ex">a&emsp;<span class="color-box">b</span>&emsp;c</p>

    <p>An inline box only includes
    letter spacing between characters completely contained within that element:

    <pre>
<!-- -->p    { letter-spacing: 1em; }

<!-- -->&lt;p>a&lt;span>bb&lt;/span>c&lt;/p></pre>

    <p class="ls-ex good">a&emsp;<span class="color-box">b&emsp;b</span>&emsp;c</p>

    <p>It is incorrect to include the letter spacing on the right or trailing edge of the element:

    <p class="ls-ex bad">a&emsp;<span class="color-box">b&emsp;b&emsp;</span>c</p>

    <p>Letter spacing is inserted <strong>after</strong> RTL reordering,
    so the letter spacing applied to the inner span below has no effect,
    since after reordering the 'c' doesn't end up next to '&#x5d0;':
    <pre>
<!-- -->p    { letter-spacing: 1em; }
<!-- -->span { letter-spacing: 2em; }

<!-- -->&lt;!-- abc followed by Hebrew letters alef (&#x5d0;), bet (&#x5d1;) and gimel (&#x5d2;) -->
<!-- -->&lt;!-- Reordering will display these in reverse order. --&gt;
<!-- --><bdo dir=ltr>&lt;p>ab&lt;span>c&#x5d0;&lt;/span>&#x5d1;&#x5d2;&lt;/p></bdo></pre>

    <p class="ls-ex">a&emsp;b</span>&emsp;<span class="color-box">c</span>&emsp;<span class="color-box">&#x5d0;</span>&emsp;&#x5d1;&emsp;&#x5d2;</p>
  </div>

    <p>Letter-spacing ignores zero-width characters (such as those from the
      Unicode Cf category).
    
    <p class="example">For example, 'letter-spacing' applied to
      <code>A&amp;zwsp;B</code> is identical to <code>AB</code>,
      regardless of where any element boundaries might fall.

    <p>When the effective letter-spacing between two characters is not zero
      (due to either <a href="#text-justify">justification</a>
      or non-zero computed 'letter-spacing'),
      user agents should not apply optional ligatures.</p>

    <p class="example">
      For example, if the word “filial” is letter-spaced,
      an “fi” ligature should not be used
      as it will prevent even spacing of the text.

    <p>UAs may apply letter-spacing to cursive scripts. In this case, UAs
      should extend the space between disjoint characters as specified above
      <em>and</em> extend the visible connection between cursively connected
      characters by the same amount (rather than leaving a gap). The UA may
      use glyph substitution or other font capabilities to spread out the
      letters. If the UA  cannot expand a cursive script without breaking
      the cursive connections, it should not apply letter-spacing between
      characters of that script at all.</p>
    <p class="issue">Current UAs just put gaps between joined letters in cursive scripts.

<h2 id="edge-effects">
  Edge Effects</h2>

  <p>Edge effects control
    the indentation of lines with respect to other lines in the block ('text-indent')
    and how content is measured at the start and end edges of a line ('hanging-punctuation').

  <h3 id="text-indent">
    First Line Indentation: the 'text-indent' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>text-indent</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>[ <span class="value-inst-length"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length">&lt;length&gt;</a></span>
              | <span class="value-inst-percentage"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage">&lt;percentage&gt;</a></span>
              ] && hanging? && each-line?
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>0</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block containers</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of containing block</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>the percentage as specified or the absolute length,
            plus any keywords as specified
        </tr>
    </table>

    <p>This property specifies the indentation applied to lines of inline
      content in a block. The indent is treated as a margin applied to
      the start edge of the line box. Unless otherwise specified via the
      ''each-line'' and/or ''hanging'' keywords, only lines that are the
      <a href="http://www.w3.org/TR/CSS21/selector.html#first-line-pseudo">first
      formatted line</a> of an element are affected. For example, the first line of
      an anonymous block box is only affected if it is the first child
      of its parent element.

    <p>Values have the following meanings:</p>

    <dl>
      <dt>''&lt;length&gt;''</dt>
      <dd>Gives the amount of the indent as an absolute length.</dd>
      <dt>''&lt;percentage&gt;''</dt>
      <dd>Gives the amount of the indent as a percentage of the containing
        block's logical width.</dd>
      <dt><dfn>''each-line''</dfn>
      <dd>Indentation affects the first line of the block container as
        well as each line after a <i>forced line break</i>,
        but does not affect lines after a <i>soft wrap break</i>.
      <dt><dfn>''hanging''</dfn>
      <dd>Inverts which lines are affected.</dd>
    </dl>

    <div class="example">
      <p>If 'text-align' is 'start' and 'text-indent' is '5em' in
      left-to-right text with no floats present, then first line of text
      will start 5em into the block:</p>

      <pre><!--
       -->     Since CSS1 it has been possible
<!--   -->to indent the first line of a block
<!--   -->element using the 'text-indent'
<!--   -->property.<!--
   --></pre>
    </div>

    <p class="note">Note that since the 'text-indent' property inherits,
      when specified on a block element, it will affect descendant
      inline-block elements.
      For this reason, it is often wise to specify 'text-indent: 0' on
      elements that are specified 'display: inline-block'.</p>

  <h3 id="hanging-punctuation">
    Hanging Punctuation: the 'hanging-punctuation' property</h3>

    <table class="propdef">
        <tr>
          <th>Name:</th>
          <td><dfn>hanging-punctuation</dfn></td>
        </tr>
        <tr>
          <th><a href="#values">Value</a>:
          <td>none | [ first || [ force-end | allow-end ] || last ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>inline elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
    </table>

    <p>This property determines whether a punctuation mark, if one is present,
      <i>hangs</i> and may be placed outside the line box (or in the indent)
      at the start or at the end of a line of text.

    <p class="note">Note that if there is not sufficient padding on the
      block container, 'hanging-punctuation' can trigger overflow.</p>

    <p>When a punctuation mark <dfn title="hang">hangs</dfn>, it is not considered
      when measuring the line's contents for fit, alignment, or justification.
      Depending on the line's alignment, this may (or may not)
      result in the mark being placed outside the line box.

    <p>Values have the following meanings:</p>

    <dl>
      <dt><dfn title="hanging-punctuation:none">''none''</dfn></dt>
        <dd>No character <i>hangs</i>.</dd>
      <dt><dfn title="hanging-punctuation:first">''first''</dfn></dt>
        <dd>An opening bracket or quote at the start of the
          <a href="http://www.w3.org/TR/CSS21/selector.html#first-line-pseudo">first
          formatted line</a> of an element <i>hangs</i>.
          This applies to all characters in the Unicode categories Ps, Pf, Pi.</dd>
      <dt><dfn title="hanging-punctuation:last">''last''</dfn></dt>
        <dd>A closing bracket or quote at the end of the
          <i>last formatted line</i> of an element <i>hangs</i>.
          This applies to all characters in the Unicode categories Pe, Pf, Pi.</dd>
      <dt><dfn title="hanging-punctuation:force-end">''force-end''</dfn></dt>
        <dd>A stop or comma at the end of a line <i>hangs</i>.</dd>
      <dt><dfn title="hanging-punctuation:allow-end">''allow-end''</dfn></dt>
        <dd>A stop or comma at the end of a line <i>hangs</i> if it
          does not otherwise fit prior to justification.</dd>
    </dl>

    <p>Non-zero start and end borders/padding between
      a <i>hang</i>eable mark and the edge of the line prevent the mark from hanging.
      For example, a period at the end of an inline box with end padding
      does not <i>hang</i> at the end edge of a line.
      At most one punctuation character may <i>hang</i> at each edge of the line.

    <p>A <i>hanging</i> punctuation mark is still enclosed inside its inline box
      and participates in text justification:
      its character advance width is just not measured when determining
      how much content fits on the line,
      how much the line's contents need to be expanded or compressed for justification,
      or how to position the content within the line box for text alignment.

    <p><dfn>Stops and commas</dfn> allowed to <i>hang</i> include:
    <table class="data">
      <tr><td>U+002C <td>&#x002C; <td>COMMA
      <tr><td>U+002E <td>&#x002E; <td>FULL STOP
      <tr><td>U+060C <td>&#x060C; <td>ARABIC COMMA
      <tr><td>U+06D4 <td>&#x06D4; <td>ARABIC FULL STOP
      <tr><td>U+3001 <td>&#x3001; <td>IDEOGRAPHIC COMMA
      <tr><td>U+3002 <td>&#x3002; <td>IDEOGRAPHIC FULL STOP
      <tr><td>U+FF0C <td>&#xFF0C; <td>FULLWIDTH COMMA
      <tr><td>U+FF0E <td>&#xFF0E; <td>FULLWIDTH FULL STOP
      <tr><td>U+FE50 <td>&#xFE50; <td>SMALL COMMA
      <tr><td>U+FE51 <td>&#xFE51; <td>SMALL IDEOGRAPHIC COMMA
      <tr><td>U+FE52 <td>&#xFE52; <td>SMALL FULL STOP
      <tr><td>U+FF61 <td>&#xFF61; <td>HALFWIDTH IDEOGRAPHIC FULL STOP
      <tr><td>U+FF64 <td>&#xFF64; <td>HALFWIDTH IDEOGRAPHIC COMMA
    </table>
    <p>The UA may include other characters as appropriate.

    <p class="note">The CSS Working Group would appreciate if UAs including
      other characters would <a href="#status">inform the working group</a>
      of such additions.</p>

    <div class="example">
      <p>The ''allow-end'' and ''force-end'' are two variations of
        hanging punctuation used in East Asia.</p>
      <div>
      <div class="sidefigure">
        <img src="hanging-punctuation-allow-end.png"
          width="202" height="51"
          alt="hanging-punctuation: allow-end">
      </div>
      <pre><code class="css"><!--
     -->p {
<!-- -->   text-align: justify;
<!-- -->   hanging-punctuation: allow-end;
<!-- -->}
<!----></code></pre>
      <div class="sidefigure">
        <img src="hanging-punctuation-force-end.png"
          width="202" height="51"
          alt="hanging-punctuation: force-end">
      </div>
      <pre><code class="css"><!--
     -->p {
<!-- -->   text-align: justify;
<!-- -->   hanging-punctuation: force-end;
<!-- -->}
<!----></code></pre>
      </div>
      <p>The punctuation at the end of the first line for ''allow-end''
        does not hang, because it fits without hanging.
        However, if ''force-end'' is used, it is forced to hang.
        The justification measures the line without the hanging punctuation.
        Therefore when the line is expanded, the punctuation is pushed outside the line.</p>
    </div>

<h3 id="bidi-linebox">
Bidirectionality and Line Boxes</h3>

  <p>The <a href="http://www.w3.org/TR/css3-writing-modes/#start"><i>start</i></a>
    and <a href="http://www.w3.org/TR/css3-writing-modes/#end"><i>end</i></> edges
    of a line box are determined by the <i>inline base direction</i> of the line box.
    In most cases, this is given by its containing block's computed 'direction'.
    
  <p>However if its containing block has ''unicode-bidi: plaintext'' [[!CSS3-WRITING-MODES]],
    the line box's <i>inline base direction</i> must be determined
    by the <i>base direction</i> of the <i>bidi paragraph</i> to which it belongs:
    that is, the <i>bidi paragraph</i> for which the line box holds content.
    An empty line box
    (i.e. one that contains no atomic inlines or
     characters other than the line-breaking character, if any),
    takes its <i>inline base direction</i> from the preceding line box (if any), or,
    if this is the first line box in the containing block,
    then from the 'direction' property of the containing block.

  <div class="example">
    <p>In the following example, assuming the <code>&lt;block&gt;</code>
    is a preformatted block (''display: block; white-space: pre'') inheriting
    ''text-align: start'', every other line is right-aligned:</p>
    <pre>&lt;block style="unicode-bidi: plaintext"&gt;
<!-- -->  Latin
<!-- -->  &#x0648;·&#x06A9;&#x0645;&#x06CC;
<!-- -->  Latin
<!-- -->  &#x0648;·&#x06A9;&#x0645;&#x06CC;
<!-- -->  Latin
<!-- -->  &#x0648;·&#x06A9;&#x0645;&#x06CC;
<!-- -->&lt;/block&gt;</pre>
  </div>

  <p class="note">Note that the inline base direction determined here
    applies to the line box itself, and not to its contents.
    It affects 'text-align', 'text-align-last', 'text-indent', and 'hanging-punctuation',
    i.e. the position and alignment of its contents with respect to its edges.
    It does not affect the formatting or ordering of its content.

  <div class="example">
    <p>In the following example:
    <pre>
<!-- -->&lt;para style="display: block; direction: rtl; unicode-bidi:plaintext">
<!-- -->&lt;quote style="unicode-bidi:plaintext">שלום!&lt;/quote>", he said.
<!-- -->&lt;/para&gt;</pre>

    <p>The result should be a left-aligned line looking like this:
    <pre>"!&#1513;&#1500;&#1493;&#1501;", he said.</pre>

    <p>The line is left-aligned
      (despite the containing block having ''direction: rtl'')
      because the containing block (the <code>&lt;para></code>) has ''unicode-bidi:plaintext'',
      and the line box belongs to a bidi paragraph that is LTR.
      This is because that paragraph's first character with a strong direction
      is the LTR "h" from "he". The RTL "שלום!" does precede the "he",
      but it sits in its own bidi-isolated paragraph that is <em>not</em>
      immediately contained by the <code>&lt;para&gt;</code>,
      and is thus irrelevent to the line box's alignment.
      From from the standpoint of the bidi paragraph immediately contained
      by the <code>&lt;para&gt;</code> containing block,
      the <code>&lt;quote&gt;</code>&rsquo;s bidi-isolated paragraph inside it is,
      by definition, just a neutral U+FFFC character,
      so the immediately-contained paragraph becomes LTR by virtue
      of the "he" following it.
  </div>

  <div class="example">
    <pre>
<!-- -->&lt;fieldset style="direction: rtl">
<!-- -->&lt;textarea style="unicode-bidi:plaintext">
<!-- -->
<!-- -->Hello!
<!-- -->
<!-- -->&lt;/textarea>
<!-- -->&lt;/fieldset></pre>

    <p>As expected, the "Hello!" should be displayed LTR
      (i.e. with the exclamation mark on the right end,
      despite the <code>&lt;textarea></code>’s ''direction:rtl'')
      and left-aligned.
      This makes the empty line following it left-aligned as well,
      which means that the caret on that line should appear at its
      left edge. The first empty line, on the other hand, should
      be right-aligned, due to the RTL direction of its containing
      paragraph, the <code>&lt;textarea></code>.
  </div>

<h2 id="conformance">
Conformance</h2>

<h3 id="conventions">
Document Conventions</h3>

  <p>Conformance requirements are expressed with a combination of
  descriptive assertions and RFC 2119 terminology. The key words “MUST”,
  “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
  “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
  document are to be interpreted as described in RFC 2119.
  However, for readability, these words do not appear in all uppercase
  letters in this specification.

  <p>All of the text of this specification is normative except sections
  explicitly marked as non-normative, examples, and notes. [[!RFC2119]]</p>

  <p>Examples in this specification are introduced with the words “for example”
  or are set apart from the normative text with <code>class="example"</code>,
  like this:

  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from the
  normative text with <code>class="note"</code>, like this:

  <p class="note">Note, this is an informative note.</p>

<h3 id="conformance-classes">
Conformance Classes</h3>

  <p>Conformance to CSS Text Level 3
  is defined for three conformance classes:
  <dl>
    <dt><dfn title="style sheet!!as conformance class">style sheet</dfn>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
      style sheet</a>.
    <dt><dfn>renderer</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that interprets the semantics of a style sheet and renders
      documents that use them.
    <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to CSS Text Level 3
  if all of its declarations that use properties defined in this module
  have values that are valid according to the generic CSS grammar and the
  individual grammars of each property as given in this module.

  <p>A renderer is conformant to CSS Text Level 3
  if, in addition to interpreting the style sheet as defined by the
  appropriate specifications, it supports all the features defined
  by CSS Text Level 3 by parsing them correctly
  and rendering the document accordingly. However, the inability of a
  UA to correctly render a document due to limitations of the device
  does not make the UA non-conformant. (For example, a UA is not
  required to render color on a monochrome monitor.)

  <p>An authoring tool is conformant to CSS Text Level 3
  if it writes style sheets that are syntactically correct according to the
  generic CSS grammar and the individual grammars of each feature in
  this module, and meet all other conformance requirements of style sheets
  as described in this module.

<h3 id="partial">
Partial Implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
  assign fallback values, CSS renderers <strong>must</strong>
  treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
  as appropriate</a>) any at-rules, properties, property values, keywords,
  and other syntactic constructs for which they have no usable level of
  support. In particular, user agents <strong>must not</strong> selectively
  ignore unsupported component values and honor supported values in a single
  multi-value property declaration: if any value is considered invalid
  (as unsupported values must be), CSS requires that the entire declaration
  be ignored.</p>

<h3 id="experimental">
Experimental Implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
  reserves a <a href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
  syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage
  in the W3C process, all implementations of a CSS feature are considered
  experimental. The CSS Working Group recommends that implementations
  use a vendor-prefixed syntax for such features, including those in
  W3C Working Drafts. This avoids incompatibilities with future changes
  in the draft.
  </p>

<h3 id="testing">Non-Experimental Implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
  non-experimental implementations are possible, and implementors should
  release an unprefixed implementation of any CR-level feature they
  can demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
  implementations, the CSS Working Group requests that non-experimental
  CSS renderers submit an implementation report (and, if necessary, the
  testcases used for that implementation report) to the W3C before
  releasing an unprefixed implementation of any CSS features. Testcases
  submitted to W3C are subject to review and correction by the CSS
  Working Group.

  <p>Further information on submitting testcases and implementation reports
  can be found from on the CSS Working Group's website at
  <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
  Questions should be directed to the
  <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
  mailing list.

<h3 id="cr-exit-criteria">
CR Exit Criteria</h3>

  <p>
  For this specification to be advanced to Proposed Recommendation,
  there must be at least two independent, interoperable implementations
  of each feature. Each feature may be implemented by a different set of
  products, there is no requirement that all features be implemented by
  a single product. For the purposes of this criterion, we define the
  following terms:

  <dl>
    <dt>independent <dd>each implementation must be developed by a
    different party and cannot share, reuse, or derive from code
    used by another qualifying implementation. Sections of code that
    have no bearing on the implementation of this specification are
    exempt from this requirement.

    <dt>interoperable <dd>passing the respective test case(s) in the
    official CSS test suite, or, if the implementation is not a Web
    browser, an equivalent test. Every relevant test in the test
    suite should have an equivalent test created if such a user
    agent (UA) is to be used to claim interoperability. In addition
    if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those
    equivalent tests in the same way for the purpose of
    interoperability. The equivalent tests must be made publicly
    available for the purposes of peer review.

    <dt>implementation <dd>a user agent which:

    <ol class=inline>
      <li>implements the specification.

      <li>is available to the general public. The implementation may
      be a shipping product or other publicly available version
      (i.e., beta version, preview release, or “nightly build”).
      Non-shipping product releases must have implemented the
      feature(s) for a period of at least one month in order to
      demonstrate stability.

      <li>is not experimental (i.e., a version specifically designed
      to pass the test suite and is not intended for normal usage
      going forward).
    </ol>
  </dl>

  <p>The specification will remain Candidate Recommendation for at least
  six months.

<h2 class="no-num" id="acknowledgements">
  Appendix A: Acknowledgements</h2>

  <p>This specification would not have been possible without the help from:
    Ayman Aldahleh, Bert Bos, Tantek Çelik, Stephen Deach, John Daggett,
    Martin Dürst,
    Laurie Anna Edlund, Ben Errez, Yaniv Feinberg, Arye Gittelman, Ian
    Hickson, Martin Heijdra, Richard Ishida, Masayasu Ishikawa,
    Michael Jochimsen, Eric LeVine, Ambrose Li, Håkon Wium Lie, Chris Lilley,
    Ken Lunde, Nat McCully, Shinyu Murakami, Paul Nelson, Chris Pratley, Marcin Sawicki,
    Arnold Schrijver, Rahul Sonnad, Michel Suignard, Takao Suzuki,
    Frank Tang, Chris Thrasher, Etan Wexler, Chris Wilson, Masafumi Yabe
    and Steve Zilles.</p>

<h2 class="no-num">Appendix B: References</h2>

<h3 class="no-num" id="normative-ref">Normative references</h3>
<!--normative-->

<h3 class="no-num" id="informative-ref">Informative references</h3>
<!--informative-->

<h2 class="no-num" id="changes">Appendix C:
Changes</h2>
  <h3 class="no-num" id="recent-changes">
  Changes from the <a href="http://www.w3.org/TR/2012/WD-css3-text-20121113/">November
  2012 CSS3 Text <abbr title="Working Draft">WD</abbr></a></h3>

  <p>Major changes include:</p>
  <ul>
    <li>Removed ''inter-ideograph'', ''inter-cluster'', and ''kashida'' values of 'text-justify'.
    <li>Dropped minimum and maximum values in 'letter-spacing'.
    <li>Changed interpretation of three-value syntax in 'word-spacing' to default missing values to ''normal''.
    <li>Removed <var>&lt;string&gt;</var> value of 'text-align'.
  </ul>

  <p>Significant details updated:</p>
  <ul>
    <li>
  </ul>

<h2 class="no-num" id="default-stylesheet">
Appendix D: Default UA Stylesheet</h2>

    <p>This appendix is informative, and is to help UA developers to implement
      default stylesheet, but UA developers are free to ignore or change.</p>

    <div class="example">
      <pre>
<!-- -->/* make list items and option elements align together */
<!-- -->li, option { text-align: match-parent; }</pre>
    </div>
    <p class="feedback issue">If you find any issues, recommendations to add, or corrections,
      please send the information to <a href="mailto:www-style@w3.org">www-style@w3.org</a>
      with <kbd>[css3-text]</kbd> in the subject line.</p>

<h2 class="no-num" id="script-groups">Appendix E: Scripts and Spacing</h2>

  <p><em>This appendix is normative.</em></p>
  
  <p>The following scripts in Unicode 6 are considered to be <dfn>cursive scripts</dfn>,
    and do not admit <i>expansion opportunities</i> between their letters:
      Arabic,
      Mandaic,
      Mongolian,
      N'Ko,
      Phags Pa,
      Syriac
<!--
  <p>Typographic behavior varies somewhat by language, but varies drastically
    by writing system. This appendix categorizes some common scripts in
    Unicode 6.0 according to their justification and spacing behavior. Category
    descriptions are descriptive, not prescriptive; the determining factor is
    the prioritization of <i>expansion opportunities</i>.

  <dl>
    <dt id="block-scripts"><dfn>block scripts</dfn></dt>
      <dd>CJK and by extension all Wide characters. (See [[!UAX11]])
        The following scripts are included:
        Bopomofo,
        Han,
        Hangul,
        Hiragana,
        Katakana,
        Yi
      </dd>
    <dt id="clustered-scripts"><dfn>clustered scripts</dfn></dt>
      <dd>Scripts that have discrete units but do not use spaces between words,
        such as many Southeast Asian systems.
        The following scripts are included:
        Javanese,
        Khmer,
        Lao,
        Myanmar,
        Thai,
      <span class="issue">This list is likely incomplete. What else fits here?</span>
      </dd>
    <dt id="connected-scripts"><dfn>connected scripts</dfn></dt>
      <dd>Devanagari, Ogham, and other scripts that use spaces between
        words and baseline connectors within words.
        By extension this category also includes any other Indic scripts
        whose typographic behavior is similar to Devanagari.
      The following scripts are included:
      Bengali,
      Brahmi,
      Devanagari,
      Gujarati,
      Gurmukhi,
      Kannada,
      Malayalam,
      Oriya?,
      Ogham,
      Tamil?,
      Telugu
      </dd>
    <dt id="cursive-scripts"><dfn>cursive scripts</dfn></dt>
      <dd>Arabic and similar inherently cursive scripts.
      The following scripts are included:
      Arabic,
      Mongolian,
      N'Ko,
      Phags Pa,
      Syriac
      </dd>
    <dt id="discrete-scripts"><dfn>discrete scripts</dfn></dt>
      <dd>Scripts that use spaces or visible word-separating
        punctuation between words and have discrete,
        unconnected (in print) units within words.
      The following scripts are included:
      Armenian,
      Bamum?,
      Braille,
      Canadian Aboriginal,
      Cherokee,
      Coptic,
      Cyrillic,
      Deseret,
      Ethiopic
      Greek,
      Hebrew,
      Kharoshthi,
      Latin,
      Lisu,
      Osmanya,
      Shavian,
      Tifinagh,
      Vai?
      </dd>
</dl>

<p>UAs should treat unrecognized scripts as <i>discrete</i>.

<p class="issue">This listing should ideally be exhaustive wrt Unicode.
Please <a href="#status">send</a> suggestions and corrections to the CSS
Working Group.</p>

<div class="note">
  <p>Guidelines for classification consider letter-spacing and justification:
  <ol>
    <li>If the script is cursive and may expand cursively but must not
      space between letters, it is <i>cursive</i>.
    <li>If the script primarily flexes word separators, it is either
      <i>discrete</i> or <i>connected</i>. <i>Discrete</i> scripts can
      space between letters. <i>Connected</i> scripts must not space
      between letters (typically because that would break the connections
      or otherwise look bad).
    <li>If the script commonly expands equally between its "letters"
      in native typesettings, it is either <i>block</i> or
      <i>clustered</i>. The exact classification depends on whether it
      always spaces when mixed with CJK and sometimes stays together
      when mixed with Thai and related scripts (<i>block</i>) or
      sometimes spaces when mixed with CJK and always spaces with Thai
      (<i>clustered</i>).
  </ol>
</div>
-->

<h2 class="no-num">Appendix F:
Text Processing Order of Operations</h2>

  <p>The following list defines the order of text operations. (Implementations
    are not bound to this order as long as the resulting layout is the same.)

  <ol>
    <li><a href="#white-space-phase-1">white space processing</a> part I (pre-wrapping)
    <li><a href="http://www.w3.org/TR/css3-writing-modes/#text-combine-horizontal">text combination</a> [[!CSS3-WRITING-MODES]]
    <li><a href="#text-transform">text transformation</a>
    <li><a href="#wrapping">text wrapping</a> while applying per line:
      <ol>
        <li><a href="#text-indent">indentation</a>
        <li><a href="http://www.w3.org/TR/css3-writing-modes/#text-direction">bidirectional reordering</a> [[!CSS21]] / [[!CSS3-WRITING-MODES]]
        <li><a href="#white-space-phase-2">white space processing</a> part II
        <li><a href="http://www.w3.org/TR/css3-writing-modes/#text-orientation">text orientation</a> [[!CSS3-WRITING-MODES]]
        <li>'letter-spacing' and 'word-spacing'
        <li><a href="http://www.w3.org/TR/css3-fonts/">font/glyph selection and positioning</a> [[!CSS21]] / [[!CSS3-FONTS]]
        <li><a href="#hanging-punctuation">hanging punctuation</a>
      </ol>
    <li><a href="#justification">justification</a> (which may affect glyph selection and/or text wrapping, looping back into that step)
    <li><a href="#text-align">text alignment</a>
  </ol>

<h2 class="no-num">Appendix G:
Full Property Index</h2>
<!-- properties -->

<!--
<h2 class="no-num" id="index">Appendix I:
Index</h2>
index-->

</body>
</html>
