CSS Syntax

<h2>Parsing</h2>

<h3>
Parsing CSS Documents</h3>

	<p>
		User agents must use the parsing rules described in this section to generate the CSSOM trees from text/css resources. 
		Together, these rules define what is referred to as the CSS parser.

	<p>
		This specification defines the parsing rules for CSS documents, whether they are syntactically correct or not. 
		Certain points in the parsing algorithm are said to be parse errors. 
		The error handling for parse errors is well-defined: 
		user agents must either act as described below when encountering such problems, 
		or must abort processing at the first error that they encounter for which they do not wish to apply the rules described below.

	<p>
		Conformance checkers must report at least one parse error condition to the user if one or more parse error conditions exist in the document and must not report parse error conditions if none exist in the document. 
		Conformance checkers may report more than one parse error condition if more than one parse error condition exists in the document. 
		Conformance checkers are not required to recover from parse errors.

<h3>
Overview of the Parsing Model</h3>

	<p>
		The input to the CSS parsing process consists of a stream of Unicode code points, 
		which is passed through a tokenization stage followed by a tree construction stage. 
		The output is a Stylesheet object.

	<p class='note'>
		Implementations that do not support scripting do not have to actually create a CSSOM Stylesheet object, 
		but the CSSOM tree in such cases is still used as the model for the rest of the specification.

<h3>
The input byte stream</h3>

	<p>
		...

<h3>
Determining the character encoding</h3>

	<p>
		...

<h3>
Preprocessing the input stream</h3>

	<p>
		The input stream consists of the characters pushed into it as the input byte stream is decoded or from the various APIs that directly manipulate the input stream.

	<p>
		One leading U+FEFF BYTE ORDER MARK character must be ignored if any are present in the input stream.

	<p class='note'>
		The requirement to strip a U+FEFF BYTE ORDER MARK character regardless of whether that character was used to determine the byte order is a willful violation of Unicode, motivated by a desire to increase the resilience of user agents in the face of na√Øve transcoders.

	<p>
		Any occurrences of any characters in the ranges U+0001 to U+0008, U+000E to U+001F, U+007F to U+009F, U+FDD0 to U+FDEF, and characters U+000B, U+FFFE, U+FFFF, U+1FFFE, U+1FFFF, U+2FFFE, U+2FFFF, U+3FFFE, U+3FFFF, U+4FFFE, U+4FFFF, U+5FFFE, U+5FFFF, U+6FFFE, U+6FFFF, U+7FFFE, U+7FFFF, U+8FFFE, U+8FFFF, U+9FFFE, U+9FFFF, U+AFFFE, U+AFFFF, U+BFFFE, U+BFFFF, U+CFFFE, U+CFFFF, U+DFFFE, U+DFFFF, U+EFFFE, U+EFFFF, U+FFFFE, U+FFFFF, U+10FFFE, and U+10FFFF are parse errors. These are all control characters or permanently undefined Unicode characters (noncharacters).

	<p>
		U+000D CARRIAGE RETURN (CR) characters and U+000A LINE FEED (LF) characters are treated specially. All CR characters must be converted to LF characters, and any LF characters that immediately follow a CR character must be ignored. Thus, newlines in HTML DOMs are represented by LF characters, and there are never any CR characters in the input to the tokenization stage.

	<p>
		The next input character is the first character in the input stream that has not yet been consumed or explicit ignored by the requirements in this section. Initially, the next input character is the first character in the input. The current input character is the last character to have been consumed.

	<p>
		The insertion point is the position (just before a character or just before the end of the input stream) where content inserted using document.write() is actually inserted. The insertion point is relative to the position of the character immediately after it, it is not an absolute offset into the input stream. Initially, the insertion point is undefined.

	<p>
		The "EOF" character in the tables below is a conceptual character representing the end of the input stream.

<h3>
Parse State</h3>

<h3>
Tokenization</h3>

	<p>
		...

<h4>
Definitions</h4>

	<p>
		This section defines several terms used during the tokenization phase.

	<dl>
		<dt><dfn>digit</dfn>
		<dd>
			A character between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).

		<dt><dfn>hex digit</dfn>
		<dd>
			A <i>digit</i>,
			or a character between U+0041 LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F), 
			or a character between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).

		<dt><dfn>uppercase letter</dfn>
		<dd>
			A character between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z).

		<dt><dfn>lowercase letter</dfn>
		<dd>
			A character between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL LETTER Z (z).

		<dt><dfn>letter</dfn>
		<dd>
			An <i>uppercase letter</i>
			or a <i>lowercase letter</i>.

		<dt><dfn>non-ASCII character</dfn>
		<dd>
			A character with a codepoint equal to or greater than U+00A0 NO-BREAK SPACE.

		<dt><dfn>newline</dfn>
		<dd>
			U+000A LINE FEED or U+000C FORM FEED. 
			<span class='note'>
				Note that U+000D CARRIAGE RETURN is not included in this definition, 
				as it is removed from the stream during preprocessing.
			</span>

		<dt><dfn>whitespace</dfn>
		<dd>A <i>newline</i>, U+0009 CHARACTER TABULATION, or U+0020 SPACE.

	</dl>

<h4>
<dfn>Data state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>whitespace</i>
		<dd>
			Emit a whitespace token.
			Switch to the <i>whitespace state</i>.

		<dt>U+0022 QUOTATION MARK (")
		<dd>
			Switch to the <i>double-quote-string state</i>.

		<dt>U+0023 NUMBER SIGN (#)
		<dd>
			Switch to the <i>hash state</i>.

		<dt>U+0027 APOSTROPHE (')
		<dd>
			Switch to the <i>single-quote-string state</i>.

		<dt>U+0028 LEFT PARENTHESIS (()
		<dd>
			Emit an open-paren token.
			Remain in this state.

		<dt>U+0029 RIGHT PARENTHESIS ())
		<dd>
			Emit a close-paren token.
			Remain in this state.

		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			If the <i title="next input character">next 2 input characters</i> are
			U+002D HYPHEN-MINUS
			U+003E GREATER-THAN SIGN
			(->),
			consume them,
			emit a CDC token,
			and remain in this state.

			<p>
				Otherwise,
				if the <i>next input character</i> is
				a <i>digit</i>
				or U+002E FULL STOP (.),
				switch to the <i>number-negative state</i>.
				Reconsume the <i>current input character</i>.

			<p>
				Otherwise,
				switch to the <i>identifier state</i>.
				Reconsume the <i>current input character</i>.

		<dt>U+002E FULL STOP (.)
		<dd>
			If the <i>next input character</i> is a digit,
			switch to the <i>number state</i>.
			Reconsume the <i>current input character</i>.

			<p>
				Otherwise,
				emit a delim token
				with its value set to U+002E FULL STOP (.).
				Remain in this state.

		<dt>U+002F SOLIDUS (/)
		<dd>
			If the <i>next input character</i> is U+002A ASTERISK (*),
			consume it
			and switch to the <i>comment state</i>.

			<p>
				Otherwise,
				emit a delim token
				with its value set to U+002F SOLIDUS (/).
				Remain in this state.

		<dt>U+003A COLON (:)
		<dd>
			Emit a colon token.
			Remain in this state.

		<dt>U+003B SEMICOLON (;)
		<dd>
			Emit a semicolon token.
			Remain in this state.

		<dt>U+003C LESS-THAN SIGN (&lt;)
		<dd>
			If the <i title="next input character">next 3 input characters</i> are
			U+0021 EXCLAMATION MARK
			U+002D HYPHEN-MINUS
			U+002D HYPHEN-MINUS
			(!--),
			consume them,
			emit a CDO token,
			and remain in this state.

			<p>
				Otherwise,
				emit a delim token 
				with its value set to U+003C LESS-THAN SIGN (&lt;).
				Remain in this state.

		<dt>U+0040 COMMERCIAL AT (@)
		<dd>
			Switch to the <i>at-keyword-start state</i>.

		<dt>U+005B LEFT SQUARE BRACKET ([)
		<dd>
			Emit an open-bracket token.
			Remain in this state.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			If the <i>next input character</i> is 
			a <i>newline</i>
			or EOF,
			emit a delim token
			with its value set to U+005C REVERSE SOLIDUS (\).
			Remain in this state.

			<p>
				Otherwise, switch to the <i>identifier state</i>.
				Reconsume the <i>current input character</i>.

		<dt>U+005D RIGHT SQUARE BRACKET (])
		<dd>
			Emit a close-bracket token.
			Remain in this state.

		<dt>U+007B LEFT CURLY BRACKET ({)
		<dd>
			Emit an open-brace token.
			Remain in this state.

		<dt>U+007C VERTICAL LINE (|)
		<dd>
			If the <i>next input character</i> is
			U+003D EQUALS SIGN (=),
			emit a dash-match token.

			<p>
				Otherwise,
				emit a delim token
				with its value set to U+007C VERTICAL LINE (|).
				Remain in this state.

		<dt>U+007D RIGHT CURLY BRACKET (})
		<dd>
			Emit a close-brace token.
			Remain in this state.

		<dt>U+007E TILDE (~)
		<dd>
			If the <i>next input character</i> is
			U+003D EQUALS SIGN (=),
			emit an includes-match token.

			<p>
				Otherwise,
				emit a delim token
				with its value set to U+007E TILDE (~).
				Remain in this state.

		<dt><i>digit</i>
		<dt>U+002B PLUS SIGN
		<dd>
			Switch to the <i>number state</i>.
			Reconsume the <i>current input character</i>.

		<dt>U+0055 LATIN CAPITAL LETTER U (U)
		<dt>U+0075 LATIN SMALL LETTER U (u)
		<dd>
			Switch to the <i>starts-with-u state</i>.

		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dd>
			Switch to the <i>identifier state</i>.
			Reconsume the <i>current input character</i>.

		<dt>EOF
		<dd>
			Emit of end-of-file token.

		<dt>anything else
		<dd>
			Emit a delim token
			with its value set to the <i>current input character</i>.
			Remain in this state.
	</dl>

<h4>
<dfn>Whitespace state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>whitespace</i>
		<dd>
			Do nothing,
			and remain in this state.

		<dt>anything else
		<dd>
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>Double-quote-string state</dfn></h4>

	<p>
		If a string token has not yet been created since entering this state,
		create a string token
		with its value initially set to the empty string.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+0022 QUOTATION MARK (")
		<dd>
			Emit the string token.
			Return to the <i>data state</i>.

		<dt>EOF
		<dd>
			Emit the string token.
			This is a <i>parse error</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			If the <i>next input character</i>
			is an EOF,
			this is a <i>parse error</i>.
			Append a U+005C REVERSE SOLIDUS (\)
			to the string token's value
			and emit the string token,
			then switch to the <i>data state</i>.

			<p>
				Otherwise,
				consume the <i>next input character</i>
				and append it to the string token's value.
				Remain in this state.

		<dt>anything else
		<dd>
			Append the <i>current input character</i>
			to the string token's value.
			Remain in this state.
	</dl>

<h4>
<dfn>Hash state</dfn></h4>

	<p>
		If a hash token has not yet been created since entering this state,
		create a hash token
		with its value initially set to the empty string.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>digit</i>
		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+002D HYPHEN-MINUS (-)
		<dt>U+005F LOW LINE (_)
		<dd>
			Append the <i>current input character</i>
			to the hash token's value.
			Switch to the <i>hash-rest state</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			Switch to the <i>hash-start-escape state</i>.

		<dt>anything else
		<dd>
			Emit a delim token 
			with its value set to U+0023 NUMBER SIGN (#).
			Switch to the <i>data state</i>.
	</dl>

<h4>
<dfn>Hash-rest state</dfn>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>digit</i>
		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+002D HYPHEN-MINUS (-)
		<dt>U+005F LOW LINE (_)
		<dd>
			Append the <i>current input character</i>
			to the hash token's value.
			Remain in this state.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			Switch to the <i>hash-rest-escape state</i>.

		<dt>anything else
		<dd>
			Emit the hash token.
			Switch to the <i>date state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>Hash-start-escape state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>newline</i>
		<dt>EOF
		<dd>
			Emit a delim token
			with its value set to U+0023 NUMBER SIGN (#).
			Emit a delim token
			with its value set to U+005C REVERSE SOLIDUS (\).
			Switch to the <i>date state</i>.
			Reconsume the <i>current input character</i>.
			This is a <i>parse error</i>.

		<dt><i>hex digit</i>
		<dd>
			Consume as many <i>hex digits</i> as possible, but no more than 5.
			If the <i>next input character</i> is
			<i>whitespace</i>,
			consume it as well.
			Interpret the <i>hex digits</i> as a hexadecimal number.
			Append the character with that codepoint
			to the hash token's value.

			<p>
				Switch to the <i>hash-rest state</i>.

		<dt>anything else
		<dd>
			Append the <i>current input character</i>
			to the hash token's value.
			Switch to the <i>hash-rest state</i>.
	</dl>

<h4>
<dfn>Hash-rest-escape state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>newline</i>
		<dt>EOF
		<dd>
			Emit the hash token.
			Emit a delim token
			with its value set to U+005C REVERSE SOLIDUS (\).
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
			This is a <i>parse error</i>.

		<dt><i>hex digit</i>
		<dd>
			Consume as many <i>hex digits</i> as possible, but no more than 5.
			If the <i>next input character</i> is
			<i>whitespace</i>,
			consume it as well.
			Interpret the <i>hex digits</i> as a hexadecimal number.
			Append the character with that codepoint
			to the hash token's value.

			<p>
				Switch to the <i>hash-rest state</i>.

		<dt>anything else
		<dd>
			Append the <i>current input character</i>
			to the hash token's value.
			Switch to the <i>hash-rest state</i>.
	</dl>


<h4>
<dfn>Single-quote-string state</dfn></h4>

	<p>
		If a string token has not yet been created since entering this state,
		create a string token
		with its value initially set to the empty string.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+0027 APOSTROPHE (')
		<dd>
			Emit the string token.
			Return to the <i>data state</i>.

		<dt>EOF
		<dd>
			Emit the string token.
			This is a <i>parse error</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			If the <i>next input character</i>
			is an EOF,
			this is a <i>parse error</i>.
			Append a U+005C REVERSE SOLIDUS (\)
			to the string token's value
			and emit the string token,
			then switch to the <i>data state</i>.

			<p>
				Otherwise,
				consume the <i>next input character</i>
				and append it to the string token's value.
				Remain in this state.

		<dt>anything else
		<dd>
			Append the <i>current input character</i>
			to the string token's value.
			Remain in this state.
	</dl>

<h4>
<dfn>Comment state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+002A ASTERISK (*)
		<dd>
			If the <i>next input character</i> is
			U+002F SOLIDUS (/),
			consume it,
			and return to the <i>data state</i>.

			<p>
				Otherwise,
				do nothing
				and remain in this state.

		<dt>EOF
		<dd>
			This is a <i>parse error</i>.
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.

		<dt>anything else
		<dd>
			Do nothing
			and remain in this state.
	</dl>


<h4>
<dfn>At-keyword state</dfn></h4>

	<p>
		Create an at-keyword token
		with its value initially set to the empty string.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			Switch to the <i>at-keyword-dash state</i>.

		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dd>
			Append the <i>current input character</i>
			to the at-keyword token's value.
			Switch to the <i>at-keyword-rest state</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit a delim token
					with its value set to U+0040 COMMERCIAL AT (@).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof" error
				<dd>
					Emit a delim token
					with its value set to U+0040 COMMERCIAL AT (@).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else
				<dd>
					Append the character
					to the at-keyword token's value.
					Switch to the <i>at-keyword-rest state</i>.
			</dl>

		<dt>anything else
		<dd>
			Emit a delim token
			with its value set to U+0040 COMMERCIAL AT (@).
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>At-keyword-dash state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			Emit a delim token
			with its value set to U+0040 COMMERCIAL AT (@).

			<p>
				If the <i>next input character</i> is U+003E GREATER-THAN SIGN,
				consume it,
				emit a cdc token,
				and switch to the <i>date state</i>.

			<p>
				Otherwise,
				emit a delim token
				with its value set to u+002D HYPHEN-MINUS.
				Switch to the <i>data state</i>.
				Reconsume the <i>current input character</i>.

		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dd>
			Append U+002D HYPHEN-MINUS (-)
			to the at-keyword token's value.
			Append the <i>current input character</i>
			to the at-keyword token's value.
			Switch to the <i>at-keyword-rest state</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit a delim token
					with its value set to U+0040 COMMERCIAL AT (@).
					Emit a delim token
					with its value set to U+002D HYPHEN-MINUS (-).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof error"
				<dd>
					Emit a delim token
					with its value set to U+0040 COMMERCIAL AT (@).
					Emit a delim token
					with its value set to U+002D HYPHEN-MINUS (-).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else</dt>
				<dd>
					Append U+002D HYPHEN-MINUS (-)
					to the at-keyword token's value.
					Append the returned character
					to the at-keyword token's value.

		<dt><i>digit</i>
		<dt>U+002E FULL STOP (.)
		<dd>
			Emit a delim token
			with its value set to U+0040 COMMERCIAL AT (@).
			Switch to the <i>number-negative state</i>.
			Reconsume the <i>current input character</i>.

		<dt>anything else
		<dd>
			Emit a delim token
			with its value set to U+0040 COMMERCIAL AT (@).
			Emit a delim token
			with its value set to U+002D HYPHEN-MINUS (-).
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>At-keyword-rest state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			Append the <i>current input character</i>
			to the identifier token's value.
			Remain in this state.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit the identifier token.
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof error"
				<dd>
					Emit the identifier token.
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else</dt>
				<dd>
					Append the returned character
					to the identifier token's value.
					Remain in this state.
			</dl>

		<dt>anything else
		<dd>
			Emit the identifier token.
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>Identifier state</dfn></h4>

	<p>
		Create an identifier token
		with its value initially set to the empty string.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			Switch to the <i>identifier-dash state</i>.

		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dd>
			Append the <i>current input character</i>
			to the identifier token's value.
			Switch to the <i>identifier-rest state</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof" error
				<dd>
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else
				<dd>
					Append the character
					to the identifier token's value.
					Switch to the <i>identifier-rest state</i>.
			</dl>
	</dl>

<h4>
<dfn>Identifier-dash state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			If the <i>next input character</i> is U+003E GREATER-THAN SIGN (>),
			consume it,
			emit a cdc token,
			and return to the <i>data state</i>.

			<p>Otherwise,
				emit a delim token
				with its value set to U+002D HYPHEN-MINUS (-).
				Switch to the <i>data state</i>.
				Reconsume the <i>current input character</i>.

		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dd>
			Append U+002D HYPHEN-MINUS (-)
			to the identifier token's value.
			Append the <i>current input character</i>
			to the identifier token's value.
			Switch to the <i>identifier-rest state</i>.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit a delim token
					with its value set to U+002D HYPHEN-MINUS (-).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof error"
				<dd>
					Emit a delim token
					with its value set to U+002D HYPHEN-MINUS (-).
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else</dt>
				<dd>
					Append U+002D HYPHEN-MINUS (-)
					to the identifier token's value.
					Append the returned character
					to the identifier token's value.

		<dt>anything else
		<dd>
			Emit a delim token
			with its value set to U+002D HYPHEN-MINUS (-).
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>Identifier-rest state</dfn></h4>

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>letter</i>
		<dt><i>non-ASCII character</i>
		<dt>U+005F LOW LINE (_)
		<dt>U+002D HYPHEN-MINUS (-)
		<dd>
			Append the <i>current input character</i>
			to the identifier token's value.
			Remain in this state.

		<dt>U+005C REVERSE SOLIDUS (\)
		<dd>
			<i>Consume an escaped character</i>:

			<dl>
				<dt>"newline" error
				<dd>
					Emit the identifier token.
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit a whitespace token.
					Switch to the <i>whitespace state</i>.

				<dt>"eof error"
				<dd>
					Emit the identifier token.
					Emit a delim token
					with its value set to U+005C REVERSE SOLIDUS (\).
					Emit an end-of-file token.

				<dt>anything else</dt>
				<dd>
					Append the returned character
					to the identifier token's value.
					Remain in this state.
			</dl>

		<dt>anything else
		<dd>
			Emit the identifier token.
			Switch to the <i>data state</i>.
			Reconsume the <i>current input character</i>.
	</dl>

<h4>
<dfn>Consume an escaped character</dfn></h4>

	<p>
		This section describes how to <i>consume an escaped character</i>.
		It assumes that the U+005C REVERSE SOLIDUS (\) has already been consumed.
		It will return either
		a character
		or an error token.

	<p>
		Consume the <i>next input character</i>.

	<dl>
		<dt><i>newline</i>
		<dd>
			Return an error token
			with its type set to "newline".
			This is a <i>parse error</i>.

		<dt>EOF
		<dd>
			Return an error token
			with its type set to "eof".
			This is a <i>parse error</i>.

		<dt><i>hex digit</i>
		<dd>
			Consume as many <i>hex digits</i> as possible, but no more than 5.
			If the <i>next input character</i> is
			<i>whitespace</i>,
			consume it as well.
			Interpret the <i>hex digits</i> as a hexadecimal number.
			Return the character with that codepoint.

		<dt>anything else
		<dd>
			Return the <i>current input character</i>.
	</dl>