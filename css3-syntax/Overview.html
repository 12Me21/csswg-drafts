<!DOCTYPE html>

<html lang=en>
 <head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Syntax Module Level 3 (CSS3 Syntax)</title>
  <!--
  <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
  -->

  <meta content="CSS Syntax Module Level 3 (CSS3 Syntax)" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2012-11-07 name=dcterms.issued>
  <meta content="http://dev.w3.org/csswg/css3-syntax/" name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://www.w3.org/TR/2012/ED-css3-syntax-20121107/"
   name=dcterms.identifier>
  <link href="#contents" rel=contents>
  <link href="#index" rel=index>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
   type="text/css">
  <style type="text/css">
		/* delete this block when you've cleared out all the .replaceme elements */
		.replaceme {
			border: solid red;
			padding: 0 0.5em;
			margin: 0 0.1em;
			background: yellow;
			color: green;
		}
		.replaceme:before {
			 content: "FIXME(";
			 color: black;
		}
		.replaceme:after {
			 content: ")";
			 color: black;
		}
	</style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Syntax Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 7 November
    2012</h2>

   <dl>
    <dt>This version:

    <dd> <a
     href="http://dev.w3.org/csswg/css3-syntax/">http://dev.w3.org/csswg/css3-syntax/</a>
     <!--
	<dt>Latest version:
	<dd>
		<a href="http://www.w3.org/TR/css3-syntax/">http://www.w3.org/TR/css3-syntax/</a>
-->

    <dt>Editor's draft:

    <dd> <a
     href="http://dev.w3.org/csswg/css3-syntax/">http://dev.w3.org/csswg/css3-syntax/</a>

    <dt>Previous version:

    <dd> <a
     href="http://www.w3.org/TR/2003/WD-css3-syntax-20030813/">http://www.w3.org/TR/2003/WD-css3-syntax-20030813/</a>

    <dt>Issue Tracking:

    <dd> <a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?product=CSS&component=Syntax">W3C
     Bugzilla</a>

    <dt>Feedback:

    <dd> <a
     href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a>
     with subject line “<kbd>[css3-syntax] <var>… message topic
     …</var></kbd>”

    <dt>Editors:

    <dd class="h-card vcard"> <a class="p-name fn u-url url"
     href="http://www.xanthir.com/" rel=author>Tab Atkins Jr.</a> (<span
     class="p-org org">Google, Inc.</span>), <span
     class="u-email email">jackalmage@gmail.com</span>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2012 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p> <a href="http://www.w3.org/TR/CSS/">CSS</a> is a language for
   describing the rendering of structured documents (such as HTML and XML) on
   screen, on paper, in speech, etc. This module describes, in general terms,
   the basic structure and syntax of CSS stylesheets. It defines, in detail,
   the syntax and parsing of CSS - how to turn a stream of bytes into a
   meaningful stylesheet.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-syntax%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css3-syntax” in the subject, preferably like this:
   “[<!---->css3-syntax<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>The following features are at risk: …

  <h2 class="no-num no-toc" id=contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span> Introduction</a>
    <ul class=toc>
     <li><a href="#placement"><span class=secno>1.1. </span> Module
      interactions</a>
    </ul>

   <li><a href="#syntax-description"><span class=secno>2. </span> Description
    of CSS's Syntax</a>

   <li><a href="#tokenizing-and-parsing-css"><span class=secno>3. </span>
    Tokenizing and Parsing CSS</a>
    <ul class=toc>
     <li><a href="#overview-of-the-parsing-model"><span class=secno>3.1.
      </span> Overview of the Parsing Model</a>

     <li><a href="#the-input-byte-stream"><span class=secno>3.2. </span> The
      input byte stream</a>
      <ul class=toc>
       <li><a href="#preprocessing-the-input-stream"><span class=secno>3.2.1.
        </span> Preprocessing the input stream</a>
      </ul>

     <li><a href="#parse-state"><span class=secno>3.3. </span> Parse
      State</a>

     <li><a href="#tokenization"><span class=secno>3.4. </span>
      Tokenization</a>
      <ul class=toc>
       <li><a href="#token-diagrams"><span class=secno>3.4.1. </span> Token
        Railroad Diagrams</a>

       <li><a href="#tokenizer-flags"><span class=secno>3.4.2. </span>
        Tokenizer Flags</a>

       <li><a href="#definitions"><span class=secno>3.4.3. </span>
        Definitions</a>

       <li><a href="#data-state"><span class=secno>3.4.4. </span> Data
        state</a>

       <li><a href="#double-quote-string-state"><span class=secno>3.4.5.
        </span> Double-quote-string state</a>

       <li><a href="#single-quote-string-state"><span class=secno>3.4.6.
        </span> Single-quote-string state</a>

       <li><a href="#hash-state"><span class=secno>3.4.7. </span> Hash
        state</a>

       <li><a href="#hash-rest-state"><span class=secno>3.4.8. </span>
        Hash-rest state</a>

       <li><a href="#comment-state"><span class=secno>3.4.9. </span> Comment
        state</a>

       <li><a href="#at-keyword-state"><span class=secno>3.4.10. </span>
        At-keyword state</a>

       <li><a href="#at-keyword-rest-state"><span class=secno>3.4.11. </span>
        At-keyword-rest state</a>

       <li><a href="#ident-state"><span class=secno>3.4.12. </span> Ident
        state</a>

       <li><a href="#ident-rest-state"><span class=secno>3.4.13. </span>
        Ident-rest state</a>

       <li><a href="#transform-function-whitespace-state"><span
        class=secno>3.4.14. </span> Transform-function-whitespace state</a>

       <li><a href="#number-state"><span class=secno>3.4.15. </span> Number
        state</a>

       <li><a href="#number-rest-state"><span class=secno>3.4.16. </span>
        Number-rest state</a>

       <li><a href="#number-fraction-state"><span class=secno>3.4.17. </span>
        Number-fraction state</a>

       <li><a href="#dimension-state"><span class=secno>3.4.18. </span>
        Dimension state</a>

       <li><a href="#sci-notation-state"><span class=secno>3.4.19. </span>
        Sci-notation state</a>

       <li><a href="#url-state"><span class=secno>3.4.20. </span> URL
        state</a>

       <li><a href="#url-double-quote-state"><span class=secno>3.4.21.
        </span> URL-double-quote state</a>

       <li><a href="#url-single-quote-state"><span class=secno>3.4.22.
        </span> URL-single-quote state</a>

       <li><a href="#url-end-state"><span class=secno>3.4.23. </span> URL-end
        state</a>

       <li><a href="#url-unquoted-state"><span class=secno>3.4.24. </span>
        URL-unquoted state</a>

       <li><a href="#bad-url-state"><span class=secno>3.4.25. </span> Bad-URL
        state</a>

       <li><a href="#unicode-range-state"><span class=secno>3.4.26. </span>
        Unicode-range state</a>

       <li><a href="#consume-an-escaped-character"><span class=secno>3.4.27.
        </span> Consume an escaped character</a>

       <li><a href="#set-the-unicode-range-tokens-range"><span
        class=secno>3.4.28. </span> Set the unicode-range token's range</a>
      </ul>

     <li><a href="#changes-from-css-2.1-tokenizer"><span class=secno>3.5.
      </span> Changes from CSS 2.1 Tokenizer</a>

     <li><a href="#tree-construction"><span class=secno>3.6. </span> Tree
      Construction</a>
      <ul class=toc>
       <li><a href="#definitions0"><span class=secno>3.6.1. </span>
        Definitions</a>

       <li><a href="#top-level-mode"><span class=secno>3.6.2. </span>
        Top-level mode</a>

       <li><a href="#at-rule-prelude-mode"><span class=secno>3.6.3. </span>
        At-rule-prelude mode</a>

       <li><a href="#rule-block-mode"><span class=secno>3.6.4. </span>
        Rule-block mode</a>

       <li><a href="#selector-mode"><span class=secno>3.6.5. </span> Selector
        mode</a>

       <li><a href="#declaration-block-mode"><span class=secno>3.6.6. </span>
        Declaration-block mode</a>

       <li><a href="#after-declaration-name-mode"><span class=secno>3.6.7.
        </span> After-declaration-name mode</a>

       <li><a href="#declaration-value-mode"><span class=secno>3.6.8. </span>
        Declaration-value mode</a>

       <li><a href="#declaration-important-mode"><span class=secno>3.6.9.
        </span> Declaration-important mode</a>

       <li><a href="#declaration-end-mode"><span class=secno>3.6.10. </span>
        Declaration-end mode</a>

       <li><a href="#next-block-error-mode"><span class=secno>3.6.11. </span>
        Next-block error mode</a>

       <li><a href="#next-declaration-error-mode"><span class=secno>3.6.12.
        </span> Next-declaration error mode</a>

       <li><a href="#next-block-or-statement-error-mode"><span
        class=secno>3.6.13. </span> Next-block-or-statement error mode</a>

       <li><a href="#consume-a-primitive"><span class=secno>3.6.14. </span>
        Consume a primitive</a>

       <li><a href="#consume-a-primitive-with-the-hashless-co"><span
        class=secno>3.6.15. </span> Consume a primitive with the hashless
        color quirk</a>

       <li><a href="#consume-a-primitive-with-the-unitless-le"><span
        class=secno>3.6.16. </span> Consume a primitive with the unitless
        length quirk</a>

       <li><a href="#consume-a-simple-block"><span class=secno>3.6.17.
        </span> Consume a simple block</a>

       <li><a href="#consume-a-function"><span class=secno>3.6.18. </span>
        Consume a function</a>

       <li><a href="#switch-to-the-current-rules-content-mode"><span
        class=secno>3.6.19. </span> Switch to the current rule's content
        mode</a>

       <li><a href="#pop-the-current-rule"><span class=secno>3.6.20. </span>
        Pop the current rule</a>

       <li><a href="#discard-the-current-rule"><span class=secno>3.6.21.
        </span> Discard the current rule</a>

       <li><a href="#finish-parsing"><span class=secno>3.6.22. </span> Finish
        parsing</a>
      </ul>

     <li><a href="#changes-from-css-2.1-core-grammar"><span class=secno>3.7.
      </span> Changes from CSS 2.1 Core Grammar</a>
    </ul>

   <li><a href="#conformance"><span class=secno>4. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conventions"><span class=secno>4.1. </span> Document
      conventions</a>

     <li><a href="#conformance-classes"><span class=secno>4.2. </span>
      Conformance classes</a>
    </ul>

   <li class=no-num><a href="#acknowledgments"> Acknowledgments</a>

   <li class=no-num><a href="#references"> References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references"> Normative
      references</a>

     <li class=no-num><a href="#other-references"> Other references</a>
    </ul>

   <li class=no-num><a href="#index"> Index</a>

   <li class=no-num><a href="#property-index"> Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p><em>This section is not normative.</em>

  <p><var class=replaceme>Provide background, motivation, etc.</var>

  <h3 id=placement><span class=secno>1.1. </span> Module interactions</h3>

  <p> This module defines the syntax and parsing of CSS stylesheets. It
   supersedes the lexical scanner and grammar defined in CSS 2.1.

  <h2 id=syntax-description><span class=secno>2. </span> Description of CSS's
   Syntax</h2>

  <p><em>This section is not normative.</em>

  <p> A CSS document is a series of <a href="#rule"><i>rules</i></a>, which
   apply CSS properties to elements in the source document, and <a
   href="#at-rules"><i>at-rules</i></a>, which define special processing
   rules or values for the CSS document.

  <p> A <dfn id=rule>rule</dfn> starts with a selector (defined by the <a
   href="http://www.w3.org/TR/selectors/">Selectors specification</a>), then
   has a {}-wrapped block containing a sequence of declarations. The selector
   specifies which elements the declarations will apply to. Each declaration
   has a property name, followed by a colon and the property value, and
   finished with a semicolon.

  <div class=example>
   <p> A typical rule might look something like this:

   <pre>
p > a { 
	color: blue;
	text-decoration: underline;
}</pre>

   <p> In the above rule, "<code>p > a</code>" is the selector, which, if the
    source document is HTML, selects any <code>&lt;a></code> elements that
    are children of a <code>&lt;p></code> element.

   <p> "<code>color: blue;</code>" is a declaration specifying that, for the
    elements that match the selector, their ‘<code
    class=property>color</code>’ property should have the value ‘<code
    class=css>blue</code>’. Similiarly, their ‘<code
    class=property>text-decoration</code>’ property should have the value
    ‘<code class=css>underline</code>’.
  </div>

  <p> <dfn id=at-rules title=at-rule>At-rules</dfn> are all different, but
   they have a basic structure in common. They start with an "@" character
   followed by their name. Some <a href="#at-rules"><i>at-rules</i></a> are
   simple statements, with their name followed by more CSS values to specify
   their behavior, and finally ended by a semicolon. Others are blocks; they
   can have CSS values following their name, but they end with a {}-wrapped
   block, similar to a <a href="#rule"><i>rule</i></a>. Even the contents of
   these blocks are specific to the given <a
   href="#at-rules"><i>at-rule</i></a>: sometimes they contain a sequence of
   declarations, like a <a href="#rule"><i>rule</i></a>; other times, they
   may contain additional blocks, or at-rules, or other structures
   altogether.

  <div class=example>
   <p> Here are several examples of <a href="#at-rules"><i>at-rules</i></a>
    that illustrate the varied syntax they may contain.

   <pre>@import "my-styles.css";</pre>

   <p> The ‘<code class=css>@import</code>’ <a
    href="#at-rules"><i>at-rule</i></a> is a simple statement. After its
    name, it takes a single string or ‘<code class=css>url()</code>’
    function to indicate the stylesheet that it should import.

   <pre>
@page :left {
	margin-left: 4cm;
	margin-right: 3cm;
}</pre>

   <p> The ‘<code class=css>@page</code>’ <a
    href="#at-rules"><i>at-rule</i></a> consists of an optional page selector
    (the ":left" pseudoclass), followed by a block of properties that apply
    to the page when printed. In this way, it's very similar to a normal <a
    href="#rule"><i>rule</i></a>, except that its properties don't apply to
    any "element", but rather the page itself.

   <pre>
@media print {
	body { font-size: 10pt }
}</pre>

   <p> The ‘<code class=css>@media</code>’ <a
    href="#at-rules"><i>at-rule</i></a> begins with a media type and a list
    of optional media queries. Its block contains entire rules, which are
    only applied when the ‘<code class=css>@media</code>’s conditions are
    fulfilled.
  </div>

  <p> Property names and <a href="#at-rules"><i>at-rule</i></a> names are
   always <b>idents</b>, which have to start with a letter or a hyphen
   followed by a letter, and then can contain letters, numbers, hyphens, or
   underscores. You can include any character at all, even ones that CSS uses
   in its syntax, by escaping it with a backslash (\) or by using a
   hexadecimal escape.

  <p> The syntax of selectors is defined in the <a
   href="http://www.w3.org/TR/selectors/">Selectors spec</a>. Similarly, the
   syntax of the wide variety of CSS values is defined in the <a
   href="http://www.w3.org/TR/css3-values/">Values &amp; Units spec</a>. The
   special syntaxes of individual <a href="#at-rules"><i>at-rules</i></a> can
   be found in the specs that define them.

  <h2 id=tokenizing-and-parsing-css><span class=secno>3. </span> Tokenizing
   and Parsing CSS</h2>

  <p> User agents must use the parsing rules described in this section to
   generate the CSSOM trees from text/css resources. Together, these rules
   define what is referred to as the CSS parser.

  <p> This specification defines the parsing rules for CSS documents, whether
   they are syntactically correct or not. Certain points in the parsing
   algorithm are said to be parse errors. The error handling for parse errors
   is well-defined: user agents must either act as described below when
   encountering such problems, or must abort processing at the first error
   that they encounter for which they do not wish to apply the rules
   described below.

  <p> Conformance checkers must report at least one parse error condition to
   the user if one or more parse error conditions exist in the document and
   must not report parse error conditions if none exist in the document.
   Conformance checkers may report more than one parse error condition if
   more than one parse error condition exists in the document. Conformance
   checkers are not required to recover from parse errors.

  <h3 id=overview-of-the-parsing-model><span class=secno>3.1. </span>
   Overview of the Parsing Model</h3>

  <p> The input to the CSS parsing process consists of a stream of Unicode
   code points, which is passed through a tokenization stage followed by a
   tree construction stage. The output is a CSSStyleSheet object.

  <p class=note> Implementations that do not support scripting do not have to
   actually create a CSSOM CSSStyleSheet object, but the CSSOM tree in such
   cases is still used as the model for the rest of the specification.

  <h3 id=the-input-byte-stream><span class=secno>3.2. </span> The input byte
   stream</h3>

  <p> The stream of Unicode code points that comprises the input to the
   tokenization stage will be initially seen by the user agent as a stream of
   bytes (typically coming over the network or from the local file system).
   The bytes encode the actual characters according to a particular character
   encoding, which the user agent must use to decode the bytes into
   characters.

  <p> To decode the stream of bytes into a stream of characters, UAs must
   follow these steps.

  <ol>
   <li> Let <var>label</var> be null.

   <li> If HTTP or equivalent protocol defines an encoding (e.g. via the
    charset parameter of the Content-Type header), set <var>label</var> to
    the value so defined.

   <li> If <var>label</var> is null, check the byte stream. If the first
    several bytes match the hex sequence
    <pre>40 63 68 61 72 73 65 74 20 22 (XX)* 22 3B</pre>
    then set <var>label</var> to the sequence of XX bytes, decoded per
    <code>windows-1252</code>.
    <p class=note> Note: Anything ASCII-compatible will do, so using
     <code>windows-1252</code> is fine.

    <p class=note> Note: The byte sequence above, when decoded as ASCII, is
     the string "<code>@charset "…";</code>", where the "…" is the
     sequence of bytes corresponding to the encoding's name.

   <li> If <var>label</var> is null, set <var>label</var> to the value of
    charset attribute on the <code>&lt;link></code> element that caused the
    style sheet to be included, if any.

   <li> If <var>label</var> is null, there is a referring style sheet or
    document, and that referring sheet or document's encoding is not
    <code>utf-16</code> or <code>utf-16be</code>, set <var>label</var> to
    that encoding.

   <li> Let <var>encoding</var> be the result of <a
    href="http://encoding.spec.whatwg.org/#concept-encoding-get">getting an
    encoding from <var>label</var></a>. If <var>encoding</var> is
    <code>failure</code>, set it to <code>utf-8</code>.

   <li> <a href="http://encoding.spec.whatwg.org/#decode">Decode the byte
    stream</a> using fallback encoding <var>encoding</var>.
  </ol>

  <h4 id=preprocessing-the-input-stream><span class=secno>3.2.1. </span>
   Preprocessing the input stream</h4>

  <p> The input stream consists of the characters pushed into it as the input
   byte stream is decoded.

  <p> Before sending the input stream to the tokenizer, implementations must
   make the following character substitutions:

  <ul>
   <li> Replace any U+000D CARRIAGE RETURN (CR) characters or pairs of U+000D
    CARRIAGE RETURN (CR) followed by U+000A LINE FEED (LF) by a single U+000A
    LINE FEED (LF) character.

   <li> Replace any U+0000 NULL characters with U+FFFD REPLACEMENT CHARACTER
    (�).
  </ul>

  <p> The <dfn id=next-input-character>next input character</dfn> is the
   first character in the input stream that has not yet been consumed or
   explicitly ignored by the requirements in this section. Initially, the <a
   href="#next-input-character"><i>next input character</i></a> is the first
   character in the input. The <dfn id=current-input-character>current input
   character</dfn> is the last character to have been consumed.

  <p> The "EOF" character in the tables below is a conceptual character
   representing the end of the input stream.

  <h3 id=parse-state><span class=secno>3.3. </span> Parse State</h3>

  <p> ...

  <h3 id=tokenization><span class=secno>3.4. </span> Tokenization</h3>

  <p> Implementations must act as if they used the following state machine to
   tokenize CSS. The state machine must start in the <a
   href="#data-state0"><i>data state</i></a>. Most states consume a single
   character, which may have various side-effects, and either switches the
   state machine to a new state to reconsume the same character, or switches
   it to a new state to consume the next character, or stays in the same
   state to consume the next character. Some states have more complicated
   behavior and can consume several characters before switching to another
   state.

  <p> The output of the tokenization step is a series of zero or more of the
   following tokens: ident, function, at-keyword, hash, string, bad-string,
   url, bad-url, delim, number, percentage, dimension, unicode-range,
   whitespace, comment, cdo, cdc, colon, semicolon, [, ], (, ), {, }.

  <p> ident, function, at-keyword, hash, string, and url tokens have a value
   composed of zero or more characters. Delim tokens have a value composed of
   a single character. Number, percentage, and dimension tokens have a
   representation composed of 1 or more character, a numeric value, and a
   type flag set to either "integer" or "number". The type flag defaults to
   "integer" if not otherwise set. Dimension tokens additionally have a unit
   composed of one or more characters. Unicode-range tokens have a range of
   characters.

  <p> The tokenizer state machine consists of the states defined in the
   following subsections.

  <h4 id=token-diagrams><span class=secno>3.4.1. </span> Token Railroad
   Diagrams</h4>

  <p> <em>This section is non-normative.</em>

  <p> This section presents an informative view of the token parser, in the
   form of railroad diagrams. Railroad diagrams are more compact than a
   state-machine, but often easier to read than a regular expression.

  <p> These diagrams are <em>informative</em> and <em>incomplete</em>; they
   describe the grammar of "correct" tokens, but do not describe
   error-handling at all. They are provided solely to make it easier to get
   an intuitive grasp of the syntax of each token.

  <dl>
   <dt id=ident-diagram>IDENT

   <dd> <!--<script>
			Diagram(
				Choice(0, Skip(), Terminal('-')),
				Choice(0, NonTerminal('a-z A-Z _ or non-ASCII'), NonTerminal('escape')),
				ZeroOrMore(
					Choice(0, NonTerminal('a-z A-Z 0-9 _ - or non-ASCII'), NonTerminal('escape')))).addTo();
			</script>-->
    <svg class=diagram height=110 width=831>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 41h0h.5"></path><path d="M110 41h0h.5"></path><path
    d="M40 41h20h.5"></path><g><path d="M60 41h30h.5"></path></g><path
    d="M90 41h20h.5"></path><path
    d="M40 41a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M60 61h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=60
    y=50></rect><text x=75 y=65>-</text></g><path
    d="M90 61a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M110 41h0h.5"></path><path d="M390 41h0h.5"></path><path
    d="M110 41h20h.5"></path><g><path d="M130 41h240h.5"></path><rect
    height=22 width=240 x=130 y=30></rect><text x=250 y=45>a-z A-Z _ or
    non-ASCII</text></g><path d="M370 41h20h.5"></path><path
    d="M110 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M130 71h240h.5"></path><rect height=22 width=80 x=210
    y=60></rect><text x=250 y=75>escape</text></g><path
    d="M370 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M390 41h0h.5"></path><path d="M790 41h0h.5"></path><path
    d="M390 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M410 21h360h.5"></path></g><path
    d="M770 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M390 41h20h.5"></path><g><path d="M410 41h0h.5"></path><path
    d="M770 41h0h.5"></path><path d="M410 41h10h.5"></path><g><path
    d="M420 41h0h.5"></path><path d="M760 41h0h.5"></path><path
    d="M420 41h20h.5"></path><g><path d="M440 41h300h.5"></path><rect
    height=22 width=300 x=440 y=30></rect><text x=590 y=45>a-z A-Z 0-9 _ - or
    non-ASCII</text></g><path d="M740 41h20h.5"></path><path
    d="M420 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M440 71h300h.5"></path><rect height=22 width=80 x=550
    y=60></rect><text x=590 y=75>escape</text></g><path
    d="M740 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M760 41h10h.5"></path><path
    d="M420 41a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10h.5"></path><g><path
    d="M420 90h340h.5"></path></g><path
    d="M760 90a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M770 41h20h.5"></path></g><path
    d="M 790 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=function-diagram>FUNCTION

   <dd> <!--<script>
			Diagram(NonTerminal('IDENT'), Terminal('(')).addTo();
			</script>-->
    <svg class=diagram height=62 width=221>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h70h.5"></path><rect height=22
    width=70 x=50 y=20></rect><text x=85 y=35>IDENT</text></g><path
    d="M120 31h10h.5"></path><path d="M130 31h10h.5"></path><g><path
    d="M140 31h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=140
    y=20></rect><text x=155 y=35>(</text></g><path
    d="M170 31h10h.5"></path><path
    d="M 180 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=at-keyword-diagram>AT-KEYWORD

   <dd> <!--<script>
			Diagram(Terminal('@'), NonTerminal('IDENT')).addTo();
			</script>-->
    <svg class=diagram height=62 width=221>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h30h.5"></path><rect height=22
    rx=10 ry=10 width=30 x=50 y=20></rect><text x=65 y=35>@</text></g><path
    d="M80 31h10h.5"></path><path d="M90 31h10h.5"></path><g><path
    d="M100 31h70h.5"></path><rect height=22 width=70 x=100 y=20></rect><text
    x=135 y=35>IDENT</text></g><path d="M170 31h10h.5"></path><path
    d="M 180 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=hash-diagram>HASH

   <dd> <!--<script>
			Diagram(Terminal('#'), OneOrMore(NonTerminal('a-z A-Z 0-9 _ - or non-ASCII'))).addTo();
			</script>-->
    <svg class=diagram height=71 width=471>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h30h.5"></path><rect height=22
    rx=10 ry=10 width=30 x=50 y=20></rect><text x=65 y=35>#</text></g><path
    d="M80 31h10h.5"></path><path d="M90 31h10h.5"></path><g><path
    d="M100 31h0h.5"></path><path d="M420 31h0h.5"></path><path
    d="M100 31h10h.5"></path><g><path d="M110 31h300h.5"></path><rect
    height=22 width=300 x=110 y=20></rect><text x=260 y=35>a-z A-Z 0-9 _ - or
    non-ASCII</text></g><path d="M410 31h10h.5"></path><path
    d="M110 31a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M110 51h300h.5"></path></g><path
    d="M410 51a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M420 31h10h.5"></path><path
    d="M 430 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=string-diagram>STRING

   <dd> <!--<script>
			Diagram(
				Choice(0,
					Sequence(
						Terminal('"'),
						ZeroOrMore(
							Choice(0,
								NonTerminal('not " or \\'),
								NonTerminal('escape'))),
						Terminal('"')),
					Sequence(
						Terminal('\''),
						ZeroOrMore(
							Choice(0,
								NonTerminal("not \' or \\"),
								NonTerminal('escape'))),
						Terminal('\'')))).addTo();
			</script>-->
    <svg class=diagram height=188 width=441>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 41h0h.5"></path><path d="M400 41h0h.5"></path><path
    d="M40 41h20h.5"></path><g><path d="M60 41h0h.5"></path><path
    d="M60 41h10h.5"></path><g><path d="M70 41h30h.5"></path><rect height=22
    rx=10 ry=10 width=30 x=70 y=30></rect><text x=85 y=45>"</text></g><path
    d="M100 41h10h.5"></path><g><path d="M110 41h0h.5"></path><path
    d="M330 41h0h.5"></path><path
    d="M110 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M130 21h180h.5"></path></g><path
    d="M310 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M110 41h20h.5"></path><g><path d="M130 41h0h.5"></path><path
    d="M310 41h0h.5"></path><path d="M130 41h10h.5"></path><g><path
    d="M140 41h0h.5"></path><path d="M300 41h0h.5"></path><path
    d="M140 41h20h.5"></path><g><path d="M160 41h120h.5"></path><rect
    height=22 width=120 x=160 y=30></rect><text x=220 y=45>not " or
    \</text></g><path d="M280 41h20h.5"></path><path
    d="M140 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M160 71h120h.5"></path><rect height=22 width=80 x=180
    y=60></rect><text x=220 y=75>escape</text></g><path
    d="M280 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M300 41h10h.5"></path><path
    d="M140 41a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10h.5"></path><g><path
    d="M140 90h160h.5"></path></g><path
    d="M300 90a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M310 41h20h.5"></path></g><path d="M330 41h10h.5"></path><g><path
    d="M340 41h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=340
    y=30></rect><text x=355 y=45>"</text></g><path
    d="M370 41h10h.5"></path><path d="M380 41h0h.5"></path></g><path
    d="M380 41h20h.5"></path><path
    d="M40 41a10 10 0 0 1 10 10v58a10 10 0 0 0 10 10h.5"></path><g><path
    d="M60 119h0h.5"></path><path d="M60 119h10h.5"></path><g><path
    d="M70 119h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=70
    y=108></rect><text x=85 y=123>&apos;</text></g><path
    d="M100 119h10h.5"></path><g><path d="M110 119h0h.5"></path><path
    d="M330 119h0h.5"></path><path
    d="M110 119a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M130 99h180h.5"></path></g><path
    d="M310 99a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M110 119h20h.5"></path><g><path d="M130 119h0h.5"></path><path
    d="M310 119h0h.5"></path><path d="M130 119h10h.5"></path><g><path
    d="M140 119h0h.5"></path><path d="M300 119h0h.5"></path><path
    d="M140 119h20h.5"></path><g><path d="M160 119h120h.5"></path><rect
    height=22 width=120 x=160 y=108></rect><text x=220 y=123>not &apos; or
    \</text></g><path d="M280 119h20h.5"></path><path
    d="M140 119a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M160 149h120h.5"></path><rect height=22 width=80 x=180
    y=138></rect><text x=220 y=153>escape</text></g><path
    d="M280 149a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M300 119h10h.5"></path><path
    d="M140 119a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10h.5"></path><g><path
    d="M140 168h160h.5"></path></g><path
    d="M300 168a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M310 119h20h.5"></path></g><path d="M330 119h10h.5"></path><g><path
    d="M340 119h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=340
    y=108></rect><text x=355 y=123>&apos;</text></g><path
    d="M370 119h10h.5"></path><path d="M380 119h0h.5"></path></g><path
    d="M380 119a10 10 0 0 0 10 -10v-58a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M 400 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=url-diagram>URL

   <dd> <!--<script>
			Diagram(
				Choice(0, Terminal('u'), Terminal('U')),
				Choice(0, Terminal('r'), Terminal('R')),
				Choice(0, Terminal('l'), Terminal('L')),
				Terminal('('),
				Choice(1,
					Optional(NonTerminal('WS')),
					Sequence(
						Optional(NonTerminal('WS')),
						NonTerminal('STRING'),
						Optional(NonTerminal('WS'))),
					Sequence(
						Optional(NonTerminal('WS')),
						OneOrMore(
							Choice(0,
								NonTerminal('not " \' ( ) WS or NPC'),
								NonTerminal('escape'))),
						Optional(NonTerminal('WS')))),
				Terminal(')')).addTo();
			</script>-->
    <svg class=diagram height=190 width=901>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 71 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 81h0h.5"></path><path d="M110 81h0h.5"></path><path
    d="M40 81h20h.5"></path><g><path d="M60 81h30h.5"></path><rect height=22
    rx=10 ry=10 width=30 x=60 y=70></rect><text x=75 y=85>u</text></g><path
    d="M90 81h20h.5"></path><path
    d="M40 81a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M60 111h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=60
    y=100></rect><text x=75 y=115>U</text></g><path
    d="M90 111a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M110 81h0h.5"></path><path d="M180 81h0h.5"></path><path
    d="M110 81h20h.5"></path><g><path d="M130 81h30h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=130 y=70></rect><text x=145
    y=85>r</text></g><path d="M160 81h20h.5"></path><path
    d="M110 81a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M130 111h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=130
    y=100></rect><text x=145 y=115>R</text></g><path
    d="M160 111a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M180 81h0h.5"></path><path d="M250 81h0h.5"></path><path
    d="M180 81h20h.5"></path><g><path d="M200 81h30h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=200 y=70></rect><text x=215
    y=85>l</text></g><path d="M230 81h20h.5"></path><path
    d="M180 81a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M200 111h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=200
    y=100></rect><text x=215 y=115>L</text></g><path
    d="M230 111a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M250 81h10h.5"></path><g><path d="M260 81h30h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=260 y=70></rect><text x=275
    y=85>(</text></g><path d="M290 81h10h.5"></path><g><path
    d="M300 81h0h.5"></path><path d="M810 81h0h.5"></path><path
    d="M300 81a10 10 0 0 0 10 -10v-20a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M320 41h195h.5"></path><path d="M595 41h195h.5"></path><path
    d="M515 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M535 21h40h.5"></path></g><path
    d="M575 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M515 41h20h.5"></path><g><path d="M535 41h40h.5"></path><rect
    height=22 width=40 x=535 y=30></rect><text x=555 y=45>WS</text></g><path
    d="M575 41h20h.5"></path></g><path
    d="M790 41a10 10 0 0 1 10 10v20a10 10 0 0 0 10 10h.5"></path><path
    d="M300 81h20h.5"></path><g><path d="M320 81h105h.5"></path><g><path
    d="M425 81h0h.5"></path><path d="M505 81h0h.5"></path><path
    d="M425 81a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M445 61h40h.5"></path></g><path
    d="M485 61a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M425 81h20h.5"></path><g><path d="M445 81h40h.5"></path><rect
    height=22 width=40 x=445 y=70></rect><text x=465 y=85>WS</text></g><path
    d="M485 81h20h.5"></path></g><path d="M505 81h10h.5"></path><g><path
    d="M515 81h80h.5"></path><rect height=22 width=80 x=515 y=70></rect><text
    x=555 y=85>STRING</text></g><path d="M595 81h10h.5"></path><g><path
    d="M605 81h0h.5"></path><path d="M685 81h0h.5"></path><path
    d="M605 81a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M625 61h40h.5"></path></g><path
    d="M665 61a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M605 81h20h.5"></path><g><path d="M625 81h40h.5"></path><rect
    height=22 width=40 x=625 y=70></rect><text x=645 y=85>WS</text></g><path
    d="M665 81h20h.5"></path></g><path d="M685 81h105h.5"></path></g><path
    d="M790 81h20h.5"></path><path
    d="M300 81a10 10 0 0 1 10 10v20a10 10 0 0 0 10 10h.5"></path><g><path
    d="M320 121h0h.5"></path><g><path d="M320 121h0h.5"></path><path
    d="M400 121h0h.5"></path><path
    d="M320 121a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M340 101h40h.5"></path></g><path
    d="M380 101a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M320 121h20h.5"></path><g><path d="M340 121h40h.5"></path><rect
    height=22 width=40 x=340 y=110></rect><text x=360
    y=125>WS</text></g><path d="M380 121h20h.5"></path></g><path
    d="M400 121h10h.5"></path><g><path d="M410 121h0h.5"></path><path
    d="M700 121h0h.5"></path><path d="M410 121h10h.5"></path><g><path
    d="M420 121h0h.5"></path><path d="M690 121h0h.5"></path><path
    d="M420 121h20h.5"></path><g><path d="M440 121h230h.5"></path><rect
    height=22 width=230 x=440 y=110></rect><text x=555 y=125>not " &apos; ( )
    WS or NPC</text></g><path d="M670 121h20h.5"></path><path
    d="M420 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M440 151h230h.5"></path><rect height=22 width=80 x=515
    y=140></rect><text x=555 y=155>escape</text></g><path
    d="M670 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M690 121h10h.5"></path><path
    d="M420 121a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10h.5"></path><g><path
    d="M420 170h270h.5"></path></g><path
    d="M690 170a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M700 121h10h.5"></path><g><path d="M710 121h0h.5"></path><path
    d="M790 121h0h.5"></path><path
    d="M710 121a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M730 101h40h.5"></path></g><path
    d="M770 101a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M710 121h20h.5"></path><g><path d="M730 121h40h.5"></path><rect
    height=22 width=40 x=730 y=110></rect><text x=750
    y=125>WS</text></g><path d="M770 121h20h.5"></path></g><path
    d="M790 121h0h.5"></path></g><path
    d="M790 121a10 10 0 0 0 10 -10v-20a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M810 81h10h.5"></path><g><path d="M820 81h30h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=820 y=70></rect><text x=835
    y=85>)</text></g><path d="M850 81h10h.5"></path><path
    d="M 860 81 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=number-diagram>NUMBER

   <dd> <!--<script>
			Diagram(
				Choice(1, Terminal('+'), Skip(), Terminal('-')),
				Choice(0,
					Sequence(
						OneOrMore(NonTerminal('digit')),
						Terminal('.'),
						OneOrMore(NonTerminal('digit'))),
					OneOrMore(NonTerminal('digit')),
					Sequence(
						Terminal('.'),
						OneOrMore(NonTerminal('digit')))),
				Choice(0,
					Skip(),
					Sequence(
						Choice(0, Terminal('e'), Terminal('E')),
						Choice(1, Terminal('+'), Skip(), Terminal('-')),
						OneOrMore(NonTerminal('digit'))))).addTo();
			</script>-->
    <svg class=diagram height=179 width=751>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 50 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 60h0h.5"></path><path d="M110 60h0h.5"></path><path
    d="M40 60a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M60 40h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=60
    y=29></rect><text x=75 y=44>+</text></g><path
    d="M90 40a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M40 60h20h.5"></path><g><path d="M60 60h30h.5"></path></g><path
    d="M90 60h20h.5"></path><path
    d="M40 60a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M60 80h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=60
    y=69></rect><text x=75 y=84>-</text></g><path
    d="M90 80a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M110 60h0h.5"></path><path d="M420 60h0h.5"></path><path
    d="M110 60h20h.5"></path><g><path d="M130 60h0h.5"></path><path
    d="M130 60h10h.5"></path><g><path d="M140 60h0h.5"></path><path
    d="M230 60h0h.5"></path><path d="M140 60h10h.5"></path><g><path
    d="M150 60h70h.5"></path><rect height=22 width=70 x=150 y=49></rect><text
    x=185 y=64>digit</text></g><path d="M220 60h10h.5"></path><path
    d="M150 60a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M150 80h70h.5"></path></g><path
    d="M220 80a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M230 60h10h.5"></path><path d="M240 60h10h.5"></path><g><path
    d="M250 60h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=250
    y=49></rect><text x=265 y=64>.</text></g><path
    d="M280 60h10h.5"></path><path d="M290 60h10h.5"></path><g><path
    d="M300 60h0h.5"></path><path d="M390 60h0h.5"></path><path
    d="M300 60h10h.5"></path><g><path d="M310 60h70h.5"></path><rect
    height=22 width=70 x=310 y=49></rect><text x=345
    y=64>digit</text></g><path d="M380 60h10h.5"></path><path
    d="M310 60a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M310 80h70h.5"></path></g><path
    d="M380 80a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M390 60h10h.5"></path><path d="M400 60h0h.5"></path></g><path
    d="M400 60h20h.5"></path><path
    d="M110 60a10 10 0 0 1 10 10v19a10 10 0 0 0 10 10h.5"></path><g><path
    d="M130 99h90h.5"></path><path d="M310 99h90h.5"></path><path
    d="M220 99h10h.5"></path><g><path d="M230 99h70h.5"></path><rect
    height=22 width=70 x=230 y=88></rect><text x=265
    y=103>digit</text></g><path d="M300 99h10h.5"></path><path
    d="M230 99a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M230 119h70h.5"></path></g><path
    d="M300 119a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M400 99a10 10 0 0 0 10 -10v-19a10 10 0 0 1 10 -10h.5"></path><path
    d="M110 60a10 10 0 0 1 10 10v58a10 10 0 0 0 10 10h.5"></path><g><path
    d="M130 138h55h.5"></path><path d="M185 138h10h.5"></path><g><path
    d="M195 138h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=195
    y=127></rect><text x=210 y=142>.</text></g><path
    d="M225 138h10h.5"></path><path d="M235 138h10h.5"></path><g><path
    d="M245 138h0h.5"></path><path d="M335 138h0h.5"></path><path
    d="M245 138h10h.5"></path><g><path d="M255 138h70h.5"></path><rect
    height=22 width=70 x=255 y=127></rect><text x=290
    y=142>digit</text></g><path d="M325 138h10h.5"></path><path
    d="M255 138a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M255 158h70h.5"></path></g><path
    d="M325 158a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M335 138h10h.5"></path><path d="M345 138h55h.5"></path></g><path
    d="M400 138a10 10 0 0 0 10 -10v-58a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M420 60h0h.5"></path><path d="M710 60h0h.5"></path><path
    d="M420 60h20h.5"></path><g><path d="M440 60h250h.5"></path></g><path
    d="M690 60h20h.5"></path><path
    d="M420 60a10 10 0 0 1 10 10v28a10 10 0 0 0 10 10h.5"></path><g><path
    d="M440 108h0h.5"></path><g><path d="M440 108h0h.5"></path><path
    d="M510 108h0h.5"></path><path d="M440 108h20h.5"></path><g><path
    d="M460 108h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=460
    y=97></rect><text x=475 y=112>e</text></g><path
    d="M490 108h20h.5"></path><path
    d="M440 108a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M460 138h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=460
    y=127></rect><text x=475 y=142>E</text></g><path
    d="M490 138a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><g><path
    d="M510 108h0h.5"></path><path d="M580 108h0h.5"></path><path
    d="M510 108a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M530 88h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=530
    y=77></rect><text x=545 y=92>+</text></g><path
    d="M560 88a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M510 108h20h.5"></path><g><path d="M530 108h30h.5"></path></g><path
    d="M560 108h20h.5"></path><path
    d="M510 108a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M530 128h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=530
    y=117></rect><text x=545 y=132>-</text></g><path
    d="M560 128a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M580 108h10h.5"></path><g><path d="M590 108h0h.5"></path><path
    d="M680 108h0h.5"></path><path d="M590 108h10h.5"></path><g><path
    d="M600 108h70h.5"></path><rect height=22 width=70 x=600
    y=97></rect><text x=635 y=112>digit</text></g><path
    d="M670 108h10h.5"></path><path
    d="M600 108a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M600 128h70h.5"></path></g><path
    d="M670 128a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M680 108h10h.5"></path><path d="M690 108h0h.5"></path></g><path
    d="M690 108a10 10 0 0 0 10 -10v-28a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M 710 60 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=dimension-diagram>DIMENSION

   <dd> <!--<script>
			Diagram(NonTerminal('NUMBER'), NonTerminal('IDENT')).addTo();
			</script>-->
    <svg class=diagram height=62 width=271>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h80h.5"></path><rect height=22
    width=80 x=50 y=20></rect><text x=90 y=35>NUMBER</text></g><path
    d="M130 31h10h.5"></path><path d="M140 31h10h.5"></path><g><path
    d="M150 31h70h.5"></path><rect height=22 width=70 x=150 y=20></rect><text
    x=185 y=35>IDENT</text></g><path d="M220 31h10h.5"></path><path
    d="M 230 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=percentage-diagram>PERCENTAGE

   <dd> <!--<script>
			Diagram(NonTerminal('NUMBER'), Terminal('%')).addTo();
			</script>-->
    <svg class=diagram height=62 width=231>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h80h.5"></path><rect height=22
    width=80 x=50 y=20></rect><text x=90 y=35>NUMBER</text></g><path
    d="M130 31h10h.5"></path><path d="M140 31h10h.5"></path><g><path
    d="M150 31h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=150
    y=20></rect><text x=165 y=35>%</text></g><path
    d="M180 31h10h.5"></path><path
    d="M 190 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=unicode-range-diagram>UNICODE-RANGE

   <dd> <!--<script>
			Diagram(
				Choice(0,
					Terminal('U'),
					Terminal('u')),
				Terminal('+'),
				Choice(0,
					Sequence(OneOrMore(NonTerminal('hex digit'), Comment('1-6 times'))),
					Sequence(
						ZeroOrMore(NonTerminal('hex digit'), Comment('1-5 times')),
						OneOrMore(Terminal('?'), Comment('1 to (6 - digits) times'))),
					Sequence(
						OneOrMore(NonTerminal('hex digit'), Comment('1-6 times')),
						Terminal('-'),
						OneOrMore(NonTerminal('hex digit'), Comment('1-6 times'))))).addTo();
			</script>-->
    <svg class=diagram height=222 width=622>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 31h0h.5"></path><path d="M110 31h0h.5"></path><path
    d="M40 31h20h.5"></path><g><path d="M60 31h30h.5"></path><rect height=22
    rx=10 ry=10 width=30 x=60 y=20></rect><text x=75 y=35>U</text></g><path
    d="M90 31h20h.5"></path><path
    d="M40 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M60 61h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=60
    y=50></rect><text x=75 y=65>u</text></g><path
    d="M90 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M110 31h10h.5"></path><g><path d="M120 31h30h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=120 y=20></rect><text x=135
    y=35>+</text></g><path d="M150 31h10h.5"></path><g><path
    d="M160 31h0h.5"></path><path d="M581 31h0h.5"></path><path
    d="M160 31h20h.5"></path><g><path d="M180 31h115.5h.5"></path><path
    d="M295.5 31h10h.5"></path><g><path d="M305.5 31h0h.5"></path><path
    d="M435.5 31h0h.5"></path><path d="M305.5 31h10h.5"></path><g><path
    d="M315.5 31h110h.5"></path><rect height=22 width=110 x=315.5
    y=20></rect><text x=370.5 y=35>hex digit</text></g><path
    d="M425.5 31h10h.5"></path><path
    d="M315.5 31a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M315.5 61h18.5h.5"></path><path d="M407 61h18.5h.5"></path><text
    class=comment x=370.5 y=66>1-6 times</text></g><path
    d="M425.5 61a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M435.5 31h10h.5"></path><path d="M445.5 31h115.5h.5"></path></g><path
    d="M561 31h20h.5"></path><path
    d="M160 31a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10h.5"></path><g><path
    d="M180 101h0h.5"></path><g><path d="M180 101h0h.5"></path><path
    d="M350 101h0h.5"></path><path
    d="M180 101a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M200 81h130h.5"></path></g><path
    d="M330 81a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M180 101h20h.5"></path><g><path d="M200 101h0h.5"></path><path
    d="M330 101h0h.5"></path><path d="M200 101h10h.5"></path><g><path
    d="M210 101h110h.5"></path><rect height=22 width=110 x=210
    y=90></rect><text x=265 y=105>hex digit</text></g><path
    d="M320 101h10h.5"></path><path
    d="M210 101a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M210 131h18.5h.5"></path><path d="M301.5 131h18.5h.5"></path><text
    class=comment x=265 y=136>1-5 times</text></g><path
    d="M320 131a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M330 101h20h.5"></path></g><path d="M350 101h10h.5"></path><g><path
    d="M360 101h0h.5"></path><path d="M551 101h0h.5"></path><path
    d="M360 101h10h.5"></path><g><path d="M370 101h171h.5"></path><rect
    height=22 rx=10 ry=10 width=30 x=440.5 y=90></rect><text x=455.5
    y=105>?</text></g><path d="M541 101h10h.5"></path><path
    d="M370 101a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M370 131h0h.5"></path><path d="M541 131h0h.5"></path><text
    class=comment x=455.5 y=136>1 to (6 - digits) times</text></g><path
    d="M541 131a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M551 101h10h.5"></path><path d="M561 101h0h.5"></path></g><path
    d="M561 101a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10h.5"></path><path
    d="M160 31a10 10 0 0 1 10 10v110a10 10 0 0 0 10 10h.5"></path><g><path
    d="M180 161h15.5h.5"></path><path d="M195.5 161h10h.5"></path><g><path
    d="M205.5 161h0h.5"></path><path d="M335.5 161h0h.5"></path><path
    d="M205.5 161h10h.5"></path><g><path d="M215.5 161h110h.5"></path><rect
    height=22 width=110 x=215.5 y=150></rect><text x=270.5 y=165>hex
    digit</text></g><path d="M325.5 161h10h.5"></path><path
    d="M215.5 161a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M215.5 191h18.5h.5"></path><path d="M307 191h18.5h.5"></path><text
    class=comment x=270.5 y=196>1-6 times</text></g><path
    d="M325.5 191a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M335.5 161h10h.5"></path><path d="M345.5 161h10h.5"></path><g><path
    d="M355.5 161h30h.5"></path><rect height=22 rx=10 ry=10 width=30 x=355.5
    y=150></rect><text x=370.5 y=165>-</text></g><path
    d="M385.5 161h10h.5"></path><path d="M395.5 161h10h.5"></path><g><path
    d="M405.5 161h0h.5"></path><path d="M535.5 161h0h.5"></path><path
    d="M405.5 161h10h.5"></path><g><path d="M415.5 161h110h.5"></path><rect
    height=22 width=110 x=415.5 y=150></rect><text x=470.5 y=165>hex
    digit</text></g><path d="M525.5 161h10h.5"></path><path
    d="M415.5 161a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10h.5"></path><g><path
    d="M415.5 191h18.5h.5"></path><path d="M507 191h18.5h.5"></path><text
    class=comment x=470.5 y=196>1-6 times</text></g><path
    d="M525.5 191a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M535.5 161h10h.5"></path><path d="M545.5 161h15.5h.5"></path></g><path
    d="M561 161a10 10 0 0 0 10 -10v-110a10 10 0 0 1 10 -10h.5"></path></g><path
    d="M 581 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=comment-diagram>COMMENT

   <dd> <!--<script>
			Diagram(
				Terminal('/*'),
				ZeroOrMore(
					NonTerminal("anything but * followed by /")),
				Terminal('*/')).addTo();
			</script>-->
    <svg class=diagram height=81 width=561>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 41h10h.5"></path><g><path d="M50 41h40h.5"></path><rect height=22
    rx=10 ry=10 width=40 x=50 y=30></rect><text x=70 y=45>/*</text></g><path
    d="M90 41h10h.5"></path><g><path d="M100 41h0h.5"></path><path
    d="M460 41h0h.5"></path><path
    d="M100 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10h.5"></path><g><path
    d="M120 21h320h.5"></path></g><path
    d="M440 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10h.5"></path><path
    d="M100 41h20h.5"></path><g><path d="M120 41h0h.5"></path><path
    d="M440 41h0h.5"></path><path d="M120 41h10h.5"></path><g><path
    d="M130 41h300h.5"></path><rect height=22 width=300 x=130
    y=30></rect><text x=280 y=45>anything but * followed by /</text></g><path
    d="M430 41h10h.5"></path><path
    d="M130 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10h.5"></path><g><path
    d="M130 61h300h.5"></path></g><path
    d="M430 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10h.5"></path></g><path
    d="M440 41h20h.5"></path></g><path d="M460 41h10h.5"></path><g><path
    d="M470 41h40h.5"></path><rect height=22 rx=10 ry=10 width=40 x=470
    y=30></rect><text x=490 y=45>*/</text></g><path
    d="M510 41h10h.5"></path><path
    d="M 520 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=cdo-diagram>CDO

   <dd> <!--<script>
			Diagram(Terminal("<" + "!--")).addTo();
			</script>-->
    <svg class=diagram height=62 width=161>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h60h.5"></path><rect height=22
    rx=10 ry=10 width=60 x=50 y=20></rect><text x=80
    y=35>&lt;!--</text></g><path d="M110 31h10h.5"></path><path
    d="M 120 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=cdc-diagram>CDC

   <dd> <!--<script>
			Diagram(Terminal("-" + "->")).addTo();
			</script>-->
    <svg class=diagram height=62 width=151>
    <style>.diagram{background-color:hsl(30,20%,95%);} .diagram path{stroke-width:3;stroke:black;fill:rgba(0,0,0,0);} .diagram text{font:bold 14px monospace;text-anchor:middle;} .diagram text.label{text-anchor:start;} .diagram text.comment{font:italic 12px monospace;} .diagram rect{stroke-width:3;stroke:black;fill:hsl(120,100%,90%);}</style><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10h.5"></path><g><path d="M50 31h50h.5"></path><rect height=22
    rx=10 ry=10 width=50 x=50 y=20></rect><text x=75
    y=35>--&gt;</text></g><path d="M100 31h10h.5"></path><path
    d="M 110 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>
  </dl>

  <h4 id=tokenizer-flags><span class=secno>3.4.2. </span> Tokenizer Flags</h4>

  <p> The tokenizer can be run with any of several flags that alter its
   behavior.

  <dl>
   <dt>the <dfn id=transform-function-whitespace>transform function
    whitespace</dfn> flag

   <dd> This flag is set when parsing SVG's <code>transform</code> attribute.
    When this is set, whitespace is allowed between the name of a transform
    function and its opening parenthesis.

   <dt>the <dfn id=quirks-mode>quirks mode</dfn> flag

   <dd> This flag is set when the host document is in quirks mode. When this
    is set, the parser allows <a
    href="#consume-a-primitive-with-the-hashless-co">hash colors without the
    # character</a> and <a
    href="#consume-a-primitive-with-the-unitless-le">pixel lengths without
    the ‘<code class=property>px</code>’ unit</a> in some circumstances.
  </dl>

  <h4 id=definitions><span class=secno>3.4.3. </span> Definitions</h4>

  <p> This section defines several terms used during the tokenization phase.

  <dl>
   <dt><dfn id=digit>digit</dfn>

   <dd> A character between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).

   <dt><dfn id=hex-digit>hex digit</dfn>

   <dd> A <a href="#digit"><i>digit</i></a>, or a character between U+0041
    LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F), or a
    character between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL
    LETTER F (f).

   <dt><dfn id=uppercase-letter>uppercase letter</dfn>

   <dd> A character between U+0041 LATIN CAPITAL LETTER A (A) and U+005A
    LATIN CAPITAL LETTER Z (Z).

   <dt><dfn id=lowercase-letter>lowercase letter</dfn>

   <dd> A character between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN
    SMALL LETTER Z (z).

   <dt><dfn id=letter>letter</dfn>

   <dd> An <a href="#uppercase-letter"><i>uppercase letter</i></a> or a <a
    href="#lowercase-letter"><i>lowercase letter</i></a>.

   <dt><dfn id=non-ascii-character>non-ASCII character</dfn>

   <dd> A character with a codepoint equal to or greater than U+00A0 NO-BREAK
    SPACE.

   <dt><dfn id=name-start-character>name-start character</dfn>

   <dd> A <a href="#letter"><i>letter</i></a>, a <a
    href="#non-ascii-character"><i>non-ASCII character</i></a>, or U+005F LOW
    LINE (_).

   <dt><dfn id=name-character>name character</dfn>

   <dd> A <a href="#name-start-character"><i>name-start character</i></a>, A
    <a href="#digit"><i>digit</i></a>, or U+002D HYPHEN-MINUS (-).

   <dt><dfn id=non-printable-character>non-printable character</dfn>

   <dd> A character between U+0000 NULL and U+0008 BACKSPACE or a character
    between U+000E SHIFT OUT and U+001F INFORMATION SEPARATOR ONE or a
    character between U+007F DELETE and U+009F APPLICATION PROGRAM COMMAND.

   <dt><dfn id=newline>newline</dfn>

   <dd> U+000A LINE FEED or U+000C FORM FEED. <span class=note> Note that
    U+000D CARRIAGE RETURN is not included in this definition, as it is
    removed from the stream during preprocessing. </span>

   <dt><dfn id=whitespace>whitespace</dfn>

   <dd>A <a href="#newline"><i>newline</i></a>, U+0009 CHARACTER TABULATION,
    or U+0020 SPACE.

   <dt><dfn id=maximum-allowed-codepoint>maximum allowed codepoint</dfn>

   <dd>The greatest codepoint defined by Unicode. This is currently U+10FFFF.
  </dl>

  <h4 id=data-state><span class=secno>3.4.4. </span> <dfn id=data-state0>Data
   state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Consume as much <a href="#whitespace"><i>whitespace</i></a> as
    possible. Emit a whitespace token. Remain in this state.

   <dt>U+0022 QUOTATION MARK (")

   <dd> Switch to the <a
    href="#double-quote-string-state0"><i>double-quote-string state</i></a>.

   <dt>U+0023 NUMBER SIGN (#)

   <dd> Switch to the <a href="#hash-state0"><i>hash state</i></a>.

   <dt>U+0027 APOSTROPHE (&apos;)

   <dd> Switch to the <a
    href="#single-quote-string-state0"><i>single-quote-string state</i></a>.

   <dt>U+0028 LEFT PARENTHESIS (()

   <dd> Emit a ( token. Remain in this state.

   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Emit a ) token. Remain in this state.

   <dt>U+002B PLUS SIGN (+)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, or the <a
    href="#next-input-character"><i title="next input character">next 2 input
    characters</i></a> are U+002E FULL STOP (.) followed by a <a
    href="#digit"><i>digit</i></a>, switch to the <a
    href="#number-state0"><i>number state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, emit a delim token with its value set to U+002B PLUS SIGN
     (+). Remain in this state.

   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 2 input characters</i></a> are U+002D
    HYPHEN-MINUS U+003E GREATER-THAN SIGN (->), consume them, emit a CDC
    token, and remain in this state.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#digit"><i>digit</i></a>, or the <a
     href="#next-input-character"><i title="next input character">next 2
     input characters</i></a> are U+002E FULL STOP (.) followed by a <a
     href="#digit"><i>digit</i></a>, switch to the <a
     href="#number-state0"><i>number state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#name-start-character"><i>name-start
     character</i></a>, switch to the <a href="#ident-state0"><i>ident
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

    <p> Otherwise, emit a delim token with its value set to U+002D
     HYPHEN-MINUS (-). Remain in this state.

   <dt>U+002E FULL STOP (.)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a digit, switch to the <a
    href="#number-state0"><i>number state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, emit a delim token with its value set to U+002E FULL STOP
     (.). Remain in this state.

   <dt>U+002F SOLIDUS (/)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+002A ASTERISK (*), consume it and switch to the <a
    href="#comment-state0"><i>comment state</i></a>.
    <p> Otherwise, emit a delim token with its value set to U+002F SOLIDUS
     (/). Remain in this state.

   <dt>U+003A COLON (:)

   <dd> Emit a colon token. Remain in this state.

   <dt>U+003B SEMICOLON (;)

   <dd> Emit a semicolon token. Remain in this state.

   <dt>U+003C LESS-THAN SIGN (&lt;)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 3 input characters</i></a> are U+0021
    EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), consume
    them and emit a cdo token. Remain in this state.
    <p> Otherwise, emit a delim token with its value set to U+003C LESS-THAN
     SIGN (&lt;). Remain in this state.

   <dt>U+0040 COMMERCIAL AT (@)

   <dd> Switch to the <a href="#at-keyword-state0"><i>at-keyword
    state</i></a>.

   <dt>U+005B LEFT SQUARE BRACKET ([)

   <dd> Emit a [ token. Remain in this state.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, this
    is a <i>parse error</i>. Emit a delim token with its value set to U+005C
    REVERSE SOLIDUS (\). Remain in this state.
    <p> Otherwise, switch to the <a href="#ident-state0"><i>ident
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+005D RIGHT SQUARE BRACKET (])

   <dd> Emit a ] token. Remain in this state.

   <dt>U+007B LEFT CURLY BRACKET ({)

   <dd> Emit a { token. Remain in this state.

   <dt>U+007D RIGHT CURLY BRACKET (})

   <dd> Emit a } token. Remain in this state.

   <dt><a href="#digit"><i>digit</i></a>

   <dd> Switch to the <a href="#number-state0"><i>number state</i></a>.
    Reconsume the <a href="#current-input-character"><i>current input
    character</i></a>.

   <dt>U+0055 LATIN CAPITAL LETTER U (U)

   <dt>U+0075 LATIN SMALL LETTER U (u)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 2 input character</i></a> are U+002B
    PLUS SIGN (+) followed by a <a href="#hex-digit"><i>hex digit</i></a>,
    consume the <a href="#next-input-character"><i>next input
    character</i></a>. <span class=note>Note: don't consume both of
    them.</span> Switch to the <a
    href="#unicode-range-state0"><i>unicode-range state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 3 input characters</i></a> are U+0052
     LATIN CAPITAL LETTER R (R) or U+0072 LATIN SMALL LETTER R (r) followed
     by U+004C LATIN CAPITAL LETTER L (L) or U+006C LATIN SMALL LETTER L (l)
     followed by U+0028 LEFT PARENTHESIS ((), consume them. Switch to the <a
     href="#url-state0"><i>url state</i></a>.

    <p>Otherwise, switch to the <a href="#ident-state0"><i>ident
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> Switch to the <a href="#ident-state0"><i>ident state</i></a>.
    Reconsume the <a href="#current-input-character"><i>current input
    character</i></a>.

   <dt>EOF

   <dd> Emit an end-of-file token.

   <dt>anything else

   <dd> Emit a delim token with its value set to the <a
    href="#current-input-character"><i>current input character</i></a>.
    Remain in this state.
  </dl>

  <h4 id=double-quote-string-state><span class=secno>3.4.5. </span> <dfn
   id=double-quote-string-state0>Double-quote-string state</dfn></h4>

  <p> If a string token has not yet been created since entering this state,
   create a string token with its value initially set to the empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0022 QUOTATION MARK (")

   <dd> Emit the string token. Return to the <a href="#data-state0"><i>data
    state</i></a>.

   <dt>EOF

   <dd> This is a <i>parse error</i>. Emit the string token. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt><a href="#newline"><i>newline</i></a>

   <dd> This is a <i>parse error</i>. Emit a bad-string token. Switch to the
    <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is an EOF, this is a <i>parse error</i>. Emit a
    bad-string token, then switch to the <a href="#data-state0"><i>data
    state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#newline"><i>newline</i></a>, consume
     it. Remain in this state.

    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the string
     token's value. Remain in this state.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the string token's value. Remain in this state.
  </dl>

  <h4 id=single-quote-string-state><span class=secno>3.4.6. </span> <dfn
   id=single-quote-string-state0>Single-quote-string state</dfn></h4>

  <p> If a string token has not yet been created since entering this state,
   create a string token with its value initially set to the empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0027 APOSTROPHE (&apos;)

   <dd> Emit the string token. Return to the <a href="#data-state0"><i>data
    state</i></a>.

   <dt>EOF

   <dd> This is a <i>parse error</i>. Emit the string token. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt><a href="#newline"><i>newline</i></a>

   <dd> This is a <i>parse error</i>. Emit a bad-string token. Switch to the
    <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is an EOF, this is a <i>parse error</i>. Emit a
    bad-string token, then switch to the <a href="#data-state0"><i>data
    state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#newline"><i>newline</i></a>, consume
     it. Remain in this state.

    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the string
     token's value. Remain in this state.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the string token's value. Remain in this state.
  </dl>

  <h4 id=hash-state><span class=secno>3.4.7. </span> <dfn id=hash-state0>Hash
   state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#name-character"><i>name character</i></a>

   <dd> Create a hash token with its value set to the <a
    href="#current-input-character"><i>current input character</i></a>.
    Switch to the <a href="#hash-rest-state0"><i>hash-rest state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    a delim token with its value set to U+0023 NUMBER SIGN (#). Switch to the
    <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Create a hash token with its value set to the
     returned character. Switch to the <a
     href="#hash-rest-state0"><i>hash-rest state</i></a>.

   <dt>anything else

   <dd> Emit a delim token with its value set to U+0023 NUMBER SIGN (#).
    Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume the
    <a href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=hash-rest-state><span class=secno>3.4.8. </span> <dfn
   id=hash-rest-state0>Hash-rest state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#name-character"><i>name character</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the hash token's value. Remain in this state.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    the hash token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the hash
     token's value. Remain in this state.

   <dt>anything else

   <dd> Emit the hash token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=comment-state><span class=secno>3.4.9. </span> <dfn
   id=comment-state0>Comment state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+002A ASTERISK (*)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+002F SOLIDUS (/), consume it, emit a comment
    token, and switch to the <a href="#data-state0"><i>data state</i></a>.
    <p> Otherwise, do nothing and remain in this state.

   <dt>EOF

   <dd> This is a <i>parse error</i>. Emit a comment token. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt>anything else

   <dd> Do nothing and remain in this state.
  </dl>

  <h4 id=at-keyword-state><span class=secno>3.4.10. </span> <dfn
   id=at-keyword-state0>At-keyword state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#name-start-character"><i>name-start
    character</i></a>, consume it. Create an at-keyword token with its value
    set to U+002D HYPHEN-MINUS followed by the <a
    href="#current-input-character"><i>current input character</i></a>.
    Switch to the <a href="#at-keyword-rest-state0"><i>at-keyword-rest
    state</i></a>.
    <p> Otherwise, emit a delim token with its value set to U+0040 COMMERCIAL
     AT (@). Switch to the <a href="#data-state0"><i>data state</i></a>.
     Reconsume the <a href="#current-input-character"><i>current input
     character</i></a>.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> Create an at-keyword token with its value set to the <a
    href="#current-input-character"><i>current input character</i></a>.
    Switch to the <a href="#at-keyword-rest-state0"><i>at-keyword-rest
    state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    a delim token with its value set to U+0040 COMMERCIAL AT (@). Switch to
    the <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Create an at-keyword token with its value set
     to the returned character. Switch to the <a
     href="#at-keyword-rest-state0"><i>at-keyword-rest state</i></a>.

   <dt>anything else

   <dd> Emit a delim token with its value set to U+0040 COMMERCIAL AT (@).
    Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume the
    <a href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=at-keyword-rest-state><span class=secno>3.4.11. </span> <dfn
   id=at-keyword-rest-state0>At-keyword-rest state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#name-character"><i>name character</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the at-keyword token's value. Remain in this state.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    the at-keyword token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the
     at-keyword token's value. Remain in this state.

   <dt>anything else

   <dd> Emit the at-keyword token. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=ident-state><span class=secno>3.4.12. </span> <dfn
   id=ident-state0>Ident state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#name-start-character"><i>name-start
    character</i></a>, create an identifer token with its value initially set
    to U+002D HYPHEN-MINUS. Switch to the <a
    href="#ident-rest-state0"><i>ident-rest state</i></a>.
    <p> Otherwise, switch to the <a href="#data-state0"><i>data
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> Create an ident token with its value set to the <a
    href="#current-input-character"><i>current input character</i></a>.
    Switch to the <a href="#ident-rest-state0"><i>ident-rest state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF,
    switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume the
    <a href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Create an ident token with its value set to
     the returned character. Switch to the <a
     href="#ident-rest-state0"><i>ident-rest state</i></a>.

   <dt>anything else

   <dd> Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume
    the <a href="#current-input-character"><i>current input
    character</i></a>.
  </dl>

  <h4 id=ident-rest-state><span class=secno>3.4.13. </span> <dfn
   id=ident-rest-state0>Ident-rest state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#name-character"><i>name character</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the ident token's value. Remain in this state.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    the ident token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the ident
     token's value. Remain in this state.

   <dt>U+0028 LEFT PARENTHESIS (()

   <dd> Emit a function token with its value set to the identifer token's
    value. Switch to the <a href="#data-state0"><i>data state</i></a>.

   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> If the <a href="#transform-function-whitespace"><i>transform function
    whitespace</i></a> flag is set, switch to the <a
    href="#transform-function-whitespace-state0"><i>transform-function-whitespace
    state</i></a>.
    <p> Otherwise, emit the ident token. Switch to the <a
     href="#data-state0"><i>data state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>anything else

   <dd> Emit the ident token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=transform-function-whitespace-state><span class=secno>3.4.14.
   </span> <dfn
   id=transform-function-whitespace-state0>Transform-function-whitespace
   state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Remain in this state.

   <dt>U+0028 LEFT PARENTHESIS (()

   <dd> Emit a function token with its value set to the identifer token's
    value. Switch to the <a href="#data-state0"><i>data state</i></a>.

   <dt>anything else

   <dd> Emit the ident token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=number-state><span class=secno>3.4.15. </span> <dfn
   id=number-state0>Number state</dfn></h4>

  <p> Create a number token with its representation initially set to the
   empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, consume it.
    Append U+002D HYPHEN-MINUS (-) to the number token's representation.
    Append the <a href="#digit"><i>digit</i></a> to the number token's
    representation. Switch to the <a
    href="#number-rest-state0"><i>number-rest state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 2 input characters</i></a> are U+002E
     FULL STOP followed by a <a href="#digit"><i>digit</i></a>, consume them.
     Append U+002D HYPHEN-MINUS (-) to the number token's representation.
     Append U+002E FULL STOP (.) to the number token's representation. Append
     the <a href="#digit"><i>digit</i></a> to the number token's
     representation. Switch to the <i>number fraction</i> state.

    <p> Otherwise, switch to the <a href="#data-state0"><i>data
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+002B PLUS SIGN (+)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, consume it.
    Append U+002D PLUS SIGN (+) to the number token's representation. Append
    the <a href="#digit"><i>digit</i></a> to the number token's
    representation. Switch to the <a
    href="#number-rest-state0"><i>number-rest state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 2 input characters</i></a> are U+002E
     FULL STOP followed by a <a href="#digit"><i>digit</i></a>, consume them.
     Append U+002D PLUS SIGN (+) to the number token's representation. Append
     U+002E FULL STOP (.) to the number token's representation. Append the <a
     href="#digit"><i>digit</i></a> to the number token's representation.
     Switch to the <i>number fraction</i> state.

    <p> Otherwise, switch to the <a href="#data-state0"><i>data
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt><a href="#digit"><i>digit</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the number token's representation. Switch to the <a
    href="#number-rest-state0"><i>number-rest state</i></a>.

   <dt>U+002E FULL STOP (.)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, consume it.
    Append U+002E FULL STOP (.) to the number token's representation. Append
    the <a href="#digit"><i>digit</i></a> to the number token's
    representation. Switch to the <a
    href="#number-fraction-state0"><i>number-fraction state</i></a>.
    <p> Otherwise, switch to the <a href="#data-state0"><i>data
     state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>anything else

   <dd> Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume
    the <a href="#current-input-character"><i>current input
    character</i></a>.
  </dl>

  <h4 id=number-rest-state><span class=secno>3.4.16. </span> <dfn
   id=number-rest-state0>Number-rest state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#digit"><i>digit</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the number token's representation. Remain in this
    state.

   <dt>U+002E FULL STOP (.)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, consume it.
    Append U+002E FULL STOP (.) followed by the <a
    href="#digit"><i>digit</i></a> to the number token's representation.
    Switch to the <a href="#number-fraction-state0"><i>number-fraction
    state</i></a>.
    <p> Otherwise, set the number token's value to the number produced by
     interpreting the number token's representation as a base-10 number and
     emit it. Switch to the <a href="#data-state0"><i>data state</i></a>.
     Reconsume the <a href="#current-input-character"><i>current input
     character</i></a>.

   <dt>U+0025 PERCENT SIGN (%)

   <dd> Emit a percentage token with its value set to the number produced by
    interpreting the number token's representation as a base-10 number.
    Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume the
    <a href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0045 LATIN CAPITAL LETTER E (E)

   <dt>U+0065 LATIN SMALL LETTER E (e)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, or the <a
    href="#next-input-character"><i title="next input character">next 2 input
    characters</i></a> are U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-)
    followed by a <a href="#digit"><i>digit</i></a>, consume them and append
    them to the number token's representation. Switch to the <a
    href="#sci-notation-state0"><i>sci-notation state</i></a>.
    <p> Otherwise, create a dimension token with its representation set to
     the number token's representation, its value set to the number produced
     by interpreting the number token's representation as a base-10 number,
     and a unit initially set to the <a
     href="#current-input-character"><i>current input character</i></a>.
     Switch to the <a href="#dimension-state0"><i>dimension state</i></a>.

   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#name-start-character"><i>name-start
    character</i></a>, consume it. Create a dimension token with its
    representation set to the number token's representation, its value set to
    the number produced by interpreting the number token's representation as
    a base-10 number, and a unit initially set to U+002D HYPHEN-MINUS
    followed by the <a href="#name-start-character"><i>name-start
    character</i></a>. Switch to the <a href="#dimension-state0"><i>dimension
    state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 2 input characters</i></a> are U+005C
     REVERSE SOLIDUS (\) followed by a <a href="#newline"><i>newline</i></a>,
     or U+005C REVERSE SOLIDUS (\) followed by EOF, set the number token's
     value to the number produced by interpreting the number token's
     representation as a base-10 number and emit it. Switch to the <a
     href="#data-state0"><i>data state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is U+005C REVERSE SOLIDUS (\), consume it, then <a
     href="#consume-an-escaped-character0"><i>consume an escaped
     character</i></a>. Create a dimension token with its representation set
     to the number token's representation, its value set to the number
     produced by interpreting the number token's representation as a base-10
     number, and a unit initially set to U+002D HYPHEN-MINUS followed by the
     returned character. Switch to the <a
     href="#dimension-state0"><i>dimension state</i></a>.

    <p> Otherwise, set the number token's value to the number produced by
     interpreting the number token's representation as a base-10 number and
     emit it. Switch to the <a href="#data-state0"><i>data state</i></a>.
     Reconsume the <a href="#current-input-character"><i>current input
     character</i></a>.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> Create a dimension token with its representation set to the number
    token's representation, its value set to the number produced by
    interpreting the number token's representation as a base-10 number, and a
    unit initially set to the <a href="#current-input-character"><i>current
    input character</i></a>. Switch to the <a
    href="#dimension-state0"><i>dimension state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, set
    the number token's value to the number produced by interpreting the
    number token's representation as a base-10 number and emit it. Switch to
    the <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Create a dimension token with its
     representation set to the number token's representation, its value set
     to the number produced by interpreting the number token's representation
     as a base-10 number, and a unit initially set to the returned character.
     Switch to the <a href="#dimension-state0"><i>dimension state</i></a>.

   <dt>anything else

   <dd> Emit a number token with its value set to the number produced by
    interpreting the string token's value as a base-10 number. Switch to the
    <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=number-fraction-state><span class=secno>3.4.17. </span> <dfn
   id=number-fraction-state0>Number-fraction state</dfn></h4>

  <p> Set the number token's type flag to "number".

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#digit"><i>digit</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the string token's value. Remain in this state.

   <dt>U+002E FULL STOP (.)

   <dd> Set the number token's value to the number produced by interpreting
    the number token's representation as a base-10 number and emit it. Switch
    to the <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0025 PERCENT SIGN (%)

   <dd> Emit a percentage token with its value set to the number produced by
    interpreting the number token's representation as a base-10 number.
    Switch to the <a href="#data-state0"><i>data state</i></a>. Reconsume the
    <a href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0045 LATIN CAPITAL LETTER E (E)

   <dt>U+0065 LATIN SMALL LETTER E (e)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#digit"><i>digit</i></a>, or the <a
    href="#next-input-character"><i title="next input character">next 2 input
    characters</i></a> are U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-)
    followed by a <a href="#digit"><i>digit</i></a>, consume them and append
    them to the number token's representation. Switch to the <a
    href="#sci-notation-state0"><i>sci-notation state</i></a>.
    <p> Otherwise, create a dimension token with its representation set to
     the number token's representation, its value set to the number produced
     by interpreting the number token's representation as a base-10 number,
     and a unit initially set to the <a
     href="#current-input-character"><i>current input character</i></a>.
     Switch to the <a href="#dimension-state0"><i>dimension state</i></a>.

   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#name-start-character"><i>name-start
    character</i></a>, consume it. Create a dimension token with its
    representation set to the number token's representation, its value set to
    the number produced by interpreting the number token's representation as
    a base-10 number, and a unit initially set to U+002D HYPHEN-MINUS
    followed by the <a href="#name-start-character"><i>name-start
    character</i></a>. Switch to the <a href="#dimension-state0"><i>dimension
    state</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 2 input characters</i></a> are U+005C
     REVERSE SOLIDUS (\) followed by a <a href="#newline"><i>newline</i></a>,
     or U+005C REVERSE SOLIDUS (\) followed by EOF, set the number token's
     value to the number produced by interpreting the number token's
     representation as a base-10 number and emit it. Switch to the <a
     href="#data-state0"><i>data state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is U+005C REVERSE SOLIDUS (\), consume it, then <a
     href="#consume-an-escaped-character0"><i>consume an escaped
     character</i></a>. Create a dimension token with its representation set
     to the number token's representation, its value set to the number
     produced by interpreting the number token's representation as a base-10
     number, and a unit initially set to U+002D HYPHEN-MINUS followed by the
     returned character. Switch to the <a
     href="#dimension-state0"><i>dimension state</i></a>.

    <p> Otherwise, set the number token's value to the number produced by
     interpreting the number token's representation as a base-10 number and
     emit it. Switch to the <a href="#data-state0"><i>data state</i></a>.
     Reconsume the <a href="#current-input-character"><i>current input
     character</i></a>.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> Create a dimension token with its representation set to the number
    token's representation, its value set to the number produced by
    interpreting the number token's representation as a base-10 number, and a
    unit initially set to the <a href="#current-input-character"><i>current
    input character</i></a>. Switch to the <a
    href="#dimension-state0"><i>dimension state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, set
    the number token's value to the number produced by interpreting the
    number token's representation as a base-10 number and emit it. Switch to
    the <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Create a dimension token with its
     representation set to the number token's representation, its value set
     to the number produced by interpreting the number token's representation
     as a base-10 number, and a unit initially set to the returned character.
     Switch to the <a href="#dimension-state0"><i>dimension state</i></a>.

   <dt>anything else

   <dd> Emit a number token with its value set to the number produced by
    interpreting the string token's value as a base-10 number. Switch to the
    <a href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=dimension-state><span class=secno>3.4.18. </span> <dfn
   id=dimension-state0>Dimension state</dfn></h4>
  <!--
		This state is currently always entered with a dimension token
		having already been created and gotten over the "first valid character" hump,
		so the dimension token is already ready to emit.

		If this ever becomes not true, make the necessary additions here
		or things will break.
	-->

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#name-character"><i>name character</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the dimension token's unit. Remain in this state.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, emit
    the dimension token. Switch to the <a href="#data-state0"><i>data
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the
     dimension token's unit.

   <dt>anything else

   <dd> Emit the dimension token. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=sci-notation-state><span class=secno>3.4.19. </span> <dfn
   id=sci-notation-state0>Sci-notation state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#digit"><i>digit</i></a>

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the number token's representation. Remain in this
    state.

   <dt>anything else

   <dd> Let <var>base</var> be the result of interpreting the portion of the
    number token's representation preceding the U+0045 LATIN CAPITAL LETTER E
    (E) or U+0065 LATIN SMALL LETTER E (e) as a base-10 number.
    <p> Let <var>power</var> be the result of interpreting the portion of the
     number token's representation following the U+0045 LATIN CAPITAL LETTER
     E (E) or U+0065 LATIN SMALL LETTER E (e) as a base-10 number.

    <p> Set the number token's value to <code><var>base</var> *
     10<sup><var>power</var></sup></code>. If the number token's value is not
     an integer, set the number token's type flag to "number". Emit the
     number token. Switch to the <i>date state</i>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=url-state><span class=secno>3.4.20. </span> <dfn id=url-state0>URL
   state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0022 QUOTATION MARK (")

   <dd> Switch to the <a href="#url-double-quote-state0"><i>url-double-quote
    state</i></a>.

   <dt>U+0027 APOSTROPHE (&apos;)

   <dd> Switch to the <a href="#url-single-quote-state0"><i>url-single-quote
    state</i></a>.

   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Emit a url token with its value set to the empty string. Switch to
    the <a href="#data-state0"><i>data state</i></a>.

   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Remain in this state.

   <dt>anything else

   <dd> Switch to the <a href="#url-unquoted-state0"><i>url-unquoted
    state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=url-double-quote-state><span class=secno>3.4.21. </span> <dfn
   id=url-double-quote-state0>URL-double-quote state</dfn></h4>

  <p> If a url token has not yet been created since entering this state,
   create a url token with its value initially set to the empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0022 QUOTATION MARK (")

   <dd> Switch to the <a href="#url-end-state0"><i>url-end state</i></a>.

   <dt><a href="#newline"><i>newline</i></a>

   <dd> This is a <i>parse error</i>. Switch to the <a
    href="#bad-url-state0"><i>bad-url state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is EOF, this is a <i>parse error</i>. Emit a bad-url
    token. Switch to the <a href="#data-state0"><i>data state</i></a>.
    Reconsume the <a href="#current-input-character"><i>current input
    character</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#newline"><i>newline</i></a>, consume it
     and remain in this state.

    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the url
     token's value. Remain in this state.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the url token's value. Remain in this state.
  </dl>

  <h4 id=url-single-quote-state><span class=secno>3.4.22. </span> <dfn
   id=url-single-quote-state0>URL-single-quote state</dfn></h4>

  <p> If a url token has not yet been created since entering this state,
   create a url token with its value initially set to the empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0027 APOSTROPHE (&apos;)

   <dd> Switch to the <a href="#url-end-state0"><i>url-end state</i></a>.

   <dt><a href="#newline"><i>newline</i></a>

   <dd> This is a <i>parse error</i>. Switch to the <a
    href="#bad-url-state0"><i>bad-url state</i></a>.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is EOF, this is a <i>parse error</i>. Emit a bad-url
    token. Switch to the <a href="#data-state0"><i>data state</i></a>.
    Reconsume the <a href="#current-input-character"><i>current input
    character</i></a>.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a <a href="#newline"><i>newline</i></a>, consume it
     and remain in this state.

    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the url
     token's value. Remain in this state.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the url token's value. Remain in this state.
  </dl>

  <h4 id=url-end-state><span class=secno>3.4.23. </span> <dfn
   id=url-end-state0>URL-end state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Remain in this state.

   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Emit the url token. Switch to the <a href="#data-state0"><i>data
    state</i></a>.

   <dt>anything else

   <dd> This is a <i>parse error</i>. Switch to the <a
    href="#bad-url-state0"><i>bad-url state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=url-unquoted-state><span class=secno>3.4.24. </span> <dfn
   id=url-unquoted-state0>URL-unquoted state</dfn></h4>

  <p> If a url token has not yet been created since entering this state,
   create a url token with its value initially set to the empty string.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Switch to the <a href="#url-end-state0"><i>url-end state</i></a>.

   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Emit the url token. Switch to the <a href="#data-state0"><i>data
    state</i></a>.

   <dt>U+0022 QUOTATION MARK (")

   <dt>U+0027 APOSTROPHE (&apos;)

   <dt>U+0028 LEFT PARENTHESIS (()

   <dt><i>non-printing character</i>

   <dd> This is a <i>parse error</i>. Switch to the <a
    href="#bad-url-state0"><i>bad-url state</i></a>.

   <dt>U+005C REVERSE SOLIDUS

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, this
    is a <i>parse error</i>. Switch to the <a
    href="#bad-url-state0"><i>bad-url state</i></a>.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Append the returned character to the url
     token's value. Remain in this state.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the url token's value. Remain in this state.
  </dl>

  <h4 id=bad-url-state><span class=secno>3.4.25. </span> <dfn
   id=bad-url-state0>Bad-URL state</dfn></h4>

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Emit a bad-url token. Switch to the <a href="#data-state0"><i>data
    state</i></a>.

   <dt>

   <dt>U+005C REVERSE SOLIDUS

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#newline"><i>newline</i></a> or EOF, do
    nothing and remain in this state.
    <p> Otherwise, <a href="#consume-an-escaped-character0"><i>consume an
     escaped character</i></a>. Remain in this state.

   <dt>anything else

   <dd> Do nothing. Remain in this state.
  </dl>

  <h4 id=unicode-range-state><span class=secno>3.4.26. </span> <dfn
   id=unicode-range-state0>Unicode-range state</dfn></h4>

  <p> Create a new unicode-range token with an empty range.

  <p> Consume as many <a href="#hex-digit"><i>hex digits</i></a> as possible,
   but no more than 6. If less than 6 <a href="#hex-digit"><i>hex
   digits</i></a> were consumed, consume as many U+003F QUESTION MARK (?)
   characters as possible, but no more than enough to make the total of <a
   href="#hex-digit"><i>hex digits</i></a> and U+003F QUESTION MARK (?)
   characters equal to 6.

  <p> If any U+003F QUESTION MARK (?) characters were consumed, first
   interpret the consumed characters as a hexadecimal number, with the U+003F
   QUESTION MARK (?) characters replaced by U+0030 DIGIT ZERO (0) characters.
   This is the <a href="#start-of-the-range"><i>start of the range</i></a>.
   Then interpret the consumed characters as a hexadecimal number again, with
   the U+003F QUESTION MARK (?) character replaced by U+0046 LATIN CAPITAL
   LETTER F (F) characters. This is the <a href="#end-of-the-range"><i>end of
   the range</i></a>. <a href="#set-the-unicode-range-tokens-range0"><i>Set
   the unicode-range token's range</i></a>, then emit it. Switch to the <a
   href="#data-state0"><i>data state</i></a>.

  <p> Otherwise, interpret the digits as a hexadecimal number. This is the <a
   href="#start-of-the-range"><i>start of the range</i></a>.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#hex-digit"><i>hex digit</i></a>, consume
    as many <a href="#hex-digit"><i>hex digits</i></a> as possible, but no
    more than 6. Interpret the digits as a hexadecimal number. This is the <a
    href="#end-of-the-range"><i>end of the range</i></a>. <a
    href="#set-the-unicode-range-tokens-range0"><i>Set the unicode-range
    token's range</i></a>, then emit it. Switch to the <a
    href="#data-state0"><i>data state</i></a>.
    <p> Otherwise, <a href="#set-the-unicode-range-tokens-range0"><i>set the
     unicode-range token's range</i></a> and emit it. Switch to the <a
     href="#data-state0"><i>data state</i></a>. Reconsume the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>anything else

   <dd> <a href="#set-the-unicode-range-tokens-range0"><i>Set the
    unicode-range token's range</i></a> and emit it. Switch to the <a
    href="#data-state0"><i>data state</i></a>. Reconsume the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=consume-an-escaped-character><span class=secno>3.4.27. </span> <dfn
   id=consume-an-escaped-character0>Consume an escaped character</dfn></h4>

  <p> This section describes how to <a
   href="#consume-an-escaped-character0"><i>consume an escaped
   character</i></a>. It assumes that the U+005C REVERSE SOLIDUS (\) has
   already been consumed and that the next input character has already been
   verified to not be a <a href="#newline"><i>newline</i></a> or EOF. It will
   return a character.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#hex-digit"><i>hex digit</i></a>

   <dd> Consume as many <a href="#hex-digit"><i>hex digits</i></a> as
    possible, but no more than 5. <span class=note>Note that this means 1-6
    hex digits have been consumed in total.</span> If the <a
    href="#next-input-character"><i>next input character</i></a> is <a
    href="#whitespace"><i>whitespace</i></a>, consume it as well. Interpret
    the <a href="#hex-digit"><i>hex digits</i></a> as a hexadecimal number.
    If this number is zero, or is greater than the <a
    href="#maximum-allowed-codepoint"><i>maximum allowed codepoint</i></a>,
    return U+FFFD REPLACEMENT CHARACTER (�). Otherwise, return the
    character with that codepoint.

   <dt>anything else

   <dd> Return the <a href="#current-input-character"><i>current input
    character</i></a>.
  </dl>

  <h4 id=set-the-unicode-range-tokens-range><span class=secno>3.4.28. </span>
   <dfn id=set-the-unicode-range-tokens-range0>Set the unicode-range token's
   range</dfn></h4>

  <p> This section describes how to set a unicode-range token's range so that
   the range it describes is within the supported range of unicode
   characters.

  <p> It assumes that the <dfn id=start-of-the-range>start of the range</dfn>
   has been defined, the <dfn id=end-of-the-range>end of the range</dfn>
   might be defined, and both are non-negative integers.

  <p> If the <a href="#start-of-the-range"><i>start of the range</i></a> is
   greater than the <a href="#maximum-allowed-codepoint"><i>maximum allowed
   codepoint</i></a>, the unicode-range token's range is empty.

  <p> If the <a href="#end-of-the-range"><i>end of the range</i></a> is
   defined, and it is less than the <a href="#start-of-the-range"><i>start of
   the range</i></a>, the unicode-range token's range is empty.

  <p> If the <a href="#end-of-the-range"><i>end of the range</i></a> is not
   defined, the unicode-range token's range is the single character whose
   codepoint is the <a href="#start-of-the-range"><i>start of the
   range</i></a>.

  <p> Otherwise, if the <a href="#end-of-the-range"><i>end of the
   range</i></a> is greater than the <a
   href="#maximum-allowed-codepoint"><i>maximum allowed codepoint</i></a>,
   change it to the <a href="#maximum-allowed-codepoint"><i>maximum allowed
   codepoint</i></a>. The unicode-range token's range is all characters
   between the character whose codepoint is the <a
   href="#start-of-the-range"><i>start of the range</i></a> and the character
   whose codepoint is the <a href="#end-of-the-range"><i>end of the
   range</i></a>.

  <h3 id=changes-from-css-2.1-tokenizer><span class=secno>3.5. </span>
   Changes from CSS 2.1 Tokenizer</h3>

  <p> <em>This section is non-normative.</em>

  <p> Here are the changes that I know that I've made to the tokenizer of
   2.1. If there are changes not present here, please let me know as they may
   be unintentional.

  <p> Note that the point of this spec is to match reality; changes from
   CSS2.1&apos;s tokenizer are nearly always because the tokenizer specified
   something that doesn't match actual browser behavior, or left something
   unspecified. If some detail doesn't match browsers, please let me know as
   it's almost certainly unintentional.

  <ol>
   <li> The DASHMATCH and INCLUDES tokens have been removed. They can instead
    be handled simply by having them parse as DELIM tokens. It was weird to
    privilege just those two types of attribute equality operators, when
    Selectors 3 adds several more.

   <li> The BAD-URI token (now bad-url) is "self-contained". In other words,
    once the tokenizer realizes it's in a bad-url rather than a url token, it
    just seeks forward to look for the closing ), ignoring everything else.
    This behavior is simpler than treating it like a FUNCTION token and
    paying attention to opened blocks and such. Only WebKit exhibits this
    behavior, but it doesn't appear that we've gotten any compat bugs from
    it.

   <li> The number, percentage, and dimension tokens have been changed to
    include the preceding +/- sign as part of their value (rather than as a
    separate DELIM token that needs to be manually handled every time the
    token is mentioned in other specs). The only consequence of this is that
    comments can no longer be inserted between the sign and the number.

   <li> Some flags have been added for SVG-compatible tokenizing, so that a
    single state machine can be used for both "vanilla" and SVG CSS parsing.

   <li> Scientific notation is supported for numbers, per WG resolution.
  </ol>
  <!--
PPPPPPPPPPPPPPPPP        AAA               RRRRRRRRRRRRRRRRR      SSSSSSSSSSSSSSS EEEEEEEEEEEEEEEEEEEEEERRRRRRRRRRRRRRRRR   
P::::::::::::::::P      A:::A              R::::::::::::::::R   SS:::::::::::::::SE::::::::::::::::::::ER::::::::::::::::R  
P::::::PPPPPP:::::P    A:::::A             R::::::RRRRRR:::::R S:::::SSSSSS::::::SE::::::::::::::::::::ER::::::RRRRRR:::::R 
PP:::::P     P:::::P  A:::::::A            RR:::::R     R:::::RS:::::S     SSSSSSSEE::::::EEEEEEEEE::::ERR:::::R     R:::::R
  P::::P     P:::::P A:::::::::A             R::::R     R:::::RS:::::S              E:::::E       EEEEEE  R::::R     R:::::R
  P::::P     P:::::PA:::::A:::::A            R::::R     R:::::RS:::::S              E:::::E               R::::R     R:::::R
  P::::PPPPPP:::::PA:::::A A:::::A           R::::RRRRRR:::::R  S::::SSSS           E::::::EEEEEEEEEE     R::::RRRRRR:::::R 
  P:::::::::::::PPA:::::A   A:::::A          R:::::::::::::RR    SS::::::SSSSS      E:::::::::::::::E     R:::::::::::::RR  
  P::::PPPPPPPPP A:::::A     A:::::A         R::::RRRRRR:::::R     SSS::::::::SS    E:::::::::::::::E     R::::RRRRRR:::::R 
  P::::P        A:::::AAAAAAAAA:::::A        R::::R     R:::::R       SSSSSS::::S   E::::::EEEEEEEEEE     R::::R     R:::::R
  P::::P       A:::::::::::::::::::::A       R::::R     R:::::R            S:::::S  E:::::E               R::::R     R:::::R
  P::::P      A:::::AAAAAAAAAAAAA:::::A      R::::R     R:::::R            S:::::S  E:::::E       EEEEEE  R::::R     R:::::R
PP::::::PP   A:::::A             A:::::A   RR:::::R     R:::::RSSSSSSS     S:::::SEE::::::EEEEEEEE:::::ERR:::::R     R:::::R
P::::::::P  A:::::A               A:::::A  R::::::R     R:::::RS::::::SSSSSS:::::SE::::::::::::::::::::ER::::::R     R:::::R
P::::::::P A:::::A                 A:::::A R::::::R     R:::::RS:::::::::::::::SS E::::::::::::::::::::ER::::::R     R:::::R
PPPPPPPPPPAAAAAAA                   AAAAAAARRRRRRRR     RRRRRRR SSSSSSSSSSSSSSS   EEEEEEEEEEEEEEEEEEEEEERRRRRRRR     RRRRRRR
-->

  <h3 id=tree-construction><span class=secno>3.6. </span> Tree Construction</h3>

  <p> The input to the tree construction stage is a sequence of tokens from
   the tokenization stage. The output is a tree of items with a stylesheet at
   the root and all other nodes being at-rules, style rules, or declarations.

  <p> The construction of this stylesheet does not take into account
   unrecognized items, like unknown properties or at-rules. It simply
   produces a tree of rules according to the fundamental syntax of CSS.
   Unrecognized or misplaced rules are handled in the CSSOM Construction
   stage.

  <p> The items that can appear in the tree are a mixture of basic tokens and
   new objects:

  <dl>
   <dt>stylesheet

   <dd> A stylesheet has a value consisting of a list of at-rules and style
    rules.

   <dt>at-rule

   <dd> An at-rule has a name, a prelude consisting of a list of primitives,
    and a value consisting of a list of at-rules, style rules, or
    declarations.

   <dt>style rule

   <dd> A style rule has a selector consisting of a list of primitives, and a
    value consisting of a list of at-rules or declarations.

   <dt>declaration

   <dd> A declaration has a name and a value consisting of a list of
    primitives.

   <dt>primitive

   <dd> A primitive is one of the preserved tokens, a function, or a simple
    block.

   <dt>preserved tokens

   <dd> The tokens that can appear in the tree are: ident, hash, string, url,
    delim, number, percentage, dimension, unicode-range, whitespace, comment,
    cdo, cdc, colon, semicolon, at-keyword, ], ), and }.
    <p class=note> This means that the following tokens emitted by the
     tokenizer stage will <strong>not</strong> appear in the stylesheet
     object: function, bad-string, bad-url, [, (, {.

   <dt>function

   <dd> A function has a name, and a list of arguments. Each argument is a
    list of primitives.

   <dt>simple block

   <dd> A simple block has an associated token (either a [, (, or { token)
    and a value consisting of a list of primitives.
  </dl>

  <div class=issue>
   <p> TODO:

   <ul>
    <li> Make sure that I properly handle the case where the top element in
     the stack isn't a stylesheet, such as when parsing the
     <code>style</code> attribute (there, the top element is a style rule,
     and we start by entering the declaration-block mode).

    <li> Handle the an+b production somehow. Maybe just define it in property
     grammar terms?
   </ul>
  </div>

  <h4 id=definitions0><span class=secno>3.6.1. </span> Definitions</h4>

  <dl>
   <dt><dfn id=current-input-token>current input token</dfn>

   <dd> The token currently being operated on, from the list of tokens
    produced by the tokenizer.

   <dt><dfn id=next-input-token>next input token</dfn>

   <dd> The token following the <a href="#current-input-token"><i>current
    input token</i></a> in the list of tokens produced by the tokenizer. If
    there isn't a token following the <a
    href="#current-input-token"><i>current input token</i></a>, the <a
    href="#next-input-token"><i>next input token</i></a> is an EOF token.

   <dt><dfn id=reconsume-the-current-input-token>reconsume the current input
    token</dfn>

   <dd> Push the current input token back onto the list of tokens produced by
    the tokenizer, so that the next time a mode instructs you to consume the
    next input token, it will instead reconsume the current input token.

   <dt><dfn id=stack-of-open-rules>stack of open rules</dfn>

   <dd> A stack of rules. This stack always contains the stylesheet object at
    the bottom of the stack, gains additional rules as block are opened, and
    loses them when blocks are closed.

   <dt><dfn id=current-rule>current rule</dfn>

   <dd> The topmost rule in the <a href="#stack-of-open-rules"><i>stack of
    open rules</i></a>.

   <dt><dfn id=current-declaration>current declaration</dfn>

   <dd> The declaration currently being built. There may or may not be a
    current declaration at any given time, but there is never more than one.

   <dt><dfn id=rule-filled>rule-filled</dfn>

   <dd> An at-rule that takes a block, and within that block accepts at-rules
    and/or style rules (which encompasses more than just style rules, such as
    keyframe rules), is called <a href="#rule-filled"><i>rule-filled</i></a>.
    Examples of <a href="#rule-filled"><i>rule-filled</i></a> at-rules are
    ‘<code class=css>@media</code>’ and ‘<code
    class=css>@keyframes</code>’.

   <dt><dfn id=declaration-filled>declaration-filled</dfn>

   <dd> An at-rule that takes a block, and within that block accepts at-rules
    and/or declarations, is called <a
    href="#declaration-filled"><i>declaration-filled</i></a>. Examples of <a
    href="#declaration-filled"><i>declaration-filled</i></a> at-rules are
    ‘<code class=css>@font-face</code>’ and ‘<code
    class=css>@page</code>’.
  </dl>

  <h4 id=top-level-mode><span class=secno>3.6.2. </span> <dfn
   id=top-level-mode0>Top-level mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>cdo token

   <dt>cdc token

   <dt>whitespace token

   <dd> Do nothing. Remain in this mode.

   <dt>at-keyword token

   <dd> Create an at-rule with its name set to the value of the <a
    href="#current-input-token"><i>current input token</i></a> and push it
    onto the <a href="#stack-of-open-rules"><i>stack of open rules</i></a>.
    Switch to the <a href="#at-rule-prelude-mode0"><i>at-rule-prelude
    mode</i></a>.

   <dt>{ token

   <dd> This is a <i>parse error</i>. <a
    href="#consume-a-primitive0"><i>Consume a primitive</i></a> and ignore
    the return value. Remain in this state.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> Create a style rule and push it onto the <a
    href="#stack-of-open-rules"><i>stack of open rules</i></a>. Switch to the
    <a href="#selector-mode0"><i>selector mode</i></a>. <a
    href="#reconsume-the-current-input-token"><i>Reconsume the current input
    token</i></a>.
  </dl>

  <h4 id=at-rule-prelude-mode><span class=secno>3.6.3. </span> <dfn
   id=at-rule-prelude-mode0>At-rule-prelude mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>semicolon token

   <dd> <a href="#pop-the-current-rule0"><i>Pop the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode.</i></a>

   <dt>{ token

   <dd> If the <a href="#current-rule"><i>current rule</i></a> is <a
    href="#rule-filled"><i>rule-filled</i></a>, switch to the <a
    href="#rule-block-mode0"><i>rule-block mode</i></a>.
    <p> Otherwise, if the <a href="#current-rule"><i>current rule</i></a> is
     <a href="#declaration-filled"><i>declaration-filled</i></a>, switch to
     the <a href="#declaration-block-mode0"><i>declaration-block
     mode</i></a>.

    <p> Otherwise, this is a <i>parse error</i>. <a
     href="#discard-the-current-rule0"><i>Discard the current rule</i></a>.
     <a href="#consume-a-primitive0"><i>Consume a primitive</i></a> and
     ignore the return value. <a
     href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
     current rule's content mode</i></a>.

   <dt>} token

   <dd> If the <a href="#stack-of-open-rules"><i>stack of open rules</i></a>
    has three or more items on it, <a href="#pop-the-current-rule0"><i>pop
    the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.
    <p> Otherwise, this is a <i>parse error</i>. <a
     href="#discard-the-current-rule0"><i>Discard the current rule</i></a>.
     Switch to the <a
     href="#next-block-or-statement-error-mode0"><i>next-block-or-statement
     error mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a> and
    append the returned value to the prelude of the <a
    href="#current-rule"><i>current rule</i></a>. Remain in this mode.
  </dl>

  <h4 id=rule-block-mode><span class=secno>3.6.4. </span> <dfn
   id=rule-block-mode0>Rule-block mode</dfn></h4>

  <p>Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>whitespace token

   <dd> Do nothing, and remain in this state.

   <dt>{ token

   <dd> This is a <i>parse error</i>. <a
    href="#consume-a-primitive0"><i>Consume a primitive</i></a> and ignore
    the return value. Remain in this state.

   <dt>} token

   <dd> <a href="#pop-the-current-rule0"><i>Pop the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>at-keyword token

   <dd> Create an at-rule with its name set to the value of the <a
    href="#current-input-token"><i>current input token</i></a> and push it
    onto the <a href="#stack-of-open-rules"><i>stack of open rules</i></a>.
    Switch to the <a href="#at-rule-prelude-mode0"><i>at-rule-prelude
    mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> Create a style rule and push it onto the <a
    href="#stack-of-open-rules"><i>stack of open rules</i></a>. Switch to the
    <a href="#selector-mode0"><i>selector mode</i></a>. <a
    href="#reconsume-the-current-input-token"><i>Reconsume the current input
    token</i></a>.
  </dl>

  <h4 id=selector-mode><span class=secno>3.6.5. </span> <dfn
   id=selector-mode0>Selector mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>{ token

   <dd> Switch to the <a href="#declaration-block-mode0"><i>declaration-block
    mode</i></a>.

   <dt>} token

   <dd> If the <a href="#stack-of-open-rules"><i>stack of open rules</i></a>
    has three or more items on it, <a href="#pop-the-current-rule0"><i>pop
    the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode.</i></a>
    <p> Otherwise, this is a <i>parse error</i>. <a
     href="#discard-the-current-rule0"><i>Discard the current rule</i></a>.
     Switch to the <a href="#next-block-error-mode0"><i>next-block error
     mode</i></a>.

   <dt>EOF token

   <dd> <a href="#discard-the-current-rule0"><i>Discard the current
    rule</i></a>. <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a> and
    append the returned value to the selector of the <a
    href="#current-rule"><i>current rule</i></a>. Remain in this mode.
  </dl>

  <h4 id=declaration-block-mode><span class=secno>3.6.6. </span> <dfn
   id=declaration-block-mode0>Declaration-block mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>whitespace token

   <dt>semicolon token

   <dd> Do nothing. Remain in this mode.

   <dt>} token

   <dd> <a href="#pop-the-current-rule0"><i>Pop the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>at-rule token

   <dd> Create an at-rule with its name set to the value of the <a
    href="#current-input-token"><i>current input token</i></a> and push it
    onto the <a href="#stack-of-open-rules"><i>stack of open rules</i></a>.
    Switch to the <a href="#at-rule-prelude-mode0"><i>at-rule-prelude
    mode</i></a>.

   <dt>ident token

   <dd> Create a declaration with its name set to the value of the <a
    href="#current-input-token"><i>current input token</i></a>. Set it as the
    <a href="#current-declaration"><i>current declaration</i></a>. Switch to
    the <a href="#after-declaration-name-mode0"><i>after-declaration-name
    mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> This is a <i>parse error</i>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. Switch to the
    <a href="#next-declaration-error-mode0"><i>next-declaration error
    mode</i></a>.
  </dl>

  <h4 id=after-declaration-name-mode><span class=secno>3.6.7. </span> <dfn
   id=after-declaration-name-mode0>After-declaration-name mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>whitespace

   <dd> Do nothing. Remain in this mode.

   <dt>colon token

   <dd> Do nothing. Switch to the <a
    href="#declaration-value-mode0"><i>declaration-value mode</i></a>.

   <dt>semicolon token

   <dd> This is a <i>parse error</i>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>EOF token

   <dd> Unset the <a href="#current-declaration"><i>current
    declaration</i></a>. <a href="#finish-parsing0"><i>Finish
    parsing</i></a>.

   <dt>anything else

   <dd> This is a <i>parse error</i>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. Switch to the
    <a href="#next-declaration-error-mode0"><i>next-declaration error
    mode</i></a>.
  </dl>

  <h4 id=declaration-value-mode><span class=secno>3.6.8. </span> <dfn
   id=declaration-value-mode0>Declaration-value mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>delim token with a value of "!"

   <dd> <i>Switch to the <a
    href="#declaration-important-mode0"><i>declaration-important
    mode</i></a>. </i>

   <dt>semicolon token

   <dd> If the <a href="#current-declaration"><i>current declaration</i></a>
    is grammatically valid, append it to the value of the <a
    href="#current-rule"><i>current rule</i></a>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>} token

   <dd> If the <a href="#current-declaration"><i>current declaration</i></a>
    is grammatically valid, append it to the value of the <a
    href="#current-rule"><i>current rule</i></a>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. <a
    href="#pop-the-current-rule0"><i>Pop the current rule</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> If the <a href="#quirks-mode"><i>quirks mode</i></a> flag is set, and
    the <a href="#current-declaration"><i>current declaration's</i></a> name
    is on the <a href="#hashless-color-quirk-list"><i>hashless color quirk
    list</i></a>, <a
    href="#consume-a-primitive-with-the-hashless-co0"><i>consume a primitive
    with the hashless color quirk</i></a> and append the returned value to
    the value of the <a href="#current-declaration"><i>current
    declaration</i></a>. Remain in this mode.
    <p> Otherwise, if the <a href="#quirks-mode"><i>quirks mode</i></a> flag
     is set, and the <a href="#current-declaration"><i>current
     declaration's</i></a> name is on the <a
     href="#unitless-length-quirk-list"><i>unitless length quirk
     list</i></a>, <a
     href="#consume-a-primitive-with-the-unitless-le0"><i>consume a primitive
     with the unitless length quirk</i></a> and append the returned value to
     the value of the <a href="#current-declaration"><i>current
     declaration</i></a>. Remain in this mode.

    <p> Otherwise, <a href="#consume-a-primitive0"><i>consume a
     primitive</i></a> and append the returned value to the value of the <a
     href="#current-declaration"><i>current declaration</i></a>. Remain in
     this mode.
  </dl>

  <h4 id=declaration-important-mode><span class=secno>3.6.9. </span> <dfn
   id=declaration-important-mode0>Declaration-important mode</dfn></h4>

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>whitespace token

   <dt>comment token

   <dd> Do nothing. Remain in this mode.

   <dt>ident token with a value of "important"

   <dd> If the <a href="#current-declaration"><i>current declaration</i></a>
    is one that can be made important, set the important flag of the <a
    href="#current-declaration"><i>current declaration</i></a> to true, and
    switch to the <a href="#declaration-end-mode0"><i>declaration-end
    mode</i></a>.
    <p> Otherwise, this is a <i>parse error</i>. Unset the <a
     href="#current-declaration"><i>current declaration</i></a>. Switch to
     the <a href="#next-declaration-error-mode0"><i>next-declaration error
     mode</i></a>. <a href="#reconsume-the-current-input-token"><i>Reconsume
     the current input token</i></a>.

   <dt>anything else

   <dd> This is a <i>parse error</i>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. Switch to the
    <a href="#next-declaration-error-mode0"><i>next-declaration error
    mode</i></a>. <a href="#reconsume-the-current-input-token"><i>Reconsume
    the current input token</i></a>.
  </dl>

  <h4 id=declaration-end-mode><span class=secno>3.6.10. </span> <dfn
   id=declaration-end-mode0>Declaration-end mode</dfn></h4>
  <!--
	This is intended only for times 
	when you've just consumed something that must come at the end of a declaration.
	Currently, that's just !important.
	-->

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>whitespace token

   <dd> Do nothing. Remain in this mode.

   <dt>semicolon token

   <dd> If the <a href="#current-declaration"><i>current declaration</i></a>
    is grammatically valid, append it to the value of the <a
    href="#current-rule"><i>current rule</i></a>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>} token

   <dd> If the <a href="#current-declaration"><i>current declaration</i></a>
    is grammatically valid, append it to the value of the <a
    href="#current-rule"><i>current rule</i></a>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. <a
    href="#pop-the-current-rule0"><i>Pop the current rule.</i></a> <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> This is a <i>parse error</i>. Unset the <a
    href="#current-declaration"><i>current declaration</i></a>. Switch to the
    <a href="#next-declaration-error-mode0"><i>next-declaration error
    mode</i></a>.
  </dl>

  <h4 id=next-block-error-mode><span class=secno>3.6.11. </span> <dfn
   id=next-block-error-mode0>Next-block error mode</dfn></h4>
  <!-- Make sure you've already discarded the error'd rule before switching here! -->

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>{ token

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a>.
    Ignore the return value. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a>.
    Ignore the return value. Remain in this mode.
  </dl>

  <h4 id=next-declaration-error-mode><span class=secno>3.6.12. </span> <dfn
   id=next-declaration-error-mode0>Next-declaration error mode</dfn></h4>
  <!-- Make sure you've already unset the current declaration before switching here! -->

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>semicolon token

   <dd> Do nothing. Switch to the <a
    href="#declaration-block-mode0"><i>declaration-block mode</i></a>.

   <dt>} token

   <dd> Do nothing. Switch to the <a
    href="#declaration-block-mode0"><i>declaration-block mode</i></a>. <a
    href="#reconsume-the-current-input-token"><i>Reconsume the current input
    token</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a>.
    Ignore the return value. Remain in this mode.
  </dl>

  <h4 id=next-block-or-statement-error-mode><span class=secno>3.6.13. </span>
   <dfn id=next-block-or-statement-error-mode0>Next-block-or-statement error
   mode</dfn></h4>
  <!-- Make sure you've already discarded the error'd rule before switching here! -->

  <p> Consume the <a href="#next-input-token"><i>next input token</i></a>.

  <dl>
   <dt>semicolon token

   <dd> Do nothing. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>{ token

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a>.
    Ignore the return value. <a
    href="#switch-to-the-current-rules-content-mode0"><i>Switch to the
    current rule's content mode</i></a>.

   <dt>EOF token

   <dd> <a href="#finish-parsing0"><i>Finish parsing</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a>.
    Ignore the return value. Remain in this mode.
  </dl>

  <h4 id=consume-a-primitive><span class=secno>3.6.14. </span> <dfn
   id=consume-a-primitive0>Consume a primitive</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-primitive0"><i>consume a primitive</i></a>.

  <p> If the <a href="#current-input-token"><i>current input token</i></a> is
   a {, [, or ( token, <a href="#consume-a-simple-block0"><i>consume a simple
   block</i></a> and return it.

  <p> Otherwise, if the <a href="#current-input-token"><i>current input
   token</i></a> is a function token, <a
   href="#consume-a-function0"><i>consume a function</i></a> and return it.

  <p> Otherwise, return the <a href="#current-input-token"><i>current input
   token</i></a>.

  <h4 id=consume-a-primitive-with-the-hashless-co><span class=secno>3.6.15.
   </span> <dfn id=consume-a-primitive-with-the-hashless-co0>Consume a
   primitive with the hashless color quirk</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-primitive-with-the-hashless-co0"><i>consume a primitive
   with the hashless color quirk</i></a>.

  <p> The <dfn id=hashless-color-quirk-list>hashless color quirk list</dfn>
   contains the following properties:

  <ul>
   <li>‘<code class=property>background-color</code>’

   <li>‘<code class=property>border-color</code>’

   <li>‘<code class=property>border-top-color</code>’

   <li>‘<code class=property>border-right-color</code>’

   <li>‘<code class=property>border-bottom-color</code>’

   <li>‘<code class=property>border-left-color</code>’

   <li>‘<code class=property>color</code>’
  </ul>

  <p> If the <a href="#current-input-token"><i>current input token</i></a> is
   a number token, let <var>value</var> be the token's representation. If the
   <a href="#current-input-token"><i>current input token</i></a> is a
   dimension token, let <var>value</var> be the token's representation
   followed by the token's unit. If the <a
   href="#current-input-token"><i>current input token</i></a> is an ident
   token, let <var>value</var> be the token's value.

  <p> If <var>value</var> has a length of 3 or 6 and is composed solely of <a
   href="#hex-digit"><i>hex digits</i></a>, create a hash token with its
   value set to the <var>value</var> and return it.

  <p> Otherwise, <a href="#consume-a-primitive0"><i>consume a
   primitive</i></a> and return the returned value.

  <h4 id=consume-a-primitive-with-the-unitless-le><span class=secno>3.6.16.
   </span> <dfn id=consume-a-primitive-with-the-unitless-le0>Consume a
   primitive with the unitless length quirk</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-primitive-with-the-unitless-le0"><i>consume a primitive
   with the unitless length quirk</i></a>.

  <p> The <dfn id=unitless-length-quirk-list>unitless length quirk list</dfn>
   contains the following properties:

  <ul>
   <li>‘<code class=property>border-top-width</code>’

   <li>‘<code class=property>border-right-width</code>’

   <li>‘<code class=property>border-bottom-width</code>’

   <li>‘<code class=property>border-left-width</code>’

   <li>‘<code class=property>border-width</code>’

   <li>‘<code class=property>bottom</code>’

   <li>‘<code class=property>font-size</code>’

   <li>‘<code class=property>height</code>’

   <li>‘<code class=property>left</code>’

   <li>‘<code class=property>letter-spacing</code>’

   <li>‘<code class=property>margin</code>’

   <li>‘<code class=property>margin-right</code>’

   <li>‘<code class=property>margin-left</code>’

   <li>‘<code class=property>margin-top</code>’

   <li>‘<code class=property>margin-bottom</code>’

   <li>‘<code class=property>padding</code>’

   <li>‘<code class=property>padding-top</code>’

   <li>‘<code class=property>padding-right</code>’

   <li>‘<code class=property>padding-bottom</code>’

   <li>‘<code class=property>padding-left</code>’

   <li>‘<code class=property>right</code>’

   <li>‘<code class=property>top</code>’

   <li>‘<code class=property>width</code>’

   <li>‘<code class=property>word-spacing</code>’
  </ul>

  <p> If the <a href="#current-input-token"><i>current input token</i></a> is
   a number token, create a dimension token with its value and representation
   set to the token's value and representation, and its unit set to "px".
   Return the dimension token.

  <p> Otherwise, <a href="#consume-a-primitive0"><i>consume a
   primitive</i></a> and return the returned value.

  <h4 id=consume-a-simple-block><span class=secno>3.6.17. </span> <dfn
   id=consume-a-simple-block0>Consume a simple block</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-simple-block0"><i>consume a simple block</i></a>.

  <p> The <dfn id=ending-token>ending token</dfn> is the mirror variant of
   the <a href="#current-input-token"><i>current input token</i></a>. (E.g.
   if it was called with [, the <a href="#ending-token"><i>ending
   token</i></a> is ].)

  <p> Create a simple block with its associated token set to the <a
   href="#current-input-token"><i>current input token</i></a>. This is the
   <dfn id=current-block>current block</dfn>.

  <p> Repeatedly consume the <a href="#next-input-token"><i>next input
   token</i></a> and process it as follows:

  <dl>
   <dt>EOF token

   <dt><a href="#ending-token"><i>ending token</i></a>

   <dd> Return the block.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a> and
    append the returned value to the value of the <a
    href="#current-block"><i>current block</i></a>.
  </dl>

  <h4 id=consume-a-function><span class=secno>3.6.18. </span> <dfn
   id=consume-a-function0>Consume a function</dfn></h4>

  <p> This section describes how to <a href="#consume-a-function0"><i>consume
   a function</i></a>.

  <p> Create a function with a name equal to the value of the <a
   href="#current-input-token"><i>current input token</i></a>. Create an
   argument, called the <dfn id=current-argument>current argument</dfn>,
   which is initially empty.

  <p> Repeatedly consume the <a href="#next-input-token"><i>next input
   token</i></a> and process it as follows:

  <dl>
   <dt>EOF token

   <dt>) token

   <dd> Append the <a href="#current-argument"><i>current argument</i></a> to
    the function's argument list. Return the function.

   <dt>delim token with the value ","

   <dd> Append the <a href="#current-argument"><i>current argument</i></a> to
    the function's argument list. Create a new <a
    href="#current-argument"><i>current argument</i></a> which is initially
    empty.

   <dt>number token

   <dd> If the <a href="#quirks-mode"><i>quirks mode</i></a> flag is set, and
    the function's name is "rect", <a
    href="#consume-a-primitive-with-the-unitless-le0"><i>consume a primitive
    with the unitless length quirk</i></a> and append the returned value to
    the value of the <a href="#current-argument"><i>current argument</i></a>.

    <p> Otherwise, <a href="#consume-a-primitive0"><i>consume a
     primitive</i></a> and append the returned value to the value of the <a
     href="#current-argument"><i>current argument</i></a>.

   <dt>anything else

   <dd> <a href="#consume-a-primitive0"><i>Consume a primitive</i></a> and
    append the returned value to the value of the <a
    href="#current-argument"><i>current argument</i></a>.
  </dl>

  <h4 id=switch-to-the-current-rules-content-mode><span class=secno>3.6.19.
   </span> <dfn id=switch-to-the-current-rules-content-mode0>Switch to the
   current rule's content mode</dfn></h4>

  <p> This section describes how to <a
   href="#switch-to-the-current-rules-content-mode0"><i>switch to the current
   rule's content mode</i></a>. It is invoked whenever a declaration or rule
   has been successfully completed, or when an error has finished recovery.

  <p> If the <a href="#current-rule"><i>current rule</i></a> is a style rule
   or a <a href="#declaration-filled"><i>declaration-filled</i></a> at-rule,
   switch to the <a href="#declaration-block-mode0"><i>declaration-block
   mode</i></a>.

  <p> If the <a href="#current-rule"><i>current rule</i></a> is a <a
   href="#rule-filled"><i>rule-filled</i></a> at-rule, switch to the <a
   href="#rule-block-mode0"><i>rule-block mode</i></a>.

  <p> If the <a href="#current-rule"><i>current rule</i></a> is a stylesheet,
   switch to the <a href="#top-level-mode0"><i>top-level mode</i></a>.

  <h4 id=pop-the-current-rule><span class=secno>3.6.20. </span> <dfn
   id=pop-the-current-rule0>Pop the current rule</dfn></h4>

  <p> This section describes how to <a href="#pop-the-current-rule0"><i>pop
   the current rule</i></a>. It is invoked whenever a rule is "finished"
   parsing and can be made part of its parent rule.

  <p> First, validate the <a href="#current-rule"><i>current rule</i></a>. If
   the rule does not match its required grammar, or if it's not valid in its
   current context, discard it.

  <p> Otherwise, pop the <a href="#current-rule"><i>current rule</i></a> from
   the <a href="#stack-of-open-rules"><i>stack of open rules</i></a> and
   append it to the value of the new <a href="#current-rule"><i>current
   rule</i></a>.

  <h4 id=discard-the-current-rule><span class=secno>3.6.21. </span> <dfn
   id=discard-the-current-rule0>Discard the current rule</dfn></h4>

  <p> This section describes how to <a
   href="#discard-the-current-rule0"><i>discard the current rule</i></a>. It
   is invoked whenever the parser determines that the rule it's currently
   parsing isn't valid, and thus must not be included in the parsed
   stylesheet.

  <p> Pop the <a href="#current-rule"><i>current rule</i></a> from the <a
   href="#stack-of-open-rules"><i>stack of open rules</i></a>. Don't do
   anything with it.

  <h4 id=finish-parsing><span class=secno>3.6.22. </span> <dfn
   id=finish-parsing0>Finish parsing</dfn></h4>

  <p> This section describes how to <a href="#finish-parsing0"><i>finish
   parsing</i></a>. It is invoked whenever an EOF token is encountered.

  <p> If there is a <a href="#current-declaration"><i>current
   declaration</i></a>, and it is grammatically valid, append it to the value
   of the <a href="#current-rule"><i>current rule</i></a>.

  <p> While there's more than one rule on the <a
   href="#stack-of-open-rules"><i>stack of open rules</i></a>, <a
   href="#pop-the-current-rule0"><i>pop the current rule</i></a>.

  <p> Finally, return the <a href="#current-rule"><i>current rule</i></a> as
   the result of parsing.

  <h3 id=changes-from-css-2.1-core-grammar><span class=secno>3.7. </span>
   Changes from CSS 2.1 Core Grammar</h3>

  <p> <em>This section is non-normative.</em>

  <p class=issue> Here are the changes that I know that I've made to the Core
   Grammar of 2.1. If there are changes not present here, please let me know
   as they may be unintentional.

  <p class=issue> Note that the point of this spec is to match reality;
   changes from CSS2.1&apos;s Core Grammar are nearly always because the Core
   Grammar specified something that doesn't match actual browser behavior, or
   left something unspecified. If some detail doesn't match browsers, please
   let me know as it's almost certainly unintentional.

  <ol>
   <li> No whitespace or comments are allowed between the DELIM(!) and
    IDENT(important) tokens when processing an !important directive at the
    end of a style rule.
    <p class=issue> Exactly how to treat ‘<code
     class=css>!important</code>’ is still under discussion in the WG.

   <li> The handling of some miscellanous "special" tokens (like an unmatched
    } token) showing up in various places in the grammar has been specified
    with some reasonable behavior shown by at least one browser. Previously,
    stylesheets with those tokens in those places just didn't match the
    stylesheet grammar at all, so their handling was totally undefined.

   <li> Quirks mode parsing differences are now officially recognized in the
    parser.
  </ol>
  <!--
    
TTTTTTTTTTTTTTTTTTTTTTTHHHHHHHHH     HHHHHHHHHEEEEEEEEEEEEEEEEEEEEEE
T:::::::::::::::::::::TH:::::::H     H:::::::HE::::::::::::::::::::E
T:::::::::::::::::::::TH:::::::H     H:::::::HE::::::::::::::::::::E
T:::::TT:::::::TT:::::THH::::::H     H::::::HHEE::::::EEEEEEEEE::::E
TTTTTT  T:::::T  TTTTTT  H:::::H     H:::::H    E:::::E       EEEEEE
        T:::::T          H:::::H     H:::::H    E:::::E             
        T:::::T          H::::::HHHHH::::::H    E::::::EEEEEEEEEE   
        T:::::T          H:::::::::::::::::H    E:::::::::::::::E   
        T:::::T          H:::::::::::::::::H    E:::::::::::::::E   
        T:::::T          H::::::HHHHH::::::H    E::::::EEEEEEEEEE   
        T:::::T          H:::::H     H:::::H    E:::::E             
        T:::::T          H:::::H     H:::::H    E:::::E       EEEEEE
      TT:::::::TT      HH::::::H     H::::::HHEE::::::EEEEEEEE:::::E
      T:::::::::T      H:::::::H     H:::::::HE::::::::::::::::::::E
      T:::::::::T      H:::::::H     H:::::::HE::::::::::::::::::::E
      TTTTTTTTTTT      HHHHHHHHH     HHHHHHHHHEEEEEEEEEEEEEEEEEEEEEE
                                                                    
                                                                    
                                                                   
EEEEEEEEEEEEEEEEEEEEEENNNNNNNN        NNNNNNNNDDDDDDDDDDDDD        
E::::::::::::::::::::EN:::::::N       N::::::ND::::::::::::DDD     
E::::::::::::::::::::EN::::::::N      N::::::ND:::::::::::::::DD   
EE::::::EEEEEEEEE::::EN:::::::::N     N::::::NDDD:::::DDDDD:::::D  
  E:::::E       EEEEEEN::::::::::N    N::::::N  D:::::D    D:::::D 
  E:::::E             N:::::::::::N   N::::::N  D:::::D     D:::::D
  E::::::EEEEEEEEEE   N:::::::N::::N  N::::::N  D:::::D     D:::::D
  E:::::::::::::::E   N::::::N N::::N N::::::N  D:::::D     D:::::D
  E:::::::::::::::E   N::::::N  N::::N:::::::N  D:::::D     D:::::D
  E::::::EEEEEEEEEE   N::::::N   N:::::::::::N  D:::::D     D:::::D
  E:::::E             N::::::N    N::::::::::N  D:::::D     D:::::D
  E:::::E       EEEEEEN::::::N     N:::::::::N  D:::::D    D:::::D 
EE::::::EEEEEEEE:::::EN::::::N      N::::::::NDDD:::::DDDDD:::::D  
E::::::::::::::::::::EN::::::N       N:::::::ND:::::::::::::::DD   
E::::::::::::::::::::EN::::::N        N::::::ND::::::::::::DDD     
EEEEEEEEEEEEEEEEEEEEEENNNNNNNN         NNNNNNNDDDDDDDDDDDDD        
-->

  <h2 id=conformance><span class=secno>4. </span> Conformance</h2>

  <h3 id=conventions><span class=secno>4.1. </span> Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 id=conformance-classes><span class=secno>4.2. </span> Conformance
   classes</h3>

  <p>Conformance to CSS Syntax Module Level 3 is defined for three
   conformance classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to CSS Syntax Module Level 3 if it is
   syntactically valid according to this module.

  <p>A renderer is conformant to CSS Syntax Module Level 3 if it parses a
   stylesheet according to this module.

  <p>An authoring tool is conformant to CSS Syntax Module Level 3 if it
   writes style sheets that are syntactically valid according to this module.

  <h2 class=no-num id=acknowledgments> Acknowledgments</h2>

  <p> Thanks for feedback and contributions from David Baron, 呂康豪
   (Kang-Hao Lu), and Simon Sapin.

  <h2 class=no-num id=references> References</h2>

  <h3 class=no-num id=normative-references> Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references> Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index> Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>After-declaration-name mode, <a href="#after-declaration-name-mode0"
    title="After-declaration-name mode"><strong>3.6.7.</strong></a>

   <li>At-keyword-rest state, <a href="#at-keyword-rest-state0"
    title="At-keyword-rest state"><strong>3.4.11.</strong></a>

   <li>At-keyword state, <a href="#at-keyword-state0"
    title="At-keyword state"><strong>3.4.10.</strong></a>

   <li>at-rule, <a href="#at-rules" title=at-rule><strong>2.</strong></a>

   <li>At-rule-prelude mode, <a href="#at-rule-prelude-mode0"
    title="At-rule-prelude mode"><strong>3.6.3.</strong></a>

   <li>authoring tool, <a href="#authoring-tool"
    title="authoring tool"><strong>4.2.</strong></a>

   <li>Bad-URL state, <a href="#bad-url-state0"
    title="Bad-URL state"><strong>3.4.25.</strong></a>

   <li>Comment state, <a href="#comment-state0"
    title="Comment state"><strong>3.4.9.</strong></a>

   <li>Consume a function, <a href="#consume-a-function0"
    title="Consume a function"><strong>3.6.18.</strong></a>

   <li>Consume an escaped character, <a href="#consume-an-escaped-character0"
    title="Consume an escaped character"><strong>3.4.27.</strong></a>

   <li>Consume a primitive, <a href="#consume-a-primitive0"
    title="Consume a primitive"><strong>3.6.14.</strong></a>

   <li>Consume a primitive with the hashless color quirk, <a
    href="#consume-a-primitive-with-the-hashless-co0"
    title="Consume a primitive with the hashless color quirk"><strong>3.6.15.</strong></a>

   <li>Consume a primitive with the unitless length quirk, <a
    href="#consume-a-primitive-with-the-unitless-le0"
    title="Consume a primitive with the unitless length quirk"><strong>3.6.16.</strong></a>

   <li>Consume a simple block, <a href="#consume-a-simple-block0"
    title="Consume a simple block"><strong>3.6.17.</strong></a>

   <li>current argument, <a href="#current-argument"
    title="current argument"><strong>3.6.18.</strong></a>

   <li>current block, <a href="#current-block"
    title="current block"><strong>3.6.17.</strong></a>

   <li>current declaration, <a href="#current-declaration"
    title="current declaration"><strong>3.6.1.</strong></a>

   <li>current input character, <a href="#current-input-character"
    title="current input character"><strong>3.2.1.</strong></a>

   <li>current input token, <a href="#current-input-token"
    title="current input token"><strong>3.6.1.</strong></a>

   <li>current rule, <a href="#current-rule"
    title="current rule"><strong>3.6.1.</strong></a>

   <li>Data state, <a href="#data-state0"
    title="Data state"><strong>3.4.4.</strong></a>

   <li>Declaration-block mode, <a href="#declaration-block-mode0"
    title="Declaration-block mode"><strong>3.6.6.</strong></a>

   <li>Declaration-end mode, <a href="#declaration-end-mode0"
    title="Declaration-end mode"><strong>3.6.10.</strong></a>

   <li>declaration-filled, <a href="#declaration-filled"
    title=declaration-filled><strong>3.6.1.</strong></a>

   <li>Declaration-important mode, <a href="#declaration-important-mode0"
    title="Declaration-important mode"><strong>3.6.9.</strong></a>

   <li>Declaration-value mode, <a href="#declaration-value-mode0"
    title="Declaration-value mode"><strong>3.6.8.</strong></a>

   <li>digit, <a href="#digit" title=digit><strong>3.4.3.</strong></a>

   <li>Dimension state, <a href="#dimension-state0"
    title="Dimension state"><strong>3.4.18.</strong></a>

   <li>Discard the current rule, <a href="#discard-the-current-rule0"
    title="Discard the current rule"><strong>3.6.21.</strong></a>

   <li>Double-quote-string state, <a href="#double-quote-string-state0"
    title="Double-quote-string state"><strong>3.4.5.</strong></a>

   <li>ending token, <a href="#ending-token"
    title="ending token"><strong>3.6.17.</strong></a>

   <li>end of the range, <a href="#end-of-the-range"
    title="end of the range"><strong>3.4.28.</strong></a>

   <li>Finish parsing, <a href="#finish-parsing0"
    title="Finish parsing"><strong>3.6.22.</strong></a>

   <li>hashless color quirk list, <a href="#hashless-color-quirk-list"
    title="hashless color quirk list"><strong>3.6.15.</strong></a>

   <li>Hash-rest state, <a href="#hash-rest-state0"
    title="Hash-rest state"><strong>3.4.8.</strong></a>

   <li>Hash state, <a href="#hash-state0"
    title="Hash state"><strong>3.4.7.</strong></a>

   <li>hex digit, <a href="#hex-digit"
    title="hex digit"><strong>3.4.3.</strong></a>

   <li>Ident-rest state, <a href="#ident-rest-state0"
    title="Ident-rest state"><strong>3.4.13.</strong></a>

   <li>Ident state, <a href="#ident-state0"
    title="Ident state"><strong>3.4.12.</strong></a>

   <li>letter, <a href="#letter" title=letter><strong>3.4.3.</strong></a>

   <li>lowercase letter, <a href="#lowercase-letter"
    title="lowercase letter"><strong>3.4.3.</strong></a>

   <li>maximum allowed codepoint, <a href="#maximum-allowed-codepoint"
    title="maximum allowed codepoint"><strong>3.4.3.</strong></a>

   <li>name character, <a href="#name-character"
    title="name character"><strong>3.4.3.</strong></a>

   <li>name-start character, <a href="#name-start-character"
    title="name-start character"><strong>3.4.3.</strong></a>

   <li>newline, <a href="#newline" title=newline><strong>3.4.3.</strong></a>

   <li>Next-block error mode, <a href="#next-block-error-mode0"
    title="Next-block error mode"><strong>3.6.11.</strong></a>

   <li>Next-block-or-statement error mode, <a
    href="#next-block-or-statement-error-mode0"
    title="Next-block-or-statement error mode"><strong>3.6.13.</strong></a>

   <li>Next-declaration error mode, <a href="#next-declaration-error-mode0"
    title="Next-declaration error mode"><strong>3.6.12.</strong></a>

   <li>next input character, <a href="#next-input-character"
    title="next input character"><strong>3.2.1.</strong></a>

   <li>next input token, <a href="#next-input-token"
    title="next input token"><strong>3.6.1.</strong></a>

   <li>non-ASCII character, <a href="#non-ascii-character"
    title="non-ASCII character"><strong>3.4.3.</strong></a>

   <li>non-printable character, <a href="#non-printable-character"
    title="non-printable character"><strong>3.4.3.</strong></a>

   <li>Number-fraction state, <a href="#number-fraction-state0"
    title="Number-fraction state"><strong>3.4.17.</strong></a>

   <li>Number-rest state, <a href="#number-rest-state0"
    title="Number-rest state"><strong>3.4.16.</strong></a>

   <li>Number state, <a href="#number-state0"
    title="Number state"><strong>3.4.15.</strong></a>

   <li>Pop the current rule, <a href="#pop-the-current-rule0"
    title="Pop the current rule"><strong>3.6.20.</strong></a>

   <li>quirks mode, <a href="#quirks-mode"
    title="quirks mode"><strong>3.4.2.</strong></a>

   <li>reconsume the current input token, <a
    href="#reconsume-the-current-input-token"
    title="reconsume the current input token"><strong>3.6.1.</strong></a>

   <li>renderer, <a href="#renderer" title=renderer><strong>4.2.</strong></a>

   <li>rule, <a href="#rule" title=rule><strong>2.</strong></a>

   <li>Rule-block mode, <a href="#rule-block-mode0"
    title="Rule-block mode"><strong>3.6.4.</strong></a>

   <li>rule-filled, <a href="#rule-filled"
    title=rule-filled><strong>3.6.1.</strong></a>

   <li>Sci-notation state, <a href="#sci-notation-state0"
    title="Sci-notation state"><strong>3.4.19.</strong></a>

   <li>Selector mode, <a href="#selector-mode0"
    title="Selector mode"><strong>3.6.5.</strong></a>

   <li>Set the unicode-range token's range, <a
    href="#set-the-unicode-range-tokens-range0"
    title="Set the unicode-range token's range"><strong>3.4.28.</strong></a>

   <li>Single-quote-string state, <a href="#single-quote-string-state0"
    title="Single-quote-string state"><strong>3.4.6.</strong></a>

   <li>stack of open rules, <a href="#stack-of-open-rules"
    title="stack of open rules"><strong>3.6.1.</strong></a>

   <li>start of the range, <a href="#start-of-the-range"
    title="start of the range"><strong>3.4.28.</strong></a>

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="style sheet, as conformance class"><strong>4.2.</strong></a>
    </ul>

   <li>Switch to the current rule's content mode, <a
    href="#switch-to-the-current-rules-content-mode0"
    title="Switch to the current rule's content mode"><strong>3.6.19.</strong></a>

   <li>Top-level mode, <a href="#top-level-mode0"
    title="Top-level mode"><strong>3.6.2.</strong></a>

   <li>transform function whitespace, <a
    href="#transform-function-whitespace"
    title="transform function whitespace"><strong>3.4.2.</strong></a>

   <li>Transform-function-whitespace state, <a
    href="#transform-function-whitespace-state0"
    title="Transform-function-whitespace state"><strong>3.4.14.</strong></a>

   <li>Unicode-range state, <a href="#unicode-range-state0"
    title="Unicode-range state"><strong>3.4.26.</strong></a>

   <li>unitless length quirk list, <a href="#unitless-length-quirk-list"
    title="unitless length quirk list"><strong>3.6.16.</strong></a>

   <li>uppercase letter, <a href="#uppercase-letter"
    title="uppercase letter"><strong>3.4.3.</strong></a>

   <li>URL-double-quote state, <a href="#url-double-quote-state0"
    title="URL-double-quote state"><strong>3.4.21.</strong></a>

   <li>URL-end state, <a href="#url-end-state0"
    title="URL-end state"><strong>3.4.23.</strong></a>

   <li>URL-single-quote state, <a href="#url-single-quote-state0"
    title="URL-single-quote state"><strong>3.4.22.</strong></a>

   <li>URL state, <a href="#url-state0"
    title="URL state"><strong>3.4.20.</strong></a>

   <li>URL-unquoted state, <a href="#url-unquoted-state0"
    title="URL-unquoted state"><strong>3.4.24.</strong></a>

   <li>whitespace, <a href="#whitespace"
    title=whitespace><strong>3.4.3.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index> Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
  </table>
  <!--end-properties-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
