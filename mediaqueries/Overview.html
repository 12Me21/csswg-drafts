<!DOCTYPE html>

<html lang=en>
 <head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>Media Queries Level 4</title>
  <!--
  <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
  -->

  <meta content="Media Queries Level 4" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2012-12-12 name=dcterms.issued>
  <meta content="http://dev.w3.org/csswg/mediaqueries4/"
   name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://www.w3.org/TR/2012/ED-mediaqueries4-20121212/"
   name=dcterms.identifier>
  <link href="#contents" rel=contents>
  <link href="#index" rel=index>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
   type="text/css">
  <style type="text/css">
    blockquote { 
      background: #eef;
      padding: 0.5em;
      margin: 1em 0;
      border: thin solid black; }   
    pre { font-family: courier, monospace; font-weight: bold; white-space: pre-wrap }
    .example pre em { font-style: normal }
    span.label { font-style: italic }
  </style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1 id=media-queries>Media Queries Level 4</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 12 December
    2012</h2>

   <dl>
    <dt>This version:
     <!-- <dd><a href="http://www.w3.org/TR/2012/ED-mediaqueries4-20121212/">http://www.w3.org/TR/2012/ED-mediaqueries4-20121212/</a> -->

    <dd><a
     href="http://dev.w3.org/csswg/mediaqueries4/">http://dev.w3.org/csswg/mediaqueries4/</a>

    <dt>Latest version:

    <dd>N/A

    <dt>Editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/mediaqueries4/">http://dev.w3.org/csswg/mediaqueries4/</a>

    <dt>Previous Version:

    <dd>N/A

    <dt>Issue Tracking:

    <dd><a
     href="http://www.w3.org/Style/CSS/Tracker/products/7">http://www.w3.org/Style/CSS/Tracker/products/7</a>

    <dt>Feedback:

    <dd><a
     href="http://lists.w3.org/Archives/Public/www-style/">www-style@w3.org</a>
     with subject line “<kbd>[mediaqueries4] <var>… message topic
     …</var></kbd>”

    <dt>Editors:

    <dd class=vcard><span class=given-name>Florian</span> <span
     class=family-name>Rivoal</span> &lt;<span
     class=email>florian @rivoal.net</span>&gt;

    <dt>Previous Editors:

    <dd class=vcard><a class="url fn n"
     href="http://people.opera.com/howcome/" lang=no> <span
     class=given-name>Håkon</span> <span class=additional-name>Wium</span>
     <span class=family-name>Lie</span></a> &lt;<span
     class=email>howcome @opera.com</span>&gt;

    <dd class=vcard><a class="url fn" href="http://tantek.com/"
     lang=tr>Tantek Çelik</a> &lt;<span
     class=email>tantek @cs.stanford.edu</span>&gt;

    <dd class=vcard><span class=given-name>Daniel</span> <span
     class=family-name>Glazman</span> &lt;<span
     class=email>daniel.glazman @disruptive-innovations.com</span>&gt;

    <dd class=vcard><a class="url fn n" href="http://annevankesteren.nl/"
     hreflang=en lang=nl>Anne van Kesteren</a> &lt;<span
     class=email>annevk@opera.com</span>&gt;
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2012 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p><em>Media Queries</em> allow authors to adapt the style applied to a
   document based on the environment the document is being rendered in. <a
   href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a> and <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> introduced this
   mechanism, by allowing detection of the <em>media type</em>. For example,
   a document may use sans-serif fonts when displayed on a screen and serif
   fonts when printed. ‘<code class=css>screen</code>’ and ‘<code
   class=css>print</code>’ are two media types that have been defined.
   Media Queries Level 3 <a href="#MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a> refined this mechanism by
   allowing detection of individual characteristics, or <em>media
   features</em>. For example, a document may use a different style when
   displayed in ‘<code class=css>portrait</code>’ and in ‘<code
   class=css>landscape</code>’ mode, as detected by the ‘<code
   class=css>orientation</code>’ media feature.

  <p>Media Queries Level 4 describes the mechanism, media types and media
   features that already existed in <a href="#MEDIAQ"
   rel=biblioentry>[MEDIAQ]<!--{{MEDIAQ}}--></a>, and further introduces new
   media features.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bmediaqueries4%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “mediaqueries4” in the subject, preferably like this:
   “[<!---->mediaqueries4<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span> Introduction</a>
    <ul class=toc>
     <li><a href="#placement"><span class=secno>1.1. </span> Module
      interactions</a>

     <li><a href="#values"><span class=secno>1.2. </span> Values</a>

     <li><a href="#units"><span class=secno>1.3. </span> Units</a>
    </ul>

   <li><a href="#media0"><span class=secno>2. </span>Media Queries</a>

   <li><a href="#syntax"><span class=secno>3. </span>Syntax</a>
    <ul class=toc>
     <li><a href="#error-handling"><span class=secno>3.1. </span>Error
      Handling</a>
    </ul>

   <li><a href="#media1"><span class=secno>4. </span>Media features</a>
    <ul class=toc>
     <li><a href="#width"><span class=secno>4.1. </span>width</a>

     <li><a href="#height"><span class=secno>4.2. </span>height</a>

     <li><a href="#device-width"><span class=secno>4.3.
      </span>device-width</a>

     <li><a href="#device-height"><span class=secno>4.4.
      </span>device-height</a>

     <li><a href="#orientation"><span class=secno>4.5. </span>orientation</a>

     <li><a href="#aspect-ratio"><span class=secno>4.6.
      </span>aspect-ratio</a>

     <li><a href="#device-aspect-ratio"><span class=secno>4.7.
      </span>device-aspect-ratio</a>

     <li><a href="#color"><span class=secno>4.8. </span>color</a>

     <li><a href="#color-index"><span class=secno>4.9. </span>color-index</a>

     <li><a href="#monochrome"><span class=secno>4.10. </span>monochrome</a>

     <li><a href="#resolution"><span class=secno>4.11. </span>resolution</a>

     <li><a href="#scan"><span class=secno>4.12. </span>scan</a>

     <li><a href="#grid"><span class=secno>4.13. </span>grid</a>

     <li><a href="#script"><span class=secno>4.14. </span>script</a>

     <li><a href="#pointer"><span class=secno>4.15. </span>pointer</a>

     <li><a href="#hover"><span class=secno>4.16. </span>hover</a>

     <li><a href="#luminosity"><span class=secno>4.17. </span>luminosity</a>
    </ul>

   <li><a href="#changes"><span class=secno>5. </span>Changes</a>
    <ul class=toc>
     <li><a href="#changes-2012"><span class=secno>5.1. </span>Changes Since
      the Media Queries Level 3</a>
    </ul>

   <li><a href="#conformance"><span class=secno>6. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conventions"><span class=secno>6.1. </span> Document
      conventions</a>

     <li><a href="#conformance-classes"><span class=secno>6.2. </span>
      Conformance classes</a>

     <li><a href="#partial"><span class=secno>6.3. </span> Partial
      implementations</a>

     <li><a href="#experimental"><span class=secno>6.4. </span> Experimental
      implementations</a>

     <li><a href="#testing"><span class=secno>6.5. </span> Non-experimental
      implementations</a>
    </ul>

   <li class=no-num><a href="#acknowledgments"> Acknowledgments</a>

   <li class=no-num><a href="#references"> References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references"> Normative
      references</a>

     <li class=no-num><a href="#other-references"> Other references</a>
    </ul>

   <li class=no-num><a href="#index"> Index</a>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p><em>This section is not normative.</em>

  <p>HTML4 <a href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a>
   and CSS2 <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
   currently support media-dependent style sheets tailored for different
   media types. For example, a document may use different style sheets for
   screen and print. In HTML4, this can be written as:

  <div class=example>
   <pre><code>&lt;link rel="stylesheet" type="text/css" media="screen" href="sans-serif.css"&gt;
&lt;link rel="stylesheet" type="text/css" media="print" href="serif.css"&gt;<code></code></code></pre>
  </div>

  <p>Inside a CSS style sheet, one can declare that sections apply to certain
   media types:

  <div class=example>
   <pre><code>@media screen {
  * { font-family: sans-serif }
}</code></pre>
  </div>

  <p>The ‘<code class=css>print</code>’ and ‘<code
   class=css>screen</code>’ media types are defined in HTML4. The complete
   list of media types in HTML4 is: ‘<code class=css>aural</code>’,
   ‘<code class=css>braille</code>’, ‘<code
   class=css>handheld</code>’, ‘<code class=css>print</code>’, ‘<code
   class=css>projection</code>’, ‘<code class=css>screen</code>’,
   ‘<code class=css>tty</code>’, ‘<code class=css>tv</code>’. CSS2
   defines the same list, deprecates ‘<code class=css>aural</code>’ and
   adds ‘<code class=css>embossed</code>’ and ‘<code
   class=css>speech</code>’. Also, ‘<code class=css>all</code>’ is used
   to indicate that the style sheet applies to all media types.

  <p>Media-specific style sheets are supported by several user agents. The
   most commonly used feature is to distinguish between ‘<code
   class=css>screen</code>’ and ‘<code class=css>print</code>’.

  <p>There have been requests for ways to describe in more detail what type
   of output devices a style sheet applies to. Fortunately HTML4 foresaw
   these requests and defined a forward-compatible syntax for media types.
   Here is a quote from <a
   href="http://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">HTML4,
   section 6.13</a>:

  <blockquote
   cite="http://www.w3.org/TR/1999/REC-html401-19991224/types.html#h-6.13">
   <p>Future versions of HTML may introduce new values and may allow
    parameterized values. To facilitate the introduction of these extensions,
    conforming user agents must be able to parse the <a
    href="http://www.w3.org/TR/1999/REC-html401-19991224/present/styles.html#adef-media"><samp>media</samp></a>
    attribute value as follows:

   <ol>
    <li>The value is a comma-separated list of entries. For example,
     <pre><code>media="screen, 3d-glasses, print and resolution &gt; 90dpi"</code></pre>

     <p>is mapped to:

     <pre><code>"screen"
"3d-glasses"
"print and resolution > 90dpi"</code></pre>

    <li>Each entry is truncated just before the first character that isn't a
     US ASCII letter [a-zA-Z] (Unicode decimal 65-90, 97-122), digit [0-9]
     (Unicode hex 30-39), or hyphen (45). In the example, this gives:
     <pre><code>"screen"
"3d-glasses"
"print"</code></pre>
   </ol>
  </blockquote>

  <p>Media queries, as described in this specification, build on the
   mechanism outlined in HTML4. The syntax of media queries fit into the
   media type syntax reserved in HTML4. The <code class=html>media</code>
   attribute of HTML4 also exists in XHTML and generic XML. The same syntax
   can also be used inside in the ‘<code class=css>@media</code>’ and
   ‘<code class=css>@import</code>’ rules of CSS.

  <p>However, the parsing rules for media queries are incompatible with those
   of HTML4 so that they are consistent with those of media queries used in
   CSS.

  <p class=note>HTML5 <a href="#HTML5"
   rel=biblioentry>[HTML5]<!--{{HTML5}}--></a> (at the moment of writing
   still work in progress) references the Media Queries specification
   directly and thus updates the rules for HTML.

  <h3 id=placement><span class=secno>1.1. </span> Module interactions</h3>

  <p>This module replaces and extends the Media Queries, Media Type and Media
   Features defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> sections 7 and in <a
   href="#MEDIAQ" rel=biblioentry>[MEDIAQ]<!--{{!MEDIAQ}}--></a>.

  <h3 id=values><span class=secno>1.2. </span> Values</h3>

  <p><em>This section is normative</em>

  <p>Value types not defined in this specification, such as &lt;integer&gt;,
   &lt;number&gt; or &lt;resolution&gt;, are defined in <a href="#CSS3VAL"
   rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a>. Other CSS modules may
   expand the definitions of these value types.

  <p>This specification also introduces one new value type.

  <p>The &lt;ratio&gt; value type is a positive (not zero or negative)
   &lt;integer&gt; followed by optional whitespace, followed by a solidus
   (‘<code class=css>/</code>’), followed by optional whitespace,
   followed by a positive &lt;integer&gt;.

  <h3 id=units><span class=secno>1.3. </span> Units</h3>

  <p><em>This section is normative</em>

  <p>The units used in media queries are the same as in other parts of CSS,
   as defined in <a href="#CSS3VAL"
   rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a>. For example, the pixel
   unit represents CSS pixels and not physical pixels.

  <p>Relative units in media queries are based on the initial value, which
   means that units are never based on results of declarations. For example,
   in HTML, the ‘<code class=css>em</code>’ unit is relative to the
   initial value of ‘<code class=property>font-size</code>’.

  <h2 id=media0><span class=secno>2. </span>Media Queries</h2>

  <p>A media query consists of an optional media type and zero or more <span
   class=index id=expressions>expressions</span> that check for the
   conditions of particular <span class=index id=media-features>media
   features</span>.

  <p>Statements regarding media queries in this section assume the <a
   href="#syntax">syntax section</a> is followed. Media queries that do not
   conform to the syntax are discussed in the <a href="#error-handling">error
   handling section</a>. I.e. the syntax takes precedence over requirements
   in this section.

  <div class=example>
   <p>Here is a simple example written in HTML:

   <pre><code>&lt;link rel="stylesheet" media="screen and (color)" href="example.css" /></code></pre>

   <p>This example expresses that a certain style sheet
    (<code>example.css</code>) applies to devices of a certain media type
    (‘<code class=css>screen</code>’) with certain feature (it must be a
    color screen).
  </div>

  <div class=example>
   <p>Here the same media query written in an @import-rule in CSS:

   <pre><code>@import url(color.css) screen and (color);</code></pre>
  </div>

  <p>A media query is a logical expression that is either true or false. A
   media query is true if the media type of the media query matches the media
   type of the device where the user agent is running (as defined in the
   "Applies to" line), and all expressions in the media query are true.

  <p>A shorthand syntax is offered for media queries that apply to all media
   types; the keyword ‘<code class=css>all</code>’ can be left out (along
   with the trailing ‘<code class=css>and</code>’). I.e. if the media
   type is not explicitly given it is ‘<code class=css>all</code>’.

  <div class=example>
   <p>I.e. these are identical:

   <pre><code>@media all and (min-width:500px) { … }
@media (min-width:500px) { … }</code></pre>

   <p>As are these:

   <pre><code>@media (orientation: portrait) { … }
@media all and (orientation: portrait) { … }</code></pre>
  </div>

  <p>Several media queries can be combined in a media query list. A
   comma-separated list of media queries. If one or more of the media queries
   in the comma-separated list are true, the whole list is true, and
   otherwise false. In the media queries syntax, the comma expresses a
   logical OR, while the ‘<code class=css>and</code>’ keyword expresses a
   logical AND.

  <div class=example>
   <p>Here is an example of several media queries in a comma-separated list
    using the an @media-rule in CSS:

   <pre><code>@media <em>screen and (color), projection and (color)</em> { … }</code></pre>
  </div>

  <p>If the media query list is empty (i.e. the declaration is the empty
   string or consists solely of whitespace) it evaluates to true.

  <div class=example>
   <p>I.e. these are equivalent:

   <pre><code>@media all { … }
@media { … }</code></pre>
  </div>

  <p>The logical NOT can be expressed through the ‘<code
   class=css>not</code>’ keyword. The presence of the keyword ‘<code
   class=css>not</code>’ at the beginning of the media query negates the
   result. I.e., if the media query had been true without the ‘<code
   class=css>not</code>’ keyword it will become false, and vice versa. User
   agents that only support media types (as described in HTML4) will not
   recognize the ‘<code class=css>not</code>’ keyword and the associated
   style sheet is therefore not applied.

  <div class=example>
   <pre><code>&lt;link rel="stylesheet" media="<em>not screen and (color)</em>" href="example.css" /&gt;</code></pre>
  </div>

  <p>The keyword ‘<code class=css>only</code>’ can also be used to hide
   style sheets from older user agents. User agents must process media
   queries starting with ‘<code class=css>only</code>’ as if the ‘<code
   class=css>only</code>’ keyword was not present.

  <div class=example>
   <pre><code>&lt;link rel="stylesheet" media="<em>only screen and (color)</em>" href="example.css" /&gt;</code></pre>
  </div>

  <p>The media queries syntax can be used with HTML, XHTML, XML <a
   href="#XMLSTYLE" rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a> and the
   @import and @media rules of CSS.

  <div class=example>
   <p>Here is the same example written in HTML, XHTML, XML, @import and
    @media:

   <pre><code>&lt;link rel="stylesheet" media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css"></code></pre>

   <pre><code>&lt;link rel="stylesheet" media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" /></code></pre>

   <pre><code>&lt;?xml-stylesheet media="<em>screen and (color), projection and (color)</em>" rel="stylesheet" href="example.css" ?></code></pre>

   <pre><code>@import url(example.css) <em>screen and (color), projection and (color)</em>;</code></pre>

   <pre><code>@media <em>screen and (color), projection and (color)</em> { … }</code></pre>

   <p class=note>The <a href="#XMLSTYLE"
    rel=biblioentry>[XMLSTYLE]<!--{{XMLSTYLE}}--></a> specification has not
    yet been updated to use media queries in the <code>media</code>
    pseudo-attribute.
  </div>

  <p>If a media feature does not apply to the device where the UA is running,
   expressions involving the media feature will be false.

  <div class=example>
   <p>The media feature ‘<code class=css>device-aspect-ratio</code>’ only
    applies to visual devices. On an aural device, expressions involving
    ‘<code class=css>device-aspect-ratio</code>’ will therefore always be
    false:

   <pre><code>&lt;link rel="stylesheet" media="aural and (device-aspect-ratio: 16/9)" href="example.css" /&gt;</code></pre>
  </div>

  <p>Expressions will always be false if the unit of measurement does not
   apply to the device.

  <div class=example>
   <p>The ‘<code class=css>px</code>’ unit does not apply to ‘<code
    class=css>speech</code>’ devices so the following media query is always
    false:

   <pre><code>&lt;link rel="stylesheet" media="speech and (min-device-width: 800px)" href="example.css" /&gt;</code></pre>

   <p>Note that the media queries in this example would have been true if the
    keyword ‘<code class=css>not</code>’ had been added to the beginning
    of the media query.
  </div>

  <p>To avoid circular dependencies, it is never necessary to apply the style
   sheet in order to evaluate expressions. For example, the aspect ratio of a
   printed document may be influenced by a style sheet, but expressions
   involving ‘<code class=css>device-aspect-ratio</code>’ will be based
   on the default aspect ratio of the user agent.

  <p class=note>User agents are expected, but not required, to re-evaluate
   and re-layout the page in response to changes in the user environment, for
   example if the device is tilted from landscape to portrait mode.

  <h2 id=syntax><span class=secno>3. </span>Syntax</h2>

  <p>The media query syntax is described in terms of the <a
   href="http://www.w3.org/TR/CSS21/grammar.html">CSS2 grammar</a>. As such,
   rules not defined here are defined in CSS2. The
   <code>media_query_list</code> production defined below replaces the
   <code>media_list</code> production from CSS2. <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

  <pre>media_query_list
 : S* [media_query [ ',' S* media_query ]* ]?
 ;
media_query
 : [ONLY | NOT]? S* media_type S* [ AND S* expression ]*
 | expression [ AND S* expression ]*
 ;
media_type
 : IDENT
 ;
expression
 : '(' S* media_feature S* [ ':' S* expr ]? ')' S*
 ;
media_feature
 : IDENT
 ;</pre>

  <p>COMMENT tokens, as defined by CSS2, do not occur in the grammar (to keep
   it readable), but any number of these tokens may appear anywhere between
   other tokens. <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

  <p>The following new definitions are introduced:

  <pre>L  l|\\0{0,4}(4c|6c)(\r\n|[ \t\r\n\f])?|\\l
Y  y|\\0{0,4}(59|79)(\r\n|[ \t\r\n\f])?|\\y</pre>

  <p>The following new tokens are introduced:

  <pre>{O}{N}{L}{Y}      {return ONLY;}
{N}{O}{T}         {return NOT;}
{A}{N}{D}         {return AND;}
{num}{D}{P}{I}    {return RESOLUTION;}
{num}{D}{P}{C}{M} {return RESOLUTION;}</pre>

  <p><code>RESOLUTION</code> is to be added to the CSS2 <code>term</code>
   production.

  <p>CSS style sheets are generally case-insensitive, and this is also the
   case for media queries.

  <p>In addition to conforming to the syntax, each media query needs to use
   media types and media features according to their respective specification
   in order to be considered conforming.

  <div class=example>
   <p>Only the first media query is conforming in the example below because
    the "example" media type does not exist.

   <pre><code>@media all { body { background:lime } }
@media example { body { background:red } }</code></pre>
  </div>

  <h3 id=error-handling><span class=secno>3.1. </span>Error Handling</h3>

  <p>For media queries that are not conforming user agents need to follow the
   rules described in this section.

  <ul>
   <li>
    <p><strong>Unknown media types.</strong> Unknown media types evaluate to
     false. Effectively, they are treated identically to known media types
     that do not match the media type of the device.

    <div class=example>
     <p>The media query "<code>unknown</code>" will evaluate to false, unless
      <code>unknown</code> is actually a supported media type. Similarly,
      "<code>not unknown</code>" will evaluate to true.
    </div>

    <p class=note>Unknown media types are distinct from media types that do
     not actually match the IDENT production. Those fall under the malformed
     media query clause.

   <li>
    <p><strong>Unknown media features.</strong> User agents are to represent
     a media query as "<code>not all</code>" when one of the specified media
     features is not known.

    <div class=example>
     <pre><code>&lt;link rel="stylesheet" media="screen and (max-weight: 3kg) and (color), (color)" href="example.css" /&gt;</code></pre>

     <p>In this example, the first media query will be represented as
      "<code>not all</code>" and evaluate to false and the second media query
      is evaluated as if the first had not been specified, effectively.
    </div>

    <div class=example>
     <pre><code>@media (min-orientation:portrait) { … }</code></pre>

     <p>Is represented as "<code>not all</code>" because the ‘<code
      class=css>orientation</code>’ feature does not accept the ‘<code
      class=css>min-</code>’ prefix.
    </div>

   <li>
    <p><strong>Unknown media feature values.</strong> As with unknown media
     features, user agents are to represent a media query as "<code>not
     all</code>" when one of the specified media feature values is not known.

    <div class=example>
     <p>The media query <code>(color:20example)</code> specifies an unknown
      value for the ‘<code class=css>color</code>’ media feature and is
      therefore represented as "<code>not all</code>".
    </div>

    <div class=example>
     <p>This media query is represented as "<code>not all</code>" because
      negative lengths are not allowed for the ‘<code
      class=css>width</code>’ media feature:

     <pre><code>@media (min-width: -100px) { … }</code></pre>
    </div>

   <li>
    <p><strong>Malformed media query.</strong> User agents are to handle
     unexpected tokens encountered while parsing a media query by reading
     until the end of the media query, while observing <a
     href="http://www.w3.org/TR/CSS21/syndata.html#block">the rules for
     matching pairs</a> of (), [], {}, "", and '', and correctly handling
     escapes. Media queries with unexpected tokens are represented as
     "<code>not all</code>". <a href="#CSS21"
     rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <div class=example>
     <pre><code>@media (example, all,), speech { /* only applicable to speech devices */ }
@media &amp;test, screen           { /* only applicable to screen devices */ }</code></pre>
    </div>

    <div class=example>
     <p>The following is an malformed media query because having no space
      between ‘<code class=css>and</code>’ and the expression is not
      allowed. (That is reserved for the functional notation syntax.)

     <pre><code>@media all and(color) { … }</code></pre>
    </div>

    <p>Media queries are expected to follow the error handling rules of the
     host language as well.

    <div class=example>
     <pre><code>@media test;,all { body { background:lime } }</code></pre>

     <p>… will not apply because the semicolon terminates the
      <code>@media</code> rule in CSS.
    </div>
  </ul>

  <h2 id=media1><span class=secno>4. </span>Media features</h2>

  <p>Syntactically, media features resemble CSS properties: they have names
   and accept certain values. There are, however, several important
   differences between properties and media features:

  <ul>
   <li>Properties are used in <em>declarations</em> to give information about
    how to present a document. Media features are used in
    <em>expressions</em> to describe requirements of the output device.

   <li>Most media features accept optional ‘<code class=css>min-</code>’
    or ‘<code class=css>max-</code>’ prefixes to express "greater or
    equal to" and "smaller or equal to" constraints. This syntax is used to
    avoid "&lt;" and "&gt;" characters which may conflict with HTML and XML.
    Those media features that accept prefixes will most often be used with
    prefixes, but can also be used alone.

   <li>Properties always require a value to form a declaration. Media
    features, on the other hand, can also be used without a value. For a
    media feature <var>feature</var>, <code>(<var>feature</var>)</code> will
    evaluate to true if <code>(<var>feature</var>:<var>x</var>)</code> will
    evaluate to true for a value <var>x</var> other than zero or zero
    followed by a unit identifier (i.e., other than <code>0</code>,
    <code>0px</code>, <code>0em</code>, etc.) or the keyword ‘<code
    class=property>none</code>’. Media features that are prefixed by
    min/max cannot be used without a value. When a media feature prefixed
    with min/max is used without a value it makes the media query malformed.

   <li>Properties may accept more complex values, e.g., calculations that
    involve several other values. Media features only accept single values:
    one keyword, one number, or a number with a unit identifier. (The only
    exceptions are the ‘<code class=css>aspect-ratio</code>’ and ‘<code
    class=css>device-aspect-ratio</code>’ media features.)
  </ul>

  <div class=example>
   <p>For example, the ‘<code class=css>color</code>’ media feature can
    form expressions without a value (‘<code class=css>(color)</code>’),
    or with a value (‘<code class=css>(min-color: 1)</code>’).
  </div>

  <p class=note>This specification defines media features usable with visual
   and tactile devices. Similarly, media features can be defined for aural
   media types.

  <h3 id=width><span class=secno>4.1. </span>width</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;length&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>width</code>’ media feature describes the width
   of the targeted display area of the output device. For continuous media,
   this is the width of the viewport (as described by CSS2, section 9.1.1 <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>) including the
   size of a rendered scroll bar (if any). For paged media, this is the width
   of the page box (as described by CSS2, section 13.2 <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>).

  <p>A specified &lt;length> cannot be negative.

  <div class=example>
   <p>For example, this media query expresses that the style sheet is usable
    on printed output wider than 25cm:

   <pre><code>&lt;link rel="stylesheet" media="print and (min-width: 25cm)" href="http://…" /></code></pre>
  </div>

  <div class=example>
   <p>This media query expresses that the style sheet is usable on devices
    with viewport (the part of the screen/paper where the document is
    rendered) widths between 400 and 700 pixels:

   <pre><code>@media screen and (min-width: 400px) and (max-width: 700px) { … }</code></pre>
  </div>

  <div class=example>
   <p>This media query expresses that style sheet is usable on screen and
    handheld devices if the width of the viewport is greater than 20em.

   <pre><code>@media handheld and (min-width: 20em), 
  screen and (min-width: 20em) { … }</code></pre>

   <p>The ‘<code class=css>em</code>’ value is relative to the initial
    value of ‘font-size’.
  </div>

  <h3 id=height><span class=secno>4.2. </span>height</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;length&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>height</code>’ media feature describes the
   height of the targeted display area of the output device. For continuous
   media, this is the height of the viewport including the size of a rendered
   scroll bar (if any). For paged media, this is the height of the page box.

  <p>A specified &lt;length> cannot be negative.

  <h3 id=device-width><span class=secno>4.3. </span>device-width</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;length&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>device-width</code>’ media feature describes
   the width of the rendering surface of the output device. For continuous
   media, this is the width of the screen. For paged media, this is the width
   of the page sheet size.

  <p>A specified &lt;length> cannot be negative.

  <div class=example>
   <pre><code>@media screen and (device-width: 800px) { … }</code></pre>

   <p>In the example above, the style sheet will apply only to screens that
    currently displays exactly 800 horizontal pixels. The ‘<code
    class=css>px</code>’ unit is of the logical kind, as described in the
    <a href="#units">Units</a> section.
  </div>

  <h3 id=device-height><span class=secno>4.4. </span>device-height</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;length&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>device-height</code>’ media feature describes
   the height of the rendering surface of the output device. For continuous
   media, this is the height of the screen. For paged media, this is the
   height of the page sheet size.

  <p>A specified &lt;length> cannot be negative.

  <div class=example>
   <pre><code>&lt;link rel="stylesheet" media="screen and (device-height: 600px)" /&gt;</code></pre>

   <p>In the example above, the style sheet will apply only to screens that
    have exactly 600 vertical pixels. Note that the definition of the
    ‘<code class=css>px</code>’ unit is the same as in other parts of
    CSS.
  </div>

  <h3 id=orientation><span class=secno>4.5. </span>orientation</h3>

  <div class=media-feature><span class=label>Value:</span> portrait |
   landscape<br>
   <span class=label>Applies to:</span> bitmap media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>orientation</code>’ media feature is ‘<code
   class=css>portrait</code>’ when the value of the ‘<code
   class=css>height</code>’ media feature is greater than or equal to the
   value of the ‘<code class=css>width</code>’ media feature. Otherwise
   ‘<code class=css>orientation</code>’ is ‘<code
   class=css>landscape</code>’.

  <div class=example>
   <pre><code>@media all and (orientation:portrait) { … }
@media all and (orientation:landscape) { … }</code></pre>
  </div>

  <h3 id=aspect-ratio><span class=secno>4.6. </span>aspect-ratio</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;ratio&gt;<br>
   <span class=label>Applies to:</span> bitmap media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>aspect-ratio</code>’ media feature is defined
   as the ratio of the value of the ‘<code class=css>width</code>’ media
   feature to the value of the ‘<code class=css>height</code>’ media
   feature.

  <h3 id=device-aspect-ratio><span class=secno>4.7.
   </span>device-aspect-ratio</h3>

  <div class=media-feature><span class=label>Value:</span> &lt;ratio&gt;<br>
   <span class=label>Applies to:</span> bitmap media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>device-aspect-ratio</code>’ media feature is
   defined as the ratio of the value of the ‘<code
   class=css>device-width</code>’ media feature to the value of the
   ‘<code class=css>device-height</code>’ media feature.

  <div class=example>
   <p>For example, if a screen device with square pixels has 1280 horizontal
    pixels and 720 vertical pixels (commonly referred to as "16:9"), the
    following Media Queries will all match the device:

   <pre><code>@media screen and (device-aspect-ratio: 16/9) { … }
@media screen and (device-aspect-ratio: 32/18) { … }
@media screen and (device-aspect-ratio: 1280/720) { … }
@media screen and (device-aspect-ratio: 2560/1440) { … }</code></pre>
  </div>

  <h3 id=color><span class=secno>4.8. </span>color</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span> visual media types<br>
   <span class=label>Accept min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>color</code>’ media feature describes the
   number of bits per color component of the output device. If the device is
   not a color device, the value is zero.

  <p>A specified &lt;integer> cannot be negative.

  <div class=example>
   <p>For example, these two media queries express that a style sheet applies
    to all color devices:

   <pre><code>@media all and (color) { … }
@media all and (min-color: 1) { … }</code></pre>
  </div>

  <div class=example>
   <p>This media query expresses that a style sheet applies to color devices
    with 2 or more bits per color component:

   <pre><code>@media all and (min-color: 2) { … }</code></pre>
  </div>

  <p>If different color components are represented by different number of
   bits, the smallest number is used.

  <div class=example>
   <p>For instance, if an 8-bit color system represents the red component
    with 3 bits, the green component with 3 bits and the blue component with
    2 bits, the ‘<code class=css>color</code>’ media feature will have a
    value of 2.
  </div>

  <p>In a device with indexed colors, the minimum number of bits per color
   component in the lookup table is used.

  <p class=note>The described functionality is only able to describe color
   capabilities at a superficial level. If further functionality is required,
   RFC2531 <a href="#RFC2531" rel=biblioentry>[RFC2531]<!--{{RFC2531}}--></a>
   provides more specific media features which may be supported at a later
   stage.

  <h3 id=color-index><span class=secno>4.9. </span>color-index</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span> visual media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>color-index</code>’ media feature describes the
   number of entries in the color lookup table of the output device. If the
   device does not use a color lookup table, the value is zero.

  <p>A specified &lt;integer> cannot be negative.

  <div class=example>
   <p>For example, here are two ways to express that a style sheet applies to
    all color index devices:

   <pre><code>@media all and (color-index) { … }
@media all and (min-color-index: 1) { … }</code></pre>
  </div>

  <div class=example>
   <p>This media query expresses that a style sheet applies to a color index
    device with 256 or more entries:

   <pre><code>&lt;?xml-stylesheet media="all and (min-color-index: 256)" 
  href="http://www.example.com/…" ?&gt;</code></pre>
  </div>

  <h3 id=monochrome><span class=secno>4.10. </span>monochrome</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span> visual media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>monochrome</code>’ media feature describes the
   number of bits per pixel in a monochrome frame buffer. If the device is
   not a monochrome device, the output device value will be 0.

  <p>A specified &lt;integer> cannot be negative.

  <div class=example>
   <p>For example, here are two ways to express that a style sheet applies to
    all monochrome devices:

   <pre><code>@media all and (monochrome) { … }
@media all and (min-monochrome: 1) { … }</code></pre>
  </div>

  <div class=example>
   <p>Express that a style sheet applies to monochrome devices with more than
    2 bits per pixels:

   <pre><code>@media all and (min-monochrome: 2) { … }</code></pre>
  </div>

  <div class=example>
   <p>Express that there is one style sheet for color pages and another for
    monochrome:

   <pre><code>&lt;link rel="stylesheet" media="print and (color)" href="http://…" /&gt;
&lt;link rel="stylesheet" media="print and (monochrome)" href="http://…" /&gt;</code></pre>
  </div>

  <h3 id=resolution><span class=secno>4.11. </span>resolution</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;resolution&gt;<br>
   <span class=label>Applies to:</span> bitmap media types<br>
   <span class=label>Accepts min/max prefixes:</span> yes<br>
  </div>

  <p>The ‘<code class=css>resolution</code>’ media feature describes the
   resolution of the output device, i.e. the density of the pixels. When
   querying devices with non-square pixels, in ‘<code
   class=css>min-resolution</code>’ queries the least-dense dimension must
   be compared to the specified value and in ‘<code
   class=css>max-resolution</code>’ queries the most-dense dimensions must
   be compared instead. A ‘<code class=css>resolution</code>’ (without a
   "min-" or "max-" prefix) query never matches a device with non-square
   pixels.

  <p>For printers, this corresponds to the screening resolution (the
   resolution for printing dots of arbitrary color).

  <div class=issue>Another media feature should probably be added to deal
   with the type of resolution authors want to know to deal with monochrome
   printing.</div>

  <div class=example>
   <p>For example, this media query expresses that a style sheet is usable on
    devices with resolution greater than 300 dots per CSS ‘<code
    class=css>inch</code>’:

   <pre><code>@media print and (min-resolution: 300dpi) { … }</code></pre>
  </div>

  <div class=example>
   <p>This media query expresses that a style sheet is usable on devices with
    resolution greater than 118 dots per CSS ‘<code
    class=css>centimeter</code>’:

   <pre><code>@media print and (min-resolution: 118dpcm) { … }</code></pre>
  </div>

  <h3 id=scan><span class=secno>4.12. </span>scan</h3>

  <div class=media-feature><span class=label>Value:</span> progressive |
   interlace<br>
   <span class=label>Applies to:</span> "tv" media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>scan</code>’ media feature describes the
   scanning process of "tv" output devices.

  <div class=example>
   <p>For example, this media query expresses that a style sheet is usable on
    tv devices with progressive scanning:

   <pre><code>@media tv and (scan: progressive) { … }</code></pre>
  </div>

  <h3 id=grid><span class=secno>4.13. </span>grid</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>grid</code>’ media feature is used to query
   whether the output device is grid or bitmap. If the output device is
   grid-based (e.g., a "tty" terminal, or a phone display with only one fixed
   font), the value will be 1. Otherwise, the value will be 0.

  <p>Only 0 and 1 are valid values. (This includes -0.) Thus everything else
   creates a malformed media query.

  <div class=example>
   <p>Here are two examples:

   <pre><code>@media handheld and (grid) and (max-width: 15em) { … }</code>
<code>@media handheld and (grid) and (device-max-height: 7em) { … }</code></pre>
  </div>

  <h3 id=script><span class=secno>4.14. </span>script</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span>all media types<br>
   <span class=label>Accepts min/maxprefixes:</span> no<br>
  </div>

  <p>The ‘<code class=property>script</code>’ media feature is used to
   query whether ECMAscript is supported on the current document. If the user
   agent supports ECMAscript, and that support is active for the current
   document the value must be 1. Otherwise, the value must be 0.

  <p>Some user agents have the ability to turn off ECMAscript support on a
   per script basis or per domain basis, allowing some, but not all, scripts
   to run in a particular document. The ‘<code class=css>script</code>’
   media feature does not allow fine grained detection of which script is
   allowed to run. In this scenario, the value of the ‘<code
   class=property>script</code>’ media feature should be 1 if scripts
   originating on the same domain as the document are allowed to run, and 0
   otherwise.

  <p class=note>A future level of CSS may extend this media feature to allow
   fine-grained detection of which script is allowed to run.

  <p>Only 0 and 1 are valid values. (This includes -0.) Thus everything else
   creates a malformed media query.

  <h3 id=pointer><span class=secno>4.15. </span>pointer</h3>

  <div class=media-feature><span class=label>Value:</span> none | coarse |
   fine<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>pointer</code>’ media feature is used to query
   about the presence and accuracy of a pointing device such as a mouse. If a
   device has multiple input mechanisms, it is recommended that the UA
   reports the characteristics of the least capable pointing device of the
   primary input mechanisms. This media query takes the following values:

  <dl>
   <dt><dfn id=none title="pointer:none">‘<code
    class=css>none</code>’</dfn>

   <dd>The input mechanism of the device does not include a pointing device.

   <dt><dfn id=coarse title="pointer:coarse">‘<code
    class=css>coarse</code>’</dfn>

   <dd>The input mechanism of the device includes a pointing device of
    limited accuracy.

   <dt><dfn id=fine title="pointer:fine">‘<code
    class=css>fine</code>’</dfn>

   <dd>The input mechanism of the device includes an accurate pointing
    device.
  </dl>

  <p>Both ‘<code class=css>coarse</code>’ and ‘<code
   class=css>fine</code>’ indicate the presence of a pointing device, but
   differ in accuracy. A pointing device with which it would be difficult or
   impossible to reliably pick one of several small adjacent targets at a
   zoom factor of 1 would qualify as ‘<code class=css>coarse</code>’.
   Changing the zoom level does not affect the value of this media feature.

  <p class=note>As the UA may provide the user with the ability to zoom, or
   as secondary pointing devices may have a different accuracy, the user may
   be able to perform accurate clicks even if the value of this media feature
   is ‘<code class=css>coarse</code>’. This media feature does not
   indicate that the user will never be able to click accurately, only that
   it is inconvenient for him to do so. Authors are expected to react to a
   value of ‘<code class=css>coarse</code>’ by designing pages that do
   not rely on accurate clicking to be operated.

  <p class=note>Typical examples of a ‘<code class=css>fine</code>’
   pointing system are a mouse, a track-pad or a stylus-based touch screen.
   Finger-based touch screens would qualify as ‘<code
   class=css>coarse</code>’.

  <p>For accessibility reasons, even on devices whose pointing device can be
   described as ‘<code class=css>fine</code>’, the UA may give a value of
   ‘<code class=css>coarse</code>’ or ‘<code class=css>none</code>’
   to this media query, to indicate that the user has difficulties
   manipulating the input device accurately or at all.

  <div class=example>
   <pre><code>/* Make radio buttons and check boxes larger if we have an inaccurate pointing device */
@media (pointer:coarse) {
	input[type="checkbox"], input[type="radio"] {
		min-width:30px;
		min-height:40px;
		background:transparent;
	}
}</code></pre>
  </div>

  <h3 id=hover><span class=secno>4.16. </span>hover</h3>

  <div class=media-feature><span class=label>Value:</span>
   &lt;integer&gt;<br>
   <span class=label>Applies to:</span> visual and tactile media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>hover</code>’ media feature is used to query
   whether primary pointing system used on the output device can hover or
   not. If it can, the value will be 1. Otherwise, the value will be 0.

  <p>If a device has multiple pointing devices, some of which support
   hovering and some of which not, it is recommended that the UA reports the
   hovering ability of the least capable of the primary pointing devices.

  <p class=note> The value of ‘<code class=css>hover</code>’ media query
   should for example be 0 on a touch screen device that can also be
   controlled via an optional mouse. Authors should therefore be careful not
   to assume that the ‘<code class=css>:hover</code>’ pseudo class will
   never match on device where ‘<code class=css>hover:0</code>’ is true,
   but they should design layouts that do not depend on hovering to be fully
   usable.

  <p>For accessibility reasons, even on devices that do support hovering, the
   UA may give a value of 0 to this media query, to opt into layouts that
   work well without hovering.

  <p>Only 0 and 1 are valid values. (This includes -0.) Thus everything else
   creates a malformed media query.

  <div class=example>
   <pre><code>/* Only use a hover-activated drop down menu on devices that can hover. */
@media (hover) {
	.menu &gt; li        {display:inline-block;}
	.menu ul          {display:none; position:absolute;}
	.menu li:hover ul {display:block; list-style:none; padding:0;}
	/* ... */
}</code></pre>
  </div>

  <h3 id=luminosity><span class=secno>4.17. </span>luminosity</h3>

  <div class=media-feature><span class=label>Value:</span> dim | normal |
   washed<br>
   <span class=label>Applies to:</span> visual media types<br>
   <span class=label>Accepts min/max prefixes:</span> no<br>
  </div>

  <p>The ‘<code class=css>luminosity</code>’ media feature is used to
   query about the ambient luminosity in which the device is used, to allow
   the author to adjust style of the document in response. The following
   values are valid:

  <dl>
   <dt><dfn id=dim title="luminosity:dim">‘<code
    class=css>dim</code>’</dfn>

   <dd>The device is used in a dim environment, where excessive contrast and
    brightness would be distracting or uncomfortable to the reader. For
    example: night time, or a dimly illuminated indoor environment.

   <dt><dfn id=normal title="luminosity:normal">‘<code
    class=css>normal</code>’</dfn>

   <dd>The device is used in a environment with a level of luminosity in the
    ideal range for the screen, and which does not necessitate any particular
    adjustment.

   <dt><dfn id=washed title="luminosity:washed">‘<code
    class=css>washed</code>’</dfn>

   <dd>The device is used in an exceptionally bright environment, causing the
    screen to be washed out and difficult to read. For example: bright
    daylight.
  </dl>

  <p>User Agents should set the thresholds between the 3 levels in a way that
   takes into account the characteristics of the device.

  <div class=note>Even though it is expected that User Agents will adjust the
   value of this media feature based on ambient light sensors, this
   specification intentionally refrains from defining the 3 levels in terms
   of a measurement in lux, for several reasons:
   <ul>
    <li>Devices equipped with a light sensor usually adjust the brightness of
     the screen automatically. Depending on the level of adjustment, the
     thresholds for needing a low contrast or hight contrast content may
     vary.

    <li>Different screen technologies wash out at very different levels of
     ambient luminosity; e-ink displays remain readable in bright daylight,
     while liquid crystal displays do not.

    <li>Many embedded light sensors are inaccurately calibrated, making it
     difficult to establish useful thresholds valid across devices.
   </ul>
  </div>

  <p>For accessibility purposes, User Agents may offer manual controls
   allowing the user to switch between the 3 levels of independently of the
   environment luminosity, as high contrast or low contrast styles may be
   more suitable for users with visual disabilities.

  <div class=issue>Using this media feature for accessibility purposes
   overlaps a lot with the high-contrast media feature proposed by Microsoft:
   <a
   href="http://msdn.microsoft.com/en-us/library/windows/apps/hh465764.aspx">http://msdn.microsoft.com/en-us/library/windows/apps/hh465764.aspx</a>.
   Can we adjust this so that it covers all use cases for both, or somehow
   modify them to work in an orthogonal, rather than overlapping, fashion?</div>

  <div class=example>
   <pre><code>
@media (luminosity: normal) {
	p { background: url("texture.jpg"); color: #333 }
}
@media (luminosity: dim) {
	p { background: #222; color: #ccc }
}
@media (luminosity: washed) {
	p { background: white; color: black; font-size: 2em; }
}</code></pre>
  </div>

  <h2 id=changes><span class=secno>5. </span>Changes</h2>

  <h3 id=changes-2012><span class=secno>5.1. </span>Changes Since the Media
   Queries Level 3</h3>

  <p>The following changes were made to this specification since the <a
   href="http://www.w3.org/TR/2012/PR-css3-mediaqueries-20120426/">26 April
   2012 Proposed Recomendation of Media Queries Level 3</a>:

  <ul>
   <li>For a media feature <var>feature</var>,
    <code>(<var>feature</var>)</code> will evaluate to true if
    <code>(<var>feature</var>:<var>x</var>)</code> will evaluate to true for
    a value <var>x</var> other than zero or zero followed by a unit
    identifier (i.e., other than <code>0</code>, <code>0px</code>,
    <code>0em</code>, etc.)<ins> or the keyword ‘<code
    class=property>none</code>’</ins>.

   <li>The <a href="#script">‘<code class=css>script</code>’ media
    feature</a> was added.

   <li>The <a href="#pointer">‘<code class=css>pointer</code>’ media
    feature</a> was added.

   <li>The <a href="#hover">‘<code class=css>hover</code>’ media
    feature</a> was added.

   <li>The <a href="#luminosity">‘<code class=css>luminosity</code>’
    media feature</a> was added.
  </ul>

  <h2 id=conformance><span class=secno>6. </span> Conformance</h2>

  <h3 id=conventions><span class=secno>6.1. </span> Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 id=conformance-classes><span class=secno>6.2. </span> Conformance
   classes</h3>

  <p>Conformance to CSS Media Queries Level 4 is defined for three
   conformance classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to CSS Media Queries Level 4 if all of its
   statements that use syntax defined in this module are valid according to
   the generic CSS grammar and the individual grammars of each feature
   defined in this module.

  <p>A renderer is conformant to CSS Media Queries Level 4 if, in addition to
   interpreting the style sheet as defined by the appropriate specifications,
   it supports all the features defined by CSS Media Queries Level 4 by
   parsing them correctly and rendering the document accordingly. However,
   the inability of a UA to correctly render a document due to limitations of
   the device does not make the UA non-conformant. (For example, a UA is not
   required to render color on a monochrome monitor.)

  <p>An authoring tool is conformant to CSS Media Queries Level 4 if it
   writes style sheets that are syntactically correct according to the
   generic CSS grammar and the individual grammars of each feature in this
   module, and meet all other conformance requirements of style sheets as
   described in this module.

  <h3 id=partial><span class=secno>6.3. </span> Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
   assign fallback values, CSS renderers <strong>must</strong> treat as
   invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 id=experimental><span class=secno>6.4. </span> Experimental
   implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
   reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage in
   the W3C process, all implementations of a CSS feature are considered
   experimental. The CSS Working Group recommends that implementations use a
   vendor-prefixed syntax for such features, including those in W3C Working
   Drafts. This avoids incompatibilities with future changes in the draft.

  <h3 id=testing><span class=secno>6.5. </span> Non-experimental
   implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
   non-experimental implementations are possible, and implementors should
   release an unprefixed implementation of any CR-level feature they can
   demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
   implementations, the CSS Working Group requests that non-experimental CSS
   renderers submit an implementation report (and, if necessary, the
   testcases used for that implementation report) to the W3C before releasing
   an unprefixed implementation of any CSS features. Testcases submitted to
   W3C are subject to review and correction by the CSS Working Group.

  <p>Further information on submitting testcases and implementation reports
   can be found from on the CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
   Questions should be directed to the <a
   href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
   mailing list.

  <h2 class=no-num id=acknowledgments> Acknowledgments</h2>

  <p>This specification is the product of the W3C Working Group on Cascading
   Style Sheets.

  <p>Comments from Arve Bersvendsen, Björn Höhrmann, Chris Lilley,
   Christoph Päper, L. David Baron, François Remy, Melinda Grant, Nicholas
   C. Zakas Philipp Hoschka, Rick Byers, Rijk van Geijtenbeek, Roger Gimson,
   Sigurd Lerstad, Simon Kissane, Simon Pieters, Steven Pemberton and Susan
   Lesch, improved this specification.

  <h2 class=no-num id=references> References</h2>

  <h3 class=no-num id=normative-references> Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607/">http://www.w3.org/TR/2011/REC-CSS2-20110607/</a>
   </dd>
   <!---->

   <dt id=CSS3VAL>[CSS3VAL]

   <dd>Håkon Wium Lie; Tab Atkins; Elika J. Etemad. <a
    href="http://www.w3.org/TR/2012/CR-css3-values-20120828/"><cite>CSS
    Values and Units Module Level 3.</cite></a> 28 August 2012. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2012/CR-css3-values-20120828/">http://www.w3.org/TR/2012/CR-css3-values-20120828/</a>
   </dd>
   <!---->

   <dt id=MEDIAQ>[MEDIAQ]

   <dd>Florian Rivoal. <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/"><cite>Media
    Queries.</cite></a> 19 June 2012. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/">http://www.w3.org/TR/2012/REC-css3-mediaqueries-20120619/</a>
   </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
   </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references> Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=HTML401>[HTML401]

   <dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a
    href="http://www.w3.org/TR/1999/REC-html401-19991224"><cite>HTML 4.01
    Specification.</cite></a> 24 December 1999. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>
   </dd>
   <!---->

   <dt id=HTML5>[HTML5]

   <dd>Ian Hickson. <a
    href="http://www.w3.org/TR/2011/WD-html5-20110525/"><cite>HTML5.</cite></a>
    25 May 2011. W3C Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-html5-20110525/">http://www.w3.org/TR/2011/WD-html5-20110525/</a>
   </dd>
   <!---->

   <dt id=RFC2531>[RFC2531]

   <dd>G. Klyne; L. McIntyre. <a
    href="http://www.ietf.org/rfc/rfc2531.txt"><cite>Content Feature Schema
    for Internet Fax.</cite></a> March 1999. Internet RFC 2531. URL: <a
    href="http://www.ietf.org/rfc/rfc2531.txt">http://www.ietf.org/rfc/rfc2531.txt</a>
   </dd>
   <!---->

   <dt id=XMLSTYLE>[XMLSTYLE]

   <dd>James Clark. <a
    href="http://www.w3.org/1999/06/REC-xml-stylesheet-19990629"><cite>Associating
    Style Sheets with XML documents.</cite></a> 29 June 1999. W3C
    Recommendation. URL: <a
    href="http://www.w3.org/1999/06/REC-xml-stylesheet-19990629">http://www.w3.org/1999/06/REC-xml-stylesheet-19990629</a>
   </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index> Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>authoring tool, <a href="#authoring-tool"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>expressions, <a href="#expressions" title="section 2.">2.</a>

   <li>luminosity:dim, <a href="#dim"
    title="section 4.17."><strong>4.17.</strong></a>

   <li>luminosity:normal, <a href="#normal"
    title="section 4.17."><strong>4.17.</strong></a>

   <li>luminosity:washed, <a href="#washed"
    title="section 4.17."><strong>4.17.</strong></a>

   <li>media features, <a href="#media-features" title="section 2.">2.</a>

   <li>pointer:coarse, <a href="#coarse"
    title="section 4.15."><strong>4.15.</strong></a>

   <li>pointer:fine, <a href="#fine"
    title="section 4.15."><strong>4.15.</strong></a>

   <li>pointer:none, <a href="#none"
    title="section 4.15."><strong>4.15.</strong></a>

   <li>renderer, <a href="#renderer"
    title="section 6.2."><strong>6.2.</strong></a>

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet"
      title="section 6.2."><strong>6.2.</strong></a>
    </ul>
  </ul>
  <!--end-index-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
