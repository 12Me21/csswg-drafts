<!DOCTYPE html>

<html lang=en>
 <head>
  <meta content="text/html; charset=utf-8" http-equiv=Content-Type>
  <title>CSS Syntax Module Level 3 (CSS3 Syntax)</title>
  <!--
  <link href="http://purl.org/dc/terms/" rel="schema.dcterms">
  <link href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="dcterms.rights">
  -->

  <meta content="CSS Syntax Module Level 3 (CSS3 Syntax)" name=dcterms.title>
  <meta content=text name=dcterms.type>
  <meta content=2013-05-31 name=dcterms.date>
  <meta content="Tab Atkins Jr." name=dcterms.creator>
  <meta content=W3C name=dcterms.publisher>
  <meta content="http://dev.w3.org/csswg/css3-syntax/"
   name=dcterms.identifier>
  <link href="#contents" rel=contents>
  <link href="#index" rel=index>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
   type="text/css">
  <link href=railroad-diagrams.css rel=stylesheet type="text/css">

 <body class=h-entry>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1 class=p-name>CSS Syntax Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft <time
    class=dt-updated datetime=20130531>31 May 2013</time></h2>

   <dl>
    <dt>This version:

    <dd> <a class=u-url
     href="http://dev.w3.org/csswg/css3-syntax/">http://dev.w3.org/csswg/css3-syntax/</a>
     <!--
	<dt>Latest version:
	<dd>
		<a href="http://www.w3.org/TR/css3-syntax/">http://www.w3.org/TR/css3-syntax/</a>
-->

    <dt>Editor's draft:

    <dd> <a
     href="http://dev.w3.org/csswg/css3-syntax/">http://dev.w3.org/csswg/css3-syntax/</a>

    <dt>Previous version:

    <dd> <a href="http://www.w3.org/TR/2003/WD-css3-syntax-20030813/"
     rel=previous>http://www.w3.org/TR/2003/WD-css3-syntax-20030813/</a>

    <dt>Issue Tracking:

    <dd> <a
     href="https://www.w3.org/Bugs/Public/buglist.cgi?product=CSS&component=Syntax">W3C
     Bugzilla</a>

    <dt>Feedback:

    <dd> <a
     href="mailto:www-style@w3.org?subject=%5Bcss-syntax%5D%20feedback">www-style@w3.org</a>
     with subject line “<kbd>[css-syntax] <var>… message topic
     …</var></kbd>” (<a
     href="http://lists.w3.org/Archives/Public/www-style/"
     rel=discussion>archives</a>)

    <dt>Editors:

    <dd class="p-author h-card vcard"> <a class="p-name fn u-url url"
     href="http://www.xanthir.com/" rel=author>Tab Atkins Jr.</a> (<span
     class="p-org org">Google, Inc.</span>), <span
     class="u-email email">jackalmage@gmail.com</span>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> © 2013 <a href="http://www.w3.org/"><abbr
    title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a
    href="http://www.csail.mit.edu/"><abbr
    title="Massachusetts Institute of Technology">MIT</abbr></a>, <a
    href="http://www.ercim.eu/"><abbr
    title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
    <a href="http://www.keio.ac.jp/">Keio</a>, <a
    href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p> <a href="http://www.w3.org/TR/CSS/">CSS</a> is a language for
   describing the rendering of structured documents (such as HTML and XML) on
   screen, on paper, in speech, etc. <span class=p-summary> This module
   describes, in general terms, the basic structure and syntax of CSS
   stylesheets. It defines, in detail, the syntax and parsing of CSS - how to
   turn a stream of bytes into a meaningful stylesheet. </span>

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-syntax%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css3-syntax” in the subject, preferably like this:
   “[<!---->css3-syntax<!---->] <em>…summary of comment…</em>”

  <p>This document was produced by the <a
   href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (part of
   the <a href="http://www.w3.org/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
   2004 W3C Patent Policy</a>. W3C maintains a <a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
   6 of the W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>The following features are at risk: …

  <h2 class="no-num no-toc" id=contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span> Introduction</a>
    <ul class=toc>
     <li><a href="#placement"><span class=secno>1.1. </span> Module
      interactions</a>
    </ul>

   <li><a href="#syntax-description"><span class=secno>2. </span> Description
    of CSS's Syntax</a>
    <ul class=toc>
     <li><a href="#error-handling"><span class=secno>2.1. </span> Error
      Handling</a>
    </ul>

   <li><a href="#tokenizing-and-parsing-css"><span class=secno>3. </span>
    Tokenizing and Parsing CSS</a>
    <ul class=toc>
     <li><a href="#overview-of-the-parsing-model"><span class=secno>3.1.
      </span> Overview of the Parsing Model</a>

     <li><a href="#the-input-byte-stream"><span class=secno>3.2. </span> The
      input byte stream</a>

     <li><a href="#preprocessing-the-input-stream"><span class=secno>3.3.
      </span> Preprocessing the input stream</a>
    </ul>

   <li><a href="#tokenization"><span class=secno>4. </span> Tokenization</a>
    <ul class=toc>
     <li><a href="#token-diagrams"><span class=secno>4.1. </span> Token
      Railroad Diagrams</a>

     <li><a href="#definitions"><span class=secno>4.2. </span>
      Definitions</a>

     <li><a href="#tokenizer-algorithms"><span class=secno>4.3. </span>
      Tokenizer Algorithms</a>
      <ul class=toc>
       <li><a href="#consume-a-token"><span class=secno>4.3.1. </span>
        Consume a token</a>

       <li><a href="#consume-a-numeric-token"><span class=secno>4.3.2.
        </span> Consume a numeric token</a>

       <li><a href="#consume-a-string-token"><span class=secno>4.3.3. </span>
        Consume a string token</a>

       <li><a href="#consume-a-url-token-"><span class=secno>4.3.4. </span>
        Consume a url token </a>

       <li><a href="#consume-a-unicode-range-token"><span class=secno>4.3.5.
        </span> Consume a unicode-range token</a>

       <li><a href="#consume-an-escaped-character"><span class=secno>4.3.6.
        </span> Consume an escaped character</a>

       <li><a href="#check-if-two-characters-are-a-valid-esca"><span
        class=secno>4.3.7. </span> Check if two characters are a valid
        escape</a>

       <li><a href="#check-if-three-characters-would-start-an"><span
        class=secno>4.3.8. </span> Check if three characters would start an
        identifier</a>

       <li><a href="#check-if-three-characters-would-start-a-"><span
        class=secno>4.3.9. </span> Check if three characters would start a
        number</a>

       <li><a href="#consume-a-name"><span class=secno>4.3.10. </span>
        Consume a name</a>

       <li><a href="#consume-a-number"><span class=secno>4.3.11. </span>
        Consume a number</a>

       <li><a href="#convert-a-string-to-a-number"><span class=secno>4.3.12.
        </span> Convert a string to a number</a>

       <li><a href="#consume-the-remnants-of-a-bad-url"><span
        class=secno>4.3.13. </span> Consume the remnants of a bad url</a>

       <li><a href="#set-the-unicode-ranges-range"><span class=secno>4.3.14.
        </span> Set the 〈unicode-range〉’s range</a>
      </ul>

     <li><a href="#changes-from-css-2.1-tokenizer"><span class=secno>4.4.
      </span> Changes from CSS 2.1 Tokenizer</a>
    </ul>

   <li><a href="#parsing"><span class=secno>5. </span> Parsing</a>
    <ul class=toc>
     <li><a href="#parser-diagrams"><span class=secno>5.1. </span> Parser
      Railroad Diagrams</a>

     <li><a href="#definitions0"><span class=secno>5.2. </span>
      Definitions</a>

     <li><a href="#parser-entry-points"><span class=secno>5.3. </span> Parser
      Entry Points</a>
      <ul class=toc>
       <li><a href="#parse-a-stylesheet"><span class=secno>5.3.1. </span>
        Parse a stylesheet</a>

       <li><a href="#parse-a-rule"><span class=secno>5.3.2. </span> Parse a
        rule</a>

       <li><a href="#parse-a-list-of-declarations"><span class=secno>5.3.3.
        </span> Parse a list of declarations</a>

       <li><a href="#parse-a-component-value"><span class=secno>5.3.4.
        </span> Parse a component value</a>

       <li><a href="#parse-a-list-of-component-values"><span
        class=secno>5.3.5. </span> Parse a list of component values</a>
      </ul>

     <li><a href="#parser-algorithms"><span class=secno>5.4. </span> Parser
      Algorithms</a>
      <ul class=toc>
       <li><a href="#consume-a-list-of-rules"><span class=secno>5.4.1.
        </span> Consume a list of rules</a>

       <li><a href="#consume-an-at-rule"><span class=secno>5.4.2. </span>
        Consume an at-rule</a>

       <li><a href="#consume-a-qualified-rule"><span class=secno>5.4.3.
        </span> Consume a qualified rule</a>

       <li><a href="#consume-a-list-of-declarations"><span class=secno>5.4.4.
        </span> Consume a list of declarations</a>

       <li><a href="#consume-a-declaration"><span class=secno>5.4.5. </span>
        Consume a declaration</a>

       <li><a href="#consume-a-component-value"><span class=secno>5.4.6.
        </span> Consume a component value</a>

       <li><a href="#consume-a-simple-block"><span class=secno>5.4.7. </span>
        Consume a simple block</a>

       <li><a href="#consume-a-function"><span class=secno>5.4.8. </span>
        Consume a function</a>
      </ul>

     <li><a href="#changes-from-css-2.1-core-grammar"><span class=secno>5.5.
      </span> Changes from CSS 2.1 Core Grammar</a>
    </ul>

   <li><a href="#anb"><span class=secno>6. </span> The <var>An+B</var>
    microsyntax</a>
    <ul class=toc>
     <li><a href="#anb-syntax"><span class=secno>6.1. </span> Informal Syntax
      Description</a>

     <li><a href="#the-anb-type"><span class=secno>6.2. </span> The
      <code>&lt;an+b></code> type</a>
    </ul>

   <li><a href="#rule-defs"><span class=secno>7. </span> Defining Grammars
    for Rules and Other Values</a>
    <ul class=toc>
     <li><a href="#declaration-rule-list"><span class=secno>7.1. </span>
      Defining Block Contents: the <var>&lt;declaration-list></var>,
      <var>&lt;rule-list></var>, and <var>&lt;stylesheet></var>
      productions</a>
    </ul>

   <li><a href="#serialization"><span class=secno>8. </span>Serialization</a>

    <ul class=toc>
     <li><a href="#serializing-anb"><span class=secno>8.1. </span>
      Serializing <var>&lt;an+b></var></a>
    </ul>

   <li><a href="#conformance"><span class=secno>9. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conventions"><span class=secno>9.1. </span> Document
      conventions</a>

     <li><a href="#conformance-classes"><span class=secno>9.2. </span>
      Conformance classes</a>
    </ul>

   <li class=no-num><a href="#acknowledgments"> Acknowledgments</a>

   <li class=no-num><a href="#references"> References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references"> Normative
      references</a>

     <li class=no-num><a href="#other-references"> Other references</a>
    </ul>

   <li class=no-num><a href="#index"> Index</a>

   <li class=no-num><a href="#property-index"> Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p><em>This section is not normative.</em>

  <p> This module defines the abstract syntax and parsing of CSS stylesheets
   and other things which use CSS syntax (such as the HTML <code>style</code>
   attribute).

  <p> It defines algorithms for converting a stream of codepoints (in other
   words, text) into a stream of CSS tokens, and then further into CSS
   objects such as stylesheets, rules, and declarations.

  <h3 id=placement><span class=secno>1.1. </span> Module interactions</h3>

  <p> This module defines the syntax and parsing of CSS stylesheets. It
   supersedes the lexical scanner and grammar defined in CSS 2.1.

  <h2 id=syntax-description><span class=secno>2. </span> Description of CSS's
   Syntax</h2>

  <p><em>This section is not normative.</em>

  <p> A CSS document is a series of <a href="#qualified-rule0"><i>qualified
   rules</i></a>, which are usually style rules that apply CSS properties to
   elements, and <a href="#at-rule"><i>at-rules</i></a>, which define special
   processing rules or values for the CSS document.

  <p> A <dfn id=qualified-rule>qualified rule</dfn> starts with a prelude
   then has a {}-wrapped block containing a sequence of declarations. The
   meaning of the prelude varies based on the context that the rule appears
   in - for style rules, it's a selector which specifies what elements the
   declarations will apply to. Each declaration has a name, followed by a
   colon and the declaration value. Declarations are separated by semicolons.

  <div class=example>
   <p> A typical rule might look something like this:

   <pre>
p > a {
	color: blue;
	text-decoration: underline;
}</pre>

   <p> In the above rule, "<code>p > a</code>" is the selector, which, if the
    source document is HTML, selects any <code>&lt;a></code> elements that
    are children of a <code>&lt;p></code> element.

   <p> "<code>color: blue;</code>" is a declaration specifying that, for the
    elements that match the selector, their ‘<code
    class=property>color</code>’ property should have the value ‘<code
    class=css>blue</code>’. Similiarly, their ‘<code
    class=property>text-decoration</code>’ property should have the value
    ‘<code class=css>underline</code>’.
  </div>

  <p> <dfn id=at-rules title=at-rule>At-rules</dfn> are all different, but
   they have a basic structure in common. They start with an "@" character
   followed by their name. Some <a href="#at-rule"><i>at-rules</i></a> are
   simple statements, with their name followed by more CSS values to specify
   their behavior, and finally ended by a semicolon. Others are blocks; they
   can have CSS values following their name, but they end with a {}-wrapped
   block, similar to a <a href="#qualified-rule0"><i>qualified rule</i></a>.
   Even the contents of these blocks are specific to the given <a
   href="#at-rule"><i>at-rule</i></a>: sometimes they contain a sequence of
   declarations, like a <a href="#qualified-rule0"><i>qualified rule</i></a>;
   other times, they may contain additional blocks, or at-rules, or other
   structures altogether.

  <div class=example>
   <p> Here are several examples of <a href="#at-rule"><i>at-rules</i></a>
    that illustrate the varied syntax they may contain.

   <pre>@import "my-styles.css";</pre>

   <p> The ‘<code class=css>@import</code>’ <a
    href="#at-rule"><i>at-rule</i></a> is a simple statement. After its name,
    it takes a single string or ‘<code class=css>url()</code>’ function
    to indicate the stylesheet that it should import.

   <pre>
@page :left {
	margin-left: 4cm;
	margin-right: 3cm;
}</pre>

   <p> The ‘<code class=css>@page</code>’ <a
    href="#at-rule"><i>at-rule</i></a> consists of an optional page selector
    (the ‘<code class=css>:left</code>’ pseudoclass), followed by a block
    of properties that apply to the page when printed. In this way, it's very
    similar to a normal <i>style rule</i>, except that its properties don't
    apply to any "element", but rather the page itself.

   <pre>
@media print {
	body { font-size: 10pt }
}</pre>

   <p> The ‘<code class=css>@media</code>’ <a
    href="#at-rule"><i>at-rule</i></a> begins with a media type and a list of
    optional media queries. Its block contains entire rules, which are only
    applied when the ‘<code class=css>@media</code>’s conditions are
    fulfilled.
  </div>

  <p> Property names and <a href="#at-rule"><i>at-rule</i></a> names are
   always <b>identifiers</b>, which have to start with a letter or a hyphen
   followed by a letter, and then can contain letters, numbers, hyphens, or
   underscores. You can include any character at all, even ones that CSS uses
   in its syntax, by escaping it with a backslash (\) or by using a
   hexadecimal escape.

  <p> The syntax of selectors is defined in the <a
   href="http://www.w3.org/TR/selectors/">Selectors spec</a>. Similarly, the
   syntax of the wide variety of CSS values is defined in the <a
   href="http://www.w3.org/TR/css3-values/">Values &amp; Units spec</a>. The
   special syntaxes of individual <a href="#at-rule"><i>at-rules</i></a> can
   be found in the specs that define them.

  <h3 id=error-handling><span class=secno>2.1. </span> Error Handling</h3>

  <p><em>This section is not normative.</em>

  <p> When errors occur in CSS, the parser attempts to recover gracefully,
   throwing away only the minimum amount of content before returning to
   parsing as normal. This is because errors aren't always mistakes - new
   syntax looks like an error to an old parser, and it's useful to be able to
   add new syntax to the language without worrying about stylesheets that
   include it being completely broken in older UAs.

  <p> The precise error-recovery behavior is detailed in the parser itself,
   but it's simple enough that a short description is fairly accurate:

  <ul>
   <li> At the "top level" of a stylesheet, an 〈at-keyword〉 starts an
    at-rule. Anything else starts a qualified rule, and is included in the
    rule's prelude. This may produce an invalid selector, but that's not the
    concern of the CSS parser — at worst, it means the selector will match
    nothing.

   <li> Once an at-rule starts, nothing is invalid from the parser's
    standpoint; it's all part of the at-rule's prelude. Encountering a
    semicolon 〈;〉 ends the at-rule immediately, while encountering an
    opening curly-brace 〈{〉 starts the at-rule's body. The at-rule seeks
    forward, matching blocks (content surrounded by (), {}, or []) until it
    finds a closing curly-brace 〈}〉 that isn't matched by anything else
    or inside of another block. The contents of the at-rule are then
    interpreted according to the at-rule's own grammar.

   <li> Qualified rules work similarly, except that semicolons don't end
    them; instead, they are just taken in as part of the rule's prelude. When
    the first {} block is found, the contents are always interpreted as a
    list of declarations.

   <li> When interpreting a list of declarations, unknown syntax at any point
    causes the parser to throw away whatever declaration it's currently
    building, and seek forward until it finds a semicolon (or the end of the
    block). It then starts fresh, trying to parse a declaration again.

   <li> If the stylesheet ends while any rule, declaration, function, string,
    etc. are still open, everything is automatically closed. This doesn't
    make them invalid, though they may be incomplete and thus thrown away
    when they are verified against their grammar.
  </ul>

  <h2 id=tokenizing-and-parsing-css><span class=secno>3. </span> Tokenizing
   and Parsing CSS</h2>

  <p> User agents must use the parsing rules described in this specification
   to generate the CSSOM trees from text/css resources. Together, these rules
   define what is referred to as the CSS parser.

  <p> This specification defines the parsing rules for CSS documents, whether
   they are syntactically correct or not. Certain points in the parsing
   algorithm are said to be a <dfn id=parse-errors title="parse error">parse
   errors</dfn>. The error handling for parse errors is well-defined: user
   agents must either act as described below when encountering such problems,
   or must abort processing at the first error that they encounter for which
   they do not wish to apply the rules described below.

  <p> Conformance checkers must report at least one parse error condition to
   the user if one or more parse error conditions exist in the document and
   must not report parse error conditions if none exist in the document.
   Conformance checkers may report more than one parse error condition if
   more than one parse error condition exists in the document. Conformance
   checkers are not required to recover from parse errors, but if they do,
   they must recover in the same way as user agents.

  <h3 id=overview-of-the-parsing-model><span class=secno>3.1. </span>
   Overview of the Parsing Model</h3>

  <p> The input to the CSS parsing process consists of a stream of Unicode
   code points, which is passed through a tokenization stage followed by a
   tree construction stage. The output is a CSSStyleSheet object.

  <p class=note> Implementations that do not support scripting do not have to
   actually create a CSSOM CSSStyleSheet object, but the CSSOM tree in such
   cases is still used as the model for the rest of the specification.

  <h3 id=the-input-byte-stream><span class=secno>3.2. </span> The input byte
   stream</h3>

  <p> The stream of Unicode code points that comprises the input to the
   tokenization stage may be initially seen by the user agent as a stream of
   bytes (typically coming over the network or from the local file system).
   The bytes encode the actual characters according to a particular character
   encoding, which the user agent must use to decode the bytes into
   characters.

  <p> To decode the stream of bytes into a stream of characters, UAs must
   follow these steps.

  <p> The algorithms to <a
   href="http://encoding.spec.whatwg.org/#concept-encoding-get"><dfn
   id=get-an-encoding>get an encoding</dfn></a> and <a
   href="http://encoding.spec.whatwg.org/#decode"><dfn
   id=decode>decode</dfn></a> are defined in the <a
   href="http://encoding.spec.whatwg.org/">Encoding Standard</a>.

  <p> First, determine the fallback encoding:

  <ol>
   <li> If HTTP or equivalent protocol defines an encoding (e.g. via the
    charset parameter of the Content-Type header), <a
    href="#get-an-encoding"><i>get an encoding</i></a> for the specified
    value. If that does not return failure, use the return value as the
    fallback encoding.

   <li> Otherwise, check the byte stream. If the first several bytes match
    the hex sequence
    <pre>40 63 68 61 72 73 65 74 20 22 (not 22)* 22 3B</pre>
    then <a href="#get-an-encoding"><i>get an encoding</i></a> for the
    sequence of <code>(not 22)*</code> bytes, decoded per
    <code>windows-1252</code>.
    <p class=note> Note: Anything ASCII-compatible will do, so using
     <code>windows-1252</code> is fine.

    <p class=note> Note: The byte sequence above, when decoded as ASCII, is
     the string "<code>@charset "…";</code>", where the "…" is the
     sequence of bytes corresponding to the encoding's name.

    <p> If the return value was <code>utf-16</code> or <code>utf-16be</code>,
     use <code>utf-8</code> as the fallback encoding; if it was anything else
     except failure, use the return value as the fallback encoding.

    <p class=note> This mimics HTML <code>&lt;meta></code> behavior.

   <li> Otherwise, <a href="#get-an-encoding"><i>get an encoding</i></a> for
    the value of the <code>charset</code> attribute on the
    <code>&lt;link></code> element or <code>&lt;?xml-stylesheet?></code>
    processing instruction that caused the style sheet to be included, if
    any. If that does not return failure, use the return value as the
    fallback encoding.

   <li> Otherwise, if the referring style sheet or document has an encoding,
    use that as the fallback encoding.

   <li> Otherwise, use <code>utf-8</code> as the fallback encoding.
  </ol>

  <p> Then, <a href="#decode"><i>decode</i></a> the byte stream using the
   fallback encoding.

  <p class=note> Note: the <a href="#decode"><i>decode</i></a> algorithm lets
   the byte order mark (BOM) take precedence, hence the usage of the term
   "fallback" above.

  <p class=issue> Anne says that steps 3/4 should be an input to this
   algorithm from the specs that define importing stylesheet, to make the
   algorithm as a whole cleaner. Perhaps abstract it into the concept of an
   "environment charset" or something?

  <p class=issue> Should we only take the charset from the referring document
   if it's same-origin?

  <h3 id=preprocessing-the-input-stream><span class=secno>3.3. </span>
   Preprocessing the input stream</h3>

  <p> The input stream consists of the characters (individual unicode
   code-points) pushed into it as the input byte stream is decoded.

  <p> Before sending the input stream to the tokenizer, implementations must
   make the following character substitutions:

  <ul>
   <li> Replace any U+000D CARRIAGE RETURN (CR) characters, U+000C FORM FEED
    (FF) characters, or pairs of U+000D CARRIAGE RETURN (CR) followed by
    U+000A LINE FEED (LF) by a single U+000A LINE FEED (LF) character.

   <li> Replace any U+0000 NULL characters with U+FFFD REPLACEMENT CHARACTER
    (�).
  </ul>

  <h2 id=tokenization><span class=secno>4. </span> Tokenization</h2>

  <p> Implementations must act as if they used the following algorithms to
   tokenize CSS. To transform a stream of characters into a stream of tokens,
   repeatedly <a href="#consume-a-token0"><i>consume a token</i></a> until an
   〈EOF〉 is encountered, collecting the returned tokens into a stream.
   Each call to the <a href="#consume-a-token0"><i>consume a token</i></a>
   algorithm returns a single token, so it can also be used "on-demand" to
   tokenize a stream of characters <em>during</em> parsing, if so desired.

  <p> The output of the tokenization step is a stream of zero or more of the
   following tokens: 〈ident〉, 〈function〉, 〈at-keyword〉,
   〈hash〉, 〈string〉, 〈bad-string〉, 〈url〉, 〈bad-url〉,
   〈delim〉, 〈number〉, 〈percentage〉, 〈dimension〉,
   〈unicode-range〉, 〈include-match〉, 〈dash-match〉,
   〈prefix-match〉, 〈suffix-match〉, 〈substring-match〉,
   〈column〉, 〈whitespace〉, 〈CDO〉, 〈CDC〉, 〈colon〉,
   〈semicolon〉, 〈comma〉, 〈[〉, 〈]〉, 〈(〉, 〈)〉, 〈{〉,
   and 〈}〉.

  <ul>
   <li> 〈ident〉, 〈function〉, 〈at-keyword〉, 〈hash〉,
    〈string〉, and 〈url〉 tokens have a value composed of zero or more
    characters. Additionally, hash tokens have a type flag set to either "id"
    or "unrestricted". The type flag defaults to "unrestricted" if not
    otherwise set.

   <li> 〈delim〉 tokens have a value composed of a single character.

   <li> 〈number〉, 〈percentage〉, and 〈dimension〉 tokens have a
    representation composed of one or more character, and a numeric value.
    〈number〉 and 〈dimension〉 tokens additionally have a type flag set
    to either "integer" or "number". The type flag defaults to "integer" if
    not otherwise set. 〈dimension〉 tokens additionally have a unit
    composed of one or more characters.

   <li> 〈unicode-range〉 tokens have a range of characters.
  </ul>

  <p class=note> The type flag of hash tokens is used in the Selectors syntax
   <a href="#SELECT" rel=biblioentry>[SELECT]<!--{{SELECT}}--></a>. Only hash
   tokens with the "id" type are valid <a
   href="http://www.w3.org/TR/selectors/#id-selectors">ID selectors</a>.

  <h3 id=token-diagrams><span class=secno>4.1. </span> Token Railroad
   Diagrams</h3>

  <p> <em>This section is non-normative.</em>

  <p> This section presents an informative view of the tokenizer, in the form
   of railroad diagrams. Railroad diagrams are more compact than an explicit
   parser, but often easier to read than an regular expression.

  <p> These diagrams are <em>informative</em> and <em>incomplete</em>; they
   describe the grammar of "correct" tokens, but do not describe
   error-handling at all. They are provided solely to make it easier to get
   an intuitive grasp of the syntax of each token.

  <p> Diagrams with names between 〈〉 brackets represent tokens. The rest
   are productions referred to by other diagrams. <!--
		The "source" of these diagrams is in ./Diagrams.src.html
		The generated SVG is copied here so that JavaScript is not required
		to view the spec.
	-->

  <dl>
   <dt id=comment-diagram>comment

   <dd><svg class=railroad-diagram height=81 width=497><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 41h10"></path><g><path d="M50 41h0"></path><path
    d="M86 41h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=30></rect><text x=68 y=45>/*</text></g><path
    d="M86 41h10"></path><g><path d="M96 41h0"></path><path
    d="M400 41h0"></path><path
    d="M96 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M116 21h264"></path></g><path
    d="M380 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M96 41h20"></path><g><path d="M116 41h0"></path><path
    d="M380 41h0"></path><path d="M116 41h10"></path><g><path
    d="M126 41h0"></path><path d="M370 41h0"></path><rect height=22 width=244
    x=126 y=30></rect><text x=248 y=45>anything but * followed by
    /</text></g><path d="M370 41h10"></path><path
    d="M126 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M126 61h244"></path></g><path
    d="M370 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M380 41h20"></path></g><path d="M400 41h10"></path><g><path
    d="M410 41h0"></path><path d="M446 41h0"></path><rect height=22 rx=10
    ry=10 width=36 x=410 y=30></rect><text x=428 y=45>*/</text></g><path
    d="M446 41h10"></path><path
    d="M 456 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=newline-diagram>newline

   <dd><svg class=railroad-diagram height=152 width=173><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 31h0"></path><path d="M132 31h0"></path><path
    d="M40 31h20"></path><g><path d="M60 31h8"></path><path
    d="M104 31h8"></path><rect height=22 rx=10 ry=10 width=36 x=68
    y=20></rect><text x=86 y=35>\n</text></g><path
    d="M112 31h20"></path><path
    d="M40 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M60 61h0"></path><path d="M112 61h0"></path><rect height=22 rx=10
    ry=10 width=52 x=60 y=50></rect><text x=86 y=65>\r\n</text></g><path
    d="M112 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><path
    d="M40 31a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><g><path
    d="M60 91h8"></path><path d="M104 91h8"></path><rect height=22 rx=10
    ry=10 width=36 x=68 y=80></rect><text x=86 y=95>\r</text></g><path
    d="M112 91a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path><path
    d="M40 31a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path><g><path
    d="M60 121h8"></path><path d="M104 121h8"></path><rect height=22 rx=10
    ry=10 width=36 x=68 y=110></rect><text x=86 y=125>\f</text></g><path
    d="M112 121a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path></g><path
    d="M 132 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=whitespace-character-diagram>whitespace character

   <dd><svg class=railroad-diagram height=122 width=197><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 31h0"></path><path d="M156 31h0"></path><path
    d="M40 31h20"></path><g><path d="M60 31h8"></path><path
    d="M128 31h8"></path><rect height=22 rx=10 ry=10 width=60 x=68
    y=20></rect><text x=98 y=35>space</text></g><path
    d="M136 31h20"></path><path
    d="M40 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M60 61h20"></path><path d="M116 61h20"></path><rect height=22 rx=10
    ry=10 width=36 x=80 y=50></rect><text x=98 y=65>\t</text></g><path
    d="M136 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><path
    d="M40 31a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><g><path
    d="M60 91h0"></path><path d="M136 91h0"></path><rect height=22 width=76
    x=60 y=80></rect><text x=98 y=95>newline</text></g><path
    d="M136 91a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path></g><path
    d="M 156 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=escape-diagram>escape

   <dd><svg class=railroad-diagram height=122 width=521><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M78 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
    y=20></rect><text x=64 y=35>\</text></g><path
    d="M78 31h10"></path><g><path d="M88 31h0"></path><path
    d="M480 31h0"></path><path d="M88 31h20"></path><g><path
    d="M108 31h70"></path><path d="M390 31h70"></path><rect height=22
    width=212 x=178 y=20></rect><text x=284 y=35>not newline or hex
    digit</text></g><path d="M460 31h20"></path><path
    d="M88 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M108 61h0"></path><path d="M460 61h0"></path><path
    d="M108 61h10"></path><g><path d="M118 61h0"></path><path
    d="M230 61h0"></path><path d="M118 61h10"></path><g><path
    d="M128 61h0"></path><path d="M220 61h0"></path><rect height=22 width=92
    x=128 y=50></rect><text x=174 y=65>hex digit</text></g><path
    d="M220 61h10"></path><path
    d="M128 61a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M128 91h9.5"></path><path d="M210.5 91h9.5"></path><text class=comment
    x=174 y=96>1-6 times</text></g><path
    d="M220 91a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M230 61h10"></path><g><path d="M240 61h0"></path><path
    d="M460 61h0"></path><path d="M240 61h20"></path><g><path
    d="M260 61h180"></path></g><path d="M440 61h20"></path><path
    d="M240 61a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M260 81h0"></path><path d="M440 81h0"></path><rect height=22 width=180
    x=260 y=70></rect><text x=350 y=85>whitespace character</text></g><path
    d="M440 81a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g></g><path
    d="M460 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
    d="M 480 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈whitespace〉-diagram">〈whitespace〉

   <dd><svg class=railroad-diagram height=71 width=301><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M250 31h0"></path><path d="M50 31h10"></path><g><path
    d="M60 31h0"></path><path d="M240 31h0"></path><rect height=22 width=180
    x=60 y=20></rect><text x=150 y=35>whitespace character</text></g><path
    d="M240 31h10"></path><path
    d="M60 31a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M60 51h180"></path></g><path
    d="M240 51a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M250 31h10"></path><path
    d="M 260 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈ident〉-diagram">〈ident〉

   <dd><svg class=railroad-diagram height=110 width=729><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 41h0"></path><path d="M108 41h0"></path><path
    d="M40 41h20"></path><g><path d="M60 41h28"></path></g><path
    d="M88 41h20"></path><path
    d="M40 41a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M60 61h0"></path><path d="M88 61h0"></path><rect height=22 rx=10 ry=10
    width=28 x=60 y=50></rect><text x=74 y=65>-</text></g><path
    d="M88 61a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g><g><path
    d="M108 41h0"></path><path d="M344 41h0"></path><path
    d="M108 41h20"></path><g><path d="M128 41h0"></path><path
    d="M324 41h0"></path><rect height=22 width=196 x=128 y=30></rect><text
    x=226 y=45>a-z A-Z _ or non-ASCII</text></g><path
    d="M324 41h20"></path><path
    d="M108 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M128 71h64"></path><path d="M260 71h64"></path><rect height=22
    width=68 x=192 y=60></rect><text x=226 y=75>escape</text></g><path
    d="M324 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><g><path
    d="M344 41h0"></path><path d="M688 41h0"></path><path
    d="M344 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M364 21h304"></path></g><path
    d="M668 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M344 41h20"></path><g><path d="M364 41h0"></path><path
    d="M668 41h0"></path><path d="M364 41h10"></path><g><path
    d="M374 41h0"></path><path d="M658 41h0"></path><path
    d="M374 41h20"></path><g><path d="M394 41h0"></path><path
    d="M638 41h0"></path><rect height=22 width=244 x=394 y=30></rect><text
    x=516 y=45>a-z A-Z 0-9 _ - or non-ASCII</text></g><path
    d="M638 41h20"></path><path
    d="M374 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M394 71h88"></path><path d="M550 71h88"></path><rect height=22
    width=68 x=482 y=60></rect><text x=516 y=75>escape</text></g><path
    d="M638 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
    d="M658 41h10"></path><path
    d="M374 41a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path><g><path
    d="M374 90h284"></path></g><path
    d="M658 90a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path></g><path
    d="M668 41h20"></path></g><path
    d="M 688 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈function〉-diagram">〈function〉

   <dd><svg class=railroad-diagram height=62 width=225><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M126 31h0"></path><rect height=22 width=76 x=50 y=20></rect><text x=88
    y=35>〈ident〉</text></g><path d="M126 31h10"></path><path
    d="M136 31h10"></path><g><path d="M146 31h0"></path><path
    d="M174 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=146
    y=20></rect><text x=160 y=35>(</text></g><path
    d="M174 31h10"></path><path
    d="M 184 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈at-keyword〉-diagram">〈at-keyword〉

   <dd><svg class=railroad-diagram height=62 width=225><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M78 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
    y=20></rect><text x=64 y=35>@</text></g><path d="M78 31h10"></path><path
    d="M88 31h10"></path><g><path d="M98 31h0"></path><path
    d="M174 31h0"></path><rect height=22 width=76 x=98 y=20></rect><text
    x=136 y=35>〈ident〉</text></g><path d="M174 31h10"></path><path
    d="M 184 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈hash〉-diagram">〈hash〉

   <dd><svg class=railroad-diagram height=100 width=453><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M78 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
    y=20></rect><text x=64 y=35>#</text></g><path d="M78 31h10"></path><path
    d="M88 31h10"></path><g><path d="M98 31h0"></path><path
    d="M402 31h0"></path><path d="M98 31h10"></path><g><path
    d="M108 31h0"></path><path d="M392 31h0"></path><path
    d="M108 31h20"></path><g><path d="M128 31h0"></path><path
    d="M372 31h0"></path><rect height=22 width=244 x=128 y=20></rect><text
    x=250 y=35>a-z A-Z 0-9 _ - or non-ASCII</text></g><path
    d="M372 31h20"></path><path
    d="M108 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M128 61h88"></path><path d="M284 61h88"></path><rect height=22
    width=68 x=216 y=50></rect><text x=250 y=65>escape</text></g><path
    d="M372 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
    d="M392 31h10"></path><path
    d="M108 31a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path><g><path
    d="M108 80h284"></path></g><path
    d="M392 80a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path></g><path
    d="M402 31h10"></path><path
    d="M 412 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈string〉-diagram">〈string〉

   <dd><svg class=railroad-diagram height=248 width=481><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 41h0"></path><path d="M440 41h0"></path><path
    d="M40 41h20"></path><g><path d="M60 41h0"></path><path
    d="M420 41h0"></path><path d="M60 41h10"></path><g><path
    d="M70 41h0"></path><path d="M98 41h0"></path><rect height=22 rx=10 ry=10
    width=28 x=70 y=30></rect><text x=84 y=45>"</text></g><path
    d="M98 41h10"></path><g><path d="M108 41h0"></path><path
    d="M372 41h0"></path><path
    d="M108 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M128 21h224"></path></g><path
    d="M352 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M108 41h20"></path><g><path d="M128 41h0"></path><path
    d="M352 41h0"></path><path d="M128 41h10"></path><g><path
    d="M138 41h0"></path><path d="M342 41h0"></path><path
    d="M138 41h20"></path><g><path d="M158 41h0"></path><path
    d="M322 41h0"></path><rect height=22 width=164 x=158 y=30></rect><text
    x=240 y=45>not " \ or newline</text></g><path d="M322 41h20"></path><path
    d="M138 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M158 71h48"></path><path d="M274 71h48"></path><rect height=22
    width=68 x=206 y=60></rect><text x=240 y=75>escape</text></g><path
    d="M322 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><path
    d="M138 41a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><g><path
    d="M158 101h10"></path><path d="M312 101h10"></path><path
    d="M168 101h10"></path><g><path d="M178 101h0"></path><path
    d="M206 101h0"></path><rect height=22 rx=10 ry=10 width=28 x=178
    y=90></rect><text x=192 y=105>\</text></g><path
    d="M206 101h10"></path><path d="M216 101h10"></path><g><path
    d="M226 101h0"></path><path d="M302 101h0"></path><rect height=22
    width=76 x=226 y=90></rect><text x=264 y=105>newline</text></g><path
    d="M302 101h10"></path></g><path
    d="M322 101a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path></g><path
    d="M342 41h10"></path><path
    d="M138 41a10 10 0 0 0 -10 10v59a10 10 0 0 0 10 10"></path><g><path
    d="M138 120h204"></path></g><path
    d="M342 120a10 10 0 0 0 10 -10v-59a10 10 0 0 0 -10 -10"></path></g><path
    d="M352 41h20"></path></g><path d="M372 41h10"></path><g><path
    d="M382 41h0"></path><path d="M410 41h0"></path><rect height=22 rx=10
    ry=10 width=28 x=382 y=30></rect><text x=396 y=45>"</text></g><path
    d="M410 41h10"></path></g><path d="M420 41h20"></path><path
    d="M40 41a10 10 0 0 1 10 10v88a10 10 0 0 0 10 10"></path><g><path
    d="M60 149h0"></path><path d="M420 149h0"></path><path
    d="M60 149h10"></path><g><path d="M70 149h0"></path><path
    d="M98 149h0"></path><rect height=22 rx=10 ry=10 width=28 x=70
    y=138></rect><text x=84 y=153>&apos;</text></g><path
    d="M98 149h10"></path><g><path d="M108 149h0"></path><path
    d="M372 149h0"></path><path
    d="M108 149a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M128 129h224"></path></g><path
    d="M352 129a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M108 149h20"></path><g><path d="M128 149h0"></path><path
    d="M352 149h0"></path><path d="M128 149h10"></path><g><path
    d="M138 149h0"></path><path d="M342 149h0"></path><path
    d="M138 149h20"></path><g><path d="M158 149h0"></path><path
    d="M322 149h0"></path><rect height=22 width=164 x=158 y=138></rect><text
    x=240 y=153>not &apos; \ or newline</text></g><path
    d="M322 149h20"></path><path
    d="M138 149a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M158 179h48"></path><path d="M274 179h48"></path><rect height=22
    width=68 x=206 y=168></rect><text x=240 y=183>escape</text></g><path
    d="M322 179a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><path
    d="M138 149a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><g><path
    d="M158 209h10"></path><path d="M312 209h10"></path><path
    d="M168 209h10"></path><g><path d="M178 209h0"></path><path
    d="M206 209h0"></path><rect height=22 rx=10 ry=10 width=28 x=178
    y=198></rect><text x=192 y=213>\</text></g><path
    d="M206 209h10"></path><path d="M216 209h10"></path><g><path
    d="M226 209h0"></path><path d="M302 209h0"></path><rect height=22
    width=76 x=226 y=198></rect><text x=264 y=213>newline</text></g><path
    d="M302 209h10"></path></g><path
    d="M322 209a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path></g><path
    d="M342 149h10"></path><path
    d="M138 149a10 10 0 0 0 -10 10v59a10 10 0 0 0 10 10"></path><g><path
    d="M138 228h204"></path></g><path
    d="M342 228a10 10 0 0 0 10 -10v-59a10 10 0 0 0 -10 -10"></path></g><path
    d="M352 149h20"></path></g><path d="M372 149h10"></path><g><path
    d="M382 149h0"></path><path d="M410 149h0"></path><rect height=22 rx=10
    ry=10 width=28 x=382 y=138></rect><text x=396
    y=153>&apos;</text></g><path d="M410 149h10"></path></g><path
    d="M420 149a10 10 0 0 0 10 -10v-88a10 10 0 0 1 10 -10"></path></g><path
    d="M 440 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈url〉-diagram">〈url〉

   <dd><svg class=railroad-diagram height=102 width=829><g
    transform="translate(.5 .5)"><path
    d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 41h10"></path><g><path d="M50 41h0"></path><path
    d="M174 41h0"></path><rect height=22 width=124 x=50 y=30></rect><text
    x=112 y=45>〈ident "url"〉</text></g><path d="M174 41h10"></path><path
    d="M184 41h10"></path><g><path d="M194 41h0"></path><path
    d="M222 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=194
    y=30></rect><text x=208 y=45>(</text></g><path
    d="M222 41h10"></path><g><path d="M232 41h0"></path><path
    d="M388 41h0"></path><path d="M232 41h20"></path><g><path
    d="M252 41h116"></path></g><path d="M368 41h20"></path><path
    d="M232 41a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M252 61h0"></path><path d="M368 61h0"></path><rect height=22 width=116
    x=252 y=50></rect><text x=310 y=65>〈whitespace〉</text></g><path
    d="M368 61a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g><g><path
    d="M388 41h0"></path><path d="M740 41h0"></path><path
    d="M388 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M408 21h312"></path></g><path
    d="M720 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M388 41h20"></path><g><path d="M408 41h0"></path><path
    d="M720 41h0"></path><g><path d="M408 41h0"></path><path
    d="M564 41h0"></path><path d="M408 41h20"></path><g><path
    d="M428 41h0"></path><path d="M544 41h0"></path><rect height=22 width=116
    x=428 y=30></rect><text x=486 y=45>url-unquoted</text></g><path
    d="M544 41h20"></path><path
    d="M408 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M428 71h24"></path><path d="M520 71h24"></path><rect height=22
    width=68 x=452 y=60></rect><text x=486 y=75>STRING</text></g><path
    d="M544 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><g><path
    d="M564 41h0"></path><path d="M720 41h0"></path><path
    d="M564 41h20"></path><g><path d="M584 41h116"></path></g><path
    d="M700 41h20"></path><path
    d="M564 41a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M584 61h0"></path><path d="M700 61h0"></path><rect height=22 width=116
    x=584 y=50></rect><text x=642 y=65>〈whitespace〉</text></g><path
    d="M700 61a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g></g><path
    d="M720 41h20"></path></g><path d="M740 41h10"></path><g><path
    d="M750 41h0"></path><path d="M778 41h0"></path><rect height=22 rx=10
    ry=10 width=28 x=750 y=30></rect><text x=764 y=45>)</text></g><path
    d="M778 41h10"></path><path
    d="M 788 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id=url-unquoted-diagram>url-unquoted

   <dd><svg class=railroad-diagram height=100 width=509><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M458 31h0"></path><path d="M50 31h10"></path><g><path
    d="M60 31h0"></path><path d="M448 31h0"></path><path
    d="M60 31h20"></path><g><path d="M80 31h0"></path><path
    d="M428 31h0"></path><rect height=22 width=348 x=80 y=20></rect><text
    x=254 y=35>not " &apos; ( ) \ whitespace or non-printable</text></g><path
    d="M428 31h20"></path><path
    d="M60 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M80 61h140"></path><path d="M288 61h140"></path><rect height=22
    width=68 x=220 y=50></rect><text x=254 y=65>escape</text></g><path
    d="M428 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
    d="M448 31h10"></path><path
    d="M60 31a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path><g><path
    d="M60 80h388"></path></g><path
    d="M448 80a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path></g><path
    d="M458 31h10"></path><path
    d="M 468 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈number〉-diagram">〈number〉

   <dd><svg class=railroad-diagram height=179 width=713><g
    transform="translate(.5 .5)"><path
    d="M 20 50 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 60h0"></path><path d="M108 60h0"></path><path
    d="M40 60a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M60 40h0"></path><path d="M88 40h0"></path><rect height=22 rx=10 ry=10
    width=28 x=60 y=29></rect><text x=74 y=44>+</text></g><path
    d="M88 40a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M40 60h20"></path><g><path d="M60 60h28"></path></g><path
    d="M88 60h20"></path><path
    d="M40 60a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M60 80h0"></path><path d="M88 80h0"></path><rect height=22 rx=10 ry=10
    width=28 x=60 y=69></rect><text x=74 y=84>-</text></g><path
    d="M88 80a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g><g><path
    d="M108 60h0"></path><path d="M396 60h0"></path><path
    d="M108 60h20"></path><g><path d="M128 60h0"></path><path
    d="M376 60h0"></path><path d="M128 60h10"></path><g><path
    d="M138 60h0"></path><path d="M218 60h0"></path><path
    d="M138 60h10"></path><g><path d="M148 60h0"></path><path
    d="M208 60h0"></path><rect height=22 width=60 x=148 y=49></rect><text
    x=178 y=64>digit</text></g><path d="M208 60h10"></path><path
    d="M148 60a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M148 80h60"></path></g><path
    d="M208 80a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M218 60h10"></path><path d="M228 60h10"></path><g><path
    d="M238 60h0"></path><path d="M266 60h0"></path><rect height=22 rx=10
    ry=10 width=28 x=238 y=49></rect><text x=252 y=64>.</text></g><path
    d="M266 60h10"></path><path d="M276 60h10"></path><g><path
    d="M286 60h0"></path><path d="M366 60h0"></path><path
    d="M286 60h10"></path><g><path d="M296 60h0"></path><path
    d="M356 60h0"></path><rect height=22 width=60 x=296 y=49></rect><text
    x=326 y=64>digit</text></g><path d="M356 60h10"></path><path
    d="M296 60a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M296 80h60"></path></g><path
    d="M356 80a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M366 60h10"></path></g><path d="M376 60h20"></path><path
    d="M108 60a10 10 0 0 1 10 10v19a10 10 0 0 0 10 10"></path><g><path
    d="M128 99h84"></path><path d="M292 99h84"></path><path
    d="M212 99h10"></path><g><path d="M222 99h0"></path><path
    d="M282 99h0"></path><rect height=22 width=60 x=222 y=88></rect><text
    x=252 y=103>digit</text></g><path d="M282 99h10"></path><path
    d="M222 99a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M222 119h60"></path></g><path
    d="M282 119a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M376 99a10 10 0 0 0 10 -10v-19a10 10 0 0 1 10 -10"></path><path
    d="M108 60a10 10 0 0 1 10 10v58a10 10 0 0 0 10 10"></path><g><path
    d="M128 138h50"></path><path d="M326 138h50"></path><path
    d="M178 138h10"></path><g><path d="M188 138h0"></path><path
    d="M216 138h0"></path><rect height=22 rx=10 ry=10 width=28 x=188
    y=127></rect><text x=202 y=142>.</text></g><path
    d="M216 138h10"></path><path d="M226 138h10"></path><g><path
    d="M236 138h0"></path><path d="M316 138h0"></path><path
    d="M236 138h10"></path><g><path d="M246 138h0"></path><path
    d="M306 138h0"></path><rect height=22 width=60 x=246 y=127></rect><text
    x=276 y=142>digit</text></g><path d="M306 138h10"></path><path
    d="M246 138a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M246 158h60"></path></g><path
    d="M306 158a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M316 138h10"></path></g><path
    d="M376 138a10 10 0 0 0 10 -10v-58a10 10 0 0 1 10 -10"></path></g><g><path
    d="M396 60h0"></path><path d="M672 60h0"></path><path
    d="M396 60h20"></path><g><path d="M416 60h236"></path></g><path
    d="M652 60h20"></path><path
    d="M396 60a10 10 0 0 1 10 10v28a10 10 0 0 0 10 10"></path><g><path
    d="M416 108h0"></path><path d="M652 108h0"></path><g><path
    d="M416 108h0"></path><path d="M484 108h0"></path><path
    d="M416 108h20"></path><g><path d="M436 108h0"></path><path
    d="M464 108h0"></path><rect height=22 rx=10 ry=10 width=28 x=436
    y=97></rect><text x=450 y=112>e</text></g><path
    d="M464 108h20"></path><path
    d="M416 108a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M436 138h0"></path><path d="M464 138h0"></path><rect height=22 rx=10
    ry=10 width=28 x=436 y=127></rect><text x=450 y=142>E</text></g><path
    d="M464 138a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><g><path
    d="M484 108h0"></path><path d="M552 108h0"></path><path
    d="M484 108a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M504 88h0"></path><path d="M532 88h0"></path><rect height=22 rx=10
    ry=10 width=28 x=504 y=77></rect><text x=518 y=92>+</text></g><path
    d="M532 88a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M484 108h20"></path><g><path d="M504 108h28"></path></g><path
    d="M532 108h20"></path><path
    d="M484 108a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M504 128h0"></path><path d="M532 128h0"></path><rect height=22 rx=10
    ry=10 width=28 x=504 y=117></rect><text x=518 y=132>-</text></g><path
    d="M532 128a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path></g><path
    d="M552 108h10"></path><g><path d="M562 108h0"></path><path
    d="M642 108h0"></path><path d="M562 108h10"></path><g><path
    d="M572 108h0"></path><path d="M632 108h0"></path><rect height=22
    width=60 x=572 y=97></rect><text x=602 y=112>digit</text></g><path
    d="M632 108h10"></path><path
    d="M572 108a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
    d="M572 128h60"></path></g><path
    d="M632 128a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
    d="M642 108h10"></path></g><path
    d="M652 108a10 10 0 0 0 10 -10v-28a10 10 0 0 1 10 -10"></path></g><path
    d="M 672 60 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈dimension〉-diagram">〈dimension〉

   <dd><svg class=railroad-diagram height=62 width=281><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M134 31h0"></path><rect height=22 width=84 x=50 y=20></rect><text x=92
    y=35>〈number〉</text></g><path d="M134 31h10"></path><path
    d="M144 31h10"></path><g><path d="M154 31h0"></path><path
    d="M230 31h0"></path><rect height=22 width=76 x=154 y=20></rect><text
    x=192 y=35>〈ident〉</text></g><path d="M230 31h10"></path><path
    d="M 240 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈percentage〉-diagram">〈percentage〉

   <dd><svg class=railroad-diagram height=62 width=233><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M134 31h0"></path><rect height=22 width=84 x=50 y=20></rect><text x=92
    y=35>〈number〉</text></g><path d="M134 31h10"></path><path
    d="M144 31h10"></path><g><path d="M154 31h0"></path><path
    d="M182 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=154
    y=20></rect><text x=168 y=35>%</text></g><path
    d="M182 31h10"></path><path
    d="M 192 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈unicode-range〉-diagram">〈unicode-range〉

   <dd><svg class=railroad-diagram height=222 width=600><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
    d="M40 31h0"></path><path d="M108 31h0"></path><path
    d="M40 31h20"></path><g><path d="M60 31h0"></path><path
    d="M88 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=60
    y=20></rect><text x=74 y=35>U</text></g><path d="M88 31h20"></path><path
    d="M40 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M60 61h0"></path><path d="M88 61h0"></path><rect height=22 rx=10 ry=10
    width=28 x=60 y=50></rect><text x=74 y=65>u</text></g><path
    d="M88 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
    d="M108 31h10"></path><g><path d="M118 31h0"></path><path
    d="M146 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=118
    y=20></rect><text x=132 y=35>+</text></g><path
    d="M146 31h10"></path><g><path d="M156 31h0"></path><path
    d="M559 31h0"></path><path d="M156 31h20"></path><g><path
    d="M176 31h115.5"></path><path d="M423.5 31h115.5"></path><path
    d="M291.5 31h10"></path><g><path d="M301.5 31h0"></path><path
    d="M413.5 31h0"></path><path d="M301.5 31h10"></path><g><path
    d="M311.5 31h0"></path><path d="M403.5 31h0"></path><rect height=22
    width=92 x=311.5 y=20></rect><text x=357.5 y=35>hex digit</text></g><path
    d="M403.5 31h10"></path><path
    d="M311.5 31a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M311.5 61h9.5"></path><path d="M394 61h9.5"></path><text class=comment
    x=357.5 y=66>1-6 times</text></g><path
    d="M403.5 61a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M413.5 31h10"></path></g><path d="M539 31h20"></path><path
    d="M156 31a10 10 0 0 1 10 10v50a10 10 0 0 0 10 10"></path><g><path
    d="M176 101h0"></path><path d="M539 101h0"></path><g><path
    d="M176 101h0"></path><path d="M328 101h0"></path><path
    d="M176 101a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
    d="M196 81h112"></path></g><path
    d="M308 81a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
    d="M176 101h20"></path><g><path d="M196 101h0"></path><path
    d="M308 101h0"></path><path d="M196 101h10"></path><g><path
    d="M206 101h0"></path><path d="M298 101h0"></path><rect height=22
    width=92 x=206 y=90></rect><text x=252 y=105>hex digit</text></g><path
    d="M298 101h10"></path><path
    d="M206 101a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M206 131h9.5"></path><path d="M288.5 131h9.5"></path><text
    class=comment x=252 y=136>1-5 times</text></g><path
    d="M298 131a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M308 101h20"></path></g><path d="M328 101h10"></path><g><path
    d="M338 101h0"></path><path d="M529 101h0"></path><path
    d="M338 101h10"></path><g><path d="M348 101h71.5"></path><path
    d="M447.5 101h71.5"></path><rect height=22 rx=10 ry=10 width=28 x=419.5
    y=90></rect><text x=433.5 y=105>?</text></g><path
    d="M519 101h10"></path><path
    d="M348 101a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M348 131h0"></path><path d="M519 131h0"></path><text class=comment
    x=433.5 y=136>1 to (6 - digits) times</text></g><path
    d="M519 131a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M529 101h10"></path></g><path
    d="M539 101a10 10 0 0 0 10 -10v-50a10 10 0 0 1 10 -10"></path><path
    d="M156 31a10 10 0 0 1 10 10v110a10 10 0 0 0 10 10"></path><g><path
    d="M176 161h25.5"></path><path d="M513.5 161h25.5"></path><path
    d="M201.5 161h10"></path><g><path d="M211.5 161h0"></path><path
    d="M323.5 161h0"></path><path d="M211.5 161h10"></path><g><path
    d="M221.5 161h0"></path><path d="M313.5 161h0"></path><rect height=22
    width=92 x=221.5 y=150></rect><text x=267.5 y=165>hex
    digit</text></g><path d="M313.5 161h10"></path><path
    d="M221.5 161a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M221.5 191h9.5"></path><path d="M304 191h9.5"></path><text
    class=comment x=267.5 y=196>1-6 times</text></g><path
    d="M313.5 191a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M323.5 161h10"></path><path d="M333.5 161h10"></path><g><path
    d="M343.5 161h0"></path><path d="M371.5 161h0"></path><rect height=22
    rx=10 ry=10 width=28 x=343.5 y=150></rect><text x=357.5
    y=165>-</text></g><path d="M371.5 161h10"></path><path
    d="M381.5 161h10"></path><g><path d="M391.5 161h0"></path><path
    d="M503.5 161h0"></path><path d="M391.5 161h10"></path><g><path
    d="M401.5 161h0"></path><path d="M493.5 161h0"></path><rect height=22
    width=92 x=401.5 y=150></rect><text x=447.5 y=165>hex
    digit</text></g><path d="M493.5 161h10"></path><path
    d="M401.5 161a10 10 0 0 0 -10 10v10a10 10 0 0 0 10 10"></path><g><path
    d="M401.5 191h9.5"></path><path d="M484 191h9.5"></path><text
    class=comment x=447.5 y=196>1-6 times</text></g><path
    d="M493.5 191a10 10 0 0 0 10 -10v-10a10 10 0 0 0 -10 -10"></path></g><path
    d="M503.5 161h10"></path></g><path
    d="M539 161a10 10 0 0 0 10 -10v-110a10 10 0 0 1 10 -10"></path></g><path
    d="M 559 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈include-match〉-diagram">〈include-match〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>~=</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈dash-match〉-diagram">〈dash-match〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>|=</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈prefix-match〉-diagram">〈prefix-match〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>^=</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈suffix-match〉-diagram">〈suffix-match〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>$=</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈substring-match〉-diagram">〈substring-match〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>*=</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈column〉-diagram">〈column〉

   <dd><svg class=railroad-diagram height=62 width=137><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M86 31h0"></path><rect height=22 rx=10 ry=10 width=36 x=50
    y=20></rect><text x=68 y=35>||</text></g><path d="M86 31h10"></path><path
    d="M 96 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈CDO〉-diagram">〈CDO〉

   <dd><svg class=railroad-diagram height=62 width=153><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M102 31h0"></path><rect height=22 rx=10 ry=10 width=52 x=50
    y=20></rect><text x=76 y=35>&lt;!--</text></g><path
    d="M102 31h10"></path><path
    d="M 112 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

   <dt id="〈CDC〉-diagram">〈CDC〉

   <dd><svg class=railroad-diagram height=62 width=145><g
    transform="translate(.5 .5)"><path
    d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
    d="M40 31h10"></path><g><path d="M50 31h0"></path><path
    d="M94 31h0"></path><rect height=22 rx=10 ry=10 width=44 x=50
    y=20></rect><text x=72 y=35>--&gt;</text></g><path
    d="M94 31h10"></path><path
    d="M 104 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>
  </dl>

  <h3 id=definitions><span class=secno>4.2. </span> Definitions</h3>

  <p> This section defines several terms used during the tokenization phase.

  <dl>
   <dt><dfn id=next-input-character>next input character</dfn>

   <dd> The first character in the input stream that has not yet been
    consumed.

   <dt><dfn id=current-input-character>current input character</dfn>

   <dd> The last character to have been consumed.

   <dt><dfn id=reconsume-the-current-input-character>reconsume the current
    input character</dfn>

   <dd> Push the <a href="#current-input-character"><i>current input
    character</i></a> back onto the front of the input stream, so that the
    next time you are instructed to consume the next input character, it will
    instead reconsume the <a href="#current-input-character"><i>current input
    character</i></a>.

   <dt><dfn id=eof-character>EOF character</dfn>

   <dd> A conceptual character representing the end of the input stream.
    Whenever the input stream is empty, the <a
    href="#next-input-character"><i>next input character</i></a> is always an
    EOF character.

   <dt><dfn id=digit>digit</dfn>

   <dd> A character between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).

   <dt><dfn id=hex-digit>hex digit</dfn>

   <dd> A <a href="#digit"><i>digit</i></a>, or a character between U+0041
    LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F), or a
    character between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL
    LETTER F (f).

   <dt><dfn id=uppercase-letter>uppercase letter</dfn>

   <dd> A character between U+0041 LATIN CAPITAL LETTER A (A) and U+005A
    LATIN CAPITAL LETTER Z (Z).

   <dt><dfn id=lowercase-letter>lowercase letter</dfn>

   <dd> A character between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN
    SMALL LETTER Z (z).

   <dt><dfn id=letter>letter</dfn>

   <dd> An <a href="#uppercase-letter"><i>uppercase letter</i></a> or a <a
    href="#lowercase-letter"><i>lowercase letter</i></a>.

   <dt><dfn id=non-ascii-character>non-ASCII character</dfn>

   <dd> A character with a codepoint equal to or greater than U+0080
    &lt;control>.

   <dt><dfn id=name-start-character>name-start character</dfn>

   <dd> A <a href="#letter"><i>letter</i></a>, a <a
    href="#non-ascii-character"><i>non-ASCII character</i></a>, or U+005F LOW
    LINE (_).

   <dt><dfn id=name-character>name character</dfn>

   <dd> A <a href="#name-start-character"><i>name-start character</i></a>, A
    <a href="#digit"><i>digit</i></a>, or U+002D HYPHEN-MINUS (-).

   <dt><dfn id=non-printable-character>non-printable character</dfn>

   <dd> A character between U+0000 NULL and U+0008 BACKSPACE, or U+000B LINE
    TABULATION, or a character between U+000E SHIFT OUT and U+001F
    INFORMATION SEPARATOR ONE, or U+007F DELETE.

   <dt><dfn id=newline>newline</dfn>

   <dd> U+000A LINE FEED. <span class=note> Note that U+000D CARRIAGE RETURN
    and U+000C FORM FEED are not included in this definition, as they are
    converted to U+000A LINE FEED during <a
    href="#preprocessing-the-input-stream">preprocessing</a>. </span>

   <dt><dfn id=whitespace>whitespace</dfn>

   <dd>A <a href="#newline"><i>newline</i></a>, U+0009 CHARACTER TABULATION,
    or U+0020 SPACE.

   <dt><dfn id=maximum-allowed-codepoint>maximum allowed codepoint</dfn>

   <dd>The greatest codepoint defined by Unicode. This is currently U+10FFFF.
  </dl>

  <h3 id=tokenizer-algorithms><span class=secno>4.3. </span> Tokenizer
   Algorithms</h3>

  <p> The algorithms defined in this section transform a stream of characters
   into a stream of tokens.

  <h4 id=consume-a-token><span class=secno>4.3.1. </span> <dfn
   id=consume-a-token0>Consume a token</dfn></h4>

  <p> This section describes how to <a href="#consume-a-token0"><i>consume a
   token</i></a> from a stream of characters. It will return a single token
   of any type.

  <p> Consume the <a href="#next-input-character"><i>next input
   character</i></a>.

  <dl>
   <dt><a href="#whitespace"><i>whitespace</i></a>

   <dd> Consume as much <a href="#whitespace"><i>whitespace</i></a> as
    possible. Return a 〈whitespace〉.

   <dt>U+0022 QUOTATION MARK (")

   <dd> <a href="#consume-a-string-token0"><i>Consume a string token</i></a>
    with the ending character U+0022 QUOTATION MARK (") and return it.

   <dt>U+0023 NUMBER SIGN (#)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is a <a href="#name-character"><i>name
    character</i></a> or the <a href="#next-input-character"><i
    title="next input character">next two input characters</i></a> <a
    href="#check-if-two-characters-are-a-valid-esca0"><i>are a valid
    escape</i></a>, <a href="#consume-a-name0"><i>consume a name</i></a>.
    Create a 〈hash〉 with its value set to the returned string. If the
    first three characters of the 〈hash〉’s value <a
    href="#check-if-three-characters-would-start-an0"><i>would start an
    identifier</i></a>, set the 〈hash〉’s type flag to "id". Return the
    〈hash〉.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0024 DOLLAR SIGN ($)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+003D EQUALS SIGN (=), consume it and return a
    〈suffix-match〉.
    <p> Otherwise, emit a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0027 APOSTROPHE (&apos;)

   <dd> <a href="#consume-a-string-token0"><i>Consume a string token</i></a>
    with the ending character U+0027 APOSTROPHE (&apos;) and return it.

   <dt>U+0028 LEFT PARENTHESIS (()

   <dd> Return a 〈(〉.

   <dt>U+0029 RIGHT PARENTHESIS ())

   <dd> Return a 〈)〉.

   <dt>U+002A ASTERISK (*)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+003D EQUALS SIGN (=), consume it and return a
    〈substring-match〉.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+002B PLUS SIGN (+)

   <dd> If the input stream <a
    href="#check-if-three-characters-would-start-a-0"><i>starts with a
    number</i></a>, <a
    href="#reconsume-the-current-input-character"><i>reconsume the current
    input character</i></a>, <a href="#consume-a-numeric-token0"><i>consume a
    numeric token</i></a> and return it.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+002C COMMA (,)

   <dd> Return a 〈comma〉.

   <dt>U+002D HYPHEN-MINUS (-)

   <dd> If the input stream <a
    href="#check-if-three-characters-would-start-a-0"><i>starts with a
    number</i></a>, <a
    href="#reconsume-the-current-input-character"><i>reconsume the current
    input character</i></a>, <a href="#consume-a-numeric-token0"><i>consume a
    numeric token</i></a>, and return it.
    <p> Otherwise, if the input stream <a
     href="#check-if-three-characters-would-start-an0"><i>starts with an
     identifier</i></a>, <a
     href="#reconsume-the-current-input-character"><i>reconsume the current
     input character</i></a>, <a href="#consume-a-name0"><i>consume a
     name</i></a>, create an 〈ident〉 with its value set to the returned
     value, and return it.

    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 2 input characters</i></a> are U+002D
     HYPHEN-MINUS U+003E GREATER-THAN SIGN (->), consume them and return a
     〈CDC〉.

    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+002E FULL STOP (.)

   <dd> If the input stream <a
    href="#check-if-three-characters-would-start-a-0"><i>starts with a
    number</i></a>, <a
    href="#reconsume-the-current-input-character"><i>reconsume the current
    input character</i></a>, <a href="#consume-a-numeric-token0"><i>consume a
    numeric token</i></a>, and return it.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+002F SOLIDUS (/)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+002A ASTERISK (*), consume it and all following
    characters up to and including the first U+002A ASTERISK (*) followed by
    a U+002F SOLIDUS (/), or up to an EOF character. Then <a
    href="#consume-a-token0"><i>consume a token</i></a> and return it.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+003A COLON (:)

   <dd> Return a 〈colon〉.

   <dt>U+003B SEMICOLON (;)

   <dd> Return a 〈semicolon〉.

   <dt>U+003C LESS-THAN SIGN (&lt;)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 3 input characters</i></a> are U+0021
    EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), consume
    them and return a 〈CDO〉.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+0040 COMMERCIAL AT (@)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 3 input characters</i></a> <a
    href="#check-if-three-characters-would-start-an0"><i>would start an
    identifier</i></a>, <a href="#consume-a-name0"><i>consume a name</i></a>,
    create an 〈at-keyword〉 with its value set to the returned value, and
    return it.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+005B LEFT SQUARE BRACKET ([)

   <dd> Return a 〈[〉.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the input stream <a
    href="#check-if-two-characters-are-a-valid-esca0"><i>starts with a valid
    escape</i></a>, <a
    href="#reconsume-the-current-input-character"><i>reconsume the current
    input character</i></a>, <a href="#consume-a-name0"><i>consume a
    name</i></a>, create an 〈ident〉 with its value set to the returned
    value, and return it.
    <p> Otherwise, this is a <a href="#parse-errors"><i>parse error</i></a>.
     Return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+005D RIGHT SQUARE BRACKET (])

   <dd> Return a 〈]〉.

   <dt>U+005E CIRCUMFLEX ACCENT (^)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+003D EQUALS SIGN (=), consume it and return a
    〈prefix-match〉.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+007B LEFT CURLY BRACKET ({)

   <dd> Return a 〈{〉.

   <dt>U+007D RIGHT CURLY BRACKET (})

   <dd> Return a 〈}〉.

   <dt><a href="#digit"><i>digit</i></a>

   <dd> <a href="#consume-a-numeric-token0"><i>Consume a numeric
    token</i></a>, and return it.

   <dt>U+0055 LATIN CAPITAL LETTER U (U)

   <dt>U+0075 LATIN SMALL LETTER U (u)

   <dd> If the <a href="#next-input-character"><i
    title="next input character">next 2 input character</i></a> are U+002B
    PLUS SIGN (+) followed by a <a href="#hex-digit"><i>hex digit</i></a> or
    U+003F QUESTION MARK (?), consume the <a
    href="#next-input-character"><i>next input character</i></a>. <span
    class=note>Note: don't consume both of them.</span> <a
    href="#consume-a-unicode-range-token0"><i>Consume a unicode-range
    token</i></a> and return it.
    <p> Otherwise, if the <a href="#next-input-character"><i
     title="next input character">next 3 input characters</i></a> are an
     <i>ASCII case-insensitive match</i> for "url(", consume them, <a
     href="#consume-a-url-token"><i>consume a url token</i></a>, and return
     it.

    <p> Otherwise, <a
     href="#reconsume-the-current-input-character"><i>reconsume the current
     input character</i></a>, <a href="#consume-a-name0"><i>consume a
     name</i></a>, create an 〈ident〉 with its value set to the returned
     value, and return it.

   <dt><a href="#name-start-character"><i>name-start character</i></a>

   <dd> <a href="#reconsume-the-current-input-character"><i>Reconsume the
    current input character</i></a>, <a href="#consume-a-name0"><i>consume a
    name</i></a>, create an 〈ident〉 with its value set to the returned
    value, and return it.

   <dt>U+007C VERTICAL LINE (|)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+003D EQUALS SIGN (=), consume it and return a
    〈dash-match〉.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is U+0073 VERTICAL LINE (|), consume it and return a
     〈column〉.

    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>U+007E TILDE (~)

   <dd> If the <a href="#next-input-character"><i>next input
    character</i></a> is U+003D EQUALS SIGN (=), consume it and return an
    〈include-match〉.
    <p> Otherwise, return a 〈delim〉 with its value set to the <a
     href="#current-input-character"><i>current input character</i></a>.

   <dt>EOF

   <dd> Return an 〈EOF〉 token.

   <dt>anything else

   <dd> Return a 〈delim〉 with its value set to the <a
    href="#current-input-character"><i>current input character</i></a>.
  </dl>

  <h4 id=consume-a-numeric-token><span class=secno>4.3.2. </span> <dfn
   id=consume-a-numeric-token0>Consume a numeric token</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-numeric-token0"><i>consume a numeric token</i></a> from a
   stream of characters. It returns either a 〈number〉, 〈percentage〉,
   or 〈dimension〉.

  <p> <a href="#consume-a-number0"><i>Consume a number</i></a>.

  <p> If the <a href="#next-input-character"><i
   title="next input character">next 3 input characters</i></a> <a
   href="#check-if-three-characters-would-start-an0"><i>would start an
   identifier</i></a>, then:

  <ol>
   <li>Create a 〈dimension〉 with the same representation, value, and type
    flag as the returned number, and a unit set initially to the empty
    string.

   <li><a href="#consume-a-name0"><i>Consume a name</i></a>. Set the
    〈dimension〉’s unit to the returned value.

   <li>Return the 〈dimension〉.
  </ol>

  <p> Otherwise, if the <a href="#next-input-character"><i>next input
   character</i></a> is U+0025 PERCENTAGE SIGN (%), consume it. Create a
   〈percentage〉 with the same representation and value as the returned
   number, and return it.

  <p> Otherwise, create a 〈number〉 with the same representation, value,
   and type flag as the returned number, and return it.

  <h4 id=consume-a-string-token><span class=secno>4.3.3. </span> <dfn
   id=consume-a-string-token0>Consume a string token</dfn></h4>

  <p> This section describes how to <a
   href="#consume-a-string-token0"><i>consume a string token</i></a> from a
   stream of characters. It returns either a 〈string〉 or
   〈bad-string〉.

  <p> This algorithm must be called with an <var>ending character</var>,
   which denotes the character that ends the string.

  <p> Initially create a 〈string〉 with its value set to the empty string.

  <p> Repeatedly consume the <a href="#next-input-character"><i>next input
   character</i></a> from the stream:

  <dl>
   <dt><var>ending character</var>

   <dt>EOF

   <dd> Return the 〈string〉.

   <dt><a href="#newline"><i>newline</i></a>

   <dd> This is a <a href="#parse-errors"><i>parse error</i></a>. Create a
    〈bad-string〉 and return it.

   <dt>U+005C REVERSE SOLIDUS (\)

   <dd> If the stream <a
    href="#check-if-two-characters-are-a-valid-esca0"><i>starts with a valid
    escape</i></a>, <a href="#consume-an-escaped-character0"><i>consume an
    escaped character</i></a> and append the returned character to the
    〈string〉’s value.
    <p> Otherwise, if the <a href="#next-input-character"><i>next input
     character</i></a> is a newline, consume it.

    <p> Otherwise, this is a <a href="#parse-errors"><i>parse error</i></a>.
     Create a 〈bad-string〉 and return it.

   <dt>anything else

   <dd> Append the <a href="#current-input-character"><i>current input
    character</i></a> to the 〈string〉’s value.
  </dl>

  <h4 id=consume-a-url-token-><span class=secno>4.3.4. </span> <dfn
   id=consume-a-url-token>Consume a url token</dfn></h4>

  <p> This section describes how to <a href="#consume-a-url-token"><i>consume
   a url token</i></a> from a stream of characters. It returns either a
   〈url〉 or a 〈bad-url〉.

  <p class=note> This algorithm assumes that the initial "url(" has already
   been consumed.

  <p> Execute the following steps in order:

  <ol>
   <li> Initially create a 〈url〉 with its value set to the empty string.

   <li> Consume as much <a href="#whitespace"><i>whitespace</i></a> as
    possible.

   <li> If the <a href="#next-input-character"><i>next input
    character</i></a> is EOF, create a 〈bad-url〉 and return it.

   <li> If the <a href="#next-input-character"><i>next input
    character</i></a> is a U+0022 QUOTATION MARK (") or U+0027 APOSTROPHE
    (&apos;), then:
    <ol>
     <li> <a href="#consume-a-string-token0"><i>Consume a string
      token</i></a> with the <a href="#current-input-character"><i>current
      input character</i></a> as the ending character.

     <li> If a 〈bad-string〉 was returned, <a
      href="#consume-the-remnants-of-a-bad-url0"><i>consume the remnants of a
      bad url</i></a>, create a 〈bad-url〉, and return it.

     <li> Set the 〈url〉’s value to the returned 〈string〉’s value.

     <li> Consume as much <a href="#whitespace"><i>whitespace</i></a> as
      possible.

     <li> If the <a href="#next-input-character"><i>next input
      character</i></a> is U+0029 RIGHT PARENTHESIS ()) or EOF, consume it
      and return the 〈url〉; otherwise, <a
      href="#consume-the-remnants-of-a-bad-url0"><i>consume the remnants of a
      bad url</i></a>, create a 〈bad-url〉, and return it.
    </ol>

   <li> Repeatedly consume the <a href="#next-input-character"><i>next input
    character</i></a> from the stream:
    <dl>
     <dt>U+0029 RIGHT PARENTHESIS ())

     <dt>EOF

     <dd> Return the 〈url〉.

     <dt><a href="#whitespace"><i>whitespace</i></a>

     <dd> Consume as much <a href="#whitespace"><i>whitespace</i></a> as
      possible. If the <a href="#next-input-character"><i>next input
      character</i></a> is U+0029 RIGHT PARENTHESIS ()) or EOF, consume it
      and return the 〈url〉; otherwise, <a
      href="#consume-the-remnants-of-a-bad-url0"><i>consume the remnants of a
      bad url</i></a>, create a 〈bad-url〉, and return it.

     <dt>U+0022 QUOTATION MARK (")

     <dt>U+0027 APOSTROPHE (&apos;)

     <dt>U+0028 LEFT PARENTHESIS (()

     <dt><a href="#non-printable-character"><i>non-printable
      character</i></a>

     <dd> This is a <a href="#parse-errors"><i>parse error</i></a>. <a
      href="#consume-the-remnants-of-a-bad-url0"><i>Consume the remnants of a
      bad url</i></a>, create a 〈bad-url〉, and return it.

     <dt>U+005C REVERSE SOLIDUS

     <dd> If the stream <a
      href="#check-if-two-characters-are-a-valid-esca0"><i>starts with a
      valid escape</i></a>, <a
      href="#consume-an-escaped-character0"><i>consume an escaped
      character</i></a> and append the returned character to the
      〈url〉’s value.
      <p> Otherwise, this is a <a href="#parse-errors"><i>parse
       error</i></a>. <a
       href="#consume-the-remnants-of-a-bad-url0"><i>Consume the remnants of
       a bad url</i></a>, create a 〈bad-url〉, and return it.

     <dt>anything else

     <dd> Append the <a href="#current-input-character"><i>current input
      character</i></a> to the 〈url〉’s value.
    </dl>

    <h4 id=consume-a-unicode-range-token><span class=secno>4.3.5. </span>
     <dfn id=consume-a-unicode-range-token0>Consume a unicode-range
     token</dfn></h4>

    <p> This section describes how to <a
     href="#consume-a-unicode-range-token0"><i>consume a unicode-range
     token</i></a>. It returns a 〈unicode-range〉 token.

    <p class=note> This algorithm assumes that the initial "u+" has been
     consumed, and the next character verified to be a <a
     href="#hex-digit"><i>hex digit</i></a> or a "?".

    <p> Execute the following steps in order:

    <ol>
     <li> Create a new 〈unicode-range〉 with an empty range.

     <li> Consume as many <a href="#hex-digit"><i>hex digits</i></a> as
      possible, but no more than 6. If less than 6 <a
      href="#hex-digit"><i>hex digits</i></a> were consumed, consume as many
      U+003F QUESTION MARK (?) characters as possible, but no more than
      enough to make the total of <a href="#hex-digit"><i>hex digits</i></a>
      and U+003F QUESTION MARK (?) characters equal to 6.
      <p> If any U+003F QUESTION MARK (?) characters were consumed, then:

      <ol>
       <li> Interpret the consumed characters as a hexadecimal number, with
        the U+003F QUESTION MARK (?) characters replaced by U+0030 DIGIT ZERO
        (0) characters. This is the <a href="#start-of-the-range"><i>start of
        the range</i></a>.

       <li> Interpret the consumed characters as a hexadecimal number again,
        with the U+003F QUESTION MARK (?) character replaced by U+0046 LATIN
        CAPITAL LETTER F (F) characters. This is the <a
        href="#end-of-the-range"><i>end of the range</i></a>.

       <li> <a href="#set-the-unicode-ranges-range0"><i>Set the
        〈unicode-range〉’s range</i></a>, then return it.
      </ol>

      <p> Otherwise, interpret the digits as a hexadecimal number. This is
       the <a href="#start-of-the-range"><i>start of the range</i></a>.

     <li> If the <a href="#next-input-character"><i
      title="next input character">next 2 input character</i></a> are U+002D
      HYPHEN-MINUS (-) followed by a <a href="#hex-digit"><i>hex
      digit</i></a>, then:
      <ol>
       <li>Consume the <a href="#next-input-character"><i>next input
        character</i></a>.

       <li> Consume as many <a href="#hex-digit"><i>hex digits</i></a> as
        possible, but no more than 6. Interpret the digits as a hexadecimal
        number. This is the <a href="#end-of-the-range"><i>end of the
        range</i></a>. <a href="#set-the-unicode-ranges-range0"><i>Set the
        〈unicode-range〉’s range</i></a>, then return it.
      </ol>

     <li> <a href="#set-the-unicode-ranges-range0"><i>Set the
      〈unicode-range〉’s range</i></a> and return it.
      <h4 id=consume-an-escaped-character><span class=secno>4.3.6. </span>
       <dfn id=consume-an-escaped-character0>Consume an escaped
       character</dfn></h4>

      <p> This section describes how to <a
       href="#consume-an-escaped-character0"><i>consume an escaped
       character</i></a>. It assumes that the U+005C REVERSE SOLIDUS (\) has
       already been consumed and that the next input character has already
       been verified to not be a <a href="#newline"><i>newline</i></a> or
       EOF. It will return a character.

      <p> Consume the <a href="#next-input-character"><i>next input
       character</i></a>.

      <dl>
       <dt><a href="#hex-digit"><i>hex digit</i></a>

       <dd> Consume as many <a href="#hex-digit"><i>hex digits</i></a> as
        possible, but no more than 5. <span class=note>Note that this means
        1-6 hex digits have been consumed in total.</span> If the <a
        href="#next-input-character"><i>next input character</i></a> is <a
        href="#whitespace"><i>whitespace</i></a>, consume it as well.
        Interpret the <a href="#hex-digit"><i>hex digits</i></a> as a
        hexadecimal number. If this number is zero, or is greater than the <a
        href="#maximum-allowed-codepoint"><i>maximum allowed
        codepoint</i></a>, return U+FFFD REPLACEMENT CHARACTER (�).
        Otherwise, return the character with that codepoint.

       <dt>anything else

       <dd> Return the <a href="#current-input-character"><i>current input
        character</i></a>.
      </dl>

      <h4 id=check-if-two-characters-are-a-valid-esca><span
       class=secno>4.3.7. </span> <dfn
       id=check-if-two-characters-are-a-valid-esca0
       title="check if two characters are a valid escape|are a valid escape|starts with a valid escape">Check
       if two characters are a valid escape</dfn></h4>

      <p> This section describes how to <a
       href="#check-if-two-characters-are-a-valid-esca0"><i>check if two
       characters are a valid escape</i></a>. The algorithm described here
       can be called explicitly with two characters, or can be called with
       the input stream itself. In the latter case, the two characters in
       question are the <a href="#current-input-character"><i>current input
       character</i></a> and the <a href="#next-input-character"><i>next
       input character</i></a>, in that order.

      <p class=note> This algorithm will not consume any additional
       characters.

      <p> If the first character is not U+005D REVERSE SOLIDUS (\), return
       false.

      <p> Otherwise, if the second character is a <a
       href="#newline"><i>newline</i></a> or EOF character, return false.

      <p> Otherwise, return true.

      <h4 id=check-if-three-characters-would-start-an><span
       class=secno>4.3.8. </span> <dfn
       id=check-if-three-characters-would-start-an0
       title="check if three characters would start an identifier|starts with an identifier|start with an identifier|would start an identifier">Check
       if three characters would start an identifier</dfn></h4>

      <p> This section describes how to <a
       href="#check-if-three-characters-would-start-an0"><i>check if three
       characters would start an identifier</i></a>. The algorithm described
       here can be called explicitly with three characters, or can be called
       with the input stream itself. In the latter case, the three characters
       in question are the <a href="#current-input-character"><i>current
       input character</i></a> and the <a href="#next-input-character"><i
       title="next input character">next two input characters</i></a>, in
       that order.

      <p class=note> This algorithm will not consume any additional
       characters.

      <p> Look at the first character:

      <dl>
       <dt>U+002D HYPHEN-MINUS

       <dd> If the second character is a <a
        href="#name-start-character"><i>name-start character</i></a> or the
        second and third characters <a
        href="#check-if-two-characters-are-a-valid-esca0"><i>are a valid
        escape</i></a>, return true. Otherwise, return false.

       <dt><a href="#name-start-character"><i>name-start character</i></a>

       <dd> Return true.

       <dt>U+005C REVERSE SOLIDUS (\)

       <dd> If the first and second characters <a
        href="#check-if-two-characters-are-a-valid-esca0"><i>are a valid
        escape</i></a>, return true. Otherwise, return false.
      </dl>

      <h4 id=check-if-three-characters-would-start-a-><span
       class=secno>4.3.9. </span> <dfn
       id=check-if-three-characters-would-start-a-0
       title="check if three characters would start a number|starts with a number|start with a number|would start a number">Check
       if three characters would start a number</dfn></h4>

      <p> This section describes how to <a
       href="#check-if-three-characters-would-start-a-0"><i>check if three
       characters would start a number</i></a>. The algorithm described here
       can be called explicitly with three characters, or can be called with
       the input stream itself. In the latter case, the three characters in
       question are the <a href="#current-input-character"><i>current input
       character</i></a> and the <a href="#next-input-character"><i
       title="next input character">next two input characters</i></a>, in
       that order.

      <p class=note> This algorithm will not consume any additional
       characters.

      <p> Look at the first character:

      <dl>
       <dt>U+002B PLUS SIGN (+)

       <dt>U+002D HYPHEN-MINUS (-)

       <dd> If the second character is a <a href="#digit"><i>digit</i></a>,
        return true.
        <p> Otherwise, if the second character is a U+002E FULL STOP (.) and
         the third character is a <a href="#digit"><i>digit</i></a>, return
         true.

        <p> Otherwise, return false.

       <dt>U+002E FULL STOP (.)

       <dd> If the second character is a <a href="#digit"><i>digit</i></a>,
        return true. Otherwise, return false.

       <dt><a href="#digit"><i>digit</i></a>

       <dd> Return true.

       <dt>anything else

       <dd> Return false.
      </dl>

      <h4 id=consume-a-name><span class=secno>4.3.10. </span> <dfn
       id=consume-a-name0>Consume a name</dfn></h4>

      <p> This section describes how to <a href="#consume-a-name0"><i>consume
       a name</i></a> from a stream of characters. It returns a string
       containing the largest name that can be formed from adjacent
       characters in the stream, starting from the first.

      <p class=note> This algorithm does not do the verification of the first
       few characters that are necessary to ensure the returned characters
       would constitute an 〈ident〉. If that is the intended use, ensure
       that the stream <a
       href="#check-if-three-characters-would-start-an0"><i>starts with an
       identifier</i></a> before calling this algorithm.

      <p> Let <var>result</var> initially be an empty string.

      <p> Repeatedly consume the <a href="#next-input-character"><i>next
       input character</i></a> from the stream:

      <dl>
       <dt><a href="#name-character"><i>name character</i></a>

       <dd> Append the character to <var>result</var>.

       <dt>the stream <a
        href="#check-if-two-characters-are-a-valid-esca0"><i>starts with a
        valid escape</i></a>

       <dd> <a href="#consume-an-escaped-character0"><i>Consume an escaped
        character</i></a>. Append the returned character to
        <var>result</var>.

       <dt>anything else

       <dd> Return <var>result</var>.
      </dl>

      <h4 id=consume-a-number><span class=secno>4.3.11. </span> <dfn
       id=consume-a-number0>Consume a number</dfn></h4>

      <p> This section describes how to <a
       href="#consume-a-number0"><i>consume a number</i></a> from a stream of
       characters. It returns a 3-tuple of a string representation, a numeric
       value, and a type flag which is either "integer" or "number".

      <p class=note> This algorithm does not do the verification of the first
       few characters that are necessary to ensure a number can be obtained
       from the stream. Ensure that the stream <a
       href="#check-if-three-characters-would-start-a-0"><i>starts with a
       number</i></a> before calling this algorithm.

      <p> Execute the following steps in order:

      <ol>
       <li> Initially set <var>repr</var> to the empty string and
        <var>type</var> to "integer".

       <li> If the <a href="#next-input-character"><i>next input
        character</i></a> is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-),
        consume it and append it to <var>repr</var>.

       <li> While the <a href="#next-input-character"><i>next input
        character</i></a> is a <a href="#digit"><i>digit</i></a>, consume it
        and append it to <var>repr</var>.

       <li> If the <a href="#next-input-character"><i
        title="next input character">next 2 input characters</i></a> are
        U+002E FULL STOP (.) followed by a <a href="#digit"><i>digit</i></a>,
        then:
        <ol>
         <li>Consume them.

         <li>Append them to <var>repr</var>.

         <li>Set <var>type</var> to "number".

         <li>While the <a href="#next-input-character"><i>next input
          character</i></a> is a <a href="#digit"><i>digit</i></a>, consume
          it and append it to <var>repr</var>.
        </ol>

       <li> If the <a href="#next-input-character"><i
        title="next input character">next 2 input characters</i></a> are
        U+0045 LATIN CAPITAL LETTER E (E) or U+0065 LATIN SMALL LETTER E (e)
        followed by a <a href="#digit"><i>digit</i></a>, then:
        <ol>
         <li>Consume them.

         <li>Append them to <var>repr</var>.

         <li>Set <var>type</var> to "number".

         <li>While the <a href="#next-input-character"><i>next input
          character</i></a> is a <a href="#digit"><i>digit</i></a>, consume
          it and append it to <var>repr</var>.
        </ol>

       <li> <a href="#convert-a-string-to-a-number0"><i
        title="convert a string to a number">Convert <var>repr</var> to a
        number</i></a>, and set the <var>value</var> to the returned value.

       <li> Return a 3-tuple of <var>repr</var>, <var>value</var>, and
        <var>type</var>.
      </ol>

      <h4 id=convert-a-string-to-a-number><span class=secno>4.3.12. </span>
       <dfn id=convert-a-string-to-a-number0>Convert a string to a
       number</dfn></h4>

      <p> This section describes how to <a
       href="#convert-a-string-to-a-number0"><i>convert a string to a
       number</i></a>. It returns a number.

      <p class=note> This algorithm does not do any verification to ensure
       that the string contains only a number. Ensure that the string
       contains only a valid CSS number before calling this algorithm.

      <p> Divide the string into seven components, in order from left to
       right:

      <ol>
       <li>A <b>sign</b>: a single U+002B PLUS SIGN (+) or U+002D
        HYPHEN-MINUS (-), or the empty string. Let <var>s</var> be the number
        -1 if the sign is U+002D HYPHEN-MINUS (-); otherwise, let
        <var>s</var> be the number 1.

       <li>An <b>integer part</b>: zero or more <a
        href="#digit"><i>digits</i></a>. If there is at least one digit, let
        <var>i</var> be the number formed by interpreting the digits as a
        base-10 integer; otherwise, let <var>i</var> be the number 0.

       <li>A <b>decimal point</b>: a single U+002E FULL STOP (.), or the
        empty string.

       <li>A <b>fractional part</b>: zero or more <a
        href="#digit"><i>digits</i></a>. If there is at least one digit, let
        <var>f</var> be the number formed by interpreting the digits as a
        base-10 integer and <var>d</var> be the number of digits; otherwise,
        let <var>f</var> and <var>d</var> be the number 0.

       <li>An <b>exponent indicator</b>: a single U+0045 LATIN CAPITAL LETTER
        E (E) or U+0065 LATIN SMALL LETTER E (e), or the empty string.

       <li>An <b>exponent sign</b>: a single U+002B PLUS SIGN (+) or U+002D
        HYPHEN-MINUS (-), or the empty string. Let <var>t</var> be the number
        -1 if the sign is U+002D HYPHEN-MINUS (-); otherwise, let
        <var>t</var> be the number 1.

       <li>An <b>exponent</b>: zero or more <a
        href="#digit"><i>digits</i></a>. If there is at least one digit, let
        <var>i</var> be the number formed by interpreting the digits as a
        base-10 integer; otherwise, let <var>i</var> be the number 0.
      </ol>

      <p> Return the number <code>s × (i + f·10<sup>-d</sup>) ×
       10<sup>te</sup></code>.

      <h4 id=consume-the-remnants-of-a-bad-url><span class=secno>4.3.13.
       </span> <dfn id=consume-the-remnants-of-a-bad-url0>Consume the
       remnants of a bad url</dfn></h4>

      <p> This section describes how to <a
       href="#consume-the-remnants-of-a-bad-url0"><i>consume the remnants of
       a bad url</i></a> from a stream of characters, "cleaning up" after the
       tokenizer realizes that it's in the middle of a 〈bad-url〉 rather
       than a 〈url〉. It returns nothing; its sole use is to consume
       enough of the input stream to reach a recovery point where normal
       tokenizing can resume.

      <p> Repeatedly consume the <a href="#next-input-character"><i>next
       input character</i></a> from the stream:

      <dl>
       <dt>U+0029 RIGHT PARENTHESIS ())

       <dt>EOF

       <dd> Return.

       <dt>the input stream <a
        href="#check-if-two-characters-are-a-valid-esca0"><i>starts with a
        valid escape</i></a>

       <dd> <a href="#consume-an-escaped-character0"><i>Consume an escaped
        character</i></a>.

       <dt>anything else

       <dd> Do nothing.
      </dl>

      <h4 id=set-the-unicode-ranges-range><span class=secno>4.3.14. </span>
       <dfn id=set-the-unicode-ranges-range0>Set the 〈unicode-range〉’s
       range</dfn></h4>

      <p> This section describes how to set a 〈unicode-range〉’s range
       so that the range it describes is within the supported range of
       unicode characters.

      <p> It assumes that the <dfn id=start-of-the-range>start of the
       range</dfn> has been defined, the <dfn id=end-of-the-range>end of the
       range</dfn> might be defined, and both are non-negative integers.

      <p> If the <a href="#start-of-the-range"><i>start of the range</i></a>
       is greater than the <a href="#maximum-allowed-codepoint"><i>maximum
       allowed codepoint</i></a>, the 〈unicode-range〉’s range is empty.

      <p> If the <a href="#end-of-the-range"><i>end of the range</i></a> is
       defined, and it is less than the <a
       href="#start-of-the-range"><i>start of the range</i></a>, the
       〈unicode-range〉’s range is empty.

      <p> If the <a href="#end-of-the-range"><i>end of the range</i></a> is
       not defined, the 〈unicode-range〉’s range is the single character
       whose codepoint is the <a href="#start-of-the-range"><i>start of the
       range</i></a>.

      <p> Otherwise, if the <a href="#end-of-the-range"><i>end of the
       range</i></a> is greater than the <a
       href="#maximum-allowed-codepoint"><i>maximum allowed
       codepoint</i></a>, change it to the <a
       href="#maximum-allowed-codepoint"><i>maximum allowed
       codepoint</i></a>. The 〈unicode-range〉’s range is all characters
       between the character whose codepoint is the <a
       href="#start-of-the-range"><i>start of the range</i></a> and the
       character whose codepoint is the <a href="#end-of-the-range"><i>end of
       the range</i></a>.

      <h3 id=changes-from-css-2.1-tokenizer><span class=secno>4.4. </span>
       Changes from CSS 2.1 Tokenizer</h3>

      <p> <em>This section is non-normative.</em>

      <p class=note> Note that the point of this spec is to match reality;
       changes from CSS2.1’s tokenizer are nearly always because the
       tokenizer specified something that doesn't match actual browser
       behavior, or left something unspecified. If some detail doesn't match
       browsers, please let me know as it's almost certainly unintentional.

      <ol>
       <li> The 〈prefix-match〉, 〈suffix-match〉, and
        〈substring-match〉 tokens have been imported from Selectors 3.

       <li> The BAD-URI token (now 〈bad-url〉) is "self-contained". In
        other words, once the tokenizer realizes it's in a 〈bad-url〉
        rather than a 〈url〉, it just seeks forward to look for the
        closing ), ignoring everything else. This behavior is simpler than
        treating it like a 〈function〉 and paying attention to opened
        blocks and such. Only WebKit exhibits this behavior, but it doesn't
        appear that we've gotten any compat bugs from it.

       <li> The 〈comma〉 has been added.

       <li> The 〈number〉, 〈number〉, and 〈dimension〉 tokens have
        been changed to include the preceding +/- sign as part of their value
        (rather than as a separate 〈delim〉 that needs to be manually
        handled every time the token is mentioned in other specs). The only
        consequence of this is that comments can no longer be inserted
        between the sign and the number.

       <li> Scientific notation is supported for
        numbers/percentages/dimensions to match SVG, per WG resolution.

       <li> 〈column〉 has been added, to keep Selectors parsing in
        single-token lookahead.
      </ol>
      <!--
PPPPPPPPPPPPPPPPP        AAA               RRRRRRRRRRRRRRRRR      SSSSSSSSSSSSSSS EEEEEEEEEEEEEEEEEEEEEERRRRRRRRRRRRRRRRR
P::::::::::::::::P      A:::A              R::::::::::::::::R   SS:::::::::::::::SE::::::::::::::::::::ER::::::::::::::::R
P::::::PPPPPP:::::P    A:::::A             R::::::RRRRRR:::::R S:::::SSSSSS::::::SE::::::::::::::::::::ER::::::RRRRRR:::::R
PP:::::P     P:::::P  A:::::::A            RR:::::R     R:::::RS:::::S     SSSSSSSEE::::::EEEEEEEEE::::ERR:::::R     R:::::R
	P::::P     P:::::P A:::::::::A             R::::R     R:::::RS:::::S              E:::::E       EEEEEE  R::::R     R:::::R
	P::::P     P:::::PA:::::A:::::A            R::::R     R:::::RS:::::S              E:::::E               R::::R     R:::::R
	P::::PPPPPP:::::PA:::::A A:::::A           R::::RRRRRR:::::R  S::::SSSS           E::::::EEEEEEEEEE     R::::RRRRRR:::::R
	P:::::::::::::PPA:::::A   A:::::A          R:::::::::::::RR    SS::::::SSSSS      E:::::::::::::::E     R:::::::::::::RR
	P::::PPPPPPPPP A:::::A     A:::::A         R::::RRRRRR:::::R     SSS::::::::SS    E:::::::::::::::E     R::::RRRRRR:::::R
	P::::P        A:::::AAAAAAAAA:::::A        R::::R     R:::::R       SSSSSS::::S   E::::::EEEEEEEEEE     R::::R     R:::::R
	P::::P       A:::::::::::::::::::::A       R::::R     R:::::R            S:::::S  E:::::E               R::::R     R:::::R
	P::::P      A:::::AAAAAAAAAAAAA:::::A      R::::R     R:::::R            S:::::S  E:::::E       EEEEEE  R::::R     R:::::R
PP::::::PP   A:::::A             A:::::A   RR:::::R     R:::::RSSSSSSS     S:::::SEE::::::EEEEEEEE:::::ERR:::::R     R:::::R
P::::::::P  A:::::A               A:::::A  R::::::R     R:::::RS::::::SSSSSS:::::SE::::::::::::::::::::ER::::::R     R:::::R
P::::::::P A:::::A                 A:::::A R::::::R     R:::::RS:::::::::::::::SS E::::::::::::::::::::ER::::::R     R:::::R
PPPPPPPPPPAAAAAAA                   AAAAAAARRRRRRRR     RRRRRRR SSSSSSSSSSSSSSS   EEEEEEEEEEEEEEEEEEEEEERRRRRRRR     RRRRRRR
-->

      <h2 id=parsing><span class=secno>5. </span> Parsing</h2>

      <p> The input to the parsing stage is a stream or list of tokens from
       the tokenization stage. The output depends on how the parser is
       invoked, as defined by the entry points listed later in this section.
       The parser output can consist of at-rules, qualified rules, and/or
       declarations.

      <p> The parser's output is constructed according to the fundamental
       syntax of CSS, without regards for the validity of any specific item.
       Implementations may check the validity of items as they are returned
       by the various parser algorithms and treat the algorithm as returning
       nothing if the item was invalid according to the implementation's own
       grammar knowledge, or may construct a full tree as specified and
       "clean up" afterwards by removing any invalid items.

      <p> The items that can appear in the tree are:

      <dl>
       <dt><dfn id=at-rule>at-rule</dfn>

       <dd> An at-rule has a name, a prelude consisting of a list of
        component values, and an optional block consisting of a simple {}
        block.
        <p class=note> This specification places no limits on what an
         at-rule's block may contain. Individual at-rules must define whether
         they accept a block, and if so, how to parse it (preferably using
         one of the parser algorithms or entry points defined in this
         specification).

       <dt><dfn id=qualified-rule0>qualified rule</dfn>

       <dd> A qualified rule has a prelude consisting of a list of component
        values, and a value consisting of a list of at-rules or declarations.

        <p class=note> Most qualified rules will be style rules, where the
         prelude is a selector.

       <dt><dfn id=declaration>declaration</dfn>

       <dd> A declaration has a name, a value consisting of a list of
        component values, and an <var>important</var> flag which is initially
        unset.
        <p class=issue> Should we go ahead and generalize the important flag
         to be a list of bang values? Suggested by Zack Weinburg.

        <p> Declarations are further categorized as "properties" or
         "descriptors", with the former typically appearing in <a
         href="#qualified-rule0"><i>qualified rules</i></a> and the latter
         appearing in <a href="#at-rule"><i>at-rules</i></a>. (This
         categorization does not occur at the Syntax level; instead, it is a
         product of where the declaration appears, and is defined by the
         respective specifications defining the given rule.)

       <dt><dfn id=component-value>component value</dfn>

       <dd> A component value is one of the preserved tokens, a function, or
        a simple block.

       <dt><dfn id=preserved-tokens>preserved tokens</dfn>

       <dd> Any token produced by the tokenizer except for 〈function〉s,
        〈{〉s, 〈(〉s, and 〈[〉s.
        <p class=note> The non-preserved tokens listed above are always
         consumed into higher-level objects, either functions or simple
         blocks, and so never appear in any parser output themselves.

        <p class=note> The tokens 〈}〉s, 〈)〉s, 〈]〉,
         〈bad-string〉, and 〈bad-url〉 are always parse errors, but
         they are preserved in the token stream by this specification to
         allow other specs, such as Media Queries, to define more
         fine-grainted error-handling than just dropping an entire
         declaration or block.

       <dt><dfn id=function>function</dfn>

       <dd> A function has a name and a value consisting of a list of
        component values.

       <dt><dfn id=simple-block>simple block</dfn>

       <dd> A simple block has an associated token (either a 〈[〉,
        〈(〉, or 〈{〉) and a value consisting of a list of component
        values.
      </dl>

      <h3 id=parser-diagrams><span class=secno>5.1. </span> Parser Railroad
       Diagrams</h3>

      <p> <em>This section is non-normative.</em>

      <p> This section presents an informative view of the parser, in the
       form of railroad diagrams. Railroad diagrams are more compact than a
       state-machine, but often easier to read than a regular expression.

      <p> These diagrams are <em>informative</em> and <em>incomplete</em>;
       they describe the grammar of "correct" stylesheets, but do not
       describe error-handling at all. They are provided solely to make it
       easier to get an intuitive grasp of the syntax. <!--
		The "source" of these diagrams is in ./Diagrams.src.html
		The generated SVG is copied here so that JavaScript is not required
		to view the spec.
	-->

      <dl>
       <dt id=stylesheet-diagram>Stylesheet

       <dd><svg class=railroad-diagram height=200 width=313><g
        transform="translate(.5 .5)"><path
        d="M 20 121 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
        d="M40 131h0"></path><path d="M272 131h0"></path><path
        d="M40 131a10 10 0 0 0 10 -10v-89a10 10 0 0 1 10 -10"></path><g><path
        d="M60 22h192"></path></g><path
        d="M252 22a10 10 0 0 1 10 10v89a10 10 0 0 0 10 10"></path><path
        d="M40 131h20"></path><g><path d="M60 131h0"></path><path
        d="M252 131h0"></path><path d="M60 131h10"></path><g><path
        d="M70 131h0"></path><path d="M242 131h0"></path><path
        d="M70 131a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><g><path
        d="M90 101h8"></path><path d="M214 101h8"></path><rect height=22
        width=116 x=98 y=90></rect><text x=156
        y=105>〈whitespace〉</text></g><path
        d="M222 101a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><path
        d="M70 131a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path><g><path
        d="M90 71h36"></path><path d="M186 71h36"></path><rect height=22
        width=60 x=126 y=60></rect><text x=156 y=75>〈CDC〉</text></g><path
        d="M222 71a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><path
        d="M70 131a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path><g><path
        d="M90 41h36"></path><path d="M186 41h36"></path><rect height=22
        width=60 x=126 y=30></rect><text x=156 y=45>〈CDO〉</text></g><path
        d="M222 41a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path><path
        d="M70 131h20"></path><g><path d="M90 131h0"></path><path
        d="M222 131h0"></path><rect height=22 width=132 x=90
        y=120></rect><text x=156 y=135>Qualified rule</text></g><path
        d="M222 131h20"></path><path
        d="M70 131a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
        d="M90 161h28"></path><path d="M194 161h28"></path><rect height=22
        width=76 x=118 y=150></rect><text x=156 y=165>At-rule</text></g><path
        d="M222 161a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
        d="M242 131h10"></path><path
        d="M70 131a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path><g><path
        d="M70 180h172"></path></g><path
        d="M242 180a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path></g><path
        d="M252 131h20"></path></g><path
        d="M 272 131 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=rule-list-diagram>Rule list

       <dd><svg class=railroad-diagram height=140 width=313><g
        transform="translate(.5 .5)"><path
        d="M 20 61 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
        d="M40 71h0"></path><path d="M272 71h0"></path><path
        d="M40 71a10 10 0 0 0 10 -10v-29a10 10 0 0 1 10 -10"></path><g><path
        d="M60 22h192"></path></g><path
        d="M252 22a10 10 0 0 1 10 10v29a10 10 0 0 0 10 10"></path><path
        d="M40 71h20"></path><g><path d="M60 71h0"></path><path
        d="M252 71h0"></path><path d="M60 71h10"></path><g><path
        d="M70 71h0"></path><path d="M242 71h0"></path><path
        d="M70 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><g><path
        d="M90 41h8"></path><path d="M214 41h8"></path><rect height=22
        width=116 x=98 y=30></rect><text x=156
        y=45>〈whitespace〉</text></g><path
        d="M222 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><path
        d="M70 71h20"></path><g><path d="M90 71h0"></path><path
        d="M222 71h0"></path><rect height=22 width=132 x=90 y=60></rect><text
        x=156 y=75>Qualified rule</text></g><path d="M222 71h20"></path><path
        d="M70 71a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
        d="M90 101h28"></path><path d="M194 101h28"></path><rect height=22
        width=76 x=118 y=90></rect><text x=156 y=105>At-rule</text></g><path
        d="M222 101a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
        d="M242 71h10"></path><path
        d="M70 71a10 10 0 0 0 -10 10v29a10 10 0 0 0 10 10"></path><g><path
        d="M70 120h172"></path></g><path
        d="M242 120a10 10 0 0 0 10 -10v-29a10 10 0 0 0 -10 -10"></path></g><path
        d="M252 71h20"></path></g><path
        d="M 272 71 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=at-rule-diagram>At-rule

       <dd><svg class=railroad-diagram height=102 width=541><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M166 41h0"></path><rect height=22 width=116 x=50 y=30></rect><text
        x=108 y=45>〈at-keyword〉</text></g><path
        d="M166 41h10"></path><g><path d="M176 41h0"></path><path
        d="M376 41h0"></path><path
        d="M176 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M196 21h160"></path></g><path
        d="M356 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M176 41h20"></path><g><path d="M196 41h0"></path><path
        d="M356 41h0"></path><path d="M196 41h10"></path><g><path
        d="M206 41h0"></path><path d="M346 41h0"></path><rect height=22
        width=140 x=206 y=30></rect><text x=276 y=45>Component
        value</text></g><path d="M346 41h10"></path><path
        d="M206 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M206 61h140"></path></g><path
        d="M346 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M356 41h20"></path></g><g><path d="M376 41h0"></path><path
        d="M500 41h0"></path><path d="M376 41h20"></path><g><path
        d="M396 41h0"></path><path d="M480 41h0"></path><rect height=22
        width=84 x=396 y=30></rect><text x=438 y=45>{} block</text></g><path
        d="M480 41h20"></path><path
        d="M376 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
        d="M396 71h28"></path><path d="M452 71h28"></path><rect height=22
        rx=10 ry=10 width=28 x=424 y=60></rect><text x=438
        y=75>;</text></g><path
        d="M480 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
        d="M 500 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=qualified-rule-diagram>Qualified rule

       <dd><svg class=railroad-diagram height=81 width=545><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
        d="M40 41h0"></path><path d="M240 41h0"></path><path
        d="M40 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M60 21h160"></path></g><path
        d="M220 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M40 41h20"></path><g><path d="M60 41h0"></path><path
        d="M220 41h0"></path><path d="M60 41h10"></path><g><path
        d="M70 41h0"></path><path d="M210 41h0"></path><rect height=22
        width=140 x=70 y=30></rect><text x=140 y=45>Component
        value</text></g><path d="M210 41h10"></path><path
        d="M70 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M70 61h140"></path></g><path
        d="M210 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M220 41h20"></path></g><path d="M240 41h10"></path><g><path
        d="M250 41h0"></path><path d="M278 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=250 y=30></rect><text x=264 y=45>{</text></g><path
        d="M278 41h10"></path><path d="M288 41h10"></path><g><path
        d="M298 41h0"></path><path d="M446 41h0"></path><rect height=22
        width=148 x=298 y=30></rect><text x=372 y=45>Declaration
        list</text></g><path d="M446 41h10"></path><path
        d="M456 41h10"></path><g><path d="M466 41h0"></path><path
        d="M494 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=466
        y=30></rect><text x=480 y=45>}</text></g><path
        d="M494 41h10"></path><path
        d="M 504 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=declaration-list-diagram>Declaration list

       <dd><svg class=railroad-diagram height=102 width=589><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M94 41h0"></path><rect height=22 width=44 x=50 y=30></rect><text
        x=72 y=45>ws*</text></g><path d="M94 41h10"></path><g><path
        d="M104 41h0"></path><path d="M548 41h0"></path><path
        d="M104 41h20"></path><g><path d="M124 41h0"></path><path
        d="M528 41h0"></path><g><path d="M124 41h0"></path><path
        d="M272 41h0"></path><path
        d="M124 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M144 21h108"></path></g><path
        d="M252 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M124 41h20"></path><g><path d="M144 41h0"></path><path
        d="M252 41h0"></path><rect height=22 width=108 x=144
        y=30></rect><text x=198 y=45>Declaration</text></g><path
        d="M252 41h20"></path></g><g><path d="M272 41h0"></path><path
        d="M528 41h0"></path><path
        d="M272 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M292 21h216"></path></g><path
        d="M508 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M272 41h20"></path><g><path d="M292 41h0"></path><path
        d="M508 41h0"></path><path d="M292 41h10"></path><g><path
        d="M302 41h0"></path><path d="M330 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=302 y=30></rect><text x=316 y=45>;</text></g><path
        d="M330 41h10"></path><path d="M340 41h10"></path><g><path
        d="M350 41h0"></path><path d="M498 41h0"></path><rect height=22
        width=148 x=350 y=30></rect><text x=424 y=45>Declaration
        list</text></g><path d="M498 41h10"></path></g><path
        d="M508 41h20"></path></g></g><path d="M528 41h20"></path><path
        d="M104 41a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
        d="M124 71h70"></path><path d="M458 71h70"></path><path
        d="M194 71h10"></path><g><path d="M204 71h0"></path><path
        d="M280 71h0"></path><rect height=22 width=76 x=204 y=60></rect><text
        x=242 y=75>At-rule</text></g><path d="M280 71h10"></path><path
        d="M290 71h10"></path><g><path d="M300 71h0"></path><path
        d="M448 71h0"></path><rect height=22 width=148 x=300
        y=60></rect><text x=374 y=75>Declaration list</text></g><path
        d="M448 71h10"></path></g><path
        d="M528 71a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path></g><path
        d="M 548 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=declaration-diagram>Declaration

       <dd><svg class=railroad-diagram height=81 width=629><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M126 41h0"></path><rect height=22 width=76 x=50 y=30></rect><text
        x=88 y=45>〈ident〉</text></g><path d="M126 41h10"></path><path
        d="M136 41h10"></path><g><path d="M146 41h0"></path><path
        d="M190 41h0"></path><rect height=22 width=44 x=146 y=30></rect><text
        x=168 y=45>ws*</text></g><path d="M190 41h10"></path><path
        d="M200 41h10"></path><g><path d="M210 41h0"></path><path
        d="M238 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=210
        y=30></rect><text x=224 y=45>:</text></g><path
        d="M238 41h10"></path><g><path d="M248 41h0"></path><path
        d="M448 41h0"></path><path
        d="M248 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M268 21h160"></path></g><path
        d="M428 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M248 41h20"></path><g><path d="M268 41h0"></path><path
        d="M428 41h0"></path><path d="M268 41h10"></path><g><path
        d="M278 41h0"></path><path d="M418 41h0"></path><rect height=22
        width=140 x=278 y=30></rect><text x=348 y=45>Component
        value</text></g><path d="M418 41h10"></path><path
        d="M278 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M278 61h140"></path></g><path
        d="M418 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M428 41h20"></path></g><g><path d="M448 41h0"></path><path
        d="M588 41h0"></path><path
        d="M448 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M468 21h100"></path></g><path
        d="M568 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M448 41h20"></path><g><path d="M468 41h0"></path><path
        d="M568 41h0"></path><rect height=22 width=100 x=468
        y=30></rect><text x=518 y=45>!important</text></g><path
        d="M568 41h20"></path></g><path
        d="M 588 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=important-diagram>!important

       <dd><svg class=railroad-diagram height=62 width=449><g
        transform="translate(.5 .5)"><path
        d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 31h10"></path><g><path d="M50 31h0"></path><path
        d="M78 31h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
        y=20></rect><text x=64 y=35>!</text></g><path
        d="M78 31h10"></path><path d="M88 31h10"></path><g><path
        d="M98 31h0"></path><path d="M142 31h0"></path><rect height=22
        width=44 x=98 y=20></rect><text x=120 y=35>ws*</text></g><path
        d="M142 31h10"></path><path d="M152 31h10"></path><g><path
        d="M162 31h0"></path><path d="M334 31h0"></path><rect height=22
        width=172 x=162 y=20></rect><text x=248 y=35>〈ident
        "important"〉</text></g><path d="M334 31h10"></path><path
        d="M344 31h10"></path><g><path d="M354 31h0"></path><path
        d="M398 31h0"></path><rect height=22 width=44 x=354 y=20></rect><text
        x=376 y=35>ws*</text></g><path d="M398 31h10"></path><path
        d="M 408 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=ws-diagram>ws*

       <dd><svg class=railroad-diagram height=81 width=257><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
        d="M40 41h0"></path><path d="M216 41h0"></path><path
        d="M40 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M60 21h136"></path></g><path
        d="M196 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M40 41h20"></path><g><path d="M60 41h0"></path><path
        d="M196 41h0"></path><path d="M60 41h10"></path><g><path
        d="M70 41h0"></path><path d="M186 41h0"></path><rect height=22
        width=116 x=70 y=30></rect><text x=128
        y=45>〈whitespace〉</text></g><path d="M186 41h10"></path><path
        d="M70 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M70 61h116"></path></g><path
        d="M186 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M196 41h20"></path></g><path
        d="M 216 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=component-value-diagram>Component value

       <dd><svg class=railroad-diagram height=182 width=261><g
        transform="translate(.5 .5)"><path
        d="M 20 21 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><g><path
        d="M40 31h0"></path><path d="M220 31h0"></path><path
        d="M40 31h20"></path><g><path d="M60 31h0"></path><path
        d="M200 31h0"></path><rect height=22 width=140 x=60 y=20></rect><text
        x=130 y=35>Preserved token</text></g><path
        d="M200 31h20"></path><path
        d="M40 31a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path><g><path
        d="M60 61h28"></path><path d="M172 61h28"></path><rect height=22
        width=84 x=88 y=50></rect><text x=130 y=65>{} block</text></g><path
        d="M200 61a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path><path
        d="M40 31a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path><g><path
        d="M60 91h28"></path><path d="M172 91h28"></path><rect height=22
        width=84 x=88 y=80></rect><text x=130 y=95>() block</text></g><path
        d="M200 91a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path><path
        d="M40 31a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path><g><path
        d="M60 121h28"></path><path d="M172 121h28"></path><rect height=22
        width=84 x=88 y=110></rect><text x=130 y=125>[] block</text></g><path
        d="M200 121a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path><path
        d="M40 31a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path><g><path
        d="M60 151h4"></path><path d="M196 151h4"></path><rect height=22
        width=132 x=64 y=140></rect><text x=130 y=155>Function
        block</text></g><path
        d="M200 151a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path></g><path
        d="M 220 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id="{}-block-diagram">{} block

       <dd><svg class=railroad-diagram height=81 width=377><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M78 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
        y=30></rect><text x=64 y=45>{</text></g><path
        d="M78 41h10"></path><g><path d="M88 41h0"></path><path
        d="M288 41h0"></path><path
        d="M88 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M108 21h160"></path></g><path
        d="M268 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M88 41h20"></path><g><path d="M108 41h0"></path><path
        d="M268 41h0"></path><path d="M108 41h10"></path><g><path
        d="M118 41h0"></path><path d="M258 41h0"></path><rect height=22
        width=140 x=118 y=30></rect><text x=188 y=45>Component
        value</text></g><path d="M258 41h10"></path><path
        d="M118 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M118 61h140"></path></g><path
        d="M258 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M268 41h20"></path></g><path d="M288 41h10"></path><g><path
        d="M298 41h0"></path><path d="M326 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=298 y=30></rect><text x=312 y=45>}</text></g><path
        d="M326 41h10"></path><path
        d="M 336 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id="()-block-diagram">() block

       <dd><svg class=railroad-diagram height=81 width=377><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M78 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
        y=30></rect><text x=64 y=45>(</text></g><path
        d="M78 41h10"></path><g><path d="M88 41h0"></path><path
        d="M288 41h0"></path><path
        d="M88 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M108 21h160"></path></g><path
        d="M268 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M88 41h20"></path><g><path d="M108 41h0"></path><path
        d="M268 41h0"></path><path d="M108 41h10"></path><g><path
        d="M118 41h0"></path><path d="M258 41h0"></path><rect height=22
        width=140 x=118 y=30></rect><text x=188 y=45>Component
        value</text></g><path d="M258 41h10"></path><path
        d="M118 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M118 61h140"></path></g><path
        d="M258 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M268 41h20"></path></g><path d="M288 41h10"></path><g><path
        d="M298 41h0"></path><path d="M326 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=298 y=30></rect><text x=312 y=45>)</text></g><path
        d="M326 41h10"></path><path
        d="M 336 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id="[]-block-diagram">[] block

       <dd><svg class=railroad-diagram height=81 width=377><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M78 41h0"></path><rect height=22 rx=10 ry=10 width=28 x=50
        y=30></rect><text x=64 y=45>[</text></g><path
        d="M78 41h10"></path><g><path d="M88 41h0"></path><path
        d="M288 41h0"></path><path
        d="M88 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M108 21h160"></path></g><path
        d="M268 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M88 41h20"></path><g><path d="M108 41h0"></path><path
        d="M268 41h0"></path><path d="M108 41h10"></path><g><path
        d="M118 41h0"></path><path d="M258 41h0"></path><rect height=22
        width=140 x=118 y=30></rect><text x=188 y=45>Component
        value</text></g><path d="M258 41h10"></path><path
        d="M118 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M118 61h140"></path></g><path
        d="M258 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M268 41h20"></path></g><path d="M288 41h10"></path><g><path
        d="M298 41h0"></path><path d="M326 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=298 y=30></rect><text x=312 y=45>]</text></g><path
        d="M326 41h10"></path><path
        d="M 336 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>

       <dt id=function-block-diagram>Function block

       <dd><svg class=railroad-diagram height=81 width=449><g
        transform="translate(.5 .5)"><path
        d="M 20 31 v 20 m 10 -20 v 20 m -10 -10 h 20.5"></path><path
        d="M40 41h10"></path><g><path d="M50 41h0"></path><path
        d="M150 41h0"></path><rect height=22 width=100 x=50 y=30></rect><text
        x=100 y=45>〈function〉</text></g><path
        d="M150 41h10"></path><g><path d="M160 41h0"></path><path
        d="M360 41h0"></path><path
        d="M160 41a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path><g><path
        d="M180 21h160"></path></g><path
        d="M340 21a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path><path
        d="M160 41h20"></path><g><path d="M180 41h0"></path><path
        d="M340 41h0"></path><path d="M180 41h10"></path><g><path
        d="M190 41h0"></path><path d="M330 41h0"></path><rect height=22
        width=140 x=190 y=30></rect><text x=260 y=45>Component
        value</text></g><path d="M330 41h10"></path><path
        d="M190 41a10 10 0 0 0 -10 10v0a10 10 0 0 0 10 10"></path><g><path
        d="M190 61h140"></path></g><path
        d="M330 61a10 10 0 0 0 10 -10v0a10 10 0 0 0 -10 -10"></path></g><path
        d="M340 41h20"></path></g><path d="M360 41h10"></path><g><path
        d="M370 41h0"></path><path d="M398 41h0"></path><rect height=22 rx=10
        ry=10 width=28 x=370 y=30></rect><text x=384 y=45>)</text></g><path
        d="M398 41h10"></path><path
        d="M 408 41 h 20 m -10 -10 v 20 m 10 -20 v 20"></path></g></svg>
      </dl>

      <h3 id=definitions0><span class=secno>5.2. </span> Definitions</h3>

      <dl>
       <dt><dfn id=current-input-token>current input token</dfn>

       <dd> The token or <a href="#component-value"><i>component
        value</i></a> currently being operated on, from the list of tokens
        produced by the tokenizer.

       <dt><dfn id=next-input-token>next input token</dfn>

       <dd> The token or <a href="#component-value"><i>component
        value</i></a> following the <a href="#current-input-token"><i>current
        input token</i></a> in the list of tokens produced by the tokenizer.
        If there isn't a token following the <a
        href="#current-input-token"><i>current input token</i></a>, the <a
        href="#next-input-token"><i>next input token</i></a> is an 〈EOF〉.

       <dt><dfn id=eof>〈EOF〉</dfn>

       <dd> A conceptual token representing the end of the list of tokens.
        Whenever the list of tokens is empty, the <a
        href="#next-input-token"><i>next input token</i></a> is always an
        〈EOF〉.

       <dt><dfn id=reconsume-the-current-input-token>reconsume the current
        input token</dfn>

       <dd> Push the <a href="#current-input-token"><i>current input
        token</i></a> back onto the list of tokens produced by the tokenizer,
        so that the next time a mode instructs you to consume the next input
        token, it will instead reconsume the <a
        href="#current-input-token"><i>current input token</i></a>.

       <dt><dfn id=ascii-case-insensitive>ASCII case-insensitive</dfn>

       <dd> When two strings are to be matched ASCII case-insensitively,
        temporarily convert both of them to ASCII lower-case form by adding
        32 (0x20) to the value of each codepoint between U+0041 LATIN CAPITAL
        LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z), inclusive, and
        then compare them on a codepoint-by-codepoint basis.
      </dl>

      <h3 id=parser-entry-points><span class=secno>5.3. </span> Parser Entry
       Points</h3>

      <p> The algorithms defined in this specification can be invoked in
       multiple ways to convert a stream of text into various CSS concepts.

      <p> All of the algorithms defined in this section begin in the parser.
       It is assumed that the <a href="#preprocessing-the-input-stream">input
       preprocessing</a> and <a href="#tokenization">tokenization</a> steps
       have already been completed, resulting in a stream of tokens.

      <p class=note> Other specs can define additional entry points for their
       own purposes.

      <div class=issue>
       <p> The following notes should probably be translated into normative
        text in the relevant specs, hooking this spec's terms:

       <ul>
        <li> "<a href="#parse-a-stylesheet0"><i>Parse a stylesheet</i></a>"
         is intended to be the normal parser entry point, for parsing
         stylesheets.

        <li> "<a href="#parse-a-rule0"><i>Parse a rule</i></a>" is intended
         for use by the <code>CSSStyleSheet#insertRule</code> method, and
         similar functions which might exist, which parse text into a single
         rule.

        <li> "<a href="#parse-a-list-of-declarations0"><i>Parse a list of
         declarations</i></a>" is for the contents of a <code>style</code>
         attribute, which parses text into the contents of a single style
         rule.

        <li> "<a href="#parse-a-component-value0"><i>Parse a component
         value</i></a>" is for things that need to consume a single value,
         like the parsing rules for ‘<code class=css>attr()</code>’.

        <li> "<a href="#parse-a-list-of-component-values0"><i>Parse a list of
         component values</i></a>" is for the contents of presentational
         attributes, which parse text into a single declaration's value.
       </ul>
      </div>

      <p> All of the algorithms defined in this spec may be called with
       either a list of tokens or of component values. Either way produces an
       identical result.

      <h4 id=parse-a-stylesheet><span class=secno>5.3.1. </span> <dfn
       id=parse-a-stylesheet0>Parse a stylesheet</dfn></h4>

      <p> To <a href="#parse-a-stylesheet0"><i>parse a stylesheet</i></a>
       from a stream of tokens:

      <ol>
       <li> Create a new stylesheet.

       <li> <a href="#consume-a-list-of-rules0"><i>Consume a list of
        rules</i></a> from the stream of tokens, with the <var>top-level
        flag</var> set.

       <li> Assign the returned value to the stylesheet's value.

       <li> Return the stylesheet.
      </ol>

      <h4 id=parse-a-rule><span class=secno>5.3.2. </span> <dfn
       id=parse-a-rule0>Parse a rule</dfn></h4>

      <p> To <a href="#parse-a-rule0"><i>parse a rule</i></a> from a stream
       of tokens:

      <ol>
       <li> Consume 〈whitespace〉s from the token stream until a
        non-〈whitespace〉 is encountered.

       <li> If the <a href="#current-input-token"><i>current input
        token</i></a> is a 〈CDO〉, 〈CDC〉, or 〈EOF〉, return a
        syntax error.
        <p> Otherwise, if the <a href="#current-input-token"><i>current input
         token</i></a> is an 〈at-keyword〉, <a
         href="#consume-an-at-rule0"><i>consume an at-rule</i></a>.

        <p> Otherwise, <a href="#consume-a-qualified-rule0"><i>consume a
         qualified rule</i></a>. If nothing was returned, return a syntax
         error.

       <li> Consume 〈whitespace〉s from the token stream until a
        non-〈whitespace〉 is encountered.

       <li> If the <a href="#current-input-token"><i>current input
        token</i></a> is an 〈EOF〉, return the rule obtained in step 2.
        Otherwise, return a syntax error.
      </ol>

      <h4 id=parse-a-list-of-declarations><span class=secno>5.3.3. </span>
       <dfn id=parse-a-list-of-declarations0>Parse a list of
       declarations</dfn></h4>

      <p> To <a href="#parse-a-list-of-declarations0"><i>parse a list of
       declarations</i></a>:

      <ol>
       <li> <a href="#consume-a-list-of-declarations0"><i>Consume a list of
        declarations</i></a>. If anything was returned, return it.
      </ol>

      <h4 id=parse-a-component-value><span class=secno>5.3.4. </span> <dfn
       id=parse-a-component-value0>Parse a component value</dfn></h4>

      <p> To <a href="#parse-a-component-value0"><i>parse a component
       value</i></a>:

      <ol>
       <li> Discard 〈whitespace〉s from the token stream until a
        non-〈whitespace〉 is reached. If the token stream is exhausted
        without finding a non-〈whitespace〉, return a syntax error.

       <li> <a href="#consume-a-component-value0"><i>Consume a component
        value</i></a>. If nothing is returned, return a syntax error.

       <li> Discard 〈whitespace〉s from the token stream until a
        non-〈whitespace〉 is reached. If the token stream is exhausted
        without finding a non-〈whitespace〉, return the value found in the
        previous step. Otherwise, return a syntax error.
      </ol>

      <h4 id=parse-a-list-of-component-values><span class=secno>5.3.5.
       </span> <dfn id=parse-a-list-of-component-values0>Parse a list of
       component values</dfn></h4>

      <p> To <a href="#parse-a-list-of-component-values0"><i>parse a list of
       component values</i></a>:

      <ol>
       <li> Repeatedly <a href="#consume-a-component-value0"><i>consume a
        component value</i></a> until an 〈EOF〉 is returned, appending the
        returned values into a list. Return the list.
      </ol>

      <h3 id=parser-algorithms><span class=secno>5.4. </span> Parser
       Algorithms</h3>

      <p> The following algorithms comprise the parser. They are called by
       the parser entry points above.

      <p> These algorithms may be called with a list of either tokens or of
       component values. (The difference being that some tokens are replaced
       by <a href="#function"><i>functions</i></a> and <a
       href="#simple-block"><i>simple blocks</i></a> in a list of component
       values.) Similar to how the input stream returned EOF characters to
       represent when it was empty during the tokenization stage, the lists
       in this stage must return an 〈EOF〉 when the next token is
       requested but they are empty.

      <p> An algorithm may be invoked with a specific list, in which case it
       consumes only that list (and when that list is exhausted, it begins
       returning 〈EOF〉s). Otherwise, it is implicitly invoked with the
       same list as the invoking algorithm.

      <h4 id=consume-a-list-of-rules><span class=secno>5.4.1. </span> <dfn
       id=consume-a-list-of-rules0>Consume a list of rules</dfn></h4>

      <p> Create an initially empty list of rules.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a>:

      <dl>
       <dt>〈whitespace〉

       <dd> Do nothing.

       <dt>〈EOF〉

       <dd> Return the list of rules.

       <dt>〈CDO〉

       <dt>〈CDC〉

       <dd> If the <var>top-level flag</var> is set, do nothing.
        <p> Otherwise, <a
         href="#reconsume-the-current-input-token"><i>reconsume the current
         input token</i></a>. <a href="#consume-a-qualified-rule0"><i>Consume
         a qualified rule</i></a>. If anything is returned, append it to the
         list of rules.

       <dt>〈at-keyword〉

       <dd> <a href="#reconsume-the-current-input-token"><i>Reconsume the
        current input token</i></a>. <a
        href="#consume-an-at-rule0"><i>Consume an at-rule</i></a>. If
        anything is returned, append it to the list of rules.

       <dt>anything else

       <dd> <a href="#reconsume-the-current-input-token"><i>Reconsume the
        current input token</i></a>. <a
        href="#consume-a-qualified-rule0"><i>Consume a qualified
        rule</i></a>. If anything is returned, append it to the list of
        rules.
      </dl>

      <h4 id=consume-an-at-rule><span class=secno>5.4.2. </span> <dfn
       id=consume-an-at-rule0>Consume an at-rule</dfn></h4>

      <p> Create a new at-rule with its name set to the value of the <a
       href="#current-input-token"><i>current input token</i></a>, its
       prelude initially set to an empty list, and its value initially set to
       nothing.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a>:

      <dl>
       <dt>〈semicolon〉

       <dt>〈EOF〉

       <dd> Return the at-rule.

       <dt>〈{〉

       <dd> <a href="#consume-a-simple-block0"><i>Consume a simple
        block</i></a> and assign it to the at-rule's block. Return the
        at-rule.

       <dt><a href="#simple-block"><i>simple block</i></a> with an associated
        token of 〈{〉

       <dd> Assign the block to the at-rule's block. Return the at-rule.

       <dt>anything else

       <dd> <a href="#consume-a-component-value0"><i>Consume a component
        value</i></a>. Append the returned value to the at-rule's prelude.
      </dl>

      <h4 id=consume-a-qualified-rule><span class=secno>5.4.3. </span> <dfn
       id=consume-a-qualified-rule0>Consume a qualified rule</dfn></h4>

      <p> Create a new qualified rule with its prelude initially set to an
       empty list, and its value initially set to nothing.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a>:

      <dl>
       <dt>〈EOF〉

       <dd> This is a <a href="#parse-errors"><i>parse error</i></a>. Return
        nothing.

       <dt>〈{〉

       <dd> <a href="#consume-a-simple-block0"><i>Consume a simple
        block</i></a>. <a href="#consume-a-list-of-declarations0"><i>Consume
        a list of declarations</i></a> from the block's value. If anything
        was returned, assign it to the qualified rule's value. Return the
        qualified rule.

       <dt><a href="#simple-block"><i>simple block</i></a> with an associated
        token of 〈{〉

       <dd> <a href="#consume-a-list-of-declarations0"><i>Consume a list of
        declarations</i></a> from the block's value. If anything was
        returned, assign it to the qualified rule's value. Return the
        qualified rule.

       <dt>anything else

       <dd> <a href="#consume-a-component-value0"><i>Consume a component
        value</i></a>. Append the returned value to the qualified rule's
        prelude.
      </dl>

      <h4 id=consume-a-list-of-declarations><span class=secno>5.4.4. </span>
       <dfn id=consume-a-list-of-declarations0>Consume a list of
       declarations</dfn></h4>

      <p> Create an initially empty list of declarations.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a>:

      <dl>
       <dt>〈whitespace〉

       <dt>〈semicolon〉

       <dd> Do nothing.

       <dt>〈EOF〉

       <dd> Return the list of declarations.

       <dt>〈at-keyword〉

       <dd> <a href="#consume-an-at-rule0"><i>Consume an at-rule</i></a>.
        Append the returned rule to the list of declarations.

       <dt>〈ident〉

       <dd> Initialize a temporary list initially filled with the <a
        href="#current-input-token"><i>current input token</i></a>.
        Repeatedly <a href="#consume-a-component-value0"><i>consume a
        component value</i></a> from the <a href="#next-input-token"><i>next
        input token</i></a> until a 〈semicolon〉 or 〈EOF〉 is returned,
        appending all of the returned values up to that point to the
        temporary list. <a href="#consume-a-declaration0"><i>Consume a
        declaration</i></a> from the temporary list. If anything was
        returned, append it to the list of declarations.

       <dt>anything else

       <dd> This is a <a href="#parse-errors"><i>parse error</i></a>.
        Repeatedly <a href="#consume-a-component-value0"><i>consume a
        component value</i></a> from the <a href="#next-input-token"><i>next
        input token</i></a> until it is a 〈semicolon〉 or 〈EOF〉.
      </dl>

      <h4 id=consume-a-declaration><span class=secno>5.4.5. </span> <dfn
       id=consume-a-declaration0>Consume a declaration</dfn></h4>

      <p> Create a new declaration with its name set to the value of the <a
       href="#current-input-token"><i>current input token</i></a>.

      <p> Repeatedly consume 〈whitespace〉s until a non-〈whitespace〉
       is reached. If this token is anything but a 〈colon〉, this is a <a
       href="#parse-errors"><i>parse error</i></a>. Return nothing.

      <p> Otherwise, repeatedly <a
       href="#consume-a-component-value0"><i>consume a component
       value</i></a> from the <a href="#next-input-token"><i>next input
       token</i></a> until an 〈EOF〉 is reached, appending all of the
       returned values up to that point to the declaration's value.

      <p> If the last two non-〈whitespace〉s in the declaration's value
       are a 〈delim〉 with the value "!" followed by an 〈ident〉 with a
       value that is an <a href="#ascii-case-insensitive"><i>ASCII
       case-insensitive</i></a> match for "important", remove them from the
       declaration's value and set the declaration's <var>important</var>
       flag to true.

      <p> Return the declaration.

      <h4 id=consume-a-component-value><span class=secno>5.4.6. </span> <dfn
       id=consume-a-component-value0>Consume a component value</dfn></h4>

      <p> This section describes how to <a
       href="#consume-a-component-value0"><i>consume a component
       value</i></a>.

      <p> If the <a href="#current-input-token"><i>current input
       token</i></a> is a 〈{〉, 〈[〉, or 〈(〉, <a
       href="#consume-a-simple-block0"><i>consume a simple block</i></a> and
       return it.

      <p> Otherwise, if the <a href="#current-input-token"><i>current input
       token</i></a> is a 〈function〉, <a
       href="#consume-a-function0"><i>consume a function</i></a> and return
       it.

      <p> Otherwise, return the <a href="#current-input-token"><i>current
       input token</i></a>.

      <h4 id=consume-a-simple-block><span class=secno>5.4.7. </span> <dfn
       id=consume-a-simple-block0>Consume a simple block</dfn></h4>

      <p> This section describes how to <a
       href="#consume-a-simple-block0"><i>consume a simple block</i></a>.

      <p> The <dfn id=ending-token>ending token</dfn> is the mirror variant
       of the <a href="#current-input-token"><i>current input token</i></a>.
       (E.g. if it was called with 〈[〉, the <a
       href="#ending-token"><i>ending token</i></a> is 〈]〉.)

      <p> Create a simple block with its associated token set to the <a
       href="#current-input-token"><i>current input token</i></a>.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a> and process it as follows:

      <dl>
       <dt>〈EOF〉

       <dt><a href="#ending-token"><i>ending token</i></a>

       <dd> Return the block.

       <dt>anything else

       <dd> <a href="#consume-a-component-value0"><i>Consume a component
        value</i></a> and append it to the value of the block.
      </dl>

      <h4 id=consume-a-function><span class=secno>5.4.8. </span> <dfn
       id=consume-a-function0>Consume a function</dfn></h4>

      <p> This section describes how to <a
       href="#consume-a-function0"><i>consume a function</i></a>.

      <p> Create a function with a name equal to the value of the <a
       href="#current-input-token"><i>current input token</i></a>, and with a
       value which is initially an empty list.

      <p> Repeatedly consume the <a href="#next-input-token"><i>next input
       token</i></a> and process it as follows:

      <dl>
       <dt>〈EOF〉

       <dt>〈)〉

       <dd> Return the function.

       <dt>anything else

       <dd> <a href="#consume-a-component-value0"><i>Consume a component
        value</i></a> and append the returned value to the function's value.
      </dl>

      <h3 id=changes-from-css-2.1-core-grammar><span class=secno>5.5. </span>
       Changes from CSS 2.1 Core Grammar</h3>

      <p> <em>This section is non-normative.</em>

      <p class=note> Note that the point of this spec is to match reality;
       changes from CSS2.1&apos;s Core Grammar are nearly always because the
       Core Grammar specified something that doesn't match actual browser
       behavior, or left something unspecified. If some detail doesn't match
       browsers, please let me know as it's almost certainly unintentional.

      <ol>
       <li> The handling of some miscellanous "special" tokens (like an
        unmatched 〈}〉) showing up in various places in the grammar has
        been specified with some reasonable behavior shown by at least one
        browser. Previously, stylesheets with those tokens in those places
        just didn't match the stylesheet grammar at all, so their handling
        was totally undefined. Specifically:
        <ul>
         <li> [] blocks, () blocks and functions can now contain {} blocks,
          〈at-keyword〉s or semicolons

         <li> Selectors can now contain semicolons

         <li> Selectors and at-rule preludes can now contain
          〈at-keyword〉s
        </ul>

       <li> The <a href="#anb0"><var>An+B</var></a> microsyntax has now been
        formally defined in terms of CSS tokens, rather than with a separate
        tokenizer. This has resulted in minor differences:
        <ul>
         <li> In values starting with "+n", a space is now allowed between
          the "+" and "n". (This is an accidental consequence of the "+" and
          "n" parsing as separate CSS tokens, and CSS's value grammar
          ignoring whitespace.)

         <li> In some cases, "-" characters or digits can be escaped (when
          they appear as part of the unit of a 〈dimension〉 or
          〈ident〉).
        </ul>
      </ol>

      <h2 id=anb><span class=secno>6. </span> The <a
       href="#anb0"><var>An+B</var></a> microsyntax</h2>

      <p> Several things in CSS, such as the ‘<code
       class=css>:nth-child()</code>’ pseudoclass, need to indicate indexes
       in a list. The <a href="#anb0"><var>An+B</var></a> microsyntax is
       useful for this, allowing an author to easily indicate single elements
       or all elements at regularly-spaced intervals in a list.

      <p> The <dfn id=anb0>An+B</dfn> notation defines an integer step (<dfn
       id=a>A</dfn>) and offset (<dfn id=b>B</dfn>), and represents the <a
       href="#anb0"><var>An+B</var></a>th elements in a list, for every
       positive integer or zero value of <var>n</var>, with the first element
       in the list having index 1 (not 0).

      <p> For values of <a href="#a"><var>A</var></a> and <a
       href="#b"><var>B</var></a> greater than 0, this effectively divides
       the list into groups of <a href="#a"><var>A</var></a> elements (the
       last group taking the remainder), and selecting the <a
       href="#b"><var>B</var></a>th element of each group.

      <p> The <a href="#anb0"><var>An+B</var></a> notation also accepts the
       ‘<code class=css>even</code>’ and ‘<code class=css>odd</code>’
       keywords, which have the same meaning as ‘<code
       class=css>2n</code>’ and ‘<code class=css>2n+1</code>’,
       respectively.

      <div class=example>
       <p>Examples:

       <pre><!--
		-->2n+0   /* represents all of the even elements in the list */
<!--
		-->even   /* same */
<!--
		-->4n+1   /* represents the 1st, 5th, 9th, 13th, etc. elements in the list */</pre>
      </div>

      <p> The values of <a href="#a"><var>A</var></a> and <a
       href="#b"><var>B</var></a> can be negative, but only the positive
       results of <a href="#anb0"><var>An+B</var></a>, for <var>n</var> ≥
       0, are used.

      <div class=example>
       <p>Example:

       <pre>-n+6   /* represents the first 6 elements of the list */</pre>
      </div>

      <p> If both <a href="#a"><var>A</var></a> and <a
       href="#b"><var>B</var></a> are 0, the pseudo-class represents no
       element in the list.

      <h3 id=anb-syntax><span class=secno>6.1. </span> Informal Syntax
       Description</h3>

      <p><em>This section is non-normative.</em>

      <p> When <a href="#a"><var>A</var></a> is 0, the <var>An</var> part may
       be omitted (unless the <a href="#b"><var>B</var></a> part is already
       omitted). When <var>An</var> is not included and <a
       href="#b"><var>B</var></a> is non-negative, the ‘<code
       class=css>+</code>’ sign before <a href="#b"><var>B</var></a> (when
       allowed) may also be omitted. In this case the syntax simplifies to
       just <a href="#b"><var>B</var></a>.

      <div class=example>
       <p>Examples:

       <pre><!--
		-->0n+5   /* represents the 5th element in the list */
<!--
		-->5      /* same */</pre>
      </div>

      <p> When <a href="#a"><var>A</var></a> is 1 or -1, the <code>1</code>
       may be omitted from the rule.

      <div class=example>
       <p>Examples:

       <p>The following notations are therefore equivalent:

       <pre><!--
		-->1n+0   /* represents all elements in the list */
<!--
		-->n+0    /* same */
<!--
		-->n      /* same */</pre>
      </div>

      <p> If <a href="#b"><var>B</var></a> is 0, then every <a
       href="#a"><var>A</var></a>th element is picked. In such a case, the <a
       href="#b"><var>+B</var></a> (or <var>-B</var>) part may be omitted
       unless the <a href="#a"><var>A</var></a> part is already omitted.

      <div class=example>
       <p>Examples:

       <pre><!--
		-->2n+0   /* represents every even element in the list */
<!--
		-->2n     /* same */</pre>
      </div>

      <p> Whitespace is permitted on either side of the ‘<code
       class=css>+</code>’ or ‘<code class=css>-</code>’ that separates
       the <var>An</var> and <a href="#b"><var>B</var></a> parts when both
       are present.

      <div class=example>
       <p>Valid Examples with white space:

       <pre><!--
		-->3n + 1
<!--
		-->+3n - 2
<!--
		-->-n+ 6
<!--
		-->+6</pre>

       <p>Invalid Examples with white space:

       <pre><!--
		-->3 n
<!--
		-->+ 2n
<!--
		-->+ 2</pre>
      </div>

      <h3 id=the-anb-type><span class=secno>6.2. </span> The <a
       href="#anb-production"><code>&lt;an+b></code></a> type</h3>

      <p> The <a href="#anb0"><var>An+B</var></a> notation was originally
       defined using a slightly different tokenizer than the rest of CSS,
       resulting in a somewhat odd definition when expressed in terms of CSS
       tokens. This section describes how to recognize the <a
       href="#anb0"><var>An+B</var></a> notation in terms of CSS tokens (thus
       defining the <a href="#anb-production"><var>&lt;an+b></var></a> type
       for CSS grammar purposes), and how to interpret the CSS tokens to
       obtain values for <a href="#a"><var>A</var></a> and <a
       href="#b"><var>B</var></a>.

      <p> The <a href="#anb-production"><var>&lt;an+b></var></a> type is
       defined (using the <a
       href="http://www.w3.org/TR/css3-values/#value-defs">Value Definition
       Syntax in the Values &amp; Units spec</a>) as:

      <pre class=prod>
<dfn id=anb-production>&lt;an+b></dfn> =
  odd | even |
  <a
       href="#ltinteger"><var>&lt;integer></var></a> |

  <a
       href="#ltn-dimension"><var>&lt;n-dimension></var></a> |
  '+'? n |
  -n |

  <a
       href="#ltndashdigit-dimension"><var>&lt;ndashdigit-dimension></var></a> |
  '+'? <a
       href="#ltndashdigit-ident"><var>&lt;ndashdigit-ident></var></a> |
  <a
       href="#ltdashndashdigit-ident"><var>&lt;dashndashdigit-ident></var></a> |

  <a
       href="#ltn-dimension"><var>&lt;n-dimension></var></a> <a
       href="#ltsigned-integer"><var>&lt;signed-integer></var></a> |
  '+'? n <a
       href="#ltsigned-integer"><var>&lt;signed-integer></var></a> |
  -n <a
       href="#ltsigned-integer"><var>&lt;signed-integer></var></a> |

  <a
       href="#ltn-dimension"><var>&lt;n-dimension></var></a> ['+' | '-'] <a
       href="#ltsignless-integer"><var>&lt;signless-integer></var></a>
  '+'? n ['+' | '-'] <a
       href="#ltsignless-integer"><var>&lt;signless-integer></var></a> |
  -n ['+' | '-'] <a
       href="#ltsignless-integer"><var>&lt;signless-integer></var></a></pre>

      <p> where:

      <ul>
       <li><dfn id=ltn-dimension><code>&lt;n-dimension></code></dfn> is a
        〈dimension〉 with its type flag set to "integer", and a unit that
        is an <a href="#ascii-case-insensitive"><i>ASCII
        case-insensitive</i></a> match for "n"

       <li><dfn
        id=ltndashdigit-dimension><code>&lt;ndashdigit-dimension></code></dfn>
        is a 〈dimension〉 with its type flag set to "integer", and a unit
        that is an <a href="#ascii-case-insensitive"><i>ASCII
        case-insensitive</i></a> match for "n-*", where "*" is a series of
        one or more <a href="#digit"><i>digits</i></a>

       <li><dfn
        id=ltndashdigit-ident><code>&lt;ndashdigit-ident></code></dfn> is an
        〈ident〉 whose representation is an <a
        href="#ascii-case-insensitive"><i>ASCII case-insensitive</i></a>
        match for "n-*", where "*" is a series of one or more <a
        href="#digit"><i>digits</i></a>

       <li><dfn
        id=ltdashndashdigit-ident><code>&lt;dashndashdigit-ident></code></dfn>
        is an 〈ident〉 whose representation is an <a
        href="#ascii-case-insensitive"><i>ASCII case-insensitive</i></a>
        match for "-n-*", where "*" is a series of one or more <a
        href="#digit"><i>digits</i></a>

       <li><dfn id=ltinteger><code>&lt;integer></code></dfn> is a
        〈number〉 with its type flag set to "integer"

       <li><dfn id=ltsigned-integer><code>&lt;signed-integer></code></dfn> is
        a 〈number〉 with its type flag set to "integer", and whose
        representation starts with "+" or "-"

       <li><dfn
        id=ltsignless-integer><code>&lt;signless-integer></code></dfn> is a
        〈number〉 with its type flag set to "integer", and whose
        representation start with a <a href="#digit"><i>digit</i></a>
      </ul>

      <p> The clauses of the production are interpreted as follows:

      <dl>
       <dt>‘<code class=css>odd</code>’

       <dd> <a href="#a"><var>A</var></a> is 2, <a href="#b"><var>B</var></a>
        is 1.

       <dt>‘<code class=css>even</code>’

       <dd> <a href="#a"><var>A</var></a> is 2, <a href="#b"><var>B</var></a>
        is 0.

       <dt><a href="#ltinteger"><code><var>&lt;integer></var></code></a>

       <dd> <a href="#a"><var>A</var></a> is 0, <a href="#b"><var>B</var></a>
        is the integer.

       <dt><a
        href="#ltn-dimension"><code><var>&lt;n-dimension></var></code></a>

       <dt><code>'+'? n</code>

       <dt><code>-n</code>

       <dd> <a href="#a"><var>A</var></a> is the dimension's value, 1, or -1,
        respectively. <a href="#b"><var>B</var></a> is 0.

       <dt><a
        href="#ltndashdigit-dimension"><code><var>&lt;ndashdigit-dimension></var></code></a>

       <dt><code>'+'? <a
        href="#ltndashdigit-ident"><var>&lt;ndashdigit-ident></var></a></code>

       <dt><a
        href="#ltdashndashdigit-ident"><code><var>&lt;dashndashdigit-ident></var></code></a>

       <dd> <a href="#a"><var>A</var></a> is the dimension's value, 1, or -1,
        respectively. <a href="#b"><var>B</var></a> is the dimension's unit
        or ident's representation, as appropriate, with the first two
        characters removed and the remainder interpreted as a base-10 number.

       <dt><code><a href="#ltn-dimension"><var>&lt;n-dimension></var></a> <a
        href="#ltsigned-integer"><var>&lt;signed-integer></var></a></code>

       <dt><code>'+'? n <a
        href="#ltsigned-integer"><var>&lt;signed-integer></var></a></code>

       <dt><code>-n <a
        href="#ltsigned-integer"><var>&lt;signed-integer></var></a></code>

       <dd> <a href="#a"><var>A</var></a> is the dimension's value, 1, or -1,
        respectively. <a href="#b"><var>B</var></a> is the integer.

       <dt><code><a href="#ltn-dimension"><var>&lt;n-dimension></var></a>
        ['+' | '-'] <a
        href="#ltsignless-integer"><var>&lt;signless-integer></var></a></code>

       <dt><code>'+'? n ['+' | '-'] <a
        href="#ltsignless-integer"><var>&lt;signless-integer></var></a></code>

       <dt><code>-n ['+' | '-'] <a
        href="#ltsignless-integer"><var>&lt;signless-integer></var></a></code>

       <dd> <a href="#a"><var>A</var></a> is the dimension's value, 1, or -1,
        respectively. <a href="#b"><var>B</var></a> is the integer. If a
        ‘<code class=property>-</code>’ was provided between the two, <a
        href="#b"><var>B</var></a> is instead the negation of the integer.
      </dl>

      <h2 id=rule-defs><span class=secno>7. </span> Defining Grammars for
       Rules and Other Values</h2>

      <p> The <a href="http://www.w3.org/TR/css3-values/">Values</a> spec
       defines how to specify a grammar for properties. This section does the
       same, but for rules.

      <p> Just like in property grammars, the notation <code>&lt;foo></code>
       refers to the "foo" grammar term, assumed to be defined elsewhere.
       Substituting the <code>&lt;foo></code> for its definition results in a
       semantically identical grammar.

      <p> Several types of tokens are written literally, without quotes:

      <ul>
       <li>〈Ident〉s (such as ‘<code class=css>auto</code>’, ‘<code
        class=css>disc</code>’, etc.)

       <li>〈at-keyword〉s, which are written as an @ character followed by
        the token's name, like "@media".

       <li>〈function〉s, which are written as the function name followed
        by a ( character, like "translate(".

       <li>The 〈colon〉 (written as <code>:</code>), 〈comma〉 (written
        as <code>,</code>), 〈semicolon〉 (written as <code>;</code>),
        〈(〉, 〈)〉, 〈{〉, and 〈}〉s.
      </ul>

      <p> 〈delim〉s are written with their value enclosed in single
       quotes. For example, a 〈delim〉 containing the "+" character is
       written as <code>'+'</code>. Similarly, the 〈[〉 and 〈]〉s must
       be written in single quotes, as they're used by the syntax of the
       grammar itself to group clauses. 〈whitespace〉 is never indicated
       in the grammar; 〈whitespace〉s are allowed before, after, and
       between any two tokens, unless explicitly specified otherwise in prose
       definitions. (For example, if the prelude of a rule is a selector,
       whitespace is significant.)

      <p> When defining a function or a block, the ending token must be
       specified in the grammar, but if it's not present in the eventual
       token stream, it still matches.

      <div class=example> For example, the syntax of the ‘<code
       class=css>translateX()</code>’ function is:
       <pre>translateX( &lt;translation-value> )</pre>

       <p> However, the stylesheet may end with the function unclosed, like:

       <pre>.foo { transform: translate(50px</pre>

       <p> The CSS parser parses this as a style rule containing one
        declaration, whose value is a function named "translate". This
        matches the above grammar, even though the ending token didn't appear
        in the token stream, because by the time the parser is finished, the
        presence of the ending token is no longer possible to determine; all
        you have is the fact that there's a block and a function.
      </div>

      <h3 id=declaration-rule-list><span class=secno>7.1. </span> Defining
       Block Contents: the <a
       href="#ltdeclaration-list"><var>&lt;declaration-list></var></a>, <a
       href="#ltrule-list"><var>&lt;rule-list></var></a>, and <a
       href="#ltstylesheet"><var>&lt;stylesheet></var></a> productions</h3>

      <p> The CSS parser is agnostic as to the contents of blocks, such as
       those that come at the end of some at-rules. Defining the generic
       grammar of the blocks in terms of tokens is non-trivial, but there are
       dedicated and unambiguous algorithms defined for parsing this.

      <p> The <dfn
       id=ltdeclaration-list><var>&lt;declaration-list></var></dfn>
       production represents a list of declarations. It may only be used in
       grammars as the sole value in a block, and represents that the
       contents of the block must be parsed using the <a
       href="#consume-a-list-of-declarations0"><i>consume a list of
       declarations</i></a> algorithm.

      <p> Similarly, the <dfn id=ltrule-list><var>&lt;rule-list></var></dfn>
       production represents a list of rules, and may only be used in
       grammars as the sole value in a block. It represents that the contents
       of the block must be parsed using the <a
       href="#consume-a-list-of-rules0"><i>consume a list of rules</i></a>
       algorithm.

      <p> Finally, the <dfn id=ltstylesheet><var>&lt;stylesheet></var></dfn>
       production represents a list of rules. It is identical to <a
       href="#ltrule-list"><var>&lt;rule-list></var></a>, except that blocks
       using it default to accepting all rules that aren't otherwise limited
       to a particular context.

      <div class=example> For example, the ‘<code
       class=css>@font-face</code>’ rule is defined to have an empty
       prelude, and to contain a list of declarations. This is expressed with
       the following grammar:
       <pre>@font-face { &lt;declaration-list> }</pre>

       <p> This is a complete and sufficient definition of the rule's
        grammar.

       <p> For another example, ‘<code class=css>@keyframes</code>’ rules
        are more complex, interpreting their prelude as a name and containing
        keyframes rules in their block Their grammar is:

       <pre>@keyframes &lt;keyframes-name> { &lt;rule-list> }</pre>
      </div>

      <p> For rules that use <a
       href="#ltdeclaration-list"><var>&lt;declaration-list></var></a>, the
       spec for the rule must define which properties, descriptors, and/or
       at-rules are valid inside the rule; this may be as simple as saying
       "The @foo rule accepts the properties/descriptors defined in this
       specification/section.", and extension specs may simply say "The @foo
       rule additionally accepts the following properties/descriptors.". Any
       declarations or at-rules found inside the block that are not defined
       as valid must be removed from the rule's value.

      <p> Within a <a
       href="#ltdeclaration-list"><var>&lt;declaration-list></var></a>,
       <code>!important</code> is automatically invalid on any descriptors.
       If the rule accepts properties, the spec for the rule must define
       whether the properties interact with the cascade, and with what
       specificity. If they don't interact with the cascade, properties
       containing <code>!important</code> are automatically invalid;
       otherwise using <code>!important</code> is valid and has its usual
       effect on the cascade origin of the property.

      <div class=example> For example, the grammar for ‘<code
       class=css>@font-face</code>’ in the previous example must, in
       addition to what is written there, define that the allowed
       declarations are the descriptors defined in the Fonts spec.</div>

      <p> For rules that use <a
       href="#ltrule-list"><var>&lt;rule-list></var></a>, the spec for the
       rule must define what types of rules are valid inside the rule, same
       as <a href="#ltdeclaration-list"><var>&lt;declaration-list></var></a>,
       and unrecognized rules must similarly be removed from the rule's
       value.

      <div class=example> For example, the grammar for ‘<code
       class=css>@keyframes</code>’ in the previous example must, in
       addition to what is written there, define that the only allowed rules
       are <var>&lt;keyframe-rule></var>s, which are defined as:
       <pre>&lt;keyframe-rule> = &lt;keyframe-selector> { &lt;declaration-list> }</pre>

       <p> Keyframe rules, then, must further define that they accept as
        declarations all animatable CSS properties, plus the ‘<code
        class=property>animation-timing-function</code>’ property, but that
        they do not interact with the cascade.
      </div>

      <p> For rules that use <a
       href="#ltstylesheet"><var>&lt;stylesheet></var></a>, all rules are
       allowed by default, but the spec for the rule may define what types of
       rules are <em>invalid</em> inside the rule.

      <div class=example> For example, the ‘<code
       class=css>@media</code>’ rule accepts anything that can be placed in
       a stylesheet, except more ‘<code class=css>@media</code>’ rules.
       As such, its grammar is:
       <pre>@media &lt;media-query-list> { &lt;stylesheet> }</pre>

       <p> It additionally defines a restriction that the <a
        href="#ltstylesheet"><var>&lt;stylesheet></var></a> can not contain
        ‘<code class=css>@media</code>’ rules, which causes them to be
        dropped from the outer rule's value if they appear.
      </div>

      <h2 id=serialization><span class=secno>8. </span>Serialization</h2>

      <p> This specification does not define how to serialize CSS in general,
       leaving that task to the CSSOM and individual feature specifications.
       However, there is one important facet that must be specified here
       regarding comments, to ensure accurate "round-tripping" of data from
       text to CSS objects and back.

      <p> The tokenizer described in this specification does not produce
       tokens for comments, or otherwise preserve them in any way.
       Implementations may preserve the contents of comments and their
       location in the token stream. If they do, this preserved information
       must have no effect on the parsing step, but must be serialized in its
       position as "/*" followed by its contents followed by "*/".

      <p> If the implementation does not preserve comments, it must insert
       the text "/**/" between the serialization of adjacent tokens when the
       two tokens are of the following pairs:

      <ul>
       <li> a 〈hash〉 or 〈at-keyword〉 followed by a 〈number〉,
        〈percentage〉, 〈ident〉, 〈dimension〉, 〈unicode-range〉,
        〈url〉, or a 〈function〉 token;

       <li> 〈number〉s, 〈ident〉s, and 〈dimension〉s in any
        combination;

       <li> a 〈number〉, 〈ident〉, or 〈dimension〉 followed by a
        〈percentage〉, 〈unicode-range〉, 〈url〉, or 〈function〉;

       <li> an 〈ident〉 followed by a 〈(〉;

       <li> a 〈delim〉 containing "#" or "@" followed by any token except
        〈whitespace〉;

       <li> a 〈delim〉 containing "-", "+", ".", "&lt;", ">", or "!"
        following or followed by any token except 〈whitespace〉;

       <li> a 〈delim〉 containing "/" following or followed by a
        〈delim〉 containing "*".
      </ul>

      <p class=note> The preceding pairs of tokens can only be adjacent due
       to comments in the original text, so the above rule reinserts the
       minimum number of comments into the serialized text to ensure an
       accurate round-trip. (Roughly. The 〈delim〉 rules are slightly too
       powerful, for simplicity.)

      <h3 id=serializing-anb><span class=secno>8.1. </span> Serializing <a
       href="#anb-production"><var>&lt;an+b></var></a></h3>

      <p> To serialize an <a href="#anb-production"><var>&lt;an+b></var></a>
       value, let <var>s</var> initially be the empty string:

      <dl>
       <dt><a href="#a"><var>A</var></a> and <a href="#b"><var>B</var></a>
        are both zero

       <dd> Append "0" to <var>s</var>.

       <dt><a href="#a"><var>A</var></a> is zero, <a
        href="#b"><var>B</var></a> is non-zero

       <dd> Serialize <a href="#b"><var>B</var></a> and append it to
        <var>s</var>.

       <dt><a href="#a"><var>A</var></a> is non-zero, <a
        href="#b"><var>B</var></a> is zero

       <dd> Serialize <a href="#a"><var>A</var></a> and append it to
        <var>s</var>. Append "n" to <var>s</var>.

       <dt><a href="#a"><var>A</var></a> and <a href="#b"><var>B</var></a>
        are both non-zero

       <dd> Serialize <a href="#a"><var>A</var></a> and append it to
        <var>s</var>. Append "n" to <var>s</var>. If <a
        href="#b"><var>B</var></a> is positive, append "+" to <var>s</var>
        Serialize <a href="#b"><var>B</var></a> and append it to
        <var>s</var>.
      </dl>

      <p> Return <var>s</var>. <!--

TTTTTTTTTTTTTTTTTTTTTTTHHHHHHHHH     HHHHHHHHHEEEEEEEEEEEEEEEEEEEEEE
T:::::::::::::::::::::TH:::::::H     H:::::::HE::::::::::::::::::::E
T:::::::::::::::::::::TH:::::::H     H:::::::HE::::::::::::::::::::E
T:::::TT:::::::TT:::::THH::::::H     H::::::HHEE::::::EEEEEEEEE::::E
TTTTTT  T:::::T  TTTTTT  H:::::H     H:::::H    E:::::E       EEEEEE
				T:::::T          H:::::H     H:::::H    E:::::E
				T:::::T          H::::::HHHHH::::::H    E::::::EEEEEEEEEE
				T:::::T          H:::::::::::::::::H    E:::::::::::::::E
				T:::::T          H:::::::::::::::::H    E:::::::::::::::E
				T:::::T          H::::::HHHHH::::::H    E::::::EEEEEEEEEE
				T:::::T          H:::::H     H:::::H    E:::::E
				T:::::T          H:::::H     H:::::H    E:::::E       EEEEEE
			TT:::::::TT      HH::::::H     H::::::HHEE::::::EEEEEEEE:::::E
			T:::::::::T      H:::::::H     H:::::::HE::::::::::::::::::::E
			T:::::::::T      H:::::::H     H:::::::HE::::::::::::::::::::E
			TTTTTTTTTTT      HHHHHHHHH     HHHHHHHHHEEEEEEEEEEEEEEEEEEEEEE



EEEEEEEEEEEEEEEEEEEEEENNNNNNNN        NNNNNNNNDDDDDDDDDDDDD
E::::::::::::::::::::EN:::::::N       N::::::ND::::::::::::DDD
E::::::::::::::::::::EN::::::::N      N::::::ND:::::::::::::::DD
EE::::::EEEEEEEEE::::EN:::::::::N     N::::::NDDD:::::DDDDD:::::D
	E:::::E       EEEEEEN::::::::::N    N::::::N  D:::::D    D:::::D
	E:::::E             N:::::::::::N   N::::::N  D:::::D     D:::::D
	E::::::EEEEEEEEEE   N:::::::N::::N  N::::::N  D:::::D     D:::::D
	E:::::::::::::::E   N::::::N N::::N N::::::N  D:::::D     D:::::D
	E:::::::::::::::E   N::::::N  N::::N:::::::N  D:::::D     D:::::D
	E::::::EEEEEEEEEE   N::::::N   N:::::::::::N  D:::::D     D:::::D
	E:::::E             N::::::N    N::::::::::N  D:::::D     D:::::D
	E:::::E       EEEEEEN::::::N     N:::::::::N  D:::::D    D:::::D
EE::::::EEEEEEEE:::::EN::::::N      N::::::::NDDD:::::DDDDD:::::D
E::::::::::::::::::::EN::::::N       N:::::::ND:::::::::::::::DD
E::::::::::::::::::::EN::::::N        N::::::ND::::::::::::DDD
EEEEEEEEEEEEEEEEEEEEEENNNNNNNN         NNNNNNNDDDDDDDDDDDDD
-->

      <h2 id=conformance><span class=secno>9. </span> Conformance</h2>

      <h3 id=conventions><span class=secno>9.1. </span> Document conventions</h3>

      <p>Conformance requirements are expressed with a combination of
       descriptive assertions and RFC 2119 terminology. The key words
       “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL
       NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”,
       and “OPTIONAL” in the normative parts of this document are to be
       interpreted as described in RFC 2119. However, for readability, these
       words do not appear in all uppercase letters in this specification.

      <p>All of the text of this specification is normative except sections
       explicitly marked as non-normative, examples, and notes. <a
       href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

      <p>Examples in this specification are introduced with the words “for
       example” or are set apart from the normative text with
       <code>class="example"</code>, like this:

      <div class=example>
       <p>This is an example of an informative example.
      </div>

      <p>Informative notes begin with the word “Note” and are set apart
       from the normative text with <code>class="note"</code>, like this:

      <p class=note>Note, this is an informative note.

      <h3 id=conformance-classes><span class=secno>9.2. </span> Conformance
       classes</h3>

      <p>Conformance to CSS Syntax Module Level 3 is defined for three
       conformance classes:

      <dl>
       <dt><dfn id=style-sheet
        title="style sheet!!as conformance class">style sheet</dfn>

       <dd>A <a
        href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style
        sheet</a>.

       <dt><dfn id=renderer>renderer</dfn>

       <dd>A <a
        href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that
        interprets the semantics of a style sheet and renders documents that
        use them.

       <dt><dfn id=authoring-tool>authoring tool</dfn>

       <dd>A <a
        href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that
        writes a style sheet.
      </dl>

      <p>A style sheet is conformant to CSS Syntax Module Level 3 if it is
       syntactically valid according to this module.

      <p>A renderer is conformant to CSS Syntax Module Level 3 if it parses a
       stylesheet according to this module.

      <p>An authoring tool is conformant to CSS Syntax Module Level 3 if it
       writes style sheets that are syntactically valid according to this
       module.

      <h2 class=no-num id=acknowledgments> Acknowledgments</h2>

      <p> Thanks for feedback and contributions from David Baron, 呂康豪
       (Kang-Hao Lu), and Simon Sapin.

      <h2 class=no-num id=references> References</h2>

      <h3 class=no-num id=normative-references> Normative references</h3>
      <!--begin-normative--> <!-- Sorted by label -->
      <dl class=bibliography>
       <dd
        style="display: none"><!-- keeps the doc valid if the DL is empty -->
        <!---->

       <dt id=RFC2119>[RFC2119]

       <dd>S. Bradner. <a
        href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in
        RFCs to Indicate Requirement Levels.</cite></a> Internet RFC 2119.
        URL: <a
        href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
       </dd>
       <!---->
      </dl>
      <!--end-normative-->
      <h3 class=no-num id=other-references> Other references</h3>
      <!--begin-informative--> <!-- Sorted by label -->
      <dl class=bibliography>
       <dd
        style="display: none"><!-- keeps the doc valid if the DL is empty -->
        <!---->

       <dt id=SELECT>[SELECT]

       <dd>Tantek Çelik; et al. <a
        href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/"><cite>Selectors
        Level 3.</cite></a> 29 September 2011. W3C Recommendation. URL: <a
        href="http://www.w3.org/TR/2011/REC-css3-selectors-20110929/">http://www.w3.org/TR/2011/REC-css3-selectors-20110929/</a>
       </dd>
       <!---->
      </dl>
      <!--end-informative-->
      <h2 class=no-num id=index> Index</h2>
      <!--begin-index-->
      <ul class=indexlist>
       <li>A, <a href="#a" title="section 6."><strong>6.</strong></a>

       <li>&lt;an+b>, <a href="#anb-production"
        title="section 6.2."><strong>6.2.</strong></a>

       <li>An+B, <a href="#anb0" title="section 6."><strong>6.</strong></a>

       <li>are a valid escape, <a
        href="#check-if-two-characters-are-a-valid-esca0"
        title="section 4.3.7."><strong>4.3.7.</strong></a>

       <li>ASCII case-insensitive, <a href="#ascii-case-insensitive"
        title="section 5.2."><strong>5.2.</strong></a>

       <li>at-rule, <a href="#at-rule"
        title="section 5."><strong>5.</strong></a>, <a href="#at-rules"
        title="section 2."><strong>2.</strong></a>

       <li>authoring tool, <a href="#authoring-tool"
        title="section 9.2."><strong>9.2.</strong></a>

       <li>B, <a href="#b" title="section 6."><strong>6.</strong></a>

       <li>check if three characters would start an identifier, <a
        href="#check-if-three-characters-would-start-an0"
        title="section 4.3.8."><strong>4.3.8.</strong></a>

       <li>check if three characters would start a number, <a
        href="#check-if-three-characters-would-start-a-0"
        title="section 4.3.9."><strong>4.3.9.</strong></a>

       <li>check if two characters are a valid escape, <a
        href="#check-if-two-characters-are-a-valid-esca0"
        title="section 4.3.7."><strong>4.3.7.</strong></a>

       <li>component value, <a href="#component-value"
        title="section 5."><strong>5.</strong></a>

       <li>Consume a component value, <a href="#consume-a-component-value0"
        title="section 5.4.6."><strong>5.4.6.</strong></a>

       <li>Consume a declaration, <a href="#consume-a-declaration0"
        title="section 5.4.5."><strong>5.4.5.</strong></a>

       <li>Consume a function, <a href="#consume-a-function0"
        title="section 5.4.8."><strong>5.4.8.</strong></a>

       <li>Consume a list of declarations, <a
        href="#consume-a-list-of-declarations0"
        title="section 5.4.4."><strong>5.4.4.</strong></a>

       <li>Consume a list of rules, <a href="#consume-a-list-of-rules0"
        title="section 5.4.1."><strong>5.4.1.</strong></a>

       <li>Consume a name, <a href="#consume-a-name0"
        title="section 4.3.10."><strong>4.3.10.</strong></a>

       <li>Consume an at-rule, <a href="#consume-an-at-rule0"
        title="section 5.4.2."><strong>5.4.2.</strong></a>

       <li>Consume an escaped character, <a
        href="#consume-an-escaped-character0"
        title="section 4.3.6."><strong>4.3.6.</strong></a>

       <li>Consume a number, <a href="#consume-a-number0"
        title="section 4.3.11."><strong>4.3.11.</strong></a>

       <li>Consume a numeric token, <a href="#consume-a-numeric-token0"
        title="section 4.3.2."><strong>4.3.2.</strong></a>

       <li>Consume a qualified rule, <a href="#consume-a-qualified-rule0"
        title="section 5.4.3."><strong>5.4.3.</strong></a>

       <li>Consume a simple block, <a href="#consume-a-simple-block0"
        title="section 5.4.7."><strong>5.4.7.</strong></a>

       <li>Consume a string token, <a href="#consume-a-string-token0"
        title="section 4.3.3."><strong>4.3.3.</strong></a>

       <li>Consume a token, <a href="#consume-a-token0"
        title="section 4.3.1."><strong>4.3.1.</strong></a>

       <li>Consume a unicode-range token, <a
        href="#consume-a-unicode-range-token0"
        title="section 4.3.5."><strong>4.3.5.</strong></a>

       <li>Consume a url token, <a href="#consume-a-url-token"
        title="section 4.3.4."><strong>4.3.4.</strong></a>

       <li>Consume the remnants of a bad url, <a
        href="#consume-the-remnants-of-a-bad-url0"
        title="section 4.3.13."><strong>4.3.13.</strong></a>

       <li>Convert a string to a number, <a
        href="#convert-a-string-to-a-number0"
        title="section 4.3.12."><strong>4.3.12.</strong></a>

       <li>current input character, <a href="#current-input-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>current input token, <a href="#current-input-token"
        title="section 5.2."><strong>5.2.</strong></a>

       <li><code>&lt;dashndashdigit-ident></code>, <a
        href="#ltdashndashdigit-ident"
        title="section 6.2."><strong>6.2.</strong></a>

       <li>declaration, <a href="#declaration"
        title="section 5."><strong>5.</strong></a>

       <li><var>&lt;declaration-list></var>, <a href="#ltdeclaration-list"
        title="section 7.1."><strong>7.1.</strong></a>

       <li>decode, <a href="#decode"
        title="section 3.2."><strong>3.2.</strong></a>

       <li>digit, <a href="#digit"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>ending token, <a href="#ending-token"
        title="section 5.4.7."><strong>5.4.7.</strong></a>

       <li>end of the range, <a href="#end-of-the-range"
        title="section 4.3.14."><strong>4.3.14.</strong></a>

       <li>〈EOF〉, <a href="#eof"
        title="section 5.2."><strong>5.2.</strong></a>

       <li>EOF character, <a href="#eof-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>function, <a href="#function"
        title="section 5."><strong>5.</strong></a>

       <li>get an encoding, <a href="#get-an-encoding"
        title="section 3.2."><strong>3.2.</strong></a>

       <li>hex digit, <a href="#hex-digit"
        title="section 4.2."><strong>4.2.</strong></a>

       <li><code>&lt;integer></code>, <a href="#ltinteger"
        title="section 6.2."><strong>6.2.</strong></a>

       <li>letter, <a href="#letter"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>lowercase letter, <a href="#lowercase-letter"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>maximum allowed codepoint, <a href="#maximum-allowed-codepoint"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>name character, <a href="#name-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>name-start character, <a href="#name-start-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li><code>&lt;ndashdigit-dimension></code>, <a
        href="#ltndashdigit-dimension"
        title="section 6.2."><strong>6.2.</strong></a>

       <li><code>&lt;ndashdigit-ident></code>, <a href="#ltndashdigit-ident"
        title="section 6.2."><strong>6.2.</strong></a>

       <li><code>&lt;n-dimension></code>, <a href="#ltn-dimension"
        title="section 6.2."><strong>6.2.</strong></a>

       <li>newline, <a href="#newline"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>next input character, <a href="#next-input-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>next input token, <a href="#next-input-token"
        title="section 5.2."><strong>5.2.</strong></a>

       <li>non-ASCII character, <a href="#non-ascii-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>non-printable character, <a href="#non-printable-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>Parse a component value, <a href="#parse-a-component-value0"
        title="section 5.3.4."><strong>5.3.4.</strong></a>

       <li>Parse a list of component values, <a
        href="#parse-a-list-of-component-values0"
        title="section 5.3.5."><strong>5.3.5.</strong></a>

       <li>Parse a list of declarations, <a
        href="#parse-a-list-of-declarations0"
        title="section 5.3.3."><strong>5.3.3.</strong></a>

       <li>Parse a rule, <a href="#parse-a-rule0"
        title="section 5.3.2."><strong>5.3.2.</strong></a>

       <li>Parse a stylesheet, <a href="#parse-a-stylesheet0"
        title="section 5.3.1."><strong>5.3.1.</strong></a>

       <li>parse error, <a href="#parse-errors"
        title="section 3."><strong>3.</strong></a>

       <li>preserved tokens, <a href="#preserved-tokens"
        title="section 5."><strong>5.</strong></a>

       <li>qualified rule, <a href="#qualified-rule"
        title="section 2."><strong>2.</strong></a>, <a
        href="#qualified-rule0" title="section 5."><strong>5.</strong></a>

       <li>reconsume the current input character, <a
        href="#reconsume-the-current-input-character"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>reconsume the current input token, <a
        href="#reconsume-the-current-input-token"
        title="section 5.2."><strong>5.2.</strong></a>

       <li>renderer, <a href="#renderer"
        title="section 9.2."><strong>9.2.</strong></a>

       <li><var>&lt;rule-list></var>, <a href="#ltrule-list"
        title="section 7.1."><strong>7.1.</strong></a>

       <li>Set the 〈unicode-range〉’s range, <a
        href="#set-the-unicode-ranges-range0"
        title="section 4.3.14."><strong>4.3.14.</strong></a>

       <li><code>&lt;signed-integer></code>, <a href="#ltsigned-integer"
        title="section 6.2."><strong>6.2.</strong></a>

       <li><code>&lt;signless-integer></code>, <a href="#ltsignless-integer"
        title="section 6.2."><strong>6.2.</strong></a>

       <li>simple block, <a href="#simple-block"
        title="section 5."><strong>5.</strong></a>

       <li>start of the range, <a href="#start-of-the-range"
        title="section 4.3.14."><strong>4.3.14.</strong></a>

       <li>starts with an identifier, <a
        href="#check-if-three-characters-would-start-an0"
        title="section 4.3.8."><strong>4.3.8.</strong></a>

       <li>starts with a number, <a
        href="#check-if-three-characters-would-start-a-0"
        title="section 4.3.9."><strong>4.3.9.</strong></a>

       <li>starts with a valid escape, <a
        href="#check-if-two-characters-are-a-valid-esca0"
        title="section 4.3.7."><strong>4.3.7.</strong></a>

       <li>start with an identifier, <a
        href="#check-if-three-characters-would-start-an0"
        title="section 4.3.8."><strong>4.3.8.</strong></a>

       <li>start with a number, <a
        href="#check-if-three-characters-would-start-a-0"
        title="section 4.3.9."><strong>4.3.9.</strong></a>

       <li><var>&lt;stylesheet></var>, <a href="#ltstylesheet"
        title="section 7.1."><strong>7.1.</strong></a>

       <li>style sheet
        <ul>
         <li>as conformance class, <a href="#style-sheet"
          title="section 9.2."><strong>9.2.</strong></a>
        </ul>

       <li>uppercase letter, <a href="#uppercase-letter"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>whitespace, <a href="#whitespace"
        title="section 4.2."><strong>4.2.</strong></a>

       <li>would start an identifier, <a
        href="#check-if-three-characters-would-start-an0"
        title="section 4.3.8."><strong>4.3.8.</strong></a>

       <li>would start a number, <a
        href="#check-if-three-characters-would-start-a-0"
        title="section 4.3.9."><strong>4.3.9.</strong></a>
      </ul>
      <!--end-index-->
      <h2 class=no-num id=property-index> Property index</h2>
      <!--begin-properties-->
      <table class=proptable>
       <thead>
        <tr>
         <th>Property

         <th>Values

         <th>Initial

         <th>Applies to

         <th>Inh.

         <th>Percentages

         <th>Media

       <tbody>
      </table>
      <!--end-properties-->
    </ol>
  </ol>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
