<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Ruby Module Level 1</title>
  <link rel=contents href="#contents">
  <link rel=index href="#index">
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css">
</head>

<body class="h-entry">

<div class="head">
<!--logo-->

<h1 class="p-name">CSS Ruby Module Level 1</h1>

<h2 class="no-num no-toc">[LONGSTATUS] <time class="dt-updated" datetime="[CDATE]">[DATE]</time> <!-- for HTML4 doctype: <span class="value-title" title="[CDATE]">[DATE]</span></span> --> </h2>
<dl>
  <dt>This version:
    <dd><a class="u-url" href="[VERSION]">[VERSION]</a>

  <dt>Latest version:
    <dd><a href="http://www.w3.org/TR/[SHORTNAME]/">http://www.w3.org/TR/css3-ruby/</a>

  <dt>Editor's draft:
    <dd><a href="http://dev.w3.org/csswg/[SHORTNAME]/">http://dev.w3.org/csswg/[SHORTNAME]/</a>
    (<a href="https://dvcs.w3.org/hg/csswg/log/tip/[SHORTNAME]/Overview.src.html">change log</a>)

  <dt>Previous version:
    <dd><a href="http://www.w3.org/TR/2011/WD-css3-ruby-20110630/">
    http://www.w3.org/TR/2011/WD-css3-ruby-20110630/</a>

  <dt>Issue Tracking:</dt>
    <dd><a rel="issues" href="http://www.w3.org/Style/CSS/Tracker/products/FIXME">http://www.w3.org/Style/CSS/Tracker/products/FIXME</a>

  <dt>Feedback:</dt>
    <dd><a href="mailto:www-style@w3.org?subject=%5BSHORTNAME%5D%20feedback"
         >www-style@w3.org</a> 
         with subject line &ldquo;<kbd>[[SHORTNAME]] 
         <var>&hellip; message topic &hellip;</var></kbd>&rdquo;
         (<a rel="discussion" href="http://lists.w3.org/Archives/Public/www-style/"
           >archives</a>)

  <dt>Editors:
    <dd class="p-author h-card vcard">
      <a class="p-name fn u-url url" rel="author"
         href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>,
      <a class="p-org org h-org" href="http://www.mozilla.org/">Mozilla</a>
    <dd class="p-author h-card vcard">
      <a class="p-name fn u-url url" rel="author"
         href="mailto:koji.a.ishii@mail.rakuten.com">Koji Ishii</a>,
      <span class="p-org org">Rakuten, Inc.</span>
    <dd class="p-author h-card vcard">
      <a class="p-name fn u-url url" rel="author"
         href="mailto:ishida@w3.org">Richard Ishida</a>,
      <span class="p-org org">W3C</span>

  <dt>Former editors:
    <dd>Michel Suignard, Microsoft
    <dd>Marcin Sawicki, Microsoft
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>
  <span class="p-summary">
    “Ruby” are short runs of text alongside the base text,
    typically used in East Asian documents to indicate pronunciation
    or to provide a short annotation.
    This module describes the rendering model and formatting controls
    related to displaying ruby annotations in CSS.
  </span>
  
  <a href="http://www.w3.org/TR/CSS/">CSS</a> is a language for describing
  the rendering of structured documents (such as HTML and XML) on screen, on
  paper, in speech, etc.

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<!--status-->

<p>The following features are at risk: &hellip;

<h2 class="no-num no-toc" id="contents">
Table of Contents</h2>

<!--toc-->

<h2 id="intro">
Introduction</h2>

  <p><em>This section is not normative.</em>

<h3 id="placement">
Module interactions</h3>

  <p>This module extends the inline box model of CSS Level 2 [[!CSS21]]
  to support ruby.

  <p>None of the properties in this module apply to the <code>::first-line</code> or
  <code>::first-letter</code> pseudo-elements.

<h3 id="values">
Values</h3>

  <p>This specification follows the
  <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
  definition conventions</a> from [[!CSS21]]. Value types not defined in
  this specification are defined in CSS Level 2 Revision 1 [[!CSS21]].
  Other CSS modules may expand the definitions of these value types: for
  example [[CSS3VAL]], when combined with this module, expands the
  definition of the <var>&lt;length&gt;</var> value type as used in this specification.</p>
  
  <p>In addition to the property-specific values listed in their definitions,
  all properties defined in this specification also accept the
  <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>
  keyword as their property value. For readability it has not been repeated
  explicitly.

<h3 id="conventions">
Document conventions</h3>

<p>There are a number of illustrations in this document for which the following
legend is used:</p>

<p><img alt="Symbolic wide-cell glyph representation" class="example"
width="39" height="39" src="images/fullwidth.gif" />  - wide-cell glyph (e.g. Han)
which is the <i>n</i>-th character in the text run, they may also appear as
half size boxes when used as annotations.<br />
<img alt="Symbolic narrow-cell glyph representation" class="example"
width="19" height="39" src="images/halfwidth.gif" /> - narrow-cell glyph (e.g. Roman)
which is the <i>n</i>-th glyph in the text run.<br />
</p>

<p>Many typographical properties in East Asian typography depend on the fact 
that a character is typically rendered as either a wide or narrow character. All 
characters described by the Unicode Standard [[UNICODE]] can be categorized by a
width property. This is covered by the Unicode Standard Annex 
[[UAX11]]</a>. </p>

<p>The orientation which the above symbols assume in the diagrams corresponds
to the orientation that the glyphs they represent are intended to assume when
rendered by the user agent. Spacing between these characters in the diagrams is
usually symbolic, unless intentionally changed to make a point.</p>

<h3 id="ruby-def">
What is ruby?</h3>

<p>"Ruby" is the commonly used name for a run of text that appears in the
immediate vicinity of another run of text, referred to as the "base", and
serves as an annotation or a pronunciation guide associated with that run of
text. Ruby, as used in Japanese, is described in JIS X-4051 [[JIS4051]] (in Japanese) and  in Requirements for Japanese Text Layout [[JLREQ]] (in English and Japanese)]. The ruby structure and the XHTML markup to represent it
is described in the Ruby Annotation [[RUBY]] specification. This
section describes the CSS properties relevant to ruby. The following figures
show two examples of Ruby.</p>

<div class="figure">
<p>
<img alt="Example of ruby applied on top of a Japanese expression"
class="example" src="images/licence.png" /></p>

<p><b>Figure 2.2.1</b>: Example of ruby used in Japanese (simple case)</p>
</div>

<div class="figure">
<p>
<img
alt="Example showing complex ruby with annotation text before and after 
the base characters"
class="example" src="images/ruby-univ.gif" width="277" height="108" /></p>

<p><strong>Figure 2.2.2</strong>: Complex ruby with annotation text before and after 
the base characters</p>
</div>

<p>In the first example, a single annotation is used to annotate the base 
sequence. In Japanese typography, this simple case is sometimes called&nbsp; &quot;<span lang="ja">taigo</span> ruby&quot; or group-ruby  (per-word ruby).</p>

<p>In the second example, multiple annotations are attached to a base
sequence, the hiragana characters on top refer to the pronunciation of each of the
base Kanji characters (annotated in a <a href="#g-monoruby">mono-ruby</a> fashion), while the words 'Keio' 
and 'University' on the bottom are
annotations describing the English translation of respectively the first four 
and the last two Kanji characters
of the base. To allow correct association between the hiragana characters and 
their corresponding Kanji base characters, the spacing between these Kanji 
characters may be adjusted (this happens around the fourth Kanji character in the 
figure 2.2.2 above).</p>

<p class="Note"><span class="note-label">Note:</span> To avoid variable spacing between the Kanji 
characters in the example above the hiragana annotations can also be created as 
a simple annotation ruby.</p>

<p>The two examples correspond respectively to two types of ruby: simple ruby using  simple ruby markup and complex ruby using  complex ruby
markup.</p>

<h2 id="ruby-model">
Ruby Formatting Model</h2>

<h3 id="display">
Ruby specific 'display' property values</h3>

<p>The CSS ruby model is based on the W3C Ruby Annotation Recommendation [[RUBY]].
The Recommendation specifies the ruby structure in a way to closely parallel
the visual layout of the ruby element. In this model, a ruby consists of one
or more base elements associated with one or more annotation elements.</p>

<p>The CSS model does not require that the document language include elements
that correspond to each of these components. For document languages (such as
XML applications) that do not have pre-defined ruby elements, authors must map
document language elements to ruby elements; this is done with the 'display'
property. The following 'display' values assign ruby semantics to an arbitrary
element:</p>
<dl>
  <dt><strong>ruby</strong> (in XHTML: ruby)</dt>
    <dd>Specifies that an element defines a ruby structure.</dd>
  <dt><strong>ruby-base</strong> (in  XHTML: rb)</dt>
    <dd>Specifies that an element defines a ruby base.</dd>
  <dt><strong>ruby-text</strong> (in XHTML: rt)</dt>
    <dd>Specifies that an element defines a ruby text.</dd>
  <dt><strong>ruby-base-container</strong> (in XHTML: rbc)</dt>
    <dd>Specifies that an element contains one or more ruby base.</dd>
  <dt><strong>ruby-text-container</strong> (in XHTML: rtc)</dt>
    <dd>Specifies that an element contains one or more ruby text.</dd>
</dl>

<p class="issue"><span class="issuehead">Issue:&nbsp;</span> I18n WG proposes that there should be a display value rp also, to allow XML-based formats to associate rp behaviour with elements. See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20display:+rp+value&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">thread</a>.</p>

<p>The <a
href="http://www.w3.org/TR/ruby/#ruby"><samp>rbspan</samp></a> attribute should 
also be used by XML applications to allow annotation spanning; but in addition, the 
'<a href="#ruby-span">ruby-span</a>' property must be used by those applications to indicate to the user agent the number of 
ruby base elements to be spanned.</p>

<h3 id="box-model">
Ruby box model</h3>

<p class="issue"><span class="issuehead">Issue:&nbsp;</span> The spec needs to address anonymous box generation rules (and to make them compatible with HTML5 ruby markup).</p>
<p>In the following description, the elements specified by   Ruby 
Annotation [[RUBY]] are used to describe the box model. As mentioned
earlier, a user agent can obtain the same results by using the Ruby specific 'display' 
property values. </p>

<p>For a user agent that supports the ruby markup, the ruby structure consists of three or more
boxes. The outermost container is the <a
href="http://www.w3.org/TR/ruby/#ruby"><samp>ruby</samp></a> element itself.
In the simple case, it is a container for two non-overlapping boxes: the ruby
text box (<a href="http://www.w3.org/TR/ruby/#rt"><samp>rt</samp></a> element)
and the ruby base box (<a
href="http://www.w3.org/TR/ruby/#rb"><samp>rb</samp></a> element). The
positioning of these two boxes relative to each other is controlled by the <a
href="#rubypos">'ruby-position'</a> property.</p>

<div class="figure">
<img class="example" width="223" height="93"
alt="Diagram of the ruby box model    consisting of two boxes, one on top of the other, enclosed within a third box representing the ruby element"
src="images/r-box-t.gif" />

<p><b>Figure 3.2.1</b>: Ruby box model (simple case)</p>
</div>

<p>In the case of complex ruby, the ruby element is a container for two or
three non-overlapping boxes: one ruby base collection (<a
href="http://www.w3.org/TR/ruby/#rbc"><samp>rbc</samp></a> element), and one
or two ruby text collections (<a
href="http://www.w3.org/TR/ruby/#rtc"><samp>rtc</samp></a> element). The
<samp>rbc</samp> element is itself a container for one or several ruby base
box (<samp>rb</samp> element), while each <samp>rtc</samp> element is a
container for one or several ruby text box (rt element). The position of the
<samp>rtc</samp> element in relation to the related <samp>rbc</samp> element
is controlled by the <a href="#rubypos">'ruby-position'</a> property. The two
following figures show examples of these complex ruby.</p>

<div class="figure">
<img src="images/r-box-g.gif"
alt="Diagram of a group ruby with a full ruby    text above and partial ruby text below" width="408" height="170" />

<p><b>Figure 3.2.2</b>: Ruby box model (complex ruby with an empty rt element
after)</p>
</div>

<p>In the example above, the ruby text after (below) the ruby bases contains two <samp>rt</samp> elements with the first one
being empty, the empty <samp>rt</samp> element corresponds to the first part
of the ruby base collection (the first part is identified by the first <samp>rb</samp>  element
within the <samp> rbc</samp> element).</p>

<div class="figure">
<img src="images/r-box-h.gif"
alt="Diagram of a group ruby with a spanning    ruby text above and partial ruby text below" width="400" height="173" />

<p><b>Figure 3.2.3</b>: Ruby box model (complex ruby with a spanning ruby text
element)</p>
</div>

<p>In the example above, the ruby text before (above) the ruby bases spans the whole ruby base collection. The 
ruby text after (below) the ruby bases still contain two <samp>rt</samp> elements, one of
which is empty. The spanning behavior of <samp>rt</samp> text elements is
controlled by the <a
href="http://www.w3.org/TR/ruby/#ruby"><samp>rbspan</samp></a> attribute in a
way similar to the <samp>colspan</samp> attribute used for table column.</p>

<p class="issue"><span class="issuehead">Issue:&nbsp;</span> The examples above contain the term 'group ruby', which is not used elsewhere in this specification. It appears to be used in a way that is different to the use of the term in JLREQ. I propose to replace it with just 'ruby'.</p>
<p class="note"><span class="note-label">Note:</span> The visual description of the ruby elements does not refer 
necessarily to the logical orders of the elements</p>

<p>The width of the ruby box is by default determined by its widest child
element, whose width in turn is determined by its content. The width of all direct
children of the <samp>ruby</samp> element is the width of the widest children. In this respect, the ruby
box is much like a two or three row <samp>table</samp> element, with the
following exceptions:</p>
<ul>
  <li>the ruby box is an inline element, like an image, even though it itself,
    like a table, is a container of other boxes</li>
  <li>the equivalent of the cells: the <samp>rb</samp> element and the
    <samp>rt</samp> text element can only contain inline-level elements.</li>
  <li>the content of each 'cell' is always measured at its maximum width</li>
  <li>unlike a table, a ruby element doesn't have to fit in a line, the ruby
    box may be split into several boxes at line boundary, depending of the
    spanning of the ruby texts. This is however only possible for the complex
    ruby and can only happen at the boundary of non spanning elements.</li>
  <li>both the ruby text and the ruby base boxes may overlap with adjacent
    text (outside of the ruby element) if an appropriate <a
    href="#rubyover">'ruby-overhang'</a> parameter is set via CSS. Note
    however that the actual content of the ruby base cannot overlap with that
    adjacent text. The distribution of the content of the ruby base within the
    ruby base box is controlled by the <a href="#rubyalign">'ruby-align'</a>
    property.</li>
</ul>

<p>If the ruby text is not allowed to overhang, then the ruby behaves like a
traditional box, i.e. only its contents are rendered within its boundaries and
adjacent elements do not cross the box boundary:</p>

<div class="figure">
<p><img class="example" width="220" height="91"
alt="Diagram showing the ruby boxes interacting with adjacent text"
src="images/ro-n.gif" /></p>

<p><b>Figure 3.2.4</b>: Simple ruby whose text is not allowed to overhang
adjacent text</p>
</div>

<p>However, if ruby text is allowed to overhang adjacent elements and it
happens to be wider than its base, then the adjacent content is partially
rendered within the area of the ruby base box, while the ruby text may be
partially overlapping with the upper blank parts of the adjacent content:</p>

<div class="figure">
<p><img class="example" width="177" height="91"
alt="Diagram showing the ruby boxes interacting with adjacent text"
src="images/ro-a.gif" /></p>

<p><b>Figure 3.2.5</b>: Simple ruby whose text is allowed to overhang adjacent
text</p>
</div>

<p>The ruby text related to a ruby base can never overhang another ruby
base.</p>

<p>The alignment of the contents of the base or the ruby text is not affected
by the overhanging behavior. The alignment is achieved the same way regardless
of the overhang behavior setting and it is computed before the space available
for overlap is determined. It is controlled by the <a
href="#rubyalign">'ruby-align'</a> property.</p>

<p>The exact circumstances in which the ruby text will overhang other
elements, and to what degree it will do so, will be controlled by the <a
href="#rubyover">'ruby-overhang'</a> property.</p>

<p>This entire logic applies the same way in vertical ideographic layout, only
the dimension in which it works in such a layout is vertical, instead of
horizontal.</p>

<p class="note"><span class="note-label">Note:</span> Because the purpose of the XHTML <samp>rp</samp> element
[[RUBY]] is to allow pre-existing user agents
to parenthesize ruby text content, an XHTML user agent should use a styling rule 
for these elements that avoids rendering them such as&nbsp; <samp>rp {display: 
none}</samp>.</p>

<h3 id="ruby-line-height">
Ruby box and line stacking</h3>

<p>The interaction of the ruby box and line stacking is controlled by the 
'line-stacking-ruby' property described in the CSS3 Line Module. That property 
takes two values: 'include-ruby' and 'exclude-ruby. Depending on the property 
value, the ruby box is considered or excluded for line stacking. Even if the 
ruby box is considered for line stacking, some values of the 
'line-stacking-strategy' property (also described in the CSS3 Line module) can 
still create occurrences where a the ruby box will eventually be ignored (e.g. 
case where the 'line-stacking-strategy' value is 'block-line-height').</p>

<p>In the following figure, each line box is shown with leading space 
distributed before and after the two text segments ('Previous line' and 'Ruby 
base'); the dotted lines show the line box for each line. The 
'line-stacking-ruby' property is set to 'exclude-ruby'. The achieved effect is 
that the ruby box does not affect the line to line spacing. It is however the 
responsibility of the style author to avoid 'bleeding' effects between the ruby 
text and the surrounding text of images.</p>

<div class="figure">
<p>
<img class="example" 
alt="Diagram showing the ruby text using 2 half leading"
src="images/rlh-a.gif" width="210" height="138" /></p>

<p><b>Figure 3.3.1</b>: Excluded Ruby text</p>
</div>


<p>In the following figure, the line boxes have no extra leading space. The 
'line-stacking-ruby' property is set to 'include-ruby' and the 
'line-stacking-strategy' property is set to a value where inline boxes are 
considered for line stacking. In this case, the line box with 
the ruby text is affected and has its 'stack-height' increased by the amount 
necessary to fit the ruby text.</p>

<div class="figure">
<p>
<img class="example" 
alt="Diagram showing the ruby text expanding above base text"
src="images/rlh-b.gif" width="210" height="111" /></p>

<p><b>Figure 3.3.2</b>: Ruby text increasing line height</p>
</div>
<p>This mechanism allows rendering of evenly spaced lines of text within a
block-level element, whether a line contains ruby or not. The authors need
only to set for the block-level element a line height value larger than the
computed line-height of the largest ruby element within the block.</p>

<h3 id="ruby-line-breaking">
Ruby box and line breaking</h3>

<p>When a ruby falls at the end of a line where there is not sufficient room for the entire ruby to fit on the line, the complex ruby may be broken at locations where boxes of the ruby container align. Some examples are provided below to provide more clarity.</p>

<p>
<img class="example" 
alt="Diagram showing the line breaking opportunity in a complex ruby"
src="images/r-break-a.gif" width="408" height="201" /></p>

<p><b>Figure 3.4.1</b>: Complex ruby line breaking opportunity</p>

<p>
<img class="example" 
alt='Diagram showing the line breaking opportunity in a "Bopomofo" ruby'
src="images/r-break-b.gif" width="300" height="90" /></p>

<p><b>Figure 3.4.1</b>: "Bopomofo" ruby line breaking opportunity</p>
<p class="issue"><span class="issuehead">Issue:&nbsp;</span> Line breaks should only be allowed within ruby if the ruby base text can be broken at that point. E.g. if complex Ruby is used to annotate the two morphemes of &quot;butterfly&quot;, the fact that we have added ruby annotations should not cause a line breaking opportunity to be present between &quot;butter&quot; and &quot;fly&quot; </p>
<h2 id="ruby-props">
Ruby Properties</h2>

<p>All properties, in addition to the noted values, take 'initial' and 
'inherit'. These values are not repeated in each of the property value 
enumeration. </p>

<h3 id="rubypos">
Ruby positioning: the 'ruby-position' property</h3>

  <table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>ruby-position</dfn>
          <tr>
            <th>Value:
            <td>before | after | inter-character | inline
          <tr>
            <th>Initial:
            <td>before
          <tr>
            <th>Applies to:
            <td>the parent of elements with display: ruby-text.
          <tr>
            <th>Inherited:
            <td>yes
          <tr>
            <th>Percentages:
            <td>N/A
          <tr>
            <th>Media:
            <td>visual
          <tr>
            <th>Computed value:
            <td>specified value (except for initial and inherit)
    <tr>
      <th>Animatable:
      <td>no
    <tr>
      <th>Canonical order:
      <td><abbr title="follows order of property value definition">per grammar</abbr>
  </table>
<p class="issue"><span class="issuehead">Issue:&nbsp;</span> We replaced 'right' with 'inter-character', since that was its original intended purpose and such removes potential ambiguity with 'inline' or 'before'.  Bopomofo ruby needs special handling by the implementation, if ruby is to always appear to the right. (Note that the user may also choose to position bopomofo ruby before the base, in which case they would use the normal 'before' setting.)</p>
<p>This property is used by the parent of elements with display: ruby-text to
  control the position of the ruby text with respect to its base. Such parents
  are typically either the <samp>ruby</samp> element itself (simple ruby) or the
  <samp>rtc</samp> element (complex ruby). This assures that all parts of a <samp>rtc</samp> 
element will be displayed in the same position. Possible values:</p>
<p class="issue"><span class="issuehead">Issue-107:&nbsp;</span> Roland Steiner has requested the addition of an auto value as default. See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=ruby-position%3A+undesirable+default+value+%27before%27+for+complex+ruby&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;period_month=&amp;period_year=&amp;index-grp=Public__FULL&amp;index-type=t&amp;type-index=www-style&amp;resultsperpage=20&amp;sortby=date">this thread</a> and <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=Styling+of+complex+Ruby&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;period_month=&amp;period_year=&amp;index-grp=Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core&amp;resultsperpage=20&amp;sortby=date">this one</a>.</p>
<dl>
	<dt><strong>before</strong></dt>
    <dd>The ruby text appears before the base. This is the most common setting
      used in ideographic East Asian writing systems. This is the initial
      value.

      <div class="figure">
      <p>
      <img
      alt="Diagram of ruby glyph layout in horizontal mode with ruby text appearing above the base"
      class="example" src="images/shinkansen-top.gif" width="140" height="33" /></p>
      <p><b>Figure 4.1.1</b>: Top ruby in horizontal layout applied to
      Japanese text</p>
      </div>
      <p>If the base appears in a vertical-ideographic layout mode, the ruby
      appears on the right side of the base and is rendered in the same layout
      mode as the base (i.e. vertical-ideographic).</p>

      <div class="figure">
      <p>
      <img
      alt="Diagram of ruby glyph layout in vertical mode with ruby text apearing vertically on the right of the base"
      class="example" src="images/shinkansen-right.gif" width="33" height="141" /></p>
      <p><b>Figure 4.1.2</b>: Top ruby in vertical ideographic layout applied
      to Japanese text</p>
      </div>
</dd>
  <dt><strong>after</strong></dt>
    <dd>The ruby text appears after the base. This is a relatively rare
      setting used in ideographic East Asian writing systems, most easily
      found in educational text.

      <div class="figure">
      <p>
      <img
      alt="Diagram of ruby glyph layout in horizontal mode with ruby text appearing below the base"
      class="example" src="images/shinkansen-bottom.gif" width="142" height="36" /></p>
      <p><b>Figure 4.1.3</b>: Bottom ruby in horizontal layout applied to
      Japanese text</p>
      </div>
      <p>If the base appears in a vertical ideographic mode, the bottom ruby
      appears on the left side of the base and is rendered in the same layout
      mode as the base (i.e. vertical).</p>

      <div class="figure">
      <p>
      <img
      alt="Diagram of ruby glyph layout in vertical mode with ruby text apearing vertically on the left of the base"
      class="example" src="images/shinkansen-left.gif" width="37" height="141" /></p>
      <p><b>Figure 4.1.4</b>: Bottom ruby in vertical ideographic layout applied
      to Japanese text</p>
      </div>
    </dd>
  <dt><strong>inter-character</strong></dt>
    <dd>
	  <p class="issue"><span class="issuehead">Issue:&nbsp;</span> We replaced 'right' with 'inter-character', since that was its original intended purpose and such removes potential ambiguity with 'inline' or 'before'.  Bopomofo ruby needs special handling by the implementation, if ruby is to always appear to the right. (Note that the user may also choose to position bopomofo ruby before the base, in which case they would use the normal 'before' setting.)  See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20Vertical+layout+not+enough+for+bopomofo&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">this thread</a> following a request from the i18n WG.</p>
	  <p>The ruby text appears on the right of the base. Unlike 'before' and
      'after', this value is visual and is not relative to the text flow direction.</p>

      <p>This value is provided for the special case of traditional Chinese as used especially in
      Taiwan: ruby (made of <a href="#g-bopomofo"><span
      lang="zh">bopomofo</span></a> glyphs) in that context  appears vertically along
      the right side of the base glyph, whether the layout of the base characters is vertical or horizontal:</p>

      <div class="figure">
      <p><img alt="Example of Taiwanese-style ruby" class="example"
      width="138" height="42" src="images/bopomofo.gif" /></p>
      <p><b>Figure 4.1.5</b>: "<span lang="zh">Bopomofo</span>" ruby in
      traditional Chinese (ruby text shown in blue for clarity) in horizontal
      layout</p>
      </div>
      <p class="note"><span class="note-label">Note:</span> The bopomofo 
      transcription is written in the normal way as part of the ruby text. 
      The user agent is responsible for ensuring the correct relative alignment 
      and positioning of the glyphs, including those corresponding to the 
      tone marks, when displaying. Tone marks are spacing characters that occur in memory at the end of the ruby text for each base character. They are usually displayed in a separate column to the right of the bopomofo characters, and the height of the tone mark depends on the number of characters in the syllable. One tone mark, however, is placed above the bopomofo, not to the right of it.</p>
      <p class="note"><span class="note-label">Note:</span> To make bopomofo annotations appear before or after the base text, like annotations for most other East Asian writing systems, use the 'before' and 'after' values of ruby-position.</p>
	  <p>It is not defined how a user-agent should handle ruby text that is not bopomofo when the value of ruby-position is set to 'right'.</p>
    <!-- See Taiwanese requirements doc for EPUB at http://epub-revision.googlecode.com/files/EGLS_TW_eng.ppt -->
    </dd>
<dt><strong>inline</strong></dt>
<dd>
<p>Ruby text follows the ruby base with no special styling.  The value can be used to disable  ruby text positioning.</p>
<p>If the author has used the XHTML <samp>rp</samp> element [[RUBY]] they should set the <samp>display</samp> value for that element to <samp>inline</samp>, so that the ruby text is distinguishable from the base text.  If no <samp>rp</samp> element has been used, the author can use the <samp>content</samp> property with the <samp>:before</samp> and <samp>:after</samp> pseudo-elements to set off the ruby text. </p>
<p class="issue"><span class="issuehead">Issue:&nbsp;</span> Here is a <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20inline+value+description+missing&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">request </a>for this section to be added, from the i18n WG..</p>
</dd>
</dl>

<p>If two rtc elements are set with the same ruby-position value, (for example 
both &#39;before&#39;), the relative position of the two elements is undefined. This 
setting should not be used.</p>

<h3 id="rubyalign">
Ruby alignment: the 'ruby-align' property</h3>

  <table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>ruby-align</dfn>
    <tr>
      <th>Value:
      <td>auto | start | left | center | end | right | distribute-letter |
      distribute-space | line-edge
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td>all elements and generated content
    <tr>
      <th>Inherited:
      <td>yes
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>specified value (except for initial and inherit)
  </table>

<p>This property can be used on any element to control the text alignment of
the ruby text and ruby base contents relative to each other. It applies to all
the rubys in the element. For simple ruby, the alignment is applied to the
ruby child element whose content is shorter: either the <a
href="http://www.w3.org/TR/ruby/#rb"><samp>rb</samp></a>   element or the <a
href="http://www.w3.org/TR/ruby/#rt"><samp>rt</samp></a> element [[RUBY]].
For complex ruby, the alignment is also applied to the
ruby child elements whose content is shorter: either the <samp>rb</samp>
element and/or one or two <samp>rt</samp> elements for each related ruby text
and ruby base element within the <samp>rtc</samp> and <samp>rbc</samp>
element.</p>

<p>Possible values:</p>
<p class="issue"><span class="issuehead">Issue:&nbsp;</span> Tony Graham has <a href="http://www.w3.org/Style/XSL/Group/FO/wiki/Ruby#Treat_CSS3_.22ruby-align.22_As_Shorthand.3F">suggested </a>that distribute-letter and distribute-space be values of a ruby-group-distribution property, and line-edge be moved to a ruby-alignment-edge property, and that the rest be gathered under a ruby-alignment property. And that ruby-align become a shorthand.</p>
<dl>
	<dt><strong>auto</strong></dt>
    <dd>The user agent determines how the ruby contents are aligned. This is
      the initial value. The behavior recommended by [[JLREQ]] is for  wide-cell ruby  to be aligned in the 'distribute-space' mode:
<div class="figure">
      <p><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in auto aligned ruby when ruby text is shorter than base"
      src="images/ra-ds.gif" /><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in auto aligned ruby when ruby text is longer than base"
      src="images/ra-ds-rb.gif" /></p>
      <p><b>Figure 4.2.1</b>: Wide-cell text in 'auto' ruby alignment is
      'distribute-space' justified</p>
      </div>
      <p>The recommended behavior for  narrow-cell glyph ruby is to be
      aligned in the 'center' mode.</p>

      <div class="figure">
      <p><img
      alt="Diagram of glyph layout in auto aligned ruby when halfwidth ruby text is shorter than base"
      class="example" width="145" height="91"
      src="images/ra-c-h.gif" /><img
      alt="Diagram of character layout in auto aligned ruby when ruby text is longer than narrow-width base"
      class="example" width="145" height="91"
      src="images/ra-c-rb-h.gif" /></p>
      <p><b>Figure 4.2.2</b>: Narrow-width ruby text in 'auto' ruby alignment
      is centered</p>
      </div>
    </dd>
  <dt><strong>left</strong></dt>
    <dd>The ruby text content is aligned with the start edge of the base.
	
	 <p class="issue"><span class="issuehead">Issue:&nbsp;</span> The i18n WG feels that start and left should not be synonymous, and proposed to drop left (there is no left/right in overhang)? See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20left/start+and+right/end&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">this thread</a>.</p>

      <div class="figure">
      <p><img
      alt="Diagram of glyph layout in left aligned ruby when ruby text is shorter than base"
      class="example" width="145" height="91" src="images/ra-l.gif" /><img
      class="example" width="145" height="91"
      alt="Diagram of glyph layout in left aligned ruby when ruby text is longer than base"
      src="images/ra-l-rb.gif" /></p>
      <p><b>Figure 4.2.3</b>: Start ruby alignment</p>
      </div>
    </dd>
  <dt><strong>center</strong></dt>
    <dd>The ruby text content is centered within the width of the base. If the
      length of the base is smaller than the length of the ruby text, then the
      base is centered within the width of the ruby text.

      <div class="figure">
      <p><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in center aligned ruby when ruby text is shorter than base"
      src="images/ra-c.gif" /><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in center aligned ruby when ruby text is longer than base"
      src="images/ra-c-rb.gif" /></p>
      <p><b>Figure 4.2.4</b>: Center ruby alignment</p>
      </div>
    </dd>
  <dt><strong>right</strong></dt>
    <dd>The ruby text content is aligned with the end edge of the base.
    	<p class="issue"><span class="issuehead">Issue:&nbsp;</span> The i18n WG feels that end and right should not be synonymous, and proposed to drop right (there is no left/right in overhang)? See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20left/start+and+right/end&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">this thread</a>.</p>
<div class="figure">
	<p><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in right aligned ruby when ruby text is shorter than base"
      src="images/ra-r.gif" /><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in right aligned ruby when ruby text is longer than base"
      src="images/ra-r-rb.gif" /></p>
	<p><b>Figure 4.2.5</b>: End ruby alignment</p>
</div>
    </dd>
  <dt><strong>distribute-letter</strong></dt>
    <dd>If the width of the ruby text is smaller than that of the base, then
      the ruby text contents are evenly distributed across the width of the
      base, with the first and last ruby text glyphs lining up with the
      corresponding first and last base glyphs. If the width of the ruby text
      is at least the width of the base, then the letters of the base are
      evenly distributed across the width of the ruby text.

      <div class="figure">
      <p><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in distribute-letter aligned ruby when ruby text is shorter than base"
      src="images/ra-dl.gif" /><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in distribute-letter aligned ruby when ruby text is longer than base"
      src="images/ra-dl-rb.gif" /></p>
      <p><b>Figure 4.2.6</b>: Distribute-letter ruby alignment</p>
      </div>
    </dd>
  <dt><strong>distribute-space</strong></dt>
    <dd>If the width of the ruby text is smaller than that of the base, then
      the ruby text contents are evenly distributed across the width of the
      base, with a certain amount of white space preceding the first and
      following the last character in the ruby text. That amount of white
      space is normally equal to half the amount of inter-character space of
      the ruby text. If the width of the ruby text is at least the width of
      the base, then the same type of space distribution applies to the base.
      In other words, if the base is shorter than the ruby text, the base is
      distribute-space aligned. This type of alignment
      is described by [[JLREQ]].
		<div class="figure">
      <p><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in distribute-space aligned ruby when ruby text is shorter than base"
      src="images/ra-ds.gif" /><img class="example" width="145" height="91"
      alt="Diagram of glyph layout in distribute-space aligned ruby when ruby text is longer than base"
      src="images/ra-ds-rb.gif" /></p>
      <p><b>Figure 4.2.7</b>: Distribute-space ruby alignment</p>
      </div>
    </dd>
  <dt><strong>line-edge</strong></dt>
    <dd>If the ruby text is not adjacent to a line edge, it is aligned as in
      'auto'. If it is adjacent to a line edge, then it is still aligned as in
      auto, but the side of the ruby text that touches the end of the line is
      lined up with the corresponding edge of the base. This type of alignment
      is described by [[JLREQ]]. This type of alignment is
      relevant only to the scenario where the ruby text is longer than the
      ruby base. In the other scenarios, this is just 'auto'.
		<div class="figure">
      <p><img class="example" width="146" height="109"
      alt="Diagram of glyph layout in line-edge aligned ruby when ruby text is shorter than base"
      src="images/ra-le-l.gif" /><img class="example" width="146"
      height="110"
      alt="Diagram of glyph layout in line-edge aligned ruby when ruby text is longer than base"
      src="images/ra-le-r.gif" /></p>
      <p><b>Figure 4.2.8</b>: Line edge ruby alignment</p>
      </div>
    </dd>
</dl>

<p>For a complex ruby with spanning elements, one additional consideration is
required. If the spanning element spans multiple 'rows' (other rbc or rtc
elements), and the ruby alignment requires space distribution among the
'spanned' elements, a ratio must be determined among the 'columns' of spanned
elements. This ratio is computed by taking into consideration the widest
element within each column.</p>

<p>In the context of this property, the 'left' and 'right' values are
synonymous with the 'start' and 'end' values respectively. I.e. their meaning
is relative according to the text layout flow. Most of the other CSS
properties interpret 'left' and 'right' on an 'absolute' term. See Appendix A
of the <a href="#CSS3TEXT">CSS3 Text Module</a> for further details.</p>

<h3 id="rubyover">
Ruby overhanging: the 'ruby-overhang' property</h3>

  <table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>ruby-overhang</dfn>
    <tr>
      <th>Value:
      <td>auto | start | end | none
    <tr>
      <th>Initial:
      <td>none
    <tr>
      <th>Applies to:
      <td>the parent of elements with display: ruby-text
    <tr>
      <th>Inherited:
      <td>yes
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>specified value (except for initial and inherit)
  </table>

<p>This property determines whether, and on which side, ruby text is allowed
to partially overhang any adjacent text in addition to its own base, when the
ruby text is wider than the ruby base. Note that ruby text is never allowed to
overhang glyphs belonging to another ruby base. <span class="issue"><span class="issuehead">Issue:&nbsp;</span> This rule must be broken if we are to allow support for jukugo ruby.</span> Also the user agent is free to assume
a maximum amount by which ruby text may overhang adjacent text. The user agent may use
the [[JIS4051]] recommendation of using one ruby text character
length as the maximum overhang length. Detailed rules for how ruby text can overhang adjacent characters for Japanese are described by [[JLREQ]].</p>

<p>Possible values:</p>
<dl>
  <dt><strong>auto</strong></dt>
    <dd>The ruby text can overhang text adjacent to the base on either side.   	  [[JLREQ]] and [[JIS4051]] specify the categories of characters that
      ruby text can overhang. The user agent is free to follow those recommendations or specify its own classes of
      characters to overhang. This is the initial value.
		<div class="figure">
      <p><img class="example" width="177" height="91"
      alt="Diagram of glyph layout in overhanging ruby" src="images/ro-a.gif" /></p>
      <p><b>Figure 4.3.1</b>: Ruby overhanging adjacent text</p>
      </div>
    </dd>
  <dt><strong>start</strong></dt>
    <dd>The ruby text can only overhang the text that precedes it. That means, for
      example, that ruby cannot overhang text that is to the right of it in
      horizontal LTR layout, and it cannot overhang text that is below it in
      vertical-ideographic layout.
		<div class="figure">
      <p><img class="example" width="199" height="91"
      alt="Diagram of glyph layout when ruby overhangs the preceding glyphs only"
      src="images/ro-s.gif" /></p>
      <p><b>Figure 4.3.2</b>: Ruby overhanging preceding text only</p>
      </div>
    </dd>
  <dt><strong>end</strong></dt>
    <dd>The ruby text can only overhang the text that follows it. That means, for
      example, that ruby cannot overhang text that is to the left of it in
      horizontal LTR layout, and it cannot overhang text that is above it in
      vertical-ideographic layout.
		<div class="figure">
      <p><img class="example" width="198" height="91"
      alt="Diagram of glyph layout when ruby overhangs the following characters only"
      src="images/ro-e.gif" /></p>
      <p><b>Figure 4.3.3</b>: Ruby overhanging following text only</p>
      </div>
    </dd>
  <dt><strong>none</strong></dt>
    <dd>The ruby text cannot overhang any text adjacent to its base, only its
      own base.

      <div class="figure">
      <p><img class="example" width="220" height="91"
      alt="Diagram of glyph layout in non-overhanging ruby"
      src="images/ro-n.gif" /></p>
      <p><b>Figure 4.3.4</b>: Ruby not allowed to overhang adjacent text</p>
      </div>
    </dd>
</dl>

<h3 id="rubyspan">
Ruby annotation spanning: the 'ruby-span' property</h3>

  <table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>ruby-span</dfn>
    <tr>
      <th>Value:
      <td>attr(x) |  none
    <tr>
      <th>Initial:
      <td>none
    <tr>
      <th>Applies to:
      <td>elements with display: ruby-text
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>&lt;number&gt;
  </table>

<p>This property controls the spanning behavior of annotation elements. </p>

<p class="note"><span class="note-label">Note:</span> A XHTML user agent may also use the <samp>rbspan</samp> 
attribute to get the same effect.</p>

<p>Possible values:</p>

<dl>
  <dt><strong>attr(x)</strong></dt>
    <dd>The value of attribute 'x' as a string value. The string value is 
    evaluated as a &lt;number&gt; to determine the number of ruby base elements to be 
    spanned by the annotation element. If the &lt;number&gt; is &#39;0&#39;, it is replaced by 
    &#39;1&#39;.The &lt;number&gt; is the computed value. </dd>
  <dt>none</dt>
  <dd>No spanning. The computed value is &#39;1&#39;.</dd>
</dl>

<p>The following example shows an XML example using the 'display' property 
values associated with the 'ruby structure and the 'ruby-span' property</p>
<pre class="xml">myruby       { display: ruby; }
myrbc        { display: ruby-base-container; }
myrb         { display: ruby-base; }
myrtc.before { display: ruby-text-container; ruby-position: before}
myrtc.after  { display: ruby-text-container; ruby-position: after}
myrt         { display: ruby-text; ruby-span: attr(rbspan); }
...
&lt;myruby&gt;
  &lt;myrbc&gt;
    &lt;myrb&gt;10&lt;/myrb&gt;
    &lt;myrb&gt;31&lt;/myrb&gt;
    &lt;myrb&gt;2002&lt;/myrb&gt;
  &lt;/myrbc&gt;
  &lt;myrtc class=&quot;before&quot;&gt;
    &lt;myrt&gt;Month&lt;/myrt&gt;
    &lt;myrt&gt;Day&lt;/myrt&gt;
    &lt;myrt&gt;Year&lt;/myrt&gt;
  &lt;/myrtc&gt;
  &lt;myrtc class=&quot;after&quot;&gt;
    &lt;myrt rbspan=&quot;3&quot;&gt;Expiration Date&lt;/myrt&gt;
  &lt;/myrtc&gt;
&lt;/myruby&gt;</pre>

<p class="issue"><span class="issuehead">Issue:&nbsp;</span> The i18n WG has requested the addition of a sample user agent default style sheet, as promised by Ruby Annotation section 3.4. See <a href="http://www.w3.org/Search/Mail/Public/advanced_search?keywords=&amp;hdr-1-name=subject&amp;hdr-1-query=[CSS3+Ruby]%20Default+stylesheet&amp;hdr-2-name=from&amp;hdr-2-query=&amp;hdr-3-name=message-id&amp;hdr-3-query=&amp;index-grp=Member__FULL+Public__FULL&amp;index-type=t&amp;type-index=public-i18n-core%40w3.org&amp;resultsperpage=20&amp;sortby=date">this thread</a>.</p>

<h2 id="profiles">
Profiles</h2>

<p>There are two modules defined by this module:</p>

<p>CSS3 Simple Ruby model</p>

<p>CSS3 Complex Ruby model.</p>

<p>They both contain all the properties specified by this CSS chapter, i.e. <a
href="#rubyalign">'ruby-align'</a>, <a href="#rubyover">'ruby-overhang'</a>, <a href="#rubypos">'ruby-position'</a> 
and <a href="#rubyspan">'ruby-span'</a>. They differ by the required
'display' property values. The Simple Ruby model requires the values: 'ruby',
'ruby-base' and 'ruby-text'. The Complex Ruby model requires in addition the
values: 'ruby-base-container' and 'ruby-text-container'.</p>

<h2 id="glossary">
Glossary</h2>
<dl>
  <dt><a id="g-bopomofo"><strong><span
  lang="zh">Bopomofo</span></strong></a></dt>
    <dd>37 characters and 4 tone markings used as phonetics in Chinese,
      especially standard Mandarin.</dd>
  <dt><a id="g-hanja"><strong><span
  lang="ko">Hanja</span></strong></a></dt>
    <dd>Subset of the Korean writing system that utilizes ideographic
      characters borrowed or adapted from the Chinese writing system. Also see
      <a href="#g-kanji"><span lang="ja">Kanji</span></a>.</dd>
  <dt><a id="g-hiragana"><strong><span
  lang="ja">Hiragana</span></strong></a></dt>
    <dd>Japanese syllabic script, or character of that script. Rounded and 
    cursive in appearance. Subset of the Japanese writing system, used together 
    with kanji and katakana. In recent times, mostly used to write Japanese 
    words when kanji are not available or appropriate, and word endings and 
    particles. Also see <a
      href="#g-katakana"><span lang="ja">Katakana</span></a>.</dd>
  <dt><a id="g-ideogram"><strong>Ideograph</strong></a></dt>
    <dd>A character that is used to represent an idea, word, or word component, 
    in contrast to a character from an alphabetic or syllabic script. The most 
    well-known ideographic script is used (with some variation) in East Asia 
    (China, Japan, Korea,...).</dd>
  <dt><a id="g-kana"><strong><span lang="ja">Kana</span></strong></a></dt>
    <dd>Collective term for hiragana and katakana.</dd>
  <dt><a id="g-kanji"><strong>Kanji</strong></a></dt>
    <dd>Japanese term for ideographs; ideographs used in Japanese. Subset of the 
    Japanese writing system, used together with hiragana and katakana. Also see <a
      href="#g-hanja"><span lang="ko">Hanja</span></a>.</dd>
  <dt><a id="g-katakana"><strong><span
  lang="ja">Katakana</span></strong></a></dt>
    <dd>Japanese syllabic script, or character of that script. Angular in 
    appearance. Subset of the Japanese writing system,&nbsp; used together with 
    kanji and hiragana. In recent times, mainly used to write foreign words. Also see <a
      href="#g-hiragana"><span lang="ja">Hiragana</span></a>.</dd>
  <dt><a id="g-monoruby" name="g-monoruby"><strong>Mono-ruby</strong></a></dt>
    <dd>In Japanese typography: Ruby associated with a single character of
      the base text.</dd>
  <dt><a id="g-ruby"><strong>Ruby</strong></a></dt>
    <dd>A run of text that appears in the vicinity of another run of text and
      serves as an annotation or a pronunciation guide for that text.</dd>
</dl>

<h2 id="conformance">
Conformance</h2>

<h3 id="conventions">
Document conventions</h3>

  <p>Conformance requirements are expressed with a combination of
  descriptive assertions and RFC 2119 terminology. The key words “MUST”,
  “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
  “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
  document are to be interpreted as described in RFC 2119.
  However, for readability, these words do not appear in all uppercase
  letters in this specification.
  
  <p>All of the text of this specification is normative except sections
  explicitly marked as non-normative, examples, and notes. [[!RFC2119]]</p>
  
  <p>Examples in this specification are introduced with the words “for example”
  or are set apart from the normative text with <code>class="example"</code>,
  like this:
  
  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>
  
  <p>Informative notes begin with the word “Note” and are set apart from the
  normative text with <code>class="note"</code>, like this:
  
  <p class="note">Note, this is an informative note.</p>

<h3 id="conformance-classes">
Conformance classes</h3>

  <p>Conformance to CSS Ruby Module
  is defined for three conformance classes:
  <dl>
    <dt><dfn title="style sheet!!as conformance class">style sheet</dfn>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
      style sheet</a>.
    <dt><dfn>renderer</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that interprets the semantics of a style sheet and renders
      documents that use them.
    <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
      that writes a style sheet.
  </dl>
  
  <p>A style sheet is conformant to CSS Ruby Module
  if all of its statements that use syntax defined in this module are valid
  according to the generic CSS grammar and the individual grammars of each
  feature defined in this module.
  
  <p>A renderer is conformant to CSS Ruby Module
  if, in addition to interpreting the style sheet as defined by the
  appropriate specifications, it supports all the features defined
  by CSS Ruby Module by parsing them correctly
  and rendering the document accordingly. However, the inability of a
  UA to correctly render a document due to limitations of the device
  does not make the UA non-conformant. (For example, a UA is not
  required to render color on a monochrome monitor.)
  
  <p>An authoring tool is conformant to CSS Ruby Module
  if it writes style sheets that are syntactically correct according to the
  generic CSS grammar and the individual grammars of each feature in
  this module, and meet all other conformance requirements of style sheets
  as described in this module.

<h3 id="partial">
Partial implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
  assign fallback values, CSS renderers <strong>must</strong>
  treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore
  as appropriate</a>) any at-rules, properties, property values, keywords,
  and other syntactic constructs for which they have no usable level of
  support. In particular, user agents <strong>must not</strong> selectively
  ignore unsupported component values and honor supported values in a single
  multi-value property declaration: if any value is considered invalid
  (as unsupported values must be), CSS requires that the entire declaration
  be ignored.</p>
  
<h3 id="experimental">
Experimental implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
  reserves a <a href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
  syntax</a> for proprietary and experimental extensions to CSS.
  
  <p>Prior to a specification reaching the Candidate Recommendation stage
  in the W3C process, all implementations of a CSS feature are considered
  experimental. The CSS Working Group recommends that implementations
  use a vendor-prefixed syntax for such features, including those in
  W3C Working Drafts. This avoids incompatibilities with future changes
  in the draft.
  </p>
 
<h3 id="testing">
Non-experimental implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
  non-experimental implementations are possible, and implementors should
  release an unprefixed implementation of any CR-level feature they
  can demonstrate to be correctly implemented according to spec.
  
  <p>To establish and maintain the interoperability of CSS across
  implementations, the CSS Working Group requests that non-experimental
  CSS renderers submit an implementation report (and, if necessary, the
  testcases used for that implementation report) to the W3C before
  releasing an unprefixed implementation of any CSS features. Testcases
  submitted to W3C are subject to review and correction by the CSS
  Working Group.
  
  <p>Further information on submitting testcases and implementation reports
  can be found from on the CSS Working Group's website at
  <a href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
  Questions should be directed to the
  <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
  mailing list.

<h2 class=no-num id="acknowledgments">
Acknowledgments</h2>

<p>This specification would not have been possible without the help from:</p>

<p>Stephen Deach, Martin Dürst,  Hideki Hiura(<span lang="ja">樋浦 秀樹</span>), Masayasu Ishikawa(<span lang="ja">石川
雅康</span>), Chris
Pratley, Takao Suzuki(<span lang="ja">鈴木 孝雄</span>), Frank Yung-Fong Tang, Chris Thrasher, Masafumi Yabe<span lang="ja">家辺
勝文</span>), Steve Zilles.</p>

<h2 class=no-num id="references">
References</h2>

<h3 class="no-num" id="normative-references">
Normative references</h3>
<!--normative-->

<h3 class="no-num" id="other-references">
Other references</h3>
<!--informative-->

<h2 class="no-num" id="index">
Index</h2>
<!--index-->

<h2 class="no-num" id="property-index">
Property index</h2>
<!-- properties -->

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
 
