<!DOCTYPE html public '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>
<html lang="en">
<head profile="http://www.w3.org/2006/03/hcard">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>CSS Exclusions and Shapes Module Level 1</title>
  <link rel="stylesheet" type="text/css" href="default.css" />
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css" />

  <style type="text/css">
    .singleImgExample {
    	display: block;
    	margin: auto;
    }
    
    .example-table {
    	table-layout: fixed; 
    	width: 100%; 
    }
    
    .example-table tr td img {
    	width: 90%;
    }
  </style>

</head>
<body>
    <div class="head">
        <!--logo-->
        <h1 id="css-exclusions-module">CSS Exclusions and Shapes Module Level 1</h1>
        <h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
        <dl>
            <dt>This version:</dt>
            <dd><a href="[VERSION]">http://www.w3.org/csswg/css3-exclusions/</a></dd>
            <dt>Latest version:</dt>
            <dd><a href="http://www.w3.org/TR/[SHORTNAME]/">http://www.w3.org/csswg/[SHORTNAME]/</a></dd>
            <dt>Previous version:</dt>
            <dd>None</dd>
            <dt>Editors:</dt>
            <dd class="vcard"><span class="fn">Vincent Hardy</span>, <span class="org">Adobe Systems, Inc.</span>, <span class="email">vhardy@adobe.com</span></dd>
            <dd class="vcard"><span class="fn">Rossen Atanassov</span>, <span class="org">Microsoft Corporation</span>, <span class="email">ratan@microsoft.com</span></dd>
        </dl>
        <!--copyright-->
        <hr title="Separator for header">
    </div>

    <h2 class="no-num no-toc" id="abstract">Abstract</h2>
    <p>
        CSS Exclusions extend the concept of CSS floats (see [[CSS21]]): they provide the
        ability to exclude arbitrary areas around which inline content can flow. Unlike
        CSS floats, exclusions can be applied to positioned elements.
    </p>
    <p>
        CSS Shapes allow changing the geometric shape of elements used for wrapping inline
        flow content outside or inside the element. Combining CSS Exclusions and CSS Shapes
        allows sophisticated layouts, for example having content flow into and/or around
        circles or other, arbitrarily complex shapes.
    </p>
    <h2 class="no-num no-toc" id="status">Status of this document</h2>
    <!--status-->
    <!--<p>The following features are at risk: &hellip;</p>-->
   
    <h2 class="no-num no-toc" id="contents">Table of contents</h2>
    <!--toc-->

    <h2 id="intro">Introduction</h2>
    <p><em>This section is not normative.</em></p>
    <p>
        We start by defining features that allow inline flow content to wrap around outside
        the border box of elements. The term "exclusion" refers to elements whose exterior
        is used to wrap inline flow content.
    </p>
    <p>
        Further, shapes allow changing the geometry of the contour used for wrapping inline
        flow content outside or inside an element.
    </p>

    <h3 id="placement">Module Interactions</h3>
    <p>This module does not replace or extend any prior CSS modules.</p>
    <!-- End section "Modules Interactions" -->

    <h3 id="values">Values</h3>
    <p>
        This specification follows the <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">
            CSS property definition conventions</a> from [[!CSS21]]. Value types not defined
        in this specification are defined in CSS Level 2 Revision 1 [[!CSS21]]. Other CSS
        modules may expand the definitions of these value types: for example [[CSS3COLOR]],
        when combined with this module, expands the definition of the &lt;color&gt; value
        type as used in this specification.</p>
    <p>
        In addition to the property-specific values listed in their definitions, all properties
        defined in this specification also accept the <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">
            inherit</a> keyword as their property value. For readability it has not been
        repeated explicitly.
    </p>

    <h3 id="definitions">Definitions</h3>
    <dfn>Exclusion Area</dfn>
    <p>
        The area used for excluding inline flow content around an exclusion element. By default the
        area is equivalent to the [[!CSS21]] border box. This specification modifies this
        definition by the introduction of 'shape-outside' property.
    </p>
    
    <dfn>Content Area</dfn>
    <p>
        The area used for layout of the inline flow content of an element. By default the
        area is equivalent to the [[!CSS21]] content box. This specification modifies this
        definition by the introduction of 'shape-inside' property.
    </p>

    <h2 id="exclusions">Exclusions</h2>
    <p>
        Exclusions are elements that will be avoided by the user agent when laying out inline
        flow content outside of them. The exclusion area is computed relative to the 'exclusion
        area' of the element on which the exclusion is specified. The shape properties can
        be used to change the shape of exclusions. Exclusions establish a wrapping context
        for all inline flow content descendants of their containing block.
    </p>
    <p class="note">
        Note, 'outside' is referring to content in DOM that is not a descendant of the element
        on which the 'wrap-flow' was specified. 'Inside' is referring to the content descendants
        of an element.
    </p>

    <h3 id="declaring-exclusions">Declaring Exclusions</h3>
    <p>
        To define an element as an exclusion, the 'wrap-flow' property must be specified
        to a value other than 'auto'.
    </p>
    
    <h4 id="wrap-flow-property">The 'wrap-flow' Property</h4>
    <p>
        Setting the 'wrap-flow' property to 'both', 'left', 'right', 'maximum' or 'clear' enables the
        exclusion inline flow content wrapping features, causing outside content to wrap
        around its exclusion area. The initial value for this property is 'auto', in this case
        the element will not be considered for wrapping inline flow content unless the 'float'
        property is specified to a value other than 'none'.
    </p>
    <p>
        The element will be considered as an exclusion for all inline flow content descendants
        of the exclusions' containing block.
    </p>
    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'wrap-flow'">wrap-flow</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>auto</var> | <var>both</var> | <var>left</var> | <var>right</var> | <var>maximum</var> | <var>clear</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>auto</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>as specified, except for floats all values compute to 'auto'</td>
        </tr>
    </table>
    
    <p>The values of this property have the following meanings:</p>
    <dl>
        <dt><dfn title="'wrap-flow'!!'auto'">auto</dfn></dt>
        <dd>
            For floats an exclusion is created, for all other elements an exclusion is not created.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-flow'!!'both'">both</dfn></dt>
        <dd>
            Wraps the outside inline flow content on all sides of the exclusion.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-flow'!!'left'">left</dfn></dt>
        <dd>
            Wraps the outside inline flow content on the left side of the exclusion leaving
            the area to the right of the exclusion empty.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-flow'!!'right'">right</dfn></dt>
        <dd>
            Wraps the outside inline flow content on the right side of the exclusion leaving
            the area to the left of the exclusion empty.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-flow'!!'maximum'">maximum</dfn></dt>
        <dd>
            Wraps the outside inline flow content on the larger of the left or right of the
            exclusions leaving the opposite area empty.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-flow'!!'clear'">clear</dfn></dt>
        <dd>
            Wraps the outside inline flow content on top and bottom of the exclusion only leaving
            the areas to the left and right of the exclusion empty.
        </dd>
    </dl>

    Note, floats are considered exclusions for compatibility and 'wrap-flow' computes
    to 'auto' when the 'float' property is anything other than 'clear'.

    <div class="example">
        <p>
            The 'wrap-flow' property values applied to an absolutely positioned element.
        </p>
<pre><code class="html">
&lt;style type="text/css"&gt; 
    #exclusion {
    	position: absolute; 
    	background: lightblue; 
    	border: 3px solid blue; 
    } 
&lt;/style&gt; 

&lt;div style=”position: relative; border: 1px solid black;”&gt; 
    &lt;div id=”exclusion”&gt; Donec metus messa, mollis...&lt;/div&gt; 
    Lorem ipsum dolor sit amet... 
&lt;/div&gt;
</code></pre>
        <table class="example-table">
            <tr>
                <td><code class="html">#exclusion{ wrap-flow: auto; }</code></td>
                <td><code class="html">#exclusion{ wrap-flow: both; }</code></td>
            </tr>
            <tr>
                <td><img src="images/exclusion_wrap_side_auto.png" alt="Example rendering for wrap-side: auto" /></td>
                <td><img src="images/exclusion_wrap_side_both.png" alt="Example rendering for wrap-side: both" /></td>
            </tr>
            <tr>
                <td><code class="html">#exclusion{ wrap-flow: left; }</code></td>
                <td><code class="html">#exclusion{ wrap-flow: right; }</code></td>
            </tr>
            <tr>
                <td><img src="images/exclusion_wrap_side_left.png" alt="Example rendering for wrap-side: left" /></td>
                <td><img src="images/exclusion_wrap_side_right.png" alt="Example rendering for wrap-side: right" /></td>
            </tr>
            <tr>
                <td><code class="html">#exclusion{ wrap-flow: maximum; }</code></td>
                <td><code class="html">#exclusion{ wrap-flow: clear; }</code></td>
            </tr>
            <tr>
                <td><img src="images/exclusion_wrap_side_maximum.png" alt="Example rendering for wrap-side: maximum" /></td>
                <td><img src="images/exclusion_wrap_side_clear.png" alt="Example rendering for wrap-side: clear" /></td>
            </tr>
        </table>
    </div>
    <!-- End section "wrap-flow Property" -->
    <!-- End section "Declaring Exclusions" -->
    
    <h3 id="scope-and-effect-of-exclusions">Scope and Effect of Exclusions</h3>
    <p>
        An exclusion affects the inline flow content descended from the exclusion's containing
        blocks (defined in <a href="http://www.w3.org/TR/CSS2/visudet.html#containing-block-details">
        CSS 2.1 10.1</a>) and that of all descendant elements of the same containing
        block. All inline flow content inside the containing block of the exclusions is
        affected. To stop the effect of exclusions defined outside any element, the 'wrap-through'
        property can be used (see definition of Propagation of Exclusions below).
    </p>

    <h4 id="wrap-margin-property">The 'wrap-margin' Property</h4>
    <p>
        The 'wrap-margin' property can be used to offset the inline flow content wrapping
        on the outside of exclusions. Offsets created by the 'wrap-margin' property are
        offset from the outside of the exclusion. This property takes on positive values
        only.
    </p>
    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'wrap-margin'">wrap-margin</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>&lt;length&gt;</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>0</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>the absolute length</td>
        </tr>
    </table>

    <!-- End secion "wrap-margin property" -->

    <h4 id="wrap-padding-property">The 'wrap-padding' Property</h4>
    <p>
        The 'wrap-padding' property can be used to offset to the inline flow content wrapping
        on the inside of elements. Offsets created by the 'wrap-padding' property are offset
        from the <span>content area</span> of the element. This property takes on positive values only.
    </p>
    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'wrap-padding'">wrap-padding</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>&lt;length&gt;</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>0</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>the absolute length</td>
        </tr>
    </table>
    <!-- End section "wrap-padding property" -->
    <!-- End section "Scope and Efect of Exclusions" -->
    
    <h3 id="propagation-of-exclusions">Propagation of Exclusions</h3>
    <p>
        Exclusions can be used to wrap all inline flow content within all descendants of
        the containing block of the exclusion. In order to prevent wrapping of inline flow
        content on any element around exclusions, the 'wrap-through' property can be used.
        Setting the 'wrap-through' property to 'none' will prevent the wrapping of inline
        flow content around exclusion elements defined outside. The 'wrap-through' property
        does not have an effect over exclusions contained inside the element.
    </p>

    <h4 id="wrap-through-property">The 'wrap-through' Property</h4>
    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'wrap-through'">wrap-through</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>wrap</var> | <var>none</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>wrap</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>as specified</td>
        </tr>
    </table>

    <p>The values of this property have the following meanings:</p>
    <dl>
        <dt><dfn title="'wrap-through'!!'wrap'">wrap</dfn></dt>
        <dd>
            Allows wrapping around exclusions defined outside the element.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'wrap-through'!!'none'">none</dfn></dt>
        <dd>
            Disables wrapping around exclusions defined outside the element.
        </dd>
    </dl>
    <div class="example">
        <p>
            Using the 'wrap-through' property to control the effect of exclusions.
        </p>
<pre><code class="html">
&lt;style type="text/css"&gt; 
    .exclusion  {
    	wrap-flow: both; 
    	position: absolute; 
    	background-color: rgba(220, 230, 242, 0.5); 
    } 
&lt;/style&gt; 

&lt;div style=”position: relative;”&gt; 
    &lt;div class=”exclusion”&gt;&lt;/div&gt; 
    &lt;div style=”wrap-through: wrap;”&gt; Lorem ipsum dolor sit amet...&lt;/div&gt; 
    &lt;div style=”wrap-through: none;”&gt; Lorem ipsum dolor sit amet...&lt;/div&gt; 
&lt;/div&gt;
</code></pre>

        <img class="singleImgExample" src="images/exclusion_wrap_through.png" alt="Example rendering of wrap-through: wrap | none" />
    </div>
    <!-- End section "wrap-through property" -->
    
    <h4 id="wrap-shorthand-property">The 'wrap' Shorthand Property</h4>
    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'wrap'">wrap</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>&lt;wrap-flow&gt;</var> || <var>&lt;wrap-margin&gt;</var> [ / <var>&lt;wrap-padding&gt;</var>]</td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>see individual properties</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>see individual properties</td>
        </tr>
    </table>
    <p>
        The 'wrap' property is a shorthand property for setting the exclusions properties
        at the same place in the style sheet.
    </p>
    <!-- End section "wrap shorthand property" -->
    <!-- End section "Propagation of Exclusions" -->
    
    <h3 id="order-of-exclusions">Order of Exclusions</h3>
    <p>
        The ordering of exclusions follows the visual order. Exclusions are applied in reverse
        to the document order in which they are defined. The last exclusion appears on top
        of all other exclusion, thus it affects the inline flow content of all other preceding
        exclusions or elements descendant of the same containing block. To change the ordering
        of positioned exclusions, z-index can be used.
    </p>

    <div class="example">
        <p>Ordering of exclusions.</p>
<pre><code class="html">
&lt;style type="text/css"&gt; 
    .exclusion  {
    	wrap-flow: both; 
    	position: absolute; 
    	width: 50%; 
    	height: 50%; 
    } 
&lt;/style&gt; 

&lt;div class=”exclusion” style=”top: 0px; left: 0px;”&gt; 
    Lorem ipsum dolor sit amet... 
&lt;/div&gt; 
&lt;div id="orderedExclusion" class=”exclusion” style=”top: 25%; left: 25%;”&gt; 
    Lorem ipsum dolor sit amet... 
&lt;/div&gt; 
&lt;div class=”exclusion” style=”top: 50%; left: 50%;”&gt; 
    Lorem ipsum dolor sit amet... 
&lt;/div&gt;
</code></pre>

    <table class="example-table">
        <tr>
            <td style="width:50%"><code class="html">#orderedExclusion{ z-index: auto; }</code></td>
            <td style="width:50%"><code class="html">#orderedExclusion{ z-index: 1; }</code></td>
        </tr>
        <tr>
            <td><img class="singleImgExample" src="images/exclusion_ordering.png" alt="Example rendering of default exclusion ordering." /></td>
            <td><img class="singleImgExample" src="images/exclusion_ordering_z_order.png" alt="Example rendering of default exclusion ordering." /></td>
        </tr>
    </table>

        

    </div>
    <!-- End section "Order of Exclusions" -->

    <h3 id="processing-model-of-exclusions">Processing Model of Exclusions</h3>
    <p><em>This section is not normative.</em></p>
    <p>
        Exclusions can be specified on positioned elements and elements can be positioned
        from their <a href="http://www.w3.org/TR/CSS21/visudet.html#static-position">static
        position</a>. Since, the static position of such elements depends on the inline
        flow content affected by the exclusion itself; there is a circular dependency between
        the two layout tasks. To break this circular dependency a two-pass layout approach
        is recommended. The first layout pass computes the static positions of all auto-positioned
        exclusions by laying out all content besides exclusions. The second pass is layout
        of all elements including all exclusions. Exclusions that depend on their static
        position will use the position calculated during the first layout pass.
    </p>
    <p class="note">
        Note, this may cause exclusions to overlap or be distant from their static position
        (compared to non-exclusions auto-positioned elements).
    </p>
    <p>
        Similar dependency exists for exclusions whose size or position is specified in
        percentage and the containing block size is specified as 'auto'. In such cases the
        size or position of the exclusion is calculated based on the size of the containing
        block calculated in the first layout pass.
    </p>
    <p>
        Since exclusions can be positioned on all levels of nested elements, if layout is
        restarted on every level of nesting, the time to complete layout will be exponential.
        To avoid such multiplicity of layout passes, the restart of the second layout pass
        should be scoped to the top-most containing block of exclusions. Similarly, restarting
        layout for the entire document is not necessary unless there are exclusions whose
        containing block is the initial containing block.
    </p>
    <!-- End section "Processing Model of Exclusions" -->
    <!-- End section "Exclusions" -->

    <h2 id="shapes">Shapes</h2>
    <p>
        Shapes are used to define arbitrary geometric contours around which inline flow
        content flows. There are two different types of shapes – 'outside' and 'inside'.
        The outside shape is used for wrapping inline flow content around exclusions. The
        inside shape is used for wrap inline flow content of <span>flow container</span> elements.
    </p>

    <dfn>Flow Container</dfn>
    <p>
        A flow container is an element with a 'display' value that is computed as 'block',
        'table-cell' or 'inline-block'.
    </p>
    <p class="note">
        Note, while the boundaries used for wrapping inline flow content outside and inside
        an element can be defined using shapes, the actual box model does not change. If
        the element has specified margins, borders or paddings they will be computed and
        rendered according to the [[CSS3-Box]] module.
    </p>
    
    <div class="example">
        <p>CSS 'shape' and CSS box model relation.</p>
<pre><code class="html">
&lt;style type="text/css"&gt; 
    .exclusion  {
    	wrap-flow: both; 
    	position: absolute; 
    	shape-outside: circle(50% 50% 50%); 
    	border: 3px solid red; 
    } 
&lt;/style&gt; 

&lt;div style=”position: relative; border: 1px solid black;”&gt; 
    &lt;div class=”exclusion”&gt;&lt;/div&gt; 
    Lorem ipsum dolor sit amet... 
&lt;/div&gt;
</code></pre>
        <img class="singleImgExample" src="images/shapes_CSS2.1_MBP.png" alt="Example rendering of circle shape and box model." />
    </div>
      
      <h3 id="shapes-from-svg-syntax">Shapes from SVG Syntax</h3>
      <p>
          Shapes can be specified using the SVG style basic shapes as defined by the SVG Shapes.
          When using the SVG syntax for defining shapes, all the lengths can be expressed
          in percentages resolved from the border box of the element. The (x,y) coordinates
          are relative to the element's border box. When defining shapes using percentages,
          the border box of the element must always be fully known in advance.
      </p>
      <h4 id="supported-svg-shapes">Supported SVG Shapes</h4>
      The following SVG shapes are supported by the CSS shapes module.
      <dl>
          <dt>rectangle(x, y, width, height, [[rx], ry])</dt>
          <dd>
              <ul>
                  <li><strong>x, y, width and height</strong> - define the bounding box of the rectangle</li>
                  <li><strong>rx</strong> - For rounded rectangles, the x-axis radius of the ellipse used
                      to round off the corners of the rectangle</li>
                  <li><strong>ry</strong> - For rounded rectangles, the y-axis radius of the ellipse used
                      to round off the corners of the rectangle</li>
              </ul>
          </dd>
      </dl>
      <dl>
          <dt>circle(cx, cy, r)</dt>
          <dd>
              <ul>
                  <li><strong>cx</strong> - The x-axis coordinate of the center of the circle</li>
                  <li><strong>cy</strong> - The y-axis coordinate of the center of the circle</li>
                  <li><strong>r</strong> - The radius of the circle. Note, cannot be expressed as a percentage.</li>
              </ul>
          </dd>
      </dl>
      <dl>
          <dt>ellipse(cx, cy, rx, ry)</dt>
          <dd>
              <ul>
                  <li><strong>cx</strong> - The x-axis coordinate of the center of the ellipse</li>
                  <li><strong>cy</strong> - The y-axis coordinate of the center of the ellipse</li>
                  <li><strong>rx</strong> - The x-axis radius of the ellipse</li>
                  <li><strong>ry</strong> - The y-axis radius of the ellipse</li>
              </ul>
          </dd>
      </dl>
      <dl>
          <dt>polygon([fillRule], x1, y1, x2, y2, x3, y3, … xn, yn)</dt>
          <dd>
              <ul>
                  <li><strong>fillRule</strong> - The filling rule used to determine the interior of the
                      polygon. See fill-rule property in SVG for details. Possible values are nonzero
                      or evenodd. Default value when omitted is nonzero.</li>
                  <li><strong>xi</strong> - The x-axis coordinate of the i-th vertex of the polygon</li>
                  <li><strong>yi</strong> - The y-axis coordinate of the i-th vertex of the polygon</li>
              </ul>
              <p>
                  If the polygon is not closed the user-agent will automatically add a new vertex
                  at the end.</p>
              <br>
          </dd>
      </dl>

      When a 'polygon' is not closed the user-agent will assume an additional vertex
      at the end.
    <!-- End section "Shapes from SVG Syntax -->
      
      <h3 id="shapes-from-image">Shapes from Image</h3>
      <p>
          Another way of defining shapes is by specifying a source image whose alpha channel
          is used to compute the outside-shape. When shapes are computed based on image, all
          values of the 'background-image' property can be applied.
      </p>
      <p>
          The shape is computed to be the path that encloses the area where the opacity of
          the specified image is greater than the 'shape-image-threshold' value. If the 'shape-image-threshold'
          is not specified, the initial value to be considered is 0.5.
      </p>
      <p class="note">
          Note, images can also define cavities and inline flow content should wrap inside
          them. In order to avoid that, another exclusion element can be overlaid.
      </p>
      <!-- End section "Shapes from image" -->

      <h3 id="declaring-shapes">Declaring Shapes</h3>
      <p>
          Shapes can be declared using the 'shape-outside', 'shape-inside' or a combination
          for both properties. Using the 'shape-outside' property changes the geometry of
          default shape used for exclusions, which is the 'exclusion area' of the element.
          The outside shape has visual effect when the element is an exclusion (otherwise
          the property has no affect). Using the 'shape-inside' property, the content box
          of an element is redefined and inline flow content wraps into that shape.
      </p>

      <h4 id="shape-outside-property">The 'shape-outside' Property</h4>
      <p>
          The 'shape-outside' allows advance layout results such as inline flow content wrapping
          around non-rectangular shapes. The property is used to modify the shape affecting
          the surrounding inline flow from a rectangular border box to an arbitrary geometry.
      </p>

        <table class="propdef">
            <tr>
                <th>Name:</th>
                <td><dfn title="'shape-outside'">shape-outside</dfn></td>
            </tr>
            <tr>
                <th>Value:</th>
                <td><var>auto</var> | <var>&lt;shape&gt;</var> | <var>&lt;image&gt;</var></td>
            </tr>
            <tr>
                <th>Initial:</th>
                <td>auto</td>
            </tr>
            <tr>
                <th>Applies to:</th>
                <td>block-level elements</td>
            </tr>
            <tr>
                <th>Inherited:</th>
                <td>no</td>
            </tr>
            <tr>
                <th>Percentages:</th>
                <td>N/A</td>
            </tr>
            <tr>
                <th>Media:</th>
                <td>visual</td>
            </tr>
            <tr>
                <th>Computed&nbsp;value:</th>
                <td>computed lengths for &lt;shape&gt;, the absolute URI for &lt;image&gt;, otherwise as specified</td>
            </tr>
        </table>
      
      <p>The values of this property have the following meanings:</p>
      <dl>
          <dt><dfn title="'shape-outside'!!'auto'">auto</dfn></dt>
          <dd>The shape is computed based on the border box of the element.</dd>
      </dl>
      <dl>
          <dt><dfn title="'shape-outside'!!'&lt;shape&gt;'">&lt;shape&gt;</dfn></dt>
          <dd>
              The shape is computed based on the values of one of 'rectangle',' circle', 'ellipse'
              or 'polygon'.
          </dd>
      </dl>
      <dl>
          <dt><dfn title="'shape-outside'!!'&lt;image&gt;'">&lt;image&gt;</dfn></dt>
          <dd>
              The shape is extracted and computed based on the alpha channel of the specified
              image.
          </dd>
      </dl>
      <!-- End section "The shape-outside Property" -->

      <h4 id="shape-inside-property">The 'shape-inside' Property</h4>
      <p>
          The 'shape-inside' modifies the shape of the inner inline flow content from rectangular
          content box to an arbitrary geometry.
      </p>

      <table class="propdef">
          <tr>
              <th>Name:</th>
              <td><dfn title="'shape-inside'">shape-inside</dfn></td>
          </tr>
          <tr>
              <th>Value:</th>
              <td><var>outside-shape</var> | <var>auto</var> | <var>&lt;shape&gt;</var> | <var>&lt;image&gt;</var></td>
          </tr>
          <tr>
              <th>Initial:</th>
              <td>outside-shape</td>
          </tr>
          <tr>
              <th>Applies to:</th>
              <td>block-level elements</td>
          </tr>
          <tr>
              <th>Inherited:</th>
              <td>no</td>
          </tr>
          <tr>
              <th>Percentages:</th>
              <td>N/A</td>
          </tr>
          <tr>
              <th>Media:</th>
              <td>visual</td>
          </tr>
          <tr>
              <th>Computed&nbsp;value:</th>
              <td>computed lengths for &lt;shape&gt;, the absolute URI for &lt;image&gt;, otherwise as specified</td>
          </tr>
      </table>
    <p>The values of this property have the following meanings:</p>
    <dl>
        <dt><dfn title="'shape-inside'!!'outside-shape'">outside-shape</dfn></dt>
        <dd>
            The shape is computed based on the computed value of the 'shape-outside' property.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'shape-inside'!!'auto'">auto</dfn></dt>
        <dd>
            The shape is computed based on the content box of the element.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'shape-inside'!!'&lt;shape&gt;'">&lt;shape&gt;</dfn></dt>
        <dd>
            The shape is computed based on the values of one of 'rectangle',' circle', 'ellipse'
            or 'polygon'.
        </dd>
    </dl>
    <dl>
        <dt><dfn title="'shape-inside'!!'&lt;image&gt;'">&lt;image&gt;</dfn></dt>
        <dd>
            The shape is extracted and computed based on the alpha channel of the specified
            image.
        </dd>
    </dl>
    <!-- End section "The shape-inside property" -->
    <h4 id="shape-image-threshold-property">The 'shape-image-threshold' Property</h4>
    <p>
        The 'shape-image-threshold' defines the alpha channel threshold used to extract
        the shape using an image. A value of 0.5 means that all the pixels that are more
        than 50% transparent define the path of the exclusion shape. The 'shape-image-threshold'
        applies to both 'shape-outside' and 'shape-inside'.
    </p>
    <p class="note">
        The specified value of 'shape-image-threshold' is applied to both images used for
        'shape-outside' and 'shape-inside'.
    </p>

    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'shape-image-threshold'">shape-image-threshold</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>&lt;alphavalue&gt;</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>0.5</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>alpha channel of the image specified by &lt;image&gt;</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>The same as the specified value after clipping the &lt;alphavalue&gt; to the range [0.0,1.0].</td>
        </tr>
    </table>
    <p>The values of this property have the following meanings:</p>
    <dl>
        <dt><dfn title="'shape-image-threshold'!!'&lt;alphavalue&gt;'">&lt;alphavalue&gt;</dfn></dt>
        <dd>
            A &lt;number&gt; value used to set the threshold used for extracting a shape from
            an image. Any values outside the range 0.0 (fully transparent) to 1.0 (fully opaque)
            will be clamped to this range.
        </dd>
    </dl>
    <!-- End section "The shape-image-threshold property" -->
    <h4 id="shape-shorthand-property">The 'shape' Shorthand Property</h4>

    <table class="propdef">
        <tr>
            <th>Name:</th>
            <td><dfn title="'shape'">shape</dfn></td>
        </tr>
        <tr>
            <th>Value:</th>
            <td><var>&lt;shape-outside&gt;</var> [ / <var>&lt;shape-inside&gt;</var> ] || <var>&lt;shape-image-threshold&gt;</var></td>
        </tr>
        <tr>
            <th>Initial:</th>
            <td>see individual properties</td>
        </tr>
        <tr>
            <th>Applies to:</th>
            <td>block-level elements</td>
        </tr>
        <tr>
            <th>Inherited:</th>
            <td>no</td>
        </tr>
        <tr>
            <th>Percentages:</th>
            <td>N/A</td>
        </tr>
        <tr>
            <th>Media:</th>
            <td>visual</td>
        </tr>
        <tr>
            <th>Computed&nbsp;value:</th>
            <td>see individual properties</td>
        </tr>
    </table>
    <p>
        The 'shape' property is a shorthand property for setting the individual shape properties
        at the same place in a style sheet.
    </p>

    <div class="example">
        <p>Style declaration using the 'shape' shorthand property.</p>
<pre><code class="html">
&lt;style type="text/css"&gt;
    .shape {
        shape: rectangle(50px, 50px, 200px, 100px) / url("shape_image.png")  0.7;
    }
&lt;/style&gt
</code></pre>
    </div>
    <p class="issue">The example above must be finished.</p>
    <!-- End section "Shape Shorthand property -->
    <!-- End section "Declaring Shapes" -->
    <!-- End section "Shapes" -->
    <h2 id="conformance">Conformance</h2>
    <h3 id="conventions">Document Conventions</h3>
    <p>
        Conformance requirements are expressed with a combination of descriptive assertions
        and RFC 2119 terminology. The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”,
        “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
        normative parts of this document are to be interpreted as described in RFC 2119.
        However, for readability, these words do not appear in all uppercase letters in
        this specification.
    </p>
    <p>
        All of the text of this specification is normative except sections explicitly marked
        as non-normative, examples, and notes. [[!RFC2119]]
    </p>
    <p>
        Examples in this specification are introduced with the words “for example” or are
        set apart from the normative text with <code>class="example"</code>, like this:
    </p>
    <div class="example">
        <p>This is an example of an informative example.</p>
    </div>
    <p>
        Informative notes begin with the word “Note” and are set apart from the normative
        text with <code>class="note"</code>, like this:
    </p>
    <p class="note">Note, this is an informative note.</p>
      <h3 id="conformance-classes">Conformance Classes</h3>
      <p>Conformance to CSS Exclusions and Shapes is defined for three conformance classes:</p>
      <dl>
          <dt><dfn title="style sheet!!as conformance class">style sheet</dfn></dt>
          <dd>
              A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style sheet</a>.</dd>
          <dt><dfn>renderer</dfn></dt>
          <dd>
              A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that interprets
              the semantics of a style sheet and renders documents that use them.</dd>
          <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
          <dd>
              A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a> that writes
              a style sheet.</dd>
      </dl>
      <p>
          A style sheet is conformant to CSS Exclusions and Shapes if all of its declarations
          that use properties defined in this module have values that are valid according
          to the generic CSS grammar and the individual grammars of each property as given
          in this module.
      </p>
      <p>
          A renderer is conformant to CSS Exclusions and Shapes if, in addition to interpreting
          the style sheet as defined by the appropriate specifications, it supports all the
          features defined by CSS Exclusions and Shapes by parsing them correctly and rendering
          the document accordingly. However, the inability of a UA to correctly render a document
          due to limitations of the device does not make the UA non-conformant. (For example,
          a UA is not required to render color on a monochrome monitor.)
      </p>
      <p>
          An authoring tool is conformant to CSS Exclusions and Shapes if it writes style
          sheets that are syntactically correct according to the generic CSS grammar and the
          individual grammars of each feature in this module, and meet all other conformance
          requirements of style sheets as described in this module.
      </p>
      <h3 id="partial">
          Partial Implementations</h3>
      <p>
          So that authors can exploit the forward-compatible parsing rules to assign fallback
          values, CSS renderers <strong>must</strong> treat as invalid (and <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">
              ignore as appropriate</a>) any at-rules, properties, property values, keywords,
          and other syntactic constructs for which they have no usable level of support. In
          particular, user agents <strong>must not</strong> selectively ignore unsupported
          component values and honor supported values in a single multi-value property declaration:
          if any value is considered invalid (as unsupported values must be), CSS requires
          that the entire declaration be ignored.
      </p>
      <h3 id="experimental">
          Experimental Implementations</h3>
      <p>
          To avoid clashes with future CSS features, the CSS2.1 specification reserves a <a
              href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed syntax</a>
          for proprietary and experimental extensions to CSS.</p>
      <p>
          Prior to a specification reaching the Candidate Recommendation stage in the W3C
          process, all implementations of a CSS feature are considered experimental. The CSS
          Working Group recommends that implementations use a vendor-prefixed syntax for such
          features, including those in W3C Working Drafts. This avoids incompatibilities with
          future changes in the draft.
      </p>
      <h3 id="testing">
          Non-Experimental Implementations</h3>
      <p>
          Once a specification reaches the Candidate Recommendation stage, non-experimental
          implementations are possible, and implementors should release an unprefixed implementation
          of any CR-level feature they can demonstrate to be correctly implemented according
          to spec.
      </p>
      <p>
          To establish and maintain the interoperability of CSS across implementations, the
          CSS Working Group requests that non-experimental CSS renderers submit an implementation
          report (and, if necessary, the testcases used for that implementation report) to
          the W3C before releasing an unprefixed implementation of any CSS features. Testcases
          submitted to W3C are subject to review and correction by the CSS Working Group.
      </p>
      <p>
          Further information on submitting testcases and implementation reports can be found
          from on the CSS Working Group's website at <a href="http://www.w3.org/Style/CSS/Test/">
              http://www.w3.org/Style/CSS/Test/</a>. Questions should be directed to the <a href="http://lists.w3.org/Archives/Public/public-css-testsuite">
                  public-css-testsuite@w3.org</a> mailing list.
      </p>
      <h3 id="cr-exit-criteria">
          CR Exit Criteria</h3>
      <p>
          For this specification to be advanced to Proposed Recommendation, there must be
          at least two independent, interoperable implementations of each feature. Each feature
          may be implemented by a different set of products, there is no requirement that
          all features be implemented by a single product. For the purposes of this criterion,
          we define the following terms:
      </p>
      <dl>
          <dt>independent </dt>
          <dd>
              each implementation must be developed by a different party and cannot share, reuse,
              or derive from code used by another qualifying implementation. Sections of code
              that have no bearing on the implementation of this specification are exempt from
              this requirement.</dd>
          <dt>interoperable</dt>
          <dd>
              passing the respective test case(s) in the official CSS test suite, or, if the implementation
              is not a Web browser, an equivalent test. Every relevant test in the test suite
              should have an equivalent test created if such a user agent (UA) is to be used to
              claim interoperability. In addition if such a UA is to be used to claim interoperability,
              then there must one or more additional UAs which can also pass those equivalent
              tests in the same way for the purpose of interoperability. The equivalent tests
              must be made publicly available for the purposes of peer review.
          </dd>
          <dt>implementation</dt>
          <dd>
              a user agent which:
              <ol class="inline">
                  <li>implements the specification.</li>
                  <li>is available to the general public. The implementation may be a shipping product
                      or other publicly available version (i.e., beta version, preview release, or “nightly
                      build”). Non-shipping product releases must have implemented the feature(s) for
                      a period of at least one month in order to demonstrate stability.</li>
                  <li>is not experimental (i.e., a version specifically designed to pass the test suite
                      and is not intended for normal usage going forward).</li>
              </ol>
          </dd>
      </dl>
      <p>
          The specification will remain Candidate Recommendation for at least six months.
      </p>
      <h2 class="no-num" id="acknowledgments">Acknowledgments</h2>
      <p>
          This specification is made possible by input from Stephen Zilles, Alexandru Chiculita,
          Andrei Bucur, Mihnea Ovidenie, Peter Sorotokin, Virgil Palanciuc, Alan Stearns,
          Arno Gourdol, Eugene Veselov, Arron Eicholz, Alex Mogilevsky, Chris Jones, Marcus
          Mielke, and the CSS Working Group members.
      </p>
      <h2 class="no-num" id="references">References</h2>
      <h3 class="no-num" id="normative-references">Normative references</h3>
      <!--normative-->
      <h3 class="no-num" id="other-references">Other references</h3>
      <!--informative-->
      <h2 class="no-num" id="index">Index</h2>
      <!--index-->
      <h2 class="no-num" id="property-index">Property index</h2>
      <!-- properties -->
  </body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
 
