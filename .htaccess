AddDefaultCharset UTF-8
DirectoryIndex Overview.html overview.html

RewriteEngine on
RewriteBase /csswg/

# Module Renames

RewriteRule ^css3-grid-align/(.*)$ css3-grid-layout/$1 [R=301,L]
RewriteRule ^css4-mediaqueries/(.*)$ mediaqueries/$1 [R=301,L]
RewriteRule ^css3-mediaqueries/(.*)$ mediaqueries3/$1 [R=301,L]
RewriteRule ^css3-text-layout/(.*)$ css-writing-modes-3/$1 [R=301,L]
RewriteRule ^css3-2d-transforms/(.*)$ css3-transforms/$1 [R=301,L]
RewriteRule ^css3-3d-transforms/(.*)$ css3-transforms/$1 [R=301,L]


# Versioning System Switchover
# ============================
# This set currently goes to the unversioned url,
# to encourage people to use the unversioned links.
# When you update one of the versions here to n+1,
# lock this url down to the level n version url.
# For example, if css3-foo currently redirects to css-foo,
# then when Foo Level 4 is written,
# instead redirect css3-foo to css-foo-3.
RewriteRule ^css3-align/(.*)$ http://dev.w3.org/csswg/css-align/$1 [R=301,L]
RewriteRule ^css3-animations/(.*)$ http://dev.w3.org/csswg/css-animations/$1 [R=301,L]
RewriteRule ^css3-background/(.*)$ http://dev.w3.org/csswg/css-backgrounds/$1 [R=301,L]
RewriteRule ^css3-box/(.*)$ http://dev.w3.org/csswg/css-box/$1 [R=301,L]
RewriteRule ^css3-break/(.*)$ http://dev.w3.org/csswg/css-break/$1 [R=301,L]
RewriteRule ^css3-cascade/(.*)$ http://dev.w3.org/csswg/css-cascade/$1 [R=301,L]
RewriteRule ^css3-color/(.*)$ http://dev.w3.org/csswg/css-color/$1 [R=301,L]
RewriteRule ^css3-conditional/(.*)$ http://dev.w3.org/csswg/css-conditional/$1 [R=301,L]
RewriteRule ^css3-content/(.*)$ http://dev.w3.org/csswg/css-content/$1 [R=301,L]
RewriteRule ^css3-exclusions/(.*)$ http://dev.w3.org/csswg/css-exclusions/$1 [R=301,L]
RewriteRule ^css3-flexbox/(.*)$ http://dev.w3.org/csswg/css-flexbox/$1 [R=301,L]
RewriteRule ^css3-fonts/(.*)$ http://dev.w3.org/csswg/css-fonts/$1 [R=301,L]
RewriteRule ^css3-gcpm/(.*)$ http://dev.w3.org/csswg/css-gcpm/$1 [R=301,L]
RewriteRule ^css3-grid-layout/(.*)$ http://dev.w3.org/csswg/css-grid/$1 [R=301,L]
RewriteRule ^css3-grid/(.*)$ http://dev.w3.org/csswg/css-grid-position/$1 [R=301,L]
RewriteRule ^css3-hierarchies/(.*)$ http://dev.w3.org/csswg/css-hierarchies/$1 [R=301,L]
RewriteRule ^css3-images/(.*)$ http://dev.w3.org/csswg/css-images-3/$1 [R=301,L]
RewriteRule ^css3-layout/(.*)$ http://dev.w3.org/csswg/css-template/$1 [R=301,L]
RewriteRule ^css3-linebox/(.*)$ http://dev.w3.org/csswg/css-inline/$1 [R=301,L]
RewriteRule ^css3-lists/(.*)$ http://dev.w3.org/csswg/css-lists/$1 [R=301,L]
RewriteRule ^css3-multicol/(.*)$ http://dev.w3.org/csswg/css-multicol/$1 [R=301,L]
RewriteRule ^css3-namespace/(.*)$ http://dev.w3.org/csswg/css-namespaces/$1 [R=301,L]
RewriteRule ^css3-overflow/(.*)$ http://dev.w3.org/csswg/css-overflow/$1 [R=301,L]
RewriteRule ^css3-page-template/(.*)$ http://dev.w3.org/csswg/css-page-template/$1 [R=301,L]
RewriteRule ^css3-page/(.*)$ http://dev.w3.org/csswg/css-page/$1 [R=301,L]
RewriteRule ^css3-positioning/(.*)$ http://dev.w3.org/csswg/css-position/$1 [R=301,L]
RewriteRule ^css3-preslev/(.*)$ http://dev.w3.org/csswg/css-preslev/$1 [R=301,L]
RewriteRule ^css3-regions/(.*)$ http://dev.w3.org/csswg/css-regions/$1 [R=301,L]
RewriteRule ^css3-ruby/(.*)$ http://dev.w3.org/csswg/css-ruby/$1 [R=301,L]
RewriteRule ^css3-sizing/(.*)$ http://dev.w3.org/csswg/css-sizing/$1 [R=301,L]
RewriteRule ^css3-speech/(.*)$ http://dev.w3.org/csswg/css-speech/$1 [R=301,L]
RewriteRule ^css3-syntax/(.*)$ http://dev.w3.org/csswg/css-syntax/$1 [R=301,L]
RewriteRule ^css3-text/(.*)$ http://dev.w3.org/csswg/css-text/$1 [R=301,L]
RewriteRule ^css3-text-decor/(.*)$ http://dev.w3.org/csswg/css-text-decor/$1 [R=301,L]
RewriteRule ^css3-transforms/(.*)$ http://dev.w3.org/csswg/css-transforms/$1 [R=301,L]
RewriteRule ^css3-transitions/(.*)$ http://dev.w3.org/csswg/css-transitions/$1 [R=301,L]
RewriteRule ^css3-ui/(.*)$ http://dev.w3.org/csswg/css-ui/$1 [R=301,L]
RewriteRule ^css3-values/(.*)$ http://dev.w3.org/csswg/css-values/$1 [R=301,L]
RewriteRule ^css3-writing-modes/(.*)$ http://dev.w3.org/csswg/css-writing-modes/$1 [R=301,L]
RewriteRule ^css4-background/(.*)$ http://dev.w3.org/csswg/css-backgrounds-4/$1 [R=301,L]
RewriteRule ^css4-images/(.*)$ http://dev.w3.org/csswg/css-images/$1 [R=301,L]
RewriteRule ^css4-page/(.*)$ http://dev.w3.org/csswg/css-page-4/$1 [R=301,L]
RewriteRule ^css4-pseudo/(.*)$ http://dev.w3.org/csswg/css-pseudo/$1 [R=301,L]
RewriteRule ^css4-text/(.*)$ http://dev.w3.org/csswg/css-text-4/$1 [R=301,L]
#RewriteRule ^css4-xxx/(.*)$ http://dev.w3.org/csswg/css-xxx/$1 [R=301,L]

# Probably need to merge these at some point?
#RewriteRule ^css3-tables-algorithms/(.*)$ css-tables-algorithm/$1 [R=301,L]
#RewriteRule ^css3-tables/(.*)$ css-table/$1 [R=301,L]

RewriteRule ^selectors3/(.*)$ selectors-3/$1
RewriteRule ^selectors4/(.*)$ selectors/$1
RewriteRule ^mediaqueries3/(.*)$ mediaqueries-3/$1
RewriteRule ^mediaqueries4/(.*)$ mediaqueries/$1


# Unversioned URLs
# ================
# Treat the unversioned url as master,
# and the numbered urls as tagged branches.
# Except for exceptional circumstances,
# always work in unversioned folders.
#
# Every unversioned folder needs a corresponding line here,
# redirecting the appropriate versioned url to the unversioned folder.
#
# When you hit CR with one level and wish to start editting a new level,
# `hg copy` the current unversioned folder into a versioned one,
# and update the rule below to n+1,
# so you can start work on the next level in an unversioned folder.
# That is, if you're current editting Foo level 3 in a css-foo folder,
# and it's hit CR and you'd like to start working on Foo level 4,
# run `hg copy css-foo css-foo-3`,
# then update the line below from css-foo-3 to css-foo-4.
# Start working on level 4 in the undisturbed unversioned folder.
#
# If you start a new level before CR,
# `hg copy` the unversioned folder into an n+1 versioned folder,
# then unversion it with `hg rename` when level n hits CR.
# That is, if you start work on Foo level 4 before Foo level 3 is done,
# run `hg copy css-foo css-foo-4` and work on it there.
# Then, when you're ready for level 4 to be the new baseline dev version
# (when level 3 is done, in CR, and not receiving major editor attention),
# run `hg mv css-foo css-foo-3` and `hg mv css-foo-4 css-foo`
# so that the mainline version is back in an unversioned folder,
# and update the rule below accordingly.
#
# If you start an entirely new spec,
# just make an unversioned folder
# and add a rule below redirecting an appropriately versioned url to your folder.

RewriteRule ^css-align-3/(.*)$ css-align/$1
RewriteRule ^css-animations-1/(.*)$ css-animations/$1
RewriteRule ^css-backgrounds-3/(.*)$ css-backgrounds/$1
RewriteRule ^css-box-3/(.*)$ css-box/$1
RewriteRule ^css-break-3/(.*)$ css-break/$1
RewriteRule ^css-cascade-3/(.*)$ css-cascade/$1
RewriteRule ^css-color-4/(.*)$ css-color/$1
RewriteRule ^css-color-correction-1/(.*)$ css-color-correction/$1
RewriteRule ^css-conditional-3/(.*)$ css-conditional/$1
RewriteRule ^css-content-3/(.*)$ css-content/$1
RewriteRule ^css-counter-styles-3/(.*)$ css-counter-styles/$1
RewriteRule ^css-device-adapt-1/(.*)$ css-device-adapt/$1
RewriteRule ^css-display-3/(.*)$ css-display/$1
RewriteRule ^css-exclusions-1/(.*)$ css-exclusions/$1
RewriteRule ^css-flexbox-1/(.*)$ css-flexbox/$1
RewriteRule ^css-font-loading-3/(.*)$ css-font-load-events/$1
RewriteRule ^css-fonts-3/(.*)$ css-fonts/$1
RewriteRule ^css-gcpm-3/(.*)$ css-gcpm/$1
RewriteRule ^css-grid-1/(.*)$ css-grid/$1
RewriteRule ^css-grid-position-3/(.*)$ css-grid-position/$1
# ^^^ Maybe merge into Grid? Or Position?
RewriteRule ^css-hierarchies-1/(.*)$ css-hierarchies/$1
RewriteRule ^css-images-4/(.*)$ css-images/$1
RewriteRule ^css-inline-3/(.*)$ css-inline/$1
# RewriteRule ^css-line-grid-3/(.*)$ css-line-grid/$1
# ^^^ Maybe fold into Inline?
RewriteRule ^css-lists-3/(.*)$ css-lists/$1
RewriteRule ^css-multicol-1/(.*)$ css-multicol/$1
RewriteRule ^css-namespaces-1/(.*)$ css-namespaces/$1
RewriteRule ^css-overflow-3/(.*)$ css-overflow/$1
RewriteRule ^css-page-3/(.*)$ css-page/$1
RewriteRule ^css-page-template-1/(.*)$ css-page-template/$1
RewriteRule ^css-position-3/(.*)$ css-position/$1
RewriteRule ^css-preslev-1/(.*)$ css-preslev/$1
RewriteRule ^css-pseudo-4/(.*)$ css-pseudo/$1
RewriteRule ^css-regions-1/(.*)$ css-regions/$1
RewriteRule ^css-ruby-1/(.*)$ css-ruby/$1
RewriteRule ^css-shapes-1/(.*)$ css-shapes/$1
# RewriteRule ^css-size-adjust-1/(.*)$ css-size-adjust/$1
# ^^^ Maybe fold into Device Adaptation?
RewriteRule ^css-sizing-3/(.*)$ css-sizing/$1
RewriteRule ^css-speech-1/(.*)$ css-speech/$1
RewriteRule ^css-style-attr-1/(.*)$ css-style-attr/$1
RewriteRule ^css-syntax-3/(.*)$ css-syntax/$1
RewriteRule ^css-template-1/(.*)$ css-template/$1
RewriteRule ^css-text-3/(.*)$ css-text/$1
RewriteRule ^css-text-decor-3/(.*)$ css-text-decor/$1
RewriteRule ^css-transforms-1/(.*)$ css-transforms/$1
RewriteRule ^css-transitions-1/(.*)$ css-transitions/$1
RewriteRule ^css-ui-3/(.*)$ css-ui/$1
RewriteRule ^css-values-3/(.*)$ css-values/$1
RewriteRule ^css-variables-1/(.*)$ css-variables/$1
RewriteRule ^css-writing-modes-3/(.*)$ css-writing-modes/$1

RewriteRule ^cssom-1/(.*)$ cssom/$1
RewriteRule ^cssom-values-1/(.*)$ cssom-values/$1
RewriteRule ^cssom-view-1/(.*)$ cssom-view/$1

RewriteRule ^selectors-4/(.*)$ selectors/$1
RewriteRule ^mediaqueries-4/(.*)$ mediaqueries/$1
#RewriteRule ^css-xxx-n/(.*)$ css-xxx/$1
