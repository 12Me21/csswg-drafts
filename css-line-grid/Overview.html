<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head profile="http://www.w3.org/2006/03/hcard"><meta content="text/html;
  charset=utf-8" http-equiv=Content-Type>

  <title>CSS Line Grid Module</title>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
  type="text/css">

  <style type="text/css">
    .sidenote-block {
    	border: 1px solid gray;
    	margin: auto;
    	text-align: left;
    	padding: 4pt;
    	position: relative;
    	max-width: 400pt;
    }
    .sidenote-body {
    	margin-left: 120pt;
    	font-size: 12pt;
    	line-height: 18pt;
    }
    .sidenote-note {
    	font-size: 10pt;
    	line-height: 18pt;
    	position: absolute; left: 4pt; top: 4pt;
    	width: 110pt;
    }
  </style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Line Grid Module</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 6 May 2011</h2>

   <dl>
    <dt>This version:

    <dd><a href="http://www.w3.org/TR/2011/ED-unknown-shortname-20110506">
     http://www.w3.org/TR/2011/ED-unknown-shortname-20110506</a> <!--
  <dt>Latest version:
    <dd><a href="http://www.w3.org/TR/css-line-grid">
    http://www.w3.org/TR/css-line-grid</a>

  <dt>Previous version:
    <dd><a href="http://www.w3.org/PreviousVersionURI">
    http://www.w3.org/PreviousVersionURI</a>
-->
     

    <dt>Editors:

    <dd class=vcard><span class=fn>Koji Ishii</span>, <span class=org>Invited
     Expert</span>, <span class=email><a
     href="mailto:kojiishi@gluesoft.co.jp">kojiishi@gluesoft.co.jp</a></span>
     
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>CSS is a language for describing the rendering of structured documents
   (such as HTML and XML) on screen, on paper, in speech, etc. This module
   contains the features of CSS level&nbsp;3 relating to <var
   class=issue>DESCRIBE HERE</var>. It includes and extends the functionality
   of CSS level&nbsp;2 <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{CSS21}}--></a>, which builds on CSS
   level&nbsp;1 <a href="#CSS1" rel=biblioentry>[CSS1]<!--{{CSS1}}--></a>.
   The main extensions compared to level&nbsp;2 are <var
   class=issue>SUMMARIZE HERE</var>.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bunknown-shortname%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;unknown-shortname&#8221; in the subject, preferably like this:
   &#8220;[<!---->unknown-shortname<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <p>The following features are at risk: &hellip;

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>
    <ul class=toc>
     <li><a href="#context"><span class=secno>1.1. </span>Background</a>

     <li><a href="#placement"><span class=secno>1.2. </span>Module
      Interactions</a>

     <li><a href="#conventions"><span class=secno>1.3. </span>Document
      Conventions</a>

     <li><a href="#values"><span class=secno>1.4. </span>Values</a>
    </ul>

   <li><a href="#defining-grids"><span class=secno>2. </span>Defining
    Grids</a>
    <ul class=toc>
     <li><a href="#layout-grid-line-prop"><span class=secno>2.1.
      </span>Define Line Grids: the &lsquo;<code
      class=property>layout-grid-line</code>&rsquo; property</a>
    </ul>

   <li><a href="#using-grids"><span class=secno>3. </span>Using Grids</a>
    <ul class=toc>
     <li><a href="#layout-grid-mode-prop"><span class=secno>3.1. </span>Grid
      Mode: the &lsquo;<code class=property>layout-grid-mode</code>&rsquo;
      property</a>

     <li><a href="#grid-shorthand-the-layout-grid-property"><span
      class=secno>3.2. </span>Grid Shorthand: the &lsquo;<code
      class=property>layout-grid</code>&rsquo; property</a>

     <li><a href="#grid-length-unit"><span class=secno>3.3. </span>The
      &lsquo;<code class=css>gd</code>&rsquo; length unit</a>

     <li><a href="#round-length"><span class=secno>3.4. </span>Rounding Down
      Lengths to Multiple of Units: &lsquo;<code class=css>*gd</code>&rsquo;
      and &lsquo;<code class=css>*em</code>&rsquo;</a>
    </ul>

   <li><a href="#conformance"><span class=secno>4. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conformance-classes"><span class=secno>4.1. </span>
      Conformance Classes</a>

     <li><a href="#partial"><span class=secno>4.2. </span> Partial
      Implementations</a>

     <li><a href="#experimental"><span class=secno>4.3. </span> Experimental
      Implementations</a>

     <li><a href="#cr-exit-criteria"><span class=secno>4.4. </span> CR Exit
      Criteria</a>
    </ul>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#other-references">Other references</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <h3 id=context><span class=secno>1.1. </span>Background</h3>

  <p><em>This section is not normative.</em>

  <p>This specification provides features to align lines and blocks to
   invisible grids in the document.

  <p>Aligning lines and blocks to grids provides the following benefits:

  <ul>
   <li>Vertical rhythm is kept for better readability.

   <li>Lines are aligned between columns in multi-column documents.

   <li>The top and the bottom margins of pictures are made equal, while
    keeping the vertical rhythm of text before and after the pictures.</li>
   <!--
    <li>Aligning to grids can sometimes be turned off for objects like tables,
      but then turned back on for the following text
      to the same grids as the one for the text before the objects.</li>
    -->

   <li>Layout lines are at the same position on every page in paged media.
    Keeping the position of the bottom line of a page has benefits for design
    and readability. This also improves the readability of duplex printing,
    two pages spreads, and displaying on slow display devices like e-ink.

   <li>East Asian layouts require vertical rhythm more often than other
    scripts do, even in single column, non-paged media documents, as defined
    in <a href="#JLREQ" rel=biblioentry>[JLREQ]<!--{{JLREQ}}--></a>.

   <li>It is often desirable in East Asian layouts to make the line width a
    multiple of <em>em</em> without fractions. Because most East Asian
    characters have 1em advance and most East Asian documents are justified,
    this minimizes cases where justification is needed to expand lines.
  </ul>

  <p>There are several types of objects in a document that can break the
   vertical rhythm. Examples include lines with different sizes of text,
   pictures, and tables.

  <div class=figure> <img alt="Vertical rhythm kept through pictures and
   different size of text in a multi-column document" height=246
   src=line-grid-multicol.png width=480>
   <p class=caption>Vertical rhythm kept through pictures and different size
    of text in a multi-column document.</p>
  </div>

  <div class=figure id=ex-sidenote>
   <div class=sidenote-block>
    <div class=sidenote-body> Sidenotes (and footnotes for that matter) are
     often set at a smaller size than the basic text. This smaller text
     should still line up with the basic text. Authors can achieve this
     effect by calculating appropriate font-size, line-height, and margins*.</div>

    <div class=sidenote-note> Only if author controls everything. It can
     easily be broken by user stylesheet, for instance.</div>
   </div>

   <p class=caption>Sidenotes are set at a smaller size, but still line up
    with the basic text.</p>
  </div>

  <p>This module provides the following capabilities:

  <ul>
   <li>Defining grids in the line progression direction.

   <li>Controling how lines and blocks align to the grids.

   <li>Rounding lengths down to multiples of units.
  </ul>

  <p>It is important to control these capabilities independently, so that,
   for example, aligning to grids can be turned off for tables, but can then
   be turned back on for aligning the following text to the grids.

  <h3 id=placement><span class=secno>1.2. </span>Module Interactions</h3>

  <p class=issue>Explain, normatively, how this module affects the definition
   of CSS.

  <p>This module replaces and extends the <var class=issue>SUMMARIZE
   HERE</var> features defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> sections <var class=issue>W.X
   and Y.Z</var>.

  <h3 id=conventions><span class=secno>1.3. </span>Document Conventions</h3>

  <p>Conformance requirements are expressed with a combination of descriptive
   assertions and RFC 2119 terminology. The key words “MUST”, “MUST
   NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”,
   “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in the
   normative parts of this document are to be interpreted as described in RFC
   2119. However, for readability, these words do not appear in all uppercase
   letters in this specification.

  <p>All of the text of this specification is normative except sections
   explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words “for
   example” or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word “Note” and are set apart from
   the normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.

  <h3 id=values><span class=secno>1.4. </span>Values</h3>

  <p>This specification follows the <a
   href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
   definition conventions</a> from <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Value types not defined in
   this specification are defined in CSS Level 2 Revision 1 <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>. Other CSS
   modules may expand the definitions of these value types: for example <a
   href="#CSS3COLOR" rel=biblioentry>[CSS3COLOR]<!--{{CSS3COLOR}}--></a>,
   when combined with this module, expands the definition of the
   &lt;color&gt; value type as used in this specification.

  <p>In addition to the property-specific values listed in their definitions,
   all properties defined in this specification also accept the <a
   href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>
   keyword as their property value. For readability it has not been repeated
   explicitly.

  <h2 id=defining-grids><span class=secno>2. </span>Defining Grids</h2>

  <h3 id=layout-grid-line-prop><span class=secno>2.1. </span>Define Line
   Grids: the &lsquo;<a href="#layout-grid-line"><code
   class=property>layout-grid-line</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=layout-grid-line>layout-grid-line</dfn>

    <tr>
     <th>Value:

     <td>none | auto | &lt;length&gt; | &lt;percentage&gt;

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>block containers

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>specified value
  </table>

  <p class=issue>TBD: I expect this to be very similar to the one in <a
   href="http://www.w3.org/TR/2001/WD-css3-text-20010517/#layout-grid-line-prop">CSS3
   module: text WD 20010517</a>.

  <p class=issue>Grid origin should be defined by the element that has this
   property, similar to &lsquo;<code class=css>position:
   static</code>&rsquo;. In that case, should this property inherit, or not
   inherit the property but inherit grid?

  <h2 id=using-grids><span class=secno>3. </span>Using Grids</h2>

  <h3 id=layout-grid-mode-prop><span class=secno>3.1. </span>Grid Mode: the
   &lsquo;<a href="#layout-grid-mode"><code
   class=property>layout-grid-mode</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=layout-grid-mode>layout-grid-mode</dfn>

    <tr>
     <th>Value:

     <td>none | baseline | block | line

    <tr>
     <th>Initial:

     <td>none

    <tr>
     <th>Applies to:

     <td>block containers

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed&nbsp;value:

     <td>specified value
  </table>

  <p>This property controls how lines and blocks are aligned to grids. Values
   have the following meanings:

  <dl>
   <dt><dfn id=none title="layout-grid-mode::none">&lsquo;<code
    class=css>none</code>&rsquo;</dfn>

   <dd>Do not align any objects to the grids.

   <dt><dfn id=baseline title="layout-grid-mode::baseline">&lsquo;<code
    class=css>baseline</code>&rsquo;</dfn>

   <dd>Align baselines to the line grids. <!--
        The line in this definition is a line box
        with before margin included if it is the first line of a block,
        and with after margin if last.
        -->
    The height is the height of the line box. Increasing heights to fit to
    grids is done by increasing the computed height of the line box. <span
    class=issue>How to make this value work well with images, headings, etc.
    is still an issue</span>

   <dt><dfn id=block title="layout-grid-mode::block">&lsquo;<code
    class=css>block</code>&rsquo;</dfn>

   <dd>Align blocks to the line grids. <!--
        The height of the block in this definition includes margins.
        -->
    The height includes paddings and borders, but not margins. Increasing
    heights to fit to grids is done by adding to computed margins.

   <dt><dfn id=line title="layout-grid-mode::line">&lsquo;<code
    class=css>line</code>&rsquo;</dfn>

   <dd>Align line boxes to the line grids. <!--
        The line in this definition is a line box
        with before margin included if it is the first line of a block,
        and with after margin if last.
        -->
    The height is the height of the line box. Increasing heights to fit to
    grids is done by increasing the computed height of the line box.
  </dl>

  <p class=issue>Handling margins and borders needs review

  <p>When this property is set to anything other than &lsquo;<code
   class=css>none</code>&rsquo;, the computed height of the object is
   increased to the smallest multiple of the grid height that is equal to or
   smaller than the original computed height.

  <p>When the value of this property is &lsquo;<code
   class=css>baseline</code>&rsquo;, the line box is then moved so that its
   baseline is aligned to the next closest grid.

  <p>When the value of this property is either &lsquo;<code
   class=css>block</code>&rsquo; or &lsquo;<code
   class=css>line</code>&rsquo;, the object is vertically centered within the
   grid row. If the computed height is larger than the grid space, then the
   object is centered within the smallest number of grid rows necessary for
   the object to fit in. The starting alignment point is moved accordingly.
   This is illustrated below, where <em>a</em> represents the numerical
   &lsquo;<a href="#layout-grid-line"><code
   class=property>layout-grid-line</code></a>&rsquo; value, and <em>b</em>
   and <em>c</em> are half the difference between the computed line-heights
   and either the layout-grid-line value or twice the value respectively.

  <div class=figure> <img alt="Layout of content within a line grid"
   src=lgl.gif>
   <p class=caption>Layout of content within a line grid, where <em>a</em>
    represents the layout-grid-line value, and the alignment baseline is at
    the bottom (after-edge).</p>
  </div>

  <p>As for regular height computation, the ruby box is treated specifically.
   In a similar fashion to the line-height determination process, only the
   ruby base element is considered for centering purposes, however the above
   and/or the after space should be sufficient to fit the ruby text above
   and/or after the base text within the grid-line space. If this is not the
   case, the grid-line size needs to be increased in multiple grid rows until
   the whole ruby box fits. <span class=issue>Is just ignoring ruby text
   enough? like rt { layout-grid-mode: ignore; } or nothing needed to be
   defined if line-stacking-ruby: auto does the work?</span>

  <p>Note that in order for this property to have an effect, line grids must
   be defined by the &lsquo;<a href="#layout-grid-line"><code
   class=property>layout-grid-line</code></a>&rsquo; property.

  <p class=issue>It is probably more desirable for Roman typography to align
   baselines to grids rather than center of line boxes if we consider cases
   like only a word in a line is large. But how can we align baselines to
   grids? Align baselines to center of grids? Lines may not fit within one
   grid. Align baselines to grids might work better, but it may not work well
   with settings headings to &lsquo;<code class=css>block</code>&rsquo;.

  <div class=example>
   <div class=sidefigure> <img alt="Large text wraps within line grids"
    height=244 src=line-grid-wrap.png width=276>
    <p class=caption>Large text wraps within line grids.</p>
   </div>

   <p>When a different size of text, such as a headings, wraps, it is usually
    aligned to grids as a block and the lines within the block do not align.</p>

   <p>This effect can be achieved by the following code:</p>

   <pre><code class=css>
<!-- -->body { line-grid-mode: line; }
<!-- -->h1 { line-grid-mode: block; }
<!-- --></code></pre>
   <br style="clear:both;">
  </div>

  <h3 id=grid-shorthand-the-layout-grid-property><span class=secno>3.2.
   </span>Grid Shorthand: the &lsquo;<code
   class=property>layout-grid</code>&rsquo; property</h3>

  <p class=issue>TBD

  <h3 id=grid-length-unit><span class=secno>3.3. </span>The &lsquo;<code
   class=css><span class=index id=gd title="length
   unit::gd">gd</span></code>&rsquo; length unit</h3>

  <p>The existence of a grid in an element makes it possible and very useful
   to express various measurements in that element in terms of grid units.
   Grid units are used very frequently in East Asian typography, especially
   for the left, right, top and bottom element margins.

  <p>Therefore, a new length unit is necessary, gd, to enable the author to
   specify the various measurements in terms of the grid.

  <p>For example, consider the following style:

  <pre><code class=css>P { layout-grid: strict both 20pt 15pt; margin: 1gd 3gd 1gd 2gd }</code></pre>

  <p>This way, all P elements would effectively acquire a 15pt top margin, a
   60pt right margin, a 15pt bottom margin and a 40pt left margin.

  <p>If no grid is specified, the gd unit should be treated the same as the
   em unit.

  <p class=issue>Just copied from old WD, need to refresh

  <div class=example id=vert-rhythm-p-margin>
   <p>The most common addition of vertical space is that inserted between
    paragraphs. If the rhythm of the page is to be maintained, the spacing of
    paragraphs should be related to the basic leading. This is achieved by
    setting top- and bottom-margins equal to &lsquo;<code
    class=css>1gd</code>&rsquo;.

   <pre><code class=css>
<!-- -->p {
<!-- -->  layout-grid-line: 1.5;
<!-- -->  layout-grid-mode: baseline;
<!-- -->  margin-top: 1gd;
<!-- -->  margin-bottom: 1gd;
<!-- -->}
<!-- --></code></pre>
  </div>

  <div class=example id=ex-gyou-dori>
   <p>East Asian layout often requires heights specified by the count of the
    line grids. In Japanese, this method is called Gyou-dori. Refer to <a
    href="#JLREQ" rel=biblioentry>[JLREQ]<!--{{JLREQ}}--></a> for more
    details about Gyou-dori.</p>

   <pre><code class=css>
<!-- -->h1 {
<!-- -->  line-grid-mode: block;
<!-- -->  min-height: 3gd; /* 3 Gyou-dori */
<!-- -->}
<!-- --></code></pre>
  </div>

  <h3 id=round-length><span class=secno>3.4. </span>Rounding Down Lengths to
   Multiple of Units: &lsquo;<code class=css><span class=index id=gd0
   title="length unit::*gd">*gd</span></code>&rsquo; and &lsquo;<code
   class=css><span class=index id=em title="length
   unit::*em">*em</span></code>&rsquo;</h3>

  <p>The &lsquo;<code class=property>width</code>&rsquo; and &lsquo;<code
   class=property>height</code>&rsquo; properties accept &lsquo;<code
   class=css>*gd</code>&rsquo; and &lsquo;<code class=css>*em</code>&rsquo;
   values. These values compute to &lsquo;<code class=css>auto</code>&rsquo;,
   and then the result will be rounded down to the largest multiple of the
   specified unit that is equal to or less than the original computed value.

  <p>The fraction is distributed evenly to the computed values of margins on
   each side. If it is used for &lsquo;<code
   class=property>height</code>&rsquo;, half the fraction is added to the top
   and the bottom margins. If for &lsquo;<code
   class=property>width</code>&rsquo;, to the left and the right margins.

  <p class=issue>Should this be a property instead?

  <p class=issue>Should have an option to left/right align instead of center?
   Can author align running head and page numbers with body with this design?

  <p class=issue>Use cases for non-East Asian layouts?

  <div class=example>
   <p>It is often desirable for East Asian layouts to make the line width to
    be multiple of <em>em</em> without fractions. Because most East Asian
    characters have 1em advance and most East Asian documents are justified,
    this minimizes cases where justification is needed to expand lines.</p>

   <pre><code class=css>
<!-- -->body {
<!-- -->  margin: 3cm 3.5cm 3cm 3cm;
<!-- -->  text-align: justify;
<!-- -->  width: *em;
<!-- -->}
<!-- --></code></pre>
  </div>

  <h2 id=conformance><span class=secno>4. </span> Conformance</h2>

  <h3 id=conformance-classes><span class=secno>4.1. </span> Conformance
   Classes</h3>

  <p>Conformance to <var class=issue>CSS TEMPLATE Module</var> is defined for
   three conformance classes:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">style
    sheet</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.

   <dt><dfn id=renderer>renderer</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that interprets the semantics of a style sheet and renders documents that
    use them.

   <dt><dfn id=authoring-tool>authoring tool</dfn>

   <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">UA</a>
    that writes a style sheet.
  </dl>

  <p>A style sheet is conformant to <var class=issue>CSS TEMPLATE
   Module</var> if all of its declarations that use properties defined in
   this module have values that are valid according to the generic CSS
   grammar and the individual grammars of each property as given in this
   module.

  <p>A renderer is conformant to <var class=issue>CSS TEMPLATE Module</var>
   if, in addition to interpreting the style sheet as defined by the
   appropriate specifications, it supports all the properties defined by <var
   class=issue>CSS TEMPLATE Module</var> by parsing them correctly and
   rendering the document accordingly. However, the inability of a UA to
   correctly render a document due to limitations of the device does not make
   the UA non-conformant. (For example, a UA is not required to render color
   on a monochrome monitor.)

  <p>An authoring tool is conformant to <var class=issue>CSS TEMPLATE
   Module</var> if it writes syntactically correct style sheets, according to
   the generic CSS grammar and the individual grammars of each property in
   this module.

  <h3 id=partial><span class=secno>4.2. </span> Partial Implementations</h3>

  <p>So that authors can exploit the forward-compatible parsing rules to
   assign fallback values, CSS renderers <strong>must</strong> treat as
   invalid (and <a
   href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignore as
   appropriate</a>) any at-rules, properties, property values, keywords, and
   other syntactic constructs for which they have no usable level of support.
   In particular, user agents <strong>must not</strong> selectively ignore
   unsupported component values and honor supported values in a single
   multi-value property declaration: if any value is considered invalid (as
   unsupported values must be), CSS requires that the entire declaration be
   ignored.

  <h3 id=experimental><span class=secno>4.3. </span> Experimental
   Implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS specifications
   reserve a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary property and value extensions to CSS. The CSS
   Working Group recommends that experimental implementations of features in
   CSS Working Drafts also use vendor-prefixed property or value names. This
   avoids any incompatibilities with future changes in the draft. Once a
   specification reaches the Candidate Recommendation stage, implementors
   should implement the non-prefixed syntax for any feature they consider to
   be correctly implemented according to spec.

  <h3 id=cr-exit-criteria><span class=secno>4.4. </span> CR Exit Criteria</h3>

  <p class=issue>[Change or remove the following CR exit criteria if the spec
   is not a module, but, e.g., a Note or a profile. This text was <a
   href="/Style/CSS/Tracker/actions/44"> decided on 2008-06-04.</a>]

  <p id=cr-exit-criteria> For this specification to be advanced to Proposed
   Recommendation, there must be at least two independent, interoperable
   implementations of each feature. Each feature may be implemented by a
   different set of products, there is no requirement that all features be
   implemented by a single product. For the purposes of this criterion, we
   define the following terms:

  <dl>
   <dt>independent

   <dd>each implementation must be developed by a different party and cannot
    share, reuse, or derive from code used by another qualifying
    implementation. Sections of code that have no bearing on the
    implementation of this specification are exempt from this requirement.

   <dt>interoperable

   <dd>passing the respective test case(s) in the official CSS test suite,
    or, if the implementation is not a Web browser, an equivalent test. Every
    relevant test in the test suite should have an equivalent test created if
    such a user agent (UA) is to be used to claim interoperability. In
    addition if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those equivalent
    tests in the same way for the purpose of interoperability. The equivalent
    tests must be made publicly available for the purposes of peer review.

   <dt>implementation

   <dd>a user agent which:
    <ol class=inline>
     <li>implements the specification.

     <li>is available to the general public. The implementation may be a
      shipping product or other publicly available version (i.e., beta
      version, preview release, or “nightly build”). Non-shipping product
      releases must have implemented the feature(s) for a period of at least
      one month in order to demonstrate stability.

     <li>is not experimental (i.e., a version specifically designed to pass
      the test suite and is not intended for normal usage going forward).
    </ol>
  </dl>

  <p>The specification will remain Candidate Recommendation for at least six
   months.

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p><var class=issue>[acknowledgments]</var>

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 23
    April 2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423">http://www.w3.org/TR/2009/CR-CSS2-20090423</a>
    </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references>Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS1>[CSS1]

   <dd>H&#229;kon Wium Lie; Bert Bos. <a
    href="http://www.w3.org/TR/2008/REC-CSS1-20080411"><cite>Cascading Style
    Sheets (CSS1) Level 1 Specification.</cite></a> 11 April 2008. W3C
    Recommendation. URL: <a
    href="http://www.w3.org/TR/2008/REC-CSS1-20080411">http://www.w3.org/TR/2008/REC-CSS1-20080411</a>
    </dd>
   <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 23
    April 2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090423">http://www.w3.org/TR/2009/CR-CSS2-20090423</a>
    </dd>
   <!---->

   <dt id=CSS3COLOR>[CSS3COLOR]

   <dd>Tantek &#199;elik; Chris Lilley; L. David Baron. <a
    href="http://www.w3.org/TR/2010/PR-css3-color-20101028"><cite>CSS Color
    Module Level 3.</cite></a> 28 October 2010. W3C Proposed Recommendation.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2010/PR-css3-color-20101028">http://www.w3.org/TR/2010/PR-css3-color-20101028</a>
    </dd>
   <!---->

   <dt id=JLREQ>[JLREQ]

   <dd>Yasuhiro Anan; et al. <a
    href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/"><cite>Requirements
    for Japanese Text Layout.</cite></a> 4 June 2009. W3C Working Group Note.
    URL: <a
    href="http://www.w3.org/TR/2009/NOTE-jlreq-20090604/">http://www.w3.org/TR/2009/NOTE-jlreq-20090604/</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>authoring tool, <a href="#authoring-tool" title="authoring
    tool"><strong>4.1.</strong></a>

   <li>layout-grid-line, <a href="#layout-grid-line"
    title=layout-grid-line><strong>2.1.</strong></a>

   <li>layout-grid-mode, <a href="#layout-grid-mode"
    title=layout-grid-mode><strong>3.1.</strong></a>
    <ul>
     <li>baseline, <a href="#baseline" title="layout-grid-mode,
      baseline"><strong>3.1.</strong></a>

     <li>block, <a href="#block" title="layout-grid-mode,
      block"><strong>3.1.</strong></a>

     <li>line, <a href="#line" title="layout-grid-mode,
      line"><strong>3.1.</strong></a>

     <li>none, <a href="#none" title="layout-grid-mode,
      none"><strong>3.1.</strong></a>
    </ul>

   <li>length unit
    <ul>
     <li>*em, <a href="#em" title="length unit, *em">3.4.</a>

     <li>gd, <a href="#gd" title="length unit, gd">3.3.</a>

     <li>*gd, <a href="#gd0" title="length unit, *gd">3.4.</a>
    </ul>

   <li>renderer, <a href="#renderer" title=renderer><strong>4.1.</strong></a>
    

   <li>style sheet
    <ul>
     <li>as conformance class, <a href="#style-sheet" title="style sheet, as
      conformance class"><strong>4.1.</strong></a>
    </ul>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><a class=property href="#layout-grid-line">layout-grid-line</a>

     <td>none | auto | &lt;length&gt; | &lt;percentage&gt;

     <td>none

     <td>block containers

     <td>no

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#layout-grid-mode">layout-grid-mode</a>

     <td>none | baseline | block | line

     <td>none

     <td>block containers

     <td>yes

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
